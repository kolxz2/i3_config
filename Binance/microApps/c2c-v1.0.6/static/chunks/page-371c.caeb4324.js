(self.webpackJsonp_c2c=self.webpackJsonp_c2c||[]).push([[485],{XgT2:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Ne});var a=i("/SIk"),r=i.n(a),s=i("Q755"),l=i("szIg"),n=i("krwy"),o=i("vM3x"),c=i.n(o),u=i("G6rc"),d=i("7IDl"),p=i("BXEJ"),m=i("R9ZS"),f=i("WXf7"),x=i("PKgr"),y=i("CVOX"),v=i("j/s1"),T=i("KkEV"),b=i("HJnm"),g=i("q/bM"),C=i("SbIO"),h=i("OaRt"),S=i("03hH"),Z=i("sJ8p"),k=r().createElement;const _=function({clickHandle:e}){const[t]=(0,n.$)(),{tradeType:i}=(0,l.useSelector)((e=>e.quickTrade)),{pageFiatConfig:s}=(0,l.useSelector)((e=>e.common)),{hasBuy:o,hasSell:c}=(0,a.useMemo)((()=>(null===s||void 0===s?void 0:s.length)>1?{hasBuy:!0,hasSell:!0}:1===(null===s||void 0===s?void 0:s.length)?"BUY"===s[0].side?{hasBuy:!0,hasSell:!1}:{hasBuy:!1,hasSell:!0}:{hasBuy:!1,hasSell:!1}),[s]),u=(0,a.useMemo)((()=>s&&s.length>1?k(r().Fragment,null,k(Z.Z,{id:"C2Cexrpessbuy_tab_buy",tx:"QT",variant:"QTc_pcSelect_item",sx:{borderRadius:"4px 0 0 0",bg:"buy"===i&&o?"#FFFFFF":"#F5F5F5",color:"buy"===i&&o?"#202630":"#AEB4BC",cursor:o?"pointer":"not-allowed"},onClick:()=>{"sell"===i&&o&&e("buy")}},t("c2c-ui-express-buy")),k(Z.Z,{id:"C2Cexrpesssell_tab_sell",tx:"QT",variant:"QTc_pcSelect_item",sx:{borderRadius:"0 4px 0 0",bg:"sell"===i&&c?"#FFFFFF":"#F5F5F5",color:"sell"===i&&c?"#202630":"#AEB4BC",cursor:c?"pointer":"not-allowed"},onClick:()=>{"buy"===i&&c&&e("sell")}},t("c2c-ui-express-sell"))):s&&1===s.length?k(Z.Z,{id:"buy"===i?"C2Cexrpessbuy_tab_buy":"C2Cexrpesssell_tab_sell",tx:"QT",variant:"QTc_pcSelect_only_one_item"},t("sell"===i?"c2c-ui-express-sell":"c2c-ui-express-buy")):void 0),[o,c,s,i,t]);return k(T.Z,{tx:"QT",variant:"QTc_pcSelect"},u)};var w=r().createElement;const N=function({clickHandle:e}){const[t]=(0,n.$)(),{tradeType:i}=(0,l.useSelector)((e=>e.quickTrade)),{pageFiatConfig:r}=(0,l.useSelector)((e=>e.common)),{hasBuy:s,hasSell:o}=(0,a.useMemo)((()=>(null===r||void 0===r?void 0:r.length)>1?{hasBuy:!0,hasSell:!0}:1===(null===r||void 0===r?void 0:r.length)?"BUY"===r[0].side?{hasBuy:!0,hasSell:!1}:{hasBuy:!1,hasSell:!0}:{hasBuy:!1,hasSell:!1}),[r]);return w(T.Z,{tx:"QT",variant:"QTc_mobSelect"},w(Z.Z,{id:"C2Cexrpessbuy_tab_buy",tx:"QT",variant:"QTc_mobSelect_item",sx:{color:"buy"===i&&s?"#0B0E11":"#AEB4BC"},onClick:()=>{"sell"===i&&s&&e("buy")}},t("c2c-ui-express-buy")),w(Z.Z,{sx:{height:"18px",width:"1px",bg:"#EAECEF",mx:"16px"}}),w(Z.Z,{id:"C2Cexrpesssell_tab_sell",tx:"QT",variant:"QTc_mobSelect_item",sx:{color:"sell"===i&&o?"#0B0E11":"#AEB4BC"},onClick:()=>{"buy"===i&&o&&e("sell")}},t("c2c-ui-express-sell")))};var E=i("hUwf"),Q=i("RPIV"),q=i("xJ8I"),B=i("Fgm1"),F=i("XB62"),M=i("bD2I"),A=i("xRy8"),$=i("g1g7"),L=i("x5Ld"),P=r().createElement;const D=function(){const{p2pTrade:e}=y.Z.site(),t=(0,d.tv)(),[i]=(0,n.$)(),r=(0,l.useDispatch)(),{loginStatus:s}=(0,S.Z)(),{isMobile:o,fiatList:c}=(0,l.useSelector)((e=>e.common)),{fiat:u,tradeType:p,asset:m}=(0,l.useSelector)((e=>e.quickTrade)),f=(0,a.useMemo)((()=>{let e=[];return c&&null!==c&&void 0!==c&&c.length&&(e=c.map((({currencyCode:e,iconUrl:t})=>({label:e,value:e,iconUrl:t}))),e.sort(((e,t)=>`${e.value}`.localeCompare(`${t.value}`)))),e}),[c]),v=(0,a.useCallback)((e=>{const t=f.find((t=>t.value===e));return t?P(T.Z,{alignItems:"center"},P(E.Z,{width:"16px",height:"16px",src:t.iconUrl,ml:"-4px",mr:"10px"}),P(C.Z,null,t.label)):null}),[f]),b=(0,a.useCallback)((async a=>{r.quickTrade.update({firstRender:!1});const{tradeConfig:l}=await r.common.postPageTradeConfig({param:{fiat:a},areaType:"EXPRESS"}),{asset:n,tradeType:o}=(0,x.V)(l,p,m);if(n&&p){await(0,L.setCookie)("common_fiat",a,0),s&&"buy"===o&&r.trade.getOrderT1Tips({fiatUnit:a});const e={fiat:a,tradeType:o,asset:n};r.quickTrade.update(e)}else{r.quickTrade.update({firstRender:!0});if(!(await $.Z.info({title:"",message:i("c2c-ui-express-fiatnotsupport").replace("{AUD}",a),confirmTxt:i("c2c-ui-express-dialog-gotop2p"),cancelTxt:i("c2c-ui-fiatOrders-cancel"),needCancel:!0})))return;t.push(`${e}/${p}/${m}?fiat=${a}`)}}),[s,p,m]),g=f.map(((e,t)=>P(F.W,{sx:{width:o?"343px":"374px"},key:t,value:e.value},P(T.Z,{alignItems:"center"},P(E.Z,{width:"16px",height:"16px",src:e.iconUrl,ml:"-4px",mr:"8px"}),P(C.Z,null,e.label)))));return P(M.Z,{id:"buy"===p?"C2Cexrpessbuy_dropdown_amount":"C2Cexrpesssell_dropdown_amount",width:["90px"],value:u,renderValue:v,sx:{">div:nth-of-type(1)":{border:0,marginTop:0},">div.bn-sdd-dropdown":{marginLeft:o?"-248px":"-278px"}},onChange:b},P(A.Y,null,g))};var U=r().createElement;const O=function(){const e=(0,l.useDispatch)(),{tradeType:t,asset:i}=(0,l.useSelector)((e=>e.quickTrade)),{isMobile:r,pageFiatConfig:s}=(0,l.useSelector)((e=>e.common)),n=(0,a.useMemo)((()=>{let e=[];if((null===s||void 0===s?void 0:s.length)>0)for(let i=0;i<(null===s||void 0===s?void 0:s.length);i++)if(s[i].side===t.toUpperCase()){e=s[i].assets;break}return e=e.map((e=>e.asset)),e}),[s,t]),o=(0,a.useCallback)((e=>{const t=n.find((t=>t===e));return t?U(T.Z,{alignItems:"center"},U(E.Z,{width:"16px",height:"16px",src:`${g.Xs}/static/images/coin/${t.toLowerCase()}.svg`,ml:"-4px",mr:"8px"}),U(C.Z,null,t)):null}),[n]),c=n.map((e=>U(F.W,{sx:{width:r?"343px":"374px"},key:e,value:e},U(T.Z,{alignItems:"center"},U(E.Z,{width:"16px",height:"16px",src:`${g.Xs}/static/images/coin/${e.toLowerCase()}.svg`,ml:"-4px",mr:"8px"}),U(C.Z,null,e))))),u=(0,a.useCallback)((t=>{e.quickTrade.update({firstRender:!1}),e.quickTrade.update({asset:t})}),[e.quickTrade]);return U(M.Z,{id:"buy"===t?"C2Cexrpessbuy_dropdown_crypto":"C2Cexrpesssell_dropdown_crypto",width:["90px"],value:i,renderValue:o,sx:{">div:nth-of-type(1)":{border:0,marginTop:0},">div.bn-sdd-dropdown":{marginLeft:r?"-248px":"-278px"}},onChange:u},U(A.Y,null,c))};var Y=r().createElement;const I=function({fiatError:e,setFiatError:t,assetError:i,setAssetError:r,setSumit:s}){const[o]=(0,n.$)(),u=(0,l.useDispatch)(),d=(0,m.VQ)(),{loginStatus:p,toNeedLogin:f}=(0,S.Z)(),{tradeType:x,fiat:v,fiatNum:b,assetNum:h,priceLimit:k,amountLimit:_,asset:w}=(0,l.useSelector)((e=>e.quickTrade)),{userAsset:N,useNewTransfer:F}=(0,l.useSelector)((e=>e.common)),{quotedPriceDate:M}=(0,l.useSelector)((e=>e.editAdv)),{0:A,1:$}=(0,a.useState)(""),{0:L,1:P}=(0,a.useState)(""),U=(0,a.useCallback)((e=>/^0{2,}/.test(e)?"0":/^0{1,}/.test(e)&&Number(e)>=1?e.replace(/^0{1,}/,""):e),[]);(0,a.useEffect)((()=>{$(b)}),[b]),(0,a.useEffect)((()=>{P(h)}),[h]);const I=(0,a.useMemo)((()=>{if(N&&(null===N||void 0===N?void 0:N.length)>0){var e,t;const i=(null===(e=N.filter((e=>e.asset===w))[0])||void 0===e?void 0:e.freeze)||0;return new(c())(null===(t=N.filter((e=>e.asset===w))[0])||void 0===t?void 0:t.free).plus(i).toFixed(M.assetScale,1)}return 0}),[w,N,M.assetScale]);(0,a.useEffect)((()=>{"sell"==x&&L>Number(I)?(r("C2C\u4f59\u989d\u4e0d\u8db3"),s(!0)):"sell"==x&&L<=Number(I)&&(r(""),s(!0))}),[x,L,I]);let R=null;const z=(0,a.useCallback)((e=>{if(new RegExp(`^-?\\d+\\.?\\d{0,${M.currencyScale}}$`).test(e))clearTimeout(R),$(U(e)),s(!1),R=setTimeout((()=>e<Number(null===k||void 0===k?void 0:k.lowerLimit)?(t("buy"===x?o("c2c-ui-express-minibuyamount").replace("{\xa5100}",M.currencySymbol+(null===k||void 0===k?void 0:k.lowerLimit)):o("c2c-ui-express-minisellamount").replace("{\xa5100}",M.currencySymbol+(null===k||void 0===k?void 0:k.lowerLimit))),u.quickTrade.update({fiatNum:U(e)}),void s(!0)):e>Number(null===k||void 0===k?void 0:k.upperLimit)?(t("buy"===x?o("c2c-ui-express-expresssupportamount").replace("{\xa5100}",M.currencySymbol+k.upperLimit):o("c2c-ui-express-sellamountavailable").replace("{100}",M.currencySymbol+k.upperLimit)),s(!0),void u.quickTrade.update({fiatNum:U(e)})):(t(!1),r(!1),u.quickTrade.update({fiatNum:U(e),byType:"BY_MONEY",assetNum:new(c())(U(e)).dividedBy(M.referencePrice).toFixed(M.assetScale,1)}),void s(!0))),300);else{if(e)return void s(!0);clearTimeout(R),$(""),s(!0),k&&t("buy"===x?o("c2c-ui-express-minibuyamount").replace("{\xa5100}",M.currencySymbol+(null===k||void 0===k?void 0:k.lowerLimit)):o("c2c-ui-express-minisellamount").replace("{\xa5100}",M.currencySymbol+(null===k||void 0===k?void 0:k.lowerLimit))),u.quickTrade.update({fiatNum:"",assetNum:""})}return()=>{clearTimeout(R)}}),[x,M.referencePrice,M.currencyScale,M.assetScale,k,u.quickTrade]);let X=null;const V=(0,a.useCallback)((e=>{if(new RegExp(`^-?\\d+\\.?\\d{0,${M.assetScale}}$`).test(e))clearTimeout(X),P(U(e)),s(!1),X=setTimeout((()=>"sell"===x&&e>Number(I)?(r("C2C\u4f59\u989d\u4e0d\u8db3"),s(!0),void u.quickTrade.update({assetNum:U(e)})):e<Number(null===_||void 0===_?void 0:_.lowerLimit)?(r("buy"===x?o("c2c-ui-express-minibuyquantity").replace("{0.01 BTC}",(null===_||void 0===_?void 0:_.lowerLimit)+w):o("c2c-ui-express-minisellquantity").replace("{0.01 BTC}",(null===_||void 0===_?void 0:_.lowerLimit)+w)),s(!0),void u.quickTrade.update({assetNum:U(e)})):e>Number(null===_||void 0===_?void 0:_.upperLimit)?(r(o("c2c-ui-express-expresssupportquantity").replace("{287.12 USDT}",(null===_||void 0===_?void 0:_.upperLimit)+w)),s(!0),void u.quickTrade.update({assetNum:U(e)})):(t(!1),r(!1),u.quickTrade.update({assetNum:U(e),byType:"BY_AMOUNT",fiatNum:new(c())(U(e)).multipliedBy(M.referencePrice).toFixed(M.currencyScale,1)}),void s(!0))),300);else{if(e)return void s(!0);clearTimeout(X),P(""),s(!0),_&&r("buy"===x?o("c2c-ui-express-minibuyquantity").replace("{0.01 BTC}",(null===_||void 0===_?void 0:_.lowerLimit)+w):o("c2c-ui-express-minisellquantity").replace("{0.01 BTC}",(null===_||void 0===_?void 0:_.lowerLimit)+w)),u.quickTrade.update({fiatNum:"",assetNum:""})}return()=>{clearTimeout(X)}}),[x,_,w,M.referencePrice,M.currencyScale,M.assetScale,u.quickTrade,I]),{transfer:G,founding:H}=y.Z.site(),K=(0,a.useMemo)((()=>"sell"!==x||i?"":Y(T.Z,{tx:"QT",variant:"sellAssetInfo"},Y(C.Z,null,o("c2c-ui-express-sell-balance")),Y(C.Z,{ml:"4px"},p?I:"--"),p?Y(C.Z,{ml:"4px"},w):null,Y(B.Z,{href:F?H:G,cssStyle:{textDecoration:"none"}},Y(T.Z,{id:"C2Cexrpesssell_btn_transfer"},Y(E.Z,{ml:"8px",width:"16px",height:"16px",src:`${g.Xs}/static/images/c2c/Groupquick_transfer.svg`}),Y(C.Z,{ml:"4px",color:"#D89F00"},o("c2c-ui-express-sell-transfer")))))),[G,H,w,F,I,x,i,p,o]),J=(0,a.useMemo)((()=>{if(("cn"===d||"zh-CN"===d)&&"CNY"===v&&A){const e=Number.parseInt(A,10).toString().split("").length;let t=null;switch(e){case 3:t="\u767e";break;case 4:t="\u5343";break;case 5:t="\u4e07";break;case 6:t="\u5341\u4e07";break;case 7:t="\u767e\u4e07";break;case 8:t="\u5343\u4e07";break;case 9:t="\u4ebf"}return e>9&&(t="\u4ebf"),t}return""}),[d,v,A]),W=(0,a.useMemo)((()=>{var e;const t=(null===(e=N.filter((e=>e.asset===w))[0])||void 0===e?void 0:e.free)||0;let i=null!==_&&void 0!==_&&_.upperLimit?Math.min(Number(t),Number(null===_||void 0===_?void 0:_.upperLimit)):Number(t);return"buy"===x?new(c())(null===_||void 0===_?void 0:_.upperLimit).toFixed(M.assetScale,1):new(c())(i).toFixed(M.assetScale,1)}),[N,M.assetScale,w,_]),j=(0,a.useMemo)((()=>{const e=o("c2c-user-express-go-transfer"),t=e.indexOf("\u3010"),i=e.indexOf("\u3011"),a=e.slice(0,t),r=e.slice(t+1,i),s=e.slice(i+1,e.length);return Y("div",{style:{color:"#F84960",fontSize:"12px",marginTop:"2px"}},a,Y("a",{style:{cursor:"pointer",color:"#D89F00"},href:F?H:G,onClick:e=>{p||(e.preventDefault(),f())}},r),s)}),[o,G,H,F,p]);return Y(T.Z,{tx:"QT",variant:"QTExchangeBox",sx:{flexDirection:"buy"===x?"column":"column-reverse"}},Y(T.Z,{sx:{width:"100%",flexDirection:"column"}},Y(Z.Z,{tx:"QT",variant:"QTExchangeTitle"},Y(T.Z,{tx:"QT",variant:"QTExchangeSubtitle"},J&&Y(Z.Z,{tx:"QT",variant:"QTExchangeSubtitle_line"}),Y(C.Z,null,J)),o("buy"===x?"c2c-ui-express-iwanttopay":"c2c-ui-express-ireceive")),Y(T.Z,{tx:"QT",variant:"QTExchange80"},Y(q.Z,{id:"buy"===x?"C2Cexrpessbuy_input_amount":"C2Cexrpesssell_input_amount",variant:"outlineLarge",boxProps:{width:["100%"],height:"48px"},value:A,error:!!e,placeholder:k&&L?`${k.lowerLimit}-${k.upperLimit}`:o("c2c-user-express-enter-amount"),disabled:!1,infoText:"",onChange:e=>{z&&z(e.currentTarget.value)},suffix:Y(D,null)}),e?Y(C.Z,{color:"#F84960",fontSize:"12px"},e):null)),Y(T.Z,{sx:{width:"100%",flexDirection:"column"}},Y(C.Z,{tx:"QT",variant:"QTExchangeTitle"},o("sell"===x?`c2c-ui-trade-${x}-want`:"c2c-ui-express-ireceive")),Y(T.Z,{tx:"QT",variant:"QTExchange80"},Y(q.Z,{id:"buy"===x?"C2Cexrpessbuy_input_crypto":"C2Cexrpesssell_input_crypto",variant:"outlineLarge",boxProps:{width:["100%"],height:"48px"},value:L,error:!!i,placeholder:_&&A?`${_.lowerLimit}-${_.upperLimit}`:o("c2c-user-express-enter-crypto-amount"),disabled:!1,onChange:e=>{V&&V(e.currentTarget.value)},suffix:Y(T.Z,null,p&&Y(Q.Z,{id:"",type:"button",variant:"quiet",sx:{color:"#D89F00"},onClick:()=>{V&&V(W)}},o("c2c-ui-trade-all")),Y(O,null))}),!i&&K,i&&"C2C\u4f59\u989d\u4e0d\u8db3"!==i&&Y(C.Z,{color:"#F84960",fontSize:"12px"},i),i&&"C2C\u4f59\u989d\u4e0d\u8db3"===i&&j)))};var R=i("nAdt"),z=i("Pb5q"),X=r().createElement;const V=function({canNext:e=!1,goNext:t,userSumit:i,setNext:r}){const s=(0,l.useDispatch)(),[o]=(0,n.$)(),{loginStatus:u,toNeedLogin:d}=(0,S.Z)(),{tradeType:p,fiat:m,asset:f,fiatNum:x,assetNum:y,byType:v}=(0,l.useSelector)((e=>e.quickTrade)),{quotedPriceDate:g}=(0,l.useSelector)((e=>e.editAdv)),{pageFiatConfig:h,userAsset:Z,userPayList:k,kycPassed:_,bindMobileStatus:w}=(0,l.useSelector)((e=>e.common)),N=(0,a.useMemo)((()=>{if(Z&&(null===Z||void 0===Z?void 0:Z.length)>0){var e,t;const i=(null===(e=Z.filter((e=>e.asset===f))[0])||void 0===e?void 0:e.freeze)||0;return new(c())(null===(t=Z.filter((e=>e.asset===f))[0])||void 0===t?void 0:t.free).plus(i).toFixed(g.assetScale,1)}return 0}),[f,Z,g.assetScale]),E=(0,a.useCallback)((async e=>{const{result:t}=await s.quickTrade.postOptimalOrderPriceV2((0,R.Z)({asset:f,fiatUnit:m,tradeType:"buy"===p?"BUY":"SELL"},e));return{result:t}}),[p,m,f]),Q=(0,a.useCallback)((async()=>{const{data:e,success:t}=await s.common.getC2cUseInfoAsync();return{isKyc:!!t&&e.kycPassed,isSms:!!t&&e.bindMobileStatus}}),[s.common]),q=(0,a.useCallback)((async()=>{var e;if(!u)return void d();let t=_,i=w;if(!_||!w){const{data:e,success:a}=await s.common.getC2cUseInfoAsync();a&&(t=e.kycPassed,i=e.bindMobileStatus)}if(!i||!t){if(!(await(0,z.F)({t:o,bindMobileStatus:i,kycStatus:t,onUpdate:Q})))return!1}if("sell"===p&&Number(N)<Number(y))return void $.Z.info({title:"",message:o("c2c-ui-express-insufficientbalance"),confirmTxt:o("c2c-ui-pc-post-requirement-dialog-btn-gotIt"),needCancel:!1});let a=[];a="buy"===p?"BUY"===h[0].side?h[0].tradeMethods:h[1].tradeMethods:"SELL"===h[0].side?h[0].tradeMethods:h[1].tradeMethods;let l=[];r(!1);const{result:n}=await E({buyType:v,totalAmount:"BY_AMOUNT"===v?y:x});if(n.success&&!n.message){if(null===(e=n.data)||void 0===e||e.optimalPrices.map(((e,t)=>{var i,a,r,s;l.push({assetAmount:"BY_AMOUNT"===v?null===(i=n.data)||void 0===i?void 0:i.totalAmount:new(c())(null===(a=n.data)||void 0===a?void 0:a.totalAmount).dividedBy(e.price).toFixed(e.asset.decimalScale,1),payType:e.payMethod.identifier,price:e.price,totalPrice:"BY_AMOUNT"===v?new(c())(null===(r=n.data)||void 0===r?void 0:r.totalAmount).multipliedBy(e.price).toFixed(e.fiat.currencyScale,1):null===(s=n.data)||void 0===s?void 0:s.totalAmount})})),r(!0),0===l.length)$.Z.info({title:"",message:o("c2c-ui-express-ordernomatch"),confirmTxt:o("c2c-ui-pc-post-requirement-dialog-btn-gotIt"),needCancel:!1});else if("buy"===p?l=l.sort(((e,t)=>e.price-t.price)):"sell"===p&&(l=l.sort(((e,t)=>t.price-e.price))),s.quickTrade.update({allPayments:l,step:2,selectPayment:l[0].payType,fiatNum:l[0].totalPrice,assetNum:l[0].assetAmount,price:l[0].price}),"sell"===p&&k){const e=k.filter((e=>e.identifier===l[0].payType));e.length>0&&s.quickTrade.update({payId:e[0].payMethodId||e[0].id})}}else r(!0)}),[u,v,y,x,p,h,N,k]);return X(T.Z,{tx:"QT",variant:"QTButtonBox",sx:{mb:"buy"===p?"16px":"40px"}},X(T.Z,{id:"buy"===p?"C2Cexrpessbuy_btn_0feebuy":"C2Cexrpesssell_btn_0feesell",tx:"QT",variant:"QTButton",sx:{bg:"buy"===p?"#02C076":"#F84960",cursor:t&&e&&i?"pointer":"not-allowed"},onClick:t&&e&&i?q:null},t&&i?X(C.Z,{mx:"auto"},o("buy"===p?"c2c-ui-express-buy0fee":"c2c-ui-express-sell0fee")):X(b.Z,{itemsColor:"white",sx:{mx:"auto",mt:"6px"}})))};var G=i("HFTe"),H=r().createElement;const K=function(){const[e]=(0,n.$)(),{ruleT1:t}=(0,l.useSelector)((e=>e.trade)),i=(0,a.useMemo)((()=>{if(t){return[H(G.Z,{tip:t,placement:"bottom"},H(C.Z,{tx:"trade",variant:"ruleT1L"},"T+1:")),H(Z.Z,{sx:{ml:"2px"}},e("c2c-ui-express-buyt1"))]}return""}),[t,e]);return H(T.Z,{tx:"QT",variant:"QT_T1Rule"},i)};var J=r().createElement;const W=function(){const{quickTrade:e}=y.Z.site(),t=(0,d.tv)(),[i]=(0,n.$)(),s=(0,l.useDispatch)(),{loginStatus:o}=(0,S.Z)(),{tradeType:c,asset:u,fiat:p}=(0,l.useSelector)((e=>e.quickTrade)),{isMobile:m}=(0,l.useSelector)((e=>e.common)),{quotedPriceDate:f}=(0,l.useSelector)((e=>e.editAdv)),{0:x,1:v}=(0,a.useState)(""),{0:b,1:g}=(0,a.useState)(""),{0:Z,1:k}=(0,a.useState)(!0),{0:w,1:E}=(0,a.useState)(!0),Q=!x&&!b,q=(0,a.useCallback)((i=>{s.quickTrade.update({firstRender:!1}),v(!1),g(!1),"buy"===i&&o&&p&&s.trade.getOrderT1Tips({fiatUnit:p}),s.quickTrade.update({tradeType:i,fiatNum:"",assetNum:"",byType:"buy"===i?"BY_MONEY":"BY_AMOUNT"}),t.push(`${e}/${"buy"===c?"sell":"buy"}/${u}/${p}`)}),[s.quickTrade,p,o,c,u]);return(0,a.useEffect)((()=>{p&&u&&(v(!1),g(!1))}),[p,u]),J(r().Fragment,null,J(m?N:_,{clickHandle:q}),J(I,{goNext:Z,setNext:k,setSumit:E,fiatError:x,setFiatError:v,assetError:b,setAssetError:g}),null!==f&&void 0!==f&&f.referencePrice?J(T.Z,{tx:"QT",variant:"referencePrice"},J(C.Z,null,i("c2c-ui-express-buy-referenceprice")),J(C.Z,{sx:{ml:"4px"}},`${null===f||void 0===f?void 0:f.currencySymbol}${(0,h.xG)(f.referencePrice,(0,h.mK)(f.priceScale))}`)):null,J(V,{goNext:Z,userSumit:w,setNext:k,canNext:Q}),"buy"===c?J(K,null):null)};var j=i("0XQ+"),ee=r().createElement;const te=`${g.Xs}/static/images/c2c/right_now.svg`;const ie=function(){var e;const t=(0,j.Z)(),i=(0,l.useDispatch)(),[r]=(0,n.$)(),{fiat:s,allPayments:o,selectPayment:c}=(0,l.useSelector)((e=>e.quickTrade)),{quotedPriceDate:u}=(0,l.useSelector)((e=>e.editAdv)),{newMethodList:d,fiatList:p}=(0,l.useSelector)((e=>e.common)),m=null===(e=p.filter((e=>e.currencyCode===s))[0])||void 0===e?void 0:e.currencySymbol,f=(0,a.useCallback)((e=>{i.quickTrade.update({selectPayment:e.payType,fiatNum:e.totalPrice,assetNum:e.assetAmount,price:e.price})}),[i.quickTrade]),x=(0,a.useMemo)((()=>{const e=o.length>0?o[0].price:null;return o.map(((i,a)=>{let s="",l="";for(let e=0;e<d.length;e++)if(d[e].identifier===i.payType){s=d[e].bgColor,l=d[e].name;break}return ee(T.Z,{id:"C2Cexrpessbuyconfirm_selection_selectpayment",tx:"QT",variant:"pa_buyModal",key:a,onClick:()=>{f(i)},sx:{border:i.payType===c?"1px solid #F0B90B":"1px solid #EAECEF"}},ee(T.Z,{alignItems:"flex-start"},s?ee(Z.Z,{tx:"trade",variant:"payLine",sx:{mt:"4px",flexShrink:0,bg:s}}):null,ee(C.Z,{tx:"QT",variant:"everyPayName"},l)),ee(T.Z,{tx:"QT",variant:"pa_buyModal_right"},ee(C.Z,null,`${m||""} ${(0,h.xG)(i.price,(0,h.mK)(null===u||void 0===u?void 0:u.priceScale))}`),e===i.price?ee(Z.Z,{tx:"QT",variant:"bestOffer"},r("c2c-ui-express-bestoffer")):null),i.payType===c?ee(E.Z,{src:te,sx:{position:"absolute",top:0,right:0,transform:"rtl"===t?"rotateY(180deg)":0}}):null)}))}),[o,c,m,u.priceScale,t]);return ee(T.Z,{tx:"QT",variant:"paymentArea"},ee(C.Z,{tx:"QT",variant:"paymentArea_title"},r("c2c-ui-express-selectpayment")),ee(Z.Z,{tx:"QT",variant:"paymentArea_box"},x))};var ae=r().createElement;const re=function(){var e;(0,d.tv)();const t=(0,l.useDispatch)(),[i]=(0,n.$)(),{fiat:r,allPayments:s,payId:o}=(0,l.useSelector)((e=>e.quickTrade)),{quotedPriceDate:c}=(0,l.useSelector)((e=>e.editAdv)),{newMethodList:u,fiatList:p,userPayList:m}=(0,l.useSelector)((e=>e.common)),f=null===(e=p.filter((e=>e.currencyCode===r))[0])||void 0===e?void 0:e.currencySymbol,{0:x,1:v}=(0,a.useState)([0]),{setting:b}=y.Z.site(),g=(0,a.useCallback)((e=>{t.quickTrade.update({selectPayment:e.payType,fiatNum:e.totalPrice,assetNum:e.assetAmount,price:e.price})}),[t.quickTrade]),S=(0,a.useCallback)((e=>{t.quickTrade.update({payId:e})}),[t.quickTrade]),k=(0,a.useCallback)((e=>ae(T.Z,{tx:"QT",variant:"pa_sellModal_bottom"},e.map(((e,t)=>ae(T.Z,{key:e+t,tx:"QT",variant:"psb_list",onClick:()=>{S(e.id)}},ae(T.Z,{tx:"QT",variant:"psb_circle",sx:{flexShrink:0,bg:o===e.id?"#FAFAFA":"",border:o===e.id?"1px solid #D0980B":"1px solid #CCCCCC"}},o===e.id?ae(Z.Z,{tx:"QT",variant:"psb_circle_center"}):null),ae(C.Z,{sx:{wordBreak:"break-all",color:o===e.id?"#D0980B":"#0B0E11"}},e.payAccount)))),ae(T.Z,{tx:"QT",variant:"psb_list",onClick:()=>{window.open(b,"_self")}},ae(C.Z,{sx:{color:"#1E2329",fontSize:"14px"}},ae("span",{style:{color:"#707A8A",marginLeft:"2px",fontSize:"16px",marginRight:"10px"}},"+")," ",i("c2c-ui-express-sell-addpayment"))))),[o,b,i]),_=(0,a.useMemo)((()=>{const e=s.length>0?s[0].price:null;return s.map(((t,a)=>{let r="",s="";for(let e=0;e<u.length;e++)if(u[e].identifier===t.payType){r=u[e].bgColor,s=u[e].name;break}const l=m.filter((e=>e.identifier===t.payType)),n=l.length>0;return ae(T.Z,{id:"C2Cexrpesssellconfirm_selection_selectaccount",tx:"QT",variant:"pa_sellModal",key:a,onClick:()=>{g(t)}},ae(T.Z,{tx:"QT",variant:"pa_sellModal_top",sx:{cursor:n?"pointer":"default"},onClick:n?()=>{const e=[...x];x.filter((e=>e===a)).length>0?e.splice(e.findIndex((e=>e===a)),1):e.push(a),v(e)}:null},ae(T.Z,null,r?ae(Z.Z,{tx:"trade",variant:"payLine",sx:{mt:"4px",flexShrink:0,bg:r}}):null,ae(C.Z,{tx:"QT",variant:"payName"},s)),ae(T.Z,{tx:"QT",variant:"pa_sellModal_top_right"},ae(T.Z,{flexDirection:"column",alignItems:"flex-end"},ae(C.Z,null,`${f||""} ${(0,h.xG)(t.price,(0,h.mK)(null===c||void 0===c?void 0:c.priceScale))}`),e===t.price?ae(Z.Z,{tx:"QT",variant:"bestOffer"},i("c2c-ui-express-bestoffer")):null),n?x.filter((e=>e===a)).length>0?ae(Z.Z,{tx:"QT",variant:"upArrow"}):ae(Z.Z,{tx:"QT",variant:"downArrow"}):ae(G.Z,{arrow:!0,placement:"bottom",tip:i("c2c-ui-express-sell-addpayment")},ae(C.Z,{id:"C2Cexrpesssellconfirm_iconbtn_addpayment",tx:"QT",variant:"addCard",onClick:()=>{window.open(b,"_self")}}," ","+"," ")))),n&&x.filter((e=>e===a)).length>0?k(l):null)}))}),[x,u,s,k]);return ae(T.Z,{tx:"QT",variant:"paymentArea"},ae(T.Z,{justifyContent:"space-between",width:"100%"},ae(C.Z,{tx:"QT",variant:"paymentArea_title"},i("c2c-ui-express-sell-selectpayment")),!o&&ae(C.Z,{tx:"QT",variant:"paymentArea_title",sx:{color:"#E24537",maxWidth:"200px"}},i("c2c-ui-express-sell-selectpayment"))),ae(Z.Z,{tx:"QT",variant:"paymentArea_box"},_))};var se=i("RNvQ"),le=i.n(se),ne=i("5wYV"),oe=i("b9Li"),ce=r().createElement;const ue={"083637":{message:"c2c-ui-makeorder-refresh-msg",confirmText:"c2c-ui-iknow",confirmLink:""},"083022":{message:"c2c-ui-trade-makeorder-transfer-msg",confirmText:"c2c-ui-trade-makeorder-transfer-confirm",confirmLink:""}};const de=function(){const e=(0,d.tv)(),{enqueueNotification:t}=(0,ne.Z)(),i=(0,l.useDispatch)(),[s]=(0,n.$)(),{tradeType:o,asset:c,fiat:u,price:p,byType:m,fiatNum:f,selectPayment:x,assetNum:v,payId:g}=(0,l.useSelector)((e=>e.quickTrade)),{useNewTransfer:h}=(0,l.useSelector)((e=>e.common)),S=(0,l.useSelector)((e=>e.loading.effects.trade.postMakeOrder)),{0:Z,1:k}=(0,a.useState)(!1),{0:_,1:w}=(0,a.useState)(""),{transfer:N,founding:E,p2pOrderDetail:Q,p2pOrders:q}=y.Z.site(),B=(0,a.useCallback)((async()=>{const{data:e,success:t,message:a}=await i.common.postSecurityFaceStatus();if(t&&e.qrCode&&e.id){const{success:t,message:a}=await i.common.postFaceQrValid({transId:e.qrCode});return t?(w(e.id),void k(!0)):void $.Z.info({message:a,confirmTxt:s("c2c-ui-iknow"),needCancel:!1})}$.Z.info({message:a,confirmTxt:s("c2c-ui-iknow"),needCancel:!1})}),[i.common,$.Z.info,s]),F=le()((async()=>{let a={asset:c,matchPrice:p,fiatUnit:u,buyType:m,totalAmount:"BY_MONEY"===m?f:v,tradeType:o.toUpperCase(),origin:"MATCH",payType:x};if("sell"===o){if(!g)return void $.Z.info({message:s("c2c-ui-express-sell-selectpayment"),confirmTxt:s("c2c-ui-iknow"),needCancel:!1});a=(0,R.Z)((0,R.Z)({},a),{},{payId:g})}const{message:r,code:l,success:n,data:d}=await i.trade.postMakeOrder(a);if(n){if(!d.result){return void(await $.Z.info({message:s("c2c-ui-makeorder-pending-msg"),confirmTxt:s("c2c-ui-makeorder-pending-confirm"),cancelTxt:s("c2c-ui-trade-refresh-no")})&&e.push(`${Q}?orderNo=${null===d||void 0===d?void 0:d.orderMatch.orderNumber}`))}t(s("c2c-ui-trade-makeorder-success"),{anchorOrigin:{horizontal:"right",vertical:"top"},variant:"success"}),setTimeout((()=>{e.push(`${Q}?orderNo=${null===d||void 0===d?void 0:d.orderMatch.orderNumber}`)}),2e3)}else if("083637"===l){var y,T,b,C,S;$.Z.info({title:null!==(y=ue[l])&&void 0!==y&&y.title?s(null===(T=ue[l])||void 0===T?void 0:T.title):void 0,message:s(null===(b=ue[l])||void 0===b?void 0:b.message),confirmTxt:s(null===(C=ue[l])||void 0===C?void 0:C.confirmText),needCancel:!(null===(S=ue[l])||void 0===S||!S.cancelText)})}else if("083022"===l){var Z,k,_,w,F;await $.Z.info({title:null!==(Z=ue[l])&&void 0!==Z&&Z.title?s(null===(k=ue[l])||void 0===k?void 0:k.title):void 0,message:s(null===(_=ue[l])||void 0===_?void 0:_.message),confirmTxt:s(null===(w=ue[l])||void 0===w?void 0:w.confirmText),needCancel:!(null===(F=ue[l])||void 0===F||!F.cancelText)})&&window.open(h?E:N,"_self")}else if("083665"===l){const{success:t,data:a}=await i.common.postOrderUndoList();if(t){await $.Z.info({message:r,confirmTxt:s("c2c-ui-iknow"),needCancel:!1})&&((null===a||void 0===a?void 0:a.length)>1?e.push(q):1===(null===a||void 0===a?void 0:a.length)&&e.push(`${Q}?orderNo=${a[0].orderNumber}`))}}else"031101"===l&&B()}),50);return ce(r().Fragment,null,ce(T.Z,{id:"buy"===o?"C2Cexrpessbuyconfirm_btn_confirmpurchase":"C2Cexrpesssellconfirm_btn_confirmsell",tx:"QT",variant:"QTButton",sx:{bg:"buy"===o?"#02C076":"#F84960",mb:"32px",cursor:S?"not-allowed":"pointer"},onClick:S?()=>{}:F},S?ce(b.Z,{itemsColor:"white",sx:{mx:"auto",mt:"6px"}}):ce(C.Z,{mx:"auto"},s("buy"===o?"c2c-ui-express-buy-confirmpurchase":"c2c-ui-express-sell-confirmsell"))),ce(oe.Z,{visible:Z,transId:_,setVisible:k}))};var pe=r().createElement;const me=function(){var e;const t=(0,l.useDispatch)(),[i]=(0,n.$)(),{tradeType:r,asset:s,fiat:o,byType:c,fiatNum:u,assetNum:d}=(0,l.useSelector)((e=>e.quickTrade)),{fiatList:p}=(0,l.useSelector)((e=>e.common)),{quotedPriceDate:m}=(0,l.useSelector)((e=>e.editAdv)),f=null===(e=p.filter((e=>e.currencyCode===o))[0])||void 0===e?void 0:e.currencySymbol,x=(0,h.xG)(u,(0,h.mK)(null===m||void 0===m?void 0:m.currencyScale)),y=(0,h.xG)(d,(0,h.mK)(null===m||void 0===m?void 0:m.assetScale)),v=(0,a.useCallback)((()=>{t.quickTrade.update({step:1,payId:""})}),[t.quickTrade]),b=(0,a.useMemo)((()=>"BY_MONEY"===c&&"buy"===r?i("c2c-ui-express-sell-iwillreceive"):"BY_MONEY"===c&&"sell"===r||"BY_AMOUNT"===c&&"buy"===r?i("c2c-ui-express-iwanttopay"):"BY_AMOUNT"===c&&"sell"===r?i("c2c-ui-express-sell-iwillreceive"):void 0),[c,r]);return pe(T.Z,{sx:{width:"100%",flexDirection:"column",px:"24px"}},pe(T.Z,{tx:"QT",variant:"step2_title"},pe(C.Z,{id:"buy"===r?"C2Cexrpessbuyconfirm_btn_back":"C2Cexrpesssellconfirm_btn_back",tx:"QT",variant:"return_step1",onClick:v},"<"),pe(C.Z,{tx:"QT",variant:"step2_title_main"},i("buy"===r?"c2c-ui-express-buy-confirmpurchase":"c2c-ui-express-sell-confirmsell")),pe(C.Z,null," ")),pe(T.Z,{tx:"QT",variant:"step2_amountPrice"},"BY_MONEY"===c?pe(C.Z,{fontSize:"28px"},`${f||""} ${x}`):pe(T.Z,{alignItems:"center"},pe(C.Z,{fontSize:"28px"},y),pe(C.Z,{fontSize:"18px",ml:"5px",mt:"4px"},s)),pe(C.Z,{mt:"4px"},"BY_MONEY"===c?`${b} ${y} ${s}`:`${b} ${f} ${x}`)),pe("buy"===r?ie:re,null),pe(de,null))};var fe=r().createElement;const xe=`${g.Xs}/static/images/c2c/quickBuyBg.png`,ye=`${g.Xs}/static/images/c2c/quickSellBg.png`,ve=v.ZP.div.withConfig({displayName:"QuickTrade__Mask",componentId:"mv9we5-0"})(["position:fixed;left:0;right:0;top:0;bottom:0;z-index:1190;background:rgba(0,0,0,0.3);display:",";justify-content:center;align-items:center;"],(e=>e.show?"flex":"none")),Te=v.ZP.div.withConfig({displayName:"QuickTrade__Wrap",componentId:"mv9we5-1"})(["position:relative;background:#434c5a;width:46px;height:46px;border-radius:4px;transform:rotate(45deg);"]);const be=function(){const{tradeType:e,step:t,firstRender:i}=(0,l.useSelector)((e=>e.quickTrade)),r=(0,l.useSelector)((e=>e.loading.effects.editAdv.postQuotedPrice)),s=(0,l.useSelector)((e=>e.loading.effects.common.postPageTradeConfig)),n=(0,l.useSelector)((e=>e.loading.effects.quickTrade.postOptimalPriceLimit)),{0:o,1:c}=(0,a.useState)(!1);return(0,a.useEffect)((()=>{c(!(!(r||s||n)&&i))}),[r,s,n,i]),fe(T.Z,{tx:"QT",variant:"QTmainBody"},fe(T.Z,{tx:"QT",variant:"QTBody_image",sx:{background:"buy"===e?`url(${xe}) no-repeat center`:`url(${ye}) no-repeat center`}},fe(T.Z,{tx:"QT",variant:"QTBody_center"},fe(ve,{show:o},fe(Te,null,fe(b.Z,{size:24,sx:{transform:"rotate(-45deg)",position:"absolute",ml:"11px",mt:"11px"}}))),1===t&&fe(W,null),2===t&&fe(me,null))))};var ge=i("xjo1"),Ce=i("/ZSM"),he=i("5iDs"),Se=i("Ne75"),Ze=r().createElement;const ke=["buy","sell"],_e=["USDT","BUSD","BTC","DAI","BNB","ETH","UAH","RUB","NGN","BIDR","DOGE","SLP"];function we(){const{p2pTrade:e}=y.Z.site(),t=(0,d.tv)(),[i]=(0,n.$)(),{metaData:r,configs:o}=(0,a.useContext)(Se.Il),m=(0,l.useDispatch)(),{loginStatus:f}=(0,S.Z)(),{fiat:v,tradeType:T,asset:b,step:g,firstTimeError:C,paramsFiat:h}=(0,l.useSelector)((e=>e.quickTrade));(0,a.useEffect)((()=>{!async function(){if(C){if(!(await $.Z.info({title:"",message:i("c2c-ui-express-fiatnotsupport").replace("{AUD}",h),confirmTxt:i("c2c-ui-express-dialog-gotop2p"),cancelTxt:i("c2c-ui-fiatOrders-cancel"),needCancel:!0})))return;t.push(`${e}/?fiat=${h}`)}}()}),[C,h]),(0,a.useEffect)((()=>{f&&(m.common.getUserPayment(),m.common.getUserAsset(),m.common.getUserMigrateQueryStatus())}),[f]),(0,a.useEffect)((()=>{f&&v&&"buy"===T&&m.trade.getOrderT1Tips({fiatUnit:v})}),[f,v]);const Z=(0,a.useCallback)((e=>/^0{2,}/.test(e)?"0":/^0{1,}/.test(e)&&Number(e)>=1?e.replace(/^0{1,}/,""):e),[]);return(0,a.useEffect)((()=>{!async function(){if(!b||!T){const{tradeConfig:e}=await m.common.postPageTradeConfig({param:{fiat:"CNY"},areaType:"EXPRESS"}),{asset:t,tradeType:i}=(0,x.V)(e,"buy","USDT");m.quickTrade.update({fiat:"CNY",tradeType:i,asset:t,byType:"buy"===i?"BY_MONEY":"BY_AMOUNT"})}}()}),[b,T]),(0,a.useEffect)((()=>{!async function(){if(v&&T&&b&&1===g){const{quotedPriceDate:e}=await m.editAdv.postQuotedPrice({assets:[b],fiatCurrency:v,tradeType:T.toUpperCase(),fromUserRole:"USER"});if(e){const t=await m.quickTrade.postOptimalPriceLimit({asset:b,fiat:v,tradeType:T});"undefined"!==typeof(null===t||void 0===t?void 0:t.assetNum)&&null!==t&&void 0!==t&&t.assetNum?m.quickTrade.update({fiatNum:new(c())(Z(t.assetNum)).multipliedBy(e.referencePrice).toFixed(e.currencyScale,1)}):"undefined"!==typeof(null===t||void 0===t?void 0:t.fiatNum)&&null!==t&&void 0!==t&&t.fiatNum?m.quickTrade.update({assetNum:new(c())(Z(t.fiatNum)).dividedBy(e.referencePrice).toFixed(e.assetScale,1)}):m.quickTrade.update({fiatNum:"",assetNum:""})}}}()}),[v,T,b,g,Z]),(0,s.Z)((()=>{m.common.getFiatListAsync(),m.common.getNewTradeMethodList()})),(0,a.useEffect)((()=>{(0,p.ZP)("pageView",{elementID:"binance_c2c_visit_home_express",pageName:"binance_c2c"},{callback:e=>{},sensorsDisabled:!0})}),[]),Ze(u.Z,{metaData:r,configs:o,bg:"bg"},Ze(ge.Z,{linkType:"quickTrade"}),Ze(be,null),Ze(he.Z,null),Ze(Ce.Z,{fiat:v}))}we.getInitialProps=async e=>{let{params:t,appContext:i}=e,{req:a,store:r}=i;f.IS_ELECTRON&&r.dispatch.quickTrade.resetForm();let s="buy";null!==t&&void 0!==t&&t.type&&(ke.includes(null===t||void 0===t?void 0:t.type)?s=t.type:i.notFound=!0);let l=null;null!==t&&void 0!==t&&t.asset&&(_e.includes(null===t||void 0===t?void 0:t.asset.toUpperCase())?l=null===t||void 0===t?void 0:t.asset.toUpperCase():i.notFound=!0);let n=t.asset?l:"USDT",o=!1;if(null!==t&&void 0!==t&&t.fiat){/^[A-Z]{3,5}$/.test(null===t||void 0===t?void 0:t.fiat)||(i.notFound=!0);const{fiatList:e}=await r.dispatch.common.getFiatListAsync();(null===e||void 0===e?void 0:e.length)<=0?i.notFound=!0:(e.map((e=>{e.currencyCode===(null===t||void 0===t?void 0:t.fiat)&&(o=!0)})),o||(i.notFound=!0))}let c=null!==t&&void 0!==t&&t.fiat&&o?t.fiat:"CNY",{tradeConfig:u,defaultFait:d}=await r.dispatch.common.postPageTradeConfig({param:c?{fiat:c}:{},areaType:"EXPRESS"});({asset:n,tradeType:s}=(0,x.V)(u,s,n)),c=d;let p=!1;n&&s||(p=!0),r.dispatch.quickTrade.update({fiat:p?"CNY":c,tradeType:s,asset:n,byType:"buy"===s?"BY_MONEY":"BY_AMOUNT",firstTimeError:p,paramsFiat:t.fiat})};const Ne=we}}]);