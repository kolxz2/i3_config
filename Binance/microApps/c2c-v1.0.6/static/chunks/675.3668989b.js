(self.webpackJsonp_c2c=self.webpackJsonp_c2c||[]).push([[675],{EF0K:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>Y,sensor:()=>U});var r=t("/SIk"),o=t("q/bM"),i=t("cjYj");let a;const s=n=>{a=n};var c,u,l=t("O59t"),f=t.n(l),d=t("gLr6"),p=t("D57K"),g=t("RhYE"),v=t("rjtj"),w=t("vpUY"),_=t("Utn3"),h=t("mpwE"),m=t("4niA"),b=[],k=["track","quick","register","registerPage","registerOnce","clearAllRegister","trackSignup","trackAbtest","setProfile","setOnceProfile","appendProfile","incrementProfile","deleteProfile","unsetProfile","identify","login","logout","trackLink"],y=(0,w.client)().isHybrid,j=(0,h.Ue)((0,h.xf)(_)),A=function(n){var e=n.sdk_url,t=void 0===e?"https://bin.bnbstatic.com/static/sensors/sensorsdata@1.15.26.js":e,r=n.heatmap_url,o=void 0===r?"https://bin.bnbstatic.com/static/sensors/heatmap@1.15.26.js":r,i=n.name,a=void 0===i?"sensor":i,s=(0,p.__rest)(n,["sdk_url","heatmap_url","name"]);if(t=t.replace("sensorsdata@1.15.1.min","sensorsdata@1.15.26"),o=o.replace("sensorsdata@1.15.1.min","sensorsdata@1.15.26"),window.sensorsDataAnalytic201505=a,!window[a]){window[a]=window[a]||function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(window[a]._q=window[a]._q||[]).push([n,e])}},c=window[a];for(var u=0;u<k.length;u++)c[k[u]]=c.call(null,k[u]);c._t||((0,m.ve)(t,(function(){return c=window[a]})),c.para=(0,p.__assign)((0,p.__assign)({},s),{heatmap_url:o}))}},P=function(){var n=function(){var n=Object.create(null);k.forEach((function(e){n[e]={configurable:!0,get:function(){return c?c[e]:(g.C&&console.error("error: run "+e+" handler after init"),console.log("empty",c),function(){})}}}));var e=Object.create(null);return Object.defineProperties(e,n),e.init=g.C?A:function(){},e}();return n},C=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];console.log.apply(console,(0,p.__spreadArray)(["ssr call"],n))};const E=function(n){if(void 0===n&&(n={}),g.C){!function(n){var e=n.sdk_url,t=void 0===e?"https://www.google-analytics.com/analytics.js":e,r=n.name,o=void 0===r?"ga":r;window.GoogleAnalyticsObject=o,window[o]||(window[o]=window[o]||function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];(window[o].q=window[o].q||[]).push(n)},window[o].l=+new Date),document.querySelector("script[src*=analytics]")||(0,m.ve)(t,(function(){return u=window[o]})),(u=window[o])("create","UA-162512367-1","auto")}(n);var e=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];u.apply(void 0,n)};return e.track=function(n,e,t){u("send",{hitType:"event",eventCategory:n,eventAction:null===e||void 0===e?void 0:e.elementID,eventLabel:window.location,custom_dimension:e,hitCallback:t})},e.login=function(n){u("set","userId",n)},e}var t=function(){};return t.track=C,t.login=C,t};var q=t("DIfz"),O=t("gzeT");var D=t("opUh"),S=function(n,e,t){return new Promise((function(r){t(n,e,(function(n){return r({type:t.name,success:"boolean"!==typeof n||n})})),setTimeout((function(){r({type:t.name,success:!1})}),5e3)}))};const T=function(n){var e,t,r=n.sensorsConfig,o=n.ableGA,i=n.otherDisabledEvent,a=void 0===i?b:i,s=n.pageViewLayerConfig,c=void 0===s?{}:s,u=[];if(r){var l=r.staticHost,f=(0,p.__rest)(r,["staticHost"]);e=P();var d=(0,p.__assign)({name:"SensorsSdk",send_type:"beacon",use_client_time:!0,datasend_timeout:1e4,app_js_bridge:!0,show_log:!1,heatmap:{collect_elements:"all"}},f);l&&Object.assign(d,{sdk_url:l+"/static/sensors/sensorsdata@1.15.26.js",heatmap_url:l+"/static/sensors/heatmap@1.15.26.js",vtrack_url:l+"/static/sensors/vtrack.min.js"}),e.init(d),function(n){if(g.C){var e=window.location.pathname.match(/\/([a-z]{2}(-[a-zA-Z]{2})?)(\/)?/),t=e?e[1]:String();if(y){var r=!0,o=[],i=n.quick;Object.defineProperty(n,"quick",{get:function(){return function(n){r?o.push((function(){return i(n)})):i(n)}}}),j.getAppConfig().then((function(e){var i=e.project_type;r=!1,n.registerPage({$url:window.location.href,df_1:i,df_2:t,df_fvideoid:v.Q.read("BNC_FV_KEY")}),o.forEach((function(n){return n()}))}))}else n.registerPage({$url:window.location.href,df_1:"Web",df_2:t,df_fvideoid:v.Q.read("BNC_FV_KEY")})}}(e);u.push((function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.track.apply(e,n)}))}if(o){t=E();u.push((function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t.track.apply(t,n)}))}if(u.length){var w=function(n,e,t){var r=[],o=function(){var n={gaTrack:"gaDisabled",bTrack:"bTrackDisabled",sensorsTrack:"sensorsDisabled"};return function(e,t){return!t[n[e]]}}();return function(n,e){return!Array.isArray(e)||!e.find((function(e){return e===n}))}(n,a)&&u.forEach((function(i){o(i.name,t)&&r.push(S(n,(0,p.__assign)({},e),i))})),o(q.Z.name,t)&&r.push(S(n,e,q.Z)),Promise.all(r).then(null===t||void 0===t?void 0:t.callback),r[r.length-1]};w&&(0,O.N)(w),function(n){n}((function(n){e&&e.login(n),t&&t.login(n)}))}return(0,D.J)(c),{sensors:e,ga:t}},U=async()=>{let n={};try{n=(await(0,i.U2)(d.Z.SENSOR)).data||{}}catch(e){}return n},Y=()=>((0,r.useEffect)((()=>{!async function(){try{const n=await U(),{sensors:e}=T({sensorsConfig:{server_url:n.server||"",staticHost:o.Xs,preset_properties:{url:!0}},ableGA:"test"!==o.vt});e.quick("autoTrackSinglePage"),s(e)}catch(n){f().error(n)}}()}),[]),null)}}]);