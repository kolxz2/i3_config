(self.webpackJsonp_c2c=self.webpackJsonp_c2c||[]).push([[736],{PWG0:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ve});var r=a("nAdt"),l=a("/SIk"),i=a.n(l),n=a("szIg"),o=a("krwy"),s=a("8Lpi"),c=a("cjYj"),d=a("Ne75"),p=a("G6rc"),u=a("gLr6"),m=a("voGk"),f=a("0XQ+"),g=a("j/s1"),h=i().createElement;const b=g.ZP.div.withConfig({displayName:"PartTabs__Panel",componentId:"il910y-0"})(['position:relative;display:flex;align-items:center;justify-content:center;font-size:16px;color:#212833;margin-top:20px;cursor:pointer;line-height:1;&.active{color:#0B0E11;font-size:24px;font-weight:600;&::after{content:" ";position:absolute;bottom:-20px;left:50%;z-index:2;width:40px;height:3px;background:#F0B90B;transform:translate(-50%);}}']),x=g.ZP.div.withConfig({displayName:"PartTabs__PanelWrap",componentId:"il910y-1"})(["display:flex;align-items:baseline;width:100%;height:63px;border-bottom:1px solid #EAECEF;"]),y=e=>(e.tab,h(i().Fragment,null)),v=e=>{var t;const a=(0,f.Z)(),{0:r,1:n}=(0,l.useState)(e.defaultIndex);(0,l.useEffect)((()=>{void 0===e.defaultIndex&&n(i().Children.count(e.children)>0&&e.children[0].key||0)}),[e.children,e.defaultIndex]);const{0:o,1:s}=(0,l.useMemo)((()=>{const t={},l=[];return i().Children.forEach(e.children,((o,s)=>{if(!i().isValidElement(o)&&o.props.tab)return o;const c=o.key||s;t[c]={content:o.props.children,key:c},l.push(h(b,{style:{marginRight:"rtl"===a?0:"32px",marginLeft:"rtl"===a?"32px":0},className:r===c?"active":"",key:c,onClick:()=>{n(c),e.onChange(c)}},o.props.tab))})),[l,t]}),[r,e.children,a]);return h(i().Fragment,null,h(x,{style:e.style},o),null===(t=s[r])||void 0===t?void 0:t.content)};var C=a("xjo1"),w=a("KkEV"),k=a("SwxV"),Z=a("sJ8p"),_=a("SbIO"),S=a("xtUa"),T=a("If2F"),N=i().createElement;const D={select:e=>N(Z.Z,{key:e.name,sx:{whiteSpace:"nowrap",px:"6px"}},N("div",{id:e.id,style:{display:"none"}},e.value),N(_.Z,{sx:{mb:"7px",fontSize:"12px",color:"#76808F"}},e.label),N(S.Z,{className:"c2c-orderList-filter-box",disableInput:!0,value:e.value,label:e.label,onValueChange:t=>{e.onChange(t)},renderValue:t=>{var a;return null===(a=e.options.find((e=>e.value===t)))||void 0===a?void 0:a.label},sx:{borderColor:"lines.primary",pr:"40px",height:"32px"}},e.options.map((({label:e,value:t})=>N(T.Z,{key:e,value:t},e)))))},I=e=>{const[t]=(0,o.$)(),{0:a,1:i}=(0,l.useState)(null),n=(0,l.useMemo)((()=>{const t={};if(e.configs&&e.configs.length>0)for(let a=0;a<e.configs.length;a++){const r=e.configs[a];t[r.props.name]=r.defaultValue}return t}),[e.configs]),s=(0,l.useCallback)((()=>{e.onSubmit&&e.onSubmit((0,r.Z)((0,r.Z)({},n),a))}),[a,n,e.onSubmit,t]),c=(0,l.useMemo)((()=>e.configs.map((e=>{const t=a&&a[e.props.name]||e.defaultValue||"";return D[e.type]((0,r.Z)((0,r.Z)({},e.props),{},{onChange:t=>{i((a=>(0,r.Z)((0,r.Z)({},a),{},{[e.props.name]:t})))},value:t}))}))),[a,e.configs]);return(0,l.useEffect)((()=>{s()}),[s,t]),N(w.Z,{alignItems:"flex-end"},c)};var E=a("g33n"),L=i().createElement;const O=e=>[{label:e("c2c-ui-tyle-all"),value:k.j},{label:e("c2c-ui-tyle-buy"),value:"BUY"},{label:e("c2c-ui-tyle-sell"),value:"SELL"}],$=e=>[{label:e("c2c-ui-status-all"),value:k.j},{label:e("c2c-ui-status-unpaid"),value:`${E.Ip}`},{label:e("c2c-ui-status-paid"),value:`${E.p_}`},{label:e("c2c-ui-status-cpl"),value:`${E.Qc}`},{label:e("c2c-ui-status-cc"),value:`${E.ew}`},{label:e("c2c-ui-status-appealing"),value:`${E.mz}`}],P=e=>{const[t]=(0,o.$)(),{assetList:a}=(0,n.useSelector)((e=>e.common)),r=(0,l.useMemo)((()=>{const e=a.length?a.map((e=>({label:e,value:e}))):[];return[{label:t("c2c-ui-coin-all"),value:k.j},...e]}),[a,t]),i=(0,l.useMemo)((()=>[{type:"select",defaultValue:k.j,props:{name:"asset",id:"c2c-order-list-coin-filter",label:t("c2c-ui-filter-coins"),placeholder:t("c2c-ui-filter-coins"),options:r}},{type:"select",defaultValue:k.j,props:{name:"tradeType",id:"c2c-order-list-type-filter",label:t("c2c-ui-filter-tyle"),placeholder:t("c2c-ui-filter-tyle"),options:O(t)}},{type:"select",defaultValue:k.j,props:{name:"orderStatus",id:"c2c-order-list-status-filter",label:t("c2c-ui-filter-status"),placeholder:t("c2c-ui-filter-status"),options:$(t)}}]),[r,t]);return L(w.Z,{sx:{py:"16px",justifyContent:"space-between",alignItems:"center"}},L(I,{configs:i,onSubmit:e.onSubmit}))};var z=a("wgY5"),R=a.n(z),j=a("7IDl"),M=a("GGU7"),U=a("5wYV"),G=a("Fgm1"),V=a("F1Nr"),B=a("MJsX"),Y=i().createElement;const F=g.ZP.div.withConfig({displayName:"Table__TableWarp",componentId:"sc-1fy6eca-0"})(["display:flex;flex-direction:column;justify-content:center;height:100%;table{border-spacing:0;}th{height:40px;font-size:12px;font-weight:normal;color:#848E9C;&:first-child{text-indent:16px;}}tbody{background:#fff;box-shadow:0 1px 1px 1px rgba(0,0,0,.08);td{border-bottom:1px solid #EAECEF;}.ibf,.iba{border-bottom:0;}}"]),H=(e,t)=>{const a=(0,f.Z)(),{page:r,total:i,onPageChange:n,tbData:o,setData:s}=e,c=(0,l.useCallback)(((e,t)=>{s((a=>[...a.slice(0,t),e,...a.slice(t+1)]))}),[]);t.current={setData:e=>{const t=e(o);t&&s(t)}};const{0:d,1:p,2:u}=(0,l.useMemo)((()=>{var t,r;const l=e.column.length,i=[],n=[],o=[],s=[];return(null===(t=e.insert)||void 0===t?void 0:t.before)&&n.push(((t,a,r,i)=>{var n;return Y("tr",{key:`tr-rb-${a}`},Y("td",{key:`td-rb-${a}`,className:"ibf",colSpan:l},null===(n=e.insert)||void 0===n?void 0:n.before(t,a,r,i)))})),e.column.forEach(((e,t)=>{const{key:r}=e;i.push(Y("th",{key:`th-${t}`,style:{textAlign:"rtl"===a?"right":"left",paddingLeft:"ltr"===a&&e.pl?e.pl:0,paddingRight:"rtl"===a&&e.pl?e.pl:0}},e.title)),s.push(Y("col",{key:`col-${t}`,style:{width:e.width}})),o.push(((a,l,i,n)=>Y("td",{key:`td-${l}-${t}`},e.render?e.render(a[r],a,l,i,n):a[r])))})),n.push(((e,t,a,r)=>Y("tr",{key:`tr-ri-${t}`},o.map((l=>l(e,t,a,r)))))),(null===(r=e.insert)||void 0===r?void 0:r.after)&&n.push(((t,a,r,i)=>{var n;return Y("tr",{key:`tr-ra-${a}`},Y("td",{key:`td-ra-${a}`,className:"iba",colSpan:l},null===(n=e.insert)||void 0===n?void 0:n.after(t,a,r,i)))})),[Y("thead",{key:"thd"},Y("tr",{key:"trh-0"},i)),(e,t,a,r)=>n.map((l=>l(e,t,a,r))),Y("colgroup",null,s)]}),[e.column,e.insert,a]),m=(0,l.useMemo)((()=>Y("tbody",{key:"tbd"},o.map(((e,t)=>p(e,t,(()=>n(r)),(e=>c(e,t))))))),[o,p,n,r,c]);return Y(F,null,Y("table",{border:"0",width:"100%"},u,d,m),0!==i?Y(B.Z,{style:{direction:"ltr"},className:"rightpos",total:Math.ceil(i/10),current:r,onMoveToPage:n}):e.emptyElement)},A=(0,l.forwardRef)(H);var J=a("WDH6"),X=i().createElement;const q=g.ZP.div.withConfig({displayName:"EmptyTable__Wrap",componentId:"rc5200-0"})(["margin:80px auto;text-align:center;"]),Q=e=>{const t=(0,f.Z)();return X(q,null,X(J.Z,{size:100,style:{transform:"rtl"===t?"rotateY(180deg)":0}}),X("p",null,e.txt))};var W=a("OaRt"),K=a("P8ba"),ee=a("CVOX"),te=a("03hH"),ae=a("q/bM"),re=i().createElement;const le=g.ZP.div.withConfig({displayName:"Table__TabelCell",componentId:"hroax1-0"})(["box-sizing:border-box;width:100%;height:124px;padding-top:24px;.normalLink{color:#285c93;text-decoration:none;}"]),ie=g.ZP.div.withConfig({displayName:"Table__Button",componentId:"hroax1-1"})(["width:88px;line-height:20px;font-size:12px;color:#1e2026;background:linear-gradient(90deg,#f0b90b 0%,#fbda3c 100%);border-radius:2px;text-align:center;"]),ne=g.ZP.img.withConfig({displayName:"Table__Img",componentId:"hroax1-2"})(["height:26px;margin-left:24px;margin-right:8px;vertical-align:-8px;"]),oe=g.ZP.span.withConfig({displayName:"Table__BigNum",componentId:"hroax1-3"})(["font-size:20px;font-weight:500;padding-left:20px;"]),se=g.ZP.span.withConfig({displayName:"Table__Coin",componentId:"hroax1-4"})(["font-size:16px;font-weight:400;"]),ce=g.ZP.span.withConfig({displayName:"Table__Label",componentId:"hroax1-5"})(["display:inline-block;min-width:80px;text-align:right;color:#848e9c;font-weight:300;margin-right:12px;"]),de=g.ZP.span.withConfig({displayName:"Table__NormalOperate",componentId:"hroax1-6"})(["line-height:1;font-size:12px;color:#f0b90b;cursor:pointer;"]),pe=g.ZP.span.withConfig({displayName:"Table__CountdownStyle",componentId:"hroax1-7"})(["font-size:14px;font-weight:500;color:#0b0e11;"]),ue=g.ZP.div.withConfig({displayName:"Table__BeforeEl",componentId:"hroax1-8"})(["font-size:14px;background:rgba(249,249,250,0.5);display:flex;align-items:center;padding-top:10px;padding-bottom:10px;.green,.red{font-weight:500;font-size:16px;}.green{color:#2ebd85;}.red{color:#f84960;}.grey{color:#c1c6cd;}.orderNo{color:#212833;font-weight:300;}"]),me=e=>{const{p2pOrderDetail:t,advertiserDetail:a,appealHistory:r}=ee.Z.site(),i=(0,j.tv)(),s=(0,f.Z)(),c=(0,l.useRef)(null),[d]=(0,o.$)(),p=(0,n.useDispatch)(),{userInfo:u}=(0,M.X)(),{enqueueNotification:m}=(0,U.Z)(),{loginStatus:g}=(0,te.Z)(),h=(0,l.useCallback)((e=>{m(e,{variant:"success",autoHideDuration:1e3,anchorOrigin:{vertical:"top",horizontal:"right"}})}),[m]),b=(0,l.useCallback)((e=>{m(e,{variant:"error",autoHideDuration:1e3,anchorOrigin:{vertical:"top",horizontal:"right"}})}),[m]);(0,l.useEffect)((()=>{if(g){const e=e=>{c.current.setData((t=>{const a=t.findIndex((t=>t.orderNumber===e.orderNumber));return-1!==a?(Object.assign(t[a],e),[...t]):null}))};return(0,K.V)("ORDER_STATUS",e),()=>(0,K.l)("ORDER_STATUS",e)}}),[g]);const x=(0,l.useCallback)((e=>{p.orderDetail.update({appealTipsShow:!0,appealOrderInfo:e})}),[p.orderDetail]),y=(0,l.useCallback)(((e,a,r)=>{"C2CordersList_btn_appeal"===r.id?x(e):"C2CordersList_btn_transferred"===r.id&&"BUY"===e.tradeType?i.push(`${t}?orderNo=${e.orderNumber}`):r.handler(e,d,h,b,u,a)}),[x,d,h,b,u]),{0:v,1:C}=(0,l.useMemo)((()=>[[{title:d("c2c-ui-fiatOrder-asttp"),width:100,key:"asset",render:e=>re(le,null,re(ne,{height:"26",src:`${ae.Xs}/static/images/coin/${e.toLowerCase()}.svg`,alt:""}),re(se,null,e))},{title:d("c2c-ui-fiatOrder-amount"),width:200,key:"totalPrice",pl:"20px",render:(e,t)=>re(le,null,re(oe,null,(0,W.xG)(e,t.currencyTicketSize))," ",t.fiatUnit)},{title:d("c2c-ui-fiatOrder-paq"),width:240,key:"price",pl:"50px",render:(e,t)=>re(le,null,re(w.Z,null,re(ce,null,d("c2c-ui-fiatOrder-price")),re(w.Z,{sx:{flexDirection:"rtl"===s?"row-reverse":"row"}},re(_.Z,{mr:1},(0,W.xG)(e,t.priceTicketSize)),re(_.Z,{mr:1},t.fiatUnit,"/",t.asset))),re(w.Z,{mt:2},re(ce,null,d("c2c-ui-fiatOrder-volume")),re(w.Z,{sx:{flexDirection:"rtl"===s?"row-reverse":"row"}},re(_.Z,{mr:1},(0,W.xG)(t.amount,t.assetTicketSize)),re(_.Z,{mr:1},t.asset))))},{title:d("c2c-ui-fiatOrder-counterparty"),width:200,key:"coin",render:(e,t)=>{let r="BUY"===t.tradeType?t.sellerNickname:t.buyerNickname;return t.orderStatus!==E.Qc&&t.orderStatus!==E.ew&&t.orderStatus!==E.mb||(r=null),re(le,null,r?re(Z.Z,{mb:2}," ",r):null,re(w.Z,{alignItems:"flex-start"},re(G.Z,{className:"C2CordersList_btn_merchantAlias",href:t.makerUserNo?`${a}?advertiserNo=${t.makerUserNo}`:"#",cssStyle:{color:"#285C93",textDecoration:"none",cursor:t.makerUserNo?"pointer":"default"}},re(_.Z,{color:t.makerUserNo?"t.blue":"maskBg"},t.makerNickname))))}},{title:d("c2c-ui-filter-status"),width:120,key:"coin",render:(e,a)=>re(le,null,re(Z.Z,{mt:0,color:a.orderStatus===E.ew||a.orderStatus===E.mb?"#C1C6CD":void 0},d(E.Jb[a.orderStatus])),re(Z.Z,{mt:2},re(G.Z,{id:"C2CordersList_btn_detail",cssStyle:{color:"#285C93",textDecoration:"none"},href:`${t}?orderNo=${a.orderNumber}`},d("c2c-ui-fiatOrder-detail"))),a.complaintReason&&re(w.Z,{alignItems:"center",mt:2},re(G.Z,{id:"C2CordersList_btn_detail",cssStyle:{color:"#285C93",textDecoration:"none"},href:`${r}?code=${a.orderNumber}`},d("c2c_user_appeal_appeal_history")),(3!==a.complaintStatus||4!==a.complaintStatus)&&null!==a.complaintStatus&&re("em",{style:{width:"4px",height:"4px",background:"#F84960",display:"inline-block",borderRadius:"4px",marginLeft:"4px"}})))},{title:d("c2c-ui-fiatOrder-opreation"),width:140,key:"coin",render:(t,a)=>{var r;let l=(0,E.Jl)(a.orderStatus,"SELL"===a.tradeType);if(5!==a.orderStatus||a.canCancelComplaintOrder||(l=null),!l)return"";const i=t=>{t.success&&e.setRefreshTime(+new Date)};return re(le,{style:{fontSize:0}},+new Date-a[l.countDownKey]<0?re("div",{style:{fontSize:"14px",marginBottom:"12px",lineHeight:1}}," ",d("c2c-ui-fiatorder-remain")," ",re(pe,null,re(V.Z,{limitTime:a[l.countDownKey],onTimeout:()=>e.setRefreshTime(+new Date)}))):"",null===(r=l.operation)||void 0===r?void 0:r.map(((e,t)=>re(Z.Z,{key:t,mt:0===t?0:"12px"},e.isButton?re(ie,{id:e.id,onClick:()=>{y(a,i,e)}},"C2CordersList_btn_cancel"===e.id&&a.orderStatus===E.mz?d("c2c_user_appeal_cancel_appeal"):d(e.txt)):re(de,{id:e.id,onClick:()=>{y(a,i,e)}},"C2CordersList_btn_cancel"===e.id&&a.orderStatus===E.mz?d("c2c_user_appeal_cancel_appeal"):d(e.txt))))))}}],{before:e=>re(ue,{style:{paddingLeft:"rtl"===s?0:"12px",paddingRight:"rtl"===s?"12px":0}},re("span",{style:{marginLeft:"rtl"===s?0:"12px",marginRight:"rtl"===s?"12px":0},className:"BUY"===e.tradeType?"green":"red"},d(`c2c-ui-tyle-${e.tradeType.toLowerCase()}`)),re("span",{style:{marginLeft:"rtl"===s?0:"12px",marginRight:"rtl"===s?"12px":0},className:"grey"},"|"),re("span",{style:{marginLeft:"rtl"===s?0:"12px",marginRight:"rtl"===s?"12px":0},className:"orderNo"},e.orderNumber),re("span",{style:{marginLeft:"rtl"===s?0:"12px",marginRight:"rtl"===s?"12px":0},className:"grey"},R()(e.createTime,"x").format("YYYY-MM-DD HH:mm:ss")))}]),[d,u,s,b,h]);return re(A,{ref:c,column:v,tbData:e.tbData,setData:e.setData,requestFuc:e.requestFuc,refreshTime:e.refreshTime,page:e.page,setPage:e.setPage,total:e.total,setTotal:e.setTotal,onPageChange:e.onPageChange,emptyElement:re(Q,{txt:d("c2c-ui-fiatOrder-emptyTable")}),insert:C})};var fe=a("fzcv"),ge=a("Gu4O"),he=a("rrXQ"),be=i().createElement;const xe={orderStatusList:[0,1,2,3,5]},ye=e=>(0,c.v_)(u.Z.GET_ORDER_LIST_V2,e);const ve=function(){const[e]=(0,o.$)(),t=(0,n.useDispatch)(),{isLoggedIn:a}=(0,s.b)(),{metaData:i,configs:c}=(0,l.useContext)(d.Il),{appealOrderInfo:u}=(0,n.useSelector)((e=>e.orderDetail)),{0:f,1:g}=(0,l.useState)([]),{0:h,1:b}=(0,l.useState)(0),{0:x,1:w}=(0,l.useState)({}),{0:Z,1:_}=(0,l.useState)(+new Date),{0:S,1:T}=(0,l.useState)(1),{0:N,1:D}=(0,l.useState)(0),I=(0,l.useCallback)((e=>{Object.keys(e).forEach((t=>{e[t]===k.j&&(e[t]=void 0)})),w(e),T(1)}),[]);(0,l.useEffect)((()=>{a?(t.common.getAssetList(),t.common.getUserMigrateQueryStatus()):!1===a&&(0,he.GL)()}),[a]);const E=(0,l.useCallback)((e=>{b(e),T(1),w({})}),[]);return(0,l.useEffect)((()=>{a&&(h?ye((0,r.Z)({page:S,rows:10},xe)).then((e=>{e.success?(g(e.data||[]),D(e.total)):e.code&&"100001005"===e.code&&(0,he.GL)()})).catch((e=>g([]))):!h&&x&&ye((0,r.Z)((0,r.Z)({},x),{},{page:S,rows:10})).then((e=>{e.success?(g(e.data||[]),D(e.total)):e.code&&"100001005"===e.code&&(0,he.GL)()})).catch((e=>g([]))))}),[h,Z,S,x.asset,x.orderStatus,x.tradeType,he.GL,a]),be(p.Z,{metaData:i,configs:c},be(C.Z,{linkType:"fiatOrder"}),be(m.YJ,null,be(m.vR,null,be(v,{defaultIndex:h,onChange:E},be(y,{tab:e("c2c-ui-fiatOrder-allOrders")}),be(y,{tab:e("c2c-ui-fiatOrder-processing")})),h?"":be(P,{onSubmit:I}))),be(m.Xs,{flex:"1"},be(m.vR,{style:{minHeight:"100%"}},be(me,{tbData:f,setData:g,refreshTime:Z,setRefreshTime:_,page:S,setPage:T,total:N,setTotal:D,onPageChange:T,filter:h?xe:x}))),be(fe.Z,{orderInfo:u}),be(ge.Z,{orderInfo:u,type:"first"}))}}}]);