(self.webpackJsonp_c2c=self.webpackJsonp_c2c||[]).push([[28],{PZCw:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>M});var r=t("/SIk"),i=t.n(r),l=t("krwy"),o=t("Ne75"),p=t("7IDl"),n=t("8Lpi"),s=t("rrXQ"),c=t("G6rc"),d=t("voGk"),y=t("xjo1"),_=t("nAdt"),u=t("szIg"),v=t("sJ8p"),f=t("KkEV"),Z=t("SbIO"),x=t("RPIV"),H=t("oUxX"),m=t("jHkY"),C=t("P8ba"),w=t("wgY5"),I=t.n(w),b=t("R9ZS"),h=t("q/bM"),k=i().createElement;const T=({onView:a,t:e,isNew:t,createTime:r,infoType:i,userName:l,remark:o,proofFiles:p,description:n,extra:{reason:s}})=>k(v.Z,{tx:"appealHistory",variant:"flowItemWrap"},k(Z.Z,{tx:"appealHistory",variant:"flowTime"},I()(r).format("MM-DD HH:mm:ss")),t&&[k(v.Z,{tx:"appealHistory",variant:"news"},e("c2c_user_appeal_new")),k(v.Z,{tx:"appealHistory",variant:"newsMobile"})],1===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCard"},k(v.Z,{tx:"appealHistory",variant:"flowCardTitle"},e("c2c_user_appeal_filed_by_user")),k(v.Z,{tx:"appealHistory",variant:"flowContentWrap"},k(f.Z,{tx:"appealHistory",alignItems:"center"},k(v.Z,{tx:"appealHistory",variant:"userAvator"},null===l||void 0===l?void 0:l.slice(0,1)),k(Z.Z,{tx:"appealHistory",variant:"userName"},l)),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_reasons")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},s)),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_descripion")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent",color:n?"#14151A":"#AEB4BC"},n||e("c2c_user_appeal_descripion_nohistory"))),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,null,p.map(((e,t)=>k(m.K,{onClick:a(e),key:t,src:e}))),k("div",{style:{clear:"both"}}))))),2===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCard"},k(v.Z,{tx:"appealHistory",variant:"flowCardTitle"},e("c2c_user_appeal_provide_add_info")),k(v.Z,{tx:"appealHistory",variant:"flowContentWrap"},k(f.Z,{tx:"appealHistory",alignItems:"center"},k(v.Z,{tx:"appealHistory",variant:"userAvator"},null===l||void 0===l?void 0:l.slice(0,1)),k(Z.Z,{tx:"appealHistory",variant:"userName"},l)),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_descripion")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent",color:n?"#14151A":"#AEB4BC"},n||e("c2c_user_appeal_descripion_nohistory"))),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,null,p.map(((e,t)=>k(m.K,{onClick:a(e),key:t,src:e}))),k("div",{style:{clear:"both"}}))))),3===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardGray"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},(0,b.Y3)(e("c2c_user_appeal_confirms_failed_reach"),[l])))),4===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardGray"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},(0,b.Y3)(e("c2c_user_appeal_not_response_within_limit"),[l])))),5===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},(0,b.Y3)(e("c2c_user_appeal_result_cancel_appeal"),[l])))),6===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCard"},k(v.Z,{tx:"appealHistory",variant:"flowCardTitle"},e("c2c_user_appeal_respondent_provide_info")),k(v.Z,{tx:"appealHistory",variant:"flowContentWrap"},k(f.Z,{tx:"appealHistory",alignItems:"center"},k(v.Z,{tx:"appealHistory",variant:"userAvator"},null===l||void 0===l?void 0:l.slice(0,1)),k(Z.Z,{tx:"appealHistory",variant:"userName"},l)),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_descripion")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent",color:n?"#14151A":"#AEB4BC"},n||e("c2c_user_appeal_descripion_nohistory"))),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,null,p.map(((a,e)=>k(m.K,{key:e,src:a}))),k("div",{style:{clear:"both"}}))))),7===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCard"},k(v.Z,{tx:"appealHistory",variant:"flowCardTitle"},e("c2c_user_appeal_confirms_agreements")),k(v.Z,{tx:"appealHistory",variant:"flowContentWrap"},k(f.Z,{tx:"appealHistory",alignItems:"center"},k(v.Z,{tx:"appealHistory",variant:"userAvator"},null===l||void 0===l?void 0:l.slice(0,1)),k(Z.Z,{tx:"appealHistory",variant:"userName"},l)),k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_descripion")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent",color:n?"#14151A":"#AEB4BC"},n||e("c2c_user_appeal_descripion_nohistory"))))),8===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardGray"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},(0,b.Y3)(e("c2c_user_appeal_respondent_confirms_failed_reach"),[l])))),9===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardGray"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},(0,b.Y3)(e("c2c_user_appeal_respondent_not_response"),[l])))),10===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardGray"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},(0,b.Y3)(e("c2c_user_appeal_cs_involved_and_wait"),[l])))),11===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCard"},k(f.Z,{tx:"appealHistory",alignItems:"center",variant:"flowCardTitle"},k(f.Z,{tx:"appealHistory",variant:"csAvator"},k("img",{src:`${h.Xs}/static/images/c2c/user/bnbIcon.svg`})),k(Z.Z,{tx:"appealHistory",variant:"userName"},e("c2c_user_appeal_support_comment"))),k(v.Z,{tx:"appealHistory",variant:"flowContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItem"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_comment")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},o)))),12===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},e("c2c_user_appeal_cs_completed")))),13===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},e("c2c_user_appeal_cs_cancel_order")))),14===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},e("c2c_user_appeal_cs_cancel_appeal")))),15===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},(0,b.Y3)(e("c2c-user-order-appeal-result15"),[l])))),16===+i&&k(v.Z,{tx:"appealHistory",variant:"flowCardWarn"},k(v.Z,{tx:"appealHistory",variant:"flowResultContentWrap"},k(v.Z,{tx:"appealHistory",variant:"fieldItemTitle"},e("c2c_user_appeal_result")),k(v.Z,{tx:"appealHistory",variant:"fieldItemContent"},(0,b.Y3)(e("c2c-user-order-appeal-result16"),[l])))));var g=i().createElement;const W=(0,p.D8)((()=>t.e(351).then(t.bind(t,"3rj7"))),{ssr:!1,webpack:()=>["3rj7"],modules:["../../components/RWDChat"]}),N=(0,u.connect)((a=>({appealHistory:a.appealHistory})),(a=>({beginSocket:a.chat.beginSocket,closeSocket:a.chat.closeSocket,dispatch:a})))((({id:a,dispatch:e,appealHistory:t,t:i,beginSocket:l,closeSocket:o})=>{const{orderInfo:p}=(0,u.useSelector)((a=>a.orderDetail)),n=(0,r.useRef)(t.loading),s=(0,r.useRef)(t.isNoMore),c=(0,r.useRef)(null);(0,r.useEffect)((()=>{n.current=t.loading,s.current=t.isNoMore}),[t.loading,t.isNoMore]);const d=(0,r.useCallback)((()=>{e.orderDetail.postOrderMatchByOrderNumber({orderNumber:a})}),[e.orderDetail]),{0:y,1:w}=(0,r.useState)(!1);(0,r.useEffect)((()=>{d()}),[d]);const I=(0,r.useMemo)((()=>{if(p){const{tradeType:a,orderNumber:e,sellerNickname:t,buyerNickname:r,sellerName:i,buyerName:l,sellerMobilePhone:o,buyerMobilePhone:n}=p;return{orderNumber:e,nickname:"BUY"===a?t:r,name:"BUY"===a?i:l,phone:"BUY"===a?o:n,showChat:y,setShowChat:w}}return{}}),[p,y,w]);(0,r.useEffect)((()=>{e.appealHistory.getFlowHistory({id:a,cb:()=>e.appealHistory.loadMore(a)})}),[]);const{0:b,1:h}=(0,r.useState)(""),k=a=>()=>{h(a)};(0,r.useEffect)((()=>{const t=new IntersectionObserver((t=>{t[0].intersectionRatio<=0||n.current||s.current||e.appealHistory.loadMore(a)}));return t.observe(c.current),()=>{t.unobserve(c.current)}}),[]);const N=(0,r.useCallback)((a=>{(null===p||void 0===p?void 0:p.orderNumber)===a.orderNumber&&e.orderDetail.update({orderInfo:(0,_.Z)((0,_.Z)({},p),a)})}),[p,e.orderDetail]);return(0,r.useEffect)((()=>{if(p)return l(),(0,C.V)("ORDER_STATUS",N),()=>{o(),(0,C.l)("ORDER_STATUS",N)}}),[JSON.stringify(p)]),g(v.Z,null,g(f.Z,null,g(v.Z,{tx:"appealHistory",variant:"leftAreaStyle"},g(v.Z,{tx:"appealHistory",variant:"scrollWrap"},t.flowList.map(((a,e)=>g(T,Object.assign({onView:k,t:i},a,{isNew:0===e,key:e})))),g(f.Z,{ref:c,style:{visibility:t.loading?"visible":"hidden"},tx:"appealHistory",variant:"loadingMoreWrap"},g(H.Z,null),g(Z.Z,{tx:"appealHistory",variant:"loadingMore"},i("c2c-ui-chat-loadmore"))))),g(v.Z,{tx:"appealHistory",variant:"rightAreaStyle"},p&&g(W,I))),g(v.Z,null,g(x.Z,{onClick:()=>{w(!0)},display:["block","none","none"],mb:"10px",width:1,variant:"outline",colorStyle:"second"},i("c2c_user_appeal_chat_now"))),g(m.D,{onClose:()=>{h("")},visible:!!b,src:b}))}));var S=t("CVOX"),R=i().createElement;function A(){const{p2pOrderDetail:a}=S.Z.site(),e=(0,p.tv)(),[t]=(0,l.$)(),{code:i}=(0,p.Hb)().query,o=(0,r.useMemo)((()=>R(f.Z,{id:"C2Cappealhistory_btn_back",sx:{cursor:"pointer",fontSize:"12px"},onClick:()=>{e.push(`${a}?orderNo=${i}`)}},R(Z.Z,null,"<"),R(Z.Z,{ml:"-4px"},"<"),R(Z.Z,{ml:"4px"},t("c2c_ui_naviagtion_back")))),[i,t]);return R(v.Z,{tx:"container",variant:"box",sx:{width:"100%",bg:"white",top:0,boxShadow:" 0px 0px 4px rgba(0,0,0,0.08)",mb:"20px"}},R(f.Z,{tx:"container",variant:"content",flexDirection:"column"},R(f.Z,{tx:"editAdv",variant:"editTitle"},R(Z.Z,{as:"h1",fontSize:"24px",mt:[2,3,3],mb:[2,3,3]},t("c2c_user_appeal_history")),o)))}const E=i().memo(A);var D=i().createElement;const M=function(){const{metaData:a,configs:e}=(0,r.useContext)(o.Il),[t]=(0,l.$)(),{isLoggedIn:i}=(0,n.b)(),{code:_}=(0,p.Hb)().query;return(0,r.useEffect)((()=>{!1===i&&(0,s.GL)()}),[i]),D(c.Z,{metaData:a,configs:e},D(y.Z,{linkType:"appealHistory"}),D(E,null),i&&D(d.EF,null,D(N,{t:t,id:_})))}}}]);