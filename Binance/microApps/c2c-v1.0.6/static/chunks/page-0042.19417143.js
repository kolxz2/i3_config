(self.webpackJsonp_c2c=self.webpackJsonp_c2c||[]).push([[835],{Anf7:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ee});var l=a("/SIk"),r=a.n(l),i=a("G6rc"),n=a("szIg"),o=a("Q755"),s=a("BXEJ"),c=a("7IDl"),d=a("03hH"),u=a("xjo1"),p=a("/ZSM"),m=a("5iDs"),f=a("krwy"),h=a("sJ8p"),b=a("KkEV"),x=a("baV9"),y=a("xt3s"),v=a("SbIO"),g=a("CVOX"),C=r().createElement;const Z=({showAllFiat:e})=>{const{p2pTrade:t}=g.Z.site(),a=(0,c.tv)(),r=(0,n.useDispatch)(),{tradeType:i,asset:o,fiat:s,merchantCheck:d}=(0,n.useSelector)((e=>e.trade)),{assetList:u,isMobile:p,pageFiatConfig:m}=(0,n.useSelector)((e=>e.common)),f=(0,l.useCallback)((async e=>{await r.trade.getAdvListAsync({asset:e,fiat:s,page:1,publisherType:"CNY"!==s&&d?"merchant":null}),r.trade.update({asset:e,isOpring:!1,page:1,fiat:s}),a.push(`${t}/${i}/${e}`)}),[r.trade,i,s,d]),b=(0,l.useMemo)((()=>{var t;let a=[];if((null===m||void 0===m?void 0:m.length)>0)for(let e=0;e<m.length;e++)if(m[e].side===i.toUpperCase()){a=m[e].assets;break}return a=a.map((e=>e.asset)),!p&&!e&&(null===(t=a)||void 0===t?void 0:t.length)>10?a.slice(0,10):a}),[e,m,i,p]);return(0,l.useMemo)((()=>C(h.Z,null,b.map(((e,t)=>C(h.Z,{key:e+t,onClick:()=>{f(e)},sx:{float:"left",userSelect:"none",clear:p?"":t%10===0?"both":"",ml:[0,3,3],mr:["20px",3,3]}},C(v.Z,{as:"h2",sx:{fontSize:"14px",fontWeight:400,textAlign:"center",height:["40px","56px"],lineHeight:["36px","58px"],color:o===e?"#F0B90B":"#212833",borderBottom:o===e?"2px solid #F0B90B":"",cursor:o===e?"default":"pointer"}},e)))))),[b,f,o])};var k=a("M/Si"),T=a("RPIV"),w=a("MdhJ"),_=a("D57K"),F=a("09Mm");const S=function(e){return r().createElement(F.Z,(0,_.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor"},e),r().createElement("path",{d:"M6 13V3H4v10h2zm6 0V3h-2v10h2z",fill:"#212833"}))};var B=a("oUxX"),L=a("R9ZS"),A=a("SJwT"),M=r().createElement;function E({list:e=[],visible:t,DrawerHandler:a,mainHandle:r}){const i=(0,l.useMemo)((()=>e.map(((e,t)=>M(h.Z,{key:t,tx:"trade",onClick:()=>{r&&r(e.value,e.label),a()},variant:"mrl_box"},e.label)))),[e,r,a]);return M(A.Z,{visible:t,DrawerHandler:a},M(b.Z,{tx:"trade",variant:"mobRightLink"},i))}const D=r().memo(E);var P=r().createElement;const $=({type:e})=>{const[t]=(0,f.$)(),a=(0,n.useDispatch)(),{0:i,1:o}=(0,l.useState)(null),{0:s,1:c}=(0,l.useState)(null),{0:d,1:u}=(0,l.useState)(!1),{isMobile:p}=(0,n.useSelector)((e=>e.common)),{isOpring:m}=(0,n.useSelector)((e=>e.trade)),x=(0,n.useSelector)((e=>e.loading.effects.trade.getAdvListAsync)),y=(0,l.useMemo)((()=>[{label:t("c2c-ui-trade-refresh-no"),value:0},{label:(0,L.TL)(t("c2c-ui-trade-refresh"),[5]),value:5},{label:(0,L.TL)(t("c2c-ui-trade-refresh"),[10]),value:10},{label:(0,L.TL)(t("c2c-ui-trade-refresh"),[20]),value:20}]),[t]),v=(0,l.useMemo)((()=>x?P(B.Z,{sx:{width:"14px",height:"14px"}}):P(w.Z,{size:14})),[x]),g=(0,l.useCallback)(((e,t)=>{o(e),c(t)}),[]),C=(0,l.useMemo)((()=>P(k.ZP,{trigger:"click",overlay:P(b.Z,{tx:"dropdownOverlay",variant:"whiteUl",sx:{flexDirection:"column",cursor:"pointer"}},y.map((({label:e,value:t})=>P(h.Z,{key:t,tx:"dropdownOverlay",variant:"whiteli",onClick:()=>g(t,e),__css:{"&:visited, &:active":{bg:"#F5F5F7"},"&:hover":{bg:"#F5F5F7"}}},e))))},P(b.Z,{alignItems:"center"},P(T.Z,{id:"C2CofferList_btn_refresh",variant:"outline",minWidth:"152px",display:["none","inline-flex"]},v,P(h.Z,{ml:1},s||t("c2c-ui-trade-refresh-settings")))))),[t,y,g,v,s]),Z=(0,l.useMemo)((()=>x?P(B.Z,{sx:{width:"22px",height:"22px",ml:3}}):P(w.Z,{size:24,ml:3,onClick:()=>{u(!0)},display:["inline","none"]})),[x]),_=(0,l.useMemo)((()=>p||"pc"!==e?Z:C),[p,C,Z]),F=(0,l.useMemo)((()=>p&&"mobile"===e?P(D,{list:y,visible:d,DrawerHandler:()=>{u(!1)},mainHandle:g}):null),[p,g,d,y]),A=(0,l.useCallback)((()=>a.trade.update({isOpring:!1})),[a.trade]),M=(0,l.useMemo)((()=>p||"pc"!==e?null:P(T.Z,{id:"C2CofferList_btn_refresh",variant:"outline",minWidth:"152px",display:["none","inline-flex"],onClick:A},P(S,{size:14}),P(h.Z,{ml:1},t("c2c-ui-trade-pause")))),[p,A,t]);return(0,l.useEffect)((()=>{const e=i?1e3*i:9999999999;i&&0!=i?a.trade.update({deleteLoading:!0}):a.trade.update({deleteLoading:!1});const t=setInterval((()=>{m||a.trade.getAdvListAsync()}),e);return()=>{clearInterval(t)}}),[i,a.trade,m]),P(r().Fragment,null,m?M:_,F)};var I=a("nAdt"),U=a("xJ8I"),R=a("7fF7"),z=r().createElement;const H=({filter:e})=>{const[t]=(0,f.$)(),a=(0,n.useDispatch)(),{pcPrice:r,fiat:i}=(0,n.useSelector)((e=>e.trade)),o=(0,L.VQ)(),s=(0,l.useCallback)((e=>{e?R.Z.pointNumber.test(e)&&a.trade.update({pcPrice:e}):a.trade.update({pcPrice:e})}),[a.trade]),c=(0,l.useCallback)((t=>{e({transAmount:t})}),[e]),d=(0,l.useMemo)((()=>z(b.Z,{tx:"trade",variant:"pcAmountQuickF"},[{id:"C2Csearchamount_dropdown_label100",val:100,name:100},{id:"C2Csearchamount_dropdown_label1k",val:1e3,name:1e3},{id:"C2Csearchamount_dropdown_label5k",val:5e3,name:5e3},{id:"C2Csearchamount_dropdown_label10k",val:1e4,name:"1\u4e07"},{id:"C2Csearchamount_dropdown_label1m",val:1e5,name:"10\u4e07"},{id:"C2Csearchamount_dropdown_label2m",val:2e5,name:"20\u4e07"}].map(((e,t)=>z(v.Z,{tx:"trade",variant:"pcAmountQuickT",key:t,onClick:()=>{s(e.val),c(e.val)}},e.name))))),[s,c]),u=z(U.Z,{labelFixed:!0,variant:"outline",autoComplete:"off",value:r,id:"C2Csearchamount_searchbox_amount",name:"transAmount",placeholder:"c2c-ui-trade-amount-pl"===t("c2c-ui-trade-amount-pl")?"":t("c2c-ui-trade-amount-pl"),boxProps:{width:"150px",sx:{borderTopLeftRadius:"4px",borderTopRightRadius:0,borderBottomLeftRadius:"4px",borderBottomRightRadius:0,":hover":{zIndex:1}}},onChange:e=>s(e.currentTarget.value),onKeyDown:e=>13===e.keyCode?c(r):null,suffix:z(b.Z,{alignItems:"center"},z(v.Z,{color:"#AEB4BC",mr:"8px"},i))}),p=z(T.Z,{id:"C2Csearchamount_btn_search",variant:"outline",colorStyle:"second",sx:{color:"#D0980B",mt:"4px",ml:"-1px",borderTopLeftRadius:0,borderTopRightRadius:"4px",borderBottomLeftRadius:0,borderBottomRightRadius:"4px",":hover":{zIndex:1}},onClick:()=>{c(r)}},t("c2c-user-trade-filter-search"));return z(h.Z,{px:"6px"},z(v.Z,{tx:"trade",variant:"filterTitle"},t("c2c-ui-trade-amount")),z(b.Z,{alignItems:"center"},"cn"!==o&&"zh-CN"!==o||"CNY"!==i?u:z(k.ZP,{trigger:"hover",overlay:d},u),p))},N=r().memo(H);var O=a("hUwf"),V=a("XB62"),Y=a("bD2I"),J=a("xRy8"),Q=a("x5Ld"),W=a("PKgr"),q=r().createElement;const G=({filter:e})=>{const[t]=(0,f.$)(),a=(0,n.useDispatch)(),{loginStatus:r}=(0,d.Z)(),{fiat:i,tradeType:o,asset:s}=(0,n.useSelector)((e=>e.trade)),{fiatList:c}=(0,n.useSelector)((e=>e.common)),u=(0,l.useMemo)((()=>{let e=[];return c&&c.length&&(e=c.map((({currencyCode:e,iconUrl:t})=>({label:e,value:e,iconUrl:t}))),e.sort(((e,t)=>`${e.value}`.localeCompare(`${t.value}`)))),e}),[c]),p=(0,l.useCallback)((e=>{const t=u.find((t=>t.value===e));return t?q(b.Z,{alignItems:"center"},t.iconUrl?q(O.Z,{width:"14px",height:"14px",src:t.iconUrl,ml:"-4px",mr:"8px"}):null,q(v.Z,null,t.label)):null}),[u]),m=(0,l.useCallback)((async t=>{await(0,Q.setCookie)("common_fiat",t,0);const{tradeConfig:l,publisherType:r}=await a.common.postPageTradeConfig({param:{fiat:t},areaType:"P2P"}),{asset:i,tradeType:n}=(0,W.V)(l,o,s),c={fiat:t,tradeType:n,asset:i,merchantCheck:"merchant"===r,payTypes:[]};a.trade.update((0,I.Z)((0,I.Z)({},c),{},{paymethod:"all"})),e(c)}),[r,a.trade,a.common,o,s,e]),x=u.map(((e,t)=>q(V.W,{key:t,value:e.value},q(b.Z,{alignItems:"center"},e.iconUrl?q(O.Z,{width:"14px",height:"14px",src:e.iconUrl,ml:"-4px",mr:"8px"}):null,q(v.Z,null,e.label)))));return q(h.Z,{px:"6px",sx:{whiteSpace:"nowrap"}},q(v.Z,{tx:"trade",variant:"filterTitle"},t("c2c-ui-fiat")),q(Y.Z,{id:"C2Cfiatfilter_searhbox_fiat",searchPlaceholder:"",variant:"outline",width:"105px",value:i,onChange:m,renderValue:p,sx:{">div:first-of-type":{height:"32px"},".bn-sdd-value":{height:"32px",minHeight:"32px"},".css-1yfccoe":{display:"none"},".bn-sdd-dropdown .bn-input-prefix":{display:"none"}}},q(J.Y,null,x)))},K=r().memo(G);var X=a("SwxV");const j=()=>{const[e]=(0,f.$)(),{fiatConfigMethods:t}=(0,n.useSelector)((e=>e.common)),{allMethodlist:a}=(0,l.useMemo)((()=>{let a=t.map((({identifier:e,tradeMethodName:t,tradeMethodBgColor:a})=>({label:t,value:e,bgColor:a})));return{allMethodlist:[{label:e("c2c-ui-trade-filter-allpay"),value:X.h,bgColor:"#F0B90B"},...a]}}),[e,t,X.h]);return{allMethodlist:a}};var ee=r().createElement;const te=({filter:e})=>{const[t]=(0,f.$)(),a=(0,n.useDispatch)(),{0:r,1:i}=(0,l.useState)(""),{paymethod:o}=(0,n.useSelector)((e=>e.trade)),{allMethodlist:s}=j();(0,l.useEffect)((()=>{if(o)if("all"===o)i(t("c2c-ui-trade-filter-allpay"));else{var e;const t=null===(e=s.find((e=>e.value===o)))||void 0===e?void 0:e.label;i(t)}}),[s,o,t]);const c=(0,l.useCallback)((e=>{const t=s.find((t=>t.label===e));return t?ee(b.Z,{alignItems:"center"},ee(v.Z,null,t.label.length>18?`${t.label.slice(0,16)}...`:t.label)):null}),[s]),d=(0,l.useCallback)((l=>{if(l===t("c2c-ui-trade-filter-allpay"))a.trade.update({paymethod:"all"}),e({payTypes:[]});else{var r;const t=null===(r=s.find((e=>e.label===l)))||void 0===r?void 0:r.value;a.trade.update({paymethod:t}),e({payTypes:[t]})}}),[a.trade,s,e,t]),u=(0,l.useMemo)((()=>s&&(null===s||void 0===s?void 0:s.map(((e,t)=>{var a;return ee(V.W,{key:t,value:e.label,prefix:e.bgColor?ee(h.Z,{tx:"trade",variant:"newPaymentImg",sx:{bg:e.bgColor}}):null,sx:{maxWidth:["280px","280px","300px"]}},(null===(a=e.label)||void 0===a?void 0:a.length)>30?`${e.label.slice(0,30)}...`:e.label)})))),[s]);return ee(h.Z,{px:"6px",sx:{whiteSpace:"nowrap"}},ee(v.Z,{tx:"trade",variant:"filterTitle"},t("c2c-ui-payment")),ee(Y.Z,{width:"170px",id:"C2Cpaymentfilter_searchbox_payment",placeholder:t("c2c-ui-payment"),onChange:e=>{d(e)},value:r,renderValue:c,filterFunction:(e,t)=>t.toUpperCase().includes(e.toUpperCase()),sx:{">div:first-of-type":{height:"32px"},".bn-sdd-value":{height:"32px",minHeight:"32px"},".bn-sdd-optionGroupLabel":{paddingTop:0,paddingBottom:0},".css-1yfccoe":{display:"none"}}},u))},ae=r().memo(te);var le=a("ozMS"),re=a("3Dfw"),ie=r().createElement;const ne=function({filter:e=(()=>{})}){const[t]=(0,f.$)(),a=(0,n.useDispatch)(),{merchantCheck:l}=(0,n.useSelector)((e=>e.trade));return ie(b.Z,{sx:{mt:["30px",0,0],ml:[0,"12px","16px"],mb:["30px","6px","6px"],alignItems:"center"}},ie(le.Z,{width:"auto"},ie(re.Z,{id:"",name:"merchantCheck",onChange:t=>{a.trade.update({merchantCheck:t.target.checked}),e({publisherType:t.target.checked?"merchant":null})},checked:l}),ie(v.Z,{sx:{color:"#1E2329",fontSize:"14px"}},t("c2c-user-trade-only-show-merchant"))))};var oe=r().createElement;const se=()=>{const e=(0,n.useDispatch)(),{fiat:t,isOpring:a,merchantCheck:r}=(0,n.useSelector)((e=>e.trade)),i=(0,l.useCallback)((t=>{e.trade.updateFilter(t),e.trade.getAdvListAsync((0,I.Z)((0,I.Z)({},t),{},{publisherType:"merchant"})),e.trade.update({isOpring:!1})}),[e.trade]),o=(0,l.useCallback)((t=>{e.trade.updateFilter((0,I.Z)((0,I.Z)({},t),{},{publisherType:null})),e.trade.getAdvListAsync((0,I.Z)((0,I.Z)({},t),{},{publisherType:null})),e.trade.update({isOpring:!1})}),[e.trade]),s=(0,l.useCallback)((e=>{e.page=1,"CNY"!==t&&r?i(e):o(e)}),[i,o,e.trade,t,r]),c=(0,l.useCallback)((e=>{e.page=1,"CNY"!==e.fiat&&e.merchantCheck?i(e):o(e)}),[i,o]),d=(0,l.useCallback)((e=>{e.page=1,"merchant"===e.publisherType?i(e):o(e)}),[i,o]);return oe(h.Z,{tx:"trade",variant:"pcfilterBox",sx:{pb:"6px"}},oe(b.Z,{tx:"trade",variant:"pcfilterMain"},oe(b.Z,{tx:"trade",variant:"pcfilterMain_left"},oe(N,{filter:s}),oe(K,{filter:c}),oe(ae,{filter:s}),"CNY"!==t?oe(ne,{filter:d}):null),oe(b.Z,{sx:{pt:"38px"}},oe($,{type:"pc"}))))},ce=r().memo(se);var de=a("i9qg");const ue=function(e){return r().createElement(F.Z,(0,_.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r().createElement("path",{d:"M12.24 9l4.24 4.24-1.42 1.41-2.82-2.82-2.82 2.82L8 13.24 12.24 9z",fill:"currentColor"}))};const pe=function(e){return r().createElement(F.Z,(0,_.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),r().createElement("path",{d:"M12.24 14.65L8 10.41 9.42 9l2.82 2.82L15.06 9l1.42 1.41-4.24 4.24z",fill:"currentColor"}))};var me=r().createElement;const fe=function(){const e=(0,n.useDispatch)(),[t]=(0,f.$)(),{0:a,1:i}=(0,l.useState)(!0),{0:o,1:s}=(0,l.useState)(!0),c=(0,n.useSelector)((e=>e.common.fiatList)),d=(0,n.useSelector)((e=>e.trade.mobFiat)),u=(0,n.useSelector)((e=>e.trade.mobPayment)),p=R.Z.cnCode,{allMethodlist:m}=j(),x=(0,l.useMemo)((()=>{let e=[];return c&&c.length&&(e=c.map((({currencyCode:e,currencySymbol:t})=>({label:e,value:e,icon:t}))),e.sort(((e,t)=>`${e.value}`.localeCompare(`${t.value}`)))),e}),[c]),y=(0,l.useCallback)((e=>e.match(p)?e.length>14?`${e.slice(0,12)}...`:e:e.length>28?`${e.slice(0,25)}...`:e),[p]);return me(r().Fragment,null,me(b.Z,{flexDirection:"column",mt:"36px"},me(b.Z,{tx:"trade",variant:"mobFS_title_box"},me(v.Z,{tx:"trade",variant:"mobFilter_selectTitle"},t("c2c-ui-payment")),me(b.Z,{alignItems:"center",onClick:()=>{i(!a)}},me(v.Z,{fontSize:"12px",color:"#F0B90B"},"ALL"),me(v.Z,{fontSize:"12px",color:"#F0B90B",ml:"1px"},`(${m.length})`),me(a?ue:pe,{sx:{color:"#F0B90B"}}))),me(b.Z,{tx:"myads",variant:"mf_filter_body",mt:"4px",id:"C2CofferListFilter_payment_dropdown"},m.map(((t,l)=>me(b.Z,{key:l,tx:"myads",variant:u===t.value?"mffb_item_now":"mffb_item",mr:(l+1)%3===0?"0":"2%",sx:{display:a?"flex":l>5?"none":"flex"},onClick:()=>{e.trade.update({mobPayment:t.value})}},me(v.Z,{tx:"myads",variant:"mffb_item_text",sx:{wordBreak:"break-all"}},y(t.label))))))),me(b.Z,{flexDirection:"column",mt:"36px"},me(b.Z,{tx:"trade",variant:"mobFS_title_box"},me(v.Z,{tx:"trade",variant:"mobFilter_selectTitle"},t("c2c-ui-fiat")),me(b.Z,{alignItems:"center",onClick:()=>{s(!o)}},me(v.Z,{fontSize:"12px",color:"#F0B90B"},"ALL"),me(v.Z,{fontSize:"12px",color:"#F0B90B",ml:"1px"},`(${x.length})`),me(o?ue:pe,{sx:{color:"#F0B90B"}}))),me(b.Z,{tx:"myads",variant:"mf_filter_body",mt:"4px",id:"C2CofferListFilter_fiat_dropdown"},x.map(((t,a)=>me(h.Z,{key:a,tx:"myads",variant:d===t.value?"mffb_item_now":"mffb_item",mr:(a+1)%3===0?"0":"2%",sx:{display:o?"flex":a>5?"none":"flex",justifyContent:"space-between"},onClick:()=>{e.trade.update({mobFiat:t.value,mobPayment:"all"})}},me(v.Z,{ml:"10%"},t.label),me(v.Z,null),me(v.Z,{mr:"10%",color:"#76808F"},t.icon)))))))};var he=r().createElement;const be=function({closeHandler:e,showMobFilter:t=!1}){const a=(0,n.useDispatch)(),[r]=(0,f.$)(),{defaultFiat:i}=(0,n.useSelector)((e=>e.common)),{loginStatus:o}=(0,d.Z)(),{filter:s,mobFiat:c,mobPrice:u,mobPayment:p,tradeType:m,asset:h,merchantCheck:x}=(0,n.useSelector)((e=>e.trade)),y=(0,l.useCallback)((()=>{a.trade.update({mobFiat:i,mobPrice:"",mobPayment:"all"})}),[i,a.trade]),g=(0,l.useCallback)((async()=>{await(0,Q.setCookie)("common_fiat",c,0),o&&a.trade.getOrderT1Tips({fiatUnit:c});const{tradeConfig:t}=await a.common.postPageTradeConfig({param:{fiat:c},areaType:"P2P"}),{asset:l,tradeType:r}=(0,W.V)(t,m,h);l||r?a.trade.getAdvListAsync({page:1,rows:10,fiat:c,transAmount:u,payTypes:"all"===p?void 0:[p],tradeType:r,asset:l,publisherType:"CNY"!==c&&x?"merchant":null}):a.trade.update({advList:[],advListTotal:0,mobRow:10}),a.trade.update({fiat:c,tradeType:r,asset:l,isOpring:!1,mobRow:10,filter:{page:1,rows:10,fiat:c,transAmount:u,payTypes:"all"===p?void 0:[p],tradeType:r,asset:l,publisherType:"CNY"!==c&&x?"merchant":null}}),e()}),[c,u,p,s,o,a.trade,a.common,e,m,h,x]),C=(0,l.useCallback)((e=>{e?R.Z.pointNumber.test(e)&&a.trade.update({mobPrice:e}):a.trade.update({mobPrice:e})}),[a.trade]);return he(de.Z,{DrawerVisible:t,DrawerHandler:e,titleText:r("c2c-ui-pc-myposts-btn-filter"),CloseHandler:e,lBtnHandler:y,lBtnText:r("c2c-ui-pc-myposts-btn-reset"),rBtnHandler:g,rBtnText:r("c2c-ui-dialog-comfirm-cancel")},he(b.Z,{flexDirection:"column",mt:"24px"},he(v.Z,{tx:"trade",variant:"mobFilter_selectTitle",mb:"3px"},r("c2c-ui-trade-amount")),he(U.Z,{variant:"outlineLarge",labelFixed:!0,value:u,id:"C2CofferListFilter_amount_input",name:"transAmount",placeholder:"c2c-ui-trade-amount-pl"===r("c2c-ui-trade-amount-pl")?"":r("c2c-ui-trade-amount-pl"),suffix:c,onChange:e=>C(e.currentTarget.value)})),he(fe,null),"CNY"!==c?he(ne,null):null)};var xe=r().createElement;const ye=function(){const{p2pTrade:e}=g.Z.site(),t=(0,c.tv)(),a=(0,n.useDispatch)(),{isMobile:r,pageFiatConfig:i}=(0,n.useSelector)((e=>e.common)),{tradeType:o,asset:s}=(0,n.useSelector)((e=>e.trade)),[d]=(0,f.$)(),u=(0,L.VQ)(),{data:p,buyButton:m,sellButton:x}=(0,l.useMemo)((()=>{let t=[],a=!1,l=!1;return 2===(null===i||void 0===i?void 0:i.length)?(a=!0,l=!0,t=[{key:"buy",id:"",title:d("c2c-ui-trade-header-buy"),link:`${e}/buy/${s}`},{key:"sell",id:"",title:d("c2c-ui-trade-header-sell"),link:`${e}/sell/${s}`}]):1===(null===i||void 0===i?void 0:i.length)&&(t="BUY"===i[0].side?[{key:"buy",id:"",title:d("c2c-ui-trade-header-buy"),link:`${e}/buy/${s}`}]:[{key:"sell",id:"",title:d("c2c-ui-trade-header-sell"),link:`${e}/sell/${s}`}],"BUY"===i[0].side?a=!0:l=!0),{data:[...t],buyButton:a,sellButton:l}}),[d,u,s,i]),y=(0,l.useCallback)((async(e,l)=>{e!==o&&(a.trade.getAdvListAsync({tradeType:e,page:1}),a.trade.update({tradeType:e,isOpring:!1,page:1}),t.push(l))}),[a,o]),C=(0,l.useMemo)((()=>{if(!r&&p)return p.map(((e,t)=>"buy"===e.key?xe(h.Z,{key:t,id:e.id,tx:"trade",variant:"tsm_button",sx:{bg:"buy"===o?"#02C076":"",color:"buy"===o?"#FFFFFF":"#1E2026",boxShadow:"buy"===o?"1px 0px 4px rgba(0, 0, 0, 0.25)":""},onClick:()=>y(e.key,e.link)},d("c2c-ui-tyle-buy")):"sell"===e.key?xe(h.Z,{key:t,id:e.id,tx:"trade",variant:"tsm_button",sx:{bg:"sell"===o?"#F84960":"",color:"sell"===o?"#FFFFFF":"#1E2026",boxShadow:"sell"===o?"1px 0px 4px rgba(0, 0, 0, 0.25)":""},onClick:()=>y(e.key,e.link)},d("c2c-ui-tyle-sell")):null))}),[r,p,o,d,y]);return xe(b.Z,{alignItems:"flex-start",sx:{pt:["13px","13px","13px"],pb:["10px",0,0],mr:"10px"}},!r&&xe(b.Z,{tx:"trade",variant:"tradeSwitchMain"},C),r&&xe(b.Z,{tx:"trade",variant:"tradeSwitchMainMob",sx:{alignItems:"center"}},m&&xe(v.Z,{tx:"trade",variant:"tsm_p",onClick:()=>y("buy",`/${u}/trade/buy/${s}`),sx:{color:"buy"===o?"#0B0E11":"#AEB4BC"}},d("c2c-ui-tyle-buy")),2===p.length&&xe(v.Z,{mx:"18px",color:"#EAECEF"},"|"),x&&xe(v.Z,{tx:"trade",variant:"tsm_p",onClick:()=>y("sell",`/${u}/trade/sell/${s}`),sx:{color:"sell"===o?"#0B0E11":"#AEB4BC"}},d("c2c-ui-tyle-sell"))))};var ve=r().createElement;const ge=()=>{const{0:e,1:t}=(0,l.useState)(!1),{0:a,1:i}=(0,l.useState)(!1),[o]=(0,f.$)(),{tradeType:s}=(0,n.useSelector)((e=>e.trade)),{isMobile:c,pageFiatConfig:d}=(0,n.useSelector)((e=>e.common)),u=(0,l.useCallback)((()=>{t(!e)}),[e]),p=(0,l.useMemo)((()=>c?ve(be,{showMobFilter:a,closeHandler:()=>{i(!1)}}):ve(ce,null)),[c,i,a]),m=(0,l.useMemo)((()=>{var e;let t=[];if((null===d||void 0===d?void 0:d.length)>0)for(let a=0;a<d.length;a++)if(d[a].side===s.toUpperCase()){t=d[a].assets;break}return t=t.map((e=>e.asset)),(null===(e=t)||void 0===e?void 0:e.length)||0}),[s,d]);return ve(r().Fragment,null,ve(h.Z,{tx:"trade",variant:"filterBox"},ve(b.Z,{tx:"trade",variant:"filterFlex"},ve(b.Z,null,ve(ye,null),!c&&ve(b.Z,{alignItems:"stretch"},ve(Z,{showAllFiat:e}),m>10&&ve(b.Z,{id:"C2CofferList_btn_morefilter",tx:"trade",variant:"moreButton",onClick:u},o("c2c-ui-trade-more"),ve(x.Z,{className:e?"active":"",sx:{transition:"transform .3s ease-in-out",ml:1,color:"t.third","&.active":{transform:"rotate(180deg)"}},size:16})))),c&&ve(b.Z,{sx:{alignItems:"start",pt:"12px"}},ve($,{type:"mobile"}),ve(y.Z,{ml:"10px",size:24,onClick:()=>{i(!0)},display:["inline","none"]}))),c&&ve(b.Z,{tx:"trade",variant:"mobfilterFlex"},ve(Z,null))),p)},Ce=r().memo(ge);var Ze=a("cstl"),ke=a("P+YH"),Te=r().createElement;const we=[{width:[260],key:"c2c-ui-trade-advertisers-day"},{width:[242],key:"c2c-ui-trade-price"},{width:[265],key:"c2c-ui-trade-require"},{width:[185],key:"c2c-ui-payment",display:["none","none","block"]},{width:[126],key:"c2c-ui-p2p-trade"}],_e=()=>{const e=(0,n.useDispatch)(),{tradeType:t,isOpring:a,advList:r,advListTotal:i,filter:o,deleteLoading:s}=(0,n.useSelector)((e=>e.trade)),c=(0,n.useSelector)((e=>e.loading.effects.common.postPageTradeConfig)),d=(0,n.useSelector)((e=>e.loading.effects.trade.getAdvListAsync)),u=(0,l.useCallback)((()=>{e.trade.update({isOpring:!1})}),[e.trade]),p=(0,l.useCallback)((()=>{e.trade.update({isOpring:!0})}),[e.trade]),m=(0,l.useCallback)((()=>{e.trade.update({isOpring:!1}),e.trade.getAdvListAsync()}),[e.trade]),f=(0,l.useCallback)((t=>{document.querySelector("body").scrollTop=0,e.trade.update({page:t}),e.trade.getAdvListAsync({page:t})}),[e.trade]),x=(0,l.useCallback)((t=>{e.trade.getAdvListAsync({rows:t})}),[e.trade]);return Te(h.Z,{tx:"container",variant:"box",sx:{position:"relative",bg:["white"]}},Te(b.Z,{tx:"container",variant:"content",flexDirection:"column"},!c&&!d&&null!==r||s?Te(ke.Z,{tradeType:t,isOpring:a,advList:r,columns:we,advListTotal:i,filter:o,onCancel:u,onShow:p,onChangePage:f,onChangeRow:x,onRefresh:m}):Te(Ze.Z,null)))},Fe=r().memo(_e);var Se=a("Ne75"),Be=r().createElement;const Le=["buy","sell"],Ae=["USDT","BUSD","BTC","DAI","BNB","ETH","UAH","RUB","NGN","BIDR","DOGE","SLP"];function Me(){const{metaData:e,configs:t}=(0,l.useContext)(Se.Il),{loginStatus:a}=(0,d.Z)(),r=(0,n.useDispatch)(),{isMobile:f}=(0,n.useSelector)((e=>e.common)),{fiat:h,mobFiat:b,tradeType:x,asset:y,merchantCheck:v}=(0,n.useSelector)((e=>e.trade)),{fiat:g,payment:C}=(0,c.Hb)().query,Z=(0,l.useCallback)((async(e,t)=>{const{tradeConfig:a,publisherType:l}=await r.common.postPageTradeConfig({param:{fiat:e},areaType:"P2P"}),{asset:i,tradeType:n}=(0,W.V)(a,x,y);r.common.update({defaultFiat:e}),r.trade.update({tradeType:n,asset:i,fiat:e,mobFiat:e,merchantCheck:"merchant"===l,paymethod:t||"all"}),r.trade.getAdvListAsync({tradeType:n,asset:i,fiat:e,publisherType:"CNY"!==e&&"merchant"===l?"merchant":null,payTypes:t?[t]:[]})}),[r.common,r.trade]);return(0,o.Z)((()=>{!async function(){var e,t;const a=await(0,Q.getCookie)("common_fiat");let l=null,i=[];g&&g!==a?({fiatList:i}=await r.common.getFiatListAsync()):r.common.getFiatListAsync();const n=(null===(e=i)||void 0===e||null===(t=e.filter((e=>e.currencyCode===g)))||void 0===t?void 0:t.length)>0;if(C){let e=h;n&&(e=n),!n&&a&&a!==h&&(e=a);let{recommendMethods:t}=await r.common.postC2CRecommended({fiat:e});t.filter((e=>e.identifier===C)).length>0&&(l=C)}if(n)return Z(g,l),void(await(0,Q.setCookie)("common_fiat",g,0));a&&a!==h?Z(a,l):(l&&r.trade.update({paymethod:l}),r.trade.getAdvListAsync({tradeType:x,asset:y,fiat:f?b:h,publisherType:v&&"CNY"!==h?"merchant":null,payTypes:l?[l]:[]}))}()})),(0,l.useEffect)((()=>{a&&(r.common.getC2cUseInfoAsync(),r.common.getUserPayment(),r.common.getUserAsset(),r.common.postUserTotalBTC(),r.common.getUserMigrateQueryStatus())}),[r.common,a,r.trade]),(0,l.useEffect)((()=>{a&&h&&r.trade.getOrderT1Tips({fiatUnit:h})}),[h,a]),(0,l.useEffect)((()=>{h&&r.common.postC2CRecommended({fiat:h})}),[h]),(0,l.useEffect)((()=>{(0,s.ZP)("pageView",{elementID:"binance_c2c_visit_home_p2p",pageName:"binance_c2c"},{callback:e=>{},sensorsDisabled:!0})}),[]),Be(i.Z,{metaData:e,configs:t,bg:"bg"},Be(u.Z,{linkType:"trade"}),Be(Ce,null),Be(Fe,null),Be(m.Z,null),Be(p.Z,{fiat:h}))}Me.getInitialProps=async e=>{let{params:t,appContext:a}=e,{store:l}=a;const r=await(0,Q.getCookie)("common_fiat");let i="buy";null!==t&&void 0!==t&&t.type&&(Le.includes(null===t||void 0===t?void 0:t.type)?i=t.type:a.notFound=!0);let n=null;null!==t&&void 0!==t&&t.asset&&(Ae.includes(null===t||void 0===t?void 0:t.asset.toUpperCase())?n=null===t||void 0===t?void 0:t.asset.toUpperCase():a.notFound=!0);let o=n||"USDT";const{tradeConfig:s,defaultFait:c,publisherType:d}=await l.dispatch.common.postPageTradeConfig({param:{fiat:r},areaType:"P2P"});({asset:o,tradeType:i}=(0,W.V)(s,i,o)),l.dispatch.trade.update({tradeType:i,asset:o,fiat:c,mobFiat:c,merchantCheck:"merchant"===d}),l.dispatch.common.update({defaultFiat:c})};const Ee=Me}}]);