(self["webpackJsonp_trade-spot"]=self["webpackJsonp_trade-spot"]||[]).push([[210],{uE7Q:(e,t,i)=>{"use strict";i.d(t,{k:()=>dl});var n={};i.r(n),i.d(n,{ExtraSmall:()=>N,Medium:()=>D,Small:()=>I,Small2:()=>R});var r={};i.r(r),i.d(r,{Medium:()=>re,Small:()=>ne});var o={};i.r(o),i.d(o,{Name:()=>ce,PriceDrop:()=>ue,PriceFlat:()=>de,PriceRise:()=>he,Status:()=>ge});var a={};i.r(a),i.d(a,{ChartStyleDropdown:()=>Ie,ChartStyles:()=>we,MultiChartDropdown:()=>Ae,MultiChartDropdownType:()=>_e,TextDropdown:()=>ve,UniversalDropdown:()=>W});var s={};i.r(s),i.d(s,{Plain:()=>Pe,SymbolTab:()=>pe});var l={};i.r(l),i.d(l,{Area:()=>De,Bar:()=>Le,Baseline:()=>Te,Candle:()=>Ee,Close:()=>le,Fullscreen:()=>Be,HeikinAshi:()=>Se,HollowCandle:()=>Ve,Indicator:()=>Oe,Kagi:()=>Xe,Line:()=>Me,LineBreak:()=>Ye,Logo:()=>ae,OrderMark:()=>Ke,PointAndFugure:()=>Ge,Range:()=>je,Renko:()=>Ue,ResumeWindow:()=>ze});var c=i("D57K"),h=i("/SIk"),u=i.n(h),d=i("0+iz"),g=i("AmRt"),p=u().forwardRef((function(e,t){var i=e.active,n=e.hidden,r=void 0!==n&&n,o=(0,c.__rest)(e,["active","hidden"]);return r?null:u().createElement(d.Z,(0,c.__assign)({},o,{sx:(0,c.__assign)({alignItems:"center",justifyContent:"center",color:i?"tradeWidget.intervalFilterIntervalRadioButtonActiveColor":"tradeWidget.intervalFilterIntervalRadioButtonInactiveColor",bg:i?"tradeWidget.intervalFilterIntervalRadioButtonActiveBg":"tradeWidget.intervalFilterIntervalRadioButtonInactiveBg",cursor:"pointer",fontSize:0,lineHeight:"16px",p:"minor",borderRadius:"2px","&:hover":{color:"tradeWidget.intervalFilterIntervalRadioButtonHoverColor",bg:"tradeWidget.intervalFilterIntervalRadioButtonHoverBg"}},o.sx),ref:t}))})),f=function(e){var t=e.text,i=e.value,n=e.active,r=e.onClick,o=e.onObscured,a=e.onRevealed,s=(0,h.useRef)(null),l=(0,g.Z)(s,{root:null,rootMargin:"0px",threshold:1});return(0,h.useEffect)((function(){l&&(l.intersectionRatio<1?o(i):a(i))}),[l]),u().createElement(p,{id:i,active:n,onClick:r,ref:s,sx:{mr:2}},t)},m=i("4fLz"),v=i("VfyN"),y=i("sZfd"),x=function(e){var t=e.dropdownExpanded,i=e.onDropdownMouseEnter,n=e.onDropdownMouseLeave,r=e.onDropdownButtonClick,o=e.isDropdownButtonActive,a=e.dropdownText,s=e.overlay;return u().createElement(v.Z,{open:t,onMouseEnter:i,onMouseLeave:n,overlay:s,sx:{position:"relative",height:"24px",flex:"1 0 auto",mr:2,"&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}}},enablePortal:!0},u().createElement(p,{onClick:r,sx:{width:"100%",height:"100%"},active:o},u().createElement(d.Z,{sx:{alignItems:"center",justifyContent:"center"}},a&&u().createElement(y.Z,null,a),u().createElement(m.Z,{className:"interval-expand-btn",size:3,sx:{color:"tradeWidget.filterBtnIconColor",transition:"transform .2s, color .2s","&:not(:first-of-type)":{marginLeft:"4px"}}}))))},b=i("+qC4"),_=i("8SST"),C=i("RdE/"),w=function(e){var t=e.onChange,i=e.value,n=e.checked,r=e.checkboxSize,o=void 0===r?13:r;return u().createElement(_.Z,{sx:{position:"absolute",top:"-"+o/2+"px",right:"-"+o/2+"px"}},u().createElement("input",{type:"checkbox",value:i,onChange:t,hidden:!0}),u().createElement(d.Z,{sx:{alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:"100%",background:function(e){return n?e.colors.tradeWidget.intervalFilterCheckboxCheckedBg:e.colors.tradeWidget.intervalFilterCheckboxUncheckedBg}}},u().createElement(C.Z,{color:"tradeWidget.intervalFilterCheckboxCheckmark",size:o})))},A=function(e){var t=e.showCheckbox,i=e.checked,n=e.value,r=e.onChange,o=e.onClick,a=e.children,s=e.className,l=void 0===s?"interval-option":s;return u().createElement(b.Z,{className:l,onClick:o,alignItems:"center",justifyContent:"center",sx:{fontWeight:"normal",fontSize:"14px",lineHeight:1.43,color:"t.primary",width:"60px",height:"24px",position:"relative",transition:"background-color 0.2s ease 0s",cursor:"pointer",bg:i?"tradeWidget.intervalFilterIntervalOptionToggledNormal":"tradeWidget.intervalFilterIntervalOptionUntoggledNormal","&:hover":{bg:i?"tradeWidget.intervalFilterIntervalOptionToggledHover":"tradeWidget.intervalFilterIntervalOptionUntoggledHover"},borderRadius:"2px"}},u().createElement(y.Z,{sx:{color:i?"tradeWidget.intervalFilterListActive":"tradeWidget.intervalFilterColor",fontSize:"12px"}},a),t&&u().createElement(w,{onChange:r,value:n,checked:i}))},L=i("mor6"),E=function(e){var t=e.children,i=e.onClick;return u().createElement(L.Z,{sz:"s",sx:{lineHeight:"16px",fontSize:12,wordBreak:"keep-all",minHeight:"24px",border:"none",color:"tradeWidget.intervalFilterEditButtonColor",fontWeight:"normal",padding:"0",backgroundImage:"none",bg:"transparent","&:hover:not(:disabled):not(:active):not(.inactive)":{color:"primary",backgroundImage:"none"},"&:active:not(:disabled):not(.inactive)":{backgroundColor:"transparent"}},onClick:i},t)};function V(e){var t=e.options,i=e.onClickEdit,n=e.editText,r=e.title;return u().createElement(d.Z,{sx:{bg:"tradeWidget.intervalFilterBg",marginTop:"8px",flexDirection:"column",boxShadow:"tradeWidget.intervalFilterBoxShadow",borderRadius:"4px",padding:"12px 16px 2px",width:"300px"}},u().createElement(d.Z,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"}},u().createElement(y.Z,{sx:{color:"tradeWidget.intervalFilterTitleColor",fontSize:"12px"}},r),u().createElement(E,{onClick:i},n)),u().createElement(d.Z,{sx:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between","&>.interval-option":{marginBottom:"10px"}}},t.map((function(e){var t=e.text,i=e.value,n=e.showCheckbox,r=e.checked,o=e.onClick,a=e.onChange;return u().createElement(A,{key:i,value:i,checked:r,showCheckbox:n,onClick:o,onChange:a},t)}))))}var S=function(e){var t=e.dropdownExpanded,i=e.onDropdownMouseEnter,n=e.onDropdownMouseLeave,r=e.onDropdownButtonClick,o=e.isDropdownButtonActive,a=e.dropdownText,s=e.options,l=e.onClickEdit,c=e.editText,h=e.title,g=e.displayedOptions;return u().createElement(d.Z,{height:24},u().createElement(d.Z,{sx:{flexWrap:"wrap",overflow:"hidden",justifyContent:"space-between"}},g.map((function(e){var t=e.text,i=e.value,n=e.active,r=e.onClick,o=e.onObscured,a=e.onRevealed;return u().createElement(f,{key:i,text:t,value:i,active:n,onClick:r,onObscured:o,onRevealed:a})}))),u().createElement(x,{dropdownExpanded:t,onDropdownMouseEnter:i,onDropdownMouseLeave:n,onDropdownButtonClick:r,isDropdownButtonActive:o,dropdownText:a,overlay:u().createElement(V,{options:s,onClickEdit:l,editText:c,title:h})}))},M=function(){return null},D=function(e){var t=function(e){var t=e.options,i=e.value,n=e.isEditing,r=e.onClickEdit,o=e.title,a=e.saveText,s=e.editText,l=e.dropdownExpanded,u=e.onDropdownMouseEnter,d=e.onDropdownMouseLeave,g=e.onDropdownButtonClick,p=e.onClickItem,f=(0,c.__rest)(e,["options","value","isEditing","onClickEdit","title","saveText","editText","dropdownExpanded","onDropdownMouseEnter","onDropdownMouseLeave","onDropdownButtonClick","onClickItem"]),m=(0,c.__read)((0,h.useState)(t),2),v=m[0],y=m[1],x=(0,c.__read)((0,h.useState)({}),2),b=x[0],_=x[1];(0,h.useEffect)((function(){return y(t)}),[t]);var C=v.map((function(e){return{text:e.text,value:e.text,checked:e.selected,showCheckbox:n,onClick:n?M:function(){return p(e.value)},onChange:function(){return y((function(t){return t.map((function(t){return(0,c.__assign)((0,c.__assign)({},t),{selected:t.value===e.value?!t.selected:t.selected})}))}))}}})),w=t.filter((function(e){return e.selected})).map((function(e){return{text:e.text,value:e.value,active:e.value===i,onClick:function(){return p(e.value)},onObscured:function(e){_((function(t){var i=(0,c.__assign)({},t);return i[e]=!0,i}))},onRevealed:function(e){_((function(t){var i=(0,c.__assign)({},t);return i[e]=!1,i}))}}})),A=t.find((function(e){return e.value===i&&(!e.selected||b[e.value])}));return(0,c.__assign)({options:C,displayedOptions:w,editText:n?a:s,dropdownText:(null===A||void 0===A?void 0:A.text)||"",dropdownExpanded:l,onDropdownMouseEnter:u,onDropdownMouseLeave:function(e){y(t),d(e)},onDropdownButtonClick:function(){return g((null===A||void 0===A?void 0:A.value)||"")},title:o,isDropdownButtonActive:!!A,onClickEdit:function(){return r(v)}},f)}(e);return u().createElement(S,(0,c.__assign)({},t))},T=i("veVB"),k=function(e){var t=e.isActive,i=e.children,n=(0,c.__rest)(e,["isActive","children"]);return u().createElement(d.Z,(0,c.__assign)({width:.2},n,{sx:(0,c.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"tradeWidget.intervalFilterDropdownItemActiveColor":"tradeWidget.intervalFilterDropdownItemInactiveColor",textAlign:"center",cursor:"pointer"},n.sx)}),u().createElement(y.Z,{sx:{fontSize:1}},i))},I=function(e){var t=e.options,i=e.value,n=e.showDropdown,r=e.onMouseEnterDropdwon,o=e.onMouseLeaveDropdown,a=e.onClickDropdownButton,s=e.onClickItem,l=t.slice(1),c=l.find((function(e){return e.value===i}))||l[0],h=u().createElement(d.Z,{sx:{flexWrap:"wrap",p:"md",bg:"tradeWidget.intervalFilterDropdownBg",mt:"minor",py:"xs",borderRadius:"2px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.15)"}},l.map((function(e){return u().createElement(k,{isActive:e.value===i,key:e.value,onClick:function(){return s(e.value)}},e.text)})));return u().createElement(d.Z,null,u().createElement(p,{active:t[0].value===i,onClick:function(){return s(t[0].value)},sx:{minWidth:"32px"}},t[0].text),u().createElement(T.ZP,{open:n,onMouseEnter:r,onMouseLeave:o,overlay:h,enablePortal:!0},u().createElement(p,{active:!!l.find((function(e){return e.value===i})),onClick:a,sx:{ml:"minor",minWidth:"32px"}},c.text,u().createElement(m.Z,{sx:{transform:"scale(1.8)"},size:8}))))},W=function(e){var t=e.options,i=e.value,n=e.showArrowIcon,r=void 0!==n&&n,o=e.onClickDropdownButton,a=e.overlay,s=(0,c.__rest)(e,["options","value","showArrowIcon","onClickDropdownButton","overlay"]),l=t.find((function(e){return e.value===i}));return u().createElement(T.ZP,(0,c.__assign)({},s,{enablePortal:!0,overlay:a({option:l,options:t}),sx:(0,c.__assign)({cursor:"pointer","&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}}},s.sx)}),u().createElement(d.Z,{onClick:o,sx:{alignItems:"center",justifyContent:"center"}},null===l||void 0===l?void 0:l.display,r&&u().createElement(m.Z,{className:"interval-expand-btn",size:3,sx:{color:"t.third",transition:"transform .2s, color .2s","&:not(:first-of-type)":{ml:"minor"}}})))},P=function(e){var t=e.active,i=e.onClick,n=e.children,r=(0,c.__rest)(e,["active","onClick","children"]);return u().createElement(d.Z,(0,c.__assign)({},r,{onClick:i,sx:(0,c.__assign)({alignItems:"center",justifyContent:"center",borderRadius:"2px",bg:t?"line":"bg3",color:"t.primary",fontSize:"xs",cursor:"pointer",":hover":{bg:"line"}},r.sx)}),n)},H=function(e){var t=e.children,i=(0,c.__rest)(e,["children"]);return u().createElement(_.Z,(0,c.__assign)({},i,{sx:(0,c.__assign)({display:"grid",gridTemplateColumns:"repeat(5, 60px)",gridTemplateRows:"repeat(4, 24px)",gridGap:"10px",bg:"popupBg",shadow:"0 2 16px rgba(0,0,0,.25)",p:"sm"},i.sx)}),t)},R=function(e){var t=e.onClickItem,i=e.options,n=(0,c.__rest)(e,["onClickItem","options"]),r=i.map((function(e){return{value:e.value,display:u().createElement(d.Z,{sx:{color:"t.third",fontSize:"xs",alignItems:"center"}},e.text),children:u().createElement(P,{key:e.value,active:e.value===n.value,onClick:function(){return t(e.value)}},e.text)}}));return u().createElement(W,(0,c.__assign)({},n,{showArrowIcon:!0,options:r,overlay:function(){return u().createElement(H,null,r.map((function(e){return e.children})))}}))},B=function(e){var t=e.isActive,i=e.children,n=(0,c.__rest)(e,["isActive","children"]);return u().createElement(d.Z,(0,c.__assign)({},n,{sx:(0,c.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"tradeWidget.intervalFilterXSBoxActiveColor":"tradeWidget.intervalFilterXSBoxInactiveColor"},n.sx)}),i)},N=function(e){var t=e.options,i=e.value,n=e.isDropdownActive,r=e.showDropdown,o=e.onClickDropdownButton,a=e.onClickItem,s=t.find((function(e){return e.value===i}));return u().createElement(T.ZP,{open:r,isFixed:!0,placement:"bottom-start",enablePortal:!0,sx:{width:"100%"},overlay:u().createElement(d.Z,{sx:{flexWrap:"wrap",p:"xs",bg:"tradeWidget.intervalFilterDropdownBg",mt:"minor",width:300}},t.map((function(e){return u().createElement(B,{key:e.value,isActive:e.value===i,onClick:function(){return a(e.value)},width:.2,sx:{textAlign:"center",padding:"6px 0 6px 0"}},u().createElement(y.Z,{fontSize:1},e.text))})))},u().createElement(p,{active:n,onClick:o},u().createElement(y.Z,{sx:{fontSize:1}},null===s||void 0===s?void 0:s.text),u().createElement(m.Z,{sx:{transform:"scale(1.8)"},size:12})))},O=i("Nh1y"),Z=i.n(O),F=i("RNKw"),K=i("B0E9"),z=function(e){var t=e.children,i=e.styles;return u().createElement(d.Z,{sx:{justifyContent:"center",position:"relative",mr:"4px",width:"40px",height:"54px",borderRadius:"4px",overflow:"hidden"}},u().createElement(y.Z,{sx:{color:i.color,fontSize:"40px",position:"relative",zIndex:100}},t),u().createElement(_.Z,{sx:{position:"absolute",width:"100%",height:"26px",top:0,left:0,background:"#F0B90B",opacity:.1}}),u().createElement(_.Z,{sx:{position:"absolute",width:"100%",height:"26px",bottom:0,left:0,background:"#F0B90B",opacity:.1}}))},U=function(e){var t=e.digits,i=e.styles;return u().createElement(u().Fragment,null,t.split("").map((function(e,t){return u().createElement(z,{styles:i,key:t},e)})))},Y=function(e){var t=e.styles;return u().createElement(y.Z,{sx:{fontSize:"24px",color:t.color,mx:2}},":")},X=6e4,G=36e5,j=function(e){var t=e.animationPath,i=e.backgroundImagePath,n=e.backgroundShinyImagePath,r=e.timeLeft,o=e.symbol,a=e.willOpenInText,s=e.styles,l=void 0===s?{color:"#1E2329"}:s,g=e.digitsStyles,p=void 0===g?{color:"#F0B90B"}:g,f=e.separatorStyles,m=void 0===f?{color:"#B7BDC6"}:f,v=(0,c.__read)((0,F.Z)(),2),x=v[0],b=v[1].width,C=(0,h.useRef)(),w=(0,h.useRef)(),A=(0,h.useCallback)((0,K.P)((function(){var e;C.current&&(null===(e=w.current)||void 0===e||e.destroy(),w.current=Z().loadAnimation({container:C.current,renderer:"svg",loop:!0,autoplay:!0,path:t}))}),100),[t]);(0,h.useEffect)((function(){var e;b+120<=500?null===(e=w.current)||void 0===e||e.destroy():A()}),[b,A]);var L,E=(L=r,[Math.floor(L/G),Math.floor(L%G/X),Math.floor(L%X/1e3)].map((function(e){return Math.min(e,999).toString().padStart(2,"0")})));return u().createElement(d.Z,{ref:x,sx:{width:"100%",height:"100%",justifyContent:"center",px:"60px",background:"url("+i+") no-repeat",backgroundSize:"auto 90%",backgroundPosition:"right top"}},u().createElement(d.Z,{sx:{maxWidth:"661px",alignItems:"center",justifyContent:"space-between",flex:1,background:"url("+n+") no-repeat",backgroundSize:"45%",backgroundPosition:"right center"}},u().createElement(_.Z,null,u().createElement(y.Z,{sx:{fontSize:32,color:l.color}},o),u().createElement(y.Z,{sx:{fontSize:24,fontWeight:200,color:l.color}},a),u().createElement(d.Z,{sx:{mt:5,alignItems:"center"}},E.map((function(e,t){return u().createElement(u().Fragment,{key:t},u().createElement(U,{digits:e,styles:p}),t!==E.length-1&&u().createElement(Y,{styles:m}))})))),u().createElement(_.Z,{ref:C})))},q=function(e){var t=function(e){var t=e.openTime,i=e.onReady,n=(0,c.__rest)(e,["openTime","onReady"]),r=(0,c.__read)((0,h.useState)(t-Date.now()),2),o=r[0],a=r[1];return(0,h.useEffect)((function(){var e=setInterval((function(){a(t-Date.now())}),100);return function(){return clearInterval(e)}}),[t]),(0,h.useEffect)((function(){o<=0&&i()}),[o]),(0,c.__assign)((0,c.__assign)({},n),{timeLeft:o})}(e);return u().createElement(j,(0,c.__assign)({},t))},J=function(e){var t=e.isReady,i=e.children,n=(0,c.__rest)(e,["isReady","children"]);return t?i:n.openTime?u().createElement(q,(0,c.__assign)({},n)):null},Q=i("6/dy"),$=function(){return u().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3}},u().createElement(Q.Z,{sx:{zIndex:100}}))},ee=(0,h.forwardRef)((function(e,t){var i=e.height,n=void 0===i?"100%":i,r=e.headerHeight,o=e.headerSlot,a=e.showLoading,s=e.children;return u().createElement(d.Z,{sx:{height:n,flexDirection:"column"},ref:t},u().createElement(_.Z,{sx:{height:r,flex:"0 0 auto"}},o),u().createElement(_.Z,{sx:{height:"100%",position:"relative"},className:"draggableCancel"},s,a&&u().createElement($,null)))})),te=(0,h.forwardRef)((function(e,t){var i=e.countdownProps,n=e.layoutProps,r=e.children;return u().createElement(J,(0,c.__assign)({},i),u().createElement(ee,(0,c.__assign)({},n,{ref:t}),r))})),ie=function(e){var t=e.isActive,i=e.children,n=(0,c.__rest)(e,["isActive","children"]);return u().createElement(d.Z,(0,c.__assign)({},n,{sx:(0,c.__assign)({alignItems:"center",justifyContent:"center",py:"minor",color:t?"tradeWidget.chartHeaderSmallBoxActiveColor":"tradeWidget.chartHeaderSmallBoxInactiveColor"},n.sx)}),i)},ne=function(e){var t=e.children,i=e.indicatorText,n=e.depthText,r=e.onClickIndicator,o=e.onClickDepth,a=e.isDepthActive;return u().createElement(d.Z,{sx:{justifyContent:"space-between",alignItems:"center",textAlign:"center",py:"xs"}},u().createElement(ie,{isActive:!1,sx:{flex:1,height:32}},t),u().createElement(ie,{isActive:!1,onClick:r,sx:{py:0,flex:1,height:32}},u().createElement(y.Z,{sx:{fontSize:1,textAlign:"center",padding:"8px",width:"100%"}},i)),u().createElement(ie,{isActive:a,onClick:o,sx:{py:0,flex:1,height:32}},u().createElement(y.Z,{sx:{fontSize:1}},n)))},re=function(e){var t=e.head,i=e.mid,n=e.tail,r=e.useDraggableHandle,o=void 0!==r&&r,a=e.sx;return u().createElement(d.Z,{className:"focus-area",sx:(0,c.__assign)({height:40,justifyContent:"space-between",py:"minor",px:"sm",borderBottom:"1px solid",borderBottomColor:"tradeWidget.chartHeaderBorderBottom"},a)},u().createElement(d.Z,{sx:{justifyContent:"space-between",alignItems:"center",py:"minor",maxWidth:"55%","& > *:not(:first-of-type)":{ml:"sm"}}},t),u().createElement(d.Z,{className:o?"draggableHandle":"",sx:{flex:1,minWidth:"20px",alignItems:"center",justifyContent:"center","& > *:not(:first-of-type)":{ml:"sm"}}},i),u().createElement(d.Z,{sx:{alignItems:"center",justifyContent:"flex-end","& > *:not(:first-of-type)":{ml:"sm"}}},n))},oe=i("SH2D"),ae=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"225",height:"45",viewBox:"0 0 225 45",fill:"none"},e,{sx:(0,c.__assign)({width:"255px",height:"45px",color:"t.primary",opacity:"0.07"},e.sx)}),u().createElement("path",{d:"M10.2072 22.5L5.12569 27.5537L0 22.5L5.12569 17.4023L10.2072 22.5ZM22.6237 10.1514L31.3727 18.8525L36.4984 13.7549L22.6237 0L8.74902 13.7988L13.8747 18.8965L22.6237 10.1514ZM40.1218 17.4023L35.0403 22.5L40.1659 27.5977L45.2916 22.5L40.1218 17.4023ZM22.6237 34.8486L13.8747 26.1035L8.74902 31.2012L22.6237 45L36.4984 31.2012L31.3727 26.1035L22.6237 34.8486ZM22.6237 27.5537L27.7494 22.4561L22.6237 17.4023L17.498 22.5L22.6237 27.5537ZM76.5318 28.0811V27.9932C76.5318 24.6973 74.7643 23.0273 71.8922 21.9287C73.6597 20.9619 75.162 19.3799 75.162 16.6113V16.5234C75.162 12.6562 72.0247 10.1514 66.9874 10.1514H55.4546V34.8047H67.2525C72.8643 34.8486 76.5318 32.5635 76.5318 28.0811ZM69.727 17.5342C69.727 19.3799 68.2247 20.127 65.7944 20.127H60.7571V14.8975H66.1479C68.4456 14.8975 69.727 15.8203 69.727 17.4463V17.5342ZM71.0968 27.3779C71.0968 29.2236 69.6386 30.0586 67.2525 30.0586H60.7571V24.6533H67.0758C69.8596 24.6533 71.0968 25.6641 71.0968 27.334V27.3779ZM87.9762 34.8486V10.1514H82.497V34.8047H87.9762V34.8486ZM117.316 34.8486V10.1514H111.926V25.3564L100.304 10.1514H95.2671V34.8047H100.658V19.1602L112.677 34.8486H117.316ZM147.54 34.8486L136.891 10.0195H131.854L121.205 34.8486H126.817L129.07 29.3115H139.542L141.796 34.8486H147.54ZM137.598 24.5215H131.014L134.328 16.5234L137.598 24.5215ZM173.566 34.8486V10.1514H168.176V25.3564L156.554 10.1514H151.517V34.8047H156.908V19.1602L168.927 34.8486H173.566ZM201.713 30.8496L198.223 27.3779C196.278 29.1357 194.555 30.2783 191.683 30.2783C187.441 30.2783 184.481 26.7627 184.481 22.5439V22.4121C184.481 18.1934 187.485 14.7217 191.683 14.7217C194.157 14.7217 196.102 15.7764 198.046 17.4902L201.537 13.4912C199.239 11.25 196.455 9.66797 191.771 9.66797C184.171 9.66797 178.825 15.4248 178.825 22.4121V22.5C178.825 29.5752 184.26 35.2002 191.55 35.2002C196.323 35.2441 199.151 33.5742 201.713 30.8496ZM225 34.8486V30.0147H211.523V24.8291H223.233V19.9951H211.523V14.9854H224.823V10.1514H206.132V34.8047H225V34.8486Z",fill:"currentColor"}))};const se=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M10.586 12L4.293 5.707 5 5l.707-.707L12 10.586l6.293-6.293L19 5l.707.707L13.414 12l6.293 6.293-1.414 1.414L12 13.414l-6.293 6.293L5 19l-.707-.707L10.586 12z",fill:"currentColor"}))};var le=function(e){return u().createElement(se,(0,c.__assign)({},e,{sx:(0,c.__assign)({flexShrink:0,color:"tradeWidget.chartHeaderCloseIconColor",cursor:"pointer","&:hover":{color:"tradeWidget.chartHeaderCloseIconHoverColor"}},e.sx)}))},ce=function(e){var t=e.children;return u().createElement(_.Z,{color:"t.primary",fontSize:"sm",letterSpacing:".16px"},t)},he=function(e){var t=e.children;return u().createElement(_.Z,{color:"t.buy",fontSize:"xs",letterSpacing:".32px"},t)},ue=function(e){var t=e.children;return u().createElement(_.Z,{color:"t.sell",fontSize:"xs",letterSpacing:".32px"},t)},de=function(e){var t=e.children;return u().createElement(_.Z,{color:"t.primary",fontSize:"xs",letterSpacing:".32px"},t)},ge=function(e){var t=e.name,i=e.price,n=e.change;return u().createElement(d.Z,{sx:{alignItems:"center"}},u().createElement(d.Z,{sx:{alignItems:"center"}},t),u().createElement(d.Z,{sx:{alignItems:"center",pl:"minor"}},i),u().createElement(d.Z,{sx:{alignItems:"center",pl:"minor"}},n))},pe=function(e){var t=e.options,i=e.value,n=e.onChange,r=e.onClose;return u().createElement(d.Z,null,t.map((function(e){return u().createElement(d.Z,{key:""+e.value,onClick:function(){return n(e)},sx:{alignItems:"center",cursor:"pointer",p:"xs",bg:e.value===i?"bg3":"transparent"}},u().createElement(ge,{name:e.name,price:e.price}),e.showClose&&u().createElement(le,{size:16,onClick:function(t){t.stopPropagation(),r(e)}}))})))},fe=function(e){var t=e.onClick,i=e.active,n=e.children,r=(0,c.__rest)(e,["onClick","active","children"]);return u().createElement(d.Z,(0,c.__assign)({},r,{onClick:t,sx:(0,c.__assign)({px:"ls",py:"sm",fontSize:"xs",color:i?"t.yellow":"t.primary",bg:"transparent",cursor:"pointer",alignItems:"center",":hover":{bg:"bg3"},"& > *:not(:last-child)":{mr:"5px"}},r.sx)}),n)},me=function(e){var t=e.children,i=(0,c.__rest)(e,["children"]);return u().createElement(d.Z,(0,c.__assign)({},i,{sx:(0,c.__assign)({bg:"popupBg",shadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)",borderRadius:"4px",py:"5px",flexDirection:"column"},i.sx)}),t)},ve=function(e){var t=e.onClickItem,i=e.options,n=(0,c.__rest)(e,["onClickItem","options"]),r=i.map((function(e,i){return{value:e.value,display:u().createElement(d.Z,{sx:{fontSize:"xs",color:"t.third"}},e.text),children:u().createElement(fe,{key:i,active:e.value===n.value,onClick:function(){return t(e.value)},sx:{px:"xs",py:"ls"}},e.text)}}));return u().createElement(W,(0,c.__assign)({},n,{options:r,overlay:function(){return u().createElement(me,{sx:{position:"absolute",left:"-8px",width:"max-content"}},r.map((function(e){return e.children})))}}))};const ye=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 11V3h8v8H3zm2-6h4v4H5V5zM3 21v-8h8v8H3zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 2h-4v4h4V5zM13 21v-8h8v8h-8zm2-6h4v4h-4v-4z",fill:"currentColor"}))};const xe=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M5 5v14.94h14.94V5H5zm12.94 12.94H7V7h10.94v10.94z",fill:"currentColor"}),u().createElement("path",{d:"M19.94 5H5v14.94h14.94V5zM7 17.94V7h10.94v10.94H7z",fill:"currentColor"}))};const be=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M13 8V6h-2v2h2zM13 18v-8h-2v8h2z",fill:"#76808F"}),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",fill:"#76808F"}))};var _e,Ce=i("tzhs");!function(e){e[e.Single=1]="Single",e[e.Four=4]="Four"}(_e||(_e={}));var we,Ae=function(e){var t=e.value,i=e.onClickItem,n=e.singleOptionText,r=e.multiOptionText,o=e.tooltipText,a=(0,c.__rest)(e,["value","onClickItem","singleOptionText","multiOptionText","tooltipText"]),s=[{value:_e.Single,display:u().createElement(ye,{size:20,color:"icons.close"}),children:u().createElement(fe,{key:"1",onClick:function(){return i(_e.Single)},active:t===_e.Single},u().createElement(xe,{size:20,color:"slider.line"}),u().createElement(_.Z,{sx:{fontSize:"xs",color:"t.primary"}},n))},{value:_e.Four,display:u().createElement(ye,{size:20,color:"icons.close"}),children:u().createElement(fe,{key:"4",onClick:function(){return i(_e.Four)},active:t===_e.Four},u().createElement(ye,{size:20,color:"icons.close"}),u().createElement(_.Z,{sx:{fontSize:"xs",color:"t.primary"}},r),u().createElement(Ce.Z,{enablePortal:!0,arrow:!0,placement:"bottom-start",tip:o,sx:{display:"flex",alignItems:"center"}},u().createElement(be,{size:20,color:"icons.close"})))}];return u().createElement(W,(0,c.__assign)({placement:"bottom",options:s,value:t,overlay:function(){return u().createElement(me,null,s.map((function(e){return e.children})))}},a))},Le=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M16.0714 11.7857H14.2857M7.5 5.35717V16.0715V5.35717ZM5.35714 14.6429H7.14285H5.35714ZM9.64285 8.21431H7.85714H9.64285ZM13.9286 4.64288V15.3572V4.64288ZM11.7857 6.78574H13.5714H11.7857Z",stroke:"currentColor",strokeLinecap:"square"}))},Ee=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 10 16",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.85715 0.857117H2.14286V2.99998H1.07143C0.976713 2.99998 0.885872 3.0376 0.818895 3.10458C0.751918 3.17156 0.714291 3.2624 0.714291 3.35712V12.6428C0.714291 12.7376 0.751918 12.8284 0.818895 12.8954C0.885872 12.9623 0.976713 13 1.07143 13H2.14286V15.1428H2.85715V13H3.92858C4.0233 13 4.11414 12.9623 4.18111 12.8954C4.24809 12.8284 4.28572 12.7376 4.28572 12.6428V3.35712C4.28572 3.2624 4.24809 3.17156 4.18111 3.10458C4.11414 3.0376 4.0233 2.99998 3.92858 2.99998H2.85715V0.857117ZM1.42858 3.71426V12.2857H3.57143V3.71426H1.42858ZM8.57143 2.99998H7.85715V5.14283H6.78572C6.691 5.14283 6.60016 5.18045 6.53319 5.24743C6.46621 5.31441 6.42858 5.40525 6.42858 5.49997V10.5C6.42858 10.5947 6.46621 10.6855 6.53319 10.7525C6.60016 10.8195 6.691 10.8571 6.78572 10.8571H7.85715V13H8.57143V10.8571H9.64287C9.73759 10.8571 9.82843 10.8195 9.8954 10.7525C9.96238 10.6855 10 10.5947 10 10.5V5.49997C10 5.40525 9.96238 5.31441 9.8954 5.24743C9.82843 5.18045 9.73759 5.14283 9.64287 5.14283H8.57143V2.99998ZM7.14287 10.1428V5.85711H9.28572V10.1428H7.14287Z",fill:"currentColor"}))},Ve=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 10 15",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.85714 0.857117H2.14286V2.99998H1.07143C0.976713 2.99998 0.885872 3.0376 0.818895 3.10458C0.751918 3.17156 0.714291 3.2624 0.714291 3.35712V11.9285C0.714291 12.0233 0.751918 12.1141 0.818895 12.1811C0.885872 12.2481 0.976713 12.2857 1.07143 12.2857H2.14286V14.4285H2.85714V12.2857H3.92858C4.0233 12.2857 4.11414 12.2481 4.18111 12.1811C4.24809 12.1141 4.28572 12.0233 4.28572 11.9285V3.35712C4.28572 3.2624 4.24809 3.17156 4.18111 3.10458C4.11414 3.0376 4.0233 2.99998 3.92858 2.99998H2.85714V0.857117ZM2.14286 3.71426H1.42858V4.42855H2.14286V5.14283H1.42858V5.85712H2.14286V6.5714H1.42858V7.28569H2.14286V7.99997H1.42858V8.71426H2.14286V9.42855H1.42858V10.1428H2.14286V10.8571H1.42858V11.5714H2.14286V10.8571H2.85714V11.5714H3.57143V10.8571H2.85714V10.1428H3.57143V9.42855H2.85714V8.71426H3.57143V7.99997H2.85714V7.28569H3.57143V6.5714H2.85714V5.85712H3.57143V5.14283H2.85714V4.42855H3.57143V3.71426H2.85714V4.42855H2.14286V3.71426ZM2.85714 5.14283V5.85712H2.14286V5.14283H2.85714ZM2.85714 6.5714V7.28569H2.14286V6.5714H2.85714ZM2.85714 7.99997V8.71426H2.14286V7.99997H2.85714ZM2.85714 9.42855V10.1428H2.14286V9.42855H2.85714ZM8.57143 2.99998H7.85715V5.14284H6.78572C6.691 5.14284 6.60016 5.18046 6.53319 5.24744C6.46621 5.31442 6.42858 5.40526 6.42858 5.49998V10.5C6.42858 10.5947 6.46621 10.6855 6.53319 10.7525C6.60016 10.8195 6.691 10.8571 6.78572 10.8571H7.85715V13H8.57143V10.8571H9.64287C9.73759 10.8571 9.82843 10.8195 9.8954 10.7525C9.96238 10.6855 10 10.5947 10 10.5V5.49998C10 5.40526 9.96238 5.31442 9.8954 5.24744C9.82843 5.18046 9.73759 5.14284 9.64287 5.14284H8.57143V2.99998ZM7.14287 10.1428V5.85712H9.28572V10.1428H7.14287Z",fill:"currentColor"}))},Se=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 10 14",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57144 0.428528H7.85716V2.57147H6.78429C6.58215 2.57147 6.42858 2.73147 6.42858 2.92862V7.92861C6.42914 8.02292 6.46675 8.11322 6.5333 8.18003C6.59985 8.24685 6.68999 8.28482 6.78429 8.28576H9.64429C9.84644 8.28576 10 8.12576 10 7.92861V2.92862C10 2.73576 9.84072 2.57147 9.64429 2.57147H8.57144V0.428528ZM2.85713 1.85716H2.14284V4H1.06998C0.867838 4 0.714267 4.15929 0.714267 4.35571V13.6443C0.714078 13.6911 0.723149 13.7374 0.740959 13.7806C0.758768 13.8239 0.784963 13.8632 0.818032 13.8962C0.851101 13.9293 0.890389 13.9555 0.933632 13.9733C0.976874 13.9911 1.02322 14.0002 1.06998 14H3.92998C3.97683 14.0005 4.0233 13.9916 4.06667 13.9739C4.11004 13.9562 4.14945 13.93 4.18257 13.8969C4.2157 13.8638 4.24188 13.8243 4.25959 13.781C4.2773 13.7376 4.28617 13.6911 4.28569 13.6443V4.35571C4.28569 4.15714 4.12641 4 3.92998 4H2.85713V1.85716ZM1.42855 13.2857V4.71429H3.57141V13.2857H1.42855ZM7.14286 3.28576V7.57147H9.28572V3.28576H7.14286Z",fill:"currentColor"}))},Me=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("g",{clipPath:"url(#clip0)"},u().createElement("path",{d:"M8.55857 11.9207L12.28 8.57145H14.4464L17.41 5.23716L16.8757 4.76288L14.1257 7.85716H12.0057L8.58428 10.9364L6.42857 8.78074L3.31857 11.89L3.82428 12.3957L6.42857 9.79073L8.55857 11.9207Z",fill:"currentColor"})),u().createElement("defs",null,u().createElement("clipPath",{id:"clip0"},u().createElement("rect",{width:"20",height:"20",fill:"currentColor"}))))},De=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M8.92857 12.2907L13.3621 7.85713H14.7907L17.3957 5.25285L16.89 4.74713L14.495 7.14285H13.0664L8.92857 11.2807L6.78571 9.13785L3.31857 12.6043L3.82428 13.11L6.78571 10.1478L8.92857 12.2907Z",fill:"currentColor"}),u().createElement("path",{d:"M6.42857 11.4286H7.14286V12.1429H6.42857V11.4286ZM7.14286 12.1429H7.85714V12.8572H7.14286V12.1429ZM6.42857 12.8572H7.14286V13.5715H6.42857V12.8572ZM7.85714 12.8572H8.57143V13.5715H7.85714V12.8572ZM7.14286 13.5715H7.85714V14.2857H7.14286V13.5715ZM6.42857 14.2857H7.14286V15H6.42857V14.2857ZM7.85714 14.2857H8.57143V15H7.85714V14.2857ZM5.71429 12.1429H6.42857V12.8572H5.71429V12.1429ZM5 12.8572H5.71429V13.5715H5V12.8572ZM4.28572 13.5715H5V14.2857H4.28572V13.5715ZM5.71429 13.5715H6.42857V14.2857H5.71429V13.5715ZM5 14.2857H5.71429V15H5V14.2857ZM3.57143 14.2857H4.28572V15H3.57143V14.2857ZM15.7143 7.85717H16.4286V8.57145H15.7143V7.85717ZM16.4286 7.14288H17.1429V7.85717H16.4286V7.14288ZM16.4286 8.57145H17.1429V9.28574H16.4286V8.57145ZM15.7143 9.28574H16.4286V10H15.7143V9.28574ZM15 10H15.7143V10.7143H15V10ZM16.4286 10H17.1429V10.7143H16.4286V10ZM15.7143 10.7143H16.4286V11.4286H15.7143V10.7143ZM15 11.4286H15.7143V12.1429H15V11.4286ZM16.4286 11.4286H17.1429V12.1429H16.4286V11.4286ZM15.7143 12.1429H16.4286V12.8572H15.7143V12.1429ZM15 12.8572H15.7143V13.5715H15V12.8572ZM16.4286 12.8572H17.1429V13.5715H16.4286V12.8572ZM15.7143 13.5715H16.4286V14.2857H15.7143V13.5715ZM15 14.2857H15.7143V15H15V14.2857ZM16.4286 14.2857H17.1429V15H16.4286V14.2857ZM12.8571 9.28574H13.5714V10H12.8571V9.28574ZM14.2857 9.28574H15V10H14.2857V9.28574ZM15 8.57145H15.7143V9.28574H15V8.57145ZM13.5714 10H14.2857V10.7143H13.5714V10ZM12.8571 10.7143H13.5714V11.4286H12.8571V10.7143ZM14.2857 10.7143H15V11.4286H14.2857V10.7143ZM13.5714 11.4286H14.2857V12.1429H13.5714V11.4286ZM12.8571 12.1429H13.5714V12.8572H12.8571V12.1429ZM14.2857 12.1429H15V12.8572H14.2857V12.1429ZM13.5714 12.8572H14.2857V13.5715H13.5714V12.8572ZM12.8571 13.5715H13.5714V14.2857H12.8571V13.5715ZM14.2857 13.5715H15V14.2857H14.2857V13.5715ZM13.5714 14.2857H14.2857V15H13.5714V14.2857ZM12.1429 10H12.8571V10.7143H12.1429V10ZM11.4286 10.7143H12.1429V11.4286H11.4286V10.7143ZM10.7143 11.4286H11.4286V12.1429H10.7143V11.4286ZM12.1429 11.4286H12.8571V12.1429H12.1429V11.4286ZM11.4286 12.1429H12.1429V12.8572H11.4286V12.1429ZM10.7143 12.8572H11.4286V13.5715H10.7143V12.8572ZM12.1429 12.8572H12.8571V13.5715H12.1429V12.8572ZM11.4286 13.5715H12.1429V14.2857H11.4286V13.5715ZM10.7143 14.2857H11.4286V15H10.7143V14.2857ZM12.1429 14.2857H12.8571V15H12.1429V14.2857ZM10 12.1429H10.7143V12.8572H10V12.1429ZM9.28572 12.8572H10V13.5715H9.28572V12.8572ZM8.57143 13.5715H9.28572V14.2857H8.57143V13.5715ZM10 13.5715H10.7143V14.2857H10V13.5715ZM9.28572 14.2857H10V15H9.28572V14.2857Z",fill:"currentColor"}))},Te=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37578 4.41928C9.29109 4.24988 9.11796 4.14288 8.92857 4.14288C8.73918 4.14288 8.56605 4.24988 8.48136 4.41928L7.5 6.38199L7.23293 5.84785C7.14823 5.67846 6.9751 5.57145 6.78571 5.57145C6.59633 5.57145 6.42319 5.67846 6.3385 5.84785L4.90993 8.70499C4.78643 8.95198 4.88654 9.25232 5.13353 9.37581C5.38052 9.49931 5.68086 9.39919 5.80435 9.1522L6.78571 7.18949L7.05278 7.72363C7.13748 7.89303 7.31061 8.00003 7.5 8.00003C7.68938 8.00003 7.86252 7.89303 7.94721 7.72363L8.92857 5.76092L10.6242 9.1522C10.7477 9.39919 11.048 9.49931 11.295 9.37581C11.542 9.25232 11.6421 8.95198 11.5186 8.70499L9.37578 4.41928ZM2.85714 10.8572H3.34821V9.8572H2.85714V10.8572ZM4.33035 10.8572H5.3125V9.8572H4.33035V10.8572ZM6.29464 10.8572H7.27678V9.8572H6.29464V10.8572ZM8.25893 10.8572H9.24107V9.8572H8.25893V10.8572ZM10.2232 10.8572H11.2054V9.8572H10.2232V10.8572ZM12.1875 10.8572H13.1696V9.8572H12.1875V10.8572ZM14.1518 10.8572H15.1339V9.8572H14.1518V10.8572ZM16.1161 10.8572H17.0982V9.8572H16.1161V10.8572ZM18.0804 10.8572H18.5714V9.8572H18.0804V10.8572ZM4.15219 11.3385C4.39918 11.462 4.49929 11.7623 4.3758 12.0093L3.66151 13.4379C3.53802 13.6849 3.23768 13.785 2.99069 13.6615C2.7437 13.538 2.64359 13.2377 2.76708 12.9907L3.48137 11.5621C3.60487 11.3151 3.9052 11.215 4.15219 11.3385ZM17.9472 7.72365C18.0707 7.47666 17.9706 7.17632 17.7236 7.05283C17.4766 6.92933 17.1763 7.02944 17.0528 7.27643L16.3385 8.70501C16.215 8.95199 16.3151 9.25233 16.5621 9.37583C16.8091 9.49932 17.1094 9.39921 17.2329 9.15222L17.9472 7.72365ZM12.5 11.2858C12.3267 11.2858 12.1658 11.3755 12.0747 11.5229C11.9836 11.6703 11.9753 11.8544 12.0528 12.0094L13.4813 14.8665C13.566 15.0359 13.7392 15.1429 13.9286 15.1429C14.1179 15.1429 14.2911 15.0359 14.3758 14.8665L15.8043 12.0094C15.8818 11.8544 15.8736 11.6703 15.7825 11.5229C15.6913 11.3755 15.5304 11.2858 15.3571 11.2858H12.5ZM13.9286 13.5249L13.309 12.2858H14.5481L13.9286 13.5249Z",fill:"currentColor"}))};!function(e){e[e.Bars=0]="Bars",e[e.Candles=1]="Candles",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.HeikinAshi=8]="HeikinAshi",e[e.HollowCandles=9]="HollowCandles",e[e.Baseline=10]="Baseline"}(we||(we={}));var ke=[{value:we.Bars,icon:Le},{value:we.Candles,icon:Ee},{value:we.HollowCandles,icon:Ve},{value:we.HeikinAshi,icon:Se},{value:we.Line,icon:Me},{value:we.Area,icon:De},{value:we.Baseline,icon:Te}],Ie=function(e){var t=e.value,i=e.onClickItem,n=e.optionText,r=(0,c.__rest)(e,["value","onClickItem","optionText"]),o=ke.map((function(e,r){var o=e.value,a=e.icon;return{value:o,display:u().createElement(a,{size:20,color:"t.third"}),children:u().createElement(fe,{key:r,onClick:function(){return i(o)},active:t===o,sx:{py:"ls"}},u().createElement(a,{size:20,sx:{color:t===o?"t.yellow":"t.primary",mr:"xs"}}),u().createElement(_.Z,null,n[r]))}}));return u().createElement(W,(0,c.__assign)({placement:"bottom-start",options:o,value:t,overlay:function(){return u().createElement(me,{sx:{position:"absolute",left:"-12px",width:"max-content"}},o.map((function(e){return e.children})))}},r))},We=i("KBBC"),Pe=function(e){var t=e.name,i=e.options,n=e.value,r=e.onChange;return u().createElement(We.QE,{name:t,value:n,onChange:r},i.map((function(e){return u().createElement(We.ZP,{key:e.value,value:e.value,label:e.label,sx:{"&:not(:first-of-type)":{ml:"10px"},"& label":{cursor:"pointer",color:e.value===n?"tradeWidget.intervalFilterIntervalRadioButtonActiveColor":"tradeWidget.intervalFilterIntervalRadioButtonInactiveColor",bg:e.value===n?"tradeWidget.intervalFilterIntervalRadioButtonActiveBg":"tradeWidget.intervalFilterIntervalRadioButtonInactiveBg","&:hover":{color:"tradeWidget.intervalFilterIntervalRadioButtonHoverColor",bg:"tradeWidget.intervalFilterIntervalRadioButtonHoverBg"},"& div":{ml:0,p:"minor",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px"}},"& svg":{display:"none"}}})})))};const He=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M12 5V3h9l.002 9h-2L19 6.414l-5.35 5.35-1.414-1.415L17.587 5H12zM10.472 12.115l-5.471 5.47L5 12H3v9h9.001v-2H6.415l5.471-5.471-1.414-1.414z",fill:"currentColor"}))};const Re=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M21 9.5v2h-8.498V3h2v5.086L20.588 2l1.414 1.414L15.917 9.5H21zM3.001 14.5v-2H11.5V21h-2v-5.086L3.414 22 2 20.586 8.085 14.5H3.001z",fill:"currentColor"}))};var Be=function(e){var t=e.expanded,i=(0,c.__rest)(e,["expanded"]),n=(0,c.__assign)((0,c.__assign)({},i),{sx:(0,c.__assign)({flexShrink:0,color:"tradeWidget.chartHeaderCloseIconColor",cursor:"pointer","&:hover":{color:"tradeWidget.chartHeaderCloseIconHoverColor"}},i.sx)});return t?u().createElement(He,(0,c.__assign)({},n)):u().createElement(Re,(0,c.__assign)({},n))};const Ne=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.874 8a4.002 4.002 0 01-7.748 0H2V6h3.126a4.002 4.002 0 017.748 0H22v2h-9.126zM11 7a2 2 0 11-4 0 2 2 0 014 0zM2 16h9.126a4.002 4.002 0 017.748 0H22v2h-3.126a4.002 4.002 0 01-7.748 0H2v-2zm13 3a2 2 0 110-4 2 2 0 010 4z",fill:"#76808F"}))};var Oe=function(e){return u().createElement(Ce.Z,(0,c.__assign)({},e,{placement:"top",arrow:!0,sx:(0,c.__assign)({height:"14px",width:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},e.sx)}),u().createElement(Ne,null))};const Ze=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M8 7h4v2H8V7zM14 7h2v2h-2V7zM8 12h4v2H8v-2zM14 12h2v2h-2v-2z",fill:"currentColor"}),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 22h2l3-3 3 3 3-3 3 3h2V2H4v20zm5-5.828l3 3 3-3 3 3V4H6v15.172l3-3z",fill:"currentColor"}))};var Fe,Ke=function(e){var t=e.toggled,i=(0,c.__rest)(e,["toggled"]);return u().createElement(Ce.Z,(0,c.__assign)({},i,{placement:"bottom",arrow:!0,sx:(0,c.__assign)({hegiht:"14px",width:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},i.sx)}),u().createElement(Ze,{color:t?"t.yellow":"#848E9C"}))},ze=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},e,{sx:(0,c.__assign)({flexShrink:0,color:"tradeWidget.chartHeaderCloseIconColor",cursor:"pointer","&:hover":{color:"tradeWidget.chartHeaderCloseIconHoverColor"}},e.sx)}),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 3.33331L2.5 3.33331V9.16665H4.16667V4.99998H15.8333V15.8333H10.8333V17.5H17.5V3.33331Z",fill:"currentColor"}),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.1665 10.8333H2.49984V17.5H9.1665V10.8333ZM7.49984 12.5V15.8333H4.1665V12.5H7.49984Z",fill:"currentColor"}),u().createElement("path",{d:"M14.1665 13.3334L14.1665 6.66669L7.49984 6.66669L7.49984 8.33335L11.3603 8.33335L7.49984 11.6667L8.67835 12.8452L12.4998 9.51186L12.4998 13.3334L14.1665 13.3334Z",fill:"currentColor"}))},Ue=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M12.8571 3.57146V7.14289H15V3.57146H12.8571ZM12.1429 2.85718H15.7143V7.85718H12.1429V2.85718ZM9.28571 12.1429H11.4286V8.57146H9.28571V12.1429ZM8.57143 7.85718H12.1429V12.8572H8.57143V7.85718ZM5.71429 17.1429H7.85714V13.5715H5.71429V17.1429ZM5 12.8572H8.57143V17.8572H5V12.8572Z",fill:"currentColor"}))},Ye=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M12.8571 17.1429H15V8.57145H12.8571V17.1429ZM12.1429 7.85716H15.7143V17.8572H12.1429V7.85716ZM9.28571 2.14287V7.14287H11.4286V2.14287H9.28571ZM8.57143 1.42859H12.1429V7.85716H8.57143V1.42859ZM5.71429 13.5714H7.85714V8.57145H5.71429V13.5714ZM5 7.85716H8.57143V14.2857H5V7.85716Z",fill:"currentColor"}))},Xe=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M7.85714 3.57146H10V12.1429H13.5714V5.71432H15.7143V15H16.4286V5.00004H12.8571V11.4286H10.7143V2.85718H7.14285V15.7143H5V12.1429H4.28571V16.4286H7.85714V3.57146Z",fill:"currentColo"}))},Ge=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.09445 10.9056C9.42933 11.2404 9.88354 11.4286 10.3571 11.4286C10.8307 11.4286 11.2849 11.2404 11.6198 10.9056C11.9547 10.5707 12.1429 10.1165 12.1429 9.64287C12.1429 9.16927 11.9547 8.71507 11.6198 8.38018C11.2849 8.04529 10.8307 7.85715 10.3571 7.85715C9.88354 7.85715 9.42933 8.04529 9.09445 8.38018C8.75956 8.71507 8.57142 9.16927 8.57142 9.64287C8.57142 10.1165 8.75956 10.5707 9.09445 10.9056ZM11.1148 10.4005C10.9138 10.6014 10.6413 10.7143 10.3571 10.7143C10.073 10.7143 9.80045 10.6014 9.59952 10.4005C9.39859 10.1996 9.28571 9.92703 9.28571 9.64287C9.28571 9.35871 9.39859 9.08619 9.59952 8.88525C9.80045 8.68432 10.073 8.57144 10.3571 8.57144C10.6413 8.57144 10.9138 8.68432 11.1148 8.88525C11.3157 9.08619 11.4286 9.35871 11.4286 9.64287C11.4286 9.92703 11.3157 10.1996 11.1148 10.4005ZM9.09445 15.1913C9.42933 15.5262 9.88354 15.7143 10.3571 15.7143C10.8307 15.7143 11.2849 15.5262 11.6198 15.1913C11.9547 14.8564 12.1429 14.4022 12.1429 13.9286C12.1429 13.455 11.9547 13.0008 11.6198 12.6659C11.2849 12.331 10.8307 12.1429 10.3571 12.1429C9.88354 12.1429 9.42933 12.331 9.09445 12.6659C8.75956 13.0008 8.57142 13.455 8.57142 13.9286C8.57142 14.4022 8.75956 14.8564 9.09445 15.1913ZM11.1148 14.6862C10.9138 14.8871 10.6413 15 10.3571 15C10.073 15 9.80045 14.8871 9.59952 14.6862C9.39859 14.4853 9.28571 14.2127 9.28571 13.9286C9.28571 13.6444 9.39859 13.3719 9.59952 13.171C9.80045 12.97 10.073 12.8572 10.3571 12.8572C10.6413 12.8572 10.9138 12.97 11.1148 13.171C11.3157 13.3719 11.4286 13.6444 11.4286 13.9286C11.4286 14.2127 11.3157 14.4853 11.1148 14.6862ZM14.1379 5.35717L12.7093 3.92858L13.2143 3.42358L14.6429 4.85217L16.0714 3.42358L16.5764 3.92858L15.1479 5.35717L16.5764 6.78573L16.0714 7.29073L14.6429 5.86217L13.2143 7.29073L12.7093 6.78573L14.1379 5.35717ZM16.0714 11.5764L14.6429 10.1479L13.2143 11.5764L12.7093 11.0714L14.1379 9.64286L12.7093 8.2143L13.2143 7.7093L14.6429 9.13786L16.0714 7.70927L16.5765 8.21427L15.1479 9.64286L16.5764 11.0714L16.0714 11.5764ZM6.07146 14.4336L7.50002 15.8621L8.00502 15.3571L6.57646 13.9286L8.00502 12.5L7.50002 11.995L6.07146 13.4236L4.64288 11.995L4.13788 12.5L5.56646 13.9286L4.13788 15.3572L4.64288 15.8622L6.07146 14.4336ZM7.50002 7.29073L6.07145 5.86215L4.64288 7.29073L4.13788 6.78573L5.56645 5.35716L4.13788 3.92858L4.64288 3.42358L6.07145 4.85216L7.50002 3.42358L8.00502 3.92858L6.57645 5.35716L8.00502 6.78573L7.50002 7.29073ZM6.07144 10.1479L7.50002 11.5764L8.00502 11.0714L6.57644 9.64285L8.00502 8.21427L7.50002 7.70927L6.07144 9.13786L4.64288 7.7093L4.13788 8.2143L5.56644 9.64285L4.13788 11.0714L4.64288 11.5764L6.07144 10.1479Z",fill:"currentColor"}))},je=function(e){return u().createElement(oe.Z,(0,c.__assign)({viewBox:"0 0 20 20",fill:"none"},e),u().createElement("path",{d:"M15.3571 15.7143L14.2857 13.9285M7.5 6.42854V15V6.42854ZM5 13.2143H7.5H5ZM10 6.78568H7.5H10ZM13.9286 2.14282V10.7143V2.14282ZM11.4286 4.64282H13.9286H11.4286ZM16.4286 10.3571H13.9286H16.4286ZM13.2143 13.9285H14.6429C14.8323 13.9285 15.014 13.8533 15.1479 13.7193C15.2819 13.5854 15.3571 13.4037 15.3571 13.2143C15.3571 13.0248 15.2819 12.8431 15.1479 12.7092C15.014 12.5752 14.8323 12.5 14.6429 12.5H13.2143V15.7143V13.9285Z",stroke:"currentColor"}))},qe=i("WSfb"),Je=function(e,t,i,n){return n-e(t)>=e(i)-n?i:t},Qe=function(e,t,i){var n=e.length;if(i<=t(e[0]))return e[0];if(i>=t(e[n-1]))return e[n-1];for(var r=0,o=n,a=0;r<o;){if(t(e[a=(r+o)/2>>>0])===i)return e[a];if(i<t(e[a])){if(a>0&&i>t(e[a-1]))return Je(t,e[a-1],e[a],i);o=a}else{if(a<n-1&&i<t(e[a+1]))return Je(t,e[a],e[a+1],i);r=a+1}}return e[a]},$e=function(e,t){if(!e.length)return null;var i,n=e.length-1,r=0,o=t(e[r]);if(t(e[n])===o)return null;for(;n>=r;)t(e[i=(n+r)/2>>>0])===o?r=i+1:n=i-1;return r},et={desktop:1260,tablet:768,phone:480},tt=function(e){var t=e.xData;return{xData:e.yData,yData:t}},it=function(e){return"undefined"!==typeof window&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=et[e]},nt=function(e){var t,i,n=e.d1Group,r=e.d2Group,o=e.width,a=e.height,s=e.cursor,l=e.scale,u=e.yAxisScale,d=void 0===u?.6:u,g=o/2,p=(0,h.useRef)(-1/0),f=(0,h.useRef)(-1/0),m=function(e,t,i){var n,r,o,a,s,l;return void 0===i&&(i=10),{d1:{low:null===(n=e[0])||void 0===n?void 0:n.xData,high:null===(r=e[e.length-1])||void 0===r?void 0:r.xData,atIndex:null===(o=e[i-1])||void 0===o?void 0:o.xData},d2:{low:null===(a=t[t.length-1])||void 0===a?void 0:a.xData,high:null===(s=t[0])||void 0===s?void 0:s.xData,atIndex:null===(l=t[i-1])||void 0===l?void 0:l.xData}}}(n,r),v=m.d1,y=m.d2,x=(t=y.high,i=v.low,(t+i)/2),b=function(e,t){return{min:1/Math.max(e.high-e.low,t.high-t.low)||-1/0,max:1/Math.max((e.atIndex||e.high)-e.low,t.high-(t.atIndex||t.low))||-1/0}}(v,y),_=b.min,C=b.max;p.current=Math.max(_,p.current),f.current=Math.max(C,f.current);var w=function(e,t,i){return e+(t-e)/1e3*i}(p.current,f.current,l),A=(0,h.useCallback)((function(e){return function(e){var t=e.value,i=e.width,n=e.scale;return(t-e.midValue)*n*i+i}({value:e,width:g,scale:w,midValue:x})}),[g,w,x]),L=(0,h.useCallback)((function(e){return function(e){var t=e.x,i=e.width;return(t-i)/i/e.scale+e.midValue}({x:e,width:g,scale:w,midValue:x})}),[g,w,x]),E=function(e){var t,i,n=e.d1Group,r=e.d2Group,o=e.d1Predicate,a=e.d2Predicate,s=$e(n,o)||n.length,l=$e(r,a)||r.length,c=null===(t=n[s-1])||void 0===t?void 0:t.yData,h=null===(i=r[l-1])||void 0===i?void 0:i.yData;return{max:Math.max(h,c),maxD1Index:s,maxD2Index:l}}({d1Group:n,d2Group:r,d1Predicate:function(e){return A(e.xData)>o},d2Predicate:function(e){return A(e.xData)<0}}),V=E.max,S=E.maxD1Index,M=E.maxD2Index,D=(0,h.useCallback)((function(e){return function(e){var t=e.value,i=e.height,n=e.scale;return i-t/e.maxValue*n*i-1}({value:e,height:a,scale:d,maxValue:V})}),[a,V]),T=function(e){var t=e.d1Group,i=e.d2Group,n=e.x,r=e.midValue,o=e.breakpoint,a=e.xToValueFn,s=e.valueToXFn,l=e.valueToYFn,h={xData:NaN,yData:NaN},u={xData:NaN,yData:NaN};if(n&&t.length){var d=void 0;n>o?(d=2*r-(null===(h=Qe(t,(function(e){return null===e||void 0===e?void 0:e.xData}),a(n)))||void 0===h?void 0:h.xData),u=Qe(i,(function(e){return-(null===e||void 0===e?void 0:e.xData)}),-d)):(d=2*r-(null===(u=Qe(i,(function(e){return-(null===e||void 0===e?void 0:e.xData)}),-a(n)))||void 0===u?void 0:u.xData),h=Qe(t,(function(e){return null===e||void 0===e?void 0:e.xData}),d))}return{d1:(0,c.__assign)((0,c.__assign)({},h),{x:s(null===h||void 0===h?void 0:h.xData)||0,y:l(null===h||void 0===h?void 0:h.yData)||0}),d2:(0,c.__assign)((0,c.__assign)({},u),{x:s(null===u||void 0===u?void 0:u.xData)||0,y:l(null===u||void 0===u?void 0:u.yData)||0})}}({d1Group:n.slice(0,S-1),d2Group:r.slice(0,M-1),x:s.x,midValue:x,breakpoint:g,xToValueFn:L,valueToXFn:A,valueToYFn:D}),k=T.d1,I=T.d2,W=V/d,P=function(e,t,i){var n;n=e>=t?it("mobile")||e<500?3:it("tablet")||e<800?5:10:t<500?3:t<800?5:10;for(var r=i(0),o=(i(e)-r)/n,a=[],s=r+o/2,l=0;l<n;l++)s&&(s>0&&a.push(s),s+=o);return a}(o,a,L),H=function(e,t,i){var n=[20,50,100],r=(t-e)/Math.floor(i/40),o=Math.floor(Math.log10(r)-1),a=r/(o=Math.pow(10,o)),s=0,l=0;for(l=0;l<n.length;l++)if(n[l]>=a){s=n[l]*o;break}var c,h=0;c=Math.ceil(t/s)*s,h=Math.floor(e/s)*s;for(var u=[];h<c;)u.push(parseFloat((h+s).toPrecision(12))),h+=s;return u}(0,W,a);return{width:o,height:a,halfWidth:g,midValue:x,d1:k,d2:I,xTicks:P,yTicks:H,valueToX:A,valueToY:D}},rt=function(e){var t=e.initCursorState,i=void 0===t?{x:0,y:0}:t,n=e.scale,r=e.setScale,o=void 0===r?function(){return null}:r,a=(0,c.__read)((0,h.useState)(i),2),s=a[0],l=a[1];return{cursor:s,onMouseMove:function(e){return l({x:e.evt.offsetX,y:e.evt.offsetY})},onMouseLeave:function(){return l(i)},onMouseWheel:(0,h.useCallback)((function(e){var t,i,r=(null===(t=null===e||void 0===e?void 0:e.evt)||void 0===t?void 0:t.deltaY)<0?Math.min(n+5,1e3):Math.max(0,n-5);null===o||void 0===o||o(r),null===(i=null===e||void 0===e?void 0:e.evt)||void 0===i||i.preventDefault()}),[n,o])}},ot=i("c2re"),at=i.n(ot),st=i("7nmT"),lt=(0,i("QB66").F4)(dt||(dt=(0,c.__makeTemplateObject)(["\n  0%, 40%, 100% {\n    transform: scaleY(0.4);\n  }\n  20% {\n    transform: scaleY(1.0);\n  }\n"],["\n  0%, 40%, 100% {\n    transform: scaleY(0.4);\n  }\n  20% {\n    transform: scaleY(1.0);\n  }\n"]))),ct=function(){return u().createElement(_.Z,{className:"spinner",__css:{width:"50px",height:"35px",textAlign:"center",fontSize:"10px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:100,"& > div":{backgroundColor:"#f5bc00",height:"100%",width:"3px",display:"inline-block",margin:"0 3px",animationName:""+lt,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}}},u().createElement(_.Z,{sx:{animationDelay:"-1.1s"}}),u().createElement(_.Z,{sx:{animationDelay:"-1s"}}),u().createElement(_.Z,{sx:{animationDelay:"-0.9s"}}),u().createElement(_.Z,{sx:{animationDelay:"-0.8s"}}))},ht=function(e){var t=e.show,i=void 0===t||t,n=e.fullScreen,r=void 0!==n&&n,o=e.inner,a=void 0!==o&&o,s=e.children;if(!i)return u().createElement(u().Fragment,null,s||null);var l=u().createElement(ct,null);return r?u().createElement(u().Fragment,null,s,u().createElement(_.Z,{style:{position:a?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},l)):u().createElement(u().Fragment,null,s,l)};ht.show=function(e){var t=(void 0===e?{}:e).fullScreen,i=void 0!==t&&t;Fe||(Fe=document.createElement("div"),document.body.appendChild(Fe)),st.render(u().createElement(ht,{fullScreen:i}),Fe)},ht.hide=function(){Fe&&st.render(u().createElement(ht,{show:!1}),Fe)},ht.displayName="Loading";const ut=ht;var dt,gt,pt,ft,mt,vt,yt,xt,bt,_t,Ct,wt,At,Lt,Et,Vt,St,Mt,Dt=i("TrB0"),Tt="#191B20",kt="#FAFAFA",It={bg:kt,grid:"#e1ecf2",lineColor:"#e6e8ea",short:"#E0294A",shortFill:"#FF0372",long:"#2EBD85",longFill:"#00C582",crosshair:"#626c73",cta:"#414A67",ctaHighlight:"#414A67",alert:"#F0B90B",category:"dark",textColor:"#999",maLine:"#f5bc00",ma1:"#ffc200",ma2:"#ff00ff",ma3:"#cc0066"},Wt=(0,c.__assign)((0,c.__assign)({},It),{short:"#EA0070",shortFill:"rgba(234,0,112, 0.9)",long:"#74A700",longFill:"rgba(116,167,0, 0.9)"}),Pt=(0,c.__assign)((0,c.__assign)({},It),{bg:Tt,grid:Dt.BA[700],lineColor:Dt.BA[600]}),Ht={light:It,dark:Pt,lightTrdl:Wt,darkTrdl:(0,c.__assign)((0,c.__assign)({},Pt),{short:"#EA0070",shortFill:"rgba(234,0,112, 0.9)",long:"#74A700",longFill:"rgba(116,167,0, 0.9)"})},Rt=function(e,t){return Ht[function(e,t){return"Light"===e?"fresh"===t?"light":"lightTrdl":"fresh"===t?"dark":"darkTrdl"}(e,t)]},Bt=i("aiGu"),Nt=i("ArXb"),Ot=function(e){return e.tvDirectoryPath+"/"+e.libDirName+"/"},Zt=function(e){var t=e.tvDirectoryPath,i=e.themeDirName,n=e.themeName;return function(e){return e.tvDirectoryPath+"/"+e.themeDirName+"/"}({tvDirectoryPath:t,themeDirName:i})+"tv-"+n.toLowerCase()+"-theme-v1.min.css"},Ft=function(e){var t=e.widget,i=e.theme,n=e.customCssFileUrl,r=t._innerWindow().document.head;!function(e){for(var t=e.getElementsByTagName("link"),i=0;i<t.length;i++){var n=t[i],r=n.getAttribute("href")||"";(n.getAttribute("data-theme")||/tv-(light|dark)-theme.*\.css/.test(r))&&n.remove()}}(r),t.addCustomCSSFile(n),(function(e){for(var t=e.getElementsByTagName("style"),i=0;i<t.length;i++){var n=t[i];if(n.getAttribute("data-theme"))return n}var r=document.createElement("style");return r.type="text/css",r.setAttribute("data-theme","tradingView"),e.appendChild(r),r}(r)).innerText=function(e){var t=".group-2JyOhh7Z- { background: "+("Light"===e?"#fafafa":"#191B20")+"!important}";return"Light"===e&&(t+=".tv-dialog__section { padding: 10px 30px!important }\n          .tv-dialog__close { top: 0!important; padding: 11px!important }"),"Dark"===e&&(t+=".charts-popup-list .item.active, .feature-no-touch .charts-popup-list .item:hover { background: #f1f3f6!important }"),t}(i)},Kt=function(e){var t=e.widget,i=e.theme,n=e.colorScheme,r=e.tvDirectoryPath,o=e.tvThemeDirName,a=Rt(i,n),s=function(e,t){return{"symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":(i=Rt(e,t)).textColor,"scalesProperties.lineColor":i.lineColor,"scalesProperties.backgroundColor":"#151a1e","paneProperties.background":i.bg,"paneProperties.horzGridProperties.color":i.grid,"paneProperties.vertGridProperties.color":i.grid,"paneProperties.crossHairProperties.color":i.crosshair,"candleStyle.upColor":i.long,"candleStyle.downColor":i.short,"candleStyle.drawWick":!0,"candleStyle.drawBorder":!0,"candleStyle.borderColor":"#FF0372","candleStyle.borderUpColor":i.long,"candleStyle.borderDownColor":i.short};var i}(i,n),l=Zt({tvDirectoryPath:r,themeDirName:o,themeName:i});Ft({widget:t,theme:i,customCssFileUrl:l}),function(e){var t=e.widget,i=e.theme,n=t.chart().getCheckableActionState("showCountdown");t.changeTheme(i),n&&setTimeout((function(){t.chart().executeActionById("showCountdown"),t.chart().executeActionById("showCountdown")}),0)}({widget:t,theme:i}),t.applyOverrides(s),function(e){var t=e.widget,i=e.style;try{var n=t.activeChart().getAllStudies().find((function(e){var t;return"volume"===(null===(t=null===e||void 0===e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())}));n&&t.activeChart().getStudyById(n.id).applyOverrides({"volume.color.0":i.short,"volume.color.1":i.long})}catch(r){}}({widget:t,style:a})},zt=function(e){var t=e.tradingViewSave,i=e.theme,n=e.colorScheme,r=e.tvDirectoryPath,o=e.tvThemeDirName,a=e.widget,s=Rt(i,n),l=Zt({tvDirectoryPath:r,themeDirName:o,themeName:i});Ft({widget:a,theme:i,customCssFileUrl:l}),function(e){var t=e.tradingViewSave,i=e.tvDirectoryPath,n=e.tvThemeDirName,r=e.widget,o=e.theme,a=e.colorScheme,s=null===t||void 0===t?void 0:t.charts[0].chartProperties.paneProperties.background;("#ffffff"===s||"#131722"===s||s===kt||s===Tt||!t)&&Kt({widget:r,theme:o,colorScheme:a,tvDirectoryPath:i,tvThemeDirName:n})}({widget:a,tradingViewSave:t,theme:i,colorScheme:n,tvDirectoryPath:r,tvThemeDirName:o}),function(e){var t=e.tradingViewSave,i=e.widget,n=e.style;t||(i.chart().removeAllStudies(),i.chart().createStudy("Volume",!1,!1,[0]),i.chart().createStudy("Moving Average",!1,!1,[7],void 0,{"Plot.linewidth":1,"Plot.color":n.ma1}),i.chart().createStudy("Moving Average",!1,!1,[25],void 0,{"Plot.linewidth":1,"Plot.color":n.ma2}),i.chart().createStudy("Moving Average",!1,!1,[99],void 0,{"Plot.linewidth":1,"Plot.color":n.ma3}))}({tradingViewSave:t,widget:a,style:s})},Ut=function(e){var t=e.widget,i=e.options,n=t.chart().createPositionLine({}).setText(i.text).setPrice(i.price).setQuantity(i.quantity).setBodyFont(i.bodyFont).setBodyBackgroundColor(i.bodyBackgroundColor).setBodyTextColor(i.bodyTextColor).setBodyBorderColor(i.bodyBorderColor).setQuantityFont(i.quantityFont).setQuantityTextColor(i.quantityTextColor).setQuantityBorderColor(i.quantityBorderColor).setQuantityBackgroundColor(i.quantityBackgroundColor).setExtendLeft(i.extendLeft).setLineStyle(i.lineStyle).setLineColor(i.lineColor).setLineLength(i.lineLength);return i.showClose&&n.setCloseButtonBackgroundColor(i.closeButtonBackgroundColor).setCloseButtonBorderColor(i.closeButtonBorderColor).setCloseButtonIconColor(i.closeButtonIconColor).onClose("onClose",(function(){var e;null===(e=i.onClose)||void 0===e||e.call(i)})),n},Yt=function(e){var t=e.widget,i=e.limitOrders,n=e.positionOrders,r=e.lastOrderShapes,o=e.shouldShow;return r.forEach((function(e){return e.remove()})),o?function(e){var t=e.widget,i=e.limitOrders,n=e.positionOrders,r=e.onCreateOrderShapesError;try{var o=Rt("Light","fresh"),a=i.map((function(e){var i=e.text,n=e.price,r=e.quantity,a=e.isBuy,s=e.cancel,l=a?o.long:o.short;return Ut({widget:t,options:{text:i,price:n,quantity:r,bodyFont:"normal 9pt Sans",bodyTextColor:"#2A2F37",bodyBorderColor:l,bodyBackgroundColor:"#fff",quantityFont:"normal 9pt Sans",quantityBorderColor:l,quantityBackgroundColor:l,quantityTextColor:"#fff",extendLeft:!1,lineStyle:2,lineColor:l,lineLength:60,closeButtonBackgroundColor:l,closeButtonBorderColor:l,closeButtonIconColor:"#fff",showClose:!0,onClose:s}})})),s=n.map((function(e){var i=e.text,n=e.price,r=e.quantity,a=e.isBuy,s=e.cancel,l=a?o.long:o.short;return Ut({widget:t,options:{text:i,price:n,quantity:r,bodyFont:"normal 9pt Sans",bodyTextColor:l,bodyBorderColor:l,bodyBackgroundColor:"#1E2126",quantityFont:"normal 9pt Sans",quantityBorderColor:l,quantityBackgroundColor:l,quantityTextColor:"#fff",extendLeft:!1,lineStyle:2,lineColor:l,lineLength:100,closeButtonBackgroundColor:l,closeButtonBorderColor:l,closeButtonIconColor:"#fff",showClose:!1,onClose:s}})}));return a.concat(s)}catch(l){return null===r||void 0===r||r(l),[]}}({widget:t,limitOrders:i,positionOrders:n}):[]},Xt=function(e){var t=e.symbol,i=e.interval,n=e.theme,r=e.colorScheme,o=e.limitOrders,a=e.positionOrders,s=e.showOrders,l=e.seriesStyle,d=e.showIndicators,g=e.isChartReady,p=e.isFirstTimeDataLoaded,f=e.initialConfig,m=f.tvDirectoryPath,v=f.tvLibraryName,y=void 0===v?"charting_library":v,x=f.tvExeFileName,b=void 0===x?"charting_library.min.js":x,C=f.tvThemeDirName,w=void 0===C?"themes":C,A=f.tvConfig,L=f.colorScheme,E=f.onSave,V=f.onCreateOrderShapesError,S=f.onLoadConfig,M=f.onLoading,D=f.onWigetInitialized,T=f.onChartReadyDone,k=f.onWillUnmount,I=f.onWidgetRefNotFoundError,W=f.onScriptLoaded,P=f.onScriptLoadingError,H=f.onFirstTimeDataLoadedDone,R=f.onDataLoadedDone,B=(0,h.useRef)([]),N=(0,h.useRef)(),O=(0,c.__read)((0,h.useState)("101%"),2),Z=O[0],F=O[1],K=(0,h.useCallback)((function(){return(0,c.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return null===W||void 0===W||W(),[4,S()];case 1:return e=r.sent(),t=function(e,t){var i=e.tradingViewSave,n=e.tvDirectoryPath,r=e.tvLibraryName,o=e.tvThemeDirName,a=e.colorScheme,s=t.symbol,l=t.interval,h=t.theme,u=void 0===h?"Dark":h,d=t.library_path,g=void 0===d?Ot({tvDirectoryPath:n,libDirName:r}):d,p=t.custom_css_url,f=void 0===p?Zt({tvDirectoryPath:n,themeDirName:o,themeName:u}):p,m=t.locale,v=void 0===m?"en":m,y=t.overrides,x=t.debug,b=void 0!==x&&x,_=t.time_frames,C=void 0===_?[]:_,w=t.autosize,A=void 0===w||w,L=t.toolbar_bg,E=void 0===L?"transparent":L,V=t.studies_overrides,S=t.loading_screen,M=t.enabled_features,D=void 0===M?["dont_show_boolean_study_arguments","hide_last_na_study_output","left_toolbar","timeframes_toolbar","keep_left_toolbar_visible_on_small_screens","save_chart_properties_to_local_storage"]:M,T=t.disabled_features,k=void 0===T?["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","compare_symbol","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu"]:T,I=(0,c.__rest)(t,["symbol","interval","theme","library_path","custom_css_url","locale","overrides","debug","time_frames","autosize","toolbar_bg","studies_overrides","loading_screen","enabled_features","disabled_features"]),W="Asia/Shanghai";try{W=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(B){}var P=Rt(u,a),H=at()(i);if(H)for(var R=0;R<H.charts[0].panes.length;R++)H.charts[0].panes[R].sources[0].state.symbol=s,H.charts[0].panes[R].sources[0].state.interval=l;return(0,c.__assign)((0,c.__assign)({},I),{symbol:s,interval:l,timezone:W,theme:u,library_path:g,custom_css_url:f,locale:v,overrides:y,debug:b,time_frames:C,autosize:A,toolbar_bg:E,studies_overrides:V||{"volume.volume.transparency":70,"volume.volume.color.0":P.short,"volume.volume.color.1":P.long,"Moving Average.precision":8,volumePaneSize:"medium"},loading_screen:S||{backgroundColor:P.bg},enabled_features:D,disabled_features:k,saved_data:H||void 0})}({tradingViewSave:e,tvDirectoryPath:m,tvLibraryName:y,tvThemeDirName:w,colorScheme:L},A),N.current=new window.TradingView.widget(t),null===D||void 0===D||D(),null===(i=N.current)||void 0===i||i.onChartReady((function(){if(!N.current)return null===I||void 0===I?void 0:I();zt({tradingViewSave:e,theme:n,colorScheme:L,widget:N.current,tvDirectoryPath:m,tvThemeDirName:w}),F("100%"),null===T||void 0===T||T()})),[2]}}))}))}),[]);(0,h.useLayoutEffect)((function(){if(window.TradingView)K();else{var e=document.createElement("script");e.src=function(e){var t=e.tvDirectoryPath,i=e.libDirName,n=e.exeFileName;return""+Ot({tvDirectoryPath:t,libDirName:i})+n}({tvDirectoryPath:m,libDirName:y,exeFileName:b}),e.async=!1,e.addEventListener("load",K),e.addEventListener("error",(function(){return null===P||void 0===P?void 0:P()})),document.head.appendChild(e)}}),[]);var z=(0,h.useCallback)((function(){N.current&&function(e){var t=e.widget,i=e.onSave,n=void 0===i?function(){return null}:i;t.save(n)}({widget:N.current,onSave:function(e){return setTimeout((function(){return null===E||void 0===E?void 0:E(e)}),0)}})}),[E]),U=(0,h.useCallback)((function(){null===M||void 0===M||M(!0)}),[]),Y=(0,h.useCallback)((function(){null===M||void 0===M||M(!0)}),[]),X=(0,h.useCallback)((function(){null===M||void 0===M||M(!1),null===H||void 0===H||H()}),[]),G=(0,h.useCallback)((function(){null===M||void 0===M||M(!1),null===R||void 0===R||R()}),[]);return(0,h.useEffect)((function(){var e,t;if(g)return null===(e=N.current)||void 0===e||e.subscribe("onAutoSaveNeeded",z),null===(t=N.current)||void 0===t||t.subscribe("study",z),function(){var e,t;null===(e=N.current)||void 0===e||e.unsubscribe("onAutoSaveNeeded",z),null===(t=N.current)||void 0===t||t.unsubscribe("study",z)}}),[g,z]),(0,h.useEffect)((function(){var e,t,i,n,r;if(g)return null===(e=N.current)||void 0===e||e.chart().onDataLoaded().subscribe(null,X,!0),null===(t=N.current)||void 0===t||t.chart().onDataLoaded().subscribe(null,G),null===(i=N.current)||void 0===i||i.chart().onSymbolChanged().subscribe(null,U),null===(n=N.current)||void 0===n||n.chart().onIntervalChanged().subscribe(null,Y),null===(r=N.current)||void 0===r||r.activeChart().resetData(),function(){var e,t,i;null===(e=N.current)||void 0===e||e.chart().onDataLoaded().unsubscribeAll(null),null===(t=N.current)||void 0===t||t.chart().onSymbolChanged().unsubscribeAll(null),null===(i=N.current)||void 0===i||i.chart().onIntervalChanged().unsubscribeAll(null)}}),[g,G,X]),(0,Bt.Z)((function(){var e;N.current&&(null===(e=N.current)||void 0===e||e.remove(),N.current=void 0,null===k||void 0===k||k())})),(0,Nt.Z)((function(){p&&N.current&&(B.current=Yt({widget:N.current,limitOrders:o,positionOrders:a,lastOrderShapes:B.current,shouldShow:s,onCreateOrderShapesError:V}))}),[p,o,a,s]),(0,Nt.Z)((function(){g&&N.current&&function(e){var t=e.widget,i=e.seriesStyle;t.applyOverrides({"mainSeriesProperties.style":i})}({widget:N.current,seriesStyle:l})}),[l]),(0,Nt.Z)((function(){g&&N.current&&function(e){var t=e.widget,i=e.symbol,n=e.interval,r=e.onDone,o=void 0===r?function(){return null}:r;t.setSymbol(i,n,o)}({widget:N.current,symbol:t,interval:i})}),[t,i]),(0,Nt.Z)((function(){g&&N.current&&Kt({widget:N.current,theme:n,colorScheme:r,tvDirectoryPath:m,tvThemeDirName:w})}),[n,r]),(0,Nt.Z)((function(){g&&N.current&&N.current.chart().executeActionById("insertIndicator")}),[d]),u().createElement(_.Z,{id:A.container_id,style:{height:Z}})},Gt="#191B20",jt="#FAFAFA",qt={bg:jt,grid:"#e1ecf2",lineColor:"#e6e8ea",short:"#E0294A",shortFill:"#FF0372",long:"#2EBD85",longFill:"#00C582",crosshair:"#626c73",cta:"#414A67",ctaHighlight:"#414A67",alert:"#F0B90B",category:"dark",textColor:"#999",maLine:"#f5bc00",ma1:"#ffc200",ma2:"#ff00ff",ma3:"#cc0066"},Jt=(0,c.__assign)((0,c.__assign)({},qt),{short:"#EA0070",shortFill:"rgba(234,0,112, 0.9)",long:"#74A700",longFill:"rgba(116,167,0, 0.9)"}),Qt=(0,c.__assign)((0,c.__assign)({},qt),{bg:Gt,grid:Dt.BA[700],lineColor:Dt.BA[600]}),$t={light:qt,dark:Qt,lightTrdl:Jt,darkTrdl:(0,c.__assign)((0,c.__assign)({},Qt),{short:"#EA0070",shortFill:"rgba(234,0,112, 0.9)",long:"#74A700",longFill:"rgba(116,167,0, 0.9)"})},ei=function(e,t){return $t[function(e,t){return"Light"===e?"fresh"===t?"light":"lightTrdl":"fresh"===t?"dark":"darkTrdl"}(e,t)]},ti=function(e){return e.tvDirectoryPath+"/"+e.libDirName+"/"},ii=function(e){var t=e.tvDirectoryPath,i=e.themeDirName,n=e.themeName;return function(e){return e.tvDirectoryPath+"/"+e.themeDirName+"/"}({tvDirectoryPath:t,themeDirName:i})+"tv-"+n.toLowerCase()+"-theme-v1.min.css"},ni=function(e){var t=e.widget,i=e.theme,n=e.customCssFileUrl,r=t._innerWindow().document.head;!function(e){for(var t=e.getElementsByTagName("link"),i=0;i<t.length;i++){var n=t[i],r=n.getAttribute("href")||"";(n.getAttribute("data-theme")||/tv-(light|dark)-theme.*\.css/.test(r))&&n.remove()}}(r),t.addCustomCSSFile(n),(function(e){for(var t=e.getElementsByTagName("style"),i=0;i<t.length;i++){var n=t[i];if(n.getAttribute("data-theme"))return n}var r=document.createElement("style");return r.type="text/css",r.setAttribute("data-theme","tradingView"),e.appendChild(r),r}(r)).innerText=function(e){var t=".group-2JyOhh7Z- { background: "+("Light"===e?"#fafafa":"#191B20")+"!important}";return"Light"===e&&(t+=".tv-dialog__section { padding: 10px 30px!important }\n          .tv-dialog__close { top: 0!important; padding: 11px!important }"),"Dark"===e&&(t+=".charts-popup-list .item.active, .feature-no-touch .charts-popup-list .item:hover { background: #f1f3f6!important }"),t}(i)},ri=function(e){var t=e.widget,i=e.theme,n=e.colorScheme,r=e.tvDirectoryPath,o=e.tvThemeDirName,a=ei(i,n),s=function(e,t){return{"symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":(i=ei(e,t)).textColor,"scalesProperties.lineColor":i.lineColor,"scalesProperties.backgroundColor":"#151a1e","paneProperties.background":i.bg,"paneProperties.horzGridProperties.color":i.grid,"paneProperties.vertGridProperties.color":i.grid,"paneProperties.crossHairProperties.color":i.crosshair,"mainSeriesProperties.candleStyle.upColor":i.long,"mainSeriesProperties.candleStyle.downColor":i.short,"mainSeriesProperties.candleStyle.drawWick":!0,"mainSeriesProperties.candleStyle.drawBorder":!0,"mainSeriesProperties.candleStyle.borderColor":"#FF0372","mainSeriesProperties.candleStyle.borderUpColor":i.long,"mainSeriesProperties.candleStyle.borderDownColor":i.short};var i}(i,n),l=ii({tvDirectoryPath:r,themeDirName:o,themeName:i});ni({widget:t,theme:i,customCssFileUrl:l}),function(e){var t=e.widget,i=e.theme,n=t.chart().getCheckableActionState("showCountdown");t.changeTheme(i),n&&setTimeout((function(){t.chart().executeActionById("showCountdown")}),0)}({widget:t,theme:i}),setTimeout((function(){t.applyOverrides(s),function(e){var t=e.widget,i=e.style;try{var n=t.activeChart().getAllStudies().find((function(e){var t;return"volume"===(null===(t=null===e||void 0===e?void 0:e.name)||void 0===t?void 0:t.toLowerCase())}));n&&t.activeChart().getStudyById(n.id).applyOverrides({"volume.transparency":30,"volume.color.0":i.short,"volume.color.1":i.long})}catch(r){}}({widget:t,style:a})}),0)},oi=function(e){var t=e.widget,i=e.seriesStyle;t.applyOverrides({"mainSeriesProperties.style":i})},ai=function(e){var t=e.tradingViewSave,i=e.theme,n=e.colorScheme,r=e.seriesStyle,o=e.tvDirectoryPath,a=e.tvThemeDirName,s=e.widget,l=ei(i,n);!function(e){var t=e.tradingViewSave,i=e.tvDirectoryPath,n=e.tvThemeDirName,r=e.widget,o=e.theme,a=e.colorScheme,s=null===t||void 0===t?void 0:t.charts[0].chartProperties.paneProperties.background;("#ffffff"===s||"#131722"===s||s===jt||s===Gt||!t)&&ri({widget:r,theme:o,colorScheme:a,tvDirectoryPath:i,tvThemeDirName:n})}({widget:s,tradingViewSave:t,theme:i,colorScheme:n,tvDirectoryPath:o,tvThemeDirName:a}),function(e){var t=e.tradingViewSave,i=e.widget,n=e.style;t||(i.chart().createStudy("Moving Average",!1,!1,[7],{"plot.linewidth":1,"plot.color":n.ma1,precision:8}),i.chart().createStudy("Moving Average",!1,!1,[25],{"plot.linewidth":1,"plot.color":n.ma2,precision:8}),i.chart().createStudy("Moving Average",!1,!1,[99],{"plot.linewidth":1,"plot.color":n.ma3,precision:8}))}({tradingViewSave:t,widget:s,style:l}),oi({widget:s,seriesStyle:r})},si=function(e){var t=e.widget,i=e.options,n=t.chart().createPositionLine({}).setText(i.text).setPrice(i.price).setQuantity(i.quantity).setBodyFont(i.bodyFont).setBodyBackgroundColor(i.bodyBackgroundColor).setBodyTextColor(i.bodyTextColor).setBodyBorderColor(i.bodyBorderColor).setQuantityFont(i.quantityFont).setQuantityTextColor(i.quantityTextColor).setQuantityBorderColor(i.quantityBorderColor).setQuantityBackgroundColor(i.quantityBackgroundColor).setExtendLeft(i.extendLeft).setLineStyle(i.lineStyle).setLineColor(i.lineColor).setLineLength(i.lineLength);return i.showClose&&n.setCloseButtonBackgroundColor(i.closeButtonBackgroundColor).setCloseButtonBorderColor(i.closeButtonBorderColor).setCloseButtonIconColor(i.closeButtonIconColor).onClose("onClose",(function(){var e;null===(e=i.onClose)||void 0===e||e.call(i)})),n},li=function(e){var t=e.widget,i=e.limitOrders,n=e.positionOrders,r=e.lastOrderShapes,o=e.shouldShow;return r.forEach((function(e){return e.remove()})),o?function(e){var t=e.widget,i=e.limitOrders,n=e.positionOrders,r=e.onCreateOrderShapesError;try{var o=ei("Light","fresh"),a=i.map((function(e){var i=e.text,n=e.price,r=e.quantity,a=e.isBuy,s=e.cancel,l=a?o.long:o.short;return si({widget:t,options:{text:i,price:n,quantity:r,bodyFont:"normal 17pt Sans",bodyTextColor:"#2A2F37",bodyBorderColor:l,bodyBackgroundColor:"#fff",quantityFont:"normal 17pt Sans",quantityBorderColor:l,quantityBackgroundColor:l,quantityTextColor:"#fff",extendLeft:!1,lineStyle:2,lineColor:l,lineLength:60,closeButtonBackgroundColor:l,closeButtonBorderColor:l,closeButtonIconColor:"#fff",showClose:!0,onClose:s}})})),s=n.map((function(e){var i=e.text,n=e.price,r=e.quantity,a=e.isBuy,s=e.cancel,l=a?o.long:o.short;return si({widget:t,options:{text:i,price:n,quantity:r,bodyFont:"normal 17pt Sans",bodyTextColor:l,bodyBorderColor:l,bodyBackgroundColor:"#1E2126",quantityFont:"normal 17pt Sans",quantityBorderColor:l,quantityBackgroundColor:l,quantityTextColor:"#fff",extendLeft:!1,lineStyle:2,lineColor:l,lineLength:100,closeButtonBackgroundColor:l,closeButtonBorderColor:l,closeButtonIconColor:"#fff",showClose:!1,onClose:s}})}));return a.concat(s)}catch(l){return null===r||void 0===r||r(l),[]}}({widget:t,limitOrders:i,positionOrders:n}):[]},ci=function(e){var t=e.symbol,i=e.interval,n=e.theme,r=e.colorScheme,o=e.limitOrders,a=e.positionOrders,s=e.showOrders,l=e.seriesStyle,d=e.showIndicators,g=e.isChartReady,p=e.isFirstTimeDataLoaded,f=e.initialConfig,m=f.tvDirectoryPath,v=f.tvLibraryName,y=void 0===v?"charting_library":v,x=f.tvExeFileName,b=void 0===x?"charting_library.js":x,C=f.tvThemeDirName,w=void 0===C?"themes":C,A=f.tvConfig,L=f.colorScheme,E=f.onSave,V=f.onCreateOrderShapesError,S=f.onLoadConfig,M=f.onLoading,D=f.onWigetInitialized,T=f.onChartReadyDone,k=f.onWillUnmount,I=f.onWidgetRefNotFoundError,W=f.onScriptLoaded,P=f.onScriptLoadingError,H=f.onFirstTimeDataLoadedDone,R=f.onDataLoadedDone,B=(0,h.useRef)([]),N=(0,h.useRef)(),O=(0,h.useCallback)((function(){return(0,c.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return null===W||void 0===W||W(),[4,S()];case 1:return e=r.sent(),t=function(e,t){var i=e.tradingViewSave,n=e.tvDirectoryPath,r=e.tvLibraryName,o=e.tvThemeDirName,a=e.colorScheme,s=t.symbol,l=t.interval,h=t.theme,u=void 0===h?"Dark":h,d=t.library_path,g=void 0===d?ti({tvDirectoryPath:n,libDirName:r}):d,p=t.custom_css_url,f=void 0===p?ii({tvDirectoryPath:n,themeDirName:o,themeName:u}):p,m=t.locale,v=void 0===m?"en":m,y=t.overrides,x=t.debug,b=void 0!==x&&x,_=t.time_frames,C=void 0===_?[]:_,w=t.autosize,A=void 0===w||w,L=t.toolbar_bg,E=void 0===L?"transparent":L,V=t.studies_overrides,S=t.loading_screen,M=t.enabled_features,D=void 0===M?["dont_show_boolean_study_arguments","hide_last_na_study_output","left_toolbar","timeframes_toolbar","keep_left_toolbar_visible_on_small_screens","save_chart_properties_to_local_storage"]:M,T=t.disabled_features,k=void 0===T?["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","compare_symbol","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu"]:T,I=(0,c.__rest)(t,["symbol","interval","theme","library_path","custom_css_url","locale","overrides","debug","time_frames","autosize","toolbar_bg","studies_overrides","loading_screen","enabled_features","disabled_features"]),W="Asia/Shanghai";try{W=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(B){}var P=ei(u,a),H=at()(i);if(H)for(var R=0;R<H.charts[0].panes.length;R++)H.charts[0].panes[R].sources[0].state.symbol=s,H.charts[0].panes[R].sources[0].state.interval=l;return(0,c.__assign)((0,c.__assign)({},I),{symbol:s,interval:l,timezone:W,theme:u,library_path:g,custom_css_url:f,locale:v,overrides:y,debug:b,time_frames:C,autosize:A,toolbar_bg:E,studies_overrides:V,loading_screen:S||{backgroundColor:P.bg},enabled_features:D,disabled_features:k,saved_data:H||void 0})}({tradingViewSave:e,tvDirectoryPath:m,tvLibraryName:y,tvThemeDirName:w,colorScheme:L},A),N.current=new window.TradingView.widget(t),null===D||void 0===D||D(),null===(i=N.current)||void 0===i||i.onChartReady((function(){if(!N.current)return null===I||void 0===I?void 0:I();ai({tradingViewSave:e,theme:n,colorScheme:L,seriesStyle:l,widget:N.current,tvDirectoryPath:m,tvThemeDirName:w}),null===T||void 0===T||T()})),[2]}}))}))}),[]);(0,h.useLayoutEffect)((function(){if(window.TradingView)O();else{var e=document.createElement("script");e.src=function(e){var t=e.tvDirectoryPath,i=e.libDirName,n=e.exeFileName;return""+ti({tvDirectoryPath:t,libDirName:i})+n}({tvDirectoryPath:m,libDirName:y,exeFileName:b}),e.async=!1,e.addEventListener("load",O),e.addEventListener("error",(function(){return null===P||void 0===P?void 0:P()})),document.head.appendChild(e)}}),[]);var Z=(0,h.useCallback)((function(){N.current&&function(e){var t=e.widget,i=e.onSave,n=void 0===i?function(){return null}:i;t.save(n)}({widget:N.current,onSave:function(e){return setTimeout((function(){return null===E||void 0===E?void 0:E(e)}),0)}})}),[E]),F=(0,h.useCallback)((function(){null===M||void 0===M||M(!0)}),[]),K=(0,h.useCallback)((function(){null===M||void 0===M||M(!0)}),[]),z=(0,h.useCallback)((function(){null===M||void 0===M||M(!1),null===H||void 0===H||H()}),[]),U=(0,h.useCallback)((function(){null===M||void 0===M||M(!1),null===R||void 0===R||R()}),[]);return(0,h.useEffect)((function(){var e,t;if(g)return null===(e=N.current)||void 0===e||e.subscribe("onAutoSaveNeeded",Z),null===(t=N.current)||void 0===t||t.subscribe("study",Z),function(){var e,t;null===(e=N.current)||void 0===e||e.unsubscribe("onAutoSaveNeeded",Z),null===(t=N.current)||void 0===t||t.unsubscribe("study",Z)}}),[g,Z]),(0,h.useEffect)((function(){var e,t,i,n,r;if(g)return null===(e=N.current)||void 0===e||e.chart().onDataLoaded().subscribe(null,z,!0),null===(t=N.current)||void 0===t||t.chart().onDataLoaded().subscribe(null,U),null===(i=N.current)||void 0===i||i.chart().onSymbolChanged().subscribe(null,F),null===(n=N.current)||void 0===n||n.chart().onIntervalChanged().subscribe(null,K),null===(r=N.current)||void 0===r||r.activeChart().resetData(),function(){var e,t,i;null===(e=N.current)||void 0===e||e.chart().onDataLoaded().unsubscribeAll(null),null===(t=N.current)||void 0===t||t.chart().onSymbolChanged().unsubscribeAll(null),null===(i=N.current)||void 0===i||i.chart().onIntervalChanged().unsubscribeAll(null)}}),[g,U,z]),(0,Bt.Z)((function(){var e;N.current&&(null===(e=N.current)||void 0===e||e.remove(),N.current=void 0,null===k||void 0===k||k())})),(0,Nt.Z)((function(){p&&N.current&&(B.current=li({widget:N.current,limitOrders:o,positionOrders:a,lastOrderShapes:B.current,shouldShow:s,onCreateOrderShapesError:V}))}),[p,o,a,s]),(0,Nt.Z)((function(){g&&N.current&&oi({widget:N.current,seriesStyle:l})}),[l]),(0,Nt.Z)((function(){g&&N.current&&function(e){var t=e.widget,i=e.symbol,n=e.interval,r=e.onDone,o=void 0===r?function(){return null}:r;t.setSymbol(i,n,o)}({widget:N.current,symbol:t,interval:i})}),[t,i]),(0,Nt.Z)((function(){g&&N.current&&ri({widget:N.current,theme:n,colorScheme:r,tvDirectoryPath:m,tvThemeDirName:w})}),[n,r]),(0,Nt.Z)((function(){g&&N.current&&N.current.chart().executeActionById("insertIndicator")}),[d]),u().createElement(_.Z,{id:A.container_id,style:{height:"100%"}})},hi=i("GuU3"),ui=i.n(hi),di=i("06eB"),gi=i.n(di);!function(e){e.Up="up",e.Down="down"}(gt||(gt={})),function(e){e.Year="Year",e.Month="Month",e.Week="Week",e.Day="Day",e.Hour="Hour",e.Minute="Minute",e.Second="Second"}(pt||(pt={})),function(e){e.Alphabetic="alphabetic",e.Top="top",e.Hanging="hanging",e.Middle="middle",e.Ideographic="ideographic",e.Bottom="bottom"}(ft||(ft={})),function(e){e.Start="start",e.End="end",e.Center="center",e.Left="left",e.Right="right"}(mt||(mt={})),function(e){e.All="All",e.Marks="Marks",e.Resize="Resize"}(vt||(vt={})),function(e){e.DEFAULT="",e.CANDLE="CANDLE",e.MACD="MACD",e.EMA="EMA",e.MA="MA",e.SMA="SMA",e.MOMENTUM="MOMENTUM",e.ATR="ATR",e.BOLL="BOLL",e.VOL="VOL"}(yt||(yt={})),function(e){e.White="#ffffff",e.Black="#000000",e.Gray="#2d2d2d",e.CandleRed="#E0294A",e.CandleGreen="#2EBD85",e.CandleBlue="#0303F7",e.LightGray="#9a9b9a",e.GrayD="#D8D8D8",e.GrayF="#F2F2F2",e.Gray8="#848E9C",e.GrayE="#EAECEF",e.GrayC="#C1C6CD",e.YellowF="#F0B90B",e.Dark4="#48515D",e.Dark2="#212833",e.Dark2A="#2A2F37",e.Dark1F="#1F2124",e.Blue3="#328DFD",e.Gray0="#FFFFFF",e.Gray5="#FAFAFA",e.Gray10="#F5F5F5",e.Gray50="#E6E8EA",e.Gray100="#CACED3",e.Gray200="#AEB4BC",e.Gray300="#929AA5",e.Gray400="#76808F",e.Gray500="#5E6673",e.Gray600="#474D57",e.Gray700="#2B2F36",e.Gray800="#1E2026",e.Gray900="#14151A",e.Gray1000="#0B0E11",e.Red5="#FEF6F7",e.Red10="#FEF1F2",e.Red50="#FDDDDE",e.Red100="#FDBAB9",e.Red200="#FC9897",e.Red300="#FC6E75",e.Red400="#F84960",e.Red500="#D9304E",e.Red600="#982A42",e.Red700="#5C1929",e.Red800="#35141D",e.Red900="#221113",e.Green5="#F0FFFA",e.Green10="#E2FDF4",e.Green50="#CBF6E8",e.Green100="#9BE8CD",e.Green200="#54E8B4",e.Green300="#2ED191",e.Green400="#02C076",e.Green500="#0F8F62",e.Green600="#1E644E",e.Green700="#143D31",e.Green800="#102821",e.Green900="#0B1915",e.LineColor1="#ff00ff",e.LineColor2="#cc0066",e.LineColor3="#00cccc",e.LineColor4="#2ED191",e.LineColor5="#bd930b",e.LineColor6="#c305c6",e.AreaFillColor1="#e5e5f2",e.AreaFillColor2="#161833"}(xt||(xt={})),function(e){e.LIGHT="light",e.DARK="dark"}(bt||(bt={})),function(e){e.BASE="BASE",e.EXT="EXT"}(_t||(_t={})),function(e){e.Normal="NORMAL",e.Percentage="PERCENTAGE"}(Ct||(Ct={})),function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(wt||(wt={})),function(e){e.Line="LINE",e.Bar="BAR",e.CandleBar="CANDLEBAR",e.Area="AREA",e.Point="POINT",e.CrossLine="CROSSLINE",e.Transcation="TRANSCATION"}(At||(At={})),function(e){e.Width="WIDTH",e.Height="HIGHT",e.All="ALL"}(Lt||(Lt={})),function(e){e.DefaultCursor="DEFAULTCURSOR",e.CrossHairCursor="CROSSHAIRCURSOR",e.TrendLine="TRENDLINE",e.ExtendTrendLine="EXTRENDLINE",e.FibonacciLine="FIBONACCILINE",e.InfoLine="INFOLINE",e.HorizontalLine="HORIZONTALLINE",e.VerticalLine="VERTICALLINE",e.CrossLine="CROSSLINE",e.StraightLine="STRAIGHTLINE",e.ParallelLine="PARALLELLINE",e.Arrow="ARROW",e.UpArrow="UPARROW",e.DownArrow="DOWNARROW",e.LeftArrow="LEFTARROW",e.RightArrow="RIGHTARROW",e.Text="TEXT",e.Rectangle="RECTANGLE",e.RayLine="RAYLINE",e.PriceLine="PRICELINE",e.ArrowLine="ARROWLINE",e.OrderLine="ORDERLINE",e.Delete="DELETE",e.KeepDrawing="KeepDrawing",e.LockDraw="LOCKDRAW",e.ToggleVisible="TOGGLEVISIBLE"}(Et||(Et={})),function(e){e.SOLID="solid",e.DASHED="dashed",e.DOTTED="dotted"}(Vt||(Vt={})),function(e){e.BOLD="bold",e.NORMAL="NORMAL"}(St||(St={})),function(e){e.EDIT="EDIT",e.ADD="ADD",e.REMOVE="REMOVE"}(Mt||(Mt={}));var pi,fi,mi,vi,yi,xi=i("5UAu"),bi=i.n(xi),_i=i("RX+5"),Ci=i.n(_i),wi=((pi={})[pt.Month]=2592e6,pi[pt.Day]=864e5,pi[pt.Hour]=36e5,pi[pt.Minute]=6e4,pi[pt.Second]=1e3,pi),Ai=["click","dblclick","mousedown","mousemove","mouseup","mouseout","wheel","gesturestart","gesturechange","gestureend"],Li=[{type:pt.Month,number:36},{type:pt.Month,number:24},{type:pt.Month,number:12},{type:pt.Month,number:6},{type:pt.Month,number:3},{type:pt.Month,number:1},{type:pt.Day,number:7},{type:pt.Day,number:3},{type:pt.Day,number:1},{type:pt.Hour,number:12},{type:pt.Hour,number:6},{type:pt.Hour,number:4},{type:pt.Hour,number:2},{type:pt.Hour,number:1},{type:pt.Minute,number:30},{type:pt.Minute,number:15},{type:pt.Minute,number:5},{type:pt.Minute,number:3},{type:pt.Minute,number:1}],Ei=new Set(["strokeStyle","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","font","textAlign","textBaseline","direction","lineDashOffset"]),Vi={"line.color1":xt.LineColor1,"line.color2":xt.LineColor2,"line.color3":xt.LineColor3,"line.color4":xt.LineColor4,"line.color5":xt.LineColor5,"line.color6":xt.LineColor6,"area.fillColor1":xt.AreaFillColor1,"area.fillColor2":xt.AreaFillColor2,defaultColor:xt.CandleBlue,"cross.upLabelBorderColor":xt.Green500,"cross.upLabelBgColor":xt.Green600,"cross.downLabelBgColor":xt.Red600,"cross.downLabelBorderColor":xt.Red500},Si=(0,c.__assign)((0,c.__assign)({},Vi),{background:xt.White,"candle.upBarColor":xt.CandleGreen,"candle.downBarColor":xt.CandleRed,"candle.lineColor":"#5a9ad8","frame.borderLineColor":xt.Gray50,"text.defaultColor":xt.Gray600,"axis.tickLineColor":xt.Gray300,"axis.tickTextColor":xt.Gray300,"cross.labelTextColor":xt.White,"cross.borderLineColor":xt.Gray600,"grid.borderLineColor":xt.Gray10,"volume.upBarColor":xt.CandleGreen,"volume.downBarColor":xt.CandleRed,"volume.maLineColor":xt.LineColor1,"volume.upTextColor":xt.Green500,"volume.downTextColor":xt.Red500,"boll.fillColor":xt.AreaFillColor1,"cross.defaultLabelTextColor":xt.Gray600,"cross.defaultLabelBgColor":xt.Gray10,"cross.defaultLabelBorderColor":xt.Gray50}),Mi=(0,c.__assign)((0,c.__assign)({},Si),{background:xt.Gray900,"candle.lineColor":xt.White,"text.defaultColor":xt.Gray200,"frame.borderLineColor":xt.Gray700,"axis.tickLineColor":xt.Gray500,"axis.tickTextColor":xt.Gray500,"cross.borderLineColor":xt.Gray200,"grid.borderLineColor":xt.Gray800,"volume.upBarColor":xt.Green700,"volume.downBarColor":xt.Red700,"boll.fillColor":xt.AreaFillColor2,"cross.defaultLabelTextColor":xt.Gray0,"cross.defaultLabelBgColor":xt.Gray700,"cross.defaultLabelBorderColor":xt.Gray600}),Di=((fi={})[bt.LIGHT]=Si,fi[bt.DARK]=Mi,fi),Ti=function(e){return(Di[e.toLocaleLowerCase()]||{}).background};!function(e){e.MOUSE="MOUSE",e.MOUSE_DOWN="MOUSE_DOWN",e.MOUSE_DOWN_MOVE="MOUSE_DOWN_MOVE",e.MOUSE_DOWN_UP="MOUSE_DOWN_UP",e.MOUSE_MOVE="MOUSE_MOVE",e.MOUSE_CLICK="MOUSE_CLICK"}(mi||(mi={})),function(e){e.DRAW_TREND_LINE="draw-trendline",e.DRAW_EX_TREND_LINE="draw-exTrendLine",e.DRAW_FIB_LINE="draw-fibLine",e.DRAW_INFO_LINE="draw-infoLine",e.DRAW_HORIZONTAL_LINE="draw-horizontalLine",e.DRAW_VERTICAL_LINE="draw-verticalLine",e.DRAW_PARRLLEL_LINE="draw-parallelLine",e.DRAW_RAY_LINE="draw-rayLine",e.DRAW_PRICE_LINE="draw-priceLine",e.DRAW_ARROW_LINE="draw-arrowLine",e.DRAW_UP_ARROW="draw-upArrow",e.DRAW_DOWN_ARROW="draw-downArrow",e.DRAW_LEFT_ARROW="draw-leftArrow",e.DRAW_RIGHT_ARROW="draw-rightArrow",e.DRAW_CROSS_LINE="draw-crossLine",e.DRAW_TEXT="draw-text",e.DRAW_RECTANGLE="draw-rectangle",e.DRAW_DELETE_ALL="draw-deleteAll",e.DRAW_BAR="draw-bar",e.DRAW_DAY="draw-day",e.DRAW_HOUR="draw-hour",e.DRAW_MINUTE="draw-minute",e.DRAW_DEFAULT_CURSOR="draw-defaultCursor",e.DRAW_CROSS_CURSOR="draw-crossCursor",e.DRAW_CONTINUE="draw-continue",e.DRAW_LOCK="draw-lock",e.DRAW_TOGGLE="draw-toggle-visible",e.ANNOTATION_DEFAULT="annotation-back-default",e.ANNOTATION_COLOR="annotation-color",e.ANNOTATION_BACKGROUND="annotation-background",e.ANNOTATION_LINE_WIDTH="annotation-line-width",e.ANNOTATION_LINE_STYLE="annotation-line-style",e.ANNOTATION_LOCK="annotation-lock",e.ANNOTATION_UNLOCK="annotation-unLock",e.ANNOTATION_DELETE="annotation-delete",e.ANNOTATION_FONT_SIZE="annotation-font-size",e.ANNOTATION_FONT_BOLD="annotation-font-bold",e.ANNOTATION_EDIT_TEXT="annotation-edit-text",e.ICON_FOLD="icon-fold",e.ICON_UNFOLD="icon-unfold"}(vi||(vi={})),function(e){e.DEFAULT="default",e.CROSSHAIR="crosshair",e.NSRESIZE="ns-resize",e.EWRESIZE="ew-resize",e.POINTER="pointer"}(yi||(yi={}));var ki,Ii=6e4,Wi={"1m":Ii,"3m":18e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"2h":72e5,"4h":144e5,"6h":216e5,"8h":288e5,"12h":432e5,"1d":864e5,"3d":2592e5,"1w":6048e5,"1M":2592e6},Pi=function(e){return Wi[e]||0},Hi="SETTINGMANAGER";function Ri(e){return"[object String]"===Object.prototype.toString.call(e)}function Bi(e){return"number"===typeof e&&isFinite(e)}function Ni(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Oi(e,t,i){void 0===i&&(i={style:{position:"reletive",width:"100%",height:"100%"}});var n=document.createElement("canvas");n.width=e*en(),n.height=t*en(),i.className&&(n.className=i.className);var r=i.style;return r&&Ki(n,r),n}function Zi(e,t,i){var n=document.createElement(e);return Ki(n,t),i&&n.classList.add(i),n}function Fi(e,t){Object.keys(t).forEach((function(i){var n=t[i];void 0!==n&&Ei.has(i)&&(e[i]=n)}))}function Ki(e,t){void 0===t&&(t={}),e&&e.style&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function zi(e,t){return void 0===t&&(t=1e-5),Math.abs(e)<t}function Ui(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var i=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/),n=i?Math.max(t,Math.max(0,(i[1]||"").length-i[2])):t;return i?e.toFixed(n):""+e}function Yi(e){return Bi(e)?e:e instanceof Date?e.getTime():Ri(e)?e.replace(/\//g,"-"):NaN}function Xi(e,t){void 0===t&&(t="YYYY-MM-DD hh:mm:ss");var i=Yi(e);if(isNaN(i))return t;var n=new Date(i),r={"M+":n.getMonth()+1,"D+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};return/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(""+n.getFullYear()).substr(4-RegExp.$1.length))),Object.keys(r).forEach((function(e){if(new RegExp("("+e+")").test(t)){var i=r[e];t=t.replace(RegExp.$1,1===RegExp.$1.length?i:("00"+i).substr((""+i).length))}})),t}function Gi(e,t){var i,n,r=new Date(e);return t.type===pt.Month?Xi(e,0===r.getMonth()?"YYYY":"MM/DD"):0===r.getHours()?Xi(e,((i={})[pt.Month]="MM/DD",i[pt.Day]="MM/DD",i[pt.Hour]="MM/DD",i[pt.Minute]="hh:mm",i)[t.type]):Xi(e,((n={})[pt.Day]="MM/DD",n[pt.Hour]="hh:00",n[pt.Minute]="hh:mm",n)[t.type])}function ji(e,t){var i="YYYY/MM/DD hh:mm:ss";return t===pt.Month?i="YYYY/MM/01 08:00":t===pt.Day?i="YYYY/MM/DD hh:00":t!==pt.Minute&&t!==pt.Hour||(i="YYYY/MM/DD hh:mm"),Xi(e,i)}function qi(e,t){if(t-e<=7*wi.Day)return 0;var i=new Date(e),n=(0,c.__read)([i.getFullYear(),i.getMonth()],2),r=n[0],o=n[1],a=new Date(t),s=(0,c.__read)([a.getFullYear(),a.getMonth()],2);return 12*(s[0]-r)+s[1]-o+1}function Ji(e,t){if(void 0===t&&(t=2),Math.abs(e)<1e-9&&Math.abs(e)>0)return""+e.toExponential(2);if(Math.abs(e)<1e3)return Qi(e,t);var i,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(i=n.length-1;i>0&&!(Math.abs(e)>=n[i].value);i--);return(e/n[i].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[i].symbol}function Qi(e,t,i){if(void 0===i&&(i=!1),isNaN(e))return"NaN";if(t<=0)return""+Math.floor(e);if(i){var n=(0,c.__read)((""+e).split("."),2),r=n[0],o=n[1];return r+"."+(void 0===o?"":o).slice(0,t).padEnd(t,"0")}return new(Ci())(e).toFixed(t)}function $i(e,t){return void 0===t&&(t=2),Bi(e)?(100*e).toFixed(t)+"%":"0.00%"}function en(){return"undefined"!==typeof ki?ki:"undefined"!==typeof window&&window.devicePixelRatio||1}function tn(){if("undefined"!==typeof navigator){var e=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry/i.test(e)}return!1}function nn(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n&&clearTimeout(n),i&&null===n?e.apply(null,(0,c.__spread)(r)):n=setTimeout((function(){e.apply(null,(0,c.__spread)(r))}),t)}}function rn(e,t){var i;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=+new Date;(!i||o-i>t)&&(e.call.apply(e,(0,c.__spread)([null],n)),i=o)}}function on(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!t.length)return e;var n=t.shift();return void 0===n?e:(Ni(e)&&Ni(n)&&Object.keys(n).forEach((function(t){Ni(n[t])?(e[t]||(e[t]={}),on(e[t],n[t])):e[t]=n[t]})),on.apply(void 0,(0,c.__spread)([e],t)))}function an(e,t){for(var i,n=0,r=e.length;n<r;){var o=t(e[i=Math.floor((r+n)/2)]);if(!Bi(o))throw new Error("binarySearch result is not number: "+o);if(o<0&&(r=i),0===o)return i;o>0&&(n=i+1)}return i=Math.floor((r+n)/2)}function sn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function ln(e,t){void 0===e&&(e=""),void 0===t&&(t=1);var i=t;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){var n="",r="",o="";return 7===e.length?(n=""+parseInt(e.slice(1,3),16),r=""+parseInt(e.slice(3,5),16),o=""+parseInt(e.slice(5,7),16)):4===e.length&&(n=""+parseInt(e.slice(1,2),16),r=""+parseInt(e.slice(2,3),16),o=""+parseInt(e.slice(3,4),16)),"rgba("+n+","+r+","+o+","+i+")"}return e.startsWith("rgb(")?"rgba"+e.slice(3,-1)+","+i+")":e}function cn(e){if(e.startsWith("#"))return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1};var t=e.match(/\(([^)]*)\)/);if(t){var i=t[1],n=(0,c.__read)(i.split(","),4),r=n[0],o=n[1],a=n[2],s=n[3];return{r:parseInt(r,10),g:parseInt(o,10),b:parseInt(a,10),a:void 0===s?1:parseFloat(s)}}return{r:255,g:255,b:255,a:0}}function hn(e,t,i){var n=[],r=(i/=100)*(t/=100),o=e/60,a=r*(1-Math.abs(o%2-1)),s=i-r;switch(parseInt(""+o,10)){case 0:n=[r,a,0];break;case 1:n=[a,r,0];break;case 2:n=[0,r,a];break;case 3:n=[0,a,r];break;case 4:n=[a,0,r];break;case 5:n=[r,0,a]}if(0===n.length)throw new Error("hsv color is not valid");return{r:Math.round(255*(n[0]+s)),g:Math.round(255*(n[1]+s)),b:Math.round(255*(n[2]+s))}}function un(e,t,i,n){var r=hn(e,t,i);return"rgba("+r.r+", "+r.g+", "+r.b+", "+n+")"}function dn(e){var t=e.match(/\(([^)]*)\)/);if(e.startsWith("rgb")&&t){var i=t[1],n=(0,c.__read)(i.split(",").map(Number),3),r=n[0],o=n[1],a=n[2];return"#"+r.toString(16)+o.toString(16)+a.toString(16)}return"#000000"}function gn(e){var t="000000"+(16777215-Number("0x"+e.replace(/#/g,""))).toString(16);return"#"+t.substring(t.length-6,t.length)}var pn=i("LPC+"),fn=i.n(pn),mn=i("Z3AG"),vn=i.n(mn),yn=i("H8sf"),xn=i.n(yn),bn=i("nnRT"),_n=i.n(bn);const Cn=function(){function e(){this.eventListeners={},this.attrListeners={},this.watchMap=new Map}return Object.defineProperty(e.prototype,"devicePixelRatio",{get:function(){return en()},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){return this.config},e.prototype.setAttrs=function(e){var t=this;return Object.keys(e).forEach((function(i){t.setAttr(i,e[i])})),this},e.prototype.getAttr=function(e){return this.config[e]},e.prototype.setAttr=function(e,t){var i=this.config[e];return i===t||(void 0===t?delete this.config[e]:this.config[e]=t,this._fireChangeEvent(e,i,t)),this},e.prototype.on=function(e,t,i,n){var r="string"===typeof t?t:"",o="function"===typeof i?i:t,a="boolean"===typeof n?n:i;if("function"!==typeof o)throw new Error("Must provide event handler");var s=this.eventListeners[e];return s||(this.eventListeners[e]=s=[]),s.some((function(e){return e.name===r&&e.handler===o}))||(a?s.unshift({name:r,handler:o}):s.push({name:r,handler:o})),this},e.prototype.once=function(e,t,i){var n=this,r="string"===typeof t?t:"",o="function"===typeof i?i:t;if("function"!==typeof o)throw new Error("Must provide event handler");var a=function(t){o.call(n,t),n.off(e,r,a)};this.on(e,r,a)},e.prototype.off=function(e,t,i){var n=this;e||Object.keys(this.eventListeners).forEach((function(e){n._off(e)}));var r=e,o="string"===typeof t?t:"";"function"===typeof t&&(i=t),this.eventListeners[r]?this._off(r,o,i):Object.keys(this.eventListeners).forEach((function(e){n._off(e,r,i)}))},e.prototype.fire=function(e,t){void 0===t&&(t={}),t.target=t.target||this,this._fire(e,t)},e.prototype.watch=function(e,t,i){var n=this;void 0===i&&(i=!1),Array.isArray(e)?e.forEach((function(e){return n._registerListener(e,t,i)})):this._registerListener(e,t,i)},e.prototype.unwatch=function(e,t){var i=this;Array.isArray(e)?e.forEach((function(e){return i._unwatch(e,t)})):this._unwatch(e,t)},e.prototype.hasWathedProperty=function(e){return this.watchMap.has(e)},e.prototype.watchProperty=function(e,t){if(this.watchMap.has(e)){var i=this.watchMap.get(e);i.includes(t)||i.push(t)}else this.watchMap.set(e,[t])},e.prototype.setWatchProperty=function(e,t,i,n){void 0===n&&(n={});var r=e[t]!==i;r&&(e[t]=i);var o=this.watchMap.get(t);o&&o.forEach((function(e){r&&(e.textContent=i),Ki(e,n)}))},e.prototype._off=function(e,t,i){var n=this.eventListeners[e];if(n){for(var r=n.slice(0),o=r.length-1;o>=0;o--){var a=r[o],s=a.name,l=a.handler;t&&s!==t||i&&i!==l||r.splice(o,1)}r.length>0?this.eventListeners[e]=r:delete this.eventListeners[e]}},e.prototype._fireChangeEvent=function(e,t,i){var n=this.attrListeners[e];n&&n.forEach((function(e){e.handler({oldVal:t,newVal:i})}))},e.prototype._fire=function(e,t){var i=this;void 0===t&&(t={});var n=this.eventListeners[e];n&&(t.currentTarget=this,t.type=e,n.forEach((function(e){e.handler.call(i,t)})))},e.prototype._registerListener=function(e,t,i){void 0===i&&(i=!1);var n=this.attrListeners[e];n||(this.attrListeners[e]=n=[]),n.some((function(e){return t&&e.handler===t}))||n.push({handler:t}),i&&t.call(this,{oldVal:this.getAttr(e),newVal:this.getAttr(e)})},e.prototype._unwatch=function(e,t){var i=this.attrListeners[e];if(i){var n=i.filter((function(e){return t&&e.handler!==t}));n.length>0?this.attrListeners[e]=n:delete this.attrListeners[e]}},e.defaultConfig={devicePixelRatio:en(),isMobile:tn(),isMouseover:!1,isMousedown:!1},e}();var wn=i("QnTO"),An=i.n(wn),Ln=i("PKEM"),En=i.n(Ln),Vn=i("OgsJ"),Sn=i.n(Vn);const Mn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bound={x:0,y:0,width:0,height:0},t}return(0,c.__extends)(t,e),t.prototype.getBound=function(){return this.bound},t.prototype.setBound=function(e){return this.bound=Object.assign(this.bound,e),this},t.prototype.updateBound=function(e,t){this.bound[e]=t},t.prototype.contain=function(e){return e.x>=this.bound.x&&e.y<=this.bound.y&&e.x-this.bound.x<=this.bound.width&&this.bound.y-e.y<=this.bound.height},t.prototype.transformPointToView=function(e){return{x:e.x-this.bound.x,y:this.bound.y-e.y}},t.prototype.setCanvasTransform=function(e){e.scale(this.devicePixelRatio,this.devicePixelRatio),e.translate(this.bound.x,this.bound.y)},t.prototype.initialCtxs=function(e){var t=this;e.forEach((function(e){e.save(),t.setCanvasTransform(e)}))},t.prototype.restoreCtxs=function(e){e.forEach((function(e){return e.restore()}))},t.prototype.getClearBound=function(e){void 0===e&&(e=0);var t=this.bound,i=t.x,n=t.y,r=t.width,o=t.height;return{x:i*this.devicePixelRatio,y:(n-o)*this.devicePixelRatio,width:r*this.devicePixelRatio,height:(o+e)*this.devicePixelRatio}},t.prototype.createClipBound=function(e,t){void 0===t&&(t=0),Array.isArray(e)?e.forEach(this.createClipBound.bind(this)):(e.beginPath(),e.rect(-.5,-this.bound.height-.5,this.bound.width,this.bound.height+t),e.clip())},t.prototype.afterSetParent=function(){},t.defaultConfig=(0,c.__assign)((0,c.__assign)({},Cn.defaultConfig),{zIndex:0}),t}(Cn);const Dn=function(){function e(e,t){this._min=0,this._max=0,this._min=e,this._max=t}return e.prototype.isInvalid=function(){return!Bi(this._min)||!Bi(this._max)},e.prototype.getMinValue=function(){return this._min},e.prototype.setMinValue=function(e){return this._min=e,this},e.prototype.getMaxValue=function(){return this._max},e.prototype.setMaxValue=function(e){return this._max=e,this},e.prototype.getInterval=function(){return this._max-this._min},e.prototype.getCenter=function(){return(this._max+this._min)/2},e.prototype.clone=function(){return new e(this._min,this._max)},e.prototype.toArray=function(){return[this._min,this._max]},e.prototype.isEqual=function(e){return zi(this._max-e._max)&&zi(this._min-e._min)},e.prototype.merge=function(e){e.isInvalid()||(this.setMaxValue(Math.max(this._max,e.getMaxValue())),this.setMinValue(Math.min(this._min,e.getMinValue())))},e.prototype.scaleAroundCenter=function(e){if(Bi(e)){var t=.5*(this._min+this._max),i=.5*(this._max-this._min)*e;this._min=t-i,this._max=t+i}},e.prototype.scaleAroundPoint=function(e,t){if(Bi(e)&&Bi(t)){var i=e-this.getMinValue(),n=this.getMaxValue()-e;this._min=e-i*t,this._max=e+n*t}},e.prototype.scaleAboveBottom=function(e){if(Bi(e)){var t=this.getInterval();this._max=this._min+t*e}},e.prototype.shift=function(e){return Bi(e)?(this._min+=e,this._max+=e,this):this},e.prototype.contains=function(e,t){return void 0===t&&(t=!0),t?this._min<e.getMinValue()&&this._max>e.getMaxValue():this._min<=e.getMinValue()&&this._max>=e.getMaxValue()},e.prototype.contain=function(e,t){return void 0===t&&(t=!1),t?e>this.getMinValue()&&e<this.getMaxValue():e>=this.getMinValue()&&e<=this.getMaxValue()},e.prototype.sliceArray=function(e,t){var i=this;if(0===e.length)return e;var n=an(e,(function(e){var n=t(e);return i._min<=n?-1:1})),r=an(e,(function(e){var n=t(e);return i._max<n?-1:1}));return e.slice(n,r)},e.prototype.getSliceArrayIndexs=function(e,t){var i=this;return 0===e.length?[0,0]:[an(e,(function(e){var n=t(e);return i._min<=n?-1:1})),an(e,(function(e){var n=t(e);return i._max<n?-1:1}))]},e}();const Tn=function(){function e(e,t,i){void 0===i&&(i=!0),this.unitWidth=0,this._originUnitWidth=30,this._displayUnitWidth=0,this._scaleCoeff=1.2,this._maxScaleCoeff=6,this._minScaleCoeff=1.2,this.domainRange=new Dn(e[0],e[1]),this.coordRange=new Dn(t[0],t[1]),this._displayUnitWidth=this.unitWidth=this._originUnitWidth/this._scaleCoeff,i&&this.domainRange.scaleAroundCenter(this._scaleCoeff)}return e.prototype.setCurrentScaleCoeff=function(e){this._scaleCoeff=e,this.domainRange.scaleAroundCenter(this._scaleCoeff)},e.prototype.getCurrentScaleCoeff=function(){return this._scaleCoeff},e.prototype.setUnitWidth=function(e){this.unitWidth=e},e.prototype.isValid=function(){return this.domainRange.getInterval()>0},e.prototype.getAxisData=function(e){var t=this;void 0===e&&(e=function(e){return e}),(this._displayUnitWidth<=this._originUnitWidth/1.5||this._displayUnitWidth>=1.5*this._originUnitWidth)&&(this._displayUnitWidth=this._originUnitWidth);var i=Math.ceil(this.coordRange.getInterval()/this._originUnitWidth+1e-5);if(i<=0)return[];var n=this.domainRange,r=function(e,t,i){var n,r=[20,30,40,50,60,100],o=(e-t)/i,a=Math.floor(Math.log10(o)-1),s=o/(a=Math.pow(10,a)),l=0;for(l=0;l<r.length;l++)if(r[l]>=s){n=r[l]*a;break}return{max:Math.ceil(e/n)*n,min:Math.floor(t/n)*n,step:n}}(n.getMaxValue(),n.getMinValue(),i),o=r.min,a=r.step;return(0,c.__spread)(Array(i+1)).map((function(i,n){var r=o+n*a;return{p:t.getCoordOfValue(r),v:e(r)}}))},e.prototype.getUnitTimeValue=function(){return this.domainRange.getInterval()/this.coordRange.getInterval()*this.unitWidth},e.prototype.getScaleCoeff=function(){return this._scaleCoeff},e.prototype.getCoordOfValue=function(e){var t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.coordRange.getMinValue()+(e-this.domainRange.getMinValue())/t*i},e.prototype.getValueOfCoord=function(e){var t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.domainRange.getMinValue()+(e-this.coordRange.getMinValue())/i*t},e.prototype.scaleAroundCenter=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAroundCenter(e))},e.prototype.scaleAboveBottom=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))},e}();const kn=function(e){function t(t,i){var n=e.call(this,t,i,!1)||this;return n._scaleCoeff=1,n._maxScaleCoeff=4,n._minScaleCoeff=1,n.unitWidth/=n._scaleCoeff,n}return(0,c.__extends)(t,e),t.prototype.scaleAroundCenter=function(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))},t}(Tn);var In=i("0h6e"),Wn=i.n(In);const Pn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shapes=[],t._annotationSet=new Set,t._isWaiting=!1,t}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this.getRoot().getXAxis()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TitleContainer",{get:function(){return this.root.titleContainer},enumerable:!0,configurable:!0}),t.prototype.getShapes=function(){return this._shapes},t.prototype.getAnnotations=function(){return Array.from(this._annotationSet)},t.prototype.addAnnotation=function(e){!this._annotationSet.has(e)&&this._annotationSet.add(e)},t.prototype.removeAnnotation=function(e){this._annotationSet.delete(e)},t.prototype.eachAnnotations=function(e){for(var t=this.getAnnotations(),i=t.length-1;i>=0;--i){e(t[i])}},t.prototype.addShapes=function(e){e.forEach(this.addShape.bind(this))},t.prototype.addShape=function(e){this._shapes.push(e)},t.prototype.removeShape=function(e){for(var t=this._shapes,i=t.length-1;i>=0;i--)if(t[i]===e){t.splice(i,1);break}},t.prototype.update=function(e){var t=this;void 0===e&&(e=vt.All),this._isWaiting||(this._isWaiting=!0,setTimeout((function(){t.render(e),t._isWaiting=!1}),16))},t.prototype.updateImmediate=function(e){void 0===e&&(e=vt.All),this.render(e)},t.prototype.setParent=function(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e},t.prototype.getParent=function(){return this._parent},t.prototype.getRoot=function(){return this._parent instanceof or?this._parent.getParent():this._parent},t.prototype.getYAxisWidth=function(){return this.getRoot().getAttr("margin").right||0},t.prototype.getXAxisHeight=function(){return this.getRoot().getAttr("xAxis").height||0},t.prototype.updateAnnotations=function(){this._annotationSet.forEach((function(e){e.updateData()}))},t.prototype.plotShapes=function(e){var t=this.getBound();this.updateAnnotations();for(var i=0,n=this._shapes.length;i<n;i++){var r=this._shapes[i],o=r.isVisible((0,c.__assign)((0,c.__assign)({},t),{y:0,x:0}));r.setAttr("isContain",o),o&&r.draw(e)}},t.prototype.transformToGroup=function(e,t,i){return void 0===t&&(t="color"),void 0===i&&(i=!1),i?e.reduce((function(e,t,i,n){var r=n.length,o=e.compare,a="string"===typeof o?t[o]:o(t);return e.group.push(t),e.result[a]||(e.result[a]=[]),e.lastCompare===a&&i!==r-1||(e.result[e.lastCompare||a].push(e.group),e.group=[t]),e.lastCompare=a,e}),{result:{},group:[],compare:t,lastCompare:""}).result:Wn()(e,t)},t.prototype.plotGroupGraphs=function(e,t,i,n,r){var o,a=this;void 0===r&&(r=!1);var s=((o={})[At.Line]=this.renderer.drawPolyline,o[At.Bar]=this.renderer.drawBars,o[At.CandleBar]=this.renderer.drawCandlestickBars,o[At.Point]=this.renderer.drawPoints,o[At.CrossLine]=this.renderer.drawCrossLines,o[At.Area]=this.renderer.drawArea,o)[i];s&&Object.keys(t).forEach((function(i){var o=n(i);Fi(e,o),r?t[i].forEach((function(t){s.call(a,e,t)})):s.call(a,e,t[i])}))},t.prototype.plotChart=function(e,t){var i,n=((i={})[At.Line]=this._plotLineChart,i[At.Bar]=this._plotBarChart,i[At.Point]=this._plotPointChart,i[At.CrossLine]=this._plotCrossChart,i[At.Area]=this._plotAreaChart,i[At.Transcation]=this._plotTranscations,i),r=t.chartType;e.save(),n[r]&&n[r].call(this,e,t),e.restore()},t.prototype._plotTranscations=function(e,t){var i=this,n=t.data,r=void 0===n?[]:n,o=t.color,a=void 0===o?"#cc47ed":o,s=t.colorLong,l=void 0===s?"#2962ff":s,h=this.getRoot(),u=this.getParent(),d=h.getAttr("candlestick").barWeight,g=void 0===d?.8:d,p=this.xAxis.unitWidth*g>9,f=r,m=f.map((function(e){return e.transcations.filter((function(e){return!0===e.long})).map((function(t){return{value:t.price,time:e.time}}))})).reduce((function(e,t){return e.push.apply(e,(0,c.__spread)(t)),e}),[]),v=f.map((function(e){return e.transcations.filter((function(e){return!1===e.long})).map((function(t){return{value:t.price,time:e.time}}))})).reduce((function(e,t){return e.push.apply(e,(0,c.__spread)(t)),e}),[]);Fi(e,{fillStyle:l,strokeStyle:l}),u.getLineDatas(m).forEach((function(t){return i.renderer.drawSmallTriangle(e,t,!0)})),Fi(e,{fillStyle:a,strokeStyle:a}),u.getLineDatas(v).forEach((function(t){return i.renderer.drawSmallTriangle(e,t,!1)})),f.forEach((function(t){var n=u.getPosition({time:t.time,value:t.high}),r=u.getPosition({time:t.time,value:t.low});n.y=-n.y,n.y-=5,r.y=-r.y,r.y+=5,Fi(e,{fillStyle:a,strokeStyle:a}),t.transcations.filter((function(e){return!1===e.long})).forEach((function(t){var r=i.renderer.drawTranscation(e,n,t.long,t.qty,t.signal,p);n.y-=r})),Fi(e,{fillStyle:l,strokeStyle:l}),t.transcations.filter((function(e){return!0===e.long})).forEach((function(t){var n=i.renderer.drawTranscation(e,r,t.long,t.qty,t.signal,p);r.y+=n}))}))},t.prototype._plotLineChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=t.yAxisIndex,s=this.getParent().getLineDatas(n,a);if(r)Fi(e,{strokeStyle:r,lineWidth:o}),this.renderer.drawPolyline(e,s);else{var l=this.transformToGroup(s,"color",!0);this.plotGroupGraphs(e,l,At.Line,(function(e){return{strokeStyle:e,lineWidth:o}}),!0)}},t.prototype._plotBarChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,s=t.zeroBase,l=void 0===s?0:s,c=t.yAxisIndex,h=t.getBarInfos,u=this.getParent().getBarDatas(n,{zeroBase:l,yAxisIndex:c},h);if(r)Fi(e,{fillStyle:r,lineWidth:a}),this.renderer.drawBars(e,u);else{var d=this.transformToGroup(u,"color");this.plotGroupGraphs(e,d,At.Bar,(function(e){return{fillStyle:e,lineWidth:+a||1}}))}},t.prototype._plotPointChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,s=t.yAxisIndex,l=this.getParent().getLineDatas(n,s);if(r)Fi(e,{strokeStyle:r,lineWidth:a}),this.renderer.drawPoints(e,l);else{var c=this.transformToGroup(l,"color");this.plotGroupGraphs(e,c,At.Point,(function(e){return{strokeStyle:e,lineWidth:a}}))}},t.prototype._plotCrossChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.color,o=t.lineWidth,a=void 0===o?1:o,s=t.yAxisIndex,l=this.getParent().getLineDatas(n,s);if(r)Fi(e,{strokeStyle:r,lineWidth:a}),this.renderer.drawCrossLines(e,l);else{var c=this.transformToGroup(l,"color");this.plotGroupGraphs(e,c,At.CrossLine,(function(e){return{strokeStyle:e,lineWidth:a}}))}},t.prototype._plotAreaChart=function(e,t){var i=t.data,n=void 0===i?[]:i,r=t.borderData,o=t.color,a=t.opacity,s=void 0===a?.6:a,l=t.histBase,h=void 0===l?0:l,u=t.yAxisIndex,d=this.getParent(),g=-d.yAxis.getCoordOfValue(h),p=d.getLineDatas(n,u);if(o)if(Fi(e,{fillStyle:o,globalAlpha:s}),r){var f=d.getLineDatas(r,u).reverse();this.renderer.drawArea(e,(0,c.__spread)(p,f))}else{var m={x:p[p.length-1].x,y:g},v={x:p[0].x,y:g};p.push(m,v),this.renderer.drawArea(e,p)}else{var y=this._groupAreaData({pointData:p,borderData:r,histBase:g,yAxisIndex:u});this.plotGroupGraphs(e,y,At.Area,(function(e){return{fillStyle:e,globalAlpha:s}}),!0)}},t.prototype._groupAreaData=function(e){var t=e.pointData,i=void 0===t?[]:t,n=e.borderData,r=e.histBase,o=void 0===r?0:r,a=e.yAxisIndex,s=this.getParent(),l=i.reduce((function(e,t,i,n){var r=n.length,o=t[e.compare];return e.group.j=i,e.result[o]||(e.result[o]=[]),(e.lastCompare&&e.lastCompare!==o||i===r-1)&&(e.result[o].push(e.group),e.group={i:i,j:i}),e.lastCompare=o,e}),{result:{},group:{i:0,j:0},compare:"color",lastCompare:""}).result;if(n){var c=s.getLineDatas(n,a);return Object.keys(l).reduce((function(e,t){var n=l[t];return e[t]=n.map((function(e){var t=e.i,n=e.j,r=i.slice(t,n+1),o=c.slice(t,n+1).reverse();return r.concat(o)})),e}),{})}return Object.keys(l).reduce((function(e,t){var n=l[t];return e[t]=n.map((function(e){var t=e.i,n=e.j,r=i.slice(t,n+1),a=[{x:i[n].x,y:o},{x:i[t].x,y:o}];return r.concat(a)})),e}),{})},t.prototype.drawLogo=function(e){},t.defaultConfig=(0,c.__assign)({},Mn.defaultConfig),t}(Mn);var Hn="GLOBAL_CANVS";const Rn=function(){function e(){}return e.getBufferCanvas=function(t){return e._globalCache.get(t)},e.setBufferCanvas=function(t,i){e._globalCache.set(t,i)},e.drawLine=function(e,t,i,n,r){e.moveTo(t,i),e.lineTo(n,r)},e.drawLines=function(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.x,o=n.y;0===i?e.moveTo(r,o):e.lineTo(r,o)}},e.drawPoints=function(e,t,i){if(i){var n=i.width,r=i.height,o=.5*n,a=.5*r;t.forEach((function(t){var s=t.x,l=t.y;e.drawImage(i,s-o,l-a,n,r)}))}else{t.forEach((function(t){e.strokeRect(t.x-1,t.y-1,2,2)}))}},e.drawCrossLines=function(e,t){var i=this;t.forEach((function(t){var n=t.x,r=t.y;i.drawLine(e,n-2,r,n+2,r),i.drawLine(e,n,r-2,n,r+2)}))},e.drawBackground=function(e,t,i){void 0===t&&(t="#FFFFFF"),i||(i={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e.fillStyle=t,e.fillRect(i.x,i.y,i.width,i.height)},e.clearRect=function(e,t){t||(t={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e.clearRect(t.x,t.y,t.width,t.height)},e.drawText=function(e,t,i,n,r){e.fillText(t,i,n,r)},e.strokeRect=function(e,t,i,n,r){e.strokeRect(t,i,n,r)},e.fillRect=function(e,t,i,n,r){e.fillRect(t,i,n,r)},e.drawCircle=function(e,t,i,n){e.arc(t,i,n,0,2*Math.PI)},e.drawImage=function(e,t,i,n,r,o){r&&o?e.drawImage(t,i,n,r,o):e.drawImage(t,i,n)},e.getCanvas=function(){var e=this.getBufferCanvas(Hn);return e||(e=Zi("canvas",{}),this.setBufferCanvas(Hn,e)),e},e.getContext=function(){var e=this.getCanvas();return this._context||(this._context=e.getContext("2d")),this._context},e.measureTextWidth=function(e){var t=this.getContext();if(!t)return 0;var i=t.measureText(e);return 5*Math.floor(i.width/5)+i.width%5},e._globalCache=new Map,e}();const Bn=function(e){function t(){var t=e.call(this)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(Pn.defaultConfig)),{zIndex:1}),t._isScaling=!1,t._isMouseDown=!1,t.gestureLastScale=1,t.wheelAccumlateX=0,t.wheelAccumlateY=0,t.wheelMode="ready",t.resetWheelMode=function(){t.wheelMode="ready",t.wheelAccumlateX=0,t.wheelAccumlateY=0},t._initEvents(),t}return(0,c.__extends)(t,e),t.prototype._initEvents=function(){this.getAttr("isMobile")||(this.on("mousemove","pan",this.onmousemove),this.on("mouseout",this.onmouseout.bind(this))),this.on("mousewheel",this.onmousewheel.bind(this)),this.on("mousedown",mi.MOUSE_DOWN,this.onmousedown),this.on("gesturestart",this.ongesture.bind(this)),this.on("gesturechange",this.ongesture.bind(this)),this.on("gestureend",this.ongesture.bind(this))},t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext();return((t={})[vt.All]=[n,r],t[vt.Resize]=[n,r],t[vt.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){var t=this.getClearBound();e.forEach((function(e){return Rn.clearRect(e,t)}))},t.prototype.setViewBound=function(){var e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),n=e.getAttr("yAxis").isFloat,r=void 0!==n&&n,o=this.getAttr("isMobile")&&r?0:i.right;this.setBound({x:t.x,y:t.y,width:t.width-o,height:t.height})},t.prototype.getXYTicksData=function(){var e,t,i=this.getRoot(),n=this.getParent(),r=(null===(e=i.getXAxis())||void 0===e?void 0:e.getAxisData())||[],o=(null===(t=n.yAxis)||void 0===t?void 0:t.getAxisData())||[];return{xData:r.map((function(e){return e.p})),yData:o.map((function(e){return e.p}))}},t.prototype.getXLabelByTime=function(e){var t=this.getRoot(),i=t.getXAxis(),n=t.visibleViewHeight;return{point:{x:i.getCoordOfValue(e),y:n-this.bound.y},text:ji(e,i.getOriginTimeScaleType())}},t.prototype.getYLabelByValue=function(e){var t=this.getParent().yAxis.getCoordOfValue(e);return{point:{x:this.bound.width+1,y:-t},text:this.getCrossYAxisLabel(e)}},t.prototype.drawCrossHairByTime=function(e){if(void 0!==e||void 0!==this._lastCursor){var t=this.getRoot(),i=t.getXAxis(),n=e||this._lastCursor,r=n.x,o=n.y;e&&(this._lastCursor=e);var a=i.getValueOfCoord(r);t.setCurrentItemByTime(a);var s=t.getHitContext(),l=t.visibleViewHeight,h=this.getParent().yAxis;this.clearHitContext(),this.initialCtxs([s]),Fi(s,{strokeStyle:t.getColorFromColorTable("cross.borderLineColor")});var u=t.getAttr("margin"),d=this.bound,g=d.y,p=d.width,f={minX:0,minY:u.top-g,maxX:p,maxY:l-g},m=this.getXLabelByTime(a);s.save(),this.renderer.drawCrossLine(s,{x:m.point.x,y:o},f),s.restore();var v=this.getYLabelByValue(h.getValueOfCoord(o)),y=t.getColorFromColorTable("cross.defaultLabelTextColor"),x=t.getColorFromColorTable("cross.defaultLabelBgColor"),b=t.getColorFromColorTable("cross.defaultLabelBorderColor");this.renderer.drawXAxisLabel(s,(0,c.__assign)((0,c.__assign)({},m),{color:y,bgColor:x,borderColor:b}),this.getXAxisHeight()),this.renderer.drawYAxisLabel(s,(0,c.__assign)((0,c.__assign)({},v),{color:y,bgColor:x,borderColor:b}),this.getYAxisWidth()-1,18),this.restoreCtxs([s])}},t.prototype.getCrossYAxisLabel=function(e){var t=this.getParent(),i=2;if(t.panelType===_t.BASE){var n=this.getRoot(),r=n.getAttr("candlestick").dataFormatter;if(i=n.getAttr("precision"),r===Ct.Percentage){var o=Math.max(0,i-2);return(100*e).toFixed(o)+"%"}}return t.formatterValue(e)},t.prototype.clearHitContext=function(){var e=this.getRoot().getHitContext();Rn.clearRect(e)},t.prototype.onmousemove=function(e){var t=this.getRoot(),i=this.getParent();if(t.setCursor({isRecord:!1,weight:100,config:{style:yi.CROSSHAIR}}),i.getAttr("isAbleTriggerMove"))if(e.isDealed)this.clearHitContext();else{var n=this.transformPointToView(e.point),r=n.x,o=n.y,a=t.getAttr("crossHair").show;void 0!==a&&a&&this.drawCrossHairByTime({x:r,y:o})}},t.prototype.ongesture=function(e){if(!this._isMouseDown){var t=e.originEvent;t.preventDefault();var i=this.getRoot(),n=i.getXAxis(),r=this.transformPointToView(e.point).x,o=n.getValueOfCoord(r);"gesturestart"===t.type&&(this.gestureLastScale=t.scale),"gesturechange"===t.type&&(i.zoomByCoeff(this.gestureLastScale/t.scale,o),this.gestureLastScale=t.scale)}},t.prototype.onmouseout=function(){var e=this.getRoot(),t=e.getHitContext();Rn.clearRect(t),this.clearDragEvent(),e.setCurrentItemByTime(e.getMaxTimestamp())},t.prototype.onmousedown=function(e){var t=this;if(!e.isDealed){var i=e.originEvent;if(this._isMouseDown=!0,i.touches&&i.touches.length>1)return this._isScaling=!0,void this.onmousescale(e);var n=this.getRoot(),r=this.getAttr("isMobile"),o=e.point,a=o.x,s=o.y,l=Date.now(),c=0;this.on("mousemove",mi.MOUSE_DOWN_MOVE,(function(i){if(!t._isScaling){var r=i.point,o=r.x,h=r.y;Math.abs(o-e.point.x)>2*Math.abs(h-s)&&(n.shiftTimeLine(a-o),a=o,c=Date.now()-l,e.originEvent.preventDefault(),i.originEvent.preventDefault())}})),this.on("mouseup",mi.MOUSE_DOWN_UP,(function(i){if(t.getRoot().endShiftTime(),t._isMouseDown=!1,t.clearDragEvent(),r){var n=i.point.x-e.point.x,o=i.point.y-e.point.y;Math.abs(n)>Math.abs(o)&&t._keepScroll(n,c/1e3)}}))}},t.prototype.onmousescale=function(e){var t=this,i=this.getRoot(),n=e.clientX,r=e.clientX1,o=(0,c.__read)([n,r],2),a=o[0],s=o[1];this.on("mousemove",mi.MOUSE_DOWN_MOVE,(function(n){var r=n.clientX,o=n.clientX1;if(void 0===o)t.clearDragEvent();else{var l=300*Math.log10(Math.abs((r-o)/(a-s)));if(!Number.isFinite(l))return;l>1?i.zoomIn(l):i.zoomOut(l),a=r,s=o}n.originEvent.preventDefault(),e.originEvent.preventDefault()})),this.on("mouseup",mi.MOUSE_DOWN_UP,(function(){t.clearDragEvent(),i.endShiftTime()}))},t.prototype.wheelEventType=function(e){var t=e.deltaX,i=e.deltaY;return-3*i===e.wheelDeltaY||Math.abs(t)>=Math.abs(i)?"touchpad":"mousewheel"},t.prototype.onmousewheel=function(e){var t=e.originEvent,i=e.point,n=t,r=n.deltaY,o=n.deltaX,a=n.wheelDeltaY,s=n.ctrlKey,l=this.transformPointToView(i),c=l.x,h=l.y,u=this.getRoot(),d=this.wheelEventType(t);if("ready"!==this.wheelMode||s||(this.wheelAccumlateX+=o,this.wheelAccumlateY+=r,Math.abs(this.wheelAccumlateX)>10?this.wheelMode="x":Math.abs(this.wheelAccumlateY)>10&&(this.wheelMode="y")),"y"===this.wheelMode||s||"mousewheel"===d)if("mousewheel"===d){var g=r?-r/3:a/12;u.zoomAroundRight(g)}else u.zoomAroundRight(s?r:-r);"x"===this.wheelMode&&u.shiftTimeLine(o),this.wheelResetTimer&&window.clearTimeout(this.wheelResetTimer),s&&this.resetWheelMode(),this.wheelResetTimer=window.setTimeout(this.resetWheelMode,20);var p=u.getAttr("crossHair").show;void 0!==p&&p&&!this.getAttr("isMobile")&&this.drawCrossHairByTime({x:c,y:h}),t.preventDefault()},t.prototype.clearDragEvent=function(){this.off("mousemove",mi.MOUSE_DOWN_MOVE),this.off("mouseup",mi.MOUSE_DOWN_UP),this._isScaling=!1},t.prototype._keepScroll=function(e,t){var i,n=this.getRoot(),r=Math.abs(e/t),o=Math.abs(r/1e3),a=Math.abs(e)-1e3*t*t*.5,s=Date.now(),l=0,c=function(){var t=(Date.now()-s)/1e3,r=function(e,t,i,n){var r=e/n;return t+i*(-r*r+2*r)}(t,0,a,o),h=5*Math.abs(l-r);l=r,t>o?cancelAnimationFrame(i):(0!==h&&n.shiftTimeLine(e>0?-h:h),i=requestAnimationFrame(c))};c()},t}(Pn);const Nn=function(){function e(){this.drawCrossLine=function(e,t,i){e.setLineDash([4,4]),e.beginPath();var n=i.minX,r=i.minY,o=i.maxX,a=i.maxY;Rn.drawLine(e,n,-t.y,o,-t.y),Rn.drawLine(e,t.x,r,t.x,a),e.stroke()},this.drawXAxisLabel=function(e,t,i){var n=Math.ceil(e.measureText(t.text).width)+16,r=t.point,o=r.x,a=r.y,s={x:o-n/2,y:a,width:n,height:i};Rn.drawBackground(e,t.bgColor,s),e.textAlign=mt.Center,e.textBaseline=ft.Middle,e.fillStyle=t.color,e.strokeStyle=t.color,Rn.drawText(e,t.text,o,a+.5*i),e.beginPath(),Rn.drawLine(e,o,a,o,a+5),e.stroke()},this.drawYAxisLabel=function(t,i,n,r){var o=e.calculateTextWidth(i.text),a=i.point,s=a.x,l=a.y;t.beginPath(),t.strokeStyle=i.borderColor,t.fillStyle=i.bgColor;var c=[{x:s,y:l-.5*r},{x:s+n,y:l-.5*r},{x:s+n,y:l+.5*r},{x:s,y:l+.5*r}];Rn.drawLines(t,c),t.closePath(),t.fill(),t.stroke(),t.textAlign=mt.Left,t.textBaseline=ft.Middle,t.fillStyle=i.color,Rn.drawText(t,i.text,s+.5*(n-o),l)},this.drawCandlestickBars=function(e,t){e.beginPath(),t.forEach((function(t){var i=t.x,n=t.y,r=t.width,o=t.height,a=t.lowY,s=t.highY,l=i-.5*r;r<2?Rn.drawLine(e,i,-a,i,-s):(Rn.fillRect(e,l,-n,r,o),Rn.drawLine(e,i,-s,i,-a))})),e.stroke()},this.drawPolyline=function(e,t){e.beginPath(),Rn.drawLines(e,t),e.stroke()},this.drawGrid=function(e,t,i,n){void 0===i&&(i=[]);var r=t.width,o=t.height;e.beginPath(),n.forEach((function(t){Rn.drawLine(e,0,-t,r,-t)})),i.forEach((function(t){Rn.drawLine(e,t,0,t,-o)})),e.stroke()},this.drawPaths=function(e,t){e.beginPath(),Rn.drawLines(e,t),e.fill(),e.stroke()},this.drawPoints=function(e,t,i){i?Rn.drawPoints(e,t,i):(e.beginPath(),Rn.drawPoints(e,t,i),e.stroke())},this.drawCrossLines=function(e,t){e.beginPath(),Rn.drawCrossLines(e,t),e.stroke()},this.drawBars=function(e,t){t.forEach((function(t){Rn.fillRect(e,t.x,t.y,t.width,t.height)}))},this.drawMultiLines=function(e,t){e.beginPath(),t.forEach((function(t){Rn.drawLines(e,t)})),e.stroke()},this.drawArea=function(e,t){e.beginPath(),Rn.drawLines(e,t),e.closePath(),e.fill()},this.drawTitle=function(e,t,i){Rn.drawText(e,t,i.x,i.y)}}return e.calculateTextWidth=function(t,i,n){void 0===t&&(t=""),void 0===i&&(i=10),void 0===n&&(n=1);var r=e.getCacheCanvas(),o=i+"px sans-serif";r.font=o;var a=Math.round(r.measureText(t.trim()).width);return n>1?Math.round(a/n)*n:a},e.drawImage=function(e,t,i,n){var r=i.x+.5*i.width-.5*n.width,o=.5*i.height+.5*n.height;e.drawImage(t,r,-o,n.width,n.height)},e.prototype.drawSmallTriangle=function(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(-1,1),e.moveTo(1,0),e.lineTo(5,-5),e.lineTo(5,5),e.lineTo(1,0),e.fill(),e.closePath(),e.restore()},e.prototype.drawArrow=function(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(1,-1),e.rect(-4,0,9,2),e.moveTo(.5,2),e.lineTo(5,7),e.lineTo(3,7),e.lineTo(3,12),e.lineTo(-2,12),e.lineTo(-2,7),e.lineTo(-4,7),e.lineTo(.5,2),e.fill(),e.closePath(),e.restore()},e.prototype.drawTranscation=function(e,t,i,n,r,o){if(e.save(),e.translate(Math.round(t.x),Math.round(t.y)),this.drawArrow(e,{x:0,y:0},!i),o)if(i){e.translate(0,12),e.textAlign="center",e.textBaseline="top";var a=e.measureText(r);e.fillText(r,0,0),e.translate(0,a.actualBoundingBoxDescent+2),e.fillText("+"+n,0,0)}else{e.translate(0,-12),e.textAlign="center",e.textBaseline="bottom";a=e.measureText(r);e.fillText(r,0,0),e.translate(0,-a.actualBoundingBoxAscent-2),e.fillText("-"+n,0,0)}return e.restore(),o?36:14},e.prototype.drawImage=function(e,t,i,n){var r=i.x+.5*i.width-.5*n.width,o=.5*i.height+.5*n.height;e.drawImage(t,r,-o,n.width,n.height)},e.getCacheCanvas=function(){var e,t;return function(){return e||void 0===document||(e=document.createElement("canvas"),t=e.getContext("2d")),t}}(),e}();const On=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.draw=function(){},t}(Nn);var Zn=new Map;function Fn(e,t){e.classList.contains(t)||e.classList.add(t)}function Kn(e,t){e.classList&&e.classList.remove(t)}var zn=function(){var e,t,i,n=["Up","Down","Left","Right"],r=function(e){i&&clearTimeout(i),i=e};return function(o,a){if(!e){e=Zi("div",{display:"none"},"tooltip-wrap"),t=Zi("div",{},"tooltip-text");var s=Zi("div",{},"tooltip-arrow");e.append.apply(e,(0,c.__spread)([t,s]))}return a&&(n.forEach((function(t){return t!==a&&Kn(e,t.toLowerCase())})),Fn(e,a.toLowerCase())),o&&(t.innerText=o),{tooltip:e,timer:i,setTimer:r}}}();function Un(e,t){void 0===t&&(t="Up"),e.addEventListener("mouseenter",(function(){var i=e.getAttribute("tooltip")||"",n=zn(i,t),r=n.tooltip,o=n.timer;o&&clearTimeout(o),r.parentNode!==e&&e.append(r),Ki(r,{display:"block"})})),e.addEventListener("mouseleave",(function(){var e=zn("",t),i=e.tooltip;(0,e.setTimer)(setTimeout((function(){Ki(i,{display:"none"})}),100))}))}function Yn(e){if(Zn.has(e)){var t=Zn.get(e).image;return new Promise((function(e){t.complete?e(t):t.onload=function(){e(t)}}))}return new Promise((function(t){"undefined"===typeof window&&t();var i=new Image,n=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));i.src=n,i.onload=function(){t(i)},Zn.set(e,{url:n,image:i})}))}function Xn(e){if(Zn.has(e))return Zn.get(e).url||"";if("undefined"===typeof window)return"";var t=new Image,i=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));return t.src=i,Zn.set(e,{url:i,image:t}),i}var Gn='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 5V7H10V21H8V7H3V5H15Z" fill="#848E9C"/>\n<rect width="2" height="20" transform="matrix(1 0 0 -1 18 22)" fill="#848E9C"/>\n</svg>\n',jn='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V7H15V18H13Z" fill="#848E9C"/>\n<path d="M9 7V18H11V7H9Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 3V1H13V3H22V5H20V22H4V5H2V3H11ZM6 5V20H18V5H6Z" fill="#848E9C"/>\n</svg>\n',qn='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM9 5.00002L7.00006 3.00008C5.89547 1.8955 4.10456 1.89547 2.99996 3.00007L1 5.00002L2.99996 7.0001C4.10456 8.1047 5.89547 8.10466 7.00006 7.00008L9 5.00002ZM3.47134 3.47147C4.31559 2.62723 5.68439 2.62725 6.52864 3.47149L8.05717 5.00002L6.52864 6.52867C5.68439 7.37291 4.31559 7.37293 3.47134 6.52869L1.94279 5.00002L3.47134 3.47147ZM5.83331 5.00008C5.83331 5.46032 5.46022 5.83341 4.99998 5.83341C4.53974 5.83341 4.16665 5.46032 4.16665 5.00008C4.16665 4.53984 4.53974 4.16675 4.99998 4.16675C5.46022 4.16675 5.83331 4.53984 5.83331 5.00008ZM4.99998 6.50008C5.82841 6.50008 6.49998 5.82851 6.49998 5.00008C6.49998 4.17165 5.82841 3.50008 4.99998 3.50008C4.17155 3.50008 3.49998 4.17165 3.49998 5.00008C3.49998 5.82851 4.17155 6.50008 4.99998 6.50008Z" fill="#3A3F46"/>\n</svg>\n',Jn='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM7.66663 8.13789L1.86194 2.3332L2.33334 1.86179L3.2494 2.77785C4.35955 1.90096 5.97521 1.97497 7.00006 2.99982L9 4.99976L7.2357 6.76415L8.13803 7.66648L7.66663 8.13789ZM6.76429 6.29274L3.72511 3.25356C4.57079 2.63457 5.76455 2.70714 6.52864 3.47122L8.05717 4.99976L6.76429 6.29274ZM5.64849 7.0625L6.16433 7.57834C5.12306 8.0483 3.8556 7.85548 2.99996 6.99983L1 4.99976L2.29287 3.70688L2.76427 4.17828L1.94279 4.99976L3.47134 6.52843C4.06046 7.11754 4.905 7.29556 5.64849 7.0625Z" fill="#3A3F46"/>\n</svg>\n',Qn='<svg width="6" height="12" viewBox="0 0 6 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect y="0.5" width="2" height="2" fill="#848E9C"/>\n<rect y="5.5" width="2" height="2" fill="#848E9C"/>\n<rect y="10.5" width="2" height="2" fill="#848E9C"/>\n<rect x="4" y="0.5" width="2" height="2" fill="#848E9C"/>\n<rect x="4" y="5.5" width="2" height="2" fill="#848E9C"/>\n<rect x="4" y="10.5" width="2" height="2" fill="#848E9C"/>\n</svg>\n',$n='<svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M6.7 6.5L10 9.8L9.3 10.5L6 7.2L2.7 10.5L2 9.8L5.3 6.5L2 3.2L2.7 2.5L6 5.8L9.3 2.5L10 3.2L6.7 6.5Z" fill="#848E9C"/>\n</svg>\n';const er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderer=new On,t.checkData=rn((function(e){var i=t.getRoot(),n=i.getXAxis().getUnitTimeValue(),r=e.length;if(r>2&&n<864e5&&e[r-1].time>=i.lastDataTime+n)for(var o=r-1;o>=1;o--){var a=e[o-1].time,s=e[o].time;if(s<=i.lastDataTime+n)return;s-a>=2*n&&i.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:e[o-1],nextItem:e[o]}}})}}),500),t}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),t.prototype.render=function(e){var t=this.getRoot(),i=t.getAttr("grid"),n=t.getContext(),r=t.getMarkContext(),o=this.getCtxsByDrawMode(e);if(this.clear(o),this.initialCtxs(o),this.createClipBound(o),e===vt.All||e===vt.Resize){if(i.show){var a=this.getXYTicksData(),s=a.xData,l=a.yData;Fi(n,{strokeStyle:t.getColorFromColorTable("grid.borderLineColor"),lineWidth:1}),this.renderer.drawGrid(n,this.bound,s,l)}this._renderMainIndicatorCharts(n)}t.getAttr("annotationVisible")&&this.plotShapes(r),this.restoreCtxs(o)},t.prototype.drawMainSeries=function(e,t){var i=this.getRoot();if(t===At.Line)this.plotChart(e,{chartType:At.Line,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("candle.lineColor")}),this.drawMaxAndMinArrows(e,!0);else if(t===At.Area)this.plotChart(e,{chartType:At.Area,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("line.color3"),opacity:.4}),this.drawMaxAndMinArrows(e,!0);else{var n=this.transformToGroup(this.getVisibleBars());this.plotGroupGraphs(e,n,At.CandleBar,(function(e){return{fillStyle:e,strokeStyle:e}})),this.drawMaxAndMinArrows(e,!1)}},t.prototype.drawLogo=function(){var e,t=this,i=this.getRoot(),n=(null===(e=i.getAttr("theme"))||void 0===e?void 0:e.toLowerCase())===bt.LIGHT,r=i.getFrameContext();r&&Yn(n?'<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#1E2329"/>\n</svg>\n':'<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#EAECEF"/>\n</svg>\n').then((function(e){Rn.clearRect(r),t.initialCtxs([r]),r.globalAlpha=.04;var i=t.getAttr("isMobile")?{width:150,height:30}:{width:300,height:60};t.renderer.drawImage(r,e,t.getBound(),i),r.restore()}))},t.prototype.drawMaxAndMinArrows=function(e,t){void 0===t&&(t=!1);var i=this.getRoot().getColorFromColorTable("text.defaultColor");Fi(e,{fillStyle:i,strokeStyle:i}),e.beginPath();var n=(0,c.__read)(this.getMaxMinItems(t),2),r=n[0],o=n[1];r&&o&&(this.drawArrowText(e,r,-1),this.drawArrowText(e,o,1))},t.prototype.drawArrowText=function(e,t,i){var n=this.getParent();Fi(e,{textAlign:mt.Right,textBaseline:ft.Middle});var r=this.getPosition(t.time,t.value),o=n.formatterValue(t.value),a=Rn.measureTextWidth(o),s=-3,l=-12;this.isOverlapLeft(r.x+l-a+s)&&(Fi(e,{textAlign:mt.Left}),s=3,l=12),Rn.drawLine(e,r.x,r.y+i,r.x+l,r.y+i),Rn.drawText(e,o,r.x+l+s,r.y+i),e.stroke()},t.prototype.getBarPosition=function(e){var t=this.getParent().yAxis,i=e.time,n=e.low,r=e.high,o=e.open,a=e.close;return{x:this.xAxis.getCoordOfValue(i),lowY:t.getCoordOfValue(n),highY:t.getCoordOfValue(r),openY:t.getCoordOfValue(o),closeY:t.getCoordOfValue(a)}},t.prototype.getPosition=function(e,t){return{x:this.xAxis.getCoordOfValue(e),y:-this.parent.yAxis.getCoordOfValue(t)}},t.prototype.getLineData=function(){var e=this.getRoot().getVisibleSeriesData();return this.checkData(e),e.map((function(e){return{time:e.time,value:e.close}}))},t.prototype.getVisibleBars=function(){var e=this,t=this.getRoot(),i=t.getVisibleSeriesData();this.checkData(i);var n,r=t.getAttr("candlestick").barWeight,o=void 0===r?.8:r,a=t.getColorFromColorTable("candle.upBarColor"),s=t.getColorFromColorTable("candle.downBarColor"),l=this.xAxis.unitWidth*o,h=t.getXAxis().getUnitTimeValue()<864e5;return i.map((function(r,o){var u=e.getBarPosition(r),d=u.x,g=u.lowY,p=u.highY,f=u.openY,m=u.closeY;return h&&o>0&&!zi(d-n-e.xAxis.unitWidth,1e-5)&&t.fire("dispatchErrorData",{data:{type:"renderError",payload:{prevItem:i[o-1],nextItem:r}}}),n=d,(0,c.__assign)((0,c.__assign)({},r),{x:d,y:Math.max(f,m),width:l,height:Math.max(1,Math.abs(m-f)),openY:f,closeY:m,highY:p,lowY:g,color:r.close>=r.open?a:s})}))},t.prototype.getMaxMinItems=function(e){void 0===e&&(e=!1);var t=this.getRoot(),i=this.xAxis.domainRange,n=t.getVisibleSeriesData().filter((function(e){return i.contain(e.time)}));if(0===n.length)return[];for(var r={time:0,value:-Number.MAX_SAFE_INTEGER},o={time:0,value:Number.MAX_SAFE_INTEGER},a=0;a<n.length;a++){var s=n[a],l=s.time,c=s.close,h=s.high,u=s.low;e?(c>r.value&&(r={time:l,value:c}),c<o.value&&(o={time:l,value:c})):(h>r.value&&(r={time:l,value:h}),u<o.value&&(o={time:l,value:u}))}return[r,o]},t.prototype.isOverlapLeft=function(e){return e<this.xAxis.coordRange.getMinValue()},t.prototype._renderMainIndicatorCharts=function(e){var t,i=this.getRoot().getAttr("candlestick"),n=this.getParent().getVisibleResults(),r=[],o=[];n.forEach((function(e){var t=(0,c.__read)(function(e,t){for(var i=[],n=[],r=0,o=e.length;r<o;r++)t(e[r])?i.push(e[r]):n.push(e[r]);return[i,n]}(e,(function(e){return e.zIndex<0})),2),i=t[0],n=t[1];r.push.apply(r,(0,c.__spread)(i)),o.push.apply(o,(0,c.__spread)(n))})),r.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),r.forEach(this.plotChart.bind(this,e)),this.drawMainSeries(e,null===(t=i.type)||void 0===t?void 0:t.toUpperCase()),o.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),o.forEach(this.plotChart.bind(this,e))},t}(Bn);const tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawTicks=function(e,t,i){var n=i.textMargin,r=i.tickWidth,o=i.precision,a=i.boudHeight,s=i.textHeight;e.beginPath(),t.forEach((function(t){var i=t.p,l=t.v;Rn.drawLine(e,.5,-i-.5,r,-i-.5);var c=o>=0&&Bi(l)?l.toFixed(o):""+l;i>a-.5*s?i=a-.5*s:i<.5*s&&(i=.5*s),e.fillText(c,r+n,-i)})),e.stroke()},t}return(0,c.__extends)(t,e),t.prototype.draw=function(e,t){e.beginPath(),Rn.drawLine(e,0,0,0,-t.height),e.stroke()},t}(Nn);const ir=function(e){function t(){var t=e.call(this)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(Pn.defaultConfig)),{zIndex:1e3}),t.renderer=new tr,t.on("mousemove",t.onmousemove),t.on("mousewheel",t.onmousewheel),t.on("mouseout",t.onmouseout),t}return(0,c.__extends)(t,e),t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext();return((t={})[vt.All]=[n,r],t[vt.Resize]=[n,r],t[vt.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){var t=this.getParent(),i=this.getClearBound(t.isLastPanel?6:0);e.forEach((function(e){return Rn.clearRect(e,i)}))},t.prototype.render=function(e){var t=this.getRoot(),i=this.getParent(),n=t.getConfig().tick,r=n.width,o=void 0===r?5:r,a=n.textMargin,s=void 0===a?5:a,l=t.getContext(),c=t.getMarkContext(),h=this.getCtxsByDrawMode(e);if(this.clear(h),this.initialCtxs(h),e===vt.All||e===vt.Resize){this.createClipBound(l,i.isLastPanel?6:0),Fi(l,{strokeStyle:t.getColorFromColorTable("axis.tickLineColor"),fillStyle:t.getColorFromColorTable("axis.tickTextColor"),textBaseline:ft.Middle,textAlign:mt.Left});var u={tickWidth:o,textMargin:s,precision:-1,boudHeight:this.getBound().height,textHeight:10};i.panelType===_t.BASE&&(u.precision=t.getAttr("precision")),this.renderer.drawTicks(l,this.getTicksData(),u),Fi(l,{strokeStyle:t.getColorFromColorTable("frame.borderLineColor")}),this.renderer.draw(l,this.bound)}this.createClipBound(c),t.getAttr("annotationVisible")&&this.plotShapes(c),this.drawLastUpdateItemShape(c),this.restoreCtxs(h)},t.prototype.drawLastUpdateItemShape=function(e){var t=this.getParent();if(t.panelType===_t.BASE){var i=this.getRoot(),n=i.getVisibleSeriesData(),r=n[n.length-1];if(r){var o=t.yAxis,a=r.close,s=r.open,l=o.getCoordOfValue(a);if(l<0||l>o.coordRange.getMaxValue())return;var h=(0,c.__read)(a>=s?[i.getColorFromColorTable("cross.upLabelBgColor"),i.getColorFromColorTable("cross.upLabelBorderColor")]:[i.getColorFromColorTable("cross.downLabelBgColor"),i.getColorFromColorTable("cross.downLabelBorderColor")],2),u=h[0],d=h[1],g={point:{x:1,y:-l},text:""+t.formatterValue(a),color:i.getColorFromColorTable("cross.labelTextColor"),bgColor:u,borderColor:d};this.renderer.drawYAxisLabel(e,g,this.getYAxisWidth()-1,18)}}},t.prototype.setViewBound=function(){var e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),n=t.x,r=t.y,o=t.width,a=t.height;this.setBound({x:n+o-i.right,y:r,width:i.right,height:a})},t.prototype.getTicksData=function(){var e=this.getParent(),t=e.yAxis,i=this.bound.height;if(!t)return[];var n={};return t.getAxisData().map((function(t){var i=t.p,r=t.v,o=e.formatterValue(+r);return function(e,t,i){if(t){var n=Ci()(i),r=Ci()(e),o=Ci()(t);return Ci()(o).minus(n).abs().gte(r.minus(n).abs())}return!0}(+r,n[o],+o)&&(n[o]=+r),{p:i,fv:o,v:r}})).reduce((function(e,t){var r=t.p,o=t.v,a=t.fv;return n[a]===o&&r>=0&&r<=i&&e.push({p:r,v:a}),e}),[])},t.prototype.onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:yi.NSRESIZE},weight:1e3,isRecord:!1})},t.prototype.onmouseout=function(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype.onmousewheel=function(e){var t=this.getParent();if(t.panelType!==_t.EXT){var i=e.originEvent,n=i.deltaY,r=t.yAxis,o=r.getCurrentScaleCoeff(),a=n>0?1.02:1/1.02;r.scaleAroundCenter(a),zi(o-r.getCurrentScaleCoeff())||t.update(),i.preventDefault()}},t}(Pn);const nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawCloseIcon=function(e,t){var i=t.x,n=t.y,r=t.width,o=t.height;e.beginPath(),Rn.strokeRect(e,i,-(n+o),r,o),Rn.drawLine(e,i+3,-(n+3),i+r-3,-(n+o-3)),Rn.drawLine(e,i+3,-(n+o-3),i+r-3,-(n+3)),e.stroke()},t}return(0,c.__extends)(t,e),t.prototype.draw=function(e,t){var i=t.width,n=t.height;Rn.drawLine(e,0,-n,i,-n),e.stroke()},t}(Nn);const rr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderer=new nr,t.weight=.3,t}return(0,c.__extends)(t,e),t.prototype.render=function(e){var t,i=this.getRoot(),n=this.getParent().getAttr("indicatorType"),r=i.getContext(),o=this.getCtxsByDrawMode(e);if(this.clear(o),null===(t=i.getIndicatorViewByName(n))||void 0===t?void 0:t.visible){var a=i.getAttr("grid")||{};if(this.initialCtxs(o),this.createClipBound(r),a.show){Fi(r,{strokeStyle:i.getColorFromColorTable("grid.borderLineColor")});var s=this.getXYTicksData(),l=s.xData,c=s.yData;this.renderer.drawGrid(r,this.bound,l,c)}this._renderIndicatorCharts(r),this.restoreCtxs(o)}},t.prototype._renderIndicatorCharts=function(e){var t=this.getParent(),i=t.getVisibleChartData(t.getPanelId());i.sort((function(e,t){return(e.zIndex||0)-(t.zIndex||0)})),i.forEach(this.plotChart.bind(this,e))},t}(Bn);const or=function(e){function t(t,i){var n=e.call(this)||this;return n.widgets=[],n._isWaiting=!1,n._weight=0,n._result=new Map,n._isFirstWatch=!0,n._storageData={annotations:[],indicators:[]},n._supplyYAxisMap=new Map,n._isFirstRender=!0,n.updateChartData=nn((function(e,t){var i;void 0===e&&(e=0);var r=n.getAttr("indicatorType"),o=n.getPanelId(),a=n.getParent(),s=a.indicatorViews,l=n.getSeriesData();if(r!==yt.CANDLE){var c=a.getIndicatorViewByName(o);if(!c||e>0&&c.isDiffSource)return;var h=c.params,u=a.getIndicatorHelperByName(o);if(void 0===u)return;if(e>0&&void 0!==u.updateResult){var d=n._result.get(o);if(d&&(null===(i=l[e])||void 0===i?void 0:i.time))return void u.updateResult(e,d.result,h,l[e])}try{u.getResult(l,h,(function(e){n._result.set(r,{result:e,params:h,styles:c.styles}),null===t||void 0===t||t()}))}catch(p){console.error(p.message)}}else{var g=s.filter((function(e){var t=e.isHistBase,i=e.id;return t&&a.getIndicatorViewByName(i)&&a.getIndicatorHelperByName(i)})).length;s.forEach((function(i){var r,o=i.id,s=i.isHistBase,c=i.params;if(s){var h=a.getIndicatorViewByName(o);if(h){var u=a.getIndicatorHelperByName(o);if(u){if(e>0&&void 0!==u.updateResult){var d=n._result.get(o);if(d&&(null===(r=l[e])||void 0===r?void 0:r.time))return void u.updateResult(e,d.result,c,l[e])}try{u.getResult(l,c,(function(e){g--,n._result.set(o,{result:e,params:c,styles:h.styles}),0===g&&(null===t||void 0===t||t())}))}catch(p){console.error("indicator get Result occured error: ",p.message)}}}}}))}}),100,!0),n.watchTheme=function(e){n.drawLogo()},n.config=(0,c.__assign)((0,c.__assign)((0,c.__assign)({},Sn()(Mn.defaultConfig)),{iconSize:10,margin:5,isShowClose:!1,isShowSetting:!0,titleInfo:{},isFormatNum:!1,isAbleTriggerMove:!0,isDestryed:!1}),i),n._panelType=t,n._weight=n.panelType===_t.BASE?.75:.25,n._initWidgets(),n}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"yAxis",{get:function(){return this._yAxis||(0,c.__spread)(this._supplyYAxisMap.values())[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panelType",{get:function(){return this._panelType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this._weight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this.getParent().getXAxis()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartResult",{get:function(){var e=this.getAttr("indicatorType"),t=(this._result.get(e)||{}).result;return void 0===t?[]:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"results",{get:function(){return Array.from(this._result.values()).map((function(e){var t=e.result;return void 0===t?[]:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleContainer",{get:function(){return this._titleContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainPane",{get:function(){return this._mainWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisPane",{get:function(){return this._axisWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeAxisPane",{get:function(){return this.getParent().getTimeAxisWidget()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLastPanel",{get:function(){var e=this.getParent().getIPanels();return e[e.length-1]===this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDiffPanel",{get:function(){var e=this.getParent().getIndicatorHelperByName(this.getPanelId());return!!(null===e||void 0===e?void 0:e.defaultProps.isDiffSource)},enumerable:!0,configurable:!0}),t.prototype.setYAxis=function(){var e=this;this._supplyYAxisMap.clear();var t=this._getYExtent(),i=t.default,n=(0,c.__rest)(t,["default"]),r=this._panelType===_t.BASE?25:10;i.isScaleCenter?this._yAxis=new Tn([i.min,i.max],[0,this.bound.height-r]):this._yAxis=new kn([0,i.max],[0,this.bound.height-r]),Object.keys(n).forEach((function(t){var i=n[t],o=i.max,a=i.min,s=i.isScaleCenter?new Tn([a,o],[0,e.bound.height-r]):new kn([0,o],[0,e.bound.height-r]);e._supplyYAxisMap.set(t,s)}))},t.prototype.getPanelId=function(){return this.getAttr("id")},t.prototype.getYAxisByIndex=function(e){return this._supplyYAxisMap.get(e)},t.prototype.getAnnotations=function(){return this._mainWidget.getAnnotations()},t.prototype.getSavedData=function(){return this._storageData},t.prototype.save=function(){for(var e=this.getAnnotations(),t=[],i=0,n=e.length;i<n;i++){e[i].getAttr("isNeedStore")&&t.push(e[i].getDescription())}this._storageData.annotations=t,this._storageData.indicators=this.getSaveIndicatorsData(),this.getParent().saveChart()},t.prototype.getSaveIndicatorsData=function(){var e=[],t=this.getParent();if(this._panelType===_t.BASE){t.indicatorViews.forEach((function(t){var i=t.id,n=t.title,r=t.isHistBase,o=t.params,a=t.visible,s=t.isTriggeredByClick,l=void 0!==s&&s,c=t.isCustom,h=void 0!==c&&c;r&&e.push({name:n,id:i,type:n,params:o,visible:a,isTriggeredByClick:l,isCustom:h})}))}else{var i=this.getPanelId(),n=t.getIndicatorViewByName(i)||{},r=n.id,o=n.title,a=n.params,s=void 0===a?{}:a,l=n.visible,c=n.isCustom,h=void 0!==c&&c,u=n.isTriggeredByClick,d=void 0!==u&&u;e.push({name:o,id:r,type:o,params:s,visible:l,isCustom:h,isTriggeredByClick:d})}return e},t.prototype.updateCursorStyle=function(e){var t=this.getParent(),i=t.getAttr("crossHair").style;t.setCursor({config:{style:e?yi.POINTER:i},weight:e?500:400,isRecord:!1})},t.prototype.transformAbsoluteXYToPlotItem=function(e){var t=this.transformPointToView(e),i=t.x,n=t.y;return{time:this.xAxis.getValueOfCoord(i),value:this.yAxis.getValueOfCoord(n)}},t.prototype.transformXYToAbsoluteXY=function(e){var t=this.getBound(),i=t.x,n=t.y;return{x:i+e.x,y:n-e.y}},t.prototype.getI18n=function(e,t){return this.getParent().getI18n(e,t)},t.prototype.getMainBound=function(){var e=this.getParent().getAttr("margin").right,t=this.bound;return{x:t.x,y:t.y,width:t.width-e,height:t.height}},t.prototype.getChartDatas=function(e){var t=(this._result.get(e)||{}).result;return void 0===t?[]:t},t.prototype.hasIndicator=function(e){return this._result.has(e)},t.prototype.updateParams=function(e,t,i){var n=this,r=this.getParent(),o=this._result.get(e),a=r.getIndicatorHelperByName(e);o&&a&&a.getResult(this.getSeriesData(),t,(function(e){o.result=e,n.setYAxis(),null===i||void 0===i||i()}))},t.prototype.getSeriesData=function(){var e=this._parent.getConfig().seriesData;return void 0===e?[]:e},t.prototype.getVisibleSeriesData=function(){return this._parent.getAttr("visibleSeriesData")||this.getSeriesData()},t.prototype.setParent=function(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e,this._afterSetParent()},t.prototype.getParent=function(){return this._parent},t.prototype.afterSetParent=function(){this.initEvents()},t.prototype.getPosition=function(e){var t=e.time,i=e.value;return{x:this.xAxis.getCoordOfValue(t),y:this.yAxis.getCoordOfValue(i)}},t.prototype.getYPos=function(e){var t;return null===(t=this.yAxis)||void 0===t?void 0:t.getCoordOfValue(e)},t.prototype.getPriceOfYPos=function(e){return this.yAxis.getValueOfCoord(e)},t.prototype.getPlotItemByPosition=function(e,t){return{time:this.xAxis.getValueOfCoord(e),value:this.yAxis.getValueOfCoord(t)}},t.prototype.addWidget=function(e){return e.setParent(this),this.widgets.push(e),this},t.prototype.addWidgets=function(e){var t=this;return e.forEach((function(e){e.setParent(t),t.widgets.push(e)})),this},t.prototype.eachWidgets=function(e){var t=this;this.widgets.forEach((function(i){e.call(t,i)}))},t.prototype.setViewBound=function(e){e!==Lt.Width&&this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.updateTitleContainer()},t.prototype.getAllWeight=function(){return this.getParent().iPanels.reduce((function(e,t){return e+t.weight}),0)},t.prototype.updateViewBound=function(){this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()},t.prototype.updateViewBoundHeight=function(e,t){var i=this.getParent().visibleViewHeight,n=this.bound.height+e,r=this.getAllWeight();this._weight=n/i*r,this.setBound((0,c.__assign)((0,c.__assign)({},this.bound),{y:this.bound.y+t,height:n})),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()},t.prototype.setWidgetsBound=function(){this.eachWidgets((function(e){return e.setViewBound()}))},t.prototype.update=function(e){var t=this;if(void 0===e&&(e=vt.All),!this._isWaiting){this._isWaiting=!0;var i=this.getParent();setTimeout((function(){var n;i.hasPanel(t)&&(t.updateImmediate(e),null===(n=i.getFrontGapOfIPanel(t))||void 0===n||n.render(),t._isWaiting=!1)}),16)}},t.prototype.updateImmediate=function(e){void 0===e&&(e=vt.All),this.drawLogo(e),this.yAxis&&(this.widgets.forEach((function(t){t.updateImmediate(e)})),this.updateTitleLabel(),this._isFirstRender=!1)},t.prototype.removeWidget=function(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t]===e){this.widgets.splice(t,1);break}return this},t.prototype.removeIndicator=function(e){this._result.delete(e)},t.prototype.initEvents=function(){var e,t=this,i=this.getParent(),n=this.getPanelId(),r=i.getIndicatorHelperByName(n);(null===r||void 0===r?void 0:r.defaultProps.isDiffSource)?(null===(e=null===r||void 0===r?void 0:r.subscribe)||void 0===e||e.call(r,(function(){t.updateChartData(0,(function(){t.setYAxis(),t.update()}))})),i.watch(["symbol","interval"],(function(){if(!t.getAttr("isDestryed")){var e=i.getConfig(),n=e.symbol,o=e.interval;if(n&&o){var a=(0,c.__read)(i.getTimeExtent(),2),s=a[0],l=a[1],h=void 0===l?Date.now():l;r.init(n,o,{startTime:s,endTime:h})}}}),!0),i.on("afterTimeShifted",n,nn((function(e){var i,n=e.minTime,o=e.shiftedMinTime;n-o>((null===(i=t.xAxis)||void 0===i?void 0:i.getUnitTimeValue())||Number.MAX_SAFE_INTEGER)&&r.loadData({startTime:o,endTime:n-1})}),100))):i.watch("theme",this.watchTheme)},t.prototype.destroy=function(){var e,t=this.getParent(),i=t.titleContainer;this._wrapperContainer&&i.removeChild(this._wrapperContainer);var n=this.getPanelId(),r=t.getIndicatorHelperByName(n);(null===r||void 0===r?void 0:r.defaultProps.isDiffSource)?(null===(e=null===r||void 0===r?void 0:r.unSusbcribe)||void 0===e||e.call(r),t.off("afterTimeShifted",n),t.unwatch(["symbol","interval"])):t.unwatch("theme",this.watchTheme),this.setAttr("isDestryed",!0)},t.prototype.updateYExtend=function(){var e=this;if(this.yAxis){var t=this._getYExtent(),i=t.default,n=(0,c.__rest)(t,["default"]),r=function(t,i){var n=i.min,r=i.max,o=i.isScaleCenter,a=(n+r)/2,s=(r-n)/2,l=e.yAxis.getScaleCoeff();o?t.domainRange.setMinValue(a-s*l).setMaxValue(a+s*l):t.domainRange.setMinValue(0).setMaxValue(r*l)};r(this.yAxis,i),Object.keys(n).forEach((function(t){var i=e.getYAxisByIndex(t);i&&r(i,n[t])}))}},t.prototype.getCloseIconBound=function(){var e=this.getConfig(),t=e.margin,i=void 0===t?10:t,n=e.iconSize,r=void 0===n?40:n;return{x:this.bound.width-i-r,y:this.bound.height-i-r,width:r,height:r}},t.prototype.getVisibleChartData=function(e){var t=this.getParent(),i=t.getColorFromColorTable("defaultColor"),n=this.xAxis.getUnitTimeValue(),r=this.xAxis.domainRange,o=new Dn(r.getMinValue()-n,r.getMaxValue()+n),a=this.getChartDatas(e),s={},l=function(e,t){var i,n,r=s[e],o=r.vals,a=r.stack;if(!o)return[0,1,0];var l=o.length,c=o.indexOf(t),h=0;return(null===(i=a[e])||void 0===i?void 0:i.has(t))&&(h=(null===(n=a[e])||void 0===n?void 0:n.get(t))||0),[c,l,h]},h=a.filter((function(e){var i=e.visible;return!1!==t.getSettingValues(i)})).map((function(e){var n=e.data,r=e.borderData,a=e.color,s=e.colors,l=e.labelColors,h=e.lineWidth,u=(0,c.__rest)(e,["data","borderData","color","colors","labelColors","lineWidth"]),d=(0,c.__assign)((0,c.__assign)({},u),{data:[],lineWidth:h?t.getSettingValues(""+h):1});try{var g=(0,c.__read)(o.getSliceArrayIndexs(n,(function(e){return e.time})),2),p=g[0],f=g[1],m=s?s.slice(p,f):[],v=l?l.slice(p,f):[];d.data=n.slice(p,f).map((function(e,t){return(0,c.__assign)((0,c.__assign)({},e),{color:m[t]||a||i,labelColor:v[t]||a||i})})),r&&(d.borderData=o.sliceArray(r,(function(e){return e.time})))}catch(y){console.error(o,n)}return d}));return h.forEach((function(e){var t,i=e.data,n=e.chartType,r=e.visible,o=void 0===r||r,a=e.stack,c=e.yAxisIndex;n===At.Bar&&o&&(a&&(t=h.find((function(e){return e.name===a&&e.data!==i&&e.yAxisIndex===c}))),i.forEach((function(e){var n,r=e.time;if(void 0===s[r]&&(s[r]={vals:[],stack:{}}),t&&(null===(n=null===t||void 0===t?void 0:t.data)||void 0===n?void 0:n.length)>1){var o=an(t.data,(function(e){var t=e.time;return r-t})),a=t.data[o];(null===a||void 0===a?void 0:a.time)===r&&(void 0===s[r].stack[r]&&(s[r].stack[r]=new Map),s[r].stack[r].set(i,a.value))}void 0===t&&s[r].vals.push(i)})),e.getBarInfos=l)})),h},t.prototype.getVisibleResults=function(){var e=this,t=this.getParent();return Array.from(this._result.keys()).filter((function(e){var i=(t.getIndicatorViewByName(e)||{}).visible;return void 0===i||i})).map((function(t){return e.getVisibleChartData(t)}))},t.prototype.getBarDatas=function(e,t,i){var n,r=t.zeroBase,o=void 0===r?0:r,a=t.yAxisIndex,s=this.getParent(),l=(null===(n=s.getAttr("candlestick"))||void 0===n?void 0:n.barWeight)||.8,h=this.getAttr("barWeight")||l,u=this.xAxis.unitWidth*h,d=[],g=void 0!==a?this.getYAxisByIndex(a):this.yAxis;if(!g)return[];for(var p=g.getCoordOfValue(o),f=0,m=e.length;f<m;f++){var v=e[f],y=v.time,x=v.value,b=v.color;if(Bi(y)&&Bi(x)){var _=this.xAxis.getCoordOfValue(y),C=(0,c.__read)((null===i||void 0===i?void 0:i(y,e))||[0,1,0],3),w=C[0],A=C[1],L=C[2],E=x,V=Math.max(1,Math.abs(g.getCoordOfValue(E)-p));x<0===L<0&&(E+=L);var S=g.getCoordOfValue(E),M=Math.min(-1,E>o?-S:-p),D=(0,c.__read)(this.findPosition(_,w,A,u),2),T=D[0],k=D[1];d.push({x:T,y:M,width:k,height:V,color:s.getColorFromColorTable(b||"defaultColor")})}}return d},t.prototype.findPosition=function(e,t,i,n){if(1===i)return[e-.5*n,n];var r=n/(10*i+2*(i-1)),o=10*r,a=2*r,s=i/2;return[i%2===0?e+(t-s)*(o+a)+.5*a:e+(t-s)*o+Math.round(t-s)*a,o]},t.prototype.getLineDatas=function(e,t){var i=this.getParent(),n=[],r=void 0!==t?this.getYAxisByIndex(t):this.yAxis;if(!r)return[];for(var o=0,a=e.length;o<a;o++){var s=e[o],l=s.time,c=s.value,h=s.color,u=s.labelColor;if(Bi(l)&&Bi(c)){var d={x:this.xAxis.getCoordOfValue(l),y:-r.getCoordOfValue(c)};h&&(d.color=i.getColorFromColorTable(h)),u&&(d.labelColor=i.getColorFromColorTable(u)),n.push(d)}}return n},t.prototype.updateTitleContainer=function(){var e=this.getParent().getAttr("margin"),t=this.getBound(),i=t.x,n=t.y,r=t.width,o={position:"absolute",top:n-t.height+"px",left:i+"px",maxWidth:r-e.right+"px",padding:"3px 4px",boxSizing:"border-box"};if(this._wrapperContainer)Ki(this._wrapperContainer,o);else{var a=this.getParent().titleContainer;this._wrapperContainer=Zi("div",o,"title-wrapper-container"),this._titleContainer=Zi("div",{},"chart-title-row"),this._indicatorContainer=Zi("div",{},"chart-title-indicator-container"),this._titleContainer.appendChild(this._indicatorContainer),this._wrapperContainer.appendChild(this._titleContainer),a.appendChild(this._wrapperContainer)}},t.prototype.formatterValue=function(e){if(!Bi(e))return"";var t=this.getParent(),i=this.getAttr("isFormatNum")||!1,n=t.getAttr("candlestick"),r=n.dataFormatter,o=void 0===r?Ct.Normal:r,a=n.isFloor,s=this.getAttr("precision")||t.getAttr("precision");return i?Ji(e):o===Ct.Percentage&&this.panelType===_t.BASE?function(e,t){void 0===t&&(t=0);var i=(0,c.__read)((""+e).split("."),2),n=i[0],r=i[1],o=(void 0===r?"":r).slice(0,t+2).padEnd(t+2,"0");return new(Ci())(n+"."+o).mul(100).toFixed(t).toString()+"%"}(e,s):Qi(e,s,!!a)},t.prototype.updateTitleLabel=function(){var e,t=this,i=null===(e=this.getParent())||void 0===e?void 0:e.getAttr("currentItem");if(i&&this._indicatorContainer){var n=this.getAttr("titleInfo"),r=this.getAttr("indicatorType"),o=this.getPanelId(),a=this.getParent(),s=a.getIndicatorViewByName(o)||{},l=s.params,c=void 0===l?{}:l,h=s.visible,u=void 0===h||h,d=this._getTitleLabels(i,r,c);if(0!==d.length){var g=a.regContetxt;d.length!==this._indicatorContainer.childNodes.length&&(this._indicatorContainer.innerHTML=""),d.forEach((function(e){var i,r=e.label,o=e.key,s=e.styles,l=void 0===s?{}:s,c=e.className;if(r=r.replace(/\{\{(.*?)\}\}/g,(function(e,t){return g[t.trim()]||e})),l.color&&(l.color=a.getColorFromColorTable(l.color)),!t._indicatorContainer.querySelector("[key='"+o+"']")){var h=Zi("span",{paddingRight:"5px"},"default-label-box");h.setAttribute("key",o),null===(i=t._indicatorContainer)||void 0===i||i.appendChild(h),n[o]="",c&&Fn(h,c),t.watchProperty(o,h)}t.setWatchProperty(n,o,r,l)})),this._isFirstWatch&&d.length>0&&!this.getAttr("isMobile")&&(this.addFoldIcon(this._titleContainer),this._panelType===_t.EXT&&this.addToolIcons(this._titleContainer,{id:o,indicatorType:r,visible:u}),this._isFirstWatch=!1),this._panelType===_t.BASE&&this.updateHistBaseChartsTitle(i)}}},t.prototype.setIndicatorVisible=function(e,t,i){void 0===i&&(i=!1);var n=this.getParent(),r=n.getIndicatorViewByName(e),o=r.visible,a=(0,c.__rest)(r,["visible"]);if(o!==t){var s,l=this._wrapperContainer&&this._wrapperContainer.querySelector('[id="'+e+'-visible"');if(l){var h=(0,c.__read)(t?[qn,"Hide"]:[Jn,"Show"],2),u=h[0],d=h[1];s=u,l.innerHTML=s,l.setAttribute("tooltip",d)}n.setIndicatorView(e,(0,c.__assign)((0,c.__assign)({},a),{visible:t,isTriggeredByClick:i})),this.setYAxis(),this.update(),this.save()}},t.prototype.drawLogo=function(e){var t;void 0===e&&(e=vt.Resize),(null===(t=this.getParent())||void 0===t?void 0:t.getAttr("isHiddenBinanceLogo"))||!this._isFirstRender&&e!==vt.Resize||this._panelType!==_t.BASE||this._mainWidget.drawLogo(e)},t.prototype.createIcon=function(e,t){var i=Zi("div",{},"icon-box");return t&&i.setAttribute("id",t),i.innerHTML=e,Ki(i),i},t.prototype.addFoldIcon=function(e){var t=this.createIcon('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11 6.63184V8.03184L8.20002 10.9998L5.40002 8.03184V6.63184H11Z" fill="#848E9C"/>\n</svg>\n');null===e||void 0===e||e.insertBefore(t,e.firstChild),t.addEventListener("click",(function(){var t="1"===e.getAttribute("isFold");e.setAttribute("isFold",t?"0":"1"),t?Kn(e,"fold"):Fn(e,"fold")}))},t.prototype.addToolIcons=function(e,t){var i=this,n=t.indicatorType,r=t.visible,o=t.id;if(this.getAttr("isShowSetting")){var a=this.getParent(),s=(0,c.__read)(r?[qn,this.getI18n("indicator-hide","Hide")]:[Jn,this.getI18n("indicator-show","Show")],2),l=s[0],h=s[1],u=this.createIcon(l,n+"-visible");u.setAttribute("tooltip",h);var d=this.createIcon('<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM6.22447 7.38053L5.89752 8.36106H4.10089L3.77388 7.38053L3.55068 7.25134L2.53733 7.45842L1.639 5.90259L2.32344 5.13094V4.86895L1.639 4.0973L2.53733 2.54148L3.55071 2.74855L3.77391 2.61936L4.10086 1.63883H5.89752L6.22447 2.61936L6.44768 2.74855L7.46102 2.54148L8.35936 4.0973L7.67491 4.86895V5.13094L8.35936 5.90259L7.46102 7.45842L6.44768 7.25134L6.22447 7.38053ZM7.12387 6.70908L6.33297 6.54746L5.67192 6.93005L5.41707 7.69439H4.58132L4.32641 6.93004L3.66539 6.54746L2.87448 6.70908L2.45665 5.98543L2.99011 5.384V4.61589L2.45665 4.01446L2.87448 3.29081L3.66542 3.45244L4.32646 3.06984L4.58132 2.3055H5.41707L5.67192 3.06984L6.33297 3.45244L7.12387 3.29082L7.54171 4.01446L7.00824 4.61589V5.384L7.54171 5.98543L7.12387 6.70908ZM4.99998 6.33333C4.2636 6.33333 3.66665 5.73638 3.66665 5C3.66665 4.26362 4.2636 3.66667 4.99998 3.66667C5.73636 3.66667 6.33331 4.26362 6.33331 5C6.33331 5.73638 5.73636 6.33333 4.99998 6.33333ZM4.99998 5.66667C4.63179 5.66667 4.33331 5.36819 4.33331 5C4.33331 4.63181 4.63179 4.33333 4.99998 4.33333C5.36817 4.33333 5.66665 4.63181 5.66665 5C5.66665 5.36819 5.36817 5.66667 4.99998 5.66667Z" fill="red"/>\n</svg>\n'),g=this.createIcon('<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM2.43066 2.90258L4.5283 5.00019L2.43064 7.09782L2.66634 7.33352L2.90204 7.56923L4.9997 5.47159L7.09727 7.56916L7.56867 7.09776L5.47111 5.00019L7.56869 2.90256L7.33299 2.66685L7.09728 2.43115L4.9997 4.52879L2.90207 2.43118L2.66637 2.66688L2.43066 2.90258Z" fill="#3A3F46"/>\n</svg>\n'),p=Zi("div",{},"indicator-title-toolbox");p.append.apply(p,(0,c.__spread)([u,d,g])),null===e||void 0===e||e.append(p),d.addEventListener("click",(function(){null===a||void 0===a||a.fire("showParamsSettingPanel",{id:o})})),d.setAttribute("tooltip",this.getI18n("indicator-settings","Settings")),g.setAttribute("tooltip",this.getI18n("indicator-close","Close")),u.addEventListener("click",(function(){var e=a.getIndicatorViewByName(o).visible;i.setIndicatorVisible(o,!e,!0)})),g.addEventListener("click",(function(){a.closeIndicatorByName(o)})),Un(u),Un(d),Un(g)}},t.prototype.updateHistBaseChartsTitle=function(e){var t=this,i=this.getParent().indicatorViews,n=this.getAttr("titleInfo"),r=this.getParent(),o=r.regContetxt;i.forEach((function(a){var s,l=a.id,c=a.indicatorType,h=a.isHistBase,u=a.visible,d=a.subElement,g=a.params;if(h){var p=t._getTitleLabels(e,l,g);if(0!==p.length){var f=d.querySelector("[key='"+l+"']");if(f||((f=t._indicatorContainer.cloneNode()).setAttribute("key",l),d.appendChild(f)),p.forEach((function(e){var i=e.label,a=e.key,s=e.styles,l=void 0===s?{}:s,c=e.className;if(i=i.replace(/\{\{(.*?)\}\}/g,(function(e,t){return o[t.trim()]||e})),l.color&&(l.color=r.getColorFromColorTable(l.color)),!f.querySelector("[key='"+a+"']")){var h=Zi("span",{paddingRight:"5px"},"default-label-box");h.setAttribute("key",a),null===f||void 0===f||f.appendChild(h),n[a]="",c&&Fn(h,c),t.watchProperty(a,h)}t.setWatchProperty(n,a,i,l)})),!d.parentNode)if(t._wrapperContainer.appendChild(d),!t.getAttr("isMobile"))(null===(s=i.find((function(e){return e.isHistBase})))||void 0===s?void 0:s.id)===l&&t.addFoldIcon(d),t.addToolIcons(d,{id:l,indicatorType:c,visible:u})}}}))},t.prototype.getUpdatedBound=function(){for(var e=this.getAllWeight(),t=this.getParent(),i=t.getConfig(),n=i.width,r=i.margin,o=t.visibleViewHeight,a=t.iPanels,s=0,l=0;l<a.length;l++){var c=a[l];if(c===this)break;s+=c.bound.height}var h=o*this._weight/e,u=n-r.left;return s+=h,{x:r.left,y:s,height:h,width:u}},t.prototype._initWidgets=function(){this._axisWidget=new ir,this._panelType===_t.BASE?(this._mainWidget=new er,this.addWidgets([this._mainWidget,this._axisWidget])):(this._mainWidget=new rr,this.addWidgets([this._mainWidget,this._axisWidget]))},t.prototype._getYExtent=function(){var e=this.getAttr("indicatorType"),t=this.getParent().getAttr("precision"),i={default:{max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!0,fixMax:!1,fixMin:!1}};if(e===yt.CANDLE){var n=this.getVisibleSeriesData().reduce((function(e,t){var i=e.high,n=e.low;return{high:i=Math.max(i,t.high),low:n=Math.min(n,t.low)}}),{high:Number.MIN_SAFE_INTEGER,low:Number.MAX_SAFE_INTEGER});i.default.max=n.high,i.default.min=n.low,i.default.isScaleCenter=!0;for(var r=0,o=(a=this.getVisibleResults()).length;r<o;r++){a[r].forEach((function(e){var t=e.data,n=e.yAxisIndex,r=e.isScaleCenter,o=void 0===r||r,a=e.min,s=e.max,l={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==n?(i[n]||(i[n]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:o,fixMax:!1,fixMin:!1}),l=i[n]):l=i.default,Bi(s))l.max=s,l.fixMax=!0;else if(!l.fixMax){var c=An()(t,"value");c&&c.value>l.max&&(l.max=c.value)}if(Bi(a))l.min=a,l.fixMin=!0;else if(!l.fixMin){var h=En()(t,"value");h&&h.value<l.min&&(l.min=h.value)}}))}}else{var a;(a=this.getVisibleChartData(e)).forEach((function(e){var t=e.chartType,n=e.data,r=void 0===n?[]:n,o=e.yAxisIndex,a=e.isScaleCenter,s=void 0===a||a,l=e.min,h=e.max,u=e.stack,d=e.zeroBase,g=void 0===d?0:d,p=e.getBarInfos,f={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==o?(i[o]||(i[o]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!!s,fixMin:!1,fixMax:!1}),f=i[o]):(f=i.default,i.default.isScaleCenter=!!s),Bi(h))f.max=h,f.fixMax=!0;else if(!f.fixMax){(m=An()(r,"value"))&&m.value>f.max&&(f.max=m.value)}if(Bi(l))f.min=l,f.fixMin=!0;else if(!f.fixMin){(v=En()(r,"value"))&&v.value<f.min&&(f.min=v.value)}if(void 0!==u&&t===At.Bar){var m,v,y=r.map((function(e){var t=e.time,i=e.value,n=(0,c.__read)((null===p||void 0===p?void 0:p(t,r))||[0,1,0],3)[2],o=void 0===n?0:n;return i<g===o<g?{time:t,value:i+o}:{time:t,value:i}}));(m=An()(y,"value"))&&m.value>f.max&&!f.fixMin&&(f.max=m.value),(v=En()(r,"value"))&&v.value<f.min&&!f.fixMax&&(f.min=v.value)}}))}return Object.keys(i).forEach((function(e){var n=i[e],r=n.min,o=n.max,a=n.isScaleCenter;if(zi(o-r,Math.pow(10,-t))){var s=0===o?10:Math.abs(o),l=Math.floor(Math.log(s)/Math.log(10)),c=Math.pow(10,l)/2;a||(i[e].max=o+c),i[e].min=r-c,i[e].max=o+c}})),i},t.prototype._getTitleLabels=function(e,t,i){void 0===i&&(i={});var n=[],r=this.getParent(),o=r.getAttr("precision"),a=this.getAttr("isFormatNum"),s=this.getAttr("isMobile"),l=r.getXAxis();if(t===yt.CANDLE){if(s)return Ki(this._titleContainer,{display:"none"}),[];var h=e.time,u=e.open,d=e.high,g=e.low,p=e.close,f=e.change,m=void 0===f?"0.00%":f,v=e.amplitude,y=void 0===v?"0.00%":v,x=p>=u?{color:r.getColorFromColorTable("candle.upBarColor")}:{color:r.getColorFromColorTable("candle.downBarColor")};n.push({label:this._getTitleTime(h,l.getOriginTimeScaleType()),key:"t"},{label:"O:",key:"O"},{label:this.formatterValue(u),key:"o",styles:x},{label:"H:",key:"H"},{label:this.formatterValue(d),key:"h",styles:x},{label:"L:",key:"L"},{label:this.formatterValue(g),key:"l",styles:x},{label:"C:",key:"C"},{label:this.formatterValue(p),key:"c",styles:x},{label:"CHANGE:",key:"CHANGE",className:"title_change_label"},{label:m,key:"change",styles:x,className:"title_change_value"},{label:"AMPLITUDE:",key:"AMP",className:"title_amplitude_label"},{label:y,key:"amp",styles:x,className:"title_amplitude_value"})}else{var b=r.getIndicatorHelperByName(t);if(void 0===b)return[];var _=this.getChartDatas(t).map((function(e){var t=e.visible,i=(0,c.__rest)(e,["visible"]);return(0,c.__assign)((0,c.__assign)({},i),{visible:!1!==r.getSettingValues(t)})}));n=s?b.getMobileLabel((0,c.__assign)((0,c.__assign)({},i),{precision:o}),_):b.getLabel(e.time,_,(0,c.__assign)((0,c.__assign)({},i),{precision:o,isFormatNum:a}))}return n},t.prototype._getTitleTime=function(e,t){var i="YYYY/MM/DD";return t===pt.Month?i="YYYY/MM/01":t===pt.Minute?i="YYYY/MM/DD hh:mm":t===pt.Hour&&(i="YYYY/MM/DD hh:00"),Xi(e,i)},t.prototype._afterSetParent=function(){},t}(Mn);const ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.draw=function(e,t){var i=t.width;Rn.fillRect(e,0,0,i,1)},t}(Nn),sr=1e-5;Math.PI,Math.PI;const lr=function(){function e(e,t){var i;this.x=0,this.y=0,"number"===typeof e&&"number"===typeof t?(this.x=e,this.y=t):Array.isArray(e)?(i=(0,c.__read)(e,2),this.x=i[0],this.y=i[1]):Ni(e)&&(this.x=e.x,this.y=e.y)}return e.lerp=function(t,i,n){var r=new e(i.x-t.x,i.y-t.y);return t.add(r.scale(n))},e.prototype.add=function(e){return this.x+=Number(e.x),this.y+=Number(e.y),this},e.prototype.substract=function(e){return this.x-=Number(e.x),this.y-=Number(e.y),this},e.prototype.normalize=function(){var t=this.getModelLength();return 0===t?new e(0,0):new e(this.x/t,this.y/t)},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(e){var t=cr.degreeToRadius(e),i=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=i,this.y=n,this},e.prototype.scale=function(e,t){return this.x*=e,this.y*=t||e,this},e.prototype.getSquareLength=function(){return Math.pow(this.x,2)+Math.pow(this.y,2)},e.prototype.getModelLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.toArray=function(){return[this.x,this.y]},e.prototype.toXY=function(){return{x:this.x,y:this.y}},e}();const cr=function(){function e(){}return e.isZero=function(e,t){return void 0===t&&(t=sr),Math.abs(e)<=Math.abs(t)},e.isSamePoint=function(e,t){var i=Array.isArray(e)?e:[e.x,e.y],n=Array.isArray(t)?t:[t.x,t.y];return this.isZero(i[0]-n[0])&&this.isZero(i[1]-n[1])},e.getSquareDistance=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},e.getDotMultiply=function(e,t){return e.x*t.x+e.y*t.y},e.getCrossMultiply=function(e,t){return e.x*t.y-e.y*t.x},e.degreeToRadius=function(e){return Math.PI*e/180},e.transformPointToArray=function(e){return[e.x,e.y]},e.transformPointToXY=function(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e},e.transformPointsToArray=function(e){var t=this;return e.map((function(e){return t.transformPointToArray(e)}))},e.transformPointsToXY=function(e){var t=this;return e.map((function(e){return t.transformPointToXY(e)}))},e.getBoundOfPoints=function(e){var t=e.map((function(e){return e[0]})),i=e.map((function(e){return e[1]})),n=Math.min.apply(Math,(0,c.__spread)(t)),r=Math.max.apply(Math,(0,c.__spread)(t)),o=Math.min.apply(Math,(0,c.__spread)(i)),a=Math.max.apply(Math,(0,c.__spread)(i));return new hr(n,o,Math.abs(r-n),Math.abs(a-o))},e.getDirectionVec=function(e,t){return new lr(t[0]-e[0],t[1]-e[1])},e.isLeftOfLine=function(e,t,i){var n,r=(0,c.__read)([new lr(t[0],t[1]),new lr(i[0],i[1])],2),o=r[0],a=r[1];o.y>a.y&&(o=(n=(0,c.__read)([a,o],2))[0],a=n[1]);var s=new lr(a.x-o.x,a.y-o.y),l=new lr(e[0]-o.x,e[1]-o.y);return this.getCrossMultiply(s,l)>0},e.isBothSide=function(e,t,i,n){return void 0===n&&(n=0),this.getCrossMultiply(e,t)*this.getCrossMultiply(e,i)<=n},e}();const hr=function(){function e(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=i,this.height=n}return e.isOverlaped=function(e,t){return e.isOverlaped(t)},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.getBound=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.getCenter=function(){return[this.x+this.width/2,this.y+this.height/2]},e.prototype.getNorthEast=function(){return[this.x+this.width,this.y+this.height]},e.prototype.getSouthWest=function(){return[this.x,this.y]},e.prototype.getVetexs=function(){return[[this.x,this.y],[this.x,this.y+this.height],[this.x+this.width,this.y+this.height],[this.x+this.width,this.y]]},e.prototype.isOverlaped=function(e){var t=this.getCenter(),i=e.getCenter();return Math.abs(i[0]-t[0])<=(this.width+e.width)/2&&Math.abs(i[1]-t[1])<=(this.height+e.height)/2},e.prototype.contain=function(t){if(t instanceof e){for(var i=t.getVetexs(),n=0;n<i.length;n++)if(!this.contain(i[n]))return!1;return!0}var r=this.x+this.width,o=this.y+this.height;return(t[0]-this.x)*(t[0]-r)<=0&&(t[1]-this.y)*(t[1]-o)<=0},e.prototype.union=function(e){var t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.y=i,this.width=n-t,this.height=r-i,this},e.prototype.expand=function(e,t){return this.width+=2*e,this.x-=e,void 0!==t?(this.y-=t,this.height+=2*t):(this.y-=e,this.height+=2*e),this},e.prototype.isIntersectOfSegment=function(e,t){if(!cr.getBoundOfPoints([e,t]).isOverlaped(this))return!1;if(this.contain(e)||this.contain(t))return!0;for(var i=cr.getDirectionVec(e,t),n=this.getVetexs(),r=1;r<n.length;r++){var o=cr.getDirectionVec(e,n[r-1]),a=cr.getDirectionVec(e,n[r]);if(cr.isBothSide(i,o,a))return!0}return!1},e}();const ur=function(e){function t(t,i){var n=e.call(this)||this;return n.config=(0,c.__assign)((0,c.__assign)({},Sn()(Pn.defaultConfig)),{zIndex:100}),n.renderer=new ar,n._frontPanel=t,n._nextPanel=i,n._initEvents(),n}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"frontPanel",{get:function(){return this._frontPanel},set:function(e){this._frontPanel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextPanel",{get:function(){return this._nextPanel},set:function(e){this._nextPanel=e},enumerable:!0,configurable:!0}),t.prototype.clear=function(){var e=this.getRoot().getContext(),t=this.getClearBound(),i=t.x,n=t.y,r=t.width;Rn.clearRect(e,{x:i,y:n,width:r,height:1})},t.prototype.render=function(){var e=this.getRoot(),t=e.getContext();t.save(),this.setCanvasTransform(t),Fi(t,{fillStyle:e.getColorFromColorTable("frame.borderLineColor")}),this.renderer.draw(t,this.bound),t.restore()},t.prototype.setViewBound=function(){var e=this._frontPanel.getBound();this.setBound((0,c.__assign)((0,c.__assign)({},e),{height:0}))},t.prototype.contain=function(e){var t=this.bound,i=t.x,n=t.y,r=t.width,o=t.height,a=new hr(i,0,r,o),s=[e.x,n-e.y];return a.expand(0,5).contain(s)},t.prototype._initEvents=function(){this.on("mousedown",this._onmousedown),this.on("mousemove",this._onmousemove),this.on("mouseout",this._onmouseout)},t.prototype._onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:yi.NSRESIZE},weight:1e3,isRecord:!1,key:"gap"})},t.prototype._onmouseout=function(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype._onmousedown=function(e){var t=this,i=e.point.y,n=e.originEvent,r=this.getRoot();this._clearDragEvent(),this._frontPanel.setAttr("isAbleTriggerMove",!1),this._nextPanel.setAttr("isAbleTriggerMove",!1),r.on("mousemove","gap",(function(e){var n=e.point.y,r=n-i,o=t._frontPanel.getBound().height,a=t._nextPanel.getBound().height;o+r<=30||a-r<=30||(t._frontPanel.updateViewBoundHeight(r,r),t.setBound((0,c.__assign)((0,c.__assign)({},t.bound),{y:t.bound.y+r})),t._nextPanel.updateViewBoundHeight(-r,0),t._frontPanel.update(vt.Resize),t._nextPanel.update(vt.Resize),i=n)})),r.on("mouseup","gap",(function(){t._frontPanel.setAttr("isAbleTriggerMove",!0),t._nextPanel.setAttr("isAbleTriggerMove",!0),t._clearDragEvent()})),n.preventDefault()},t.prototype._clearDragEvent=function(){var e=this.getRoot();e.off("mousemove","gap"),e.off("mouseup","gap")},t}(Pn);const dr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panels=[],t._indicatorViews=new Map,t._isLoaded=!1,t._isWaiting=!1,t._colorMode=Di,t.getI18n=function(){return""},t.moduleManager={},t}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"indicatorViews",{get:function(){return Array.from(this._indicatorViews.values())},enumerable:!0,configurable:!0}),t.prototype.registerModule=function(e,t){t&&this.moduleManager[e]!==t&&(this.moduleManager[e]=t)},t.prototype.getModule=function(e){return this.moduleManager[e]},t.prototype.getSettingManager=function(){return this.getModule(Hi)},t.prototype.getSettingValues=function(e){var t=this.getSettingManager();return e&&t?t.getValue(e):void 0},t.prototype.getIndicatorParams=function(e){var t=this.getSettingManager();return t?t.getValue(e):{}},t.prototype.getIndicatorViewByName=function(e){return this._indicatorViews.get(e)},t.prototype.setIndicatorView=function(e,t){this._indicatorViews.set(e,t)},t.prototype.deleteIndicatorViewByName=function(e){this._indicatorViews.delete(e)},t.prototype.getPanels=function(e){return e?this.panels.filter((function(t){return e(t)})):this.panels},t.prototype.getIPanels=function(){return this.panels.filter((function(e){return e instanceof or}))},t.prototype.getFrontGapOfIPanel=function(e){for(var t=this.getPanels(),i=!1,n=t.length-1;n>=0;n--){var r=t[n];if(i&&r instanceof ur)return r;i=r===e}},t.prototype.addPanels=function(e){var t=this;return e.forEach((function(e){t.setWidgetParent(e),t.panels.push(e)})),this},t.prototype.addElement=function(e){var t=this.getAttr("container");t&&e&&t.appendChild(e)},t.prototype.addElemens=function(e){var t=this.getAttr("container");t&&e.forEach((function(e){return t.appendChild(e)}))},t.prototype.eachPanels=function(e,t){var i=this;void 0===t?this.panels.forEach((function(t,n){e.call(i,t,n)})):t?this.panels.slice(0).sort((function(e,t){return t.getAttr("zIndex")-e.getAttr("zIndex")})).forEach((function(t){e.call(i,t)})):this.panels.slice(0).sort((function(e,t){return e.getAttr("zIndex")-t.getAttr("zIndex")})).forEach((function(t){e.call(i,t)}))},t.prototype.update=function(e){var t=this;void 0===e&&(e=vt.All),!this._isWaiting&&this._isLoaded&&(this._isWaiting=!0,this._lastRenderTimer=requestAnimationFrame((function(){cancelAnimationFrame(t._lastRenderTimer),t._lastRenderTimer=null,t.renderImmediate(e),t._isWaiting=!1})))},t.prototype.renderImmediate=function(e){void 0===e&&(e=vt.All),this._isLoaded&&(this._lastRenderTimer&&cancelAnimationFrame(this._lastRenderTimer),this.eachPanels((function(t){t.updateImmediate(e)}),!1),this._isWaiting=!1)},t.prototype.removePanel=function(e){for(var t=0;t<this.panels.length;t++)if(this.panels[t]===e){this.panels.splice(t,1),e instanceof or&&(this._indicatorViews.delete(e.getAttr("indicatorType")),e.destroy());break}return this},t.prototype.removePanels=function(e){for(var t=this.panels.length-1;t>=0;t--){var i=this.panels[t];if(e.has(i)&&(this.panels.splice(t,1),e.delete(i),i instanceof or&&(this._indicatorViews.delete(i.getAttr("indicatorType")),i.destroy()),0===e.size))return}},t.prototype.initPanelBound=function(e){void 0===e&&(e=Lt.All),this.eachPanels((function(t){t.setViewBound(e)}))},t.prototype.updatePanelBound=function(){this.eachPanels((function(e){e instanceof or&&e.updateViewBound(),e instanceof ur&&e.setViewBound()}))},t.prototype.resizeAllPanelBound=function(){this.eachPanels((function(e){e instanceof or?e.updateViewBound():e.setViewBound()}))},t.prototype.initPanelYAxis=function(){this.eachPanels((function(e){e instanceof or&&e.setYAxis()}))},t.prototype.filterPanels=function(e){var t=this;return this.panels.filter((function(i){return e.call(t,i)}))},t.prototype.getPanel=function(e){return this.panels.find(e)},t.prototype.hasPanel=function(e){return this.panels.some((function(t){return t===e}))},t.prototype.setIsLoaded=function(e){this._isLoaded=e},t.prototype.isLoaded=function(){return this._isLoaded},t.prototype.registerColorTable=function(e,t){e=e.toLocaleLowerCase();var i=this._colorMode[e]||{},n=xn()((0,c.__assign)({},i),t);_n()(i,n)||(Object.assign(this._colorMode[e],n),this.update())},t.prototype.getColorTableByTheme=function(e){return this._colorMode[e.toLocaleLowerCase()]},t.prototype.registerI18n=function(e){this.getI18n=e},t}(Cn);const gr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.drawBorder=function(e,t){e.beginPath();var i=t.width,n=t.height;Rn.drawLine(e,0,-n,i,-n),e.stroke()},t.drawTicks=function(e,t,i,n,r,o){e.beginPath();var a=-i.height;t.forEach((function(t){var i=Gi(t.v,o);i&&(Rn.drawLine(e,t.p,a,t.p,a+r),Rn.drawText(e,i,t.p,a+r+n))})),e.stroke()},t}return(0,c.__extends)(t,e),t.prototype.draw=function(e,t){this.drawBorder(e,t)},t}(Nn);const pr=function(e){function t(){var t=e.call(this)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(Pn.defaultConfig)),{zIndex:1e3}),t.renderer=new gr,t.on("mousemove",t.onmousemove),t.on("mouseout",t.onmouseout),t.on("mousedown",t.onmousedown),t}return(0,c.__extends)(t,e),t.prototype.getCtxsByDrawMode=function(e){var t,i=this.getRoot(),n=i.getContext(),r=i.getMarkContext();return((t={})[vt.All]=[n,r],t[vt.Resize]=[n,r],t[vt.Marks]=[r],t)[e]||[]},t.prototype.clear=function(e){void 0===e&&(e=[]);var t=this.getClearBound();e.forEach((function(e){return Rn.clearRect(e,t)}))},t.prototype.render=function(e){var t=this.getRoot(),i=t.getConfig(),n=i.xAxis,r=i.tick,o=r.width,a=void 0===o?5:o,s=r.textMargin,l=void 0===s?0:s,c=t.getContext(),h=t.getMarkContext(),u=this.getCtxsByDrawMode(e);if(this.clear(u),this.initialCtxs(u),e===vt.All||e===vt.Resize){this.createClipBound(c),Fi(c,{strokeStyle:t.getColorFromColorTable("frame.borderLineColor")}),this.renderer.drawPolyline(c,[{x:0,y:-n.height},{x:this.bound.width,y:-n.height}]);var d=this.getRoot().getXAxis(),g=this.getTicksData(),p=d.getCurrentTimeScale();Fi(c,{strokeStyle:t.getColorFromColorTable("axis.tickLineColor"),fillStyle:t.getColorFromColorTable("axis.tickTextColor"),textBaseline:ft.Top,textAlign:mt.Center}),this.renderer.drawTicks(c,g,this.bound,l,a,p)}this.createClipBound(h),t.getAttr("annotationVisible")&&this.plotShapes(h),this.restoreCtxs(u)},t.prototype.setViewBound=function(){var e=this.getRoot().getConfig(),t=e.xAxis,i=e.margin,n=e.width,r=e.height;this.setBound({x:i.left,y:r-i.bottom,width:n-i.right,height:t.height})},t.prototype.getTicksData=function(){var e=this.getRoot();return e?e.getXAxis().getAxisData():[]},t.prototype.onmouseout=function(){var e=this.getRoot(),t=e.getHitContext();Rn.clearRect(t),this.clearDragEvent(),e.setCursor({key:"gap",isClear:!0,config:{},weight:1e3})},t.prototype.onmousedown=function(e){var t=this,i=this.getRoot(),n=e.point.x;this.on("mousemove","mousedown",(function(e){var i=e.point.x;t.getRoot().shiftTimeLine(n-i),n=i})),this.on("mouseup","mousedown",(function(){t.clearDragEvent(),i.endShiftTime()}))},t.prototype.clearDragEvent=function(){this.off("mousemove","mousedown"),this.off("mouseup","mousedown")},t.prototype.onmousemove=function(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:yi.EWRESIZE},weight:1e3,isRecord:!1})},t}(Pn);const fr=function(e){function t(t,i,n,r){void 0===r&&(r=1.5);var o=e.call(this,t,i,!1)||this;return o.unitWidth=10,o.timeUnitValue=wi[pt.Day],o._maxScaleCoeff=9,o._minScaleCoeff=.2,o._minNearUnitWidth=50,o._originTimeScaleType=pt.Day,o._timeScales=[],o._sliceRanges=[],o._hasSliceTimeRange=!1,o._scaleCoeff=r,o.unitWidth/=o._scaleCoeff,o._timeIntervals=(0,c.__assign)({},wi),o.analysisTimeInterval(n),o.resetTimeDomainRange(),o._maxTimeValue=o.domainRange.getMaxValue(),o}return(0,c.__extends)(t,e),t.prototype.getCoordOfValue=function(e){var t=this.coordRange.getMinValue(),i=this.domainRange.getMinValue();return t+(e-i-this.getEasedSliceTime(i,e-i,!0).sliceTimeLength)/this.getUnitTimeValue()*this.unitWidth},t.prototype.getValueOfCoord=function(e){var t=this.getUnitTimeValue(),i=this.domainRange.getMinValue(),n=(this._maxTimeValue-i)%this.timeUnitValue,r=n/t*this.unitWidth,o=e-this.coordRange.getMinValue()-r,a=n+Math.round(o/this.unitWidth)*t,s=this.getEasedSliceTime(i,a).time;if(this._originTimeScaleType===pt.Month){var l=new Date(s),c=new Date(s+this._timeIntervals.Day);if(l.getMonth()!==c.getMonth())return s+this._timeIntervals.Day}return s},t.prototype.getUnitTimeValue=function(){return this.timeUnitValue},t.prototype.getCurrentTimeScale=function(){return this._currentTimeScale},t.prototype.getOriginTimeScaleType=function(){return this._originTimeScaleType},t.prototype.setCurrentTimeScale=function(e){return this._currentTimeScale=e,this},t.prototype.getAxisData=function(){for(var e=this.domainRange.getMinValue(),t=this.coordRange.getMinValue(),i=this.coordRange.getInterval()/this.unitWidth,n=this.getUnitTimeValue(),r=[],o={lastTime:0,pos:Number.MIN_SAFE_INTEGER},a=0;a<=i;a++){if(0===a){var s=(this._maxTimeValue-e)%this.timeUnitValue;t+=s/n*this.unitWidth,e+=s}var l=this.getEasedSliceTime(e,a*n).time;if(this._originTimeScaleType===pt.Month){var c=new Date(l),h=new Date(l+this._timeIntervals.Day);c.getMonth()!==h.getMonth()&&(l+=this._timeIntervals.Day)}this.isShowTicks(l,o)&&r.push({p:t+a*this.unitWidth,v:l})}return r},t.prototype.scaleAroundTimestamp=function(e,t){this.unitWidth/t<2||this._scaleCoeff*t>this._maxScaleCoeff||this._scaleCoeff*t<this._minScaleCoeff||(this.unitWidth/=t,this._scaleCoeff*=t,this.scaleAroundPoint(e,t),this.updateTimeScale())},t.prototype.scaleAroundRight=function(e){if(!(this.unitWidth<=2&&e>1||this._scaleCoeff>=this._maxScaleCoeff&&e>1||this._scaleCoeff<=this._minScaleCoeff&&e<1)){this.unitWidth=Math.max(2,this.unitWidth/e);var t=this._scaleCoeff*e;this._scaleCoeff=Math.min(this._maxScaleCoeff,Math.max(this._minScaleCoeff,t));var i=this.domainRange.getMaxValue(),n=this.getDomainInterval(),r=this.getEasedSliceTime(i,-n).time;this.domainRange.setMinValue(r).setMaxValue(i),this.updateTimeScale()}},t.prototype.setTimeScales=function(e){return this._timeScales=e,this},t.prototype.updateSliceTimeInterval=function(e){this._sliceRanges.length=0;for(var t=2*this.timeUnitValue,i=1;i<e.length;i++){var n=e[i-1].time,r=e[i].time;r-n>=t&&this._sliceRanges.push([n+this.timeUnitValue,r])}this._hasSliceTimeRange=this._sliceRanges.length>0},t.prototype.shiftTime=function(e){if(this._hasSliceTimeRange){var t=this.getDomainInterval(),i=this.domainRange.getMinValue(),n=this.getEasedSliceTime(i,e).time,r=this.getEasedSliceTime(n,t).time;this.domainRange.setMinValue(n).setMaxValue(r)}else this.domainRange.shift(e)},t.prototype.getEasedSliceTime=function(e,t,i){void 0===i&&(i=!1);var n=e+t,r=0;if(t<0)for(var o=this._sliceRanges.length-1;o>=0;o--){if(n<=(a=this._sliceRanges[o])[1]&&e>=a[1]&&(i||(n-=a[1]-a[0]),r+=a[1]-a[0]),n>a[1])break}if(t>0)for(o=0;o<this._sliceRanges.length;o++){var a;if(n>=(a=this._sliceRanges[o])[0]&&e<=a[0]&&(i||(n+=a[1]-a[0]),r+=a[1]-a[0]),n<a[0])break}return{time:n,sliceTimeLength:r}},t.prototype.getDomainInterval=function(){return this.coordRange.getInterval()/this.unitWidth*this.getUnitTimeValue()},t.prototype.updateTimeScale=function(){for(var e=this._timeScales.length-1;e>=0;e--){var t=this._timeScales[e],i=t.type,n=t.number,r=this._timeIntervals[i]*n;if(Math.floor(r/this.timeUnitValue)*this.unitWidth>=this._minNearUnitWidth&&this._timeIntervals[i]>=this.timeUnitValue){this.setCurrentTimeScale(this._timeScales[e]);break}}this._currentTimeScale||this.setCurrentTimeScale({type:pt.Month,number:12})},t.prototype.isShowTicks=function(e,t){var i,n=new Date(e),r=((i={})[pt.Year]=n.getFullYear(),i[pt.Month]=n.getMonth(),i[pt.Week]=n.getDay(),i[pt.Day]=n.getDate(),i[pt.Hour]=n.getHours(),i[pt.Minute]=n.getMinutes(),i),o=this.getCoordOfValue(e),a=this._currentTimeScale,s=a.type,l=a.number,c=this._timeIntervals[s]*l,h=!1;if(s===pt.Month){var u=qi(t.lastTime,e)-1;h=o-t.pos>=this._minNearUnitWidth&&this.isShowMonthOrYear(r,u,l)}else e-t.lastTime>=c&&o-t.pos+.01>=this._minNearUnitWidth&&(h=s===pt.Hour?this.isShowHour(r):s===pt.Day?this.isShowDay(r):r[s]%l===0);return h&&(t.lastTime=e,t.pos=o),h},t.prototype.isShowMonthOrYear=function(e,t,i){var n=!0;if(i>12){var r=Math.floor(i/12);n=e[pt.Year]%r===0}return n&&e[pt.Day]<=this.timeUnitValue/this._timeIntervals.Day+1&&t>=i&&e[pt.Month]%i===0},t.prototype.isShowHour=function(e){var t=!1,i=this._currentTimeScale.number;if(0!==e[pt.Minute])return!1;if(this.timeUnitValue>=this._timeIntervals.Hour){var n=e[pt.Hour]%(this.timeUnitValue/this._timeIntervals.Hour);0!==n&&n*this._timeIntervals.Hour<=this.timeUnitValue&&(t=(e[pt.Hour]-n)%i===0)}return e[pt.Hour]%i===0&&(t=!0),t},t.prototype.isShowDay=function(e){var t=this._currentTimeScale,i=t.type,n=t.number;return n%7===0?e[pt.Hour]*this._timeIntervals.Hour<=this.timeUnitValue&&0===e[pt.Week]:e[pt.Hour]*this._timeIntervals.Hour<this.timeUnitValue&&e[i]%n===0},t.prototype.getIntervalFrequency=function(e){for(var t={},i=1,n=e.length,r=e.length/2;i<n;i++){if((s=t[l=e[i].time-e[i-1].time]?t[l]+1:1)>r)return{interval:l};t[l]=s}var o=Object.keys(t),a={interval:0,count:0};for(i=0;i<o.length;i++){var s,l=Number(o[i]);(s=t[o[i]])>a.count&&(a={interval:l,count:s})}return a},t.prototype.analysisTimeInterval=function(e){var t=e.length;if(this._originTimeScaleType=pt.Day,1===t)this.timeUnitValue=wi[pt.Day];else{var i=qi(this.domainRange.getMinValue(),this.domainRange.getMaxValue());if(t<=i)this.timeUnitValue=this.domainRange.getInterval()/(i-1),this._originTimeScaleType=pt.Month,this._timeIntervals[pt.Month]=this.timeUnitValue;else{var n=this.getIntervalFrequency(e);this.timeUnitValue=n.interval;for(var r=Li.length-1;r>=0;r--){var o=Li[r].type;this.timeUnitValue%wi[o]===0&&(this._originTimeScaleType=o)}}}this.setTimeScales(Li),this.updateTimeScale()},t.prototype.resetTimeDomainRange=function(){var e=this.domainRange.getMaxValue(),t=this.getDomainInterval(),i=this.getEasedSliceTime(e,-t).time;this.domainRange.setMinValue(i)},t.prototype.scaleAroundPoint=function(e,t){var i=this.coordRange.getInterval(),n=this.coordRange.getMinValue(),r=this.coordRange.getMaxValue(),o=this.getCoordOfValue(e);if(!(o<n||o>r)){var a=(o-n)/i,s=this.getDomainInterval(),l=s*a,c=s-l,h=this.getEasedSliceTime(e,-l*t).time,u=this.getEasedSliceTime(e,c*t).time;this.domainRange.setMinValue(h).setMaxValue(u)}},t}(Tn);const mr={theme:"",margin:{left:0,right:0,top:0,bottom:8},xAxis:{height:24,scaleRatio:.0025},yAxis:{width:40,isFloat:!1},crossHair:{show:!0,style:yi.CROSSHAIR},grid:{show:!0},candlestick:{barWeight:.8,dataFormatter:Ct.Normal},indicators:[]};var vr=i("/CzM"),yr=i.n(vr),xr=i("2uJw"),br=i.n(xr),_r=(i("qzOT"),function(){});function Cr(e){return e&&"function"===typeof e.get}var wr=function(e){function t(t){var i=e.call(this)||this;return i.get=t,i}return(0,c.__extends)(t,e),t}(_r),Ar=function(e){function t(t){var i=e.call(this)||this;return i.defaultValue=t,i.cache=[],i}return(0,c.__extends)(t,e),t.prototype.get=function(e){return e<0&&void 0!==this.defaultValue?this.defaultValue:this.cache[e]},t.prototype.set=function(e,i){var n=this;return new wr(i?function(r){return r<t.currentTick?n.cache[r]:(n.cache[r]=e.get(r),i.get(r))}:function(i){return i<t.currentTick?n.cache[i]:(n.cache[i]=e.get(i),e.get(i))})},t.currentTick=NaN,t}(_r),Lr=(function(e){function t(t){var i=e.call(this)||this;return i.getHandler=t,i.cache=[],i}(0,c.__extends)(t,e),t.prototype.get=function(e){return this.getHandler(e,this.cache)}}(_r),function(e){function t(t){var i=e.call(this)||this;return i.source=t,i}return(0,c.__extends)(t,e),t.prototype.get=function(e){return this.source instanceof Array?this.source[e]:this.source.get(e)},t}(_r));function Er(e){return new Ar(e)}function Vr(e){return function(t){return Cr(t)?new wr((function(i){return e(t.get(i))})):e(t)}}function Sr(e){return function(t,i){return Cr(t)?Cr(i)?new wr((function(n){return e(t.get(n),i.get(n))})):new wr((function(n){return e(t.get(n),i)})):Cr(i)?new wr((function(n){return e(t,i.get(n))})):e(t,i)}}var Mr=Sr((function(e,t){return e+t})),Dr=Sr((function(e,t){return e-t})),Tr=Sr((function(e,t){return e*t})),kr=Sr((function(e,t){return e/t})),Ir=Sr((function(e,t){return Math.max(e,t)})),Wr=(Sr((function(e,t){return Math.min(e,t)})),Vr((function(e){return void 0===e||Number.isNaN(e)?0:e}))),Pr=Vr((function(e){return void 0===e?NaN:e})),Hr=Vr((function(e){return Math.abs(e)}));Vr((function(e){return Math.acos(e)})),Vr((function(e){return Math.asin(e)})),Vr((function(e){return Math.atan(e)})),Vr((function(e){return Math.ceil(e)})),Vr((function(e){return Math.cos(e)})),Vr((function(e){return Math.exp(e)})),Vr((function(e){return Math.floor(e)})),Vr((function(e){return Math.log(e)})),Vr((function(e){return Math.round(e)})),Vr((function(e){return Math.sin(e)})),Vr((function(e){return Math.sqrt(e)})),Vr((function(e){return Math.tan(e)}));function Rr(e){return new wr(e)}function Br(e,t,i){return Rr((function(n){var r=e.get(n);return void 0!==r?t(r):i}))}var Nr=function(){function e(){this.seriesData=[],this.plots=[],this.labels=[],this.mobileLabels=[]}return e.prototype.getResult=function(e){for(var t=[],i=0;i<this.seriesData.length;i++)Ar.currentTick=i,t[i]=e.get(i);return Ar.currentTick=NaN,t},e.prototype.updateResult=function(e,t,i){void 0===i&&(i=0);for(var n=i;n<this.seriesData.length;n++)Ar.currentTick=n,t[n]=e.get(n);Ar.currentTick=NaN},e.prototype.source=function(e){return Pr((t=this.sources(),i=e,Br(t,(function(e){return e[i]}),void 0)));var t,i},e.prototype.sources=function(){return new Lr(this.seriesData)},e.prototype.typicalPrice=function(){return Pr(Br(this.sources(),(function(e){return(e.high+e.low+e.close)/3}),void 0))},e.prototype.plot=function(e){this.plots.push(e)},e.prototype.label=function(e){e.styles||(e.styles={}),this.labels.push(e)},e.prototype.mobileLabel=function(e){this.mobileLabels.push(e)},e}(),Or=Symbol("indicatorParam"),Zr=Symbol("indicatorProps");Symbol("indicators");function Fr(e,t){var i=e.length-t.length;return t.map((function(t,n){return{time:e[n+i].time,value:t}}))}function Kr(e,t,i,n){return function(r,o,a){var s=Reflect.getOwnMetadata(Or,r,o)||[];s[a]={label:e,type:t,defaultValue:i,key:n||a.toString()},Reflect.defineMetadata(Or,s,r,o)}}function zr(e){return function(t,i,n){Reflect.defineMetadata(Zr,e,t,i)}}function Ur(e,t){var i=e.prototype,n=Reflect.getOwnMetadata(Zr,i,t),r=Reflect.getOwnMetadata(Or,i,t)||[],o=new Nr,a=new e(o),s=new WeakMap,l=new WeakMap,h=new WeakMap,u=function(e){return h.get(e)},d=function(e){var t=new Set;o.plots.forEach((function(e){var i=e.series,n=e.colorSeries,r=e.labelColorSeries;t.add(i),n&&t.add(n),r&&t.add(r),e.type===At.Area&&e.borderSeries&&t.add(e.borderSeries)})),o.labels.forEach((function(e){e.series&&t.add(e.series)})),o.mobileLabels.forEach((function(e){e.series&&t.add(e.series)})),t.forEach((function(t){var i=h.get(t);i?o.updateResult(t,i,e):h.set(t,o.getResult(t))}))},g=function(e,t,i,r){var o=i.precision;return e.reduce((function(e,i,a){var l;if(i.series&&void 0!==r&&t.length>0){var h=s.get(i.series);if(h){var u=h.map((function(e){return t[e]})).map((function(e){var t=e.data,i=e.color,n=e.colors,o=e.labelColors,a=e.visible,s=function(e,t){var i=an(e,(function(e){var i=e.time;return t-i}));return e[i]&&e[i].time===t?i:void 0}(t,r),l=void 0!==s&&t[s],c=i;return void 0!==s&&(c=o?o[s]:n?n[s]:i),{item:l,color:c,visible:!!a}})).find((function(e){return void 0!==e.item})),d=u&&!u.visible?"none":"block";if(i.forceShow&&(d="block"),i.title&&e.push({label:i.title,key:n.title+"["+a+"]",styles:(0,c.__assign)((0,c.__assign)({},i.styles),{display:d})}),u&&u.item){var g=void 0;if(i.formmater)g=null===(l=i.formmater)||void 0===l?void 0:l.call(i,u.item.value);else if(i.formatNumber||n.isFormatNum)g=Ji(u.item.value,3);else if(void 0!==i.precision||void 0!==o){g=function(e,t){var i=parseFloat(""+e);return isNaN(i)||isNaN(t)?"NaN":t<=0?i.toFixed(0):Ci()(e).toFixed(t).toString()}(u.item.value,Bi(i.precision)?i.precision:o)}else g=u.item.value;e.push({label:g.toString(),key:n.title+"["+a+"]Series",styles:(0,c.__assign)((0,c.__assign)({color:u.color},i.styles),{display:d})})}else e.push({label:"NaN",key:n.title+"["+a+"]Series",styles:(0,c.__assign)((0,c.__assign)({},i.styles),{display:d})})}}else i.title&&e.push({label:i.title,key:n.title+"["+a+"]",styles:(0,c.__assign)({},i.styles)});return e}),[])};function p(e,t){s.has(e)||s.set(e,t)}return{defaultProps:n,paramMetas:r,getResult:function(e,i,n){var s=r.map((function(e){if(void 0!==e){var t=br()(i,e.key);return void 0===t?e.defaultValue:t}}));o.seriesData=e,o.plots.splice(0),o.labels.splice(0),o.plots.splice(0),a[t].apply(a,s),d(0);var h=[];o.plots.forEach((function(e){var t=e.type,i=e.series,n=e.colorSeries,r=e.labelColorSeries,a=e.color,s=e.lineWidth,d=e.zIndex,g=void 0===d?-1:d,f=e.visible,m=(0,c.__rest)(e,["type","series","colorSeries","labelColorSeries","color","lineWidth","zIndex","visible"]),v=n&&u(n),y=r&&u(r),x=v?{colors:v}:{color:a},b=y?{labelColors:y}:{},_=(0,c.__assign)((0,c.__assign)({},x),b),C=u(i),w=Fr(o.seriesData,C);if(e.type===At.Area)if(e.borderSeries){var A=u(e.borderSeries),L=Fr(o.seriesData,A);h.push((0,c.__assign)((0,c.__assign)((0,c.__assign)((0,c.__assign)({},m),{chartType:t,lineWidth:s,data:w,borderData:L,visible:f}),_),{zIndex:g})),p(e.series,[h.length-1]),p(e.borderSeries,[h.length-1]),l.set(e,[h.length-1])}else h.push((0,c.__assign)((0,c.__assign)((0,c.__assign)((0,c.__assign)({},m),{chartType:t,lineWidth:s,data:w,visible:f}),_),{histBase:e.histBase,zIndex:g})),p(e.series,[h.length-1]),l.set(e,[h.length-1]);else{var E=(0,c.__assign)((0,c.__assign)({},m),{chartType:t,lineWidth:s,data:w,visible:f});h.push((0,c.__assign)((0,c.__assign)((0,c.__assign)({},E),_),{zIndex:g})),p(i,[h.length-1]),l.set(e,[h.length-1])}})),null===n||void 0===n||n(h)},updateResult:function(e,t,i){d(e),o.plots.forEach((function(i){var n=i.series,r=i.colorSeries,a=r&&u(r),s=l.get(i),c=u(n);if(s&&c)if(i.type===At.Area){for(var h=t[s[0]],d=h.data,g=h.borderData,p=e;p<o.seriesData.length;p++)d[p]={time:o.seriesData[p].time,value:c[p]};if(g&&i.borderSeries){var f=u(i.borderSeries);for(p=e;p<o.seriesData.length;p++)g[p]={time:o.seriesData[p].time,value:f[p]}}}else for(d=t[s[0]].data,p=e;p<o.seriesData.length;p++)d[p]=a?{time:o.seriesData[p].time,value:c[p],color:a[p]}:{time:o.seriesData[p].time,value:c[p]}}))},getLabel:function(e,t,i){return g(o.labels,t,i,e)},getMobileLabel:function(e,t){return g(o.labels,t,e)}}}var Yr=function(e){this.ctx=e},Xr=Vr((function(e){return Math.abs(e)<=1e-10})),Gr=(Vr((function(e){return isFinite(e)&&!Xr(e)})),Vr((function(e){return Number.isNaN(e)||void 0===e}))),jr=Sr((function(e,t){return e&&t})),qr=(Sr((function(e,t){return e||t})),Vr((function(e){return!e})),Sr((function(e,t){return e>t}))),Jr=(Sr((function(e,t){return e>=t})),Sr((function(e,t){return e<t}))),Qr=(Sr((function(e,t){return e<=t})),Sr((function(e,t){return e===t})));Sr((function(e,t){return e!==t}));function $r(e,t,i){return new wr((function(n){var r=Cr(t)?t.get(n):t,o=Cr(i)?i.get(n):i;return e.get(n)?r:o}))}function eo(e,t){return new wr((function(i){return e.get(i-t)}))}function to(e,t){var i=Er();return i.set(Dr(Mr(Wr(eo(i,1)),e),Wr(eo(e,t))))}function io(e,t){return $r(Gr(eo(e,t-1)),NaN,kr(to(e,t),t))}function no(e,t){var i=to(e,t),n=t-1,r=Er(),o=eo(r,1),a=kr(Mr(e,Tr(o,n)),t),s=$r(Gr(eo(e,n)),NaN,$r(Gr(o),kr(i,t),a));return r.set(s)}function ro(e,t){var i=to(e,t),n=Er(),r=eo(n,1),o=Mr(kr(Tr(2,Dr(e,r)),t+1),r),a=$r(Gr(eo(e,t-1)),NaN,$r(Gr(r),kr(i,t),o));return n.set(a)}function oo(e,t){return t=Math.round(t),Rr((function(i){for(var n=0,r=t;r>=0;r--){n+=(t-r)*e.get(i-r)}return 2*n/(t*(t+1))}))}function ao(e,t,i,n){return Rr((function(r){for(var o=n,a=r;a>r-t;a--)o=i(o,e.get(a),a);return o}))}function so(e,t){return ao(e,t,(function(e,t){return isNaN(t)||void 0===t?e:Math.max(e,t)}),Number.MIN_VALUE)}function lo(e,t){return ao(e,t,(function(e,t){return isNaN(t)||void 0===t?e:Math.min(e,t)}),Number.MAX_VALUE)}function co(e,t,i,n){return function(e){var t=Er();return t.set($r(Gr(e),eo(t,1),e))}(kr(Tr(100,Dr(e,lo(i,n))),Dr(so(t,n),lo(i,n))))}var ho,uo,go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.MA=function(e,t,i,n,r,o,a,s,l,c,h,u,d,g,p,f,m,v,y,x){var b=io(this.ctx.source(t),e),_=io(this.ctx.source(n),i),C=io(this.ctx.source(o),r),w=io(this.ctx.source(s),a),A=io(this.ctx.source(c),l),L=io(this.ctx.source(u),h),E=io(this.ctx.source(g),d),V=io(this.ctx.source(f),p),S=io(this.ctx.source(v),m),M=io(this.ctx.source(x),y);this.ctx.plot({series:b,type:At.Line,color:"@MA.colors[0]",lineWidth:"@MA.lineWidths[0]",visible:"@MA.visibles[0]"}),this.ctx.label({title:"MA("+e+"):",series:b}),this.ctx.plot({series:_,type:At.Line,color:"@MA.colors[1]",lineWidth:"@MA.lineWidths[1]",visible:"@MA.visibles[1]"}),this.ctx.label({title:"MA("+i+"):",series:_}),this.ctx.plot({series:C,type:At.Line,color:"@MA.colors[2]",lineWidth:"@MA.lineWidths[2]",visible:"@MA.visibles[2]"}),this.ctx.label({title:"MA("+r+"):",series:C}),this.ctx.plot({series:w,type:At.Line,color:"@MA.colors[3]",lineWidth:"@MA.lineWidths[3]",visible:"@MA.visibles[3]"}),this.ctx.label({title:"MA("+a+"):",series:w}),this.ctx.plot({series:A,type:At.Line,color:"@MA.colors[4]",lineWidth:"@MA.lineWidths[4]",visible:"@MA.visibles[4]"}),this.ctx.label({title:"MA("+l+"):",series:A}),this.ctx.plot({series:L,type:At.Line,color:"@MA.colors[5]",lineWidth:"@MA.lineWidths[5]",visible:"@MA.visibles[5]"}),this.ctx.label({title:"MA("+h+"):",series:L}),this.ctx.plot({series:E,type:At.Line,color:"@MA.colors[6]",lineWidth:"@MA.lineWidths[6]",visible:"@MA.visibles[6]"}),this.ctx.label({title:"MA("+d+"):",series:E}),this.ctx.plot({series:V,type:At.Line,color:"@MA.colors[7]",lineWidth:"@MA.lineWidths[7]",visible:"@MA.visibles[7]"}),this.ctx.label({title:"MA("+p+"):",series:V}),this.ctx.plot({series:S,type:At.Line,color:"@MA.colors[8]",lineWidth:"@MA.lineWidths[8]",visible:"@MA.visibles[8]"}),this.ctx.label({title:"MA("+m+"):",series:S}),this.ctx.plot({series:M,type:At.Line,color:"@MA.colors[9]",lineWidth:"@MA.lineWidths[9]",visible:"@MA.visibles[9]"}),this.ctx.label({title:"MA("+y+"):",series:M})},t.prototype.EMA=function(e,t,i,n,r,o,a,s,l,c,h,u,d,g,p,f,m,v,y,x){var b=ro(this.ctx.source(t),e),_=ro(this.ctx.source(n),i),C=ro(this.ctx.source(o),r),w=ro(this.ctx.source(s),a),A=ro(this.ctx.source(c),l),L=ro(this.ctx.source(u),h),E=ro(this.ctx.source(g),d),V=ro(this.ctx.source(f),p),S=ro(this.ctx.source(v),m),M=ro(this.ctx.source(x),y);this.ctx.plot({series:b,type:At.Line,color:"@EMA.colors[0]",lineWidth:"@EMA.lineWidths[0]",visible:"@EMA.visibles[0]"}),this.ctx.label({title:"EMA("+e+"):",series:b}),this.ctx.plot({series:_,type:At.Line,color:"@EMA.colors[1]",lineWidth:"@EMA.lineWidths[1]",visible:"@EMA.visibles[1]"}),this.ctx.label({title:"EMA("+i+"):",series:_}),this.ctx.plot({series:C,type:At.Line,color:"@EMA.colors[2]",lineWidth:"@EMA.lineWidths[2]",visible:"@EMA.visibles[2]"}),this.ctx.label({title:"EMA("+r+"):",series:C}),this.ctx.plot({series:w,type:At.Line,color:"@EMA.colors[3]",lineWidth:"@EMA.lineWidths[3]",visible:"@EMA.visibles[3]"}),this.ctx.label({title:"EMA("+a+"):",series:w}),this.ctx.plot({series:A,type:At.Line,color:"@EMA.colors[4]",lineWidth:"@EMA.lineWidths[4]",visible:"@EMA.visibles[4]"}),this.ctx.label({title:"EMA("+l+"):",series:A}),this.ctx.plot({series:L,type:At.Line,color:"@EMA.colors[5]",lineWidth:"@EMA.lineWidths[5]",visible:"@EMA.visibles[5]"}),this.ctx.label({title:"EMA("+h+"):",series:L}),this.ctx.plot({series:E,type:At.Line,color:"@EMA.colors[6]",lineWidth:"@EMA.lineWidths[6]",visible:"@EMA.visibles[6]"}),this.ctx.label({title:"EMA("+d+"):",series:E}),this.ctx.plot({series:V,type:At.Line,color:"@EMA.colors[7]",lineWidth:"@EMA.lineWidths[7]",visible:"@EMA.visibles[7]"}),this.ctx.label({title:"EMA("+p+"):",series:V}),this.ctx.plot({series:S,type:At.Line,color:"@EMA.colors[8]",lineWidth:"@EMA.lineWidths[8]",visible:"@EMA.visibles[8]"}),this.ctx.label({title:"EMA("+m+"):",series:S}),this.ctx.plot({series:M,type:At.Line,color:"@EMA.colors[9]",lineWidth:"@EMA.lineWidths[9]",visible:"@EMA.visibles[9]"}),this.ctx.label({title:"EMA("+y+"):",series:M})},t.prototype.WMA=function(e,t,i,n,r,o,a,s,l,c,h,u,d,g,p,f,m,v,y,x){var b=oo(this.ctx.source(t),e),_=oo(this.ctx.source(n),i),C=oo(this.ctx.source(o),r),w=oo(this.ctx.source(s),a),A=oo(this.ctx.source(c),l),L=oo(this.ctx.source(u),h),E=oo(this.ctx.source(g),d),V=oo(this.ctx.source(f),p),S=oo(this.ctx.source(v),m),M=oo(this.ctx.source(x),y);this.ctx.plot({series:b,type:At.Line,color:"@WMA.colors[0]",lineWidth:"@WMA.lineWidths[0]",visible:"@WMA.visibles[0]"}),this.ctx.label({title:"WMA("+e+"):",series:b}),this.ctx.plot({series:_,type:At.Line,color:"@WMA.colors[1]",lineWidth:"@WMA.lineWidths[1]",visible:"@WMA.visibles[1]"}),this.ctx.label({title:"WMA("+i+"):",series:_}),this.ctx.plot({series:C,type:At.Line,color:"@WMA.colors[2]",lineWidth:"@WMA.lineWidths[2]",visible:"@WMA.visibles[2]"}),this.ctx.label({title:"WMA("+r+"):",series:C}),this.ctx.plot({series:w,type:At.Line,color:"@WMA.colors[3]",lineWidth:"@WMA.lineWidths[3]",visible:"@WMA.visibles[3]"}),this.ctx.label({title:"WMA("+a+"):",series:w}),this.ctx.plot({series:A,type:At.Line,color:"@WMA.colors[4]",lineWidth:"@WMA.lineWidths[4]",visible:"@WMA.visibles[4]"}),this.ctx.label({title:"WMA("+l+"):",series:A}),this.ctx.plot({series:L,type:At.Line,color:"@WMA.colors[5]",lineWidth:"@WMA.lineWidths[5]",visible:"@WMA.visibles[5]"}),this.ctx.label({title:"WMA("+h+"):",series:L}),this.ctx.plot({series:E,type:At.Line,color:"@WMA.colors[6]",lineWidth:"@WMA.lineWidths[6]",visible:"@WMA.visibles[6]"}),this.ctx.label({title:"WMA("+d+"):",series:E}),this.ctx.plot({series:V,type:At.Line,color:"@WMA.colors[7]",lineWidth:"@WMA.lineWidths[7]",visible:"@WMA.visibles[7]"}),this.ctx.label({title:"WMA("+p+"):",series:V}),this.ctx.plot({series:S,type:At.Line,color:"@WMA.colors[8]",lineWidth:"@WMA.lineWidths[8]",visible:"@WMA.visibles[8]"}),this.ctx.label({title:"WMA("+m+"):",series:S}),this.ctx.plot({series:M,type:At.Line,color:"@WMA.colors[9]",lineWidth:"@WMA.lineWidths[9]",visible:"@WMA.visibles[9]"}),this.ctx.label({title:"WMA("+y+"):",series:M})},t.prototype.MACD=function(e,t,i,n){var r=this.ctx.source(n),o=Dr(ro(r,e),ro(r,t)),a=ro(o,i),s=Dr(o,a);this.ctx.plot({series:s,type:At.Bar,colorSeries:Br(s,(function(e){return e>=0?"volume.upBarColor":"volume.downBarColor"}),"defaultColor"),labelColorSeries:Br(s,(function(e){return e>=0?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),visible:"@MACD.visibles.MACD"}),this.ctx.plot({series:o,type:At.Line,color:"@MACD.colors.DEA",lineWidth:"@MACD.lineWidths.DEA",visible:"@MACD.visibles.DEA"}),this.ctx.plot({series:a,type:At.Line,color:"@MACD.colors.DIF",lineWidth:"@MACD.lineWidths.DIF",visible:"@MACD.visibles.DIF"}),this.ctx.label({title:"MACD("+e+", "+t+", "+i+")"}),this.ctx.label({series:o}),this.ctx.label({series:a}),this.ctx.label({series:s})},t.prototype.VOL=function(e){var t=this.ctx.source("volume"),i=this.ctx.source("quantity");if(this.ctx.plot({series:t,type:At.Bar,colorSeries:Br(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upBarColor":"volume.downBarColor"}),"defaultColor"),labelColorSeries:Br(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),isScaleCenter:!1}),this.ctx.plot({series:i,type:At.Bar,labelColorSeries:Br(this.ctx.sources(),(function(e){var t=e.open;return e.close>=t?"volume.upTextColor":"volume.downTextColor"}),"defaultColor"),visible:"@VOL.visibles[0]",isScaleCenter:!1,yAxisIndex:"1"}),e){var n=io(t,e);this.ctx.plot({series:n,type:At.Area,color:"@VOL.maColor",opacity:.6}),this.ctx.label({title:"Vol({{baseAsset}})",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0}),this.ctx.label({series:n})}else this.ctx.label({title:"Vol({{baseAsset}}):",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0})},t.prototype.TRIX=function(e){var t=ro(ro(ro(this.ctx.source("close"),e),e),e);this.ctx.plot({series:t,type:At.Line,color:"@TRIX.color",lineWidth:"@TRIX.lineWidth"}),this.ctx.label({title:"TRIX("+e+"):",series:t})},(0,c.__decorate)([zr({id:"@MA",title:"MA",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length 0","INT",7,"periods[0]")),(0,c.__param)(1,Kr("Source 0","SOURCE","close","sources[0]")),(0,c.__param)(2,Kr("Length 1","INT",25,"periods[1]")),(0,c.__param)(3,Kr("Source 1","SOURCE","close","sources[1]")),(0,c.__param)(4,Kr("Length 2","INT",99,"periods[2]")),(0,c.__param)(5,Kr("Source 2","SOURCE","close","sources[2]")),(0,c.__param)(6,Kr("Length 3","INT",120,"periods[3]")),(0,c.__param)(7,Kr("Source 3","SOURCE","close","sources[3]")),(0,c.__param)(8,Kr("Length 4","INT",150,"periods[4]")),(0,c.__param)(9,Kr("Source 4","SOURCE","close","sources[4]")),(0,c.__param)(10,Kr("Length 5","INT",0,"periods[5]")),(0,c.__param)(11,Kr("Source 5","SOURCE","close","sources[5]")),(0,c.__param)(12,Kr("Length 6","INT",0,"periods[6]")),(0,c.__param)(13,Kr("Source 6","SOURCE","close","sources[6]")),(0,c.__param)(14,Kr("Length 7","INT",0,"periods[7]")),(0,c.__param)(15,Kr("Source 7","SOURCE","close","sources[7]")),(0,c.__param)(16,Kr("Length 8","INT",0,"periods[8]")),(0,c.__param)(17,Kr("Source 8","SOURCE","close","sources[8]")),(0,c.__param)(18,Kr("Length 9","INT",0,"periods[9]")),(0,c.__param)(19,Kr("Source 9","SOURCE","close","sources[9]")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"MA",null),(0,c.__decorate)([zr({id:"@EMA",title:"EMA",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length 1","INT",7,"periods[0]")),(0,c.__param)(1,Kr("Source 1","SOURCE","close","sources[0]")),(0,c.__param)(2,Kr("Length 2","INT",25,"periods[1]")),(0,c.__param)(3,Kr("Source 2","SOURCE","close","sources[1]")),(0,c.__param)(4,Kr("Length 3","INT",99,"periods[2]")),(0,c.__param)(5,Kr("Source 3","SOURCE","close","sources[2]")),(0,c.__param)(6,Kr("Length 4","INT",120,"periods[3]")),(0,c.__param)(7,Kr("Source 4","SOURCE","close","sources[3]")),(0,c.__param)(8,Kr("Length 5","INT",120,"periods[4]")),(0,c.__param)(9,Kr("Source 5","SOURCE","close","sources[4]")),(0,c.__param)(10,Kr("Length 6","INT",120,"periods[5]")),(0,c.__param)(11,Kr("Source 6","SOURCE","close","sources[5]")),(0,c.__param)(12,Kr("Length 7","INT",0,"periods[6]")),(0,c.__param)(13,Kr("Source 7","SOURCE","close","sources[6]")),(0,c.__param)(14,Kr("Length 8","INT",0,"periods[7]")),(0,c.__param)(15,Kr("Source 8","SOURCE","close","sources[7]")),(0,c.__param)(16,Kr("Length 9","INT",0,"periods[8]")),(0,c.__param)(17,Kr("Source 9","SOURCE","close","sources[8]")),(0,c.__param)(18,Kr("Length 10","INT",0,"periods[9]")),(0,c.__param)(19,Kr("Source 10","SOURCE","close","sources[9]")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"EMA",null),(0,c.__decorate)([zr({id:"@WMA",title:"WMA",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length 1","INT",7,"periods[0]")),(0,c.__param)(1,Kr("Source 1","SOURCE","close","sources[0]")),(0,c.__param)(2,Kr("Length 2","INT",25,"periods[1]")),(0,c.__param)(3,Kr("Source 2","SOURCE","close","sources[1]")),(0,c.__param)(4,Kr("Length 3","INT",99,"periods[2]")),(0,c.__param)(5,Kr("Source 3","SOURCE","close","sources[2]")),(0,c.__param)(6,Kr("Length 4","INT",120,"periods[3]")),(0,c.__param)(7,Kr("Source 4","SOURCE","close","sources[3]")),(0,c.__param)(8,Kr("Length 5","INT",120,"periods[4]")),(0,c.__param)(9,Kr("Source 5","SOURCE","close","sources[4]")),(0,c.__param)(10,Kr("Length 6","INT",120,"periods[5]")),(0,c.__param)(11,Kr("Source 6","SOURCE","close","sources[5]")),(0,c.__param)(12,Kr("Length 7","INT",0,"periods[6]")),(0,c.__param)(13,Kr("Source 7","SOURCE","close","sources[6]")),(0,c.__param)(14,Kr("Length 8","INT",0,"periods[7]")),(0,c.__param)(15,Kr("Source 8","SOURCE","close","sources[7]")),(0,c.__param)(16,Kr("Length 9","INT",0,"periods[8]")),(0,c.__param)(17,Kr("Source 9","SOURCE","close","sources[8]")),(0,c.__param)(18,Kr("Length 10","INT",0,"periods[9]")),(0,c.__param)(19,Kr("Source 10","SOURCE","close","sources[9]")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"WMA",null),(0,c.__decorate)([zr({id:"@MACD",title:"MACD",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Fast Length","INT",12,"fastPeriod")),(0,c.__param)(1,Kr("Slow Length","INT",26,"slowPeriod")),(0,c.__param)(2,Kr("Signal Length","INT",9,"signalPeriod")),(0,c.__param)(3,Kr("Source","SOURCE","open","source")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number,Number,String]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"MACD",null),(0,c.__decorate)([zr({id:"@VOL",title:"VOL",isHistBase:!1,isScaleCenter:!1,isFormatNum:!0}),(0,c.__param)(0,Kr("Period","INT",0,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"VOL",null),(0,c.__decorate)([zr({id:"@TRIX",title:"TRIX",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",9,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"TRIX",null),t}(Yr),po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.RSI=function(e,t,i){var n=this.ctx.source("close"),r=eo(n,1),o=Ir(Dr(n,r),0),a=Ir(Dr(r,n),0),s=kr(no(o,e),no(a,e)),l=kr(no(o,e),no(a,t)),c=kr(no(o,e),no(a,i)),h=Dr(100,kr(100,Mr(1,s))),u=Dr(100,kr(100,Mr(1,l))),d=Dr(100,kr(100,Mr(1,c)));this.ctx.plot({series:h,type:At.Line,color:"@RSI.colors[0]",lineWidth:"@RSI.lineWidths[0]",visible:"@RSI.visibles[0]"}),this.ctx.plot({series:u,type:At.Line,color:"@RSI.colors[1]",lineWidth:"@RSI.lineWidths[1]",visible:"@RSI.visibles[1]"}),this.ctx.plot({series:d,type:At.Line,color:"@RSI.colors[2]",lineWidth:"@RSI.lineWidths[2]",visible:"@RSI.visibles[2]"}),this.ctx.label({title:"RSI("+e+")",series:h}),this.ctx.label({title:"RSI("+t+")",series:u}),this.ctx.label({title:"RSI("+i+")",series:d})},t.prototype.CCI=function(e){var t=this.ctx.typicalPrice(),i=io(t,e),n=function(e,t){var i=io(e,t);return Rr((function(n){for(var r=i.get(n),o=0,a=n;a>n-t;a--)o+=Math.abs(e.get(a)-r);return o/t}))}(t,e),r=kr(Dr(t,i),Tr(n,.015));this.ctx.plot({series:r,type:At.Line,color:"@CCI.color",lineWidth:"@CCI.lineWidth"}),this.ctx.label({title:"CCI("+e+")",series:r})},(0,c.__decorate)([zr({id:"@RSI",title:"RSI",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length 1","INT",6,"periods[0]")),(0,c.__param)(1,Kr("Length 2","INT",12,"periods[1]")),(0,c.__param)(2,Kr("Length 3","INT",24,"periods[2]")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"RSI",null),(0,c.__decorate)([zr({id:"@CCI",title:"CCI",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",20,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"CCI",null),t}(Yr),fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.BOLL=function(e,t){var i=this.ctx.source("close"),n=Tr(function(e,t){var i=io(e,t);return Rr((function(n){for(var r=i.get(n),o=0,a=n;a>n-t;a--)o+=Math.pow(e.get(a)-r,2);return Math.sqrt(o/t)}))}(i,e),t),r=io(i,e),o=Mr(r,n),a=Dr(r,n);this.ctx.plot({series:o,type:At.Line,color:"@BOLL.colors[0]",lineWidth:"@BOLL.lineWidths[0]",visible:"@BOLL.visibles[0]"}),this.ctx.plot({series:r,type:At.Line,color:"@BOLL.colors[1]",lineWidth:"@BOLL.lineWidths[1]",visible:"@BOLL.visibles[1]"}),this.ctx.plot({series:a,type:At.Line,color:"@BOLL.colors[2]",lineWidth:"@BOLL.lineWidths[2]",visible:"@BOLL.visibles[2]"}),this.ctx.plot({series:o,borderSeries:a,type:At.Area,color:"boll.fillColor"}),this.ctx.label({title:"BOLL("+e+", "+t+")"}),this.ctx.label({title:"UP",series:o}),this.ctx.label({title:"MB",series:r}),this.ctx.label({title:"DN",series:a})},(0,c.__decorate)([zr({id:"@BOLL",title:"BOLL",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",21,"period")),(0,c.__param)(1,Kr("Multipler","INT",2,"stdDev")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"BOLL",null),t}(Yr),mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.KDJ=function(e,t,i){var n=this.ctx.source("close"),r=this.ctx.source("low"),o=this.ctx.source("high"),a=lo(r,e),s=so(o,e),l=$r(Qr(a,s),100,kr(Tr(100,Dr(n,a)),Dr(s,a))),c=Er(100),h=Er(100),u=c.set(Mr(Tr(1-1/t,eo(c,1)),Tr(1/t,l))),d=h.set(Mr(Tr(1-1/t,eo(h,1)),Tr(1/t,u))),g=Dr(Tr(u,3),Tr(d,2));this.ctx.plot({series:u,type:At.Line,color:"@KDJ.colors[0]",lineWidth:"@KDJ.lineWidths[0]",visible:"@KDJ.visibles[0]"}),this.ctx.plot({series:d,type:At.Line,color:"@KDJ.colors[1]",lineWidth:"@KDJ.lineWidths[1]",visible:"@KDJ.visibles[1]"}),this.ctx.plot({series:g,type:At.Line,color:"@KDJ.colors[2]",lineWidth:"@KDJ.lineWidths[2]",visible:"@KDJ.visibles[2]"}),this.ctx.label({title:"KDJ("+e+", "+t+", "+i+")"}),this.ctx.label({title:"K",series:u}),this.ctx.label({title:"D",series:d}),this.ctx.label({title:"J",series:g})},(0,c.__decorate)([zr({id:"@KDJ",title:"KDJ",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("K%","INT",9,"period[0]")),(0,c.__param)(1,Kr("D%","INT",3,"period[1]")),(0,c.__param)(2,Kr("Length","INT",3,"period[2]")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"KDJ",null),t}(Yr),vo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.VWAP=function(e){var t=this.ctx.source("volume"),i=this.ctx.typicalPrice(),n=kr(to(Tr(i,t),e),to(t,e));this.ctx.plot({series:n,type:At.Line,color:"@VWAP.color",lineWidth:"@VWAP.lineWidth"}),this.ctx.label({title:"VWAP("+e+")",series:n})},t.prototype.OBV=function(){var e=this.ctx.source("volume"),t=this.ctx.source("close"),i=$r(qr(t,eo(t,1)),1,$r(Jr(t,eo(t,1)),-1,0)),n=Er(),r=n.set(Mr(Wr(eo(n,1)),Tr(i,e)));this.ctx.plot({series:r,type:At.Line,color:"@OBV.color",lineWidth:"@OBV.lineWidth"}),this.ctx.label({title:"OBV",series:r})},t.prototype.AVL=function(){var e=kr(Mr(Mr(this.ctx.source("open"),this.ctx.source("high")),Mr(this.ctx.source("low"),this.ctx.source("close"))),4),t=this.ctx.source("volume"),i=Er(),n=Er(),r=n.set(Mr(Tr(e,t),Wr(eo(n,1)))),o=i.set(Mr(t,Wr(eo(i,1)))),a=kr(r,o);this.ctx.plot({series:a,type:At.Line,color:"@AVL.color",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:a})},(0,c.__decorate)([zr({id:"@VWAP",title:"VWAP",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",14,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"VWAP",null),(0,c.__decorate)([zr({id:"@OBV",title:"OBV",isHistBase:!1,isScaleCenter:!0}),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"OBV",null),(0,c.__decorate)([zr({id:"@AVL",title:"AVL",isHistBase:!0,isScaleCenter:!0}),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"AVL",null),t}(Yr),yo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.StochRSI=function(e,t,i,n){var r=function(e,t){var i=eo(e,1),n=Ir(Dr(e,i),0),r=Ir(Dr(i,e),0),o=kr(no(n,t),no(r,t));return Dr(100,kr(100,Mr(1,o)))}(this.ctx.source("close"),e),o=io(co(r,r,r,t),i),a=io(o,n);this.ctx.plot({series:o,type:At.Line,color:"@Stoch RSI.colors.smoothK",lineWidth:"@Stoch RSI.lineWidths.smoothK",visible:"@Stoch RSI.visibles.smoothK"}),this.ctx.plot({series:a,type:At.Line,color:"@Stoch RSI.colors.smoothD",lineWidth:"@Stoch RSI.lineWidths.smoothD",visible:"@Stoch RSI.visibles.smoothD"}),this.ctx.label({title:"Stoch RSI("+e+", "+t+", "+i+", "+n+")"}),this.ctx.label({series:o}),this.ctx.label({series:a})},t.prototype.WR=function(e){var t=this.ctx.source("close"),i=this.ctx.source("high"),n=this.ctx.source("low"),r=Tr(kr(Dr(so(i,e),t),Dr(so(i,e),lo(n,e))),-100);this.ctx.plot({series:r,type:At.Line,color:"@Wm %R.color",lineWidth:"@Wm %R.lineWidth"}),this.ctx.label({title:"Wm %R("+e+")",series:r})},t.prototype.MTM=function(e,t){var i=this.ctx.source(t),n=Dr(i,eo(i,e));this.ctx.plot({series:n,type:At.Line,color:"@MTM.color",lineWidth:"@MTM.lineWidth"}),this.ctx.label({title:"MTM("+e+")",series:n})},(0,c.__decorate)([zr({id:"@Stoch RSI",title:"Stoch RSI",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("LengthRSI","INT",14,"rsiPeriod")),(0,c.__param)(1,Kr("LengthStoch","INT",14,"stochasticPeriod")),(0,c.__param)(2,Kr("SmoothK","INT",3,"kPeriod")),(0,c.__param)(3,Kr("SmoothD","INT",3,"dPeriod")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number,Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"StochRSI",null),(0,c.__decorate)([zr({id:"@Wm %R",title:"Wm %R",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",14,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"WR",null),(0,c.__decorate)([zr({id:"@MTM",title:"MTM",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",14,"period")),(0,c.__param)(1,Kr("Source","SOURCE","close","source")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,String]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"MTM",null),t}(Yr),xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,c.__extends)(t,e),t.prototype.DMI=function(e){var t=this.ctx.source("high"),i=this.ctx.source("low"),n=this.ctx.source("close"),r=Dr(t,eo(t,1)),o=Dr(eo(i,1),i),a=$r(jr(qr(r,o),qr(r,0)),r,0),s=$r(jr(qr(o,r),qr(o,0)),o,0),l=Ir(Dr(t,i),Ir(Hr(Dr(t,eo(n,1))),Hr(Dr(i,eo(n,1))))),c=no(a,e),h=no(s,e),u=no(l,e),d=Tr(kr(c,u),100),g=Tr(kr(h,u),100),p=no(Tr(Hr(kr(Dr(d,g),Mr(d,g))),100),e);this.ctx.plot({type:At.Line,series:d,color:"@DMI.colors.pDI",lineWidth:"@DMI.lineWidths.pDI",visible:"@DMI.visibles.pDI"}),this.ctx.plot({type:At.Line,series:g,color:"@DMI.colors.nDI",lineWidth:"@DMI.lineWidths.nDI",visible:"@DMI.visibles.nDI"}),this.ctx.plot({type:At.Line,series:p,color:"@DMI.colors.dx",lineWidth:"@DMI.lineWidths.dx",visible:"@DMI.visibles.dx"}),this.ctx.label({title:"DMI("+e+")"}),this.ctx.label({series:d,precision:4}),this.ctx.label({series:g,precision:4}),this.ctx.label({series:p,precision:4})},t.prototype.EMV=function(e,t){var i=this.ctx.source("high"),n=this.ctx.source("low"),r=this.ctx.source("volume"),o=Dr(kr(Mr(i,n),2),kr(Mr(eo(i,1),eo(n,1)),2)),a=kr(kr(r,t),Dr(i,n)),s=io(kr(o,a),e);this.ctx.plot({type:At.Line,series:s,color:"@EMV.color",lineWidth:"@EMV.lineWidth"}),this.ctx.label({title:"EMV("+t+", "+e+")"}),this.ctx.label({series:s,precision:4})},t.prototype.SAR=function(e,t){var i=this.ctx.source("low"),n=this.ctx.source("high"),r=[],o=[],a=[],s=[],l=Rr((function(l){return l>1?(o[l]=o[l-1]+s[l-1]*(a[l-1]-o[l-1]),a[l]=a[l-1],s[l]=s[l-1],r[l]=r[l-1],r[l]?(o[l]=Math.min(o[l],i.get(l-2),i.get(l-1)),n.get(l)>a[l]&&(a[l]=n.get(l),s[l]=Math.min(s[l]+e,t))):(o[l]=Math.max(o[l],n.get(l-2),n.get(l-1)),i.get(l)<a[l]&&(a[l]=i.get(l),s[l]=Math.min(s[l]+e,t))),(r[l]&&i.get(l)<o[l]||!r[l]&&n.get(l)>o[l])&&(s[l]=e,o[l]=a[l],r[l]=!r[l],a[l]=r[l]?n.get(l):i.get(l))):(o[l]=i.get(l),a[l]=n.get(l),s[l]=e,r[l]=!0),o[l]}));this.ctx.plot({type:At.Point,series:l,color:"@SAR.color"}),this.ctx.label({title:"SAR("+e+", "+t+")"}),this.ctx.label({series:l})},(0,c.__decorate)([zr({id:"@DMI",title:"DMI",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",14,"period")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"DMI",null),(0,c.__decorate)([zr({id:"@EMV",title:"EMV",isHistBase:!1,isScaleCenter:!0}),(0,c.__param)(0,Kr("Length","INT",14,"period")),(0,c.__param)(1,Kr("Divisor","FLOAT",1e4,"x")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"EMV",null),(0,c.__decorate)([zr({id:"@SAR",title:"SAR",isHistBase:!0,isScaleCenter:!0}),(0,c.__param)(0,Kr("Start","FLOAT",.02,"step")),(0,c.__param)(1,Kr("Maximum","FLOAT",.2,"x")),(0,c.__metadata)("design:type",Function),(0,c.__metadata)("design:paramtypes",[Number,Number]),(0,c.__metadata)("design:returntype",void 0)],t.prototype,"SAR",null),t}(Yr);!function(e){e.INT="INT",e.FLOAT="FLOAT",e.SOURCE="SOURCE",e.SELECT="SELECT",e.STRING="STRING"}(ho||(ho={})),function(e){e.HIGH="high",e.LOW="low",e.OPEN="open",e.CLOSE="close"}(uo||(uo={}));var bo={VOL:function(){return Ur(go,"VOL")},MA:function(){return Ur(go,"MA")},EMA:function(){return Ur(go,"EMA")},WMA:function(){return Ur(go,"WMA")},MACD:function(){return Ur(go,"MACD")},RSI:function(){return Ur(po,"RSI")},BOLL:function(){return Ur(fo,"BOLL")},KDJ:function(){return Ur(mo,"KDJ")},OBV:function(){return Ur(vo,"OBV")},CCI:function(){return Ur(po,"CCI")},VWAP:function(){return Ur(vo,"VWAP")},StochRSI:function(){return Ur(yo,"StochRSI")},WR:function(){return Ur(yo,"WR")},AVL:function(){return Ur(vo,"AVL")},DMI:function(){return Ur(xo,"DMI")},MTM:function(){return Ur(yo,"MTM")},TRIX:function(){return Ur(go,"TRIX")},EMV:function(){return Ur(xo,"EMV")},SAR:function(){return Ur(xo,"SAR")}},_o=["@VOL","@EMV","@VWAP","@OBV","@AVL"];var Co={mousedown:{eventName:"mousedown",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mousemove:{eventName:"mousemove",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseup:{eventName:"mouseup",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseout:{eventName:"mouseout",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},wheel:{eventName:"wheel",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},dblclick:{eventName:"dblclick",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},resize:{eventName:"resize",handler:function(e){e()}},gesturestart:{eventName:"gesturestart",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gesturechange:{eventName:"gesturechange",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gestureend:{eventName:"gestureend",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},wo={mousedown:{eventName:"touchstart",handler:function(e,t){var i={originEvent:t};Array.from(t.targetTouches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},mousemove:{eventName:"touchmove",handler:function(e,t){var i={originEvent:t};Array.from(t.touches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},mouseup:{eventName:"touchend",handler:function(e,t){var i={originEvent:t};Array.from(t.changedTouches).forEach((function(e,t){var n=0===t?"clientY":"clientY"+t;i[0===t?"clientX":"clientX"+t]=e.clientX,i[n]=e.clientY})),e(i)}},wheel:{eventName:"wheel",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler:function(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}};const Ao={eventPool:new Map,getEventName:function(e){var t=(0,c.__read)(e.split("."),2),i=t[0],n=t[1],r=Object.assign(Co[i]||{},{nameSpace:n}),o=Object.assign(wo[i]||{},{nameSpace:n});return r.eventName===o.eventName?[r]:[r,o]},on:function(e,t,i,n){var r=this;return void 0===n&&(n=!1),this.getEventName(t).forEach((function(t){var o,a=t.eventName,s=t.nameSpace,l=t.handler;if(a){var c=l.bind(null,i),h=r.eventPool.get(e);if(!h){var u=new Map;(o={})[a]=u,h=o,r.eventPool.set(e,h)}h[a]||(h[a]=new Map);var d=new Map;d.set(i,c),h[a].set(s,d),e.addEventListener(a,c,n)}})),this},off:function(e,t,i,n){var r=this;void 0===n&&(n=!1);var o=this.getEventName(t),a=this.eventPool.get(e);return o.forEach((function(t){var o=t.eventName,s=t.nameSpace;if(a&&a[o]){var l=a[o],c=l.get(s);if(i){if(c&&i){var h=c.get(i);h&&e.removeEventListener(o,h,n)}}else s?c&&Array.from(c.values()).forEach((function(t){e.removeEventListener(o,t,n)})):Array.from(l.values()).forEach((function(t){Array.from(t.values()).forEach((function(t){e.removeEventListener(o,t,n)}))})),l.clear();0===l.size&&delete a[o],0===Object.keys(a).length&&r.eventPool.delete(e)}})),this}};var Lo=i("pY2T");const Eo=function(){function e(e,t){this.v0=new lr(e.x,e.y),this.v1=new lr(t.x,t.y)}return e.getPedalPointOfLine=function(e,t,i){var n=new lr(e.x-t.x,e.y-t.y),r=new lr(i.x-t.x,i.y-t.y),o=cr.getDotMultiply(n,r)/r.getModelLength();return new lr(t.x,t.y).add(r.normalize().scale(o))},e.getNearestPointToSegment=function(e,t,i){var n=this.getPedalPointOfLine(e,t,i);return this.isPointAtSegment(n,t,i)?n.toXY():cr.getSquareDistance(e,t)<cr.getSquareDistance(e,i)?t:i},e.getDistanceToLine=function(e,t,i){var n=new lr(e.x-t.x,e.y-t.y),r=new lr(i.x-t.x,i.y-t.y),o=cr.getCrossMultiply(n,r);return Math.abs(o/r.getModelLength())},e.getIntersectWidthBound=function(e,t,i){for(var n=i.getVetexs(),r=null,o=0,a=n.length;o<a;o++){var s={x:n[o][0],y:n[o][1]},l={x:n[(o+1)%a][0],y:n[(o+1)%a][1]},c=this.getIntersectOfSegmentPt(e,t,s,l);if(c&&(r||(r=c),r&&!cr.isSamePoint(r,c)))return[r,c]}return[]},e.isPointAtLine=function(e,t,i,n){var r=new lr(i.x-t.x,i.y-t.y),o=new lr(e.x-t.x,e.y-t.y),a=cr.getCrossMultiply(r,o)/r.getModelLength();return cr.isZero(a,n)},e.isPointAtSegment=function(e,t,i,n){return!!this.isPointAtLine(e,t,i,n)&&(this.isHorizontalLine(t,i)?(e.x-t.x)*(e.x-i.x)<=0:(this.isVerticalLine(t,i)||(e.x-t.x)*(e.x-i.x)<=0)&&(e.y-t.y)*(e.y-i.y)<=0)},e.isHorizontalLine=function(e,t){return cr.isZero(e.y-t.y)},e.isVerticalLine=function(e,t){return cr.isZero(e.x-t.x)},e.isParalled=function(e,t,i,n,r){var o=new lr(t.x-e.x,t.y-e.y),a=new lr(n.x-i.x,n.y-i.y),s=cr.getCrossMultiply(o,a);return cr.isZero(s,r)},e.isCollinear=function(e,t,i,n,r){var o=new lr(t.x-e.x,t.y-e.y),a=new lr(n.x-i.x,n.y-i.y),s=new lr(e.x-i.x,e.y-i.y),l=cr.getCrossMultiply(o,a),c=cr.getCrossMultiply(o,s);return cr.isZero(l,r)&&cr.isZero(c,r)},e.isIntersect=function(e,t,i,n,r){return!this.isParalled(e,t,i,n,r)},e.getIntersectPt=function(e,t,i,n){if(!this.isParalled(e,t,i,n)){var r=new lr(t.x-e.x,t.y-e.y),o=new lr(n.x-i.x,n.y-i.y),a=new lr(i.x-e.x,i.y-e.y),s=new lr(n.x-e.x,n.y-e.y),l=Math.abs(cr.getCrossMultiply(r,a)),c=Math.abs(cr.getCrossMultiply(r,s)),h=0;return h=cr.isBothSide(r,a,s)?l/(l+c):l/(l-c),new lr(i.x,i.y).clone().add(o.clone().scale(h)).toXY()}},e.getIntersectOfSegmentPt=function(e,t,i,n){var r=this.getIntersectPt(e,t,i,n);if(r)return this.isPointAtSegment(r,i,n)?r:void 0},e.isIntersectOfSegment=function(e,t,i,n,r){var o=new lr(t.x-e.x,t.y-e.y),a=new lr(n.x-i.x,n.y-i.y),s=new lr(i.x-e.x,i.y-e.y),l=new lr(n.x-e.x,n.y-e.y),c=new lr(e.x-i.x,e.y-i.y),h=new lr(t.x-i.x,t.y-i.y);return cr.isBothSide(o,s,l,r)&&cr.isBothSide(a,c,h,r)},e.prototype.getDirVector=function(){var e=this.v1.x-this.v0.x,t=this.v1.y-this.v0.y;return new lr(e,t)},e.prototype.getDirection=function(){return this.getDirVector().normalize()},e.prototype.getLineLength=function(){return this.getDirVector().getModelLength()},e.prototype.getBound=function(){var e=Math.min(this.v0.x,this.v1.x),t=Math.min(this.v0.y,this.v1.y),i=Math.abs(this.v1.x-this.v0.x),n=Math.abs(this.v1.y-this.v0.y);return new hr(e,t,i,n)},e.prototype.isPointAtLine=function(e,t){var i=this.getDirVector(),n=new lr(e.x-this.v0.x,e.y-this.v1.y),r=cr.getCrossMultiply(i,n);return cr.isZero(r,t)},e.prototype.isParalled=function(e,t){var i=this.getDirection(),n=e.getDirection(),r=cr.getCrossMultiply(i,n);return cr.isZero(r,t)},e.prototype.isCollinear=function(e,t){var i=e.getDirection(),n=new lr(e.v0.x-this.v0.x,e.v0.y-this.v0.y),r=cr.getCrossMultiply(i,n);return this.isParalled(e,t)&&cr.isZero(r,t)},e.prototype.isIntersect=function(e,t){return!this.isParalled(e,t)},e.prototype.getIntersectPt=function(e){if(this.isParalled(e))return this.isCollinear(e)?void console.warn("These lines is collinear"):void console.warn("These lines is paralled");var t=this.getDirVector(),i=e.getDirVector(),n=new lr(e.v0.x-this.v0.x,e.v0.y-this.v0.y),r=new lr(e.v1.x-this.v0.x,e.v1.y-this.v0.y),o=Math.abs(cr.getCrossMultiply(t,n)),a=Math.abs(cr.getCrossMultiply(t,r)),s=0;return s=cr.isBothSide(t,n,r)?o/(o+a):o/(o-a),e.v0.clone().add(i.clone().scale(s))},e.prototype.isIntersectOfSegment=function(e){var t=this.getDirVector(),i=e.getDirVector(),n=new lr(e.v0.x-this.v0.x,e.v0.y-this.v0.y),r=new lr(e.v1.x-this.v0.x,e.v1.y-this.v0.y),o=new lr(this.v0.x-e.v0.x,this.v0.y-e.v0.y),a=new lr(this.v1.x-e.v0.x,this.v1.y-e.v0.y);return cr.isBothSide(t,n,r)&&cr.isBothSide(i,o,a)},e.prototype.isIntersectOfBound=function(e){return e.isIntersectOfSegment(cr.transformPointToArray(this.v0),cr.transformPointToArray(this.v1))},e}();var Vo=function(){function e(e){this.coordinates=e,this.coordinates=e}return e.prototype.getBound=function(){for(var e=Number.MAX_VALUE,t=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=-Number.MAX_VALUE,r=this.coordinates.slice(0);r.length>0;){var o=r.pop();if(void 0===o)break;Array.isArray(o)?r=r.concat(o):(e=Math.min(o.x,e),i=Math.max(o.x,i),t=Math.min(o.y,t),n=Math.max(o.y,n))}return new hr(e,t,i-e,n-t)},e.prototype.getNearestPoint=function(e){for(var t=e,i=Number.MAX_SAFE_INTEGER,n=this.coordinates.slice(0);n.length>0;){var r=n.pop();if(Array.isArray(r))if(Ni(r[0]))for(var o=0,a=r.length;o<a-1;o++){var s=this.getDisAndPointAtLine(e,r[o],r[o+1]),l=s.pos;i>(c=s.dis)&&(i=c,t=l)}else n=n.concat(r);else if(Ni(r)&&n[n.length-1]){var c,h=this.getDisAndPointAtLine(e,r,n[n.length-1]);l=h.pos;i>(c=h.dis)&&(i=c,t=l)}}return{point:t,dis:i}},e.prototype.getDisAndPointAtLine=function(e,t,i){var n=Eo.getNearestPointToSegment(e,t,i);return{pos:n,dis:cr.getSquareDistance(e,n)}},e}();const So={Vector2:lr,Line:Eo,Bound:hr,Polyline:Vo,Algorith:cr};var Mo;!function(e){e.AUTO="auto"}(Mo||(Mo={}));const Do=function(e){function t(){var t=this.constructor,i=e.call(this)||this;return i.id=sn(),i.isBatchUpdate=!0,i.isDataUpdate=!0,i.preContextStyles={},i.initEvents(),i._constructor=t,i}return(0,c.__extends)(t,e),t.prototype.initEvents=function(){this.watch("data",this.onDataChange.bind(this))},Object.defineProperty(t.prototype,"sceneCanvas",{get:function(){return this._sceneCanvas||(this._sceneCanvas=Zi("canvas",{})),this._sceneCanvas},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){return this.setAttr("data",e),this},t.prototype.setParent=function(e){return this._parent=e,this},t.prototype.getParent=function(){return this._parent},t.prototype.overrideSize=function(e){var t=e.width,i=e.height,n=(0,c.__read)([this.getAttr("width"),this.getAttr("height")],2),r=n[0],o=void 0===r?0:r,a=n[1],s=void 0===a?0:a;if(Bi(o)&&zi(o-t)&&zi(s-i))return!1;var l=this.getAttr("devicePixelRatio"),h=this.sceneCanvas;Ki(h,{width:t+"px",height:i+"px"}),h.width=t*l,h.height=i*l;var u=this.getContext();return u.resetTransform?u.resetTransform():u.setTransform(1,0,0,1,0,0),u.scale(l,l),!0},t.prototype.getContext=function(){return this.sceneCanvas.getContext("2d")},t.prototype.getBound=function(){var e=this.getTransformOrigin();return{x:e.x,y:e.y,width:this.getWidth(),height:this.getHeight()}},t.prototype.getConvertBound=function(){var e=this.getBound(),t=e.x,i=e.y,n=e.width,r=e.height;return{x:t,y:-(i+r),width:n,height:r}},t.prototype.isVisible=function(e){var t=e.x,i=e.y,n=e.width,r=e.height,o=this.getAttr("isVisible"),a=this.getAttr("data");if(!o||null===a)return!1;var s=new So.Bound(t,i,n,r),l=this.getConvertBound(),c=l.x,h=l.y,u=l.width,d=l.height,g=new So.Bound(c,h,u,d);return s.isOverlaped(g)},t.prototype.applyTransform=function(e){var t=this.getTransformOrigin(),i=t.x,n=void 0===i?0:i,r=t.y,o=void 0===r?0:r,a=e||this.getContext(),s=a.getTransform(),l=s.m11,c=s.m12,h=s.m21,u=s.m22;a.setTransform(l,c,h,u,n,o)},t.prototype.drawFromCache=function(e){var t=this.getTransformOrigin(),i=t.x,n=void 0===i?0:i,r=t.y,o=void 0===r?0:r;Rn.drawImage(e,this.sceneCanvas,n,o,this.getWidth(),this.getHeight())},t.prototype.getWidth=function(){var e=this.getAttr("width");return e=Bi(e)?Math.max(e,1):1},t.prototype.getHeight=function(){var e=this.getAttr("height");return e=Bi(e)?Math.max(e,1):1},t.prototype.onDataChange=function(){this.isDataUpdate=!0},t.prototype.onCacheChange=function(){this.isBatchUpdate=!0},t.prototype.draw=function(e,t){e.save(),this.beforeDrawHook();var i=this.getAttr("useCache");(void 0===t?i:t)?(this.drawCacheScene(),this.drawFromCache(e)):this.drawScene(e),e.restore()},t.prototype.clone=function(e){var t=Sn()(this.getConfig()),i=new(0,this._constructor)(t);return e&&this._bindAsyncAttrs(e,i),i},t.prototype.preDetect=function(){return this.getAttr("isContain")&&!!this.getAttr("data")},t.prototype._bindAsyncAttrs=function(e,t){var i=this;e.forEach((function(e){i.watch(e,(function(i){var n=i.newVal;t.setAttr(e,n)}))}))},t.prototype.beforeDrawHook=function(){},t.prototype.getContextStyles=function(){return{}},t.defaultConfig=(0,c.__assign)((0,c.__assign)({},Cn.defaultConfig),{lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,fillStyle:xt.Black,strokeStyle:xt.Black,globalAlpha:1,globalCompositeOperation:"source-over",shadowBlur:0,shadowColor:xt.Black,shadowOffsetX:0,shadowOffsetY:0,font:"10px sans-serif",textAlign:"left",textBaseline:"top",direction:"ltr",stroke:!1,fill:!1,useCache:!1,isVisible:!0,isHover:!1,isContain:!0,data:null}),t}(Cn);const To=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,radius:0,stroke:!0,fill:!1,useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","strokeStyle","fillStyle","radius","fill","stroke","useCache"],i.onDataChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onDataChange=function(){this.isBatchUpdate=!0},t.prototype.getTransformOrigin=function(){var e=this.getConfig(),t=e.data,i=t.x,n=t.y,r=e.radius,o=e.lineWidth;return{x:i-r-o,y:n-r-o}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,fillStyle:e.fillStyle,stroke:e.stroke,fill:e.fill}},t.prototype.setRadius=function(e){return this.setAttr("radius",e),this},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.radius,i=e.stroke,n=e.fill,r=e.lineWidth;if(!(t<=0)){var o=this.getContext(),a={width:2*t+2*r,height:2*t+2*r},s=this.overrideSize(a);s&&this.setAttrs(a);var l=this.getContextStyles(),c=!_n()(l,this.preContextStyles);c&&(this.preContextStyles=l),(c||s)&&(o.beginPath(),Rn.clearRect(o),Fi(o,l),Rn.drawCircle(o,t+r,t+r,t),n&&o.fill(),i&&o.stroke()),this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,o=t.radius,a=t.stroke,s=t.fill;o<=0||(Fi(e,this.getContextStyles()),e.beginPath(),Rn.drawCircle(e,n,r,o),s&&e.fill(),a&&e.stroke())},t.prototype.isHover=function(e,t){if(void 0===t&&(t=5),!this.preDetect())return!1;var i=this.getAttr("data"),n=this.getAttr("radius");return So.Algorith.getSquareDistance(e,i)<=Math.pow(n+t,2)},t}(Do);const ko=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,borderRadius:0,stroke:!0,fill:!0,globalAlpha:1,useCache:!1}),i.setAttrs(t),i.watch(["width","height","lineWidth","strokeStyle","fillStyle","fill","stroke","useCache"],i.onCacheChange.bind(i)),i.watch(["width","height","lineWidth"],i._onSizeChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onDataChange=function(){this.isDataUpdate=!0},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data");return{x:e.x,y:e.y}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,fillStyle:e.fillStyle,stroke:e.stroke,fill:e.fill,globalAlpha:e.globalAlpha,borderRadius:e.borderRadius}},t.prototype.getWidth=function(){return this.getConfig().width},t.prototype.getHeight=function(){return this.getConfig().height},t.prototype.setAnnotherVertex=function(e){var t=this.getAttr("data"),i=t.x,n=t.y,r=Math.min(i,e.x),o=Math.min(n,e.y),a=Math.abs(i-e.x),s=Math.abs(n-e.y);return this.setAttrs({data:{x:r,y:o},width:a,height:s}),this},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.stroke,i=e.fill,n=e.width,r=e.height,o=e.borderRadius,a=e.lineWidth,s=e.lineDash;if(!(n<=0||r<=0)){var l=this.getContext(),c=this.getContextStyles();this.preContextStyles=c,Fi(l,c),s&&l.setLineDash(s),Rn.clearRect(l),o>0?(this._drawRoundRect(l,a,a,n,r,o),i&&l.fill(),t&&(Fi(l,{globalAlpha:1}),l.stroke())):(i&&Rn.fillRect(l,0,0,n,r),t&&(Fi(l,{globalAlpha:1}),Rn.strokeRect(l,.5*a,.5*a,n-a,r-a))),this.isDataUpdate=!1,this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,o=t.width,a=t.height,s=t.stroke,l=t.fill,c=t.borderRadius,h=t.lineDash,u=t.lineWidth;o<=0||a<=0||(Fi(e,this.getContextStyles()),h&&e.setLineDash(h),c>0?(this._drawRoundRect(e,n,r,o,a,c),l&&e.fill(),s&&(Fi(e,{globalAlpha:1}),e.stroke())):(l&&Rn.fillRect(e,n,r,o,a),s&&(Fi(e,{globalAlpha:1,lineWidth:u}),Rn.strokeRect(e,n+.5*u,r+.5*u,o-u,a-u))))},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getHeight();return new So.Bound(i,n,this.getWidth(),r).contain([e.x,e.y])},t.prototype._drawRoundRect=function(e,t,i,n,r,o){e.beginPath(),e.moveTo(t,i+o),e.arc(t+o,i+o,o,Math.PI,1.5*Math.PI),e.lineTo(t+n-o,i),e.arc(t+n-o,i+o,o,1.5*Math.PI,2*Math.PI),e.lineTo(t+n,i+r-o),e.arc(t+n-o,i+r-o,o,0,.5*Math.PI),e.lineTo(t+o,i+r),e.arc(t+o,i+r-o,o,.5*Math.PI,Math.PI),e.closePath()},t.prototype._onSizeChange=function(){var e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)},t}(Do);const Io=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0}),i.setAttrs(t),i.watch(["lineWidth","strokeStyle"],i.onCacheChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.beforeDrawHook=function(){if(this.isDataUpdate){var e=this.getAttr("data"),t=e.p1,i=e.p2;this.setAttrs({width:Math.abs(t.x-i.x),height:Math.abs(t.y-i.y)}),this.isDataUpdate=!1}},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data"),t=e.p1,i=e.p2;return{x:Math.min(t.x,i.x),y:Math.min(t.y,i.y)}},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,lineDash:e.lineDash}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=i.p1,r=i.p2,o=this.getContext(),a=Math.max(Math.abs(n.x-r.x),1),s=Math.max(Math.abs(n.y-r.y),1),l=this.overrideSize({width:a,height:s});l&&this.setAttrs({width:a,height:s});var c=this.getContextStyles(),h=!_n()(c,this.preContextStyles);if(h&&(this.preContextStyles=c,Fi(o,c)),t&&o.setLineDash(t),h||l){Rn.clearRect(o);var u=this.getTransformOrigin(),d=u.x,g=u.y;Rn.drawLine(o,n.x-d,n.y-g,r.x-d,r.y-g),o.stroke()}this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data;Fi(e,this.getContextStyles()),i&&e.setLineDash(i);var r=n.p1,o=n.p2;e.beginPath(),Rn.drawLine(e,r.x,r.y,o.x,o.y),e.stroke()},t.prototype.isHover=function(e,t){if(void 0===t&&(t=5),!this.preDetect())return!1;var i=this.getAttr("data"),n=i.p1,r=i.p2;return So.Line.isPointAtSegment(e,n,r,t)},t}(Do);const Wo=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{content:"",contents:[],fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",lineHeight:1,letterSpacing:0,textWidth:0,padding:0,background:xt.White,isCustomized:!1,useCache:!0}),i.setAttrs(t),i.watch(["content","fillStyle","background","width","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","useCache"],i.onCacheChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onCacheChange=function(){this.isBatchUpdate=!0,this.isDataUpdate=!0,this.getAttr("isCustomized")?this._typesetText():this._setTextData()},t.prototype.onDataChange=function(){},t.prototype.setText=function(e){var t=Ri(e)||Array.isArray(e)?e:null===e||void 0===e?"":""+e;return this.setAttr("content",t),this},t.prototype.getWidth=function(){var e=this.getConfig(),t=e.width,i=e.textWidth,n=e.padding;return t===Mo.AUTO||void 0===t?i+2*n:t+2*n},t.prototype.getHeight=function(){var e=this.getConfig(),t=e.fontSize,i=e.contents,n=e.lineHeight,r=e.padding;return t*i.length*n+2*r},t.prototype.getTransformOrigin=function(){var e=this.getConfig(),t=e.data,i=e.textAlign,n=e.textBaseline,r=t.x,o=t.y,a=this.getWidth(),s=this.getHeight();return"center"===i?r-=.5*a:"right"===i&&(r-=a),"middle"===n?o-=.5*s:"bottom"===n&&(o-=s),{x:r,y:o}},t.prototype.getContextStyles=function(){var e=this.getConfig(),t=e.fillStyle,i=e.textAlign,n=e.textBaseline;return{font:this._getTextFont(),fillStyle:t,textAlign:i,textBaseline:n}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.contents,i=e.fillStyle,n=e.padding,r=e.textWidth,o=e.fill,a=e.background;if(0!==t.length){var s=this.getContext();Rn.clearRect(s);var l=this.overrideSize({width:this.getWidth(),height:this.getHeight()}),h={font:this._getTextFont(),fillStyle:i},u=!_n()(h,this.preContextStyles);if(this.isDataUpdate&&(this.preContextStyles=h),l||u||this.isDataUpdate){o&&Rn.drawBackground(s,a),Fi(s,(0,c.__assign)((0,c.__assign)({},h),{textAlign:"left",textBaseline:"top"}));for(var d=.5*(this.getWidth()-r),g=0,p=t.length;g<p;++g){var f=t[g].y;Rn.drawText(s,t[g].text,d,f+n)}}this.isBatchUpdate=!1}}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=t.contents,r=t.fill,o=t.background;r&&Rn.drawBackground(e,o),Fi(e,this.getContextStyles());for(var a=0,s=n.length;a<s;++a){var l=i.y+n[a].y;Rn.drawText(e,n[a].text,i.x,l)}},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getHeight();return new So.Bound(i,n,this.getWidth(),r).contain([e.x,e.y])},t.prototype._addLineText=function(e){this.getAttr("contents").push(e)},t.prototype._getTextWidth=function(e){var t=this.getAttr("letterSpacing"),i=Math.max(e.length-1,0);return Rn.measureTextWidth(e)+t*i},t.prototype._getTextFont=function(){var e=this.getConfig();return e.fontStyle+" "+e.fontVariant+" "+e.fontSize+"px "+e.fontFamily},t.prototype._setTextData=function(){var e=this.getConfig(),t=e.content,i=e.contents,n=e.fontSize,r=e.lineHeight,o=e.width;if(!Array.isArray(t)){i.length=0;var a=t.split("\n"),s=r*n,l=0,c=0,h=Bi(o)?o:void 0,u=Rn.getContext();u.save(),Fi(u,{font:this._getTextFont()});for(var d=0,g=a.length;d<g;d++){var p=a[d],f=this._getTextWidth(p);if(h&&f>h)for(;p;){for(var m=0,v=p.length,y="",x=0;m<v;){var b=m+v>>>1,_=p.slice(0,b+1),C=this._getTextWidth(_);C<=h?(m=b+1,y=_,x=C):v=b}if(y&&(this._addLineText({text:y,width:x,y:l}),c=Math.max(c,x),l+=s,(p=p.slice(m))&&(x=this._getTextWidth(p))<=h)){this._addLineText({text:p,width:x,y:l}),c=Math.max(c,x),l+=s;break}}else this._addLineText({text:p,width:f,y:l}),c=Math.max(c,f)}u.restore(),this.setAttr("textWidth",c)}},t.prototype._typesetText=function(){var e=this.getConfig(),t=e.content,i=e.contents,n=e.fontSize,r=e.lineHeight;if(Array.isArray(t)){i.length=0;var o=r*n,a=0,s=0,l=Rn.getContext();l.save(),Fi(l,{font:this._getTextFont()});for(var c=0;c<t.length;c++){var h=t[c],u=this._getTextWidth(h);this._addLineText({text:h,width:u,y:s}),s+=o,a=Math.max(a,u)}l.restore(),this.setAttr("textWidth",a)}},t}(Do);var Po,Ho={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:xt.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:xt.Blue3,default_area_color:"rgba(50, 141, 253, 0.2)",default_border_color:"#9013FE",default_text_color:"#848E9C"};const Ro=((Po={})[Et.TrendLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.ExtendTrendLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.ArrowLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.InfoLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.RayLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.LeftArrow]={background:Ho.default_line_color,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.RightArrow]={background:Ho.default_line_color,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.UpArrow]={background:Ho.default_line_color,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.DownArrow]={background:Ho.default_line_color,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.FibonacciLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,background:"",isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.ParallelLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,background:Ho.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.PriceLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.Rectangle]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,background:Ho.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.StraightLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.HorizontalLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.VerticalLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.CrossLine]={color:Ho.default_line_color,lineWidth:1,lineStyle:Vt.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},Po[Et.Text]={textColor:Ho.default_text_color,background:"rgba(0, 0, 0, 0)",textFontSize:16,isTextBold:!1,isTextEdit:!1,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!0,showTextColor:!0,showTextBold:!0,showTextEdit:!0,showLock:!1,showDelete:!1},Po);var Bo={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:xt.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:xt.Blue3,default_border_color:"#9013FE"};const No=function(e){function t(){var t=e.call(this)||this;return t.id=sn(),t.shapeWeakMap=new WeakMap,t._lastTick=0,t._currentTick=1,t._isWating=!1,t.syncStorage=nn((function(){var e=t.getParent();e&&e.save()}),100),t.initEvents(),t}return(0,c.__extends)(t,e),t.getCacheStyle=function(e,t){return(this.cacheStyle[e]||{})[t]},t.updateCacheStyle=function(e,t){var i=this.cacheStyle[e]||{};this.cacheStyle[e]=(0,c.__assign)((0,c.__assign)({},i),t)},t.getPreEditAttributes=function(e){var t=this.cacheStyle[e]||{};return(0,c.__assign)((0,c.__assign)({},t),{showTextEdit:!1,showLock:!1,showDelete:!1})},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),t.prototype.isLock=function(){return this.getAttr("isLock")},t.prototype.getParent=function(){return this._parent},t.prototype.setParent=function(e){return this._parent=e,this},t.prototype.setData=function(e){return this.setAttr("data",e),this},t.prototype.getData=function(){return this.getAttr("data")},t.prototype.isIndependent=function(){return!1},t.prototype.initWeakMap=function(){var e=this;this.getShapes().forEach((function(t){e.shapeWeakMap.set(t,null)}))},t.prototype.initEvents=function(){var e=this;this.watch(["isHover","isEdit"],(function(){e.getAttr("isComplete")&&(e.setVisibleShapes(),e.update())})),this.watch("isComplete",(function(t){t.newVal&&e.update()})),this.watch(["data","color","lineWidth","lineStyle","background","isLock"],(function(t){var i=t.oldVal,n=t.newVal;!_n()(i,n)&&e.isValid()&&e.syncStorage()})),this.on("mousedown",mi.MOUSE_DOWN,this.delectShapeEdit.bind(this)),this.on("mousemove",mi.MOUSE_MOVE,this.delectShapeMousemove.bind(this)),this.watch("color",this.watchStyleHook.bind(this,"color")),this.watch("lineWidth",this.watchStyleHook.bind(this,"lineWidth")),this.watch("lineStyle",this.watchStyleHook.bind(this,"lineStyle")),this.watch("background",this.watchStyleHook.bind(this,"background")),this.watch("textColor",this.watchStyleHook.bind(this,"textColor")),this.watch("textFontSize",this.watchStyleHook.bind(this,"textFontSize")),this.watch("isTextBold",this.watchStyleHook.bind(this,"isTextBold")),this.initCustomEvents()},t.prototype.addWidgetShapes=function(e,t){var i=this._addWidgetShape.bind(this,e);t.forEach(i)},t.prototype.setAnnotationToWidgets=function(e){var t=this;e.forEach((function(e){e.addAnnotation(t)}))},t.prototype.startDraw=function(){this.setAttr("isComplete",!1)},t.prototype.compeleDraw=function(){var e=this;setTimeout((function(){e.setAttr("isComplete",!0)}))},t.prototype.isValid=function(){return!!this.getData()},t.prototype.transformYPoint=function(e){return{x:e.x,y:-e.y}},t.prototype.remove=function(e){void 0===e&&(e=!0);for(var t=this.getShapes(),i=0;i<t.length;++i){var n=t[i],r=this.shapeWeakMap.get(n);r&&(r.removeShape(n),r.removeAnnotation(this),this.shapeWeakMap.delete(n))}(this.syncStorage(),e&&this._parent)&&(this.update(),this._parent.getParent().unSelectAnnotation())},t.prototype.destroy=function(){for(var e=this.getShapes(),t=0;t<e.length;++t){var i=e[t],n=this.shapeWeakMap.get(i);n&&(n.removeShape(i),n.removeAnnotation(this),this.shapeWeakMap.delete(i))}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane,e.timeAxisPane]:[]},t.prototype.render=function(){this.getRenderPanes().forEach((function(e){e.update(vt.Marks)}))},t.prototype.update=function(){var e=this,t=this.getParent();!this._isWating&&t&&(this._isWating=!0,requestAnimationFrame((function(){e.render(),e._isWating=!1})))},t.prototype.updateData=function(){this.updateTick(this.updateImmediate)},t.prototype.updateTick=function(e){var t=this;if(this._lastTick!==this._currentTick){var i=this._currentTick;this._currentTick=this._lastTick,"function"===typeof e&&e.call(this),Promise.resolve().then((function(){t._lastTick=i}))}},t.prototype.delectShapeEdit=function(e){if(this._parent){var t=this._parent.getParent(),i=this._parent.mainPane,n=this.getAttr("isComplete"),r=this.getAttr("isNeedStore");if(n&&r){var o=i.transformPointToView(e.point),a=o.x,s=o.y;this.isHover({x:a,y:-s})&&!e.isDealed?(this.setAttr("isEdit",!0),t.selectAnnotation(this)):(t.unSelectAnnotation(),this.setAttr("isEdit",!1))}}},t.prototype.delectShapeMousemove=function(e){if(this._parent){var t=this._parent.mainPane.transformPointToView(e.point),i=t.x,n=t.y;this.isHover({x:i,y:-n})?(this._parent.updateCursorStyle(!0),!e.isDealed&&this.setAttr("isHover",!0),e.isDealed=!0):(this._parent.updateCursorStyle(!1),this.setAttr("isHover",!1))}},t.prototype.contain=function(){return!!this.getParent()},t.prototype.updateVertexBorderAndVisible=function(e,t){var i={isVisible:!t,strokeStyle:t?Bo.hover_border_color:Bo.border_color};this.updateVertex(e,i)},t.prototype.updateVertex=function(e,t){Array.isArray(e)?e.forEach((function(e){e.setAttrs(t)})):e.setAttrs(t)},t.prototype.recoverDragVertexts=function(){var e={isVisible:!0,strokeStyle:Bo.border_color,radius:Bo.radius};this.updateVertex(this.getVertexs(),e)},t.prototype.getNoDragVertexs=function(e){var t=this.getVertexs(),i=t.indexOf(e);return t.splice(i,1),t},t.prototype.updateHighlightVertexBorderWidth=function(e,t){var i=e.getAttr("lineWidth"),n=this.getAttr("isEdit"),r=t?Bo.highlight_border_width:n?Bo.border_width:Bo.hover_border_width;return e.setAttr("lineWidth",r),i!==r},t.prototype.initCustomEvents=function(){},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!1,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:e.textColor,showFontSize:!1,textFontSize:e.textFontSize,showTextBold:!1,isTextBold:e.isTextBold,showTextEdit:!1,isTextEdit:e.isTextEdit,showLock:!0,showDelete:!0}},t.prototype.applyAttributes=function(e){this.setAttrs(e)},t.prototype.getDescription=function(){var e=this.getConfig();return{data:e.data,type:e.type,color:e.color,background:e.background,lineWidth:e.lineWidth,lineStyle:e.lineStyle,isLock:e.isLock}},t.prototype.getCacheStyleKey=function(){return this.getAttr("type")},t.prototype.isDisableDrag=function(){var e=this.getParent(),t=null===e||void 0===e?void 0:e.getParent();return!this.getAttr("isComplete")||t.getAttr("annotationLock")||this.isLock()},t.prototype.getDefaultStyle=function(){var e=this.getCacheStyleKey();return Ro[e]},t.prototype.refreshDefaultStyle=function(){var e=this.getDefaultStyle();this.applyAttributes(e)},t.prototype.watchStyleHook=function(e){var t;switch(e){case"color":var i=this.getAttr("color");this.updateColor(i);break;case"lineWidth":var n=this.getAttr("lineWidth");this.updateLineWidth(n);break;case"lineStyle":var r=this.getAttr("lineStyle"),o=((t={})[Vt.SOLID]=[],t[Vt.DOTTED]=[2,2],t[Vt.DASHED]=[4,3],t);this.updateLineStyle(o[r]);break;case"background":var a=this.getAttr("background");this.updateBackground(a);break;case"textColor":var s=this.getAttr("textColor");this.updateTextColor(s);break;case"textFontSize":var l=this.getAttr("textFontSize");this.updateTextSize(l);break;case"isTextBold":var c=this.getAttr("isTextBold");this.updateTextBold(c?St.BOLD:St.NORMAL)}this.update()},t.prototype.updateColor=function(e){},t.prototype.updateLineWidth=function(e){},t.prototype.updateLineStyle=function(e){},t.prototype.updateBackground=function(e){},t.prototype.updateTextColor=function(e){},t.prototype.updateTextSize=function(e){},t.prototype.updateTextBold=function(e){},t.prototype._addWidgetShape=function(e,t){this.shapeWeakMap.get(t)!==e&&(this.shapeWeakMap.set(t,e),e.addShape(t))},t.dragVertex=new To({data:{x:0,y:0},radius:Bo.radius,strokeStyle:Bo.border_color,fillStyle:Bo.fill_color,fill:!0,lineWidth:Bo.border_width}),t.dragRect=new ko({data:{x:0,y:0},width:12,height:12,borderRadius:2,strokeStyle:Bo.border_color,fillStyle:Bo.fill_color,lineWidth:Bo.border_width,useCache:!0}),t.line=new Io({strokeStyle:Bo.default_line_color,lineWidth:1}),t.text=new Wo({content:"",fillStyle:Bo.default_line_color,fontSize:12}),t.defaultConfig=(0,c.__assign)((0,c.__assign)({},Cn.defaultConfig),{type:Et.Arrow,data:null,isHover:!1,isEdit:!0,isComplete:!1,isLock:!1,color:"",lineWidth:1,lineStyle:Vt.SOLID,background:"",textColor:"#848E9C",textFontSize:16,isTextBold:!1,isTextEdit:!1,isNeedStore:!0}),t.cacheStyle=at()(Ro),t}(Cn);const Oo=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",letterSpacing:0,textWidth:0,padding:0,borderColor:"#ddd",background:"#ddd",color:"#fff",text:"",dir:wt.Right,useCache:!0}),i.setAttrs(t),i.watch(["background","lineWidth","borderColor","color","text","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","dir","useCache"],i.onDataChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.beforeDrawHook=function(){var e=this.getAttr("fixWidth");if(this.isBatchUpdate&&void 0===e){Fi(Rn.getContext(),{font:this._getTextFont()});var t=this.getAttr("text");this.setAttr("textWidth",Rn.measureTextWidth(t))}},t.prototype.onDataChange=function(){this.isBatchUpdate=!0},t.prototype.getDirection=function(){return(this.getAttr("dir")||"").toUpperCase()},t.prototype.getTransformOrigin=function(){var e=this.getAttr("data"),t=e.x,i=e.y,n=this.getWidth(),r=this.getHeight(),o=this.getDirection();return o===wt.Left&&(t-=n,i-=.5*r),o===wt.Right&&(i-=.5*r),o===wt.Up&&(t-=.5*n,i-=r),o===wt.Down&&(t-=.5*n),{x:t,y:i}},t.prototype.getContextStyles=function(){var e=this.getConfig(),t=e.color,i=e.lineWidth,n=e.background,r=e.borderColor,o=e.text,a=this.getDirection(),s={strokeStyle:t,lineWidth:i,fillStyle:t,background:n,borderColor:r,dir:a,text:o,font:this._getTextFont()},l=a===wt.Left?"right":a===wt.Right?"left":"center";return(0,c.__assign)((0,c.__assign)({},s),{textBaseline:"middle",textAlign:l})},t.prototype.getWidth=function(){var e=this.getConfig(),t=e.textWidth,i=e.padding,n=e.fixWidth,r=e.text;if(Bi(n))return n;var o=Array.isArray(i)?i[0]:i;return""!==r&&this.setAttr("textWidth",Rn.measureTextWidth(r)),t+2*o},t.prototype.getHeight=function(){var e=this.getConfig(),t=e.padding,i=e.fontSize,n=e.fixHeight;return Bi(n)?n:i+2*(Array.isArray(t)?t[1]:t)},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getContext(),t=this.getWidth(),i=this.getHeight(),n=this.overrideSize({width:t,height:i});n&&this.setAttrs({width:t,height:i});var r=this.getContextStyles(),o=!_n()(r,this.preContextStyles);if(o&&(this.preContextStyles=r),o||n){var a=this.getConfig(),s=a.background,l=a.color,c=a.text,h=a.borderColor,u=a.stroke,d=a.fill,g=a.lineWidth;Fi(e,{fillStyle:s,strokeStyle:h,lineWidth:g}),d&&Rn.fillRect(e,0,0,t,i),u&&Rn.strokeRect(e,.5*g,.5*g,t-g,i-g),Fi(e,{fillStyle:l,textAlign:"center",textBaseline:"middle"});var p=.5*t,f=.5*i;Rn.drawText(e,c,p,f)}this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getAttr("data"),i=this.getWidth(),n=this.getHeight();this._drawLabel(e,i,n,t)},t.prototype.isHover=function(e){if(!this.getAttr("isContain"))return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y,r=this.getWidth(),o=this.getHeight();return new So.Bound(i,n,r,o).contain([e.x,e.y])},t.prototype._drawLabel=function(e,t,i,n){var r=this.getConfig(),o=r.background,a=r.text,s=r.borderColor,l=r.color,c=r.stroke,h=r.fill;Fi(e,{fillStyle:o,strokeStyle:s});var u=n.x,d=void 0===u?0:u,g=n.y,p=void 0===g?0:g;c&&Rn.strokeRect(e,d,p,t,i),h&&Rn.fillRect(e,d,p,t,i),Fi(e,this.getContextStyles()),Fi(e,{fillStyle:l,textAlign:"center",textBaseline:"middle"});var f=.5*t,m=.5*i;Rn.drawText(e,a,f,m)},t.prototype._getTextFont=function(){var e=this.getConfig();return e.fontStyle+" "+e.fontVariant+" "+e.fontSize+"px "+e.fontFamily},t}(Do);const Zo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{type:Et.TrendLine}),t.line=new Io({strokeStyle:Bo.default_line_color,lineWidth:1}),t.yLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.yLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.xLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=No.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=e.getPosition(l),u=h.x,d=h.y,g=e.getPosition(c),p=g.x,f=g.y;this.line.setData({p1:{x:u,y:-d},p2:{x:p,y:-f}}),this.xLabel1.setAttrs({data:{x:u,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:p,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-f},text:e.formatterValue(c.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(u,p),y:-a},width:Math.abs(u-p),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,f)},width:i.bound.width,height:Math.abs(d-f)}),this.dragVertex1.setAttrs({data:{x:u,y:-d}}),this.dragVertex2.setAttrs({data:{x:p,y:-f}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.TrendLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e)},t.prototype.isHover=function(e){return this.line.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t),this.dragVertex1.setAttrs({isVisible:i||t,radius:Bo.radius,lineWidth:t?Bo.border_width:Bo.hover_border_width}),this.dragVertex2.setAttrs({isVisible:i||t,radius:Bo.radius,lineWidth:t?Bo.border_width:Bo.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)?this.line:void 0},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(a||s)&&this.update()}},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.line?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex1,r===this.dragVertex1),this.updateVertexBorderAndVisible(this.dragVertex2,r===this.dragVertex2),this._dragVertex(t,r)))}}},t.prototype._dragVertex=function(e,t){var i,n=this,r=e.mainPane;t===this.dragVertex1?(this.dragVertex2.setAttr("strokeStyle",Bo.hover_border_color),i="p1"):(this.dragVertex1.setAttr("strokeStyle",Bo.hover_border_color),i="p2"),r.on("mousemove",Et.TrendLine,(function(t){var r,o=e.transformAbsoluteXYToPlotItem(t.point),a=n.getAttr("data");n.setData((0,c.__assign)((0,c.__assign)({},a),((r={})[i]=o,r))),n.update()})),r.on("mouseup",Et.TrendLine,(function(){r.off(Et.TrendLine),n.recoverDragVertexts(),n.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=a.p1,l=a.p2,c=e.getPosition(s),h=c.x,u=c.y,d=e.getPosition(l),g=d.x,p=d.y,f=0,m=0;o.on("mousemove",Et.TrendLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y;f=a-n,m=s-r;var l=e.getPlotItemByPosition(h+f,u+m),c=e.getPlotItemByPosition(g+f,p+m);i.setData({p1:l,p2:c}),i.update()})),o.on("mouseup",Et.TrendLine,(function(){o.off(Et.TrendLine),i.compeleDraw()}))},t}(No);const Fo=function(e){function t(){var t=e.call(this)||this;return t.setAttr("type",Et.ExtendTrendLine),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=e.getPosition(l),u=h.x,d=h.y,g=e.getPosition(c),p=g.x,f=g.y,m=t.getBound(),v=m.width,y=m.height;if(So.Algorith.isSamePoint(h,g))this.line.setData({p1:{x:u,y:-d},p2:{x:p,y:-f}});else{var x=new So.Bound(0,0,v,y),b=So.Line.getIntersectWidthBound(h,g,x);2===b.length?this.line.setData({p1:{x:b[0].x,y:-b[0].y},p2:{x:b[1].x,y:-b[1].y}}):this.line.setData(null)}this.xLabel1.setAttrs({data:{x:u,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:p,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-f},text:e.formatterValue(c.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(u,p),y:-a},width:Math.abs(u-p),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,f)},width:i.bound.width,height:Math.abs(d-f)}),this.dragVertex1.setAttrs({data:{x:u,y:-d}}),this.dragVertex2.setAttrs({data:{x:p,y:-f}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t}(Zo);const Ko=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,imageSource:null,globalAlpha:1,isLoading:!1,useCache:!0}),i.setAttrs(t),i.watch(["imageSource"],i.onDataChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getAttr("imageSource");if(e){var t=e.width,i=e.height;this.overrideSize({width:t,height:i}),this.setAttrs({width:t,height:i}),this.isBatchUpdate=!0}},t.prototype.setImage=function(e){this.setAttrs({imageSource:e,isLoading:!1})},t.prototype.getTransformOrigin=function(){return this.getAttr("data")},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.width,i=e.height,n=e.imageSource;if(!(t<=0||i<=0)&&n)this.getContext().drawImage(n,0,0),this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.data,n=i.x,r=i.y,o=t.width,a=t.height,s=t.imageSource;o<=0||a<=0||!s||Rn.drawImage(e,s,n,r)},t.prototype.isHover=function(e){if(!this.preDetect())return!1;var t=this.getTransformOrigin(),i=t.x,n=t.y;return new So.Bound(i,n,this.getWidth(),this.getHeight()).contain([e.x,e.y])},t}(Do);const zo=function(e){function t(){var t=e.call(this)||this;return t.rect=new ko({fillStyle:"rgba(42, 47, 55, 0.75)",stroke:!1}),t.barImage=new Ko,t.priceDiffImage=new Ko,t.text1=No.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),t.text2=No.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),t._textWidth=0,t.setAttr("type",Et.InfoLine),t.watch(["data"],t._updateInfo.bind(t)),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this;this.barImage.getAttr("imageSource")||this.barImage.getAttr("isLoading")||(this.barImage.setAttr("isLoading",!0),Yn('<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M5.34981 3V1H3.6501V3H1.94995V13H3.65015V15H5.34981V13H7.05V3H5.34981ZM5.34981 11.3H3.6501V4.7H5.34981V11.3Z" fill="#E6E8EA"/>\n<path d="M12.3499 3V1H10.6502V3H8.95001V13H10.6502V15H12.3499V13H14.0501V3H12.3499ZM12.3499 11.3H10.6502V4.7H12.3499V11.3Z" fill="#E6E8EA"/>\n</svg>').then((function(t){e.barImage.setImage(t)}))),this.priceDiffImage.getAttr("imageSource")||this.priceDiffImage.getAttr("isLoading")||(this.priceDiffImage.setAttr("isLoading",!0),Yn('<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M13 2.7H8.94998L12.04 5.8L10.84 7L8.83998 5V10.98L10.82 9L12.03 10.2L8.92998 13.3H13V15H2.97998V13.3H7.02998L3.93998 10.2L5.13998 9L7.13998 11V5.02L5.15998 7L3.94998 5.8L7.04998 2.7H2.97998V1H13V2.7Z" fill="#E6E8EA"/>\n</svg>').then((function(t){e.priceDiffImage.setImage(t)})));var t=this.getParent();if(t){var i=t.mainPane,n=t.axisPane,r=t.timeAxisPane,o=t.xAxis,a=n.bound.width,s=r.bound.height,l=this.getData(),c=l.p1,h=l.p2,u=t.getPosition(c),d=u.x,g=u.y,p=t.getPosition(h),f=p.x,m=p.y;this.line.setData({p1:{x:d,y:-g},p2:{x:f,y:-m}});var v=this.barImage.getAttr("width"),y=this.barImage.getAttr("height"),x=this.priceDiffImage.getAttr("width"),b=this.priceDiffImage.getAttr("height"),_=Math.max(180,this._textWidth+16+Math.max(v,x)+5),C=8,w=-80,A=(d-f)*(g-m)>0;zi(d-f,10)?(C=8,w=-36):zi(g-m,10)?(C=.5*-_,w=-80):A&&(C=-_-8,w=-80);var L=.5*(d+f)+C,E=.5*-(g+m)+w;this.rect.setAttrs({data:{x:L,y:E},width:_,height:72}),E+=12,this.barImage.setData({x:L+8,y:E}),this.text1.setData({x:L+8+v+5,y:E+.5*y}),E+=24,this.priceDiffImage.setData({x:L+8,y:E}),this.text2.setData({x:L+8+x+5,y:E+.5*b}),this.xLabel1.setAttrs({data:{x:d,y:-s},text:ji(c.time,o.getOriginTimeScaleType()),fixHeight:s}),this.xLabel2.setAttrs({data:{x:f,y:-s},text:ji(h.time,o.getOriginTimeScaleType()),fixHeight:s}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:t.formatterValue(c.value),fixWidth:a}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:t.formatterValue(h.value),fixWidth:a}),this.xRange.setAttrs({data:{x:Math.min(d,f),y:-s},width:Math.abs(d-f),height:r.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,m)},width:n.bound.width,height:Math.abs(g-m)}),this.dragVertex1.setAttrs({data:{x:d,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-m}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]),this.addWidgetShapes(r,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(n,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,r,n])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.text1.setAttr("fillStyle",e),this.text2.setAttr("fillStyle",e)},t.prototype._updateInfo=function(e){var t=e.newVal,i=t.p1,n=t.p2,r=this.getParent();if(r){var o=r.getParent(),a=(0,c.__read)(o.getTimeExtent(),2),s=a[0],l=a[1],h=r.xAxis.unitWidth,u=Math.min(i.time,n.time),d=Math.max(i.time,n.time);u=Math.min(l,Math.max(s,u)),d=Math.max(s,Math.min(l,d));var g=r.getPosition((0,c.__assign)((0,c.__assign)({},i),{time:u})).x,p=r.getPosition((0,c.__assign)((0,c.__assign)({},i),{time:d})).x;this.text1.setAttr("content",Math.round((p-g)/h)+" "+r.getI18n(vi.DRAW_BAR,"bars")+"("+this._getFormatInterval(u,d,r)+")"),this.text2.setAttr("content",r.formatterValue(n.value-i.value)+"("+$i((n.value-i.value)/i.value)+")");var f=this.text1.getAttr("textWidth"),m=this.text2.getAttr("textWidth");this._textWidth=Math.ceil(Math.max(f,m))}},t.prototype._getFormatInterval=function(e,t,i){var n=t-e;if(0===n)return"no data";var r=[],o=Math.floor(n/wi.Day),a=n%wi.Day;o>0&&r.push(""+o+i.getI18n(vi.DRAW_DAY,"D"));var s=Math.floor(a/wi.Hour);a=n%wi.Hour,s>0&&r.push(""+s+i.getI18n(vi.DRAW_HOUR,"h"));var l=Math.floor(a/wi.Minute);return l>0&&r.push(""+l+i.getI18n(vi.DRAW_MINUTE,"m")),r.join(", ")},t}(Zo);var Uo=12;const Yo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{lineType:Et.HorizontalLine,type:Et.StraightLine}),t.line1=No.line.clone(),t.line2=No.line.clone(),t.yLabel=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.xLabel=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.dragVertex=No.dragRect.clone(["fillStyle","strokeStyle"]).setAttrs({width:Uo,height:Uo}),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=t.getBound(),l=s.width,c=s.height,h=this.getData(),u=e.getPosition(h),d=u.x,g=u.y,p=this.getAttr("lineType");p===Et.VerticalLine?this.line1.setData({p1:{x:d,y:0},p2:{x:d,y:-c}}):p===Et.HorizontalLine?this.line1.setData({p1:{x:0,y:-g},p2:{x:l,y:-g}}):p===Et.CrossLine&&(this.line1.setData({p1:{x:d,y:0},p2:{x:d,y:-c}}),this.line2.setData({p1:{x:0,y:-g},p2:{x:l,y:-g}})),this.xLabel.setAttrs({data:{x:d,y:-a},text:ji(h.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel.setAttrs({data:{x:0,y:-g},text:e.formatterValue(h.value),fixWidth:o}),this.dragVertex.setAttrs({data:{x:d-6,y:-g-6}}),p===Et.CrossLine?this.addWidgetShapes(t,[this.line1,this.line2,this.dragVertex]):this.addWidgetShapes(t,[this.line1,this.dragVertex]),this.addWidgetShapes(n,[this.xLabel]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.isCross=function(){return this.getAttr("lineType")===Et.CrossLine},t.prototype.getShapes=function(){var e=[this.line1,this.dragVertex,this.xLabel,this.yLabel];return this.isCross()&&e.push(this.line2),e},t.prototype.updateColor=function(e){this.line1.setAttr("strokeStyle",e),this.isCross()&&this.line2.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line1.setAttr("lineWidth",e),this.isCross()&&this.line2.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line1.setAttr("lineDash",e),this.isCross()&&this.line2.setAttr("lineDash",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){var t=this.getAttr("lineType");return this.line1.isHover(e)||t===Et.CrossLine&&this.line2.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel.setAttr("isVisible",t),this.yLabel.setAttr("isVisible",t),this.dragVertex.setAttrs({isVisible:i||t,lineWidth:t?Bo.border_width:Bo.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.data;return{lineType:e.lineType,type:e.type,data:t,isLock:e.isLock}},t.prototype.getCacheStyleKey=function(){return this.getAttr("lineType")},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){var t=this.getAttr("lineType");return this.dragVertex.isHover(e)?this.dragVertex:this.line1.isHover(e)?this.line1:t===Et.CrossLine&&this.line2.isHover(e)?this.line2:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Io?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}}},t.prototype._dragVertex=function(e){var t=this,i=e.mainPane;i.on("mousemove",Et.HorizontalLine,(function(i){t.setData(e.transformAbsoluteXYToPlotItem(i.point)),t.update()})),i.on("mouseup",Et.HorizontalLine,(function(){i.off(Et.HorizontalLine),t.recoverDragVertexts(),t.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=e.getPosition(a),l=s.x,c=s.y,h=this.getAttr("lineType");o.on("mousemove",Et.HorizontalLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y,u=a-n,d=s-r;if(h===Et.VerticalLine){if(zi(u))return;i.setData(e.getPlotItemByPosition(l+u,c))}else if(h===Et.HorizontalLine){if(zi(d))return;i.setData(e.getPlotItemByPosition(l,c+d))}else if(h===Et.CrossLine){if(zi(u)&&zi(d))return;i.setData(e.getPlotItemByPosition(l+u,c+d))}i.update()})),o.on("mouseup",Et.HorizontalLine,(function(){o.off(Et.HorizontalLine),i.compeleDraw()}))},t}(No);const Xo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{type:Et.Rectangle}),t.rect=new ko({fillStyle:Ho.default_area_color,stroke:!1}),t.yLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.yLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.xLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=No.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex3=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex4=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=e.getPosition(l),u=h.x,d=h.y,g=e.getPosition(c),p=g.x,f=g.y;this.rect.setData({x:u,y:-d}).setAnnotherVertex({x:p,y:-f}),this.xLabel1.setAttrs({data:{x:u,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:p,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-f},text:e.formatterValue(c.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(u,p),y:-a},width:Math.abs(u-p),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,f)},width:i.bound.width,height:Math.abs(d-f)}),this.dragVertex1.setAttrs({data:{x:u,y:-d}}),this.dragVertex2.setAttrs({data:{x:p,y:-d}}),this.dragVertex3.setAttrs({data:{x:p,y:-f}}),this.dragVertex4.setAttrs({data:{x:u,y:-f}}),this.addWidgetShapes(t,[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.Rectangle,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.updateColor=function(e){this.rect.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateBackground=function(e){this.rect.setAttr("fillStyle",e)},t.prototype.updateLineWidth=function(e){this.rect.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){this.rect.setAttrs({stroke:!0,lineDash:e})},t.prototype.isHover=function(e){return this.rect.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:Ho.radius,lineWidth:t?Ho.border_width:Ho.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o)),c=this.updateHighlightVertexBorderWidth(this.dragVertex4,this.dragVertex4.isHover(o));(a||s||l||c)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.dragVertex4.isHover(e)?this.dragVertex4:this.rect.isHover(e)?this.rect:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(r,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(r),!1),this._dragVertex(t,r)))}}},t.prototype._dragVertex=function(e,t){var i=this,n=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Ho.hover_border_color}),n.on("mousemove",Et.Rectangle,(function(n){var r=e.transformAbsoluteXYToPlotItem(n.point),o=i.getAttr("data"),a=o.p1,s=o.p2;t===i.dragVertex1&&i.setData({p1:r,p2:s}),t===i.dragVertex2&&i.setData({p1:{time:a.time,value:r.value},p2:{time:r.time,value:s.value}}),t===i.dragVertex3&&i.setData({p1:a,p2:r}),t===i.dragVertex4&&i.setData({p1:{time:r.time,value:a.value},p2:{time:s.time,value:r.value}}),i.update()})),n.on("mouseup",Et.Rectangle,(function(){n.off(Et.Rectangle),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragRect=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=a.p1,l=a.p2,c=e.getPosition(s),h=c.x,u=c.y,d=e.getPosition(l),g=d.x,p=d.y,f=0,m=0;o.on("mousemove",Et.Rectangle,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y;f=a-n,m=s-r;var l=e.getPlotItemByPosition(h+f,u+m),c=e.getPlotItemByPosition(g+f,p+m);i.setData({p1:l,p2:c}),i.update()})),o.on("mouseup",Et.Rectangle,(function(){o.off(Et.Rectangle),i.compeleDraw()}))},t}(No);const Go=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],i.onCacheChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getMaxAndMin(),t=e.minX,i=e.maxX,n=e.minY,r=e.maxY,o=Math.max(i-t,1),a=Math.max(r-n,1);this.overrideSize({width:o,height:a}),this.setAttrs({width:o,height:a}),this.setAttr("origin",{x:t,y:n}),this.isDataUpdate=!0,this.isBatchUpdate=!0},t.prototype.getMaxAndMin=function(){var e=this.getAttr("data"),t=Number.MAX_SAFE_INTEGER,i=-Number.MAX_SAFE_INTEGER;return e.reduce((function(e,t){var i=e.minX,n=e.maxX,r=e.minY,o=e.maxY,a=t.x,s=t.y;return i>a&&(i=a),n<a&&(n=a),r>s&&(r=s),o<s&&(o=s),{minX:i,maxX:n,minY:r,maxY:o}}),{minX:t,maxX:i,minY:t,maxY:i})},t.prototype.getTransformOrigin=function(){return this.getAttr("origin")},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,lineWidth:e.lineWidth,lineDash:e.lineDash,globalAlpha:e.globalAlpha}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=e.stroke,r=e.fill,o=this.getContext(),a=this.getContextStyles();(!_n()(a,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=a,Fi(o,a)),t&&o.setLineDash(t),o.beginPath(),Rn.clearRect(o);var s=this.getTransformOrigin(),l=s.x,c=s.y,h=i.map((function(e){var t=e.x,i=e.y;return{x:t-l,y:i-c}}));Rn.drawLines(o,h),r&&(o.closePath(),o.fill()),n&&o.stroke(),this.isDataUpdate=!1,this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data,r=t.stroke,o=t.fill;Fi(e,this.getContextStyles()),i&&e.setLineDash(i),e.beginPath(),Rn.drawLines(e,n),o&&(e.closePath(),e.fill()),r&&e.stroke()},t.prototype.isHover=function(e,t){return void 0===t&&(t=5),!!this.preDetect()&&t>=new So.Polyline(this.getAttr("data")).getNearestPoint(e).dis},t}(Do);const jo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{type:Et.ParallelLine}),t.path=new Go({fillStyle:Ho.default_area_color,stroke:!1}),t.line1=No.line.clone(),t.line2=No.line.clone(),t.yLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.yLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.yLabel3=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.xLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=No.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t.dragVertex3=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=s.p3,u=e.getPosition(l),d=u.x,g=u.y,p=e.getPosition(c),f=p.x,m=p.y,v=e.getPosition(h),y=v.x,x=v.y,b=new So.Vector2(f-d,m-g),_=new So.Vector2(y-d,x-g),C=So.Algorith.getCrossMultiply(b,_),w=zi(d-f),A=m-g+C/(f-d)+g,L=C/(f-d)+g,E=Math.min(g,m,x),V=Math.max(g,m,x);if(this.path.setData([{x:d,y:-g},{x:f,y:-m},{x:f,y:-A},{x:d,y:-L}]).setAttr("isVisible",!w),this.line1.setData({p1:{x:d,y:-g},p2:{x:f,y:-m}}),this.line2.setData({p1:{x:d,y:-L},p2:{x:f,y:-A}}).setAttr("isVisible",!w),this.xLabel1.setAttrs({data:{x:d,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:f,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:e.formatterValue(c.value),fixWidth:o}),this.yLabel3.setAttrs({data:{x:0,y:-x},text:e.formatterValue(h.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(d,f),y:-a},width:Math.abs(d-f),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-V},width:i.bound.width,height:V-E}),this.dragVertex1.setAttrs({data:{x:d,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-m}}),this.dragVertex3.setAttrs({data:{x:.5*(d+f),y:.5*-(A+L)}}),this.getAttr("isEdit")&&this.getAttr("isComplete")&&!zi(d-f)){var S=e.getPlotItemByPosition(d,L);this._diffPrice=S.value-l.value}this.addWidgetShapes(t,[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]},t.prototype.updateColor=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("strokeStyle",e)})),this.path.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateLineWidth=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("lineWidth",e)})),this.path.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){[this.line1,this.line2].forEach((function(t){t.setAttr("lineDash",e)})),this.path.setAttrs({stroke:!0,lineDash:e})},t.prototype.updateBackground=function(e){this.path.setAttr("fillStyle",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.ParallelLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.path.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yLabel3.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:Ho.radius,lineWidth:t?Ho.border_width:Ho.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.isValid=function(){var e=this.getData()||{},t=e.p1,i=e.p2,n=e.p3;return!!(t&&i&&n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o));(a||s||l)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.line1.isHover(e)?this.line1:this.line2.isHover(e)?this.line2:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n=i.x,r=i.y,o={x:n,y:-r},a=this.getDragVertex(o);a&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,a instanceof Io?this._dragLine(t,{x:n,y:r}):(this.updateVertexBorderAndVisible(a,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(a),!1),this._dragVertex(t,a,{x:n,y:r})))}}},t.prototype._dragVertex=function(e,t,i){var n=this,r=i.x,o=i.y,a=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Ho.hover_border_color});var s=this.getData().p3,l=e.getPosition(s),c=l.x,h=l.y,u=0,d=0;a.on("mousemove",Et.ParallelLine,(function(i){var a=e.transformAbsoluteXYToPlotItem(i.point),s=n.getAttr("data"),l=s.p1,g=s.p2;if(t===n.dragVertex1&&n.setData({p1:a,p2:g,p3:{time:a.time,value:a.value+n._diffPrice}}),t===n.dragVertex2&&n.setData({p1:l,p2:a,p3:{time:l.time,value:l.value+n._diffPrice}}),t===n.dragVertex3){var p=e.transformPointToView(i.point),f=p.x,m=p.y;u=f-r,d=m-o;var v=e.getPlotItemByPosition(c+u,h+d);n.setData({p1:l,p2:g,p3:v}),n._diffPrice=a.value-l.value}n.update()})),a.on("mouseup",Et.ParallelLine,(function(){a.off(Et.ParallelLine),n.recoverDragVertexts(),n.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=a.p1,l=a.p2,c=a.p3,h=e.getPosition(s),u=h.x,d=h.y,g=e.getPosition(l),p=g.x,f=g.y,m=e.getPosition(c),v=m.x,y=m.y,x=0,b=0;o.on("mousemove",Et.ParallelLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y;x=a-n,b=s-r;var l=e.getPlotItemByPosition(u+x,d+b),c=e.getPlotItemByPosition(p+x,f+b),h=e.getPlotItemByPosition(v+x,y+b);i.setData({p1:l,p2:c,p3:h}),i.update()})),o.on("mouseup",Et.ParallelLine,(function(){o.off(Et.ParallelLine),i.compeleDraw(),i.recoverDragVertexts(),i.update()}))},t}(No);const qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{type:Et.FibonacciLine}),t.rect=new ko({fillStyle:Bo.default_line_color,strokeStyle:Bo.default_line_color,stroke:!1,globalAlpha:.2}),t.line1=No.line.clone(),t.line2=No.line.clone(),t.line3=No.line.clone(),t.line4=No.line.clone(),t.line5=No.line.clone(),t.line6=No.line.clone().setAttrs({lineDash:[3,3]}),t.text1=No.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text2=No.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text3=No.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text4=No.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.text5=No.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),t.yLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.yLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t.xLabel1=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xLabel2=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.xRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.yRange=new ko({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),t.dragVertex1=No.dragVertex.clone(["fillStyle","strokeStyle"]),t.dragVertex2=No.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=e.getPosition(l),u=h.x,d=h.y,g=e.getPosition(c),p=g.x,f=g.y,m=d-f,v=l.value-c.value,y=Math.min(u,p)-10;this.rect.setData({x:u,y:-d}).setAnnotherVertex({x:p,y:-f});var x=-f,b=c.value;this.line1.setAttrs({data:{p1:{x:u,y:x},p2:{x:p,y:x}}}),this.text1.setAttrs({content:"0("+e.formatterValue(b)+")",data:{x:y,y:-f}}),x=-(f+.382*m),b=c.value+.382*v,this.line2.setAttrs({data:{p1:{x:u,y:x},p2:{x:p,y:x}}}),this.text2.setAttrs({content:"0.382("+e.formatterValue(b)+")",data:{x:y,y:x}}),x=-(f+.5*m),b=c.value+.5*v,this.line3.setData({p1:{x:u,y:x},p2:{x:p,y:x}}),this.text3.setAttrs({content:"0.5("+e.formatterValue(b)+")",data:{x:y,y:x}}),x=-(f+.618*m),b=c.value+.618*v,this.line4.setData({p1:{x:u,y:x},p2:{x:p,y:x}}),this.text4.setAttrs({content:"0.618("+e.formatterValue(b)+")",data:{x:y,y:x}}),x=-d,b=l.value,this.line5.setData({p1:{x:u,y:x},p2:{x:p,y:x}}),this.text5.setAttrs({content:"1("+e.formatterValue(b)+")",data:{x:y,y:x}}),this.line6.setData({p1:{x:u,y:-d},p2:{x:p,y:-f}}),this.xLabel1.setAttrs({data:{x:u,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:p,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-f},text:e.formatterValue(c.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(u,p),y:-a},width:Math.abs(u-p),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,f)},width:i.bound.width,height:Math.abs(d-f)}),this.dragVertex1.setAttrs({data:{x:u,y:-d}}),this.dragVertex2.setAttrs({data:{x:p,y:-f}}),this.addWidgetShapes(t,[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.updateColor=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("strokeStyle",e)})),[this.text1,this.text2,this.text3,this.text4,this.text5].forEach((function(t){t.setAttr("fillStyle",e)})),this.rect.setAttrs({stroke:!0,strokeStyle:e})},t.prototype.updateLineWidth=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("lineWidth",e)})),this.rect.setAttrs({stroke:!0,lineWidth:e})},t.prototype.updateLineStyle=function(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((function(t){t.setAttr("lineDash",e)})),this.rect.setAttrs({stroke:!0,lineDash:e})},t.prototype.updateBackground=function(e){this.rect.setAttr("fillStyle",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.FibonacciLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.rect.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.xLabel1.setAttr("isVisible",t),this.xLabel2.setAttr("isVisible",t),this.xRange.setAttr("isVisible",t),this.yLabel1.setAttr("isVisible",t),this.yLabel2.setAttr("isVisible",t),this.yRange.setAttr("isVisible",t);var n={isVisible:i||t,radius:Bo.radius,lineWidth:t?Bo.border_width:Bo.hover_border_width};this.updateVertex(this.getVertexs(),n)},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!0,lineWidth:e.lineWidth,showStyle:!0,lineStyle:e.lineStyle,showBg:!0,background:e.background,isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y},a=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(a||s)&&this.update()}},t.prototype.getVertexs=function(){return[this.dragVertex1,this.dragVertex2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.rect.isHover(e)?this.rect:void 0},t.prototype._onmousedown=function(e){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(r,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(r),!1),this._dragVertex(t,r)))}},t.prototype._dragVertex=function(e,t){var i=this,n=e.mainPane;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Bo.hover_border_color}),n.on("mousemove",Et.FibonacciLine,(function(n){var r=e.transformAbsoluteXYToPlotItem(n.point),o=i.getAttr("data"),a=o.p1,s=o.p2;t===i.dragVertex1&&i.setData({p1:r,p2:s}),t===i.dragVertex2&&i.setData({p1:a,p2:r}),i.update()})),n.on("mouseup",Et.FibonacciLine,(function(){n.off(Et.FibonacciLine),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragRect=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=a.p1,l=a.p2,c=e.getPosition(s),h=c.x,u=c.y,d=e.getPosition(l),g=d.x,p=d.y,f=0,m=0;o.on("mousemove",Et.FibonacciLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y;f=a-n,m=s-r;var l=e.getPlotItemByPosition(h+f,u+m),c=e.getPlotItemByPosition(g+f,p+m);i.setData({p1:l,p2:c}),i.update()})),o.on("mouseup",Et.FibonacciLine,(function(){o.off(Et.FibonacciLine),i.compeleDraw()}))},t}(No);const Jo=function(e){function t(t){void 0===t&&(t={});var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Do.defaultConfig),{width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0}),i.setAttrs(t),i.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],i.onCacheChange.bind(i)),i}return(0,c.__extends)(t,e),t.prototype.onDataChange=function(){var e=this.getAttr("lineWidth"),t=new So.Polyline(this.getAttr("data")).getBound(),i=t.x,n=t.y,r=t.width+e,o=t.height+e;this.overrideSize({width:r,height:o}),this.setAttrs({width:r,height:o}),this.setAttr("origin",{x:i-.5*e,y:n-.5*e}),this.isDataUpdate=!0,this.isBatchUpdate=!0},t.prototype.getTransformOrigin=function(){return this.getAttr("origin")},t.prototype.getContextStyles=function(){var e=this.getConfig();return{strokeStyle:e.strokeStyle,fillStyle:e.fillStyle,lineWidth:e.lineWidth,lineDash:e.lineDash,globalAlpha:e.globalAlpha}},t.prototype.drawCacheScene=function(){if(this.isBatchUpdate){var e=this.getConfig(),t=e.lineDash,i=e.data,n=e.stroke,r=e.fill,o=this.getContext(),a=this.getContextStyles();(!_n()(a,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=a,Fi(o,a)),t&&o.setLineDash(t),o.beginPath(),Rn.clearRect(o);var s=this.getTransformOrigin(),l=s.x,c=s.y;i.forEach((function(e){var t=e.map((function(e){var t=e.x,i=e.y;return{x:t-l,y:i-c}}));Rn.drawLines(o,t),r&&(o.closePath(),o.fill())})),n&&(Fi(o,{globalAlpha:1}),o.stroke()),this.isDataUpdate=!1,this.isBatchUpdate=!1}},t.prototype.drawScene=function(e){var t=this.getConfig(),i=t.lineDash,n=t.data,r=t.stroke,o=t.fill;Fi(e,this.getContextStyles()),i&&e.setLineDash(i),e.beginPath(),n.forEach((function(t){var i=t.map((function(e){return{x:e.x,y:e.y}}));Rn.drawLines(e,i),o&&(e.closePath(),e.fill())})),r&&(Fi(e,{globalAlpha:1}),e.stroke())},t.prototype.isHover=function(e,t){return void 0===t&&(t=5),!!this.preDetect()&&t>=new So.Polyline(this.getAttr("data")).getNearestPoint(e).dis},t}(Do);var Qo;!function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(Qo||(Qo={}));const $o=function(){function e(){}return e.createArrowData=function(t,i){void 0===i&&(i=Qo.Right);var n=i===Qo.Right?-this.Arrow_Offset:this.Arrow_Offset,r=new lr(t.x+n,t.y),o=new lr(0,1).rotate(120),a=new lr(0,0),s=a.clone().add(o.clone().scale(e.Arrow_Len)),l=a.clone().substract(new lr(e.Arrow_Len/2,0)),c=l.clone().substract(new lr(e.Arrow_Len,0)),h=new lr(s.x,-s.y);return i===Qo.Right?[l,s,a,h,l,c].map((function(e){return e.clone().add(r).toXY()})):[l,s,a,h,l,c].map((function(e){return e.clone().rotate(180).add(r).toXY()}))},e.createArrowPath=function(e,t,i){void 0===i&&(i={arrowLen:12,len:27,arrowAngle:45});var n=i.arrowLen||12,r=i.len||27,o=i.arrowAngle||45,a=new lr(e.x,e.y),s=a.clone().add(t.clone().rotate(o).scale(n)).toXY(),l=a.clone().add(t.clone().rotate(-o).scale(n)).toXY(),c=a.clone().add(t.clone().scale(r)).toXY(),h=a.toXY();return[[s,h,l],[h,c]]},e.Arrow_Len=8,e.Arrow_Offset=5,e}();const ea=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{dir:Et.LeftArrow,type:Et.Arrow}),t.paths=(new Jo).setAttrs({strokeStyle:Bo.default_line_color,lineWidth:4,fill:!1,lineJoin:"bevel"}),t.dragVertex=No.dragVertex.clone(["fillStyle","strokeStyle"]),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=this.getData(),n=e.getPosition(i),r=n.x,o=n.y,a=this._getDirVector(),s=$o.createArrowPath({x:r,y:-o},a);this.paths.setData(s);this.dragVertex.setAttrs({data:new So.Vector2(r,-o).add(a.clone().rotate(180).scale(15)).toXY()}),this.addWidgetShapes(t,[this.paths,this.dragVertex]),this.setAnnotationToWidgets([t])}},t.prototype.getShapes=function(){return[this.paths,this.dragVertex]},t.prototype.getDescription=function(){var e=this.getConfig();return{data:e.data,dir:e.dir,type:e.type,color:e.color,isLock:e.isLock}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane]:[]},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.LeftArrow+"-"+mi.MOUSE,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.paths.isHover(e,20)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.dragVertex.setAttrs({isVisible:i||t,radius:Bo.radius,lineWidth:t?Bo.border_width:Bo.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype.getEditAttribute=function(){var e=this.getConfig();return{showColor:!0,color:e.color,showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:"",showBg:!1,background:"",isLock:e.isLock,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}},t.prototype.getCacheStyleKey=function(){return this.getAttr("dir")},t.prototype.updateColor=function(e){this.paths.setAttr("strokeStyle",e)},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){return this.dragVertex.isHover(e)?this.dragVertex:this.paths.isHover(e)?this.paths:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Jo?this._dragPaths(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t,t.transformPointToView(e.point))))}}},t.prototype._getDirVector=function(){var e=this.getAttr("dir"),t=new So.Vector2(1,0);return e===Et.DownArrow&&t.rotate(-90),e===Et.UpArrow&&t.rotate(90),e===Et.RightArrow&&t.rotate(180),t},t.prototype._dragVertex=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=e.getPosition(a),l=s.x,c=s.y;o.on("mousemove",Et.LeftArrow+"-"+mi.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y,h=a-n,u=s-r;i.setData(e.getPlotItemByPosition(l+h,c+u)),i.update()})),o.on("mouseup",Et.LeftArrow+"-"+mi.MOUSE,(function(){o.off(Et.LeftArrow+"-"+mi.MOUSE),i.recoverDragVertexts(),i.compeleDraw()}))},t.prototype._dragPaths=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=e.getPosition(a),l=s.x,c=s.y;o.on("mousemove",Et.LeftArrow+"-"+mi.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y,h=a-n,u=s-r;i.setData(e.getPlotItemByPosition(l+h,c+u)),i.update()})),o.on("mouseup",Et.LeftArrow+"-"+mi.MOUSE,(function(){o.off(Et.LeftArrow+"-"+mi.MOUSE),i.compeleDraw()}))},t}(No);const ta=function(e){function t(){var t=e.call(this)||this;return t.setAttr("type",Et.RayLine),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,c=s.p2,h=e.getPosition(l),u=h.x,d=h.y,g=e.getPosition(c),p=g.x,f=g.y,m=t.getBound(),v=m.width,y=m.height;if(So.Algorith.isSamePoint(h,g))this.line.setData({p1:{x:u,y:-d},p2:{x:p,y:-f}});else{var x=new So.Bound(0,0,v,y),b=So.Line.getIntersectWidthBound(h,g,x);if(2===b.length){var _=new So.Vector2(p-u,f-d),C=new So.Vector2(b[0].x-u,b[0].y-d),w=new So.Vector2(b[1].x-u,b[1].y-d),A=So.Algorith.getDotMultiply(_,C)>0,L=So.Algorith.getDotMultiply(_,w)>0;if(A&&L){var E=C.getSquareLength()>w.getSquareLength()?b[0]:b[1];this.line.setData({p1:{x:u,y:-d},p2:{x:E.x,y:-E.y}})}else L?this.line.setData({p1:{x:u,y:-d},p2:{x:b[1].x,y:-b[1].y}}):this.line.setData({p1:{x:u,y:-d},p2:{x:b[0].x,y:-b[0].y}})}}this.xLabel1.setAttrs({data:{x:u,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:p,y:-a},text:ji(c.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-f},text:e.formatterValue(c.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(u,p),y:-a},width:Math.abs(u-p),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,f)},width:i.bound.width,height:Math.abs(d-f)}),this.dragVertex1.setAttrs({data:{x:u,y:-d}}),this.dragVertex2.setAttrs({data:{x:p,y:-f}}),this.addWidgetShapes(t,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t}(Zo);const ia=function(e){function t(){var t=e.call(this)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{type:Et.PriceLine}),t.line=No.line.clone(),t.text=No.text.clone().setAttrs({textAlign:"left",textBaseline:"bottom"}),t.dragVertex=No.dragVertex.clone(["fillStyle","strokeStyle"]),t.setAttr("type",Et.PriceLine),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=this.getData(),n=e.getPosition(i),r=n.x,o=n.y,a=t.getBound().width;this.line.setData({p1:{x:r,y:-o},p2:{x:a,y:-o}}),this.text.setData({x:r,y:-(o+10)}).setText(""+e.formatterValue(i.value)),this.dragVertex.setData({x:r,y:-o}),this.addWidgetShapes(t,[this.line,this.dragVertex,this.text]),this.setAnnotationToWidgets([t])}},t.prototype.getShapes=function(){return[this.line,this.dragVertex,this.text]},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.text.setAttr("fillStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e)},t.prototype.initCustomEvents=function(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",Et.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))},t.prototype.isHover=function(e){return this.line.isHover(e)||!!this.getDragVertex(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isHover;this.dragVertex.setAttrs({isVisible:i||t,lineWidth:t?Bo.border_width:Bo.hover_border_width})},t.prototype.getVertexs=function(){return[this.dragVertex]},t.prototype._highlightVertex=function(e){var t=this.getConfig(),i=t.isEdit,n=t.isHover;if(i||n){var r=this.parent.mainPane.transformPointToView(e.point),o={x:r.x,y:-r.y};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}},t.prototype.getDragVertex=function(e){return this.dragVertex.isHover(e)?this.dragVertex:this.line.isHover(e)?this.line:void 0},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Io?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}}},t.prototype._dragVertex=function(e){var t=this,i=e.mainPane;i.on("mousemove",Et.HorizontalLine,(function(i){t.setData(e.transformAbsoluteXYToPlotItem(i.point)),t.update()})),i.on("mouseup",Et.HorizontalLine,(function(){i.off(Et.HorizontalLine),t.recoverDragVertexts(),t.compeleDraw()}))},t.prototype._dragLine=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=e.getPosition(a),l=s.x,c=s.y;o.on("mousemove",Et.HorizontalLine,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y,h=a-n,u=s-r;zi(h)&&zi(u)||(i.setData(e.getPlotItemByPosition(l+h,c+u)),i.update())})),o.on("mouseup",Et.HorizontalLine,(function(){o.off(Et.HorizontalLine),i.compeleDraw()}))},t}(No);const na=function(e){function t(){var t=e.call(this)||this;return t.path=new Go({strokeStyle:Bo.default_line_color,lineWidth:1,fill:!1}),t.setAttr("type",Et.ArrowLine),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=s.p1,h=s.p2,u=e.getPosition(l),d=u.x,g=u.y,p=e.getPosition(h),f=p.x,m=p.y,v=(0,c.__read)($o.createArrowPath({x:f,y:m},new So.Vector2(d-f,g-m).normalize(),{arrowAngle:30}),1)[0];this.path.setData(v.map((function(e){return{x:e.x,y:-e.y}}))),this.line.setData({p1:{x:d,y:-g},p2:{x:f,y:-m}}),this.xLabel1.setAttrs({data:{x:d,y:-a},text:ji(l.time,r.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:f,y:-a},text:ji(h.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-g},text:e.formatterValue(l.value),fixWidth:o}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:e.formatterValue(h.value),fixWidth:o}),this.xRange.setAttrs({data:{x:Math.min(d,f),y:-a},width:Math.abs(d-f),height:n.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(g,m)},width:i.bound.width,height:Math.abs(g-m)}),this.dragVertex1.setAttrs({data:{x:d,y:-g}}),this.dragVertex2.setAttrs({data:{x:f,y:-m}}),this.addWidgetShapes(t,[this.line,this.path,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(n,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(i,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.line,this.path,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]},t.prototype.getDragVertex=function(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)||this.path.isHover(e)?this.line:void 0},t.prototype.updateColor=function(e){this.line.setAttr("strokeStyle",e),this.path.setAttr("strokeStyle",e)},t.prototype.updateLineWidth=function(e){this.line.setAttr("lineWidth",e),this.path.setAttr("lineWidth",e)},t.prototype.updateLineStyle=function(e){this.line.setAttr("lineDash",e),this.path.setAttr("lineDash",e)},t}(Zo);const ra=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{isTextEdit:!1,type:Et.Text,text:""}),t.text=No.text.clone().setAttrs({fillStyle:"#848E9C",fontSize:16,textBaseline:"top",padding:4,isCustomized:!0,isVisible:!1}),t.xLabel=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Down,fill:!0,padding:[6,2]}),t.yLabel=new Oo({background:xt.Blue3,color:xt.White,dir:wt.Right,fill:!0,padding:6}),t}return(0,c.__extends)(t,e),t.prototype.updateImmediate=function(){var e=this.getParent();if(e){!this._textArea&&this.createTextAreaElement();var t=e.mainPane,i=e.axisPane,n=e.timeAxisPane,r=e.xAxis,o=i.bound.width,a=n.bound.height,s=this.getData(),l=e.getPosition(s),c=l.x,h=l.y;this.setTextAreaPosition(e.transformXYToAbsoluteXY({x:c,y:h})),this.text.setData(this.transformYPoint({x:c,y:h})),this.xLabel.setAttrs({data:{x:c,y:-a},text:ji(s.time,r.getOriginTimeScaleType()),fixHeight:a}),this.yLabel.setAttrs({data:{x:0,y:-h},text:e.formatterValue(s.value),fixWidth:o}),this.addWidgetShapes(t,[this.text]),this.setAnnotationToWidgets([t]),this.addWidgetShapes(n,[this.xLabel]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,n,i])}},t.prototype.getShapes=function(){return[this.text,this.xLabel,this.yLabel]},t.prototype.updateBackground=function(e){this.text.setAttrs({fill:!0,background:e})},t.prototype.updateTextColor=function(e){this.text.setAttr("fillStyle",e)},t.prototype.updateTextSize=function(e){this.text.setAttr("fontSize",e)},t.prototype.updateTextBold=function(e){this.text.setAttr("fontVariant",e)},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.data,i=e.type,n=e.text,r=e.isLock;return{data:t,type:i,text:n,textColor:e.textColor,background:e.background,textFontSize:e.textFontSize,isTextBold:e.isTextBold,isLock:r}},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Vt.SOLID,showTextColor:!0,textColor:t,showFontSize:!0,textFontSize:i,showTextBold:!0,isTextBold:n,showBg:!0,background:r,isLock:a,showTextEdit:!0,isTextEdit:o,showLock:!0,showDelete:!0}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane,e.timeAxisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousedown",this._onmousedown.bind(this)),this.on("dblclick",Et.Text+"-"+mi.MOUSE,this._dblclick.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("text",(function(t){var i=t.newVal.split("\n").filter((function(e){return!!e}));e.text.setText(i)})),this.watch("isTextEdit",(function(t){t.newVal&&e._activateEdit(),e.setVisibleShapes()}))},t.prototype.isHover=function(e){return!this.getConfig().isTextEdit&&this.text.isHover(e)},t.prototype.setVisibleShapes=function(){var e=this.getConfig(),t=e.isEdit,i=e.isTextEdit;this.xLabel.setAttr("isVisible",t),this.yLabel.setAttr("isVisible",t),this.text.setAttr("isVisible",!i),!i&&this._textArea&&this._textArea.remove()},t.prototype.getVertexs=function(){return[]},t.prototype.setTextAreaPosition=function(e){var t=this.getAttr("isTextEdit"),i=this.text.getWidth(),n=this.text.getHeight();Ki(this._textArea,{width:Math.max(150,Math.min(200,i))+"px",height:Math.max(100,Math.min(150,n))+"px",transform:"translate("+e.x+"px, "+e.y+"px)",visibility:t?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor")})},t.prototype._activateEdit=function(){var e=this.getParent().getParent();Ki(this._textArea,{visibility:"visible"}),e.addElement(this._textArea),this._textArea.value=this.getAttr("text"),this.setAttr("isTextEdit",!0),this.setVisibleShapes(),this.update()},t.prototype._dblclick=function(e){var t=this.getParent();if(t){var i=t.transformPointToView(e.point),n=i.x,r=i.y;this.text.isHover({x:n,y:-r})&&!this._textArea.parentNode&&(this.setAttr("isTextEdit",!0),this.setAttr("isEdit",!0))}},t.prototype.getDragVertex=function(e){if(this.text.isHover(e))return this.text},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=t.transformPointToView(e.point),n={x:i.x,y:-i.y},r=this.getDragVertex(n);r&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,r instanceof Wo&&this._dragText(t,t.transformPointToView(e.point)))}}},t.prototype._dragText=function(e,t){var i=this,n=t.x,r=t.y,o=e.mainPane,a=this.getData(),s=e.getPosition(a),l=s.x,c=s.y;o.on("mousemove",Et.Text+"-"+mi.MOUSE,(function(t){var o=e.transformPointToView(t.point),a=o.x,s=o.y,h=a-n,u=s-r;i.setData(e.getPlotItemByPosition(l+h,c+u)),i.update()})),o.on("mouseup",Et.Text+"-"+mi.MOUSE,(function(){o.off(Et.Text+"-"+mi.MOUSE),i.compeleDraw()}))},t.prototype.createTextAreaElement=function(){var e=this,t=this.getParent();(this._textArea=Zi("textarea",{visibility:"hidden"},"text-area-wrap"),t)&&t.getParent().addElement(this._textArea);this._textArea.addEventListener("input",rn((function(){var t=e._textArea.value,i=void 0===t?"":t;e.setAttr("text",i)}),10)),Ao.on(document,"mousedown",(function(t){var i=e.getAttr("isTextEdit"),n=t.originEvent;i&&n&&!n.target.contains(e._textArea)&&(e._textArea.remove(),e.compeleDraw(),e.update())}),!0)},t.prototype.compeleDraw=function(){this.setAttrs({isTextEdit:!1,isComplete:!0}),this.syncStorage()},t}(No);Yn(Qn),Yn($n);const oa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.config=(0,c.__assign)((0,c.__assign)({},Sn()(No.defaultConfig)),{isTextEdit:!1,type:Et.OrderLine,price:"",quantity:"",isNeedStore:!1}),t.dragIcon=new Ko,t.dragIconBorder=new ko({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:16,height:21}),t.closeIcon=new Ko,t.closeIconBorder=new ko({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:20,height:21}),t.priceLabel=new Oo({background:"#0ECB81",color:xt.White,borderColor:"#474D57",dir:wt.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1}),t.quantityLabel=new Oo({background:"#1E2329",color:xt.White,borderColor:"#474D57",dir:wt.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1}),t.line=No.line.clone().setAttrs({lineDash:[1,1]}),t.yLabel=new Oo({color:"#0ECB81",borderColor:"#0ECB81",dir:wt.Right,fill:!0,stroke:!0,padding:6,fixHeight:21,lineWidth:1}),t._onPriceChange=nn((function(e){var i=e?"draLine":"dragIcon",n=t.getConfig().onPriceChange;n&&n((0,c.__assign)((0,c.__assign)({},t.getDescription()),{trigger:i}))}),100),t}return(0,c.__extends)(t,e),t.prototype.isIndependent=function(){return!0},t.prototype.updateImmediate=function(){var e=this,t=this.getParent(),i=t,n=i.mainPane,r=i.axisPane;if(t&&t.yAxis){(!this._quantityInput||!this._priceInput)&&this.createTextAreaElement(),this.dragIcon.getAttr("imageSource")||this.dragIcon.getAttr("isLoading")||(this.dragIcon.setAttr("isLoading",!0),Yn(Qn).then((function(t){e.dragIcon.setImage(t),e.update()}))),this.closeIcon.getAttr("imageSource")||this.closeIcon.getAttr("isLoading")||(this.closeIcon.setAttr("isLoading",!0),Yn($n).then((function(t){e.closeIcon.setImage(t),e.update()})));var o=r.bound.width-1,a=this.getConfig(),s=a.price,l=a.quantity,c=t.getYPos(+s),h=0;this.dragIconBorder.setAttrs({data:{x:h,y:-c-.5*this.dragIconBorder.getHeight()}}),this.dragIcon.setAttrs({data:{x:h+.5*(this.dragIconBorder.getWidth()-this.dragIcon.getWidth()),y:-c-.5*this.dragIcon.getHeight()}}),h+=this.dragIconBorder.getWidth(),this.priceLabel.setAttrs({data:{x:h,y:-c},text:s}),this.setTextAreaPosition(t.transformXYToAbsoluteXY({x:h,y:c}),"price"),h+=this.priceLabel.getWidth(),this.quantityLabel.setAttrs({data:{x:h,y:-c},text:l}),this.setTextAreaPosition(t.transformXYToAbsoluteXY({x:h,y:c})),h+=this.quantityLabel.getWidth(),this.closeIconBorder.setAttrs({data:{x:h,y:-c-.5*this.closeIconBorder.getHeight()}}),this.closeIcon.setAttrs({data:{x:h+.5*(this.closeIconBorder.getWidth()-this.closeIcon.getWidth()),y:-c-.5*this.closeIcon.getHeight()}}),h+=this.closeIconBorder.getWidth(),this.line.setAttrs({data:{p1:{x:h,y:-c},p2:{x:n.getBound().width,y:-c}}}),this.yLabel.setAttrs({data:{x:0,y:-c},text:t.formatterValue(+s),fixWidth:o})}this.addWidgetShapes(n,[this.dragIconBorder,this.dragIcon,this.priceLabel,this.quantityLabel,this.closeIconBorder,this.closeIcon,this.line]),this.addWidgetShapes(r,[this.yLabel]),this.setAnnotationToWidgets([n,r])},t.prototype.getShapes=function(){return[this.priceLabel,this.quantityLabel,this.line,this.yLabel,this.dragIcon,this.dragIconBorder,this.closeIcon,this.closeIconBorder]},t.prototype.getDescription=function(){var e=this.getConfig(),t=e.type,i=e.price,n=e.quantity,r=e.isNeedStore;return{id:this.id,type:t,price:i,prevPrice:this._prevPrice,quantity:n,prevQuantity:this._prevQuantity,isNeedStore:r}},t.prototype.getEditAttribute=function(){var e=this.getConfig(),t=e.textColor,i=e.textFontSize,n=e.isTextBold,r=e.background,o=e.isTextEdit,a=e.isLock;return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:Vt.SOLID,showTextColor:!1,textColor:t,showFontSize:!1,textFontSize:i,showTextBold:!1,isTextBold:n,showBg:!1,background:r,isLock:a,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}},t.prototype.getRenderPanes=function(){var e=this.getParent();return e?[e.mainPane,e.axisPane]:[]},t.prototype.initCustomEvents=function(){var e=this;this.on("mousedown",this._onmousedown.bind(this)),this.on("dblclick",Et.Text+"-"+mi.MOUSE,this._dblclick.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("quantity",(function(t){var i=t.newVal;e.quantityLabel.setAttr("text",i),e.setAttr("data",[]),e.update()})),this.watch("price",(function(t){var i=t.newVal;e.priceLabel.setAttr("text",i),e.setAttr("data",[]),e.update()})),this.watch("isTextEdit",(function(t){t.newVal?e._activateEdit():e.setVisibleShapes()})),this.watch("priceBackground",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("background",i)})),this.watch("priceColor",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("color",i)})),this.watch("priceBorderColor",(function(t){var i=t.newVal;i&&e.priceLabel.setAttr("borderColor",i)})),this.watch("quantityBackground",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("background",i)})),this.watch("quantityColor",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("color",i)})),this.watch("quantityBorderColor",(function(t){var i=t.newVal;i&&e.quantityLabel.setAttr("borderColor",i)})),this.watch("borderColor",(function(t){var i=t.newVal;i&&(e.dragIconBorder.setAttr("strokeStyle",i),e.closeIconBorder.setAttr("strokeStyle",i))})),this.watch("lineColor",(function(t){var i=t.newVal;i&&e.line.setAttr("strokeStyle",i)})),this.watch("priceLabelBackground",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("background",i)})),this.watch("priceLabelBorderColor",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("borderColor",i)})),this.watch("priceLabelColor",(function(t){var i=t.newVal;i&&e.yLabel.setAttr("color",i)})),this.watch("lineDash",(function(t){var i=t.newVal;i&&e.line.setAttr("lineDash",i)}))},t.prototype.isHover=function(e){return!this.getConfig().isTextEdit&&(this.closeIconBorder.isHover(e)||this.dragIconBorder.isHover(e)||this.line.isHover(e)||this.priceLabel.isHover(e)||this.quantityLabel.isHover(e))},t.prototype.updateBackground=function(e){this.dragIconBorder.setAttr("fillStyle",e),this.closeIconBorder.setAttr("fillStyle",e)},t.prototype.setVisibleShapes=function(){this.getConfig().isTextEdit?(this.quantityLabel.setAttr("isVisible","quantity"!==this._activeInputType),this.priceLabel.setAttr("isVisible","price"!==this._activeInputType)):(this._quantityInput&&this._quantityInput.remove(),this._priceInput&&this._priceInput.remove(),this.quantityLabel.setAttr("isVisible",!0),this.priceLabel.setAttr("isVisible",!0))},t.prototype.getVertexs=function(){return[]},t.prototype.setTextAreaPosition=function(e,t){void 0===t&&(t="quantity");var i=this.getAttr("isTextEdit"),n=this.getConfig().textInputBorderColor;if("quantity"===t){var r=this.quantityLabel.getWidth(),o=this.quantityLabel.getHeight();Ki(this._quantityInput,{width:r+"px",height:o+"px",transform:"translate("+e.x+"px, "+(e.y-.5*o)+"px)",visibility:i?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor"),borderRadius:"0",border:"1px solid "+n,fontSize:"10px",boxSizing:"border-box"})}else if("price"===t){r=this.priceLabel.getWidth(),o=this.priceLabel.getHeight();Ki(this._priceInput,{width:r+"px",height:o+"px",transform:"translate("+e.x+"px, "+(e.y-.5*o)+"px)",visibility:i?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor"),borderRadius:"0",border:"1px solid "+n,fontSize:"10px",boxSizing:"border-box"})}},t.prototype._activateEdit=function(){var e=this.getParent().getParent();"quantity"===this._activeInputType?(Ki(this._quantityInput,{visibility:"visible"}),e.addElement(this._quantityInput),this._quantityInput.value=this.getAttr("quantity"),this._quantityInput.focus()):"price"===this._activeInputType&&(Ki(this._priceInput,{visibility:"visible"}),e.addElement(this._priceInput),this._priceInput.value=this.getAttr("price"),this._priceInput.focus()),this.setVisibleShapes(),this.update()},t.prototype._dblclick=function(e){var t=this.getParent();if(t&&!e.isDealed){var i=t.transformPointToView(e.point),n=i.x,r=i.y,o=this.quantityLabel.isHover({x:n,y:-r})&&!this._quantityInput.parentNode,a=this.priceLabel.isHover({x:n,y:-r})&&!this._priceInput.parentNode;if(o||a){this._activeInputType=o?"quantity":"price",this.setAttr("isTextEdit",!0),this.setAttr("isEdit",!0);var s=this.getConfig(),l=s.onClickPrice,c=s.onClickQuantity,h=s.quantity,u=s.price;a?l&&l({trigger:"clickPriceInput",price:u,quantity:h}):o&&c&&c({trigger:"clickQuantityInput",price:u,quantity:h}),this._prevPrice=u,this._prevQuantity=h,e.isDealed=!0}}},t.prototype._onClickClose=function(){var e=this.getConfig().onClose;e&&e(this.getDescription())},t.prototype._onmousedown=function(e){if(!e.isDealed){var t=this.getParent();if(!this.isDisableDrag()){var i=this.getConfig(),n=i.price,r=i.quantity;this._prevPrice=n,this._prevQuantity=r;var o=t.transformPointToView(e.point),a={x:o.x,y:-o.y};this.closeIconBorder.isHover(a)?(e.isDealed=!0,this._onClickClose()):(this.dragIconBorder.isHover(a)||this.line.isHover(a))&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,this._drag(t,this.line.isHover(a)))}}},t.prototype._drag=function(e,t){var i=this;void 0===t&&(t=!1);var n=e.mainPane,r=this.getConfig(),o=r.price,a=r.onClickDragArea,s=r.dragSquareDraggingBackgroundColor,l=r.dragSquareBackgroundColor,c=r.lineDash,h=r.draggingLineDash,u=!1;n.on("mousemove",""+Et.OrderLine,(function(t){s&&i.dragIconBorder.setAttr("fillStyle",s),h&&i.line.setAttrs({lineDash:h});var n=e.transformPointToView(t.point).y,r=e.formatterValue(e.getPriceOfYPos(n));i.setAttr("price",""+r),u=o!==""+r})),Ao.on(document,"mouseup."+Et.OrderLine,(function(){l&&i.dragIconBorder.setAttr("fillStyle",l),c&&i.line.setAttrs({lineDash:c}),n.off("mousemove",""+Et.OrderLine),Ao.off(document,"mouseup."+Et.OrderLine),i.compeleDraw(),u&&i._onPriceChange(t);var e=i.getAttr("price");a&&a({triggerType:t?"dragLine":"dragIcon",prevPrice:o,currentPrice:e})}))},t.prototype._onComplete=function(){this.getAttr("isTextEdit")&&(this._quantityInput.remove(),this._priceInput.remove(),this.compeleDraw(),this.update())},t.prototype.createTextAreaElement=function(){var e=this,t=this.getParent();if(this._quantityInput=Zi("input",{visibility:"hidden"},"text-area-wrap"),this._priceInput=Zi("input",{visibility:"hidden"},"text-area-wrap"),t){var i=t.getParent();i.addElement(this._quantityInput),i.addElement(this._priceInput)}this._quantityInput.addEventListener("input",rn((function(){var t=e._quantityInput.value,i=void 0===t?"":t;e.setAttr("quantity",i)}),10)),this._quantityInput.addEventListener("blur",rn((function(){var t=e.getConfig().onQuantityChange;t&&t(e.getDescription())}),100)),this._priceInput.addEventListener("blur",rn((function(){var t=e._priceInput.value,i=void 0===t?"":t;e.setAttr("price",i);var n=e.getConfig().onPriceChange;n&&n((0,c.__assign)((0,c.__assign)({},e.getDescription()),{trigger:"input"}))}),100));var n=function(t){13===t.which&&e._onComplete()};this._priceInput.onkeypress=n,this._quantityInput.onkeypress=n,Ao.on(document,"mousedown",(function(t){var i=e.getAttr("isTextEdit"),n=t.originEvent;!i||!n||n.target.contains(e._quantityInput)&&n.target.contains(e._priceInput)||e._onComplete()}),!0)},t.prototype.compeleDraw=function(){this.setAttrs({isTextEdit:!1,isComplete:!0})},t}(No);var aa="DRAW_EVENT";const sa=function(e){function t(t){var i=e.call(this)||this;return i.config=(0,c.__assign)((0,c.__assign)({},Sn()(Cn.defaultConfig)),{isKeepDrawing:!1,nextAction:Et.KeepDrawing}),i._actionsMapping=new Map,i._isAbort=!1,i._candleInstance=t,i.initHotkeys(),i.registerActions(),i}return(0,c.__extends)(t,e),t.prototype.setCompleteDrawCallback=function(e){this._completeDrawCallback=e},t.prototype.reset=function(){this._isAbort&&this._candleInstance.setAnnotationLockStatus(!1),this.clearEvents()},t.prototype.disAbleDragAnnotations=function(){this._isAbort=!0,this._candleInstance.setAnnotationLockStatus(!0)},t.prototype.completeCallbackHook=function(e){if(this._isAbort=!1,this._candleInstance.setAnnotationLockStatus(!1),e&&this._candleInstance.selectAnnotation(e),this._completeDrawCallback&&this._completeDrawCallback(),this.getAttr("isKeepDrawing")){var t=this.getAttr("nextAction"),i=this.getActionByType(t);i&&i()}else this._completeDrawCallback=null},t.prototype.transformJSONToAnnotation=function(e,t){var i,n=e.type,r=((i={})[Et.TrendLine]=Zo,i[Et.StraightLine]=Yo,i[Et.Arrow]=ea,i[Et.ExtendTrendLine]=Fo,i[Et.RayLine]=ta,i[Et.FibonacciLine]=qo,i[Et.InfoLine]=zo,i[Et.ParallelLine]=jo,i[Et.Rectangle]=Xo,i[Et.Text]=ra,i[Et.PriceLine]=ia,i[Et.ArrowLine]=na,i[Et.OrderLine]=oa,i);if(n&&r[n]){var o=new r[n];return n===Et.Arrow&&e.background&&(o.color=o.color||e.background),o.setParent(t||this._getEditorPanel()).setAttrs((0,c.__assign)((0,c.__assign)({isComplete:!0},e),{isEdit:!1})).setAttr("isDawing",!1),o}},t.prototype.initHotkeys=function(){var e=this;(0,Lo.Z)("backspace, del",(function(){e.deleteCurrentAnnotation()})),(0,Lo.Z)("esc",(function(){e.clear()}))},t.prototype.clear=function(){this.clearEvents(),this.makeAnnotationsDestroy(),this.completeCallbackHook()},t.prototype.clearEvents=function(){var e=this._getEditorPanel();e&&e.mainPane.off(aa)},t.prototype.registerActions=function(){var e,t=this,i=this._getEditorPanel();if(i){var n=((e={})[Et.TrendLine]=this._drawExtendLine.bind(this,i,Zo,Et.TrendLine),e[Et.ExtendTrendLine]=this._drawExtendLine.bind(this,i,Fo,Et.ExtendTrendLine),e[Et.RayLine]=this._drawExtendLine.bind(this,i,ta,Et.RayLine),e[Et.InfoLine]=this._drawExtendLine.bind(this,i,zo,Et.InfoLine),e[Et.ArrowLine]=this._drawExtendLine.bind(this,i,na,Et.ArrowLine),e[Et.HorizontalLine]=this._drawStraightLine.bind(this,i,Et.HorizontalLine),e[Et.VerticalLine]=this._drawStraightLine.bind(this,i,Et.VerticalLine),e[Et.CrossLine]=this._drawStraightLine.bind(this,i,Et.CrossLine),e[Et.Rectangle]=this._drawRectangle.bind(this,i),e[Et.ParallelLine]=this._drawParallelChannel.bind(this,i),e[Et.FibonacciLine]=this._drawFibLine.bind(this,i),e[Et.LeftArrow]=this._drawArrow.bind(this,i,Et.LeftArrow),e[Et.RightArrow]=this._drawArrow.bind(this,i,Et.RightArrow),e[Et.UpArrow]=this._drawArrow.bind(this,i,Et.UpArrow),e[Et.DownArrow]=this._drawArrow.bind(this,i,Et.DownArrow),e[Et.Text]=this._drawText.bind(this,i),e[Et.PriceLine]=this._drawPriceLine.bind(this,i),e);Object.keys(n).forEach((function(e){t._actionsMapping.set(e,(function(){e!==Et.KeepDrawing&&(t.clearEvents(),t.disAbleDragAnnotations()),n[e]()}))}))}},t.prototype.getActionByType=function(e){return this._actionsMapping.get(e)},t.prototype.setNextAction=function(e){this.setAttr("nextAction",e)},t.prototype.getShapeById=function(e){return this._getEditorPanel().getAnnotations().find((function(t){return t.id===e}))},t.prototype.deleteAllOrderShape=function(e){var t=this._getEditorPanel(),i=t.getAnnotations(),n=!1;e=e||function(e){return e.getAttr("type")===Et.OrderLine};for(var r=0,o=i.length;r<o;r++)e(i[r])&&(i[r].remove(!1),n=!0);n&&t.update(vt.Marks)},t.prototype.deleteAllAnnotation=function(){for(var e=this._getEditorPanel(),t=e.getAnnotations(),i=0,n=t.length;i<n;i++){t[i].getConfig().type!==Et.OrderLine&&t[i].remove(!1)}e.update(vt.Marks)},t.prototype.deleteCurrentAnnotation=function(){var e=this._getEditorPanel().getAnnotations().find((function(e){return e.getAttr("isEdit")}));e&&e.remove()},t.prototype.makeAnnotationsDestroy=function(){for(var e=this._getEditorPanel().getAnnotations(),t=0,i=e.length;t<i;t++)e[t].destroy()},t.prototype.keepDraw=function(){var e=this.getAttr("isKeepDrawing");this.setAttr("isKeepDrawing",!e)},t.prototype._drawExtendLine=function(e,t,i){var n=this,r=(new t).setParent(e),o=null,a=null,s=e.mainPane;s.on("mousedown",aa,(function(t){t.isDealed=!0,o||(r.setAttrs({color:No.getCacheStyle(i,"color"),lineWidth:No.getCacheStyle(i,"lineWidth"),lineStyle:No.getCacheStyle(i,"lineStyle")}),o=e.transformAbsoluteXYToPlotItem(t.point)),s.off("mousemove",aa),s.on("mousemove",aa,(function(t){t.isDealed=!0,a=e.transformAbsoluteXYToPlotItem(t.point),r.setData({p1:o,p2:a}),r.update()})),s.once("mouseup",aa,(function(){!o||!a||zi(o.time-a.time)&&zi(o.value-a.value)||(s.off(aa),r.compeleDraw(),r.recoverDragVertexts(),n.completeCallbackHook(r))}))}),!0)},t.prototype._drawStraightLine=function(e,t){var i=this,n=(new Yo).setParent(e);e.mainPane.once("click",aa,(function(r){n.setAttrs({lineType:t,color:No.getCacheStyle(t,"color"),lineWidth:No.getCacheStyle(t,"lineWidth"),lineStyle:No.getCacheStyle(t,"lineStyle")}),n.setData(e.transformAbsoluteXYToPlotItem(r.point)),n.compeleDraw(),i.completeCallbackHook(n)}))},t.prototype._drawPriceLine=function(e){var t=this,i=(new ia).setParent(e);e.mainPane.once("click",aa,(function(n){i.setAttrs({color:No.getCacheStyle(Et.PriceLine,"color"),lineWidth:No.getCacheStyle(Et.PriceLine,"lineWidth"),lineStyle:No.getCacheStyle(Et.PriceLine,"lineStyle")}),i.setData(e.transformAbsoluteXYToPlotItem(n.point)),i.compeleDraw(),t.completeCallbackHook(i)}))},t.prototype._drawRectangle=function(e){var t=this,i=(new Xo).setParent(e),n=null,r=null,o=e.mainPane;o.on("mousedown",aa,(function(a){a.isDealed=!0,n||(i.setAttrs({color:No.getCacheStyle(Et.Rectangle,"color"),lineWidth:No.getCacheStyle(Et.Rectangle,"lineWidth"),lineStyle:No.getCacheStyle(Et.Rectangle,"lineStyle"),background:No.getCacheStyle(Et.Rectangle,"background")}),n=e.transformAbsoluteXYToPlotItem(a.point)),r||(r=e.transformAbsoluteXYToPlotItem(a.point)),o.off("mousemove",aa),o.on("mousemove",aa,(function(t){t.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(t.point),i.setData({p1:n,p2:r}),i.update()})),o.once("mouseup",aa,(function(){!n||!r||zi(n.time-r.time)&&zi(n.value-r.value)||(o.off(aa),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawParallelChannel=function(e){var t=this,i=(new jo).setParent(e),n=null,r=null,o=null,a=e.mainPane;a.on("mousedown",aa,(function(s){s.isDealed=!0;var l=e.transformAbsoluteXYToPlotItem(s.point);n?r?o||(o=l):r=l:(i.setAttrs({color:No.getCacheStyle(Et.ParallelLine,"color"),lineWidth:No.getCacheStyle(Et.ParallelLine,"lineWidth"),lineStyle:No.getCacheStyle(Et.ParallelLine,"lineStyle"),background:No.getCacheStyle(Et.ParallelLine,"background")}),n=l),a.off("mousemove",aa),a.on("mousemove",aa,(function(t){t.isDealed=!0;var a=e.transformAbsoluteXYToPlotItem(t.point);r?o||i.setData({p1:n,p2:r,p3:a}):i.setData({p1:n,p2:a,p3:a}),i.update()})),a.once("mouseup",aa,(function(){n&&r&&o&&(a.off(aa),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawFibLine=function(e){var t=this,i=(new qo).setParent(e),n=null,r=null,o=e.mainPane;o.on("mousedown",aa,(function(a){a.isDealed=!0,n||(i.setAttrs({color:No.getCacheStyle(Et.FibonacciLine,"color"),lineWidth:No.getCacheStyle(Et.FibonacciLine,"lineWidth"),lineStyle:No.getCacheStyle(Et.FibonacciLine,"lineStyle"),background:No.getCacheStyle(Et.FibonacciLine,"background")}),n=e.transformAbsoluteXYToPlotItem(a.point)),o.off("mousemove",aa),o.on("mousemove",aa,(function(t){t.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(t.point),i.setData({p1:n,p2:r}),i.update()})),o.once("mouseup",aa,(function(){!n||!r||zi(n.time-r.time)&&zi(n.value-r.value)||(o.off(aa),i.compeleDraw(),i.recoverDragVertexts(),t.completeCallbackHook(i))}))}),!0)},t.prototype._drawArrow=function(e,t){var i=this,n=(new ea).setParent(e);e.mainPane.once("mousedown",aa,(function(r){n.setAttrs({dir:t,background:No.getCacheStyle(t,"background")}),n.setData(e.transformAbsoluteXYToPlotItem(r.point)),n.compeleDraw(),i.completeCallbackHook(n)}))},t.prototype._drawText=function(e){var t=this,i=(new ra).setParent(e);i.createTextAreaElement(),e.mainPane.once("click",aa,(function(n){i.setAttrs({textColor:No.getCacheStyle(Et.Text,"textColor"),textFontSize:No.getCacheStyle(Et.Text,"textFontSize"),isTextBold:No.getCacheStyle(Et.Text,"isTextBold"),background:No.getCacheStyle(Et.Text,"background")}),i.setAttr("isTextEdit",!0).setData(e.transformAbsoluteXYToPlotItem(n.point)),n.originEvent.stopPropagation(),t.completeCallbackHook(i),n.isDealed=!0}))},t.prototype._getEditorPanel=function(){return this._candleInstance.getPanel((function(e){return e instanceof or&&e.panelType===_t.BASE}))},t}(Cn);var la=function(e){var t,i=[],n=null,r="",o="",a=[],s=!1;var l=nn((function(t){void 0===t&&(t={}),h(t,!0),function(){n&&n();var t={symbol:r,interval:o},i=d(t);n=e.subscribe(t,(function(e){var t;if(i({symbol:r,interval:o})){var n=a.length;if(n>0){var s=null===(t=a[n-1])||void 0===t?void 0:t.time;e.time>s?a.push(e):a.splice(n-1,1,e),u()}}}))}()}),100);function h(i,n){if(void 0===i&&(i={}),void 0===n&&(n=!1),!s){if(i.endTime){if(i.startTime=i.startTime||i.endTime-500*Pi(o),i.endTime=t?Math.min(t,i.endTime):i.endTime,t=Math.min(i.startTime,t),i.endTime<i.startTime)throw new Error("custom indicator fetch data occured time error");i.limit=Math.ceil((i.endTime-i.startTime)/Pi(o)+1)}var l=(0,c.__assign)((0,c.__assign)({},i),{symbol:r,interval:o}),h=d(l);e.getData(l,(function(e){var t=e.data,i=e.isLoadAll;h((0,c.__assign)((0,c.__assign)({},l),{symbol:r,interval:o}))&&(a=n?t:function(e){var t={};return e.filter((function(e){var i=e.time;return!t[i]&&(t[i]=1,!0)})).sort((function(e,t){return e.time-t.time}))}(a.concat(t)),s=i,u())}))}}function u(){i.forEach((function(e){e()}))}function d(e){return function(t){return _n()(e,t)}}return(0,c.__assign)((0,c.__assign)({},e),{init:function(e,i,c){r=e,o=i,a.length=0,t=0,s=!1,n&&n(),l(c)},getResult:function(t,i,n){e.getResult(a,{},(function(e){n(e)}))},subscribe:function(e){-1===i.indexOf(e)&&i.push(e)},unSusbcribe:function(){n&&n(),n=null,i.length=0},loadData:function(e){return void 0===e&&(e={}),h(e)}})},ca=i("wuXC"),ha=i.n(ca);const ua=function(e){function t(i){var n=e.call(this)||this;return n._visibleViewHeight=0,n._maxTimestamp=0,n._isFirstRender=!0,n._oldDevicePixelRatio=n.devicePixelRatio,n._regContetxt={baseAsset:"",quoteAsset:""},n.setCursor=function(e,t){var i,n;return function(r){i&&clearTimeout(i),n=e(r,n),i=setTimeout((function(){t.call(null,n),n=void 0}),16)}}((function(e,t){return e.isClear&&e.key===(null===t||void 0===t?void 0:t.key)?{config:{},weight:0}:t&&t.weight>e.weight?t:e}),(function(e){var t=e.config,i=e.isRecord,r=void 0===i||i,o=n.getAttr("container"),a=n.getAttr("crossHair"),s=t.style||a.style;o&&Ki(o,{cursor:s}),r&&s!==a.style&&(s===yi.DEFAULT&&Rn.clearRect(n.getHitContext()),n.setAttr("crossHair",(0,c.__assign)((0,c.__assign)({},a),t)))})),n.unSelectAnnotation=nn((function(){for(var e=n.getIPanels(),t=0;t<e.length;t++)for(var i=e[t].getAnnotations(),r=0,o=i.length;r<o;r++)if(i[r].getAttr("isEdit"))return;n.fire("unSelectAnnotation")}),100),n.saveChart=nn((function(){try{n.fire("saveChartNeeded",{data:n.getStoreData()})}catch(e){console.warn("save annotations occured error: "+e.message)}})),n.config=on(at()(t.defaultConfig),(0,c.__assign)((0,c.__assign)({},i),{indicatorHelper:Object.keys(bo).reduce((function(e,t){var i=(0,bo[t])();return e[i.defaultProps.id]=i,e}),{})})),n.initStates(),n.initContainer(),n.initPanels(),n.initEvents(),n.initialData(),n._editor=new sa(n),n}return(0,c.__extends)(t,e),Object.defineProperty(t.prototype,"lastDataTime",{get:function(){return this._lastDataTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleViewHeight",{get:function(){return this._visibleViewHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gapWidgetsLength",{get:function(){return this.filterPanels((function(e){return e instanceof ur})).length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iPanels",{get:function(){return this.filterPanels((function(e){return e instanceof or}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleContainer",{get:function(){return this._titleContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"regContetxt",{get:function(){return this._regContetxt},enumerable:!0,configurable:!0}),t.prototype.getEditor=function(){return this._editor},t.prototype.getCanvasCollection=function(){return[this._canvas,this._hitCanvas,this._frameCanvas,this._markCanvas]},t.prototype.getCanvas=function(){return this._canvas},t.prototype.setCanvas=function(e){return this._canvas=e,this},t.prototype.getHitCanvas=function(){return this._hitCanvas},t.prototype.setHitCanvas=function(e){return this._hitCanvas=e,this},t.prototype.getMarkCanvas=function(){return this._markCanvas},t.prototype.setMarkCanvas=function(e){return this._markCanvas=e,this},t.prototype.getFrameCanvas=function(){return this._frameCanvas},t.prototype.setFrameCanvas=function(e){return this._frameCanvas=e,this},t.prototype.getContext=function(){return this._ctx||this.setContext(this._canvas.getContext("2d")),this._ctx},t.prototype.setContext=function(e){return this._ctx=e,this},t.prototype.getHitContext=function(){return this._hitCtx||this.setHitContext(this._hitCanvas.getContext("2d")),this._hitCtx},t.prototype.setHitContext=function(e){return this._hitCtx=e,this},t.prototype.getMarkContext=function(){return this._markCtx||this.setMarkContext(this._markCanvas.getContext("2d")),this._markCtx},t.prototype.setMarkContext=function(e){return this._markCtx=e,this},t.prototype.getFrameContext=function(){return this._frameCtx||this.setFrameContext(this._frameCanvas.getContext("2d")),this._frameCtx},t.prototype.setFrameContext=function(e){return this._frameCtx=e,this},t.prototype.getXAxis=function(){return this._xAxis},t.prototype.getTimeAxisWidget=function(){return this._timeAxisWidget},t.prototype.getMaxTimestamp=function(){return this._maxTimestamp},t.prototype.getSeriesData=function(){var e=this.getConfig().seriesData;return void 0===e?[]:e},t.prototype.getVisibleSeriesData=function(){return this.getAttr("visibleSeriesData")||[]},t.prototype.setCurrentItemByTime=function(e){var t=this.getCurrentItemByTime(e);t&&this.setAttr("currentItem",t)},t.prototype.getCurrentItemByTime=function(e){if(!isNaN(e)){var t=this.getAttr("seriesData"),i=this.getVisibleSeriesData();if(t&&t.length>0){var n=t[0].time,r=i[i.length-1];if(e<n)return{time:e,open:NaN,high:NaN,low:NaN,close:NaN,volume:NaN,change:"NaN",amplitude:"NaN"};if(r&&e>=r.time){var o=t[t.length-1],a=t[t.length-2],s=o&&a?$i((o.close-a.close)/a.close):"",l=o&&a?$i((o.high-o.low)/a.close):"";return(0,c.__assign)((0,c.__assign)({},o),{change:s,amplitude:l})}var h=this._xAxis.getUnitTimeValue()/2,u=an(t,(function(t){return Math.abs(e-t.time)<h?0:e-t.time})),d=t[u],g=t[u-1],p=d&&g?$i((d.close-g.close)/g.close):"",f=d&&g?$i((d.high-d.low)/g.close):"";return(0,c.__assign)((0,c.__assign)({},d),{change:p,amplitude:f})}}},t.prototype.getIndicatorHelperByName=function(e){var t=this.getAttr("indicatorHelper")[e];return"function"===typeof t&&(t=t()),t},t.prototype.resize=function(){var e=this.getAttr("container");if(e){var t=this.getConfig(),i=t.width,n=t.height,r=e.clientWidth,o=e.clientHeight;if(0!==r&&0!==o&&(this.setAttrs({width:r,height:o}),i!==r||n!==o||this._oldDevicePixelRatio!==this.devicePixelRatio)){if(this._oldDevicePixelRatio=this.devicePixelRatio,this.updateContainerSize(),!this._xAxis)return;this.setTimeAxis(!0),this.setVisibleViewHeight(),this.resizeAllPanelBound(),this.renderImmediate(vt.Resize)}}},t.prototype.clearPanel=function(){var e=this.getContext(),t=this.getMarkContext();Rn.clearRect(e),Rn.clearRect(t)},t.prototype.setWidgetParent=function(e){e.setParent(this),e.afterSetParent()},t.prototype.getYExtent=function(){var e=this.getVisibleSeriesData().reduce((function(e,t){return e.push.apply(e,(0,c.__spread)([t.high,t.low])),e}),[]);return[vn()(e),fn()(e)]},t.prototype.getVisibleTimeExtent=function(){var e=this.getVisibleSeriesData().map((function(e){return e.time}));return[vn()(e),fn()(e)]},t.prototype.getTimeExtent=function(){var e,t,i=this.getSeriesData();return[null===(e=i[0])||void 0===e?void 0:e.time,null===(t=i[i.length-1])||void 0===t?void 0:t.time]},t.prototype.setTimeAxis=function(e){void 0===e&&(e=!1);var t=this.getConfig(),i=t.margin,n=t.width-i.left-i.right,r=this.getTimeExtent(),o=(0,c.__read)(r,2)[1];this._maxTimestamp=o;var a=this.getSeriesData(),s=this._xAxis;if(this._xAxis=new fr(r,[0,n],a,null===s||void 0===s?void 0:s.getCurrentScaleCoeff()),this._xAxis.updateSliceTimeInterval(a),e&&(null===s||void 0===s?void 0:s.isValid()))this.setRightTime(s.domainRange.getMaxValue());else if(this.isLoaded()&&(null===s||void 0===s?void 0:s.isValid())&&s.getUnitTimeValue()===this._xAxis.getUnitTimeValue()){var l=this._xAxis.getDomainInterval(),h=this._xAxis.getEasedSliceTime(s.domainRange.getMaxValue(),.5*-l).time;this.setTimeAxisCenter(h);var u=this.getAttr("currentItem");u&&this.setCurrentItemByTime(u.time)}else if(n>0){l=this._xAxis.getDomainInterval(),h=this._xAxis.getEasedSliceTime(this._xAxis.domainRange.getMaxValue(),-l*(.95-.5)).time;this.setTimeAxisCenter(h),this.setCurrentItemByTime(this._maxTimestamp)}this.setVisibleSeriesData()},t.prototype.setVisibleSeriesData=function(){var e=this._xAxis.domainRange,t=new Dn(e.getMinValue(),e.getMaxValue()).sliceArray(this.getSeriesData(),(function(e){return e.time}));this.setAttr("visibleSeriesData",t)},t.prototype.initContainer=function(){var e=this.getAttr("container");if(e){var t=e.clientWidth,i=e.clientHeight;this.setAttrs({width:t,height:i});var n={position:"absolute",left:"0",top:"0",width:"100%",height:"100%"};this.setHitCanvas(Oi(t,i,{className:"hit",style:(0,c.__assign)((0,c.__assign)({},n),{zIndex:"1000"})})),this.setMarkCanvas(Oi(t,i,{className:"mark",style:(0,c.__assign)((0,c.__assign)({},n),{zIndex:"900"})})),this.setCanvas(Oi(t,i,{className:"scene",style:(0,c.__assign)((0,c.__assign)({},n),{zIndex:"200"})})),this.setFrameCanvas(Oi(t,i,{className:"frame",style:(0,c.__assign)((0,c.__assign)({},n),{zIndex:"100"})})),this._titleContainer=Zi("div",(0,c.__assign)((0,c.__assign)({},n),{height:"0",zIndex:"2000"}),"kline-title-wrap"),this.addElemens([this.getCanvas(),this.getFrameCanvas(),this.getMarkCanvas(),this.getHitCanvas(),this._titleContainer])}},t.prototype.initPanels=function(){this.setVisibleViewHeight(),this.initIndicatorViews();var e=new or(_t.BASE,{id:yt.CANDLE,indicatorType:yt.CANDLE,isScaleCenter:!0});this._timeAxisWidget=new pr;var t=this.getIndicatorPanels(e);this.addPanels((0,c.__spread)([this._timeAxisWidget,e],t)),this.initPanelBound()},t.prototype.initIndicatorViews=function(){var e=this;(this.getAttr("indicators")||[]).forEach((function(t){var i=t.type,n=e.getIndicatorHelperByName(i);if(n){var r=n.defaultProps,o=Zi("div",{},"chart-title-row"),a=(0,c.__assign)((0,c.__assign)((0,c.__assign)((0,c.__assign)({params:{},styles:{}},t),{indicatorType:i}),r),{visible:!0,subElement:o});e.setIndicatorView(t.type,a)}}))},t.prototype.getIndicatorPanels=function(e){var t=[],i=e;return this.indicatorViews.forEach((function(e){if(!e.isHistBase){var n=new or(_t.EXT,e),r=new ur(i,n);t.push(r,n),i=n}})),t},t.prototype.updateContainerSize=function(){var e=this,t=this.getCanvasCollection(),i=this.getConfig(),n=i.width,r=i.height;this.setAttrs({width:n,height:r});var o={width:n+"px",height:r+"px"};t.forEach((function(t){t.width=n*e.devicePixelRatio,t.height=r*e.devicePixelRatio,Ki(t,o)}))},t.prototype.shiftTimeLine=function(e){var t=this.getXAxis();if(0!==e&&t){var i=e/t.unitWidth*t.getUnitTimeValue();this.shiftTimeLineByTime(i)}},t.prototype.shiftTimeLineByTime=function(e){var t=this.getXAxis(),i=(0,c.__read)(this.getTimeExtent(),2),n=i[0],r=i[1],o=t.getDomainInterval(),a=6*t.getUnitTimeValue(),s=t.domainRange.getMinValue(),l=t.getEasedSliceTime(s,e+o).time;r<t.getEasedSliceTime(s,e).time+a&&e>0||n+a>l&&e<0||(t.shiftTime(e),this.updateTimeExtent(),this.endShiftTime(),this.update())},t.prototype.endShiftTime=function(){var e=(0,c.__read)(this.getTimeExtent(),2),t=e[0],i=e[1],n=this.getXAxis(),r=n.domainRange,o=(0,c.__read)([r.getMinValue(),r.getMaxValue()],2),a=o[0],s=o[1],l={minTime:t,maxTime:i,shiftedMinTime:Math.floor(a),shiftedMaxTime:Math.floor(s),interval:n.getDomainInterval()};this.fire("afterTimeShifted",l)},t.prototype.zoom=function(e,t){if(!(isNaN(e)||e<=0||isNaN(t))){var i=this.getAttr("xAxis").scaleRatio,n=Math.pow(2,t*i);this.zoomByCoeff(n,e)}},t.prototype.zoomIn=function(e){void 0===e&&(e=300),this.zoomAroundRight(e)},t.prototype.zoomOut=function(e){void 0===e&&(e=-300),this.zoomAroundRight(e)},t.prototype.zoomAroundRight=function(e){var t=this.getAttr("xAxis").scaleRatio,i=Math.pow(2.5,-e*t);this.zoomByCoeff(i),this.updateCurrentItem()},t.prototype.zoomByCoeff=function(e,t){var i=this._xAxis,n=i.getCurrentScaleCoeff();void 0!==t?i.scaleAroundTimestamp(t,e):i.scaleAroundRight(e);var r=this.getTimeExtent(),o=i.domainRange,a=6*i.getUnitTimeValue(),s=i.getDomainInterval();if(o.getMinValue()>r[1]){var l=i.getEasedSliceTime(r[1],.5*-s).time,c=i.getEasedSliceTime(r[1],.5*s).time;o.setMinValue(l).setMaxValue(c)}if(r[1]<o.getMinValue()+a){l=i.getEasedSliceTime(r[1],-a).time,c=i.getEasedSliceTime(r[1],s-a).time;o.setMinValue(l).setMaxValue(c)}if(o.getMaxValue()<r[0]){l=i.getEasedSliceTime(r[0],-s).time;o.setMinValue(l).setMaxValue(r[0])}zi(n-i.getCurrentScaleCoeff())||(this.updateTimeExtent(),this.endShiftTime(),this.update())},t.prototype.addOrUpdateLastData=function(e){var t,i=this.getSeriesData();if(0!==i.length){this._checkValid(e),this.formatItem(e),this.setAttr("lastUpdateItem",(0,c.__assign)({},e));var n=i[i.length-1],r=n.time;if(r<e.time){if(i.push(e),2===i.length)return void this.setAttr("seriesData",(0,c.__spread)(i));this.updateCacheResult(i.length-1);var o=this._xAxis.getUnitTimeValue();this._xAxis.domainRange.contain(r-.5*o)&&this._xAxis.shiftTime(o),this.updateTimeExtent()}else n.time===e.time&&(Object.assign(n,e),i.length>=2&&this.updateCacheResult(i.length-1),this.updateYExtend());this.update();var a=this.getAttr("currentItem");if(a&&a.time===this._maxTimestamp){var s=(u=i[i.length-2])?$i((a.close-u.close)/u.close):"",l=u?$i((e.high-e.low)/u.close):"";this.setAttr("currentItem",(0,c.__assign)((0,c.__assign)({},e),{change:s,amplitude:l}))}var h=null===(t=this._xAxis)||void 0===t?void 0:t.getUnitTimeValue();if(h&&Math.abs(e.time-r)>=2*h&&(this._xAxis.updateSliceTimeInterval(i),e.time>this._lastDataTime+h)){var u=i[i.length-2],d=e;this.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:u,nextItem:d}}})}this._maxTimestamp=e.time}},t.prototype.setTimeAxisCenter=function(e){var t=this.getXAxis(),i=t.getDomainInterval(),n=t.getEasedSliceTime(e,-i/2).time,r=t.getEasedSliceTime(e,i/2).time;t.domainRange.setMinValue(n).setMaxValue(r)},t.prototype.setRightTime=function(e){var t=this.getXAxis(),i=t.getDomainInterval(),n=t.getEasedSliceTime(e,-i).time;t.domainRange.setMinValue(n).setMaxValue(e)},t.prototype.executeActionByType=function(e){var t,i=this._editor.getActionByType(e);if(i)return this.clearSelectAnnotation(),this._editor.setNextAction(e),void i();var n=((t={})[Et.DefaultCursor]=this.setCursor.bind(this,{config:{show:!1,style:yi.DEFAULT},weight:100}),t[Et.CrossHairCursor]=this.setCursor.bind(this,{config:{show:!0,style:yi.CROSSHAIR},weight:100}),t[Et.ToggleVisible]=this.toggleAnnotationsVisible.bind(this),t[Et.Delete]=this._editor.deleteAllAnnotation.bind(this._editor),t[Et.KeepDrawing]=this._editor.keepDraw.bind(this._editor),t[Et.LockDraw]=this.setAnnotationLockStatus.bind(this),t)[e];n&&n()},t.prototype.updateTimeExtent=function(){this.setVisibleSeriesData(),this.updateYExtend()},t.prototype.updateYExtend=function(){this.eachPanels((function(e){e instanceof or&&e.updateYExtend()}))},t.prototype.closeIndicatorByName=function(e){var t,i,n=this.getIndicatorViewByName(e);if(n){var r=this.indicatorViews.find((function(e){return e.isHistBase}));if(this.deleteIndicatorViewByName(e),null===(t=n.subElement)||void 0===t||t.remove(),n.isHistBase)this._removeIndicatorFromBaseView(n.id,(null===r||void 0===r?void 0:r.id)===n.id);else{var o=this.getPanel((function(t){return t instanceof or&&t.getPanelId()===e}));o&&(this._removeIndicatorView(o),this.renderImmediate(vt.Resize))}null===(i=n.subElement)||void 0===i||i.remove(),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}},t.prototype.addIndicatorByName=function(e,t){var i=void 0===t?{}:t,n=i.styles,r=void 0===n?{}:n,o=i.visible,a=void 0===o||o,s=i.isTriggeredByClick,l=void 0!==s&&s,h=i.params,u=void 0===h?{}:h,d=this.getIndicatorHelperByName(e);if(d&&!this._indicatorViews.has(e)&&d.getResult){var g=d.defaultProps;if(!(this.getSelectIndicators().filter((function(e){return e.isMain===g.isHistBase})).length>=5)){var p=Zi("div",{},"chart-title-row"),f=(0,c.__assign)((0,c.__assign)({indicatorType:e,id:e,params:this.getIndicatorParams(e)||u,styles:r},g),{visible:a,subElement:p,isTriggeredByClick:l});this.setIndicatorView(e,f),f.isHistBase?this._addIndicatorFromBaseView():this._addIndicatorView(f),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}}},t.prototype.setIndicatorVisibleByName=function(e,t){if(this._indicatorViews.has(e))for(var i=this.getIPanels(),n=0;n<i.length;n++){var r=i[n];if(r.hasIndicator(e))return void r.setIndicatorVisible(e,t)}},t.prototype.showIndicatorsDialog=function(){this.fire("showParamsSettingPanel",{id:""})},t.prototype.resetChart=function(){this.clearData(),this.editor.clear()},t.prototype.clearData=function(){this.clearPanel(),this.setIsLoaded(!1),this.setAttr("lastUpdateItem",null)},t.prototype.setSymbolInfo=function(e,t){Ni(e)?this._regContetxt=(0,c.__assign)((0,c.__assign)({},this._regContetxt),e):t&&(this._regContetxt[e]=t)},t.prototype.removeVolIndicators=function(){var e=this,t=this.getAttr("indicatorHelper");_o.forEach((function(i){delete t[i],e.closeIndicatorByName(i)})),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.getAllIndicators=function(){for(var e=this.getAttr("indicatorHelper"),t=Object.keys(e),i=[],n={},r=0,o=t.length;r<o;r++){var a=this.getIndicatorHelperByName(t[r]);if(a){var s=a.defaultProps,l=s.id,c=void 0===l?"":l,h=s.title,u=s.isHistBase,d=s.isCustom;n[c]||(i.push({id:c,name:h,isMain:u,isCustom:!!d}),n[c]=1)}}return i},t.prototype.getSelectIndicators=function(){return this.indicatorViews.map((function(e){return{id:e.id,name:e.indicatorType,isMain:!!e.isHistBase}}))},t.prototype.hasIndicatorByName=function(e){return this._indicatorViews.has(e)},t.prototype.updateIndicatorParams=function(e){var t=this.getIndicatorViewByName(e);if(t){var i=(0,c.__assign)({},t);i.params=this.getIndicatorParams(e),this.setIndicatorView(e,i);var n=t.isHistBase,r=this.getPanel((function(t){return t instanceof or&&(n?t.panelType===_t.BASE:t.getPanelId()===e)}));r.updateParams(e,i.params,(function(){r.save(),r.update()}))}},t.prototype.registerCustomIndicator=function(e,t){void 0===t&&(t={});var i=this.getAttr("indicatorHelper");t.defaultProps.isDiffSource&&(t=la(t)),i[e]=t,this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.removeCustomIndicatorByName=function(e){var t=this.getAttr("indicatorHelper");this.hasIndicatorByName(e)&&this.closeIndicatorByName(e),delete t[e],this.fire("allIndicatorsChange",{data:this.getAllIndicators()})},t.prototype.registerCustomIndicatorCallback=function(e){var t=e.onAdd,i=e.onEdit,n=e.onRemove;t&&this.setAttr("onAddCustomIndicator",t),i&&this.setAttr("onEditCustomIndicator",i),n&&this.setAttr("onRemoveCustomIndicator",n)},t.prototype.getColorFromColorTable=function(e,t){var i=this.getSettingValues(e);return i||(this._colorTable[e]||t||e)},t.prototype.selectAnnotation=function(e){this.fire("selectAnnotation",{data:e})},t.prototype.getStoreData=function(){var e=[];return this.eachPanels((function(t){t instanceof or&&e.push((0,c.__assign)({type:t.getAttr("indicatorType")},t.getSavedData()))})),e},t.prototype.loadChart=function(e){var t,i,n,r;this._clearAllAnnotations();var o=this.getAttr("needToReloadIndicator");o&&this._clearAllIndicators();try{if(o)for(var a=0;a<e.length;a++)for(var s=e[a].indicators,l=void 0===s?[]:s,c=0;c<l.length;c++){var h=null===(t=l[c])||void 0===t?void 0:t.id,u=null===(i=l[c])||void 0===i?void 0:i.styles,d=null===(n=l[c])||void 0===n?void 0:n.visible,g=null===(r=l[c])||void 0===r?void 0:r.isTriggeredByClick;h&&this.addIndicatorByName(h,{styles:u,visible:d,isTriggeredByClick:g})}var p=this.filterPanels((function(e){return e instanceof or}));for(a=0;a<p.length;a++){var f=p[a];if(e[a]&&f)for(var m=e[a].annotations,v=void 0===m?[]:m,y=(c=0,v.length);c<y;c++)this.editor.transformJSONToAnnotation(v[c],f)}return Promise.resolve({})}catch(x){return console.error("basicKline loadChart occured error: "+x.message),Promise.reject({error:x.message})}},t.prototype.setAnnotationLockStatus=function(e){if(void 0===e){var t=this.getAttr("annotationLock");this.setAttr("annotationLock",!t)}else this.setAttr("annotationLock",e)},t.prototype.toggleAnnotationsVisible=function(){var e=this.getAttr("annotationVisible");this.setAttr("annotationVisible",!e),e&&this.editor.clearEvents(),this.update()},t.prototype.clearSelectAnnotation=function(){this.eachPanels((function(e){for(var t=e.getAnnotations(),i=0,n=t.length;i<n;i++)t[i].setAttr("isEdit",!1)}))},t.prototype.createOrderLine=function(e){return this._editor.transformJSONToAnnotation((0,c.__assign)({type:Et.OrderLine},e))},t.prototype.getShapeById=function(e){return this._editor.getShapeById(e)},t.prototype.deleteShapeById=function(e){this._editor.deleteAllOrderShape((function(t){return t.id===e}))},t.prototype.deleteAllOrderShape=function(){this._editor.deleteAllOrderShape()},t.prototype.updateCurrentItem=function(){var e=this.getPanel((function(e){return e instanceof or&&e.mainPane.getAttr("isMouseover")}));e&&e.mainPane.drawCrossHairByTime()},t.prototype.updateTitle=function(e){if(e){var t=this.getPanel((function(e){return e instanceof or&&e.panelType===_t.BASE})),i=this.getPanel((function(t){return t instanceof or&&t.getPanelId()===e}))||t;null===i||void 0===i||i.updateTitleLabel()}else this.getIPanels().forEach((function(e){e.updateTitleLabel()}))},t.prototype.goForward=function(){var e=this._xAxis.unitWidth;this.shiftTimeLine(-e);var t=this.getAttr("currentItem");if(t){var i=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time-i),this.updateCurrentItem()}},t.prototype.goNext=function(){var e=this._xAxis.unitWidth;this.shiftTimeLine(e);var t=this.getAttr("currentItem");if(t){var i=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time+i),this.updateCurrentItem()}},t.prototype._clearAllAnnotations=function(){this.eachPanels((function(e){for(var t=e.getAnnotations(),i=0,n=t.length;i<n;i++)t[i].isIndependent()||t[i].remove(!1)}))},t.prototype._clearAllIndicators=function(){var e=this;this._indicatorViews.forEach((function(t,i){e.closeIndicatorByName(i)}))},t.prototype._addIndicatorFromBaseView=function(){var e=this.getPanel((function(e){return e instanceof or&&e.panelType===_t.BASE}));e&&this.isLoaded()&&(e.updateChartData(0,(function(){e.setYAxis(),e.updateTitleLabel(),e.update(vt.Resize)})),e.save())},t.prototype._checkValid=function(e){for(var t=["time","open","high","low","close","volume","quantity"],i=0;i<t.length;i++)isNaN(parseFloat(e[t[i]]))&&this.fire("dispatchErrorData",{data:{type:"invalidData",payload:{data:e}}})},t.prototype._addIndicatorView=function(e){for(var t,i=this,n=this.panels.length-1;n>=0;n--){var r=this.panels[n];if(r instanceof or){t=r;break}}var o=new or(_t.EXT,e),a=new ur(t,o);this.addPanels([a,o]),o.save(),this.isLoaded()&&(this.updatePanelBound(),o.updateChartData(0,(function(){o.setYAxis(),o.updateTitleLabel(),i.renderImmediate(vt.Resize)})))},t.prototype._removeIndicatorFromBaseView=function(e,t){var i=this.getPanel((function(e){return e instanceof or&&e.panelType===_t.BASE})),n=this.indicatorViews.find((function(e){return e.isHistBase})),r=null===n||void 0===n?void 0:n.subElement;i&&(i.setYAxis(),t&&r&&i.addFoldIcon(r),i.removeIndicator(e),i.save(),i.update())},t.prototype._removeIndicatorView=function(e){for(var t,i,n=new Set([e]),r=this.filterPanels((function(e){return e instanceof ur})),o=0;o<r.length;o++){var a=r[o];a.nextPanel===e&&(t=a),a.frontPanel===e&&(i=a)}i?(n.add(i),t.nextPanel=i.nextPanel):n.add(t),e.save(),this.removePanels(n),this.updatePanelBound()},t.prototype.updateCacheResult=function(e){this.eachPanels((function(t){t instanceof or&&!t.isDiffPanel&&t.updateChartData(e,(function(){t.setYAxis(),t.updateTitleLabel(),t.update()}))}))},t.prototype.setVisibleViewHeight=function(){var e=this.getConfig(),t=e.margin,i=e.xAxis,n=e.height;this._visibleViewHeight=n-t.top-t.bottom-i.height},t.prototype.getYAxisWidth=function(e){for(var t=1,i=0,n=this.getAttr("candlestick").tickSize,r=0;r<e.length;r++){var o=e[r],a=[o.open,o.high,o.low,o.close].reduce((function(e,t){var i=e.strLen,r=e.precision,o=Bi(n)?t.toFixed(n):""+Ui(t),a=(""+o).split("."),s=a[1]?a[1].length:0;return r=Math.max(r,s),{strLen:i=Math.max(i,(""+o).length),precision:r}}),{strLen:1,precision:0});t=Math.max(t,a.strLen),i=Math.max(i,a.precision)}i=Bi(n)?Math.max(n,0):Math.max(i,0),this.setAttr("precision",i);var s="a".repeat(t+2);return Rn.measureTextWidth(s)},t.prototype.initialData=function(){var e=this.isLoaded(),t=this.getSeriesData();t.length<=0||(this.setYAxisWidth(t),this.setTimeAxis(),this.updateCacheResult(),this.initPanelYAxis(),this.setIsLoaded(!0),!e&&this.fire("chartReady"),this._isFirstRender=!1,this._lastDataTime=t[t.length-1].time)},t.prototype.setYAxisWidth=function(e){var t=this.getAttr("tick"),i=t.width,n=void 0===i?5:i,r=t.textMargin,o=void 0===r?5:r,a=this.getYAxisWidth(e)+n+o,s=this.getAttr("margin"),l=s.right;s.right=Math.max(30,a),this.setVisibleViewHeight();var c=this._isFirstRender?Lt.All:l!==a&&Lt.Width;c&&this.initPanelBound(c)},t.prototype.setThemeColorTable=function(e){this._colorTable=this.getColorTableByTheme(e)},t.prototype.initStates=function(){var e=this.getAttr("theme");this.setThemeColorTable(e)},t.prototype.initEvents=function(){var e=this;this.watch("candlestick",(function(t){var i=t.newVal,n=t.oldVal;ha()(i,n)||e.initialData()})),this.watch("seriesData",(function(){e.initialData()})),this.watch("nextData",(function(t){var i=t.newVal;(void 0===i?[]:i).forEach(e.addOrUpdateLastData.bind(e))})),this.watch("currentItem",rn((function(){e.updateTitle()}),0)),this.watch("theme",(function(t){var i=t.newVal;e.setThemeColorTable(i)}));var t=this.getHitCanvas();t&&Ai.forEach((function(i){Ao.on(t,i,e.eventHandler.bind(e,i),!0)}));var i=this.getAttr("container");i&&Ao.on(i,"mouseout",(function(t){var n=t.originEvent.target;i.contains(n)||e.setCurrentItemByTime(e._maxTimestamp)}));var n=this.getAttr("container");n&&function(e,t){var i=document.createElement("iframe");i.style.cssText="\n    position: absolute; left: 0; top: 0; width: 100%; height: 100%;\n        border: 0; margin: 0; display: block; z-index: -999;\n  ",e.appendChild(i);var n,r=e.offsetWidth,o=e.offsetHeight,a=1;function s(){var i=e.offsetWidth,n=e.offsetHeight,s=window.devicePixelRatio;r===i&&o===n&&a===s||(t&&t({width:i,height:n},{width:r,height:o}),r=i,o=n,a=s)}void 0!==window&&(a=window.devicePixelRatio,(n=window.matchMedia("(min-resolution: "+window.devicePixelRatio+"dppx) and (max-resolution: "+window.devicePixelRatio+"dppx)")).addListener((function e(){n&&n.removeListener(e),s(),(n=window.matchMedia("(min-resolution: "+window.devicePixelRatio+"dppx) and (max-resolution: "+window.devicePixelRatio+"dppx)")).addListener(e)}))),(i.contentWindow||i).onresize=rn(s,10)}(n,(function(){e.resize()}))},t.prototype.eventHandler=function(e,t){if(this._xAxis){var i={click:this.onclick,dblclick:this.ondblclick,mousedown:this.onmousedown,mousemove:this.onmousemove,wheel:this.onmousewheel,mouseup:this.onmouseup,mouseout:this.onmouseout,gesturestart:this.ongesturestart,gesturechange:this.ongesturechange,gestureend:this.ongestureend},n=t.originEvent;void 0!==t.clientX&&void 0!==t.clientY&&(t.point=function(e){var t=e.originEvent,i=t.offsetX,n=t.offsetY;if((void 0===i||void 0===n)&&e.target){var r=e.target.getBoundingClientRect(),o=r.left,a=void 0===o?0:o,s=r.top,l=void 0===s?0:s;return{x:e.clientX-a,y:e.clientY-l}}return{x:i,y:n}}((0,c.__assign)((0,c.__assign)({},t),{target:n.target}))),i[e]&&(t.isDealed=!1,i[e].call(this,t))}},t.prototype.onclick=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i instanceof Pn&&i.eachAnnotations(t),i.fire("click",e))};this.eachPanels(t)},t.prototype.ondblclick=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i instanceof Pn&&i.eachAnnotations(t),i.fire("dblclick",e))};this.eachPanels(t)},t.prototype.onmousedown=function(e){var t=function(i){var n=i.contain(e.point);n&&(i instanceof or&&i.eachWidgets(t),i instanceof Pn&&i.eachAnnotations(t),i.fire("mousedown",e)),i.setAttr("isMousedown",n)};this.eachPanels(t),this.fire("mousedown",e)},t.prototype.onmousemove=function(e){var t=!1,i=function(n){n instanceof or&&n.eachWidgets(i),n instanceof Pn&&n.eachAnnotations(i);var r=n.getAttr("isMouseover"),o=n.contain(e.point);o&&n.fire("mousemove",e),!t&&o?(t=n instanceof Pn||n instanceof or,!r&&n.fire("mouseover",e),n.setAttr("isMouseover",!0)):r&&(n.fire("mouseout",e),n.setAttr("isMouseover",!1))};this.eachPanels(i,!0),this.fire("mousemove",e)},t.prototype.onmouseup=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i instanceof Pn&&i.eachAnnotations(t),i.fire("mouseup",e))};this.eachPanels(t),this.fire("mouseup",e)},t.prototype.onmouseout=function(){var e=function(t){t instanceof or&&t.eachWidgets(e),t.getAttr("isMouseover")&&(t.fire("mouseout"),t.setAttr("isMouseover",!1))};this.eachPanels(e),this.setCurrentItemByTime(this._maxTimestamp)},t.prototype.onmousewheel=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i.fire("mousewheel",e))};this.eachPanels(t),this.fire("mousewheel",e)},t.prototype.ongesturestart=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i.fire("gesturestart",e))};this.eachPanels(t),this.fire("gesturestart",e)},t.prototype.ongesturechange=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i.fire("gesturechange",e))};this.eachPanels(t),this.fire("gesturechange",e)},t.prototype.ongestureend=function(e){var t=function(i){i.contain(e.point)&&(i instanceof or&&i.eachWidgets(t),i.fire("gestureend",e))};this.eachPanels(t),this.fire("gestureend",e)},t.prototype.formatItem=function(e){["time","open","high","low","close","volume","quantity"].forEach((function(t){e[t]=parseFloat(e[t])}))},t.defaultConfig=(0,c.__assign)((0,c.__assign)((0,c.__assign)({},Cn.defaultConfig),mr),{precision:2,margin:{left:0,top:0,right:30,bottom:0},tick:{width:5,textMargin:2},width:0,height:0,symbol:"",interval:"",indicators:[],lastUpdateItem:null,annotationVisible:!0,annotationLock:!1,onAddCustomIndicator:function(){return!1},onEditCustomIndicator:function(){return!1},onRemoveCustomIndicator:function(){return!1},needToReloadIndicator:!0,isHiddenBinanceLogo:!1}),t}(dr);var da=i("AixY"),ga=i("rMyp"),pa=i("Cizg"),fa=i("ZlMA"),ma=i("jfd3");function va(e,t){return(0,h.useMemo)(e,function(e){var t=(0,h.useRef)();return gi()(e,t.current)||(t.current=e),t.current}(t))}var ya=i("TGyH"),xa=i("cURa"),ba=i("Q1Tr"),_a=(0,h.forwardRef)((function(e,t){var i=(0,c.__rest)(e,[]);return u().createElement(_.Z,(0,c.__assign)({ref:t,as:"input",type:"range",tx:"forms",variant:"slider"},i,{__css:{display:"block",width:"100%",height:4,my:2,cursor:"pointer",appearance:"none",borderRadius:9999,color:"inherit",bg:"gray",":focus":{outline:"none",color:"primary"},"&::-webkit-slider-thumb":{appearance:"none",width:16,height:16,bg:"currentcolor",border:0,borderRadius:9999,variant:"forms.slider.thumb"}}}))}));_a.displayName="Slider";const Ca=_a;var wa=["rgb(0, 0, 0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)","rgb(255, 120, 116)","rgb(255, 156, 110)","rgb(255, 192, 105)","rgb(255, 245, 102)","rgb(149, 222, 100)","rgb(93, 219, 211)","rgb(105, 192, 255)","rgb(133, 165, 255)","rgb(179, 127, 234)","rgb(255, 133, 192)","rgb(255, 77, 79)","rgb(255, 122, 68)","rgb(255, 169, 64)","rgb(255, 236, 60)","rgb(116, 209, 60)","rgb(54, 207, 201)","rgb(63, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 170)","rgb(245, 33, 45)","rgb(249, 84, 28)","rgb(250, 140, 21)","rgb(250, 219, 21)","rgb(82, 196, 27)","rgb(18, 194, 193)","rgb(25, 144, 255)","rgb(28, 57, 195)","rgb(114, 46, 209)","rgb(235, 46, 149)","rgb(207, 20, 35)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 7)","rgb(55, 158, 15)","rgb(10, 151, 155)","rgb(7, 109, 217)","rgb(23, 50, 177)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(168, 7, 25)","rgb(173, 33, 1)","rgb(173, 78, 1)","rgb(173, 139, 1)","rgb(35, 120, 5)","rgb(0, 109, 116)","rgb(0, 80, 179)","rgb(16, 35, 158)","rgb(57, 16, 133)","rgb(158, 17, 104)"],Aa=200,La=120,Ea=function(e){var t=e.r,i=void 0===t?0:t,n=e.g,r=void 0===n?0:n,o=e.b,a=void 0===o?0:o,s=e.a,l=void 0===s?1:s,g=e.onChange;return(0,h.useMemo)((function(){return u().createElement(u().Fragment,null,u().createElement(d.Z,{width:Aa,flexWrap:"wrap"},wa.map((function(e){return u().createElement(d.Z,{variant:"rgb("+i+", "+r+", "+a+")"===e?"colorPicker.selectItem":"",key:e,width:16,height:16,bg:e,m:"2px",sx:{position:"relative",borderRadius:"2px",cursor:"pointer","&:hover":{transform:"scale(1.1)"},"&::after":{borderColor:gn(dn(e))}},onClick:function(){return g((0,c.__assign)((0,c.__assign)({},cn(e)),{a:l}))}})}))),u().createElement(Ca,{max:100,value:100*l,height:10,onChange:function(e){return g({r:i,g:r,b:a,a:+(.01*Math.round(e.target.value)).toFixed(2)})},sx:{background:"linear-gradient(to right, rgba("+i+", "+r+", "+a+", 0) 0%, rgb("+i+", "+r+", "+a+") 100%)"}}))}),[i,r,a,l,g])},Va=function(e){var t=e.r,i=void 0===t?0:t,n=e.g,r=void 0===n?0:n,o=e.b,a=void 0===o?0:o,s=e.a,l=void 0===s?1:s,g=e.onChange,p=(0,h.useRef)(),f=(0,h.useRef)(),m=(0,c.__read)((0,h.useState)({h:0,s:0,v:0}),2),v=m[0],y=v.h,x=v.s,b=v.v,C=m[1];(0,h.useEffect)((function(){var e=function(e,t,i){var n=0,r=Math.max(e,t,i),o=r-Math.min(e,t,i);return n=0===o?0:e===r?(t-i)/o%6:t===r?(i-e)/o+2:(e-t)/o+4,(n=Math.floor(60*n))<0&&(n+=360),{h:n,s:Math.round(100*(0===r?0:o/r)),v:Math.round(r/255*100)}}(i,r,a);C(e)}),[i,r,a,l]);var w=(0,h.useCallback)((function(e,t){var i=t.h,n=t.a,r=e.clientX,o=e.clientY,a=p.current.getBoundingClientRect(),s=r-a.x,l=o-a.y;g((0,c.__assign)((0,c.__assign)({},hn(i,Math.round(s/Aa*100),Math.round(100*(1-l/La)))),{a:n}))}),[g]),A=(0,h.useCallback)((function(e,t){var i=t.h,n=t.a,r=p.current,o=f.current,a=r.getBoundingClientRect(),s=a.x,l=a.y,h=o.getBoundingClientRect(),u=h.x,d=h.y,m=e.clientX,v=e.clientY,y=function(e){var t=e.clientX,r=e.clientY,o=Math.max(0,Math.round(u-s+t-m)),a=Math.max(0,Math.round(d-l+r-v));o=Math.min(o,Aa),a=Math.min(a,La),g((0,c.__assign)((0,c.__assign)({},hn(i,Math.round(o/Aa*100),Math.round(100*(1-a/La)))),{a:n}))},x=function(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x)};return document.addEventListener("mousemove",y),document.addEventListener("mouseup",x),function(){document.removeEventListener("mousemove",y),document.removeEventListener("mousemove",x)}}),[g]);return(0,h.useMemo)((function(){return u().createElement(u().Fragment,null,u().createElement(d.Z,{width:Aa,flexWrap:"wrap",sx:{bg:"hsl("+y+", 100%, 50%)"}},u().createElement(d.Z,{width:1,height:120,sx:{background:"linear-gradient(to right, #fff, rgba(255,255,255,0))"},onClick:function(e){return w(e,{h:y,a:l})}},u().createElement(_.Z,{ref:p,width:1,height:La,sx:{background:"linear-gradient(to top, #000, rgba(0,0,0,0))"}},u().createElement(_.Z,{ref:f,width:4,height:4,sx:{position:"absolute",borderRadius:"50%",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 1.5px,\n                    rgba(0, 0, 0, 0.3) 0px 0px 1px 1px inset,\n                    rgba(0, 0, 0, 0.4) 0px 0px 1px 2px",transform:"translate("+Math.min(x/100*Aa,199)+"px, "+Math.min((1-b/100)*La,119)+"px)"},onMouseDown:function(e){return A(e,{h:y,a:l})}})))),u().createElement(Ca,{max:360,value:y,height:10,onChange:function(e){return g((0,c.__assign)((0,c.__assign)({},hn(Math.round(e.target.value),x,b)),{a:l}))},sx:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}),u().createElement(Ca,{max:100,value:100*l,height:10,onChange:function(e){return g((0,c.__assign)((0,c.__assign)({},hn(y,x,b)),{a:+(.01*Math.round(e.target.value)).toFixed(2)}))},sx:{mt:0,background:"linear-gradient(to right, "+un(y,x,b,0)+" 0%, "+un(y,x,b,1)+" 100%)",borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}))}),[y,x,b,l,g])};const Sa=function(e){var t=e.color,i=void 0===t?"":t,n=e.onChange,r=void 0===n?function(e){return!1}:n,o=(0,c.__read)((0,h.useState)(),2),a=o[0],s=o[1],l=(0,c.__read)((0,h.useState)(!1),2),g=l[0],p=l[1];(0,h.useEffect)((function(){var e=cn(i),t=e.r,n=e.g,r=e.b,o=e.a;s({r:t,g:n,b:r,a:o})}),[i]);var f=(0,h.useCallback)((function(e){var t=e.r,i=e.g,n=e.b,o=e.a;r("rgba("+t+", "+i+", "+n+", "+o+")")}),[r]);return(0,h.useMemo)((function(){return u().createElement(d.Z,{p:"minor",bg:"kline.annotationToolBg",flexDirection:"column",onClick:function(e){return e.stopPropagation()},sx:{boxShadow:"rgba(0, 0, 0, 0.2) 0px 0px 4px"}},u().createElement(d.Z,{flexWrap:"wrap",flexDirection:"column"},g?u().createElement(Va,(0,c.__assign)({},a,{onChange:f})):u().createElement(Ea,(0,c.__assign)({},a,{onChange:f}))),u().createElement(L.Z,{px:"xs",bg:"kline.annotationToolActiveBg",color:"kline.annotationToolLineActiveColor",sx:{borderRadius:"2px",backgroundImage:"none","&:active:not(:disabled):not(.inactive)":{backgroundColor:"kline.annotationToolActiveBg"},"&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"}},onClick:function(){return p(!g)}},g?"Default":"Custom"))}),[a,g,f])};var Ma=function(e){var t=e.title,i=void 0===t?"":t;return u().createElement(y.Z,{fontSize:"md",lineHeight:"24px",color:"t.primary"},i)},Da=function(e){var t=e.children;return u().createElement(y.Z,{fontSize:"sm",lineHeight:"20px",color:"t.third"},t)},Ta=function(e){var t=e.children,i=(0,c.__rest)(e,["children"]);return u().createElement(d.Z,(0,c.__assign)({mt:"20px",alignItems:"center"},i),t)},ka=function(e){var t=e.label,i=void 0===t?"":t,n=e.currentValue,r=e.change,o=e.itemKey,a=(0,c.__rest)(e,["label","currentValue","change","itemKey"]),s=(0,h.useCallback)((function(e){r(o,!!e.currentTarget.checked,!1)}),[o,r]);return u().createElement(b.Z,(0,c.__assign)({width:"fit-content"},a),u().createElement(da.Z,{checked:n,onChange:s}),u().createElement(y.Z,{width:"fit-content",variant:"formLabel"},i))},Ia=function(e){var t=e.value,i=e.itemKey,n=e.change,r=(0,c.__rest)(e,["value","itemKey","change"]),o=(0,c.__read)((0,h.useState)(1),2),a=o[0],s=o[1],l=(0,h.useCallback)((function(e){isNaN(e.target.value)?s((function(e){return-1*e})):n(i,e.target.value,!0)}),[i,n]);return u().createElement(ya.Z,(0,c.__assign)({key:a,variant:"filled",width:"100px",bg:"search.bg",boxProps:{height:"30px",ml:"xs"},defaultValue:t,onBlur:l},r))},Wa=["high","low","open","close"],Pa=function(e){var t=e.itemKey,i=e.currentValue,n=e.change,r=(0,c.__rest)(e,["itemKey","currentValue","change"]);return u().createElement(xa.Z,(0,c.__assign)({hideSearch:!0,defaultValue:i,size:"sm",width:"100px",lineHeight:"18px",renderValue:function(e){return e.replace(/^\S/,(function(e){return e.toUpperCase()}))},onValueChange:function(e){return n(t,e,!0)}},r,{sx:{"& .bn-input-sm":{bg:"search.bg"},"& .bn-sdd-list":{p:0,overflow:"auto",borderRadius:"4px"}}}),Wa.map((function(e){return u().createElement(ba.W,{key:e,value:e,sx:{bg:"search.bg",textTransform:"capitalize","&:hover":{bg:"search.hoverBg"}}},e)})))},Ha=["0.5","1","2","3"],Ra=function(e){var t=e.itemKey,i=e.currentValue,n=void 0===i?"1":i,r=e.change,o=(0,c.__rest)(e,["itemKey","currentValue","change"]);return u().createElement(xa.Z,(0,c.__assign)({hideSearch:!0,defaultValue:n,size:"sm",width:"100px",lineHeight:"18px",onValueChange:function(e){return r(t,e,!1)},renderValue:function(e){return u().createElement(_.Z,{height:e+"px",width:1,bg:"t.third"})},sx:{"& .bn-input-sm":{bg:"search.bg"},"& .bn-sdd-list":{p:0,overflow:"auto",borderRadius:"4px"}}},o),Ha.map((function(e){return u().createElement(ba.W,{key:e,value:e,display:"flex",flexDirection:"column",justifyContent:"center",sx:{height:"32px",bg:"search.bg","&:hover":{bg:"search.hoverBg"," .line_box":{bg:"t.primary"}}}},u().createElement(_.Z,{className:"line_box",bg:"t.third",height:e+"px"}))})))},Ba=function(e){var t=e.currentValue,i=e.itemKey,n=e.change,r=(0,c.__rest)(e,["currentValue","itemKey","change"]),o=(0,h.useCallback)((function(e){n(i,e,!1)}),[i,n]);return u().createElement(T.ZP,(0,c.__assign)({trigger:"click",placement:"bottom",height:"100%",overlay:u().createElement(Sa,{color:t,onChange:o}),overlayProps:{mt:"minor"},sx:{cursor:"pointer"},enablePortal:!0},r),u().createElement(_.Z,{sx:{width:"32px",height:"32px",borderRadius:"4px",backgroundImage:"url("+Xn('<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="30" height="30" rx="4" fill="#23282D"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H6V6H0V0ZM12 6H6V12H0V18H6V24H0V30H6V24H12V30H18V24H24V30H30V24H24V18H30V12H24V6H30V0H24V6H18V0H12V6ZM12 12V6H18V12H12ZM12 18V24H18V18H24V12H18V18H12ZM12 18H6V12H12V18Z" fill="#474D57"/>\n</svg>\n')+")"}},u().createElement(_.Z,{height:"100%",bg:t,sx:{borderRadius:"4px"}})))},Na=function(e){var t=e.isActive,i=e.boxStyle,n=void 0===i?{}:i,r=e.children,o=(0,c.__rest)(e,["isActive","boxStyle","children"]);return u().createElement(d.Z,(0,c.__assign)({sx:(0,c.__assign)((0,c.__assign)({"&:hover":{color:"kline.annotationToolActiveTextColor"},color:"t.primary",cursor:"pointer"},t?{color:"kline.annotationToolActiveTextColor"}:{}),n)},o),r)},Oa=u().createContext({id:"",key:1,title:"",onClose:function(){return!1},onReset:function(e){return!1}}),Za=u().createContext({getI18n:function(e,t){return t},selectIndicator:function(){return!1},handleIndicator:function(){return!1}}),Fa=function(e){var t=e.children,i=(0,h.useContext)(Oa),n=i.id,r=i.title,o=i.onClose,a=i.onReset,s=i.key,l=(0,h.useContext)(Za).getI18n;return u().createElement(d.Z,{p:"md",flex:1,flexDirection:"column",height:"calc(100% - 84px)",key:s,sx:{overflowY:"auto"}},u().createElement(Ma,{title:r}),t,u().createElement(Ta,{justifyContent:"flex-end",sx:{position:"absolute",right:"md",bottom:"md"}},u().createElement(L.Z,{sz:"normal",width:128,variant:"default",colorStyle:"secondary",onClick:function(){return a(n)}},l("indicator-btn-reset","Reset")),u().createElement(L.Z,{sz:"normal",width:128,variant:"default",ml:10,onClick:o},l("indicator-btn-save","Save"))))},Ka=function(e){var t=e.label,i=e.settingManager,n=e.hotUpdate,r=e.updateValue,o=va((function(){return i.getMADescriptions(t)}),[t,i,n]);return u().createElement(Fa,null,o.map((function(e){var t=e.label,i=e.periodsKey,n=e.sourcesKey,o=e.lineWidthsKey,a=e.colorsKey,s=e.visiblesKey,l=e.period,c=e.source,h=e.lineWidth,d=e.color,g=e.visible;return u().createElement(Ta,{key:i},u().createElement(ka,{label:t,itemKey:s,change:r,currentValue:g}),u().createElement(Ia,{value:l,itemKey:i,change:r}),u().createElement(Pa,{currentValue:c,itemKey:n,change:r,ml:"10px"}),u().createElement(Ra,{currentValue:h,itemKey:o,change:r,ml:"10px"}),u().createElement(Ba,{currentValue:d,itemKey:a,change:r,ml:"10px"}))})))},za=function(e){var t=e.settingManager,i=e.hotUpdate,n=e.updateValue,r=(0,h.useMemo)((function(){return t.getMACDDescriptions()}),[t,i]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.fastLabel),u().createElement(Ia,{value:r.fastLength,itemKey:r.fastKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.slowLabel),u().createElement(Ia,{value:r.slowLength,itemKey:r.slowKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.signalLabel),u().createElement(Ia,{value:r.signalLength,itemKey:r.signalKey,change:n})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.deaLabel,itemKey:r.deaVisibleKey,change:n,currentValue:r.deaVisible}),u().createElement(Ra,{currentValue:r.deaLineWidth,itemKey:r.deaLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.deaColor,itemKey:r.deaColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.difLabel,itemKey:r.difVisibleKey,change:n,currentValue:r.difVisible}),u().createElement(Ra,{currentValue:r.difLineWidth,itemKey:r.difLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.difColor,itemKey:r.difColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{label:r.macdLabel,itemKey:r.macdVisibleKey,change:n,currentValue:r.macdVisible})))},Ua=function(e){var t=e.settingManager,i=e.hotUpdate,n=e.updateValue,r=(0,h.useMemo)((function(){return t.getVOLDescriptions()}),[t,i]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ba,{currentValue:r.maColor,itemKey:r.maColorKey,change:n,ml:"10px"})))},Ya=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getTRIXDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},Xa=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getStochRSIDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.rsiPeriodLabel),u().createElement(Ia,{value:r.rsiPeriod,itemKey:r.rsiPeriodKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.stochasticPeriodLabel),u().createElement(Ia,{value:r.stochasticPeriod,itemKey:r.stochasticPeriodKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.smoothKPeriodLabel),u().createElement(Ia,{value:r.smoothKPeriod,itemKey:r.smoothKPeriodKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.smoothDPeriodLabel),u().createElement(Ia,{value:r.smoothDPeriod,itemKey:r.smoothDPeriodKey,change:n})),u().createElement(Ta,null,u().createElement(ka,{label:r.smoothKLabel,itemKey:r.smoothKVisibleKey,change:n,currentValue:r.smoothKVisible,width:"40%"}),u().createElement(Ra,{currentValue:r.smoothKLineWidth,itemKey:r.smoothKLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.smoothKColor,itemKey:r.smoothKColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{label:r.smoothDLabel,itemKey:r.smoothDVisibleKey,change:n,currentValue:r.smoothDVisible,width:"40%"}),u().createElement(Ra,{currentValue:r.smoothDLineWidth,itemKey:r.smoothDLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.smoothDColor,itemKey:r.smoothDColorKey,change:n,ml:"10px"})))},Ga=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getWRDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},ja=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getMTMDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Pa,{currentValue:r.source,itemKey:r.sourceKey,change:n,ml:"10px"}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},qa=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getDMIDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n})),u().createElement(Ta,null,u().createElement(ka,{label:r.pDILabel,itemKey:r.pDIVisibleKey,change:n,currentValue:r.pDIVisible,width:"40%"}),u().createElement(Ra,{currentValue:r.pDILineWidth,itemKey:r.pDILineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.pDIColor,itemKey:r.pDIColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{label:r.nDILabel,itemKey:r.nDIVisibleKey,change:n,currentValue:r.nDIVisible,width:"40%"}),u().createElement(Ra,{currentValue:r.nDILineWidth,itemKey:r.nDILineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.nDIColor,itemKey:r.nDIColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{label:r.dxLabel,itemKey:r.dxVisibleKey,change:n,currentValue:r.dxVisible,width:"40%"}),u().createElement(Ra,{currentValue:r.dxLineWidth,itemKey:r.dxLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.dxColor,itemKey:r.dxColorKey,change:n,ml:"10px"})))},Ja=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getEMVDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.divisorLabel),u().createElement(Ia,{value:r.divisor,itemKey:r.divisorKey,change:n})))},Qa=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getSARDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.startLabel),u().createElement(Ia,{value:r.start,itemKey:r.startKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.maxLabel),u().createElement(Ia,{value:r.max,itemKey:r.maxKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.colorLabel),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},$a=function(e){var t=e.settingManager,i=e.hotUpdate,n=e.updateValue,r=va((function(){return t.getRSIDescriptions()}),[t,i]);return u().createElement(Fa,null,r.map((function(e){var t=e.label,i=e.periodsKey,r=e.lineWidthsKey,o=e.colorsKey,a=e.visiblesKey,s=e.period,l=e.lineWidth,c=e.color,h=e.visible;return u().createElement(Ta,{key:i},u().createElement(ka,{width:"40%",label:t,itemKey:a,change:n,currentValue:h}),u().createElement(Ia,{value:s,itemKey:i,change:n}),u().createElement(Ra,{currentValue:l,itemKey:r,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:c,itemKey:o,change:n,ml:"10px"}))})))},es=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getCCIDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},ts=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getKDJDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.ma1Label),u().createElement(Ia,{value:r.ma1,itemKey:r.ma1Key,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.ma2Label),u().createElement(Ia,{value:r.ma2,itemKey:r.ma2Key,change:n})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.kLabel,itemKey:r.kVisibleKey,change:n,currentValue:r.kVisible}),u().createElement(Ra,{currentValue:r.kLineWidth,itemKey:r.kLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.kColor,itemKey:r.kColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.dLabel,itemKey:r.dVisibleKey,change:n,currentValue:r.dVisible}),u().createElement(Ra,{currentValue:r.dLineWidth,itemKey:r.dLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.dColor,itemKey:r.dColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.jLabel,itemKey:r.jVisibleKey,change:n,currentValue:r.jVisible}),u().createElement(Ra,{currentValue:r.jLineWidth,itemKey:r.jLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.jColor,itemKey:r.jColorKey,change:n,ml:"10px"})))},is=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getOBVDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.label),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},ns=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getBOLLDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.stdDevLabel),u().createElement(Ia,{value:r.stdDev,itemKey:r.stdDevKey,change:n})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.upLabel,itemKey:r.upVisibleKey,change:n,currentValue:r.upVisible}),u().createElement(Ra,{currentValue:r.upLineWidth,itemKey:r.upLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.upColor,itemKey:r.upColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.mbLabel,itemKey:r.mbVisibleKey,change:n,currentValue:r.mbVisible}),u().createElement(Ra,{currentValue:r.mbLineWidth,itemKey:r.mbLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.mbColor,itemKey:r.mbColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(ka,{width:"40%",label:r.dnLabel,itemKey:r.dnVisibleKey,change:n,currentValue:r.dnVisible}),u().createElement(Ra,{currentValue:r.dnLineWidth,itemKey:r.dnLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.dnColor,itemKey:r.dnColorKey,change:n,ml:"10px"})))},rs=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getVWAPDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.periodLabel),u().createElement(Ia,{value:r.period,itemKey:r.periodKey,change:n}),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},os=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getAVLDescriptions()}),[i,t]);return u().createElement(Fa,null,u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.label),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},as=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getOIUMDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-OI-description","Open Interest, Notional Value of Open Interest"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.oiLabel),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.nvLabel),u().createElement(Ra,{currentValue:r.nvLineWidth,itemKey:r.nvLineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.nvColor,itemKey:r.nvColorKey,change:n,ml:"10px"})))},ss=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getOICMDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-OI-description","Open Interest, Notional Value of Open Interest"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.oiLabel),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},ls=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getLSAccoDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-LSAcco-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n          highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n          Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n          (Positions) = Long Position % / Short Position %"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.label),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},cs=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getLSPositDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-LSPosit-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n          highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n          Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n          (Positions) = Long Position % / Short Position %"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.label),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},hs=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getLSRatioDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-LSRatio-description","The proportion of net long and net short accounts to total accounts with positions. Each account is counted\n          once only. Long Account % =Accounts with net long positions / Total Accounts with positions Short Account %\n          =Accounts with net short positions / Total Accounts with positions Long/Short Ratio = Long Account % / Short\n          Account %"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.label),u().createElement(Ra,{currentValue:r.lineWidth,itemKey:r.lineWidthKey,change:n,ml:"10px"}),u().createElement(Ba,{currentValue:r.color,itemKey:r.colorKey,change:n,ml:"10px"})))},us=function(){var e=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,e("indicator-BSVol-description","Taker Buy Volume: the total volume of buy orders filled by takers within the period. Taker Sell Volume: the\n        total volume of sell orders filled by takers within the period."))))},ds=function(e){var t=e.hotUpdate,i=e.settingManager,n=e.updateValue,r=(0,h.useMemo)((function(){return i.getBasisDescriptions()}),[i,t]),o=(0,h.useContext)(Za).getI18n;return u().createElement(Fa,null,u().createElement(Ta,{mt:"minor"},u().createElement(Da,null,o("indicator-Basis-description","The difference between the futures price and the price index at a given time. Basis = Futures Price - Price\n          Index Basis Rate = ( Futures Price - Price Index ) / Price Index"))),u().createElement(Ta,{mt:"xp"},u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.basisLabel),u().createElement(Ba,{currentValue:r.basisColor,itemKey:r.basisColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.futurePriceLabel),u().createElement(Ba,{currentValue:r.futurePriceColor,itemKey:r.futurePriceColorKey,change:n,ml:"10px"})),u().createElement(Ta,null,u().createElement(y.Z,{variant:"formLabel",width:"40%"},r.priceIndexLabel),u().createElement(Ba,{currentValue:r.priceIndexColor,itemKey:r.priceIndexColorKey,change:n,ml:"10px"})))};const gs=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none"},e),u().createElement("g",{clipPath:"url(#page-blank-b96_svg__clip0)"},u().createElement("path",{d:"M18 88h-2.5v-2.53H18V88zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5V74.4H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5V8H18v2.55zM18 2.5h-2.5V5H18V2.5zM63.08 5h-2.57V2.5h2.57V5zm5.6 0h-2.56V2.5h2.56V5zM57.44 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.64 0h-2.56V2.5h2.56V5zm-5.63 0H38V2.5h2.56L40.54 5zM34.9 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.63 0h-2.57V2.5h2.57V5zM76.32 12.44l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zm-4-4l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zM68.65 14.36h-2.5v2.5h2.5v-2.5zM68.65 8.84h-2.5v2.5h2.5v-2.5zM74.36 14.36h-2.5v2.5h2.5v-2.5z",fill:"currentColor"}),u().createElement("path",{d:"M65.46 94.5c8.864 0 16.05-7.186 16.05-16.05S74.324 62.4 65.46 62.4s-16.05 7.186-16.05 16.05S56.596 94.5 65.46 94.5z",fill:"url(#page-blank-b96_svg__paint0_linear)"}),u().createElement("path",{d:"M78 63.78v-2.51h2.5v2.5l-2.5.01zM78 58.58v-2.52h2.5v2.5l-2.5.02zm0-5.22v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.22V30h2.5v2.5l-2.5.01zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zM78 16.87v-2.51h2.5v2.5l-2.5.01zM50.46 93.5h-2.51V91h2.5l.01 2.5zM45.06 93.5h-2.52V91H45l.06 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0H20.9V91h2.5l.02 2.5zM18.01 93.5H15.5V91H18l.01 2.5zM66.71 85.5h-2.5V88h2.5v-2.5zM66.71 69h-2.5v14.1h2.5V69z",fill:"currentColor"})),u().createElement("defs",null,u().createElement("linearGradient",{id:"page-blank-b96_svg__paint0_linear",x1:54.111,y1:89.799,x2:76.809,y2:67.1,gradientUnits:"userSpaceOnUse"},u().createElement("stop",{stopColor:"#F0B90B"}),u().createElement("stop",{offset:.28,stopColor:"#F1BC0F"}),u().createElement("stop",{offset:.569,stopColor:"#F4C41C"}),u().createElement("stop",{offset:.862,stopColor:"#F8D230"}),u().createElement("stop",{offset:.993,stopColor:"#FBDA3C"})),u().createElement("clipPath",{id:"page-blank-b96_svg__clip0"},u().createElement("path",{fill:"#fff",d:"M0 0h96v96H0z"}))))};const ps=function(e){return u().createElement(oe.Z,(0,c.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),u().createElement("path",{d:"M15.4 3l-10 10v4.6H10l10-10L15.4 3zM9.2 15.6H7.4v-1.7l8.1-8.1 1.8 1.8-8.1 8zM16.9 4.4L15.4 3l1.5 1.4zM21 18.9H3v2h18v-2z",fill:"currentColor"}))};var fs=[{id:"@MA",label:"MA",title:"MA - Moving Average",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ka,(0,c.__assign)({},t))}},{id:"@EMA",label:"EMA",title:"EMA - Exponential Moving Average",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ka,(0,c.__assign)({},t))}},{id:"@WMA",label:"WMA",title:"WMA - Weighted Moving Average",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ka,(0,c.__assign)({},t))}},{id:"@BOLL",label:"BOLL",title:"BOLL - Bollinger Bands",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ns,(0,c.__assign)({},t))}},{id:"@VWAP",label:"VWAP",title:"VWAP - Volume Weighted Average Price",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(rs,(0,c.__assign)({},t))}},{id:"@AVL",label:"AVL",title:"AVL - Average Value Line",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(os,(0,c.__assign)({},t))}},{id:"@TRIX",label:"TRIX",title:"TRIX - Triple Exponentially Smoothed Average",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ya,(0,c.__assign)({},t))}},{id:"@SAR",label:"SAR",title:"SAR - Stop and Reverse",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Qa,(0,c.__assign)({},t))}}],ms=[{id:"@VOL",label:"VOL",title:"Vol - Volume",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ua,(0,c.__assign)({},t))}},{id:"@MACD",label:"MACD",title:"Moving Average Convergence Divergence",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(za,(0,c.__assign)({},t))}},{id:"@RSI",label:"RSI",title:"RSI - Relative Strength Index",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement($a,(0,c.__assign)({},t))}},{id:"@KDJ",label:"KDJ",title:"KDJ - Stochastic Indicator",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ts,(0,c.__assign)({},t))}},{id:"@OBV",label:"OBV",title:"OBV - On Balance Volume",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(is,(0,c.__assign)({},t))}},{id:"@CCI",label:"CCI",title:"CCI - Commodity Channel Index",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(es,(0,c.__assign)({},t))}},{id:"@Stoch RSI",label:"StochRSI",title:"StochRSI - Stochastic RSI",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Xa,(0,c.__assign)({},t))}},{id:"@Wm %R",label:"WR",title:"WR - Wm%R",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ga,(0,c.__assign)({},t))}},{id:"@DMI",label:"DMI",title:"DMI - Directional  Movement Index",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(qa,(0,c.__assign)({},t))}},{id:"@MTM",label:"MTM",title:"MTM - Momentum Index",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ja,(0,c.__assign)({},t))}},{id:"@EMV",label:"EMV",title:"EMV - Ease of Movement Value",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(Ja,(0,c.__assign)({},t))}},{id:"@OI-UM",label:"O.I.",title:"O.I. - Open Interest",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(as,(0,c.__assign)({},t))}},{id:"@OI-CM",label:"O.I.",title:"O.I. - Open Interest",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ss,(0,c.__assign)({},t))}},{id:"@LS-Acco",label:"L.S Acco.",title:"L.S Acco. - Long/Short Account Ratio",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ls,(0,c.__assign)({},t))}},{id:"@LS-Posit",label:"L.s Posit.",title:"L.S Posit. - Long/Short Postion Ratio",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(cs,(0,c.__assign)({},t))}},{id:"@LS-Ratio",label:"L.S Ratio",title:"L.S Ratio - Long/Short Ratio",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(hs,(0,c.__assign)({},t))}},{id:"@BSVol",label:"B.S Vol.",title:"B.S Vol. - Buyer Seller Volume",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(us,(0,c.__assign)({},t))}},{id:"@Basis",label:"Basis",title:"Basis",component:function(e){var t=(0,c.__rest)(e,[]);return u().createElement(ds,(0,c.__assign)({},t))}}],vs=function(e){var t=e.isChecked,i=e.isActive,n=void 0!==i&&i,r=e.label,o=e.selectItem,a=e.isDisabled,s=void 0!==a&&a,l=(0,h.useCallback)((function(){o(!1)}),[o]),c=(0,h.useCallback)((function(){o(!0)}),[o]);return u().createElement(d.Z,{pl:"sm",justifyContent:"flex-start",fontSize:"sm",lineHeight:"20px",py:"10px",sx:{borderLeftWidth:"2px",borderLeftStyle:"solid",borderLeftColor:n?"primary":"transparent"}},u().createElement(b.Z,{width:"auto"},u().createElement(da.Z,{defaultChecked:t,onClick:c,disabled:s})),u().createElement(y.Z,{variant:"formLabel",onClick:l,sx:{color:n?"t.primary":"t.third",cursor:"pointer"}},r))},ys=u().memo((function(e){var t=e.mainIndicators,i=e.subIndicators,n=e.setActiveId,r=e.activeId,o=e.selectedIndicators,a=e.selectIndicator,s=(0,h.useContext)(Za).getI18n,l=(0,h.useCallback)((function(e){return o.includes(e)}),[o]),c=(0,h.useMemo)((function(){return{selectMainCount:t.filter((function(e){var t=e.id;return l(t)})).length,selectSubCount:i.filter((function(e){var t=e.id;return l(t)})).length}}),[t,i,l]),d=c.selectMainCount,g=c.selectSubCount,p=(0,h.useCallback)((function(e,t){var i=e.id,r=e.name,o=e.isCustom,s=e.isMain;void 0===t&&(t=!1),t&&a({id:i,name:r,isCustom:o,isMain:s}),n(i)}),[n,a]);return u().createElement(_.Z,{width:156,sx:{borderRightColor:"line",borderRightWidth:.5,borderRightStyle:"solid",overflowY:"auto"}},u().createElement(_.Z,null,u().createElement(y.Z,{color:"t.secondary",fontSize:"xs",pl:"sm",pt:"sm",lineHeight:"16px"},s("indicator-main-title","Main")," (",d,"/",5,")"),t.map((function(e){var t=e.id,i=e.label,n=e.isCutom,o=l(t);return u().createElement(vs,{key:t,label:i,isChecked:o,selectItem:p.bind(null,{id:t,name:i,isCutom:n,isMain:!0}),isActive:t===r,isDisabled:!o&&d>=5})}))),u().createElement(_.Z,null,u().createElement(y.Z,{color:"t.secondary",fontSize:"xs",pl:"sm",pt:"sm",lineHeight:"16px"},s("indicator-sub-title","Sub")," (",g,"/",5,")"),i.map((function(e){var t=e.id,i=e.label,n=e.isCutom,o=l(t);return u().createElement(vs,{key:t,label:i,isChecked:o,selectItem:p.bind(null,{id:t,name:i,isCutom:n,isMain:!1}),isActive:t===r,isDisabled:!o&&g>=5})}))))})),xs=function(e){var t=e.customInds,i=(0,h.useContext)(Za),n=i.getI18n,r=i.handleIndicator,o=i.selectIndicator;return 0===t.length?u().createElement(d.Z,{justifyContent:"center",alignItems:"center",width:"100%",height:"100%",flexDirection:"column"},u().createElement(gs,{color:"t.third",size:60}),u().createElement(y.Z,{id:"electron_add_now_empty",color:"kline.annotationToolActiveTextColor",sx:{mt:"md",cursor:"pointer",textDecoration:"underline"},onClick:function(){return r(Mt.ADD)}},n("indicator-add","Add"))):u().createElement(u().Fragment,null,u().createElement(d.Z,{color:"t.third",fontSize:12,pt:"sm",px:"sm",width:1,justifyContent:"space-between"},u().createElement(y.Z,null,n("indicator-custom-title","Customized Indicator")),u().createElement(y.Z,{id:"electron_add_now_non_empty",color:"kline.annotationToolActiveTextColor",sx:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return r(Mt.ADD)}},n("indicator-add","Add"))),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs",flexDirection:"column"},t.map((function(e){var t=e.id,i=e.name,n=e.isActive,a=e.isMain;return u().createElement(Na,{isActive:n,width:1,height:24,py:"minor",key:t,boxStyle:{px:"sm",cursor:"pointer",justifyContent:"space-between",alignItems:"center",lineHeight:"12px","&:hover":{bg:"kline.drawDropDownActiveBg"},"&:hover .icon-wrap":{display:"block"}}},u().createElement(_.Z,{px:"minor",fontSize:0,sx:{width:"calc(100% - 52px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},onClick:o.bind(null,{id:t,name:i,isCustom:!0,isMain:a})},i),u().createElement(_.Z,{width:52,className:"icon-wrap",display:"none",color:"kline.annotationToolLineColor",pr:"minor"},u().createElement(ps,{mx:"xs",size:16,sx:{"&:hover":{color:"kline.annotationToolLineActiveColor"}},onClick:function(){return r(Mt.EDIT,{id:t,name:i})}}),u().createElement(pa.Z,{size:16,sx:{"&:hover":{color:"kline.annotationToolLineActiveColor"}},onClick:function(){return r(Mt.REMOVE,t)}})))}))))},bs=function(e){var t=e.activeIndicatorId,i=e.settingManager,n=e.selectedIndicators,r=e.allIndicators,o=e.selectIndicator,a=e.updateIndicator,s=e.onClose,l=e.isShowCustom,g=(0,c.__read)((0,h.useState)(t),2),p=g[0],f=g[1],m=(0,c.__read)((0,h.useState)(!1),2),v=m[0],y=m[1],x=(0,c.__read)((0,h.useState)(1),2),b=x[0],_=x[1],C=(0,h.useCallback)((function(e){return n.includes(e)}),[n]),w=(0,h.useMemo)((function(){var e=r.map((function(e){return e.id})),t=new Set(e);return{filterInds:(0,c.__spread)(fs,ms).filter((function(e){var i=e.id;return t.has(i)})),mainInds:fs.filter((function(e){var i=e.id;return t.has(i)})),subInds:ms.filter((function(e){var i=e.id;return t.has(i)})),customInds:r.filter((function(e){return e.isCustom})).map((function(e){return(0,c.__assign)((0,c.__assign)({},e),{isActive:C(e.id)})}))}}),[r,C]),A=w.filterInds,L=w.mainInds,E=w.subInds,V=w.customInds,S=(0,h.useMemo)((function(){var e;return""===p?f((null===(e=A.find((function(e){var t=e.id;return C(t)})))||void 0===e?void 0:e.id)||"@MA"):A.find((function(e){return e.id===p}))}),[p,A]),M=(0,h.useCallback)((function(e,t,n,r){void 0===r&&(r=!1),i.setValue(t,n),a(""+e,r),y((function(e){return!e}))}),[i,a]),D=(0,h.useCallback)((function(e){var t,n=i.getDefaultValue(e);i.setValues(((t={})[e]=n,t)),a(""+e,!0),_((function(e){return-1*e}))}),[i,a]);return l?u().createElement(d.Z,{height:448,flexDirection:"column"},u().createElement(xs,{customInds:V})):u().createElement(d.Z,{height:448},u().createElement(ys,{mainIndicators:L,subIndicators:E,selectedIndicators:n,selectIndicator:o,setActiveId:f,activeId:p}),S&&u().createElement(Oa.Provider,{value:{id:S.id,title:S.title,key:b,onClose:s,onReset:D}},u().createElement(S.component,{key:b,label:S.label,settingManager:i,hotUpdate:v,updateValue:M.bind(null,S.id)})))};const _s=function(e){var t=e.visible,i=void 0===t||t,n=e.isShowCustomIndicator,r=void 0!==n&&n,o=e.setVisible,a=e.getI18n,s=e.activeIndicatorId,l=e.settingManager,d=e.selectedIndicators,g=e.allIndicators,p=e.selectIndicator,f=e.updateIndicator,m=e.handleIndicator,v=(0,c.__read)((0,h.useState)("default"),2),x=v[0],b=v[1],C=(0,h.useCallback)((function(){o(!1)}),[o]);return u().createElement(Za.Provider,{value:{getI18n:a,selectIndicator:p,handleIndicator:m}},u().createElement(ga.Z,{visible:i,width:640,sx:{borderRadius:"6px",overflow:"hidden"}},u().createElement(_.Z,{bg:"kline.settingPanelBg",height:"100%"},u().createElement(_.Z,{height:64,py:20,lineHeight:"24px",sx:r?{position:"relative"}:{position:"relative",borderBottomColor:"line",borderBottomWidth:.5,borderBottomStyle:"solid"}},r?u().createElement(fa.Z,{size:"small",ml:"md",variant:"standard",defaultActiveKey:x,onChange:function(e){return b(e)}},u().createElement(ma.Z,{tab:a("indicator-default-title","Indicator"),tabKey:"default"}),u().createElement(ma.Z,{tab:a("indicator-custom-title","Customized Indicator"),tabKey:"custom"})):u().createElement(y.Z,{color:"t.primary",ml:"md",fontSize:20},a("indicator-default-title","Indicator")),u().createElement(pa.Z,{mr:"xs",color:"t.third",sx:{position:"absolute",right:29,top:"50%",transform:"translateY(-50%)",cursor:"pointer",":hover":{color:"t.primary"}},size:16,onClick:C})),u().createElement(bs,{activeIndicatorId:s,settingManager:l,updateIndicator:f,selectIndicator:p,selectedIndicators:d,onClose:C,allIndicators:g,isShowCustom:r&&"custom"===x}))))};var Cs,ws=i("JyQ1");!function(e){e[e.MENU_CURSOR=0]="MENU_CURSOR",e[e.MENU_TOOLS=1]="MENU_TOOLS",e[e.MENU_CONTROL=2]="MENU_CONTROL",e[e.MENU_HANDLER=3]="MENU_HANDLER",e[e.MENU_TOOLS_LINE=4]="MENU_TOOLS_LINE",e[e.MENU_TOOLS_TRACK=5]="MENU_TOOLS_TRACK",e[e.MENU_TOOLS_ARROW=6]="MENU_TOOLS_ARROW",e[e.MENU_TOOLS_TEXT=7]="MENU_TOOLS_TEXT"}(Cs||(Cs={}));var As=[{key:Cs.MENU_CURSOR,children:[{key:Et.DefaultCursor,icon:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17 13.9999L18.7107 13.2964L32.7107 27.4382L32 29.1417H24.2162L18.7107 34.7034L17 33.9999V13.9999ZM19 16.4314V31.5683L23.3819 27.1417H29.6029L19 16.4314Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_DEFAULT_CURSOR,i18n:"Cursor"},{key:Et.CrossHairCursor,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 2H11V9H13V2Z" fill="#848E9C"/>\n<path d="M15 11V13H22V11H15Z" fill="#848E9C"/>\n<path d="M13 15H11V22H13V15Z" fill="#848E9C"/>\n<path d="M9 13V11H2V13H9Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_CROSS_CURSOR,i18n:"Cross Cursor"}]},{key:Cs.MENU_TOOLS,children:[{key:Cs.MENU_TOOLS_LINE,activeKey:Et.TrendLine,children:[{key:Et.TrendLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.1028 15.1524 6.67 15.4207 7.1652L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L16.835 8.57936C17.3301 8.84765 17.8973 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_TREND_LINE,i18n:"Trend Line"},{key:Et.ExtendTrendLine,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5794 5.835L22.2072 3.20718L20.793 1.79297L18.1652 4.42074C17.67 4.15239 17.1028 4 16.5 4C14.567 4 13 5.567 13 7.5C13 8.1028 13.1524 8.67 13.4207 9.1652L9.1652 13.4207C8.67 13.1524 8.1028 13 7.5 13C5.567 13 4 14.567 4 16.5C4 17.1028 4.15239 17.67 4.42074 18.1652L1.79297 20.793L3.20718 22.2072L5.835 19.5794C6.33015 19.8477 6.89728 20 7.5 20C9.433 20 11 18.433 11 16.5C11 15.8973 10.8477 15.3301 10.5794 14.835L14.835 10.5794C15.3301 10.8477 15.8973 11 16.5 11C18.433 11 20 9.433 20 7.5C20 6.89728 19.8477 6.33015 19.5794 5.835ZM16.5 9C17.3284 9 18 8.32843 18 7.5C18 6.67157 17.3284 6 16.5 6C15.6716 6 15 6.67157 15 7.5C15 8.32843 15.6716 9 16.5 9ZM7.5 18C8.32843 18 9 17.3284 9 16.5C9 15.6716 8.32843 15 7.5 15C6.67157 15 6 15.6716 6 16.5C6 17.3284 6.67157 18 7.5 18Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_EX_TREND_LINE,i18n:"Extended Trend Line"},{key:Et.HorizontalLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.874 11C15.4299 9.27477 13.8638 8 12 8C10.1362 8 8.57006 9.27477 8.12602 11L2 11V13L8.12602 13C8.57006 14.7252 10.1362 16 12 16C13.8638 16 15.4299 14.7252 15.874 13L22 13V11L15.874 11ZM14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_HORIZONTAL_LINE,i18n:"Horizontal Line"},{key:Et.VerticalLine,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 8.12602C9.27477 8.57006 8 10.1362 8 12C8 13.8638 9.27477 15.4299 11 15.874L11 22L13 22L13 15.874C14.7252 15.4299 16 13.8638 16 12C16 10.1362 14.7252 8.57006 13 8.12602L13 2L11 2L11 8.12602ZM12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_VERTICAL_LINE,i18n:"Vertical Line"},{key:Et.CrossLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 2H13V8.12602C14.4056 8.4878 15.5122 9.59439 15.874 11H22V13H15.874C15.5122 14.4056 14.4056 15.5122 13 15.874V22H11V15.874C9.59439 15.5122 8.4878 14.4056 8.12602 13H2V11H8.12602C8.4878 9.59439 9.59439 8.4878 11 8.12602V2ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_CROSS_LINE,i18n:"Crose Line"},{key:Et.ParallelLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18 5.5C18 7.433 16.433 9 14.5 9C13.8973 9 13.3301 8.84765 12.835 8.57936L8.57936 12.835C8.84765 13.3301 9 13.8973 9 14.5C9 16.433 7.433 18 5.5 18C3.567 18 2 16.433 2 14.5C2 12.567 3.567 11 5.5 11C6.1028 11 6.67 11.1524 7.1652 11.4207L11.4207 7.1652C11.1524 6.67 11 6.1028 11 5.5C11 3.567 12.567 2 14.5 2C16.433 2 18 3.567 18 5.5ZM16 5.5C16 6.32843 15.3284 7 14.5 7C13.6716 7 13 6.32843 13 5.5C13 4.67157 13.6716 4 14.5 4C15.3284 4 16 4.67157 16 5.5ZM7 14.5C7 15.3284 6.32843 16 5.5 16C4.67157 16 4 15.3284 4 14.5C4 13.6716 4.67157 13 5.5 13C6.32843 13 7 13.6716 7 14.5Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 19C17.433 19 19 17.433 19 15.5C19 14.8973 18.8477 14.3301 18.5794 13.835L22.7072 9.70718L21.293 8.29297L17.1652 12.4207C16.67 12.1524 16.1028 12 15.5 12C13.567 12 12 13.567 12 15.5C12 16.1027 12.1523 16.6699 12.4206 17.165L8.29282 21.2928L9.70703 22.707L13.8348 18.5793C14.33 18.8476 14.8972 19 15.5 19ZM15.5 17C16.3284 17 17 16.3284 17 15.5C17 14.6716 16.3284 14 15.5 14C14.6716 14 14 14.6716 14 15.5C14 16.3284 14.6716 17 15.5 17Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_PARRLLEL_LINE,i18n:"Parallel Line"},{key:Et.RayLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.5794 7.835C17.8477 8.33014 18 8.89728 18 9.5C18 11.433 16.433 13 14.5 13C13.8973 13 13.3301 12.8477 12.835 12.5794L8.57936 16.835C8.84765 17.3301 9 17.8973 9 18.5C9 20.433 7.433 22 5.5 22C3.567 22 2 20.433 2 18.5C2 16.567 3.567 15 5.5 15C6.1028 15 6.67 15.1524 7.1652 15.4207L11.4207 11.1652C11.1524 10.67 11 10.1028 11 9.5C11 7.567 12.567 6 14.5 6C15.1028 6 15.67 6.15239 16.1652 6.42074L20.793 1.79297L22.2072 3.20718L17.5794 7.835ZM16 9.5C16 10.3284 15.3284 11 14.5 11C13.6716 11 13 10.3284 13 9.5C13 8.67157 13.6716 8 14.5 8C15.3284 8 16 8.67157 16 9.5ZM7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17C6.32843 17 7 17.6716 7 18.5Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_RAY_LINE,i18n:"Ray"},{key:Et.PriceLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4817 12.5007C12.4254 12.5007 12.3878 12.4631 12.3878 12.4067V11.1479C12.3878 11.0916 12.3972 11.0634 12.4348 11.0164L14.6799 8.6773C14.9148 8.43306 14.9993 8.23578 14.9993 7.99154C14.9993 7.68153 14.8396 7.50305 14.5672 7.50305C14.2948 7.50305 14.0975 7.66275 14.0599 8.17002C14.0599 8.22639 14.0224 8.26397 13.9566 8.25457L12.4817 8.0573C12.4254 8.0479 12.3972 8.01033 12.3972 7.95396C12.4442 6.77031 13.4023 6 14.6611 6C15.9199 6 16.8218 6.79849 16.8218 7.90699C16.8218 8.62094 16.5306 9.11882 16.0609 9.59792L14.7457 10.9413V10.9601H16.7278C16.7842 10.9601 16.8218 10.9976 16.8218 11.054V12.4067C16.8218 12.4631 16.7842 12.5007 16.7278 12.5007H12.4817Z" fill="#848E9C"/>\n<path d="M9.18598 12.5007C9.12962 12.5007 9.09204 12.4631 9.09204 12.4067V8.08548H9.07326L7.93658 8.82761C7.88021 8.86518 7.81445 8.8464 7.81445 8.77124V7.14607C7.81445 7.08971 7.83324 7.05213 7.88021 7.01456L9.10144 6.16909C9.1578 6.13152 9.21417 6.11273 9.27992 6.11273H10.8769C10.9333 6.11273 10.9709 6.1503 10.9709 6.20667V12.4067C10.9709 12.4631 10.9333 12.5007 10.8769 12.5007H9.18598Z" fill="#848E9C"/>\n<path d="M17.7171 10.9131C17.8487 11.937 18.7035 12.6134 20.0093 12.6134C21.3714 12.6134 22.2733 11.7867 22.2733 10.6219C22.2733 9.76701 21.8881 9.33489 21.4466 9.09064V9.07185C21.8881 8.78064 22.1699 8.33912 22.1699 7.76608C22.1699 6.77971 21.3808 6 19.9999 6C18.6753 6 17.9144 6.70455 17.7453 7.70972C17.7359 7.76608 17.7641 7.80366 17.8205 7.81305L19.3141 8.01033C19.3705 8.01972 19.4081 7.98214 19.4175 7.93517C19.4738 7.67214 19.6241 7.50305 19.8872 7.50305C20.1596 7.50305 20.3475 7.68153 20.3475 7.99154C20.3475 8.31094 20.1596 8.49882 19.8402 8.49882H19.6054C19.549 8.49882 19.5114 8.53639 19.5114 8.59276V9.87974C19.5114 9.93611 19.549 9.97368 19.6054 9.97368H19.859C20.2254 9.97368 20.4508 10.171 20.4508 10.5467C20.4508 10.9131 20.2535 11.1104 19.9435 11.1104C19.6523 11.1104 19.4644 10.9413 19.3987 10.6782C19.3893 10.6219 19.3517 10.5843 19.286 10.5937L17.7923 10.8004C17.7359 10.8098 17.7078 10.8567 17.7171 10.9131Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 15.5C1.5 13.567 3.067 12 5 12C6.58551 12 7.92479 13.0543 8.35506 14.5H22V16.5H8.35506C7.92479 17.9457 6.58551 19 5 19C3.067 19 1.5 17.433 1.5 15.5ZM5 14C4.17157 14 3.5 14.6716 3.5 15.5C3.5 16.3284 4.17157 17 5 17C5.82843 17 6.5 16.3284 6.5 15.5C6.5 14.6716 5.82843 14 5 14Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_PRICE_LINE,i18n:"Price Line"},{key:Et.ArrowLine,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.0368 15.1208 6.54537 15.3368 7H8V9H13.5859L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L15 10.4144V16H17V8.66318C17.4546 8.87915 17.9632 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_ARROW_LINE,i18n:"Arrow Line"},{key:Et.InfoLine,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2V13H13V2H2ZM11 4H4V6.5H11V4ZM11 8.5H4V11H11V8.5Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 14C21.433 14 23 12.433 23 10.5C23 8.567 21.433 7 19.5 7C17.567 7 16 8.567 16 10.5C16 11.1028 16.1524 11.67 16.4207 12.1652L12.1652 16.4207C11.67 16.1524 11.1028 16 10.5 16C8.567 16 7 17.567 7 19.5C7 21.433 8.567 23 10.5 23C12.433 23 14 21.433 14 19.5C14 18.8973 13.8477 18.3301 13.5794 17.835L17.835 13.5794C18.3301 13.8477 18.8973 14 19.5 14ZM19.5 12C20.3284 12 21 11.3284 21 10.5C21 9.67157 20.3284 9 19.5 9C18.6716 9 18 9.67157 18 10.5C18 11.3284 18.6716 12 19.5 12ZM10.5 21C11.3284 21 12 20.3284 12 19.5C12 18.6716 11.3284 18 10.5 18C9.67157 18 9 18.6716 9 19.5C9 20.3284 9.67157 21 10.5 21Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_INFO_LINE,i18n:"Info Line"}]},{key:Cs.MENU_TOOLS_ARROW,activeKey:Et.RightArrow,children:[{key:Et.UpArrow,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 11.4142L19.0001 10L12.0001 3L5 10.0001L6.41421 11.4143L11.0002 6.82835L11.0002 21.9997H13.0002L13.0002 6.8285L17.5859 11.4142Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_UP_ARROW,i18n:"Up Arrow"},{key:Et.DownArrow,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 12.5858L19.0001 14L12.0001 21L5 13.9999L6.41421 12.5857L11.0002 17.1716L11.0002 2.00026H13.0002L13.0002 17.1715L17.5859 12.5858Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_DOWN_ARROW,i18n:"Down Arrow"},{key:Et.LeftArrow,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.4142 17.5859L10 19.0001L3 12.0001L10.0001 5L11.4143 6.41421L6.82835 11.0002L21.9997 11.0002L21.9997 13.0002L6.8285 13.0002L11.4142 17.5859Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_LEFT_ARROW,i18n:"Left Arrow"},{key:Et.RightArrow,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.5858 17.5859L14 19.0001L21 12.0001L13.9999 5L12.5857 6.41421L17.1716 11.0002L2.00026 11.0002L2.00026 13.0002L17.1715 13.0002L12.5858 17.5859Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_RIGHT_ARROW,i18n:"Right Arrow"}]},{key:Et.FibonacciLine,icon:'<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 4.25H16.1449C16.5752 2.80425 17.9145 1.75 19.5 1.75C21.433 1.75 23 3.317 23 5.25C23 7.183 21.433 8.75 19.5 8.75C17.9145 8.75 16.5752 7.69574 16.1449 6.25H7.5V4.25ZM18 5.25C18 4.42157 18.6716 3.75 19.5 3.75C20.3284 3.75 21 4.42157 21 5.25C21 6.07843 20.3284 6.75 19.5 6.75C18.6716 6.75 18 6.07843 18 5.25Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 19.75H7.85506C7.42479 21.1957 6.08551 22.25 4.5 22.25C2.567 22.25 1 20.683 1 18.75C1 16.817 2.567 15.25 4.5 15.25C6.08551 15.25 7.42479 16.3043 7.85506 17.75H16.5V19.75ZM6 18.75C6 19.5784 5.32843 20.25 4.5 20.25C3.67157 20.25 3 19.5784 3 18.75C3 17.9216 3.67157 17.25 4.5 17.25C5.32843 17.25 6 17.9216 6 18.75Z" fill="#848E9C"/>\n<path d="M16.5 10.75H7.5V8.75H16.5V10.75Z" fill="#848E9C"/>\n<path d="M16.5 15.25H7.5V13.25H16.5V15.25Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_FIB_LINE,i18n:"Fibonacci Retracement"},{key:Et.Rectangle,icon:'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.85506 4.5C8.42479 3.05426 7.08551 2 5.5 2C3.567 2 2 3.567 2 5.5C2 7.08551 3.05426 8.42479 4.5 8.85506V15.1449C3.05426 15.5752 2 16.9145 2 18.5C2 20.433 3.567 22 5.5 22C7.08551 22 8.42479 20.9457 8.85506 19.5H15.1449C15.5752 20.9457 16.9145 22 18.5 22C20.433 22 22 20.433 22 18.5C22 16.9145 20.9457 15.5752 19.5 15.1449V8.85506C20.9457 8.42479 22 7.08551 22 5.5C22 3.567 20.433 2 18.5 2C16.9145 2 15.5752 3.05426 15.1449 4.5L8.85506 4.5ZM5.5 4C6.32843 4 7 4.67157 7 5.5C7 6.32843 6.32843 7 5.5 7C4.67157 7 4 6.32843 4 5.5C4 4.67157 4.67157 4 5.5 4ZM15.1449 6.5L8.85506 6.5C8.51909 7.62889 7.62889 8.51909 6.5 8.85506V15.1449C7.62889 15.4809 8.51909 16.3711 8.85506 17.5H15.1449C15.4809 16.3711 16.3711 15.4809 17.5 15.1449V8.85506C16.3711 8.51909 15.4809 7.62889 15.1449 6.5ZM5.5 17C6.32843 17 7 17.6716 7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17ZM20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7C19.3284 7 20 6.32843 20 5.5ZM18.5 17C19.3284 17 20 17.6716 20 18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5C17 17.6716 17.6716 17 18.5 17Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_RECTANGLE,i18n:"Rectangle"},{key:Et.Text,icon:Gn,i18nKey:vi.DRAW_TEXT,i18n:"Text"}]},{key:Cs.MENU_CONTROL,children:[{key:Et.KeepDrawing,icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.6 20.9997H3V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="#848E9C"/>\n<path d="M10 3L3 3V10H5V5L10 5V3Z" fill="#848E9C"/>\n<path d="M14 21V19H19V14H21V21H14Z" fill="#848E9C"/>\n</svg>\n',i18nKey:vi.DRAW_CONTINUE,i18n:"Keep Drawing",multiSelect:!0},{key:Et.LockDraw,icon:function(e){return e?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="#848E9C"/>\n</svg>\n':'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="#848E9C"/>\n</svg>\n'},i18nKey:vi.DRAW_LOCK,i18n:"Lock Drawing Tools",multiSelect:!0},{key:Et.ToggleVisible,icon:function(e){return e?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2.58582 3.99966L19.9999 21.4137L21.4141 19.9995L18.7071 17.2925L24 11.9993L18.0002 5.99952C14.9256 2.92499 10.0787 2.70295 6.74819 5.33361L4.00003 2.58545L2.58582 3.99966ZM8.17533 6.76075L17.2929 15.8783L21.1715 11.9993L16.5859 7.41373C14.2937 5.12148 10.7124 4.90379 8.17533 6.76075Z" fill="#848E9C"/>\n<path d="M15.493 19.7351L13.9455 18.1876C11.715 18.8867 9.18138 18.3527 7.41403 16.5853L2.82837 11.9993L5.29281 9.5349L3.87862 8.12072L0 11.9993L5.99988 17.9996C8.56681 20.5665 12.3692 21.145 15.493 19.7351Z" fill="#848E9C"/>\n</svg>\n':'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 14.5002C13.3807 14.5002 14.4999 13.381 14.4999 12.0002C14.4999 10.6195 13.3807 9.50024 11.9999 9.50024C10.6192 9.50024 9.49995 10.6195 9.49995 12.0002C9.49995 13.381 10.6192 14.5002 11.9999 14.5002ZM16.4999 12.0002C16.4999 14.4855 14.4852 16.5002 11.9999 16.5002C9.51466 16.5002 7.49995 14.4855 7.49995 12.0002C7.49995 9.51496 9.51466 7.50024 11.9999 7.50024C14.4852 7.50024 16.4999 9.51496 16.4999 12.0002Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.0002 6.00025L24 12.0001L18.0002 18.0002C14.6864 21.314 9.31368 21.3141 5.99988 18.0003L0 12.0001L5.99988 6.0002C9.31368 2.6864 14.6864 2.6865 18.0002 6.00025ZM16.5859 7.41447C14.0532 4.88174 9.94676 4.88168 7.41403 7.41441L2.82837 12.0001L7.41403 16.5861C9.94676 19.1188 14.0532 19.1187 16.5859 16.586L21.1715 12.0001L16.5859 7.41447Z" fill="#848E9C"/>\n</svg>\n'},i18nKey:vi.DRAW_TOGGLE,i18n:"Hide All Drawings",multiSelect:!0}]},{key:Cs.MENU_HANDLER,children:[{key:Et.Delete,icon:jn,i18nKey:vi.DRAW_DELETE_ALL,i18n:"Delete All"}]}],Ls=function(e,t){return void 0===t&&(t=!0),"string"===typeof e?e:e(t)},Es=u().memo((function(e){var t=e.icon,i=e.i18n,n=e.isActive,r=e.wrapRef,o=e.handleClick,a=e.action,s=e.groupKey,l=(0,c.__rest)(e,["icon","i18n","isActive","wrapRef","handleClick","action","groupKey"]);return u().createElement(Ce.Z,(0,c.__assign)({container:r,tip:i,placement:"right",arrow:!0,width:1,sx:{"&":{display:"flex",justifyContent:"center"}}},l),u().createElement(d.Z,{className:"draw-tool-item "+(n?"active":""),height:40,onClick:function(){return o(a,s)},flexDirection:"column",justifyContent:"center",dangerouslySetInnerHTML:{__html:t}}))}));const Vs=function(e){var t=e.actionState,i=e.handleClick,n=e.wrapRef,r=e.getI18n,o=void 0===r?function(){return""}:r,a=(0,c.__read)((0,h.useState)(!0),2),s=a[0],l=a[1],g=(0,c.__read)((0,h.useState)(!1),2),p=g[0],f=g[1],m=(0,c.__read)((0,h.useState)(!1),2),v=m[0],y=m[1],x=(0,c.__read)((0,h.useState)(""),2),b=x[0],C=x[1],w=(0,h.useRef)(),A=(0,h.useCallback)((function(e){void 0===e&&(e=!0);var t=w.current;if(t){var i=t.scrollTop,n=t.scrollHeight,r=e?Math.min(i+60,n):Math.max(i-60,0);t.scrollTop=r}}),[]),L=function(e,t,i){void 0===i&&(i=[]);var n=(0,h.useRef)(0);return(0,h.useCallback)((function(){var i=Date.now();i-n.current>t&&(e(),n.current=i)}),i)}((function(){var e=w.current,t=(e||{}).lastElementChild;if(e&&t){var i=e.scrollTop,n=e.offsetHeight,r=t,o=r.offsetHeight,a=r.offsetTop;f(i>0),y(i<a-n+o)}}),10,[f,f]),E=(0,h.useCallback)((function(e,t,n){e.activeKey=t,i(t,n)}),[i]);return(0,h.useEffect)((function(){L()}),[L]),(0,h.useMemo)((function(){return u().createElement(d.Z,{className:"kline-draw-panel "+(s?"hidden":"visible"),justifyContent:"center"},u().createElement(d.Z,{className:"kline-draw-panel_down up "+(p?"":"hidden"),onClick:function(){return A(!1)}}),u().createElement(_.Z,{ref:w,sx:{bg:"kline.drawDropDownBg"},className:"kline-draw-menu-container",flexDirection:"column",onScroll:function(){return L()}},As.map((function(e,r){var a=e.key,s=e.children;return u().createElement(u().Fragment,{key:a},r>0&&u().createElement(d.Z,{my:"minor",height:1,bg:"kline.drawDivider"}),u().createElement(d.Z,{flexDirection:"column"},s.map((function(e){var r=e,s=r.children,l=r.activeKey,c=r.key;if(s){var h=s,g=h.find((function(e){return e.key===l}));return u().createElement(d.Z,{alignItems:"center",key:c,justifyContent:"center"},g&&u().createElement(Es,{wrapRef:n,icon:Ls(g.icon,g.key===t.onlyKey),action:g.key,i18n:o(g.i18nKey,g.i18n),isActive:g.key===t.onlyKey,groupKey:a,handleClick:i}),u().createElement(T.ZP,{trigger:"click",placement:"right-start",enablePortal:!0,sx:{position:"absolute",right:0},overlayProps:{className:"kline-draw-menu-dropdown",bg:"kline.drawDropDownBg",ml:"minor",maxHeight:"384px",overflowY:"scroll",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},onVisibleChange:function(e){C(e?c:"")},overlay:h.map((function(i){var n=i.key,r=i.icon,o=i.i18n;return u().createElement(d.Z,{className:"draw-tool-item "+(t.onlyKey===n?"active":""),height:48,fontSize:1,pl:"xs",pr:"plus",onClick:function(){return E(e,n,a)},justifyContent:"start",alignItems:"center",key:n,sx:{color:"kline.drawIconColor","&.draw-tool-item.active, &:hover":{bg:"kline.drawDropDownActiveBg",color:"kline.drawDropDownActiveTextColor"},"&.draw-tool-item.active svg>path, &:hover svg>path":{fill:"kline.drawDropDownActiveTextColor"}}},u().createElement(d.Z,{dangerouslySetInnerHTML:{__html:Ls(r)}}),u().createElement(d.Z,{ml:"xs"},o))}))},u().createElement(_.Z,{sx:{lineHeight:"30px",borderRadius:"2px 0 0 2px","&:hover":{bg:"kline.drawDropDownIconBg"},cursor:"pointer"}},u().createElement(ws.Z,{size:12,color:"kline.drawIconColor",sx:{transform:b===c?"rotate(180deg)":"rotate(0)",transition:"transform 0.3s ease 0s"}}))))}var p=e,f=p.key,m=p.i18nKey,v=p.i18n,y=p.icon,x=p.multiSelect?!!t[f]:f===t.onlyKey;return u().createElement(Es,{wrapRef:n,icon:Ls(y,x),action:f,i18n:o(m,v),isActive:x,handleClick:i,key:f,groupKey:a})}))))}))),u().createElement(d.Z,{className:"kline-draw-panel_down "+(v?"":"hidden"),onClick:function(){return A()}}),u().createElement(d.Z,{className:"kline-draw-panel_hidden pointer",onClick:function(){return l(!s)}}))}),[t,b,p,v,s])};var Ss=i("5dZ7");function Ms(e){var t=(0,c.__read)((0,h.useState)(e),2),i=t[0],n=t[1],r=(0,h.useRef)(e);return[i,{updateValue:(0,h.useCallback)((function(e){var t=(0,c.__assign)((0,c.__assign)({},r.current),e);_n()(t,r.current)||(r.current=t,n(t))}),[]),toggleValue:(0,h.useCallback)((function(e){var t=(0,c.__assign)({},r.current);t[e]=!t[e],r.current=t,n(t)}),[]),getValue:(0,h.useCallback)((function(e){return r.current[e]}),[])}]}var Ds=[10,11,12,14,16,18,20,24,28,36],Ts=function(e){var t=cn(e);return"rgb("+t.r+", "+t.g+", "+t.b+")"},ks=function(e){var t=e.isLock,i=void 0!==t&&t,n=e.setLock,r=e.getI18n,o=void 0===r?function(){return""}:r;return(0,h.useMemo)((function(){return u().createElement(Ce.Z,{tip:i?o(vi.ANNOTATION_UNLOCK,"Unlock"):o(vi.ANNOTATION_LOCK,"Lock"),variant:"kline.toolItem",placement:"top",arrow:!0},u().createElement(d.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:i?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="#848E9C"/>\n</svg>\n':'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="#848E9C"/>\n</svg>'},sx:{"&:hover path, &:hover rect":{fill:i?"kline.annotationToolActiveTextColor":"kline.annotationToolLineActiveColor"}},onClick:function(){return n({isLock:!i})}}))}),[i,n])},Is=u().memo((function(e){var t=e.tip,i=void 0===t?"":t,n=e.children,r=void 0===n?[]:n,o=e.overlay,a=void 0===o?[]:o;return u().createElement(T.ZP,{trigger:"click",placement:"bottom",height:"100%",overlay:a,overlayProps:{mt:"minor"},enablePortal:!0,variant:"kline.toolItem"},u().createElement(Ce.Z,{tip:i,placement:"top",arrow:!0,height:"100%"},r))})),Ws=function(e){var t=e.isActive,i=e.clickHandle;return(0,h.useMemo)((function(){return u().createElement(d.Z,{width:1,onClick:function(){return i()},height:28,alignItems:"center",px:"sm",py:"minor",sx:{cursor:"pointer",fontSize:"14px",color:t?"kline.annotationToolLineActiveColor":"kline.annotationToolLineColor","&:hover":{bg:"kline.annotationToolActiveBg"}}},e.children)}),[t,i])},Ps=function(e){var t=e.isActive,i=e.clickHandle,n=e.boxStyle,r=void 0===n?{}:n;return u().createElement(d.Z,{width:1,onClick:function(){return i()},height:32,alignItems:"center",px:"xs",sx:{cursor:"pointer",bg:t?"kline.annotationToolActiveBg":"","&:hover":{bg:"kline.annotationToolActiveBg"},"&:hover .annotation-dropdown-item":{borderBottomColor:"kline.annotationToolLineActiveColor"}}},u().createElement(_.Z,{className:"annotation-dropdown-item",sx:(0,c.__assign)({width:"100%",height:"0"},r)}))},Hs=function(e){var t=e.width,i=void 0===t?1:t,n=e.onWidthChange,r=(0,h.useCallback)((function(e){e!==i&&n({lineWidth:e})}),[i,n]);return(0,h.useMemo)((function(){return u().createElement(d.Z,{width:80,flexDirection:"column",bg:"kline.annotationToolBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[1,2,3,4].map((function(e){return u().createElement(Ps,{key:e,clickHandle:function(){return r(e)},isActive:e===i,boxStyle:{borderBottomStyle:Vt.SOLID,borderBottomWidth:e+"px",borderBottomColor:e===i?"kline.annotationToolLineActiveColor":"kline.annotationToolLineColor"}})})))}),[r])},Rs=function(e){var t=e.lineStyle,i=void 0===t?Vt.SOLID:t,n=e.onStyleChange,r=(0,h.useCallback)((function(e){e!==i&&n({lineStyle:e})}),[i,n]);return(0,h.useMemo)((function(){return u().createElement(d.Z,{width:80,flexDirection:"column",bg:"kline.annotationToolBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[Vt.SOLID,Vt.DOTTED,Vt.DASHED].map((function(e){return u().createElement(Ps,{key:e,clickHandle:function(){return r(e)},isActive:e===i,boxStyle:{borderBottomStyle:e,borderBottomWidth:"1px",borderBottomColor:e===i?"kline.annotationToolLineActiveColor":"kline.annotationToolLineColor"}})})))}),[r])};const Bs=function(e){var t=e.wrapRef,i=e.annotation,n=e.cacheKey,r=e.visible,o=e.getI18n,a=void 0===o?function(){return""}:o,s=(0,c.__read)(Ms({showColor:!0,color:"",showWidth:!0,lineWidth:1,showStyle:!0,lineStyle:Vt.SOLID,showBg:!1,background:"",showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:10,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,isLock:!1,showLock:!1,showDelete:!1}),2),l=s[0],g=l.showColor,p=l.color,f=l.showWidth,m=l.lineWidth,v=l.showStyle,x=l.lineStyle,b=l.showTextColor,C=l.textColor,w=l.showFontSize,A=l.textFontSize,L=l.showTextBold,E=l.isTextBold,V=l.showTextEdit,S=l.isTextEdit,M=l.showBg,D=l.background,T=l.isLock,k=l.showLock,I=l.showDelete,W=s[1].updateValue,P=(0,h.useRef)({tx:0,ty:0}),H=(0,h.useRef)();(0,h.useEffect)((function(){i?W(i.getEditAttribute()):n&&W(No.getPreEditAttributes(n))}),[n,i]);var R=(0,h.useCallback)((function(){if(i){var e=i.getDefaultStyle();i.applyAttributes(e),W(i.getEditAttribute());var t=i.getCacheStyleKey();No.updateCacheStyle(t,e)}else if(n){e=Ro[n]||{};W((0,c.__assign)((0,c.__assign)({},e),{showTextEdit:!1})),No.updateCacheStyle(n,e)}}),[n,i]),B=(0,h.useCallback)((function(e){if(W(e),i){i.applyAttributes(e);var t=i.getCacheStyleKey();No.updateCacheStyle(t,e)}else n&&No.updateCacheStyle(n,e)}),[n,i]),N=(0,h.useCallback)((function(){i&&i.remove()}),[i]),O=(0,h.useCallback)((function(e){var i=t.current;if(i){var n=i.getBoundingClientRect(),r=n.left,o=n.top,a=n.width,s=n.height,l=e.clientX,h=e.clientY,u=function(e){var t=e.clientX,i=e.clientY,n=t-l,u=i-h;if(H.current){var d=H.current.getBoundingClientRect(),g=d.left,p=d.top,f=d.width,m=d.height,v=(0,c.__read)([g-r,p-o],2),y=v[0],x=v[1];(y+n<=0&&n<=0||y+f+n>=a&&n>=0)&&(n=0),(x+u<=0&&u<=0||x+m+u>=s&&u>=0)&&(u=0),P.current.tx+=n,P.current.ty+=u,Ki(H.current,{transform:"translate("+P.current.tx+"px, "+P.current.ty+"px)"})}l=t,h=i},d=function(e){g(),e.stopPropagation()},g=function(){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",d),e.stopPropagation(),function(){g()}}}),[]);return(0,h.useMemo)((function(){return u().createElement(_.Z,{ref:H,display:r?"flex":"none",bg:"kline.annotationToolBg",sx:{position:"absolute",height:"40px",right:0,top:0,zIndex:9999,alignItems:"center",borderColor:"kline.annotationToolBorderColor",borderWidth:"1px",borderStyle:"solid",userSelect:"none"}},u().createElement(d.Z,{variant:"kline.toolItem",dangerouslySetInnerHTML:{__html:'<svg width="6" height="12" viewBox="0 0 6 12" fill="none">\n<rect width="2" height="2" fill="#929AA5" />\n<rect y="5" width="2" height="2" fill="#929AA5" />\n<rect y="10" width="2" height="2" fill="#929AA5" />\n<rect x="4" width="2" height="2" fill="#929AA5" />\n<rect x="4" y="5" width="2" height="2" fill="#929AA5" />\n<rect x="4" y="10" width="2" height="2" fill="#929AA5" />\n</svg>'},px:"minor",onMouseDown:O,sx:{cursor:"grab"}}),u().createElement(Ce.Z,{variant:"kline.toolItem",tip:a(vi.ANNOTATION_DEFAULT,"Back to Default"),placement:"top",arrow:!0},u().createElement(d.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.07114 6.34315C8.59945 4.81484 9.88191 4 12 4C16.4182 4 20 7.58172 20 12H22C22 6.47715 17.5228 2 12 2C9.14747 2 7.38599 3.19988 5.65693 4.92893L4 6.58586V3H2V10H9V8L5.41429 8L7.07114 6.34315Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.9289 17.6569C15.4006 19.1852 14.1181 20 12 20C7.58175 20 4.00003 16.4183 4.00003 12H2.00003C2.00003 17.5228 6.47718 22 12 22C14.8525 22 16.614 20.8001 18.3431 19.0711L20 17.4141V21H22V14H15V16H18.5857L16.9289 17.6569Z" fill="#848E9C"/>\n</svg>\n'},px:"xs",onClick:function(){return R()}})),b&&u().createElement(Is,{tip:a(vi.ANNOTATION_COLOR,"Color"),overlay:u().createElement(Sa,{color:C,onChange:function(e){return B({textColor:e})}})},u().createElement(d.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},u().createElement(d.Z,{dangerouslySetInnerHTML:{__html:Gn}}),u().createElement(d.Z,{bg:Ts(C),height:"3px",width:18}))),g&&u().createElement(Is,{tip:a(vi.ANNOTATION_COLOR,"Color"),overlay:u().createElement(Sa,{color:p,onChange:function(e){return B({color:e})}})},u().createElement(d.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},u().createElement(d.Z,{dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.60004 20.9997L3 20.9997V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="#848E9C"/>\n</svg>\n'}}),u().createElement(d.Z,{bg:Ts(p),height:"3px",width:1}))),f&&u().createElement(Is,{tip:a(vi.ANNOTATION_LINE_WIDTH,"Width"),overlay:u().createElement(Hs,{width:m,onWidthChange:B})},u().createElement(d.Z,{height:"100%",pl:"minor",justifyContent:"center",alignItems:"center"},u().createElement(d.Z,{height:m,sx:{width:"18px",background:"#76808F",borderRadius:"4px",bg:"kline.annotationToolLineColor"}}),u().createElement(Ss.Z,{size:17,color:"kline.annotationToolLineColor"}))),v&&u().createElement(Is,{tip:a(vi.ANNOTATION_LINE_STYLE,"Style"),overlay:u().createElement(Rs,{lineStyle:x,onStyleChange:B})},u().createElement(d.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center",sx:{".annotation-tools-line-style":{height:"1px",borderBottomColor:"kline.annotationToolLineColor",borderBottomWidth:"1px",borderBottomStyle:x},"&:hover .annotation-tools-line-style":{borderBottomColor:"kline.annotationToolLineActiveColor"}}},u().createElement(d.Z,{className:"annotation-tools-line-style",width:"18px"}),u().createElement(Ss.Z,{size:17,color:"kline.annotationToolLineColor"}))),M&&u().createElement(Is,{tip:a(vi.ANNOTATION_BACKGROUND,"Background Color"),overlay:u().createElement(Sa,{color:D,onChange:function(e){return B({background:e})}})},u().createElement(d.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},u().createElement(d.Z,{dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14 14V9H21V21H9V14H14Z" fill="#848E9C"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13 5H5V13H13V5ZM3 3V15H15V3H3Z" fill="#848E9C"/>\n</svg>\n'}}),u().createElement(d.Z,{bg:Ts(D),height:"3px",width:1,mt:"minor"}))),w&&u().createElement(Is,{tip:a(vi.ANNOTATION_FONT_SIZE,"Font Size"),overlay:u().createElement(d.Z,{flexDirection:"column",bg:"kline.annotationToolBg"},Ds.map((function(e){return u().createElement(Ws,{key:e,isActive:A===e,clickHandle:function(){B({textFontSize:e})}},u().createElement(y.Z,null,e))})))},u().createElement(d.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center"},u().createElement(y.Z,{fontSize:16},A),u().createElement(Ss.Z,{size:17,color:"kline.annotationToolLineColor"}))),L&&u().createElement(Ce.Z,{tip:a(vi.ANNOTATION_FONT_BOLD,"Bold"),variant:"kline.toolItem",placement:"top",arrow:!0},u().createElement(d.Z,{height:"100%",justifyContent:"center",alignItems:"center",px:"xs",onClick:function(){return B({isTextBold:!E})}},u().createElement(y.Z,{fontSize:16,fontWeight:"bold",color:E?"kline.annotationToolActiveTextColor":""},"B"))),V&&u().createElement(Ce.Z,{tip:a(vi.ANNOTATION_EDIT_TEXT,"Edit Text"),variant:"kline.toolItem",placement:"top",arrow:!0},u().createElement(d.Z,{className:S?"active":"",height:"100%",justifyContent:"center",alignItems:"center",px:"xs",dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n<path d="M15.4 3L5.40002 13V17.6H10L20 7.6L15.4 3ZM9.20002 15.6H7.40002V13.9L15.5 5.8L17.3 7.6L9.20002 15.6Z" fill="#929AA5"/>\n<path d="M16.9 4.4L15.4 3L16.9 4.4Z" fill="#212833"/>\n<path d="M21 18.8999H3V20.8999H21V18.8999Z" fill="#929AA5"/>\n</svg>\n'},onClick:function(){return B({isTextEdit:!S})}})),k&&u().createElement(ks,{isLock:T,setLock:B,getI18n:a}),I&&u().createElement(Ce.Z,{tip:a(vi.ANNOTATION_DELETE,"Delete"),variant:"kline.toolItem",placement:"top",arrow:!0},u().createElement(d.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:jn},px:"xs",onClick:function(){return N()}})))}),[r,p,m,x,C,D,A,E,S,T,g,f,v,b,M,w,L,V,k,I,B,N,R,a])};var Ns=i("EWkn");const Os=(0,h.forwardRef)((function(e,t){var i=e.width,n=e.height,r=e.visible,o=e.setVisible,a=e.boxProps,s=void 0===a?{}:a,l=e.children,d=(0,h.useRef)(),g=(0,h.useCallback)((function(){o(!1)}),[o]);return function(e,t){(0,h.useEffect)((function(){var i=function(i){e.current&&!e.current.contains(i.target)&&t(i)};return document.addEventListener("click",i),document.addEventListener("touchstart",i),function(){document.removeEventListener("click",i),document.removeEventListener("touchstart",i)}}),[e,t])}(d,g),(0,h.useImperativeHandle)(t,(function(){return{getElement:function(){return d.current}}})),u().createElement(_.Z,{ref:d,bg:"kline.annotationToolBg",width:i,height:n,sx:(0,c.__assign)({display:r?"block":"none",position:"absolute",left:"calc(50% - "+.5*i+"px)",top:"calc(50% - "+.5*n+"px)",boxShadow:"0px 0px 15px rgba(0, 0, 0, 0.25)",borderRadius:"2px"},s)},u().createElement(Ns.Z,{size:18,sx:{position:"absolute",top:"14px"},style:{right:"12px"},color:"t.secondary",cursor:"pointer",onClick:function(){return o(!1)}}),l)}));const Zs=function(e){var t=e.background,i=void 0===t?"background":t,n=e.height,r=void 0===n?2:n,o=(0,c.__rest)(e,["background","height"]);return(0,h.useMemo)((function(){return u().createElement(_.Z,(0,c.__assign)({bg:i,height:r},o))}),[i,r])};var Fs=function(e){var t=e.isActive,i=e.boxStyle,n=void 0===i?{}:i,r=e.children,o=(0,c.__rest)(e,["isActive","boxStyle","children"]);return u().createElement(d.Z,(0,c.__assign)({sx:(0,c.__assign)((0,c.__assign)({"&:hover":{color:"kline.annotationToolActiveTextColor"},color:"t.primary",cursor:"pointer"},t?{color:"kline.annotationToolActiveTextColor"}:{}),n)},o),r)},Ks="indicator-tab",zs=function(e){var t=e.visible,i=e.setVisible,n=void 0===i?function(){return!1}:i,r=e.allIndicators,o=void 0===r?[]:r,a=e.selectIndicators,s=void 0===a?[]:a,l=e.selectIndicator,g=void 0===l?function(){return!1}:l,p=e.handleIndicator,f=void 0===p?function(){return!1}:p,m=e.getI18n,v=void 0===m?function(){return""}:m,y=(0,h.useMemo)((function(){return o.reduce((function(e,t){var i=(0,c.__assign)((0,c.__assign)({},t),{isActive:s.includes(t.id)});return t.isCustom?e.customData.push(i):t.isMain?e.mainData.push(i):e.subData.push(i),e}),{mainData:[],subData:[],customData:[]})}),[o,s]),x=y.mainData,b=y.subData,C=y.customData;return(0,h.useMemo)((function(){return u().createElement(Os,{width:240,height:260,visible:t,setVisible:n,boxProps:{p:"sm",maxHeight:320,overflowY:"auto"}},u().createElement(d.Z,{flexDirection:"column",fontSize:12,lineHeight:"14px"},u().createElement(_.Z,{color:"t.third",fontSize:12},v("indicator-main-title","Main")),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs"},x.map((function(e){var t=e.id,i=e.name,n=e.isActive;return u().createElement(Fs,{isActive:n,width:1/3,py:"minor",key:t,onClick:g.bind(null,{id:t,name:i,isCustom:!1})},u().createElement(_.Z,{px:"minor"},i))}))),u().createElement(Zs,{height:1,background:"kline.drawDropDownActiveBg",opacity:.5,my:"xs"}),u().createElement(_.Z,{color:"t.third",fontSize:12,mt:"minor"},v("indicator-sub-title","Sub")),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs"},b.map((function(e){var t=e.id,i=e.name,n=e.isActive;return u().createElement(Fs,{isActive:n,width:1/3,py:"minor",key:t,onClick:g.bind(null,{id:t,isCustom:!1})},u().createElement(_.Z,{px:"minor"},i))})))))}),[t,n,x,b,C,f,v])};const Us=function(e){var t=e.visible,i=e.wrapRef,n=e.setVisible,r=void 0===n?function(){return!1}:n,o=e.allIndicators,a=void 0===o?[]:o,s=e.selectIndicators,l=void 0===s?[]:s,g=e.selectIndicator,p=void 0===g?function(){return!1}:g,f=e.handleIndicator,m=void 0===f?function(){return!1}:f,v=e.getI18n,x=void 0===v?function(){return""}:v,b=(0,h.useRef)(),C=(0,h.useRef)(),w=(0,h.useRef)(),A=function(e,t){var i=(0,h.useRef)({tx:0,ty:0});return(0,h.useCallback)((function(n){var r=t.current,o=e.current,a=0,s=0,l=0,h=0,u=n.clientX,d=n.clientY;if(r){var g=r.getBoundingClientRect();a=g.left,s=g.top,l=g.width,h=g.height}var p=function(e){var t=e.clientX,n=e.clientY,r=t-u,g=n-d;if(o){var p=o.getBoundingClientRect(),f=p.left,m=p.top,v=p.width,y=p.height,x=(0,c.__read)([f-a,m-s],2),b=x[0],_=x[1];(b+r<=0&&r<=0||b+v+r>=l&&r>=0)&&(r=0),(_+g<=0&&g<=0||_+y+g>=h&&g>=0)&&(g=0),i.current.tx+=r,i.current.ty+=g,o&&Ki(o,{transform:"translate("+i.current.tx+"px, "+i.current.ty+"px)"})}u=t,d=n},f=function(e){m(),e.stopPropagation()},m=function(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",f)};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",f),n.stopPropagation(),function(){m()}}),[e,t])}(w,i);(0,h.useEffect)((function(){var e=C.current;if(e){var t=e.getElement(),i=t.querySelector(".indicator-tab");return t&&i&&(w.current=t,b.current=i.addEventListener("mousedown",A)),function(){i.removeEventListener("mousedown",A)}}}),[A]);var L=(0,h.useMemo)((function(){return a.reduce((function(e,t){var i=(0,c.__assign)((0,c.__assign)({},t),{isActive:l.includes(t.id)});return t.isCustom?e.customData.push(i):t.isMain?e.mainData.push(i):e.subData.push(i),e}),{mainData:[],subData:[],customData:[]})}),[a,l]),E=L.mainData,V=L.subData,S=L.customData;return(0,h.useMemo)((function(){return u().createElement(Os,{width:340,height:320,visible:t,setVisible:r,boxProps:{overflowY:"auto"},ref:C},u().createElement(fa.Z,{tabsClassName:Ks,defaultActiveKey:"default",variant:"standard",height:"100%",sx:{borderBottom:"2px sloid",borderColor:"kline.drawDropDownActiveBg"},tabsSx:{pt:"sm",px:"sm",cursor:"pointer"},tabSx:{display:"flex","&>div":{marginRight:"24px"},"&:last-child>div":{marginRight:0}},tabDefaultNodeSx:{fontSize:"14px"}},u().createElement(ma.Z,{tab:x("indicator-default-title","Indicator"),tabKey:"default",sx:{px:"sm"}},u().createElement(d.Z,{flexDirection:"column",fontSize:12,lineHeight:"14px",mt:"sm"},u().createElement(_.Z,{color:"t.third",fontSize:12},x("indicator-main-title","Main")),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs"},E.map((function(e){var t=e.id,i=e.name,n=e.isActive;return u().createElement(Fs,{isActive:n,width:1/3,py:"minor",key:t,onClick:p.bind(null,{id:t,name:i,isCustom:!1})},u().createElement(_.Z,{px:"minor"},i))}))),u().createElement(Zs,{height:1,background:"kline.drawDropDownActiveBg",opacity:.5,my:"xs"}),u().createElement(_.Z,{color:"t.third",fontSize:12,mt:"minor"},x("indicator-sub-title","Sub")),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs"},V.map((function(e){var t=e.id,i=e.name,n=e.isActive;return u().createElement(Fs,{isActive:n,width:1/3,py:"minor",key:t,onClick:p.bind(null,{id:t,name:i,isCustom:!1})},u().createElement(_.Z,{px:"minor"},i))}))))),u().createElement(ma.Z,{sx:{px:"sm",height:"calc(100% - 64px)",overflowY:"auto","&::-webkit-scrollbar":{display:"none"}},tab:function(e){var t=e?"t.primary":"t.third",i=e?"primary":"transparent";return u().createElement(d.Z,{alignItems:"center",sx:{borderBottom:"2px solid",borderColor:i}},u().createElement(_.Z,{color:t,fontSize:1,mt:"2px"},x("indicator-custom-title","Customized Indicator")),u().createElement(_.Z,{bg:"primary",fontSize:0,ml:"minor",p:"minor",sx:{borderRadius:"3px"}},"Beta"))},tabKey:"custom"},0===S.length?u().createElement(d.Z,{justifyContent:"center",alignItems:"center",height:"100%",flexDirection:"column"},u().createElement(gs,{color:"t.third",size:60}),u().createElement(y.Z,{id:"electron_add_now_empty",color:"kline.annotationToolActiveTextColor",sx:{mt:"md",cursor:"pointer",textDecoration:"underline"},onClick:function(){return m(Mt.ADD)}},x("indicator-add","Add"))):u().createElement(u().Fragment,null,u().createElement(d.Z,{color:"t.third",fontSize:12,justifyContent:"space-between",pt:"sm"},u().createElement(y.Z,null,x("indicator-custom-title","Customized Indicator")),u().createElement(y.Z,{id:"electron_add_now_non_empty",color:"kline.annotationToolActiveTextColor",sx:{cursor:"pointer",textDecoration:"underline"},onClick:function(){return m(Mt.ADD)}},x("indicator-add","Add"))),u().createElement(d.Z,{flexWrap:"wrap",pt:"xs",flexDirection:"column",mx:"-16px"},S.map((function(e){var t=e.id,i=e.name,n=e.isActive,r=e.isMain;return u().createElement(Fs,{isActive:n,width:1,height:24,py:"minor",key:t,boxStyle:{px:"sm",cursor:"pointer",justifyContent:"space-between",alignItems:"center",lineHeight:"12px","&:hover":{bg:"kline.drawDropDownActiveBg"},"&:hover .icon-wrap":{display:"block"}}},u().createElement(_.Z,{px:"minor",fontSize:0,sx:{width:"calc(100% - 52px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},onClick:p.bind(null,{id:t,name:i,isCustom:!0,isMain:r})},i),u().createElement(_.Z,{width:52,className:"icon-wrap",display:"none",color:"kline.annotationToolLineColor",pr:"minor"},u().createElement(ps,{mx:"xs",size:16,sx:{"&:hover":{color:"kline.annotationToolLineActiveColor"}},onClick:function(){return m(Mt.EDIT,{id:t,name:i})}}),u().createElement(pa.Z,{size:16,sx:{"&:hover":{color:"kline.annotationToolLineActiveColor"}},onClick:function(){return m(Mt.REMOVE,t)}})))})))))))}),[t,r,E,V,S,m,x])};xt.White,xt.Dark2,xt.Dark4,xt.Dark2,xt.White,xt.GrayE,xt.Gray200,xt.YellowF,xt.Gray50,xt.Gray800,xt.White,xt.Gray8,xt.White,xt.Gray800,xt.Dark2,xt.Gray500,xt.YellowF,xt.Gray600;function Ys(e){return"\n  .kline-container {\n    position: relative;\n    height: 100%;\n    flex: 1;\n    z-index: 0;\n  }\n  .pointer:hover {\n    cursor: pointer;\n  }\n  .kline-wrap .kline-wrap-mask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 201;\n    background: var(--theme-kline-container-bg);\n  }\n  .kline-wrap .kline-title-wrap {\n    color: #76808F;\n  }\n  .kline-wrap .kline-title-wrap .default-label-box {\n    font-size: 12px\n  }\n  .kline-wrap.light .indicator-title-toolbox svg path {\n    fill: #d8d8d8;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .indicator-title-toolbox svg path {\n    fill: #3A3F46;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #848E9C;\n  }\n  .kline-wrap.light .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #707A8A;\n  }\n  .kline-title-wrap .tooltip-wrap {\n    position: absolute;\n    z-index: 10;\n  }\n  .tooltip-wrap.up {\n    left: 50%;\n    top: -6px;\n    transform: translate(-50%, -100%);\n  }\n  .tooltip-wrap.right {\n    left: 100%;\n    top: -6px;\n    transform: translate(0%, 0%);\n  }\n  .kline-title-wrap .tooltip-arrow {\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    top: 100%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(45deg);\n  }\n  .kline-title-wrap .tooltip-text {\n    padding: 6px 8px;\n    white-space: nowrap;\n    border-radius: 2px;\n  }\n\n  .right .tooltip-text {\n    margin-left: 6px;\n  }\n  .right .tooltip-arrow {\n    top: 50%;\n    left: 0;\n    transform: translate(50%, 0%) rotate(45deg);\n  }\n  .kline-wrap .tooltip-wrap {\n    background: #5E6673;\n    color: #ffffff\n  }\n  .kline-wrap .tooltip-arrow {\n    background: #5E6673;\n  }\n  .kline-wrap .title-wrapper-container {\n    height: 0;\n  }\n  .kline-wrap .chart-title-row {\n    display: flex;\n    font-size: 12px;\n    flex-wrap: wrap;\n    align-items: center;\n    width: fit-content;\n    width: -moz-max-content;\n    line-height: 18px;\n    margin-left: 16px;\n    background: var(--theme-kline-indicator-title-half-trans-bg);\n  }\n  .kline-wrap .chart-title-row .chart-title-indicator-container {\n    display: inline-flex;\n    flex-wrap: wrap;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    display: inline-flex;\n    position: relative;\n    font-size: 12px;\n    line-height: 14px;\n    cursor: pointer;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    margin-right: 6px;\n  }\n  div.chart-title-row:nth-child(2) ~ div > .chart-title-indicator-container {\n    margin-left: 22px;\n  }\n  div.chart-title-row.fold:nth-child(2) ~ div {\n    display: none;\n  }\n  .chart-title-row.fold > .chart-title-indicator-container, .chart-title-row.fold > .indicator-title-toolbox{\n    display: none;\n  }\n  .icon-box svg {\n    transition: transform 0.5s ease-out;\n  }\n  .chart-title-row.fold svg {\n    transform: rotate(-90deg);\n  }\n  .indicator-title-toolbox {\n    display: flex;\n    align-items: center;\n  }\n  .kline-wrap .text-area-wrap {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 150px;\n    height: 80px;\n    z-index: 10001;\n    background: #ddd;\n    outline: none;\n    padding: 4px;\n    border-radius: 4px;\n    border: 1px solid #328DFD;\n  }\n  .kline-wrap.dark .text-area-wrap {\n    color: #E6E8EA;\n    background: rgb(0, 0, 0);\n  }\n  .kline-wrap.light .text-area-wrap {\n    color: #1E2026;\n    background: rgba(0, 0, 0, 0.2);\n  }\n  .kline-draw-panel_down {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 16px;\n    z-index: 1;\n    transition: transform .11666667s cubic-bezier(.215,.61,.355,1);\n  }\n  .kline-wrap .kline-draw-panel.visible .kline-draw-panel_down {\n    bottom: 0;\n    visibility: visible;\n  }\n  .kline-wrap .kline-draw-panel.hidden .kline-draw-panel_down {\n    visibility: hidden;\n  }\n  .kline-draw-menu-container {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    scroll-behavior: smooth;\n    ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .kline-draw-menu-container::-webkit-scrollbar {\n    display: none;\n  }\n  .kline-wrap .kline-draw-panel.hidden .kline-draw-menu-container {\n    visibility: hidden;\n  }\n  .kline-wrap .kline-draw-panel .kline-draw-panel_down.hidden {\n    transform: translateY(100%);\n    visibility: hidden;\n    display: none;\n  }\n  .kline-wrap .kline-draw-panel .kline-draw-panel_down.up {\n    top: 0;\n    transform: rotate(180deg);\n  }\n  .kline-wrap .kline-draw-panel .kline-draw-panel_down.up.hidden {\n    transform: rotate(180deg) translateY(100%);\n  }\n  .kline-wrap.dark .kline-draw-panel_down {\n    background: #2B2F36;\n  }\n  .kline-wrap.light .kline-draw-panel_down {\n    background: #F5F5F5;\n  }\n  .kline-draw-panel {\n    position: relative;\n    width: 48px;\n    z-index: 1;\n    transition: width 0.2s;\n  }\n  .kline-draw-panel.hidden {\n    width: 2px;\n  }\n  .draw-tool-item {\n    cursor: pointer;\n  }\n  .draw-tool-item.active svg path {\n    fill: #F0B90B;\n  }\n  .kline-draw-panel_down::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 4px;\n    height: 4px;\n    border-width: 0 2px 2px 0;\n    border-style: solid;\n    transform-origin: center;\n    transform: rotate(45deg) translateX(-100%);\n  }\n  .kline-draw-panel_down:hover {\n    cursor: pointer;\n  }\n  .kline-wrap .kline-draw-panel .kline-draw-panel_down:hover::after {\n    border-color: #F0B90B;\n  }\n  .kline-wrap.dark .kline-draw-panel_down::after {\n    border-color: #929AA5;\n  }\n  .kline-wrap.light .kline-draw-panel_down::after {\n    border-color: #76808F;\n  }\n  .kline-draw-panel_hidden {\n    position: absolute;\n    bottom: 65px;\n    left: 100%;\n    width: 12px;\n    height: 32px;\n    border-radius: 4px;\n  }\n  .kline-draw-panel_hidden::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 3px;\n    height: 3px;\n    border-width: 1px 0 0 1px;\n    border-style: solid;\n    transform-origin: center;\n    transform: rotate(-45deg) translateY(-50%);\n  }\n  .kline-draw-panel.hidden .kline-draw-panel_hidden::after {\n    transform: rotate(135deg) translateY(100%);\n    transition: transform .11666667s cubic-bezier(.215,.61,.355,1);\n  }\n  .kline-wrap .kline-draw-panel .kline-draw-panel_hidden:hover {\n    background: #F0B90B;\n    color: #1E2026;\n  }\n  .kline-wrap.dark .kline-draw-panel_hidden {\n    background: #12161C;\n    border: 1px solid #474D57;\n    color: #929AA5;\n  }\n  .kline-wrap.light .kline-draw-panel_hidden {\n    background: #FFFFFF;\n    border: 1px solid #E6E8EA;\n    color: #76808F;\n  }\n  .kline-wrap .kline-draw-menu-divider {\n    margin: 4px 0;\n    border-top: 1px solid #ddd;\n  }\n  @media screen and (max-width: 767px) {\n    .kline-draw-panel {\n      display: none;\n    }\n  }\n"+("\n    .kline-wrap {\n      height: 100%;\n      position: relative;\n      background: var(--theme-kline-container-bg);\n      line-height: 1;\n      z-index: 0;\n      user-select: none;\n      --theme-kline-container-bg: "+ln(e)+";\n      --theme-kline-indicator-title-half-trans-bg: "+ln(e,.5)+"\n    }")}var Xs=function(e,t){var i=(0,h.useRef)(1),n=(0,h.useRef)(t);gi()(n.current,t)||(i.current*=-1),(0,h.useLayoutEffect)(e,[i.current])},Gs=i("tUxO"),js=i.n(Gs);const qs=function(){function e(e){this._namespace="",this._storeKey="CANDLESTICK_SETTING_INDICATOR",this._defaultValue=function(){var e={};return yr()(e,"@MA.periods[0]",7),yr()(e,"@MA.periods[1]",25),yr()(e,"@MA.periods[2]",99),yr()(e,"@MA.periods[3]",0),yr()(e,"@MA.periods[4]",0),yr()(e,"@MA.periods[5]",0),yr()(e,"@MA.periods[6]",0),yr()(e,"@MA.periods[7]",0),yr()(e,"@MA.periods[8]",0),yr()(e,"@MA.periods[9]",0),yr()(e,"@MA.sources[0]","close"),yr()(e,"@MA.sources[1]","close"),yr()(e,"@MA.sources[2]","close"),yr()(e,"@MA.sources[3]","close"),yr()(e,"@MA.sources[4]","close"),yr()(e,"@MA.sources[5]","close"),yr()(e,"@MA.sources[6]","close"),yr()(e,"@MA.sources[7]","close"),yr()(e,"@MA.sources[8]","close"),yr()(e,"@MA.sources[9]","close"),yr()(e,"@MA.lineWidths[0]",1),yr()(e,"@MA.lineWidths[1]",1),yr()(e,"@MA.lineWidths[2]",1),yr()(e,"@MA.lineWidths[3]",1),yr()(e,"@MA.lineWidths[4]",1),yr()(e,"@MA.lineWidths[5]",1),yr()(e,"@MA.lineWidths[6]",1),yr()(e,"@MA.lineWidths[7]",1),yr()(e,"@MA.lineWidths[8]",1),yr()(e,"@MA.lineWidths[9]",1),yr()(e,"@MA.colors[0]","rgba(241, 156, 56, 0.7)"),yr()(e,"@MA.colors[1]","rgba(234, 61, 247, 0.7)"),yr()(e,"@MA.colors[2]","rgba(116, 252, 253, 0.7)"),yr()(e,"@MA.colors[3]","rgba(139, 43, 246, 0.7)"),yr()(e,"@MA.colors[4]","rgba(0, 32, 245, 0.7)"),yr()(e,"@MA.colors[5]","rgba(234, 51, 35, 0.7)"),yr()(e,"@MA.colors[6]","rgba(87, 134, 224, 0.7)"),yr()(e,"@MA.colors[7]","rgba(255, 254, 85, 0.7)"),yr()(e,"@MA.colors[8]","rgba(117, 250, 76, 0.7)"),yr()(e,"@MA.colors[9]","rgba(138, 26, 16, 0.7)"),yr()(e,"@MA.visibles[0]",!0),yr()(e,"@MA.visibles[1]",!0),yr()(e,"@MA.visibles[2]",!0),yr()(e,"@MA.visibles[3]",!1),yr()(e,"@MA.visibles[4]",!1),yr()(e,"@MA.visibles[5]",!1),yr()(e,"@MA.visibles[6]",!1),yr()(e,"@MA.visibles[7]",!1),yr()(e,"@MA.visibles[8]",!1),yr()(e,"@MA.visibles[9]",!1),yr()(e,"@EMA.periods[0]",7),yr()(e,"@EMA.periods[1]",25),yr()(e,"@EMA.periods[2]",99),yr()(e,"@EMA.periods[3]",0),yr()(e,"@EMA.periods[4]",0),yr()(e,"@EMA.periods[5]",0),yr()(e,"@EMA.periods[6]",0),yr()(e,"@EMA.periods[7]",0),yr()(e,"@EMA.periods[8]",0),yr()(e,"@EMA.periods[9]",0),yr()(e,"@EMA.sources[0]","close"),yr()(e,"@EMA.sources[1]","close"),yr()(e,"@EMA.sources[2]","close"),yr()(e,"@EMA.sources[3]","close"),yr()(e,"@EMA.sources[4]","close"),yr()(e,"@EMA.sources[5]","close"),yr()(e,"@EMA.sources[6]","close"),yr()(e,"@EMA.sources[7]","close"),yr()(e,"@EMA.sources[8]","close"),yr()(e,"@EMA.sources[9]","close"),yr()(e,"@EMA.lineWidths[0]",1),yr()(e,"@EMA.lineWidths[1]",1),yr()(e,"@EMA.lineWidths[2]",1),yr()(e,"@EMA.lineWidths[3]",1),yr()(e,"@EMA.lineWidths[4]",1),yr()(e,"@EMA.lineWidths[5]",1),yr()(e,"@EMA.lineWidths[6]",1),yr()(e,"@EMA.lineWidths[7]",1),yr()(e,"@EMA.lineWidths[8]",1),yr()(e,"@EMA.lineWidths[9]",1),yr()(e,"@EMA.colors[0]","rgba(241, 156, 56, 0.7)"),yr()(e,"@EMA.colors[1]","rgba(234, 61, 247, 0.7)"),yr()(e,"@EMA.colors[2]","rgba(116, 252, 253, 0.7)"),yr()(e,"@EMA.colors[3]","rgba(139, 43, 246, 0.7)"),yr()(e,"@EMA.colors[4]","rgba(0, 32, 245, 0.7)"),yr()(e,"@EMA.colors[5]","rgba(234, 51, 35, 0.7)"),yr()(e,"@EMA.colors[6]","rgba(87, 134, 224, 0.7)"),yr()(e,"@EMA.colors[7]","rgba(255, 254, 85, 0.7)"),yr()(e,"@EMA.colors[8]","rgba(117, 250, 76, 0.7)"),yr()(e,"@EMA.colors[9]","rgba(138, 26, 16, 0.7)"),yr()(e,"@EMA.visibles[0]",!0),yr()(e,"@EMA.visibles[1]",!0),yr()(e,"@EMA.visibles[2]",!0),yr()(e,"@EMA.visibles[3]",!1),yr()(e,"@EMA.visibles[4]",!1),yr()(e,"@EMA.visibles[5]",!1),yr()(e,"@EMA.visibles[6]",!1),yr()(e,"@EMA.visibles[7]",!1),yr()(e,"@EMA.visibles[8]",!1),yr()(e,"@EMA.visibles[9]",!1),yr()(e,"@WMA.periods[0]",7),yr()(e,"@WMA.periods[1]",25),yr()(e,"@WMA.periods[2]",99),yr()(e,"@WMA.periods[3]",0),yr()(e,"@WMA.periods[4]",0),yr()(e,"@WMA.periods[5]",0),yr()(e,"@WMA.periods[6]",0),yr()(e,"@WMA.periods[7]",0),yr()(e,"@WMA.periods[8]",0),yr()(e,"@WMA.periods[9]",0),yr()(e,"@WMA.sources[0]","close"),yr()(e,"@WMA.sources[1]","close"),yr()(e,"@WMA.sources[2]","close"),yr()(e,"@WMA.sources[3]","close"),yr()(e,"@WMA.sources[4]","close"),yr()(e,"@WMA.sources[5]","close"),yr()(e,"@WMA.sources[6]","close"),yr()(e,"@WMA.sources[7]","close"),yr()(e,"@WMA.sources[8]","close"),yr()(e,"@WMA.sources[9]","close"),yr()(e,"@WMA.lineWidths[0]",1),yr()(e,"@WMA.lineWidths[1]",1),yr()(e,"@WMA.lineWidths[2]",1),yr()(e,"@WMA.lineWidths[3]",1),yr()(e,"@WMA.lineWidths[4]",1),yr()(e,"@WMA.lineWidths[5]",1),yr()(e,"@WMA.lineWidths[6]",1),yr()(e,"@WMA.lineWidths[7]",1),yr()(e,"@WMA.lineWidths[8]",1),yr()(e,"@WMA.lineWidths[9]",1),yr()(e,"@WMA.colors[0]","rgba(241, 156, 56, 0.7)"),yr()(e,"@WMA.colors[1]","rgba(234, 61, 247, 0.7)"),yr()(e,"@WMA.colors[2]","rgba(116, 252, 253, 0.7)"),yr()(e,"@WMA.colors[3]","rgba(139, 43, 246, 0.7)"),yr()(e,"@WMA.colors[4]","rgba(0, 32, 245, 0.7)"),yr()(e,"@WMA.colors[5]","rgba(234, 51, 35, 0.7)"),yr()(e,"@WMA.colors[6]","rgba(87, 134, 224, 0.7)"),yr()(e,"@WMA.colors[7]","rgba(255, 254, 85, 0.7)"),yr()(e,"@WMA.colors[8]","rgba(117, 250, 76, 0.7)"),yr()(e,"@WMA.colors[9]","rgba(138, 26, 16, 0.7)"),yr()(e,"@WMA.visibles[0]",!0),yr()(e,"@WMA.visibles[1]",!0),yr()(e,"@WMA.visibles[2]",!0),yr()(e,"@WMA.visibles[3]",!1),yr()(e,"@WMA.visibles[4]",!1),yr()(e,"@WMA.visibles[5]",!1),yr()(e,"@WMA.visibles[6]",!1),yr()(e,"@WMA.visibles[7]",!1),yr()(e,"@WMA.visibles[8]",!1),yr()(e,"@WMA.visibles[9]",!1),yr()(e,"@MACD.fastPeriod",12),yr()(e,"@MACD.slowPeriod",26),yr()(e,"@MACD.signalPeriod",9),yr()(e,"@MACD.visibles.DEA",!0),yr()(e,"@MACD.visibles.DIF",!0),yr()(e,"@MACD.visibles.MACD",!0),yr()(e,"@MACD.lineWidths.DEA",1),yr()(e,"@MACD.lineWidths.DIF",1),yr()(e,"@MACD.colors.DEA","rgba(234, 61, 247, 0.7)"),yr()(e,"@MACD.colors.DIF","rgba(116, 252, 253, 0.7)"),yr()(e,"@VOL.period",0),yr()(e,"@VOL.maColor","rgba(14, 203, 129, 0.5)"),yr()(e,"@VOL.visibles[0]",!1),yr()(e,"@TRIX.period",9),yr()(e,"@TRIX.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@TRIX.lineWidth",1),yr()(e,"@Stoch RSI.rsiPeriod",14),yr()(e,"@Stoch RSI.stochasticPeriod",14),yr()(e,"@Stoch RSI.kPeriod",3),yr()(e,"@Stoch RSI.dPeriod",3),yr()(e,"@Stoch RSI.visibles.smoothK",!0),yr()(e,"@Stoch RSI.visibles.smoothD",!0),yr()(e,"@Stoch RSI.lineWidths.smoothK",1),yr()(e,"@Stoch RSI.lineWidths.smoothD",1),yr()(e,"@Stoch RSI.colors.smoothK","rgba(234, 61, 247, 0.7)"),yr()(e,"@Stoch RSI.colors.smoothD","rgba(116, 252, 253, 0.7)"),yr()(e,"@Wm %R.period",14),yr()(e,"@Wm %R.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@Wm %R.lineWidth",1),yr()(e,"@MTM.period",14),yr()(e,"@MTM.source","close"),yr()(e,"@MTM.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@MTM.lineWidth",1),yr()(e,"@DMI.period",14),yr()(e,"@DMI.visibles.pDI",!0),yr()(e,"@DMI.visibles.nDI",!0),yr()(e,"@DMI.visibles.dx",!0),yr()(e,"@DMI.lineWidths.pDI",1),yr()(e,"@DMI.lineWidths.nDI",1),yr()(e,"@DMI.lineWidths.dx",1),yr()(e,"@DMI.colors.pDI","rgba(234, 61, 247, 0.7)"),yr()(e,"@DMI.colors.nDI","rgba(116, 252, 253, 0.7)"),yr()(e,"@DMI.colors.dx","rgba(241, 156, 56, 0.7)"),yr()(e,"@EMV.period",14),yr()(e,"@EMV.x",1e4),yr()(e,"@EMV.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@EMV.lineWidth",1),yr()(e,"@SAR.step",.02),yr()(e,"@SAR.x",.2),yr()(e,"@SAR.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@RSI.periods[0]",6),yr()(e,"@RSI.periods[1]",12),yr()(e,"@RSI.periods[2]",24),yr()(e,"@RSI.lineWidths[0]",1),yr()(e,"@RSI.lineWidths[1]",1),yr()(e,"@RSI.lineWidths[2]",1),yr()(e,"@RSI.colors[0]","rgba(234, 61, 247, 0.7)"),yr()(e,"@RSI.colors[1]","rgba(116, 252, 253, 0.7)"),yr()(e,"@RSI.colors[2]","rgba(241, 156, 56, 0.7)"),yr()(e,"@RSI.visibles[0]",!0),yr()(e,"@RSI.visibles[1]",!0),yr()(e,"@RSI.visibles[2]",!0),yr()(e,"@CCI.period",9),yr()(e,"@CCI.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@CCI.lineWidth",1),yr()(e,"@KDJ.period[0]",9),yr()(e,"@KDJ.period[1]",3),yr()(e,"@KDJ.period[2]",3),yr()(e,"@KDJ.lineWidths[0]",1),yr()(e,"@KDJ.lineWidths[1]",1),yr()(e,"@KDJ.lineWidths[2]",1),yr()(e,"@KDJ.colors[0]","rgba(234, 61, 247, 0.7)"),yr()(e,"@KDJ.colors[1]","rgba(116, 252, 253, 0.7)"),yr()(e,"@KDJ.colors[2]","rgba(241, 156, 56, 0.7)"),yr()(e,"@KDJ.visibles[0]",!0),yr()(e,"@KDJ.visibles[1]",!0),yr()(e,"@KDJ.visibles[2]",!0),yr()(e,"@OBV.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@OBV.lineWidth",1),yr()(e,"@BOLL.period",21),yr()(e,"@BOLL.stdDev",2),yr()(e,"@BOLL.lineWidths[0]",1),yr()(e,"@BOLL.lineWidths[1]",1),yr()(e,"@BOLL.lineWidths[2]",1),yr()(e,"@BOLL.colors[0]","rgba(116, 252, 253, 0.7)"),yr()(e,"@BOLL.colors[1]","rgba(234, 61, 247, 0.7)"),yr()(e,"@BOLL.colors[2]","rgba(116, 252, 253, 0.7)"),yr()(e,"@BOLL.visibles[0]",!0),yr()(e,"@BOLL.visibles[1]",!0),yr()(e,"@BOLL.visibles[2]",!0),yr()(e,"@VWAP.period",14),yr()(e,"@VWAP.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@VWAP.lineWidth",1),yr()(e,"@AVL.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@AVL.lineWidth",1),yr()(e,"@OI-UM.bar.color","rgba(14, 203, 129, 0.7)"),yr()(e,"@OI-UM.nv.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@OI-UM.nv.lineWidth",1),yr()(e,"@OI-CM.bar.color","rgba(14, 203, 129, 0.7)"),yr()(e,"@LS-Acco.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@LS-Acco.lineWidth",1),yr()(e,"@LS-Posit.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@LS-Posit.lineWidth",1),yr()(e,"@LS-Ratio.color","rgba(241, 156, 56, 0.7)"),yr()(e,"@LS-Ratio.lineWidth",1),yr()(e,"@Basis.basisColor","rgba(241, 156, 56, 0.7)"),yr()(e,"@Basis.futurePriceColor","rgba(234, 51, 35, 0.7)"),yr()(e,"@Basis.priceIndexColor","rgba(117, 250, 76, 0.7)"),e}(),this._namespace=e}return e.prototype.loadStoreValue=function(){return(0,c.__awaiter)(this,void 0,void 0,(function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,ui().createInstance({name:this._namespace}).getItem(this._storeKey)];case 1:return(e=t.sent())?this._storeValue=e:(this._storeValue=this._defaultValue,this._restoreValue()),[2]}}))}))},e.prototype._restoreValue=function(){ui().createInstance({name:this._namespace}).setItem(this._storeKey,this._storeValue)},e.prototype.getValues=function(){return this._storeValue},e.prototype.getValue=function(e){return js()(this._storeValue,e)?br()(this._storeValue,e):br()(this._defaultValue,e)},e.prototype.getDefaultValue=function(e){return br()(this._defaultValue,e)},e.prototype.setValue=function(e,t){yr()(this._storeValue,e,t),this._restoreValue()},e.prototype.setValues=function(e){var t=this;Ni(e)&&(Object.keys(e).forEach((function(i){yr()(t._storeValue,i,Sn()(e[i]))})),this._restoreValue())},e.prototype.getMADescriptions=function(e){var t=this;return void 0===e&&(e="MA"),(0,c.__spread)(Array(10).keys()).map((function(i){return{label:""+e+(i+1),periodsKey:"@"+e+".periods["+i+"]",sourcesKey:"@"+e+".sources["+i+"]",colorsKey:"@"+e+".colors["+i+"]",lineWidthsKey:"@"+e+".lineWidths["+i+"]",visiblesKey:"@"+e+".visibles["+i+"]",period:t.getValue("@"+e+".periods["+i+"]"),source:t.getValue("@"+e+".sources["+i+"]"),color:t.getValue("@"+e+".colors["+i+"]"),lineWidth:t.getValue("@"+e+".lineWidths["+i+"]"),visible:!!t.getValue("@"+e+".visibles["+i+"]")}}))},e.prototype.getMACDDescriptions=function(){return{fastLabel:"Fast Length",slowLabel:"Slow Length",signalLabel:"Signal Length",fastKey:"@MACD.fastPeriod",slowKey:"@MACD.slowPeriod",signalKey:"@MACD.signalPeriod",fastLength:this.getValue("@MACD.fastPeriod"),slowLength:this.getValue("@MACD.slowPeriod"),signalLength:this.getValue("@MACD.signalPeriod"),deaLabel:"DEA",difLabel:"DIF",macdLabel:"MACD",deaVisibleKey:"@MACD.visibles.DEA",deaVisible:this.getValue("@MACD.visibles.DEA"),difVisibleKey:"@MACD.visibles.DIF",difVisible:this.getValue("@MACD.visibles.DIF"),macdVisibleKey:"@MACD.visibles.MACD",macdVisible:this.getValue("@MACD.visibles.MACD"),deaColorKey:"@MACD.colors.DEA",deaColor:this.getValue("@MACD.colors.DEA"),difColorKey:"@MACD.colors.DIF",difColor:this.getValue("@MACD.colors.DIF"),deaLineWidthKey:"@MACD.lineWidths.DEA",deaLineWidth:this.getValue("@MACD.lineWidths.DEA"),difLineWidthKey:"@MACD.lineWidths.DIF",difLineWidth:this.getValue("@MACD.lineWidths.DIF")}},e.prototype.getVOLDescriptions=function(){return{periodLabel:"Period",periodKey:"@VOL.period",period:this.getValue("@VOL.period"),maColorKey:"@VOL.maColor",maColor:this.getValue("@VOL.maColor")}},e.prototype.getTRIXDescriptions=function(e){return void 0===e&&(e="@TRIX"),{periodLabel:"Length",periodKey:e+".period",period:this.getValue(e+".period"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getStochRSIDescriptions=function(){return{rsiPeriodLabel:"Length RSI",rsiPeriodKey:"@Stoch RSI.rsiPeriod",rsiPeriod:this.getValue("@Stoch RSI.rsiPeriod"),stochasticPeriodLabel:"Length Stoch",stochasticPeriodKey:"@Stoch RSI.stochasticPeriod",stochasticPeriod:this.getValue("@Stoch RSI.stochasticPeriod"),smoothKPeriodLabel:"Smooth K",smoothKLabel:"K%",smoothKPeriod:this.getValue("@Stoch RSI.kPeriod"),smoothKPeriodKey:"@Stoch RSI.kPeriod",smoothKVisible:this.getValue("@Stoch RSI.visibles.smoothK"),smoothKVisibleKey:"@Stoch RSI.visibles.smoothK",smoothKLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothK"),smoothKLineWidthKey:"@Stoch RSI.lineWidths.smoothK",smoothKColor:this.getValue("@Stoch RSI.colors.smoothK"),smoothKColorKey:"@Stoch RSI.colors.smoothK",smoothDPeriodLabel:"Smooth D",smoothDLabel:"D%",smoothDPeriod:this.getValue("@Stoch RSI.dPeriod"),smoothDPeriodKey:"@Stoch RSI.dPeriod",smoothDVisible:this.getValue("@Stoch RSI.visibles.smoothD"),smoothDVisibleKey:"@Stoch RSI.visibles.smoothD",smoothDLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothD"),smoothDLineWidthKey:"@Stoch RSI.lineWidths.smoothD",smoothDColor:this.getValue("@Stoch RSI.colors.smoothD"),smoothDColorKey:"@Stoch RSI.colors.smoothD"}},e.prototype.getWRDescriptions=function(){return this.getTRIXDescriptions("@Wm %R")},e.prototype.getMTMDescriptions=function(e){return void 0===e&&(e="@MTM"),{periodLabel:"Length",periodKey:e+".period",period:this.getValue(e+".period"),sourceKey:e+".source",source:this.getValue(e+".source"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getDMIDescriptions=function(e){return void 0===e&&(e="@DMI"),{periodLabel:"Length",periodKey:e+".period",period:this.getValue(e+".period"),pDILabel:"+DI",pDIVisibleKey:e+".visibles.pDI",pDILineWidthKey:e+".lineWidths.pDI",pDIColorKey:e+".colors.pDI",pDIVisible:this.getValue(e+".visibles.pDI"),pDILineWidth:this.getValue(e+".lineWidths.pDI"),pDIColor:this.getValue(e+".colors.pDI"),nDILabel:"-DI",nDIVisibleKey:e+".visibles.nDI",nDILineWidthKey:e+".lineWidths.nDI",nDIColorKey:e+".colors.nDI",nDIVisible:this.getValue(e+".visibles.nDI"),nDILineWidth:this.getValue(e+".lineWidths.nDI"),nDIColor:this.getValue(e+".colors.nDI"),dxLabel:"ADX",dxVisibleKey:e+".visibles.dx",dxLineWidthKey:e+".lineWidths.dx",dxColorKey:e+".colors.dx",dxVisible:this.getValue(e+".visibles.dx"),dxLineWidth:this.getValue(e+".lineWidths.dx"),dxColor:this.getValue(e+".colors.dx")}},e.prototype.getEMVDescriptions=function(e){return void 0===e&&(e="@EMV"),{periodLabel:"Length",periodKey:e+".period",period:this.getValue(e+".period"),colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth"),divisorLabel:"Divisor",divisor:this.getValue(e+".x"),divisorKey:e+".x"}},e.prototype.getSARDescriptions=function(e){return void 0===e&&(e="@SAR"),{startLabel:"Start",startKey:e+".step",start:this.getValue(e+".step"),colorKey:e+".color",color:this.getValue(e+".color"),colorLabel:"SAR",maxLabel:"Maximum",max:this.getValue(e+".x"),maxKey:e+".x"}},e.prototype.getRSIDescriptions=function(e){var t=this;return void 0===e&&(e="RSI"),(0,c.__spread)(Array(3).keys()).map((function(i){return{label:e,periodsKey:"@"+e+".periods["+i+"]",colorsKey:"@"+e+".colors["+i+"]",lineWidthsKey:"@"+e+".lineWidths["+i+"]",visiblesKey:"@"+e+".visibles["+i+"]",period:t.getValue("@"+e+".periods["+i+"]"),color:t.getValue("@"+e+".colors["+i+"]"),lineWidth:t.getValue("@"+e+".lineWidths["+i+"]"),visible:!!t.getValue("@"+e+".visibles["+i+"]")}}))},e.prototype.getCCIDescriptions=function(){return this.getTRIXDescriptions("@CCI")},e.prototype.getKDJDescriptions=function(e){return void 0===e&&(e="@KDJ"),{periodLabel:"Calculating Period",periodKey:e+".period[0]",period:this.getValue(e+".period[0]"),ma1Label:"MA Period 1",ma1Key:e+".period[1]",ma1:this.getValue(e+".period[1]"),ma2Label:"MA Period 2",ma2Key:e+".period[2]",ma2:this.getValue(e+".period[2]"),kLabel:"K",kVisible:this.getValue(e+".visibles[0]"),kVisibleKey:e+".visibles[0]",kLineWidth:this.getValue(e+".lineWidths[0]"),kLineWidthKey:e+".lineWidths[0]",kColor:this.getValue(e+".colors[0]"),kColorKey:e+".colors[0]",dLabel:"D",dVisible:this.getValue(e+".visibles[1]"),dVisibleKey:e+".visibles[1]",dLineWidth:this.getValue(e+".lineWidths[1]"),dLineWidthKey:e+".lineWidths[1]",dColor:this.getValue(e+".colors[1]"),dColorKey:e+".colors[1]",jLabel:"J",jVisible:this.getValue(e+".visibles[2]"),jVisibleKey:e+".visibles[2]",jLineWidth:this.getValue(e+".lineWidths[2]"),jLineWidthKey:e+".lineWidths[2]",jColor:this.getValue(e+".colors[2]"),jColorKey:e+".colors[2]"}},e.prototype.getOBVDescriptions=function(e){return void 0===e&&(e="@OBV"),{label:"OBV",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getBOLLDescriptions=function(e){return void 0===e&&(e="@BOLL"),{periodLabel:"Length",periodKey:e+".period",period:this.getValue(e+".period"),stdDevLabel:"Multiplier",stdDevKey:e+".stdDev",stdDev:this.getValue(e+".stdDev"),upLabel:"UP",upVisible:this.getValue(e+".visibles[0]"),upVisibleKey:e+".visibles[0]",upLineWidth:this.getValue(e+".lineWidths[0]"),upLineWidthKey:e+".lineWidths[0]",upColor:this.getValue(e+".colors[0]"),upColorKey:e+".colors[0]",mbLabel:"MB",mbVisible:this.getValue(e+".visibles[1]"),mbVisibleKey:e+".visibles[1]",mbLineWidth:this.getValue(e+".lineWidths[1]"),mbLineWidthKey:e+".lineWidths[1]",mbColor:this.getValue(e+".colors[1]"),mbColorKey:e+".colors[1]",dnLabel:"DN",dnVisible:this.getValue(e+".visibles[2]"),dnVisibleKey:e+".visibles[2]",dnLineWidth:this.getValue(e+".lineWidths[2]"),dnLineWidthKey:e+".lineWidths[2]",dnColor:this.getValue(e+".colors[2]"),dnColorKey:e+".colors[2]"}},e.prototype.getVWAPDescriptions=function(){return this.getTRIXDescriptions("@VWAP")},e.prototype.getAVLDescriptions=function(e){return void 0===e&&(e="@AVL"),{label:"AVL",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getOIUMDescriptions=function(e){return void 0===e&&(e="@OI-UM"),{oiLabel:"OI",colorKey:e+".bar.color",color:this.getValue(e+".bar.color"),nvLabel:"Notional Value of O.I.",nvLineWidthKey:e+".nv.lineWidth",nvLineWidth:this.getValue(e+".nv.lineWidth"),nvColorKey:e+".nv.color",nvColor:this.getValue(e+".nv.color")}},e.prototype.getOICMDescriptions=function(e){return void 0===e&&(e="@OI-CM"),{oiLabel:"OI",colorKey:e+".bar.color",color:this.getValue(e+".bar.color")}},e.prototype.getLSAccoDescriptions=function(e){return void 0===e&&(e="@LS-Acco"),{label:"L.S Acco.",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getLSPositDescriptions=function(e){return void 0===e&&(e="@LS-Posit"),{label:"L.S Posit.",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getLSRatioDescriptions=function(e){return void 0===e&&(e="@LS-Ratio"),{label:"L.S Ratio",colorKey:e+".color",color:this.getValue(e+".color"),lineWidthKey:e+".lineWidth",lineWidth:this.getValue(e+".lineWidth")}},e.prototype.getBasisDescriptions=function(e){return void 0===e&&(e="@Basis"),{basisLabel:"Basis",basisColorKey:e+".basisColor",basisColor:this.getValue(e+".basisColor"),futurePriceLabel:"Future Price",futurePriceColorKey:e+".futurePriceColor",futurePriceColor:this.getValue(e+".futurePriceColor"),priceIndexLabel:"Price Index",priceIndexColorKey:e+".priceIndexColor",priceIndexColor:this.getValue(e+".priceIndexColor")}},e}();var Js=["seriesData","candlestick","nextData","grid","theme","getI18n","symbol","interval","css","isHiddenBinanceLogo"],Qs=function(e,t){var i=e.getConfig(),n={},r={},o=!1;Object.keys(t).forEach((function(e){if(Js.includes(e)&&!gi()(t[e],i[e])){if(Ni(t[e])&&Ni(i[e])&&function(e,t){var i=Object.keys(t),n=bi()(e,i);return gi()(n,t)}(i[e],t[e]))return;o=!0,n[e]=t[e],r[e]=i[e]}})),o&&(e.setAttrs(on({},r,n)),e.update())};const $s=(0,h.forwardRef)((function(e,t){var i=e.seriesData,n=e.candlestick,r=e.nextData,o=e.grid,a=e.theme,s=void 0===a?bt.LIGHT:a,l=e.isShowDrawPanel,g=void 0!==l&&l,p=e.isShowCustomIndicator,f=void 0!==p&&p,m=e.isHiddenBinanceLogo,v=void 0!==m&&m,y=e.symbol,x=e.interval,b=e.getI18n,C=void 0===b?function(){return""}:b,w=e.sensorsManager,A=e.css,L=e.namespace,E=void 0===L?"chart_candlestick":L,V=(0,c.__read)((0,h.useState)(!1),2),S=V[0],M=V[1],D=(0,c.__read)((0,h.useState)(),2),T=D[0],k=D[1],I=(0,c.__read)((0,h.useState)(null),2),W=I[0],P=I[1],H=(0,c.__read)((0,h.useState)(""),2),R=H[0],B=H[1],N=(0,c.__read)(Ms({onlyKey:Et.CrossHairCursor}),2),O=N[0],Z=N[1],F=Z.updateValue,K=Z.toggleValue,z=Z.getValue,U=(0,c.__read)(Ms({visible:!1}),2),Y=U[0],X=U[1],G=X.updateValue,j=X.getValue,q=(0,c.__read)(Ms({visible:!1,allIndicators:[],selectIndicators:[]}),2),J=q[0],Q=q[1],$=Q.updateValue,ee=Q.getValue,te=(0,h.useRef)(Et.CrossHairCursor),ie=(0,h.useRef)(null),ne=(0,h.useRef)(),re=(0,h.useRef)(w);re.current=w;var oe=(0,h.useRef)();(0,h.useImperativeHandle)(t,(function(){return{getCandlestick:function(){return ne.current},registerColorTable:ae}}));var ae=(0,h.useCallback)((function(e,t){var i=ne.current;if(i&&i.registerColorTable(e,t),s===e){var n=Ys(Ti(s));n&&B(n)}}),[s]),se=(0,h.useCallback)((function(e,t){return void 0===t&&(t=""),C(e,{defaultValue:t||e})||t}),[C]),le=(0,h.useMemo)((function(){return{seriesData:i,candlestick:n,nextData:r,grid:o,symbol:y,interval:x,theme:s.toLowerCase(),isHiddenBinanceLogo:v}}),[i,n,r,s,o,y,x,v]),ce=(0,h.useCallback)((function(e,t){void 0===t&&(t=!1);var i=ne.current;t?null===i||void 0===i||i.updateIndicatorParams(e):(null===i||void 0===i||i.updateTitle(e),null===i||void 0===i||i.update())}),[]),he=(0,h.useCallback)((function(e){if(ee("visible")!==e){var t=ne.current;t&&t.fire("indicatorDialogVisibleChange",{data:e})}$({visible:e})}),[]),ue=(0,h.useCallback)((function(e){var t=e.id,i=e.name,n=e.isCustom,r=e.isMain,o=void 0!==r&&r,a=ne.current;if(a){if(n)return void a.fire("customIndicatorClick",{data:{id:t,name:i,isMain:o}});a.hasIndicatorByName(t)?a.closeIndicatorByName(t):a.addIndicatorByName(t)}}),[]),de=(0,h.useCallback)((function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=ne.current;if(r){var o=((t={})[Mt.ADD]=r.getAttr("onAddCustomIndicator"),t[Mt.EDIT]=r.getAttr("onEditCustomIndicator"),t[Mt.REMOVE]=r.getAttr("onRemoveCustomIndicator"),t),a=o[e];a&&a.apply(null,i)}}),[]),ge=(0,h.useCallback)((function(e,t){var i,n,r=ne.current;if(t===Cs.MENU_CURSOR&&(te.current=e),r){var o=r.getEditor();switch(t){case Cs.MENU_CURSOR:!!z(Et.ToggleVisible)&&r.toggleAnnotationsVisible(),F(((i={onlyKey:e})[Et.ToggleVisible]=!1,i)),j("visible")&&j("cacheKey")&&G({visible:!1}),o.reset();break;case Cs.MENU_TOOLS:!!z(Et.ToggleVisible)&&r.toggleAnnotationsVisible(),!!z(Et.LockDraw)&&r.setAnnotationLockStatus(!1),F(((n={onlyKey:e})[Et.ToggleVisible]=!1,n[Et.LockDraw]=!1,n)),o.setCompleteDrawCallback((function(){!!z(Et.KeepDrawing)||(F({onlyKey:te.current}),r.executeActionByType(te.current))})),G({visible:!0,cacheKey:e,annotation:void 0});break;case Cs.MENU_CONTROL:K(e),e===Et.ToggleVisible&&(F({onlyKey:te.current}),r.executeActionByType(te.current));break;case Cs.MENU_HANDLER:o.setCompleteDrawCallback((function(){!!z(Et.KeepDrawing)||(F({onlyKey:te.current}),r.executeActionByType(te.current))}))}r.executeActionByType(e)}}),[]);return Xs((function(){var e=Ys(Ti(s));e&&B(e),No.dragVertex.setAttr("fillStyle",Ti(s)),No.dragRect.setAttr("fillStyle",Ti(s)),No.text.setAttr("fillStyle",function(e,t){return(Di[e.toLocaleLowerCase()]||{})[t]}(s,"text.defaultColor"))}),[s]),(0,h.useLayoutEffect)((function(){if(E){oe.current=new qs(E);(0,c.__awaiter)(void 0,void 0,void 0,(function(){var e,t,i;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,null===(e=oe.current)||void 0===e?void 0:e.loadStoreValue()];case 1:return n.sent(),null===(t=ne.current)||void 0===t||t.registerModule(Hi,oe.current),null===(i=ne.current)||void 0===i||i.update(),[2]}}))}))}}),[E]),(0,h.useEffect)((function(){var e=ne.current;e&&e.registerI18n(se)}),[se]),(0,h.useEffect)((function(){var e=ne.current;setTimeout((function(){e&&e.resize()}))}),[]),Xs((function(){var e={};if(Js.forEach((function(t){void 0!==le[t]&&(e[t]=le[t])})),ne.current)Qs(ne.current,e);else{ne.current=new ua((0,c.__assign)({container:ie.current},e));var t=ne.current;t.registerModule(Hi,oe.current),t.on("showParamsSettingPanel",(function(e){var t=e.id;k(t),M(!0)})),t.on("selectAnnotation",(function(e){var t=e.data;G({annotation:t,visible:!0,cacheKey:void 0})})),t.on("unSelectAnnotation",(function(){G({annotation:void 0,visible:!1})})),t.on("showIndicatorDialog",(function(){he(!ee("visible"))})),t.on("allIndicatorsChange",(function(e){var t=e.data;$({allIndicators:t})})),t.on("selectIndicatorsChange",(function(e){var t=e.data.map((function(e){return e.id}));$({selectIndicators:t})})),t.on("dispatchErrorData",(function(e){var t,i,n=e.data;null===(i=null===(t=re.current)||void 0===t?void 0:t.logOnErrorData)||void 0===i||i.call(t,n)})),$({allIndicators:t.getAllIndicators(),selectIndicators:t.getSelectIndicators().map((function(e){return e.name}))}),e.seriesData&&e.seriesData.length>0&&t.update()}}),[le]),u().createElement(u().Fragment,null,u().createElement("style",null,R+"\n"+A),u().createElement(d.Z,{ref:P,className:"kline-wrap "+s,style:e.style,dir:"ltr"},g&&W&&u().createElement(Vs,{actionState:O,wrapRef:W,handleClick:ge,getI18n:se}),u().createElement(_.Z,{ref:ie,className:"kline-container"},S&&!!oe.current&&u().createElement(_s,{visible:S,isShowCustomIndicator:f,setVisible:M,getI18n:se,activeIndicatorId:T||"",updateIndicator:ce,selectIndicator:ue,settingManager:oe.current,selectedIndicators:J.selectIndicators,allIndicators:J.allIndicators,handleIndicator:de})),u().createElement(Bs,(0,c.__assign)({wrapRef:ie},Y,{getI18n:se})),f?u().createElement(Us,(0,c.__assign)({},J,{setVisible:he,selectIndicator:ue,handleIndicator:de,getI18n:se,wrapRef:ie})):u().createElement(zs,(0,c.__assign)({},J,{setVisible:he,selectIndicator:ue,handleIndicator:de,getI18n:se,wrapRef:ie}))))}));var el=function(){function e(){this._seriesData=[],this.interval="",this.isLoadAll=!1}return e.prototype.setDataProvider=function(e){return this._dataProvider=e,this},e.prototype.setInterval=function(e){return e&&!ha()(this.interval,e)&&(this.interval=e,this._clearData()),this},e.prototype.setSymbol=function(e){return e&&!ha()(this.symbol,e)&&(this.symbol=e,this._clearData()),this},e.prototype.setLoadCallback=function(e){this._loadCallbak=e},e.prototype.triggerLoading=function(e){this._loadCallbak&&this._loadCallbak(e)},e.prototype.getCleanDatas=function(e){var t={};return e.filter((function(e){var i=e.time;return!t[i]&&(t[i]=1,!0)})).sort((function(e,t){return e.time-t.time}))},e.prototype.getData=function(e,t,i){return void 0===e&&(e={}),void 0===i&&(i=!1),(0,c.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s,l,h,u=this;return(0,c.__generator)(this,(function(d){n=this._dataProvider,o=(r=this).interval,a=r.symbol,s=e.startTime,l=e.endTime,h=this._getSyncParams(),s&&l&&l>s&&(h=(0,c.__assign)((0,c.__assign)({},h),{startTime:s,endTime:l,limit:Math.ceil((l-s)/Pi(o))}));try{o&&a&&(n.getData||n.getBarDatas).call(n,h,(function(e){var n=e.data,r=void 0===n?[]:n,s=e.isLoadAll;u._isSync({interval:o,symbol:a})&&(u.isLoadAll=u.isLoadAll||s,r.length>0&&(u._seriesData=i?u.getCleanDatas(r):u.getCleanDatas(u._seriesData.concat(r)),t(u._seriesData)))}))}catch(g){console.error("basicKline getData occured error: "+g.message)}return[2]}))}))},e.prototype.subcribe=function(e){var t=this,i=this._dataProvider,n=this.interval,r=this.symbol;n&&r&&(i.subscribe||i.subcribe).call(i,this._getSyncParams(),(function(i){t._isSync({interval:n,symbol:r})&&e(i)}))},e.prototype.unSubcribe=function(){(this._dataProvider.unsubscribe||this._dataProvider.unSubcribe).call(this._dataProvider,this._getSyncParams())},e.prototype._clearData=function(){this._seriesData.length=0,this.isLoadAll=!1},e.prototype._getSyncParams=function(){return{interval:this.interval,symbol:this.symbol}},e.prototype._isSync=function(e){var t=e.interval,i=e.symbol;return ha()(t,this.interval)&&ha()(i,this.symbol)},e}();var tl="BASIC-KLINE",il=function(){var e,t=!1,i={resolve:function(){if(t)throw new Error("Delayed value is provided before asking, this should not happen!")},get:function(){return new Promise((function(n,r){t=!0,i.resolve=function(t){n(t),clearTimeout(e)},e=setTimeout((function(){r("No value available after waiting for 3s")}),3e3)}))}};return i}();const nl=(0,h.forwardRef)((function(e,t){var i=e.dataProvider,n=e.interval,r=e.symbol,o=e.setLoading,a=e.baseAsset,s=void 0===a?"":a,l=e.quoteAsset,d=void 0===l?"":l,g=e.namespace,p=e.isStock,f=void 0!==p&&p,m=e.customTheme,v=e.sensorsManager,y=e.storeSymbol,x=void 0===y?"":y,b=e.onDataArrived,_=(0,c.__rest)(e,["dataProvider","interval","symbol","setLoading","baseAsset","quoteAsset","namespace","isStock","customTheme","sensorsManager","storeSymbol","onDataArrived"]),C=(0,c.__read)((0,h.useState)(new el),1)[0],w=(0,c.__read)((0,h.useState)([]),2),A=w[0],L=w[1],E=(0,c.__read)((0,h.useState)([]),2),V=E[0],S=E[1],M=(0,h.useRef)(null),D=(0,h.useRef)(r),T=(0,h.useRef)(v),k=(0,h.useRef)();T.current=v;var I=(0,h.useMemo)((function(){var t;return null===(t=e.candlestick)||void 0===t?void 0:t.type}),[e.candlestick]),W=(0,h.useMemo)((function(){if(g){var e=ui().createInstance({name:g}),t="BASIC_KLINE_INDICATOR",i=Ni(r)?"BASIC_KLINE_"+function(e){var t=Object.keys(e);return JSON.stringify(t.sort().reduce((function(t,i){return t[i]=e[i],t}),{}))}(r):"BASIC_KLINE_"+r;return{getValue:function(){return Promise.all([new Promise((function(t,i){var n=localStorage.getItem(g+"-kline-indicators");n&&void 0!==x||t(void 0);var r=n?JSON.parse(n):"";Array.isArray(r)||t(void 0),e.getItem(g+"_"+x+"_annotations").then((function(e){r[0].annotations=Array.isArray(e)?e:[],t(r),localStorage.removeItem(g+"-kline-indicators")})).catch((function(e){i([])}))})).catch((function(e){console.error("get previous store data occured error: "+e.message)})),e.getItem(t),e.getItem(i)]).then((function(e){var t=(0,c.__read)(e,3),i=t[0],n=t[1],r=void 0===n?[]:n,o=t[2],a=void 0===o?[]:o;try{return Array.isArray(i)?i:(r=r||[{type:"CANDLE",indicators:[{type:"MA",id:"@MA"}]},{type:"VOL",indicators:[{type:"VOL",id:"@VOL"}]}]).map((function(e,t){var i,n=e.type,r=e.indicators,o=void 0===r?[]:r;return o.forEach((function(e){e.id||(e.id="@"+e.type)})),{annotations:(null===(i=null===a||void 0===a?void 0:a[t])||void 0===i?void 0:i.annotations)||[],type:n,indicators:o}}))}catch(s){return console.error("get previous data occured error: "+s.message),[]}}))},setValue:function(n){var r=n.reduce((function(e,t){return e.indicators.push({type:t.type,indicators:t.indicators}),e.annotations.push({type:t.type,annotations:(null===t||void 0===t?void 0:t.annotations)||[]}),e}),{indicators:[],annotations:[]}),o=r.indicators,a=r.annotations;!function(i){e.setItem(t,i)}(o),function(t){e.setItem(i,t)}(a)},clear:function(){return e.clear()}}}}),[g,r,x]);return(0,h.useLayoutEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.getCandlestick();k.current!==g&&(null===t||void 0===t||t.setAttr("needToReloadIndicator",!0),k.current=g)}),[g]),(0,h.useImperativeHandle)(t,(function(){return{getCandlestick:function(){var e;return null===(e=M.current)||void 0===e?void 0:e.getCandlestick()},getStoredData:function(){return il.get()}}})),(0,h.useEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.getCandlestick();f&&(null===t||void 0===t||t.removeVolIndicators())}),[f]),(0,h.useEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.registerColorTable;t&&m&&Object.keys(m).forEach((function(e){t(e,m[e])}))}),[m]),(0,h.useEffect)((function(){var e;o&&((e=o)&&"[object Function]"===Object.prototype.toString.call(e))?C.setLoadCallback(o):C.setLoadCallback((function(){}))}),[o]),(0,h.useEffect)((function(){var e,t,o=!1,a=T.current;C.setDataProvider(i).setInterval(n).setSymbol(r);var s=!gi()(D.current,r);try{C.triggerLoading(!0),null===(e=null===a||void 0===a?void 0:a.logOnFetchStart)||void 0===e||e.call(a),C.getData({},(function(e){var t;null===(t=null===a||void 0===a?void 0:a.logOnFetchEnd)||void 0===t||t.call(a),o||(L(e),s||C.triggerLoading(!1))}),!0)}catch(h){console.error("basic kline fetch data occured error: "+h.message),s||C.triggerLoading(!1)}C.subcribe((function(e){o||(null===b||void 0===b||b(e),S([(0,c.__assign)({},e)]))}));var l=null===(t=M.current)||void 0===t?void 0:t.getCandlestick();return s&&(null===l||void 0===l||l.resetChart()),D.current=r,function(){o=!0,C.unSubcribe()}}),[n,r,i]),(0,h.useEffect)((function(){var e,t=!1,i=T.current,n=null===(e=M.current)||void 0===e?void 0:e.getCandlestick();return null===n||void 0===n||n.on("afterTimeShifted",tl,nn((function(e){var t=e.minTime,i=e.shiftedMinTime;C.isLoadAll||t-i>Pi(C.interval)&&C.getData({startTime:i,endTime:t-1},(function(e){L(e)}))}),100)),W&&(null===n||void 0===n||n.on("saveChartNeeded",tl,(function(e){var i=e.data,n=void 0===i?[]:i;!t&&W.setValue(n)}))),null===n||void 0===n||n.on("chartReady",tl,(function(){var e;null===(e=null===i||void 0===i?void 0:i.logOnKlineReady)||void 0===e||e.call(i),t||(W?W.getValue().then((function(e){il.resolve(e),t||null===n||void 0===n||n.loadChart(e||[]).then((function(e){var t;null===(t=null===i||void 0===i?void 0:i.logOnCatchChart)||void 0===t||t.call(i,e),null===n||void 0===n||n.setAttr("needToReloadIndicator",!1),C.triggerLoading(!1)})).catch((function(){console.error("kline load chart occured error"),W.clear(),C.triggerLoading(!1)}))})):C.triggerLoading(!1))})),function(){null===n||void 0===n||n.off("afterTimeShifted",tl),null===n||void 0===n||n.off("saveChartNeeded",tl),null===n||void 0===n||n.off("chartReady",tl),t=!0}}),[W]),(0,h.useEffect)((function(){var e=!1;return(0,c.__awaiter)(void 0,void 0,void 0,(function(){var t,i,n,r,o;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return W&&I?(t=null===(n=M.current)||void 0===n?void 0:n.getCandlestick(),[4,W.getValue()]):[2];case 1:return i=a.sent()||[],e||(I.toUpperCase()===At.Line?null===(r=i[0])||void 0===r||r.indicators.forEach((function(e){var i=e.type,n=e.isTriggeredByClick,r=e.visible;null===t||void 0===t||t.setIndicatorVisibleByName(i,!(!n||!r))})):null===(o=i[0])||void 0===o||o.indicators.forEach((function(e){var i=e.type,n=e.isTriggeredByClick,r=e.visible;null===t||void 0===t||t.setIndicatorVisibleByName(i,!n||!!r)}))),[2]}}))})),function(){e=!0}}),[I,W]),(0,h.useEffect)((function(){var e,t=null===(e=M.current)||void 0===e?void 0:e.getCandlestick();null===t||void 0===t||t.setSymbolInfo({baseAsset:s,quoteAsset:d})}),[s,d]),u().createElement($s,(0,c.__assign)({},_,{ref:M,seriesData:A,nextData:V,symbol:r,interval:n,namespace:g,sensorsManager:v}))}));var rl={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},ol={int:"INT",float:"FLOAT",source:"SOURCE"},al=function(e,t){var i=function(e,t){for(var i,n=0,r=e.length;n<r;){var o=t(e[i=Math.floor((r+n)/2)]);if(o<0&&(r=i),0===o)return i;o>0&&(n=i+1)}return Math.floor((r+n)/2)}(e,(function(e){var i=e.time;return t-i}));return e[i]&&e[i].time===t?e[i]:void 0};var sl=function(e,t){return{defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult:function(t,i,n){var r=this;void 0===i&&(i={});var o=-1;this.paramMetas=[],e.ChartInterface.Chart.input=function(e){return-1===o&&(r.paramMetas=[]),o++,r.paramMetas.push({key:"params"+o,label:e.title,type:ol[e.type],defaultValue:e.defval}),i["params"+o]||e.defval};try{e.runSync(t)}catch(h){console.warn(h.message),e.setErrors((function(e){return(0,c.__spread)(e,[h.message])}))}var a=[],s=e.ChartInterface.Chart&&e.ChartInterface.Chart.plots||{},l=e.ChartInterface.Chart&&e.ChartInterface.Chart.fills||[];Object.keys(s).forEach((function(e){var i=s[e],n=i.series||[],r=(0,c.__read)(function(e,t){return t.map((function(t){var i=e.length-t.length;return t.map((function(t,n){return{time:e[n+i].time,value:t}}))}))}(t,[n]),1)[0],o=rl[i.style];switch(o){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(l).forEach((function(e){var t=l[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(r))}));case"CROSSLINE":a.push({data:r,colors:i.color,transp:i.transp||0,chartType:o,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}})),Object.keys(l).forEach((function(e){var t=l[e];a.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})})),n(a)},updateResult:function(i,n,r){var o=t();if(o){try{e.update(o)}catch(s){console.warn(s)}var a=e.ChartInterface.Chart&&e.ChartInterface.Chart.plots||{};return Object.keys(a).forEach((function(e,t){var r=a[e];n[t].data[i]=n[t].data[i]||{},n[t].data[i].time=o.time,n[t].data[i].value=r.series[i],n[t].colors=r.color})),n}},getLabel:function(e,t,i){var n=this,r=[];return 0===this.paramMetas.length?r.push({label:(this.defaultProps.title||"")+"()",key:"title",styles:{paddingRight:"0px"}}):r.push({label:(this.defaultProps.title||"")+"(",key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach((function(e,t){var o,a=null===(o=n.paramMetas.find((function(e){return e.key==="params"+t})))||void 0===o?void 0:o.defaultValue;r.push({label:t===n.paramMetas.length-1?(i["params"+t]||a)+")":""+(i["params"+t]||a),key:""+t})})),t.forEach((function(t,n){var o,a,s=t.data,l=t.colors,c=t.type,h=s.findIndex((function(t){return t.time===e})),u=al(s,e);if(u&&"nolabel"!==c){var d=""+(o=u.value,void 0!==(a=i.precision)?Number(isNaN(o)?NaN:null===o||void 0===o?void 0:o.toFixed(a)):o);r.push({label:d,key:"CUSTOM"+n,styles:{color:null===l||void 0===l?void 0:l[h]}})}})),r},getMobileLabel:function(){return[]}}},ll=function(e){var t=e.bizType,i=e.symbolDisplay;window.open("binance://customindicator/"+t+"/workspace/"+i)},cl=function(e){var t=(0,h.useRef)(e);return(0,h.useEffect)((function(){t.current=e}),[e]),function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.current.apply(null,e)}},hl=function(e,t){try{return JSON.parse(e)}catch(pi){return t||e}};var ul=(0,h.forwardRef)((function(e,t){var i,n=e.klineOptions,r=e.showIndicatorMenu,o=e.binanceDefinedIndicators,a=void 0===o?[]:o,s=e.electronShortcutOptions,l=void 0===s?{symbol:"",value:"",options:[],setInterval:function(){return null},setChartType:function(){return null},enabled:!1}:s,d=e.userDefinedIndicatorOptions,g=void 0===d?{getNextChartTick:function(){return null},setMessageInfo:function(){return null},symbolDisplay:"",bizType:"",enabled:!1,compiler:null,electron:{}}:d,p=(0,h.useRef)(null);return(0,h.useImperativeHandle)(t,(function(){return{getCandlestick:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.getCandlestick()},registerColorTable:function(){return null}}})),(0,h.useEffect)((function(){a.forEach((function(e){var t,i,n,r=e.name,o=e.indicator;null===(n=null===(i=null===(t=p.current)||void 0===t?void 0:t.getCandlestick)||void 0===i?void 0:i.call(t))||void 0===n||n.registerCustomIndicator(r,o)}))}),[a]),(0,Nt.Z)((function(){var e,t,i;null===(i=null===(t=null===(e=p.current)||void 0===e?void 0:e.getCandlestick)||void 0===t?void 0:t.call(e))||void 0===i||i.showIndicatorsDialog()}),[r]),function(e){var t=e.candlestick,i=e.options,n=e.symbol,r=e.value,o=e.setInterval,a=e.setChartType,s=e.electron,l=e.enabled,u=(0,c.__read)((0,h.useState)(!1),2),d=u[0],g=u[1],p=(0,h.useCallback)((function(e){e.preventDefault(),e.stopPropagation()}),[]),f=(0,h.useCallback)((function(){return g(!0)}),[g]),m=(0,h.useCallback)((function(e){return function(t){var i;(null===(i=t.target)||void 0===i?void 0:i.matches(".focus-area"))||t.composedPath().some((function(t){return e.includes(t)}))||g(!1)}}),[g]),v=(0,h.useCallback)((function(e){if(d)switch(e.key){case"+":case"ArrowUp":null===t||void 0===t||t.zoomIn(),p(e);break;case"-":case"ArrowDown":null===t||void 0===t||t.zoomOut(),p(e);break;case"ArrowLeft":null===t||void 0===t||t.goForward(),p(e);break;case"ArrowRight":null===t||void 0===t||t.goNext(),p(e)}}),[p,d,t]),y=(0,h.useCallback)((function(){var e=i.indexOf(r)+1,t=i[e%i.length];o("Time"===t?"1m":t),a("Time"===t?"LINE":"BAR")}),[r,i,o,a]);(0,h.useEffect)((function(){if(l&&s){var e=document.querySelectorAll(".focus-area"),t=m(Array.from(e));e.forEach((function(e){return e.addEventListener("click",f)})),document.addEventListener("click",t),document.addEventListener("keydown",v);var i=s.registerActionHandle((function(e){var t=e.name;d&&t===s.constants.ACTION_K_LINE_SWITCH_PERIOD&&y()}));return function(){i(),null===e||void 0===e||e.forEach((function(e){return e.removeEventListener("click",f)})),document.removeEventListener("click",t),document.removeEventListener("keydown",v)}}}),[d,n,p,f,m,v,y,s,l])}((0,c.__assign)((0,c.__assign)({},l),{candlestick:null===(i=p.current)||void 0===i?void 0:i.getCandlestick()})),function(e){var t=e.candleRef,i=e.getNextChartTick,n=e.symbolDisplay,r=e.bizType,o=e.setMessageInfo,a=e.electron,s=e.enabled,l=e.compiler,u=(0,h.useRef)(null),d=(0,h.useRef)(null),g=(0,h.useRef)(""),p=function(){var e,t;(null===(t=null===(e=u.current)||void 0===e?void 0:e.Errors)||void 0===t?void 0:t.length)>0&&o({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},f=cl((function(){a.storage.getItem("customIndicatorPassFiles").then((function(e){return hl(e,{})})).then((function(e){var t=Object.keys(e);if(t.find((function(e){return e.startsWith("untitled-")}))){var i=Math.max.apply(null,t.filter((function(e){return e.startsWith("untitled-")})).map((function(e){return+e.split("-")[1]})));null===a||void 0===a||a.storage.setItem("customIndicatorCurFileName","untitled-"+(i+1))}else t.find((function(e){return e.startsWith("untitled")}))?null===a||void 0===a||a.storage.setItem("customIndicatorCurFileName","untitled-1"):null===a||void 0===a||a.storage.setItem("customIndicatorCurFileName","untitled")})).then((function(){ll({symbolDisplay:n,bizType:r})}))})),m=cl((function(e){var t=e.name;a.storage.setItem("customIndicatorCurFileName",t).then((function(){ll({symbolDisplay:n,bizType:r})}))}));(0,h.useEffect)((function(){if(s&&a&&t.current&&l){var e=a.storage,n=t.current.getCandlestick(),r=new l;u.current=r,function(){var r,o,a,s,l;(0,c.__awaiter)(this,void 0,void 0,(function(){var h,f,m,v,y,x,b,_,C,w,A;return(0,c.__generator)(this,(function(L){switch(L.label){case 0:return[4,e.getItem("customIndicatorPassFiles")];case 1:return h=L.sent(),(f=hl(h))&&(d.current=f,Object.entries(f).forEach((function(e){var t=(0,c.__read)(e,2),i=t[0],r=t[1].id||"@"+i+"_v1";null===n||void 0===n||n.registerCustomIndicator(r,{defaultProps:{isCustom:!0,id:r,title:i}})}))),[4,null===(r=t.current)||void 0===r?void 0:r.getStoredData()];case 2:if(m=L.sent(),(v=function(e){var t=e.length;return function i(n){if(n>=t)return null;var r=e[n].indicators;return(null===r||void 0===r?void 0:r.find((function(e){return e.isCustom})))||i(n+1)}(0)}(m||[]))&&(y=v.id,x=v.name,b=v.type,_=f[b]||f[x])){C=_.code;try{null===(o=u.current)||void 0===o||o.compile(C),p(),null===(a=u.current)||void 0===a||a.runOnce(),w=sl(u.current,i),(A=null===(l=null===(s=u.current)||void 0===s?void 0:s.ChartInterface)||void 0===l?void 0:l.Chart).study&&(w.defaultProps.isHistBase=A.study.overlay||!1,w.defaultProps.title=A.study.title||"",w.defaultProps.isScaleCenter=!0,w.defaultProps.isCustom=!0,w.defaultProps.id=y),null===n||void 0===n||n.registerCustomIndicator(y,w),null===n||void 0===n||n.addIndicatorByName(y),g.current=y}catch(E){console.error(E)}}return[2]}}))}))}(),null===n||void 0===n||n.registerCustomIndicatorCallback({onAdd:f,onEdit:m,onRemove:function(t){return(0,c.__awaiter)(this,void 0,void 0,(function(){var i,r,o;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return n.removeCustomIndicatorByName(t),[4,e.getItem("customIndicatorPassFiles")];case 1:return i=a.sent(),r=hl(i,{}),o=Object.fromEntries(Object.entries(r).filter((function(e){var i=(0,c.__read)(e,2),n=i[0];return(i[1].id||"@"+n+"_v1")!==t}))),[4,e.setItem("customIndicatorPassFiles",JSON.stringify(o))];case 2:return a.sent(),[2]}}))}))}})}}),[s,a]),(0,h.useEffect)((function(){if(s&&a&&t.current){var e=t.current.getCandlestick();null===e||void 0===e||e.on("customIndicatorClick",(function(t){var n,r,o,a,s=t.data;e.closeIndicatorByName(g.current);var l=s.name,c=s.id,h=(d.current[c]||d.current[l]).code;try{null===(n=u.current)||void 0===n||n.compile(h),p(),null===(r=u.current)||void 0===r||r.runOnce();var f=sl(u.current,i),m=null===(a=null===(o=u.current)||void 0===o?void 0:o.ChartInterface)||void 0===a?void 0:a.Chart;m.study&&(f.defaultProps.isHistBase=m.study.overlay||!1,f.defaultProps.title=m.study.title||"",f.defaultProps.isScaleCenter=!0,f.defaultProps.isCustom=!0,f.defaultProps.id=c),e.registerCustomIndicator(c,f),e.addIndicatorByName(c),g.current=c}catch(v){console.error(v)}}))}}),[s,a])}((0,c.__assign)((0,c.__assign)({},g),{candleRef:p})),u().createElement(nl,(0,c.__assign)({style:{width:"100%",height:"100%",position:"relative"}},n,{ref:p}))})),dl={IntervalFilter:n,OpeningCountdown:q,Chart:te,ChartHeader:r,ChartFallback:function(e){var t=e.resetErrorBoundary,i=e.mainText,n=e.btnText;return u().createElement(d.Z,{sx:{width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},u().createElement(y.Z,{fontSize:3,color:"tradeWidget.chartFallbackMainColor"},i),u().createElement(y.Z,{fontSize:"14px",sx:{textDecoration:"underline",cursor:"pointer",color:"tradeWidget.chartFallbackButtonColor",mt:3},onClick:t},n))},ChartPlaceholder:function(){return u().createElement(d.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},u().createElement(ae,null))},MultiChartManager:function(e){var t=e.windows,i=e.value,n=e.onChange,r=e.onCloseTab,o=e.utilityTray,a=t.filter((function(e){return e.visible}));return u().createElement(d.Z,{sx:{height:"100%",flexDirection:"column"}},u().createElement(d.Z,{sx:{justifyContent:"space-between",height:"34px"}},u().createElement(pe,{options:a,value:i,onChange:n,onClose:r}),u().createElement(d.Z,{sx:{alignItems:"center",paddingRight:"ls","& > *:not(:last-child)":{paddingRight:"sm"}}},o)),u().createElement(_.Z,{sx:{height:"100%",display:"grid",gridTemplateColumns:"repeat("+Math.ceil(t.length/2)+", 50%)",gridTemplateRows:"repeat(2, 50%)"}},t.map((function(e,t){return u().createElement(_.Z,{key:t,sx:(0,c.__assign)({borderWidth:"1px",borderStyle:"solid",borderColor:"tradeWidget.chartHeaderBorderBottom"},e.value===i?{boxShadow:"tradeWidget.multiChartWindowSelectedBoxShadow",borderColor:"tradeWidget.multiChartWindowBorderSelected"}:{}),onClick:function(){return n(e)}},e.children)}))))},Dropdowns:a,RadioGroups:s,DepthChart:function(e){var t=e.d1Group,i=e.d2Group,n=e.canvas,r=n.width,o=n.height,a=e.scale,s=e.setScale,l=e.styles,c=e.yAxisScale,h=void 0===c?.6:c,d=e.xAxisVerticalOffset,g=void 0===d?22:d,p=e.yAxisHorizontalOffset,f=void 0===p?50:p,m=e.strokeWidth,v=void 0===m?1:m,y=e.graphStrokeWidth,x=void 0===y?1:y,b=e.xTicksFormatter,_=void 0===b?function(e){return e.toString()}:b,C=e.yTicksFormatter,w=void 0===C?function(e){return e.toString()}:C,A=e.d1XValueFormatter,L=void 0===A?function(e){return e.toString()}:A,E=e.d2XValueFormatter,V=void 0===E?function(e){return e.toString()}:E,S=e.d1YValueFormatter,M=void 0===S?function(e){return e.toString()}:S,D=e.d2YValueFormatter,T=void 0===D?function(e){return e.toString()}:D,k=e.d1DeltaXValueFormatter,I=void 0===k?function(e){return e.toString()}:k,W=e.d2DeltaXValueFormatter,P=void 0===W?function(e){return e.toString()}:W,H=rt({scale:a,setScale:s}),R=H.cursor,B=H.onMouseMove,N=H.onMouseLeave,O=H.onMouseWheel,Z=nt({d1Group:t,d2Group:i,width:r-f,height:o-g,cursor:R,scale:a,yAxisScale:h}),F=Z.width,K=Z.height,z=Z.halfWidth,U=Z.midValue,Y=Z.d1,X=Z.d2,G=Z.xTicks,j=Z.yTicks,q=Z.valueToX,J=Z.valueToY;return u().createElement(qe.Stage,{width:r,height:o,onMouseMove:B,onMouseOut:N,onWheel:O},u().createElement(qe.Layer,{hitGraphEnabled:!1},u().createElement(qe.Group,{height:K},u().createElement(qe.Line,{points:[z,0,z,K],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:v}),u().createElement(qe.Shape,{sceneFunc:function(e,t){e.beginPath();var n=z,r=K,o=!0;i.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=q(i))<0||n>z)){var s=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=s,e.lineTo(n,r)}})),e.lineTo(-v,r),e.lineTo(-v,K),e.fillStrokeShape(t)},fill:l.d2.fillColor,stroke:l.d2.lineColor,strokeWidth:x}),u().createElement(qe.Shape,{sceneFunc:function(e,i){e.beginPath();var n=z,r=K,o=!1;t.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=q(i))>F||n<z)){var s=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=s,e.lineTo(n,r)}})),e.lineTo(F+v,r),e.lineTo(F+v,K),e.fillStrokeShape(i)},fill:l.d1.fillColor}),u().createElement(qe.Shape,{sceneFunc:function(e,i){e.beginPath();var n=z,r=K,o=!1;t.forEach((function(t){var i=t.xData,a=t.yData;if(!((n=q(i))>F||n<z)){var s=J(a);o?(e.moveTo(n,r),o=!1):e.lineTo(n,r),r=s,e.lineTo(n,r)}})),e.lineTo(F+v,r),e.fillStrokeShape(i)},stroke:l.d1.lineColor,strokeWidth:x}),Y.x?u().createElement(u().Fragment,null,u().createElement(qe.Line,{points:[Y.x,0,Y.x,K],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),u().createElement(qe.Line,{points:[z,Y.y,F,Y.y],stroke:l.d1.lineColor,strokeWidth:v,dash:[2,2]}),u().createElement(qe.Line,{points:[X.x,0,X.x,K],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),u().createElement(qe.Line,{points:[l.tag.width,X.y,z,X.y],stroke:l.d2.lineColor,strokeWidth:v,dash:[2,2]}),u().createElement(qe.Circle,{x:Y.x,y:Y.y,radius:3,fill:l.d1.lineColor}),u().createElement(qe.Label,{x:.5*(Y.x+z),y:Y.y+.5*l.tag.height},u().createElement(qe.Tag,{pointerDirection:"down",fill:l.background}),u().createElement(qe.Text,{text:I(Y.xData,U),fill:l.d1.lineColor,padding:3})),u().createElement(qe.Circle,{x:X.x,y:X.y,radius:3,fill:l.d2.lineColor}),u().createElement(qe.Label,{x:.5*(X.x+z),y:X.y+.5*l.tag.height},u().createElement(qe.Tag,{pointerDirection:"down",fill:l.background}),u().createElement(qe.Text,{text:P(X.xData,U),fill:l.d2.lineColor,padding:3})),u().createElement(qe.Label,{x:F,y:Y.y},u().createElement(qe.Tag,{pointerDirection:"left",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.background}),u().createElement(qe.Text,{text:M(Y.yData),fill:l.d1.lineColor,padding:3})),u().createElement(qe.Label,{x:0,y:X.y},u().createElement(qe.Tag,{pointerDirection:"left",pointerWidth:l.tag.width,pointerHeight:l.tag.height,fill:l.d2.fillColor}),u().createElement(qe.Text,{text:T(X.yData),fill:l.d2.lineColor,padding:3})),u().createElement(qe.Rect,{x:Y.x,y:0,width:F-Y.x,height:K,fill:l.hoverBgColor}),u().createElement(qe.Rect,{x:0,y:0,width:X.x,height:K,fill:l.hoverBgColor})):null),u().createElement(qe.Group,{y:K},G.map((function(e,t){return u().createElement(u().Fragment,{key:t},u().createElement(qe.Line,{points:[q(e),0,q(e),4],stroke:l.textColor,strokeWidth:v}),u().createElement(qe.Text,{x:q(e)-20,y:3,text:_(e),fill:"#999",padding:3}))})),Y.x?u().createElement(u().Fragment,null,u().createElement(qe.Label,{x:Y.x,y:2},u().createElement(qe.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:l.background}),u().createElement(qe.Text,{text:L(Y.xData),fill:l.d1.lineColor,padding:3})),u().createElement(qe.Line,{points:[Y.x,0,Y.x,4],stroke:l.d1.lineColor,strokeWidth:v}),u().createElement(qe.Label,{x:X.x,y:2},u().createElement(qe.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:l.background}),u().createElement(qe.Text,{text:V(X.xData),fill:l.d2.lineColor,padding:3})),u().createElement(qe.Line,{points:[X.x,0,X.x,4],stroke:l.d2.lineColor,strokeWidth:v})):null),u().createElement(qe.Group,{x:F},j.map((function(e,t){return u().createElement(u().Fragment,{key:t},u().createElement(qe.Line,{points:[0,J(e),4,J(e)],stroke:l.textColor,strokeWidth:v}),u().createElement(qe.Text,{x:8,y:J(e)-5,text:w(e),fill:l.textColor,opacity:.5}))})))))},VerticalDepthChart:function(e){var t=e.d1Group,i=e.d2Group,n=e.canvas,r=e.scale,o=e.setScale,a=e.styles,s=e.yAxisScale,l=void 0===s?.9:s,c=e.xAxisVerticalOffset,h=void 0===c?0:c,d=e.yAxisHorizontalOffset,g=void 0===d?60:d,p=e.strokeWidth,f=void 0===p?1:p,m=e.graphStrokeWidth,v=void 0===m?2:m,y=e.yTicksFormatter,x=void 0===y?function(e){return e.toString()}:y,b=e.d1XValueFormatter,_=void 0===b?function(e){return e.toString()}:b,C=e.d2XValueFormatter,w=void 0===C?function(e){return e.toString()}:C,A=e.d1YValueFormatter,L=void 0===A?function(e){return e.toString()}:A,E=e.d2YValueFormatter,V=void 0===E?function(e){return e.toString()}:E,S=t.map(tt),M=i.map(tt),D=rt({scale:r,setScale:o}),T=D.cursor,k=D.onMouseMove,I=D.onMouseLeave,W=D.onMouseWheel,P=nt({d1Group:S,d2Group:M,width:n.height-h,height:n.width-g,cursor:{x:n.height-T.y,y:T.x},scale:r,yAxisScale:l}),H=P.height,R=P.halfWidth,B=P.d1,N=P.d2,O=P.xTicks,Z=P.valueToX,F=P.valueToY;return u().createElement(qe.Stage,{width:n.width,height:n.height,onMouseMove:k,onMouseOut:I,onWheel:W},u().createElement(qe.Layer,{hitGraphEnabled:!1},u().createElement(qe.Group,{x:g},u().createElement(qe.Line,{points:[0,R,H,R],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:f}),u().createElement(qe.Shape,{sceneFunc:function(e,t){e.beginPath();var i=H,r=R,o=!0;M.forEach((function(t){var a=t.xData,s=t.yData;if(!((r=n.height-Z(a))>n.height||r<R)){var l=F(s);o?(e.moveTo(i,r),o=!1):e.lineTo(i,r),i=l,e.lineTo(i,r)}})),e.lineTo(i,n.height+f),e.lineTo(H+f,n.height+f),e.fillStrokeShape(t)},fill:a.d2.fillColor,stroke:a.d2.lineColor,strokeWidth:v}),u().createElement(qe.Shape,{sceneFunc:function(e,t){e.beginPath();var i=H,r=R,o=!1;S.forEach((function(t){var a=t.xData,s=t.yData;if(!((r=n.height-Z(a))<0||r>R)){var l=F(s);o?(e.moveTo(i,r),o=!1):e.lineTo(i,r),i=l,e.lineTo(i,r)}})),e.lineTo(i,-f),e.lineTo(H,-f),e.fillStrokeShape(t)},fill:a.d1.fillColor,stroke:a.d1.lineColor,strokeWidth:v}),B.x?u().createElement(u().Fragment,null,u().createElement(qe.Line,{points:[0,n.height-B.x,H,n.height-B.x],stroke:a.d1.lineColor,strokeWidth:f,dash:[2,2]}),u().createElement(qe.Line,{points:[B.y,0,B.y,R],stroke:a.d1.lineColor,strokeWidth:f,dash:[2,2]}),u().createElement(qe.Line,{points:[0,n.height-N.x,H,n.height-N.x],stroke:a.d2.lineColor,strokeWidth:f,dash:[2,2]}),u().createElement(qe.Line,{points:[N.y,R,N.y,n.height],stroke:a.d2.lineColor,strokeWidth:f,dash:[2,2]}),u().createElement(qe.Circle,{x:B.y,y:n.height-B.x,radius:3,fill:a.d1.lineColor}),u().createElement(qe.Circle,{x:N.y,y:n.height-N.x,radius:3,fill:a.d2.lineColor}),u().createElement(qe.Label,{x:B.y,y:0},u().createElement(qe.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:2,fill:a.d1.fillColor}),u().createElement(qe.Text,{text:L(B.yData),fill:a.d1.lineColor,padding:3})),u().createElement(qe.Label,{x:N.y,y:n.height},u().createElement(qe.Tag,{pointerDirection:"down",pointerWidth:4,pointerHeight:2,fill:a.d2.fillColor}),u().createElement(qe.Text,{text:V(B.yData),fill:a.d2.lineColor,padding:3})),u().createElement(qe.Rect,{x:0,y:0,width:H,height:n.height-B.x,fill:a.hoverBgColor}),u().createElement(qe.Rect,{x:0,y:n.height-N.x,width:H,height:N.x,fill:a.hoverBgColor})):null),u().createElement(qe.Group,null,u().createElement(qe.Line,{points:[g,0,g,n.height],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:f}),O.map((function(e,t){var i=n.height-Z(e);return u().createElement(u().Fragment,{key:t},u().createElement(qe.Line,{points:[g-4,i,g,i],stroke:a.textColor,strokeWidth:f}),u().createElement(qe.Label,{x:g-4,y:i},u().createElement(qe.Tag,{pointerDirection:"right",pointerWidth:0,pointerHeight:0,strokeWidth:0}),u().createElement(qe.Text,{text:x(e),fill:a.textColor,padding:3})))})),B.x?u().createElement(u().Fragment,null,u().createElement(qe.Label,{x:g-4,y:n.height-B.x},u().createElement(qe.Tag,{pointerDirection:"right",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.background}),u().createElement(qe.Text,{text:_(null===B||void 0===B?void 0:B.xData),fill:a.d1.lineColor,padding:3})),u().createElement(qe.Line,{points:[g-4,n.height-B.x,g,n.height-B.x],stroke:a.d1.lineColor,strokeWidth:f}),u().createElement(qe.Label,{x:g-4,y:n.height-N.x},u().createElement(qe.Tag,{pointerDirection:"right",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.background}),u().createElement(qe.Text,{text:w(null===N||void 0===N?void 0:N.xData),fill:a.d2.lineColor,padding:3})),u().createElement(qe.Line,{points:[g-4,n.height-N.x,g,n.height-N.x],stroke:a.d2.lineColor,strokeWidth:f})):null)))},TradingView:function(e){var t=(0,c.__read)((0,h.useState)(!1),2),i=t[0],n=t[1],r=(0,c.__read)((0,h.useState)(!1),2),o=r[0],a=r[1],s=(0,h.useMemo)((function(){return Rt(e.theme,e.colorScheme)}),[e.theme,e.colorScheme]),l=(0,h.useMemo)((function(){return at()(e.initialConfig)}),[]),d=(0,h.useCallback)((function(){var e;a(!0),null===(e=l.onFirstTimeDataLoadedDone)||void 0===e||e.call(l)}),[l]),g=(0,h.useCallback)((function(){var e;n(!0),null===(e=l.onChartReadyDone)||void 0===e||e.call(l)}),[l]),p=(0,c.__assign)((0,c.__assign)({},e),{isChartReady:i,isFirstTimeDataLoaded:o,initialConfig:(0,c.__assign)((0,c.__assign)({},l),{onFirstTimeDataLoadedDone:d,onChartReadyDone:g})});return u().createElement(_.Z,{sx:{height:"100%",position:"relative"}},u().createElement(Xt,(0,c.__assign)({},p)),!i&&u().createElement(_.Z,{sx:{height:"100%",width:"100%",background:s.bg,position:"absolute",left:0,top:0}},u().createElement(ut,null)))},TradingViewNext:function(e){var t=(0,c.__read)((0,h.useState)(!1),2),i=t[0],n=t[1],r=(0,c.__read)((0,h.useState)(!1),2),o=r[0],a=r[1],s=(0,h.useMemo)((function(){return ei(e.theme,e.colorScheme)}),[e.theme,e.colorScheme]),l=(0,h.useMemo)((function(){return at()(e.initialConfig)}),[]),d=(0,h.useCallback)((function(){var e;a(!0),null===(e=l.onFirstTimeDataLoadedDone)||void 0===e||e.call(l)}),[l]),g=(0,h.useCallback)((function(){var e;n(!0),null===(e=l.onChartReadyDone)||void 0===e||e.call(l)}),[l]),p=(0,c.__assign)((0,c.__assign)({},e),{isChartReady:i,isFirstTimeDataLoaded:o,initialConfig:(0,c.__assign)((0,c.__assign)({},l),{onFirstTimeDataLoadedDone:d,onChartReadyDone:g})});return u().createElement(_.Z,{sx:{height:"100%",position:"relative"}},u().createElement(ci,(0,c.__assign)({},p)),!i&&u().createElement(_.Z,{sx:{height:"100%",width:"100%",background:s.bg,position:"absolute",left:0,top:0}},u().createElement(ut,null)))},BasicKline:ul,MiniSymbol:o,Icons:l}},"RdE/":(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i("D57K"),r=i("/SIk"),o=i.n(r),a=i("SH2D");const s=function(e){return o().createElement(a.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M20.5 7.42L9.41 18.5 8 17.09l-5-5 1.41-1.42 5 5L19.08 6l1.42 1.42z",fill:"currentColor"}))}},"4fLz":(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i("D57K"),r=i("/SIk"),o=i.n(r),a=i("SH2D");const s=function(e){return o().createElement(a.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M16 9v1.2L12 15l-4-4.8V9h8z",fill:"currentColor"}))}}}]);