(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[40],{VYFT:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var n=a("D57K"),r=a("/SIk"),l=a.n(r),i=a("XgzE"),s=a("zy8P"),o=a("XhNN"),d=a("e5RN"),c=a("GEp0"),u=a("HWFi"),m=a("RdyI");const f=function(e){return l().createElement(m.Z,(0,n.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),l().createElement("path",{d:"M5 10V8.6l2.8-2.968L10.6 8.6V10H5z",fill:"currentColor"}))};var p=a("dcD/"),g=function(e){return l().createElement(o.Z,(0,n.__assign)({tx:"listGrid",variant:"default",__css:{overflow:"hidden",boxSizing:"border-box",borderBottom:"1px solid",transition:"all 0.2s ease-in"}},e))},h=function(e){return l().createElement(o.Z,(0,n.__assign)({tx:"listGrid",variant:"default",__css:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"8px 0",padding:"0 16px"}},e))},x=function(e){return l().createElement(h,(0,n.__assign)({tx:"listGrid",variant:"header"},e))};const v=function(e){function t(t){var a=e.call(this,t)||this;return a.displayName="ListGrid",a.listRef=l().createRef(),a.getSelectKey=function(e){var t=a.props.rowKey;return-1===e?-1:t?"function"===typeof t?t(e):e[t]:e.key},a.getSelectKeyWithIndex=function(e,t){var n=a.getSelectKey(e);return void 0===n?t:n},a.getItemSize=function(e){var t=a.props.listGridConfig;return 0===e&&t.headerCellHeight?t.headerCellHeight:e===a.getEmptyDataIndex()&&t.emptyCellHeight?t.emptyCellHeight:void 0===t.expandHeight?t.collapseHeight:e===a.state.expandItemIndex?t.expandHeight:t.collapseHeight},a.isItemLoaded=function(e){return e<a.props.data.length},a.getEmptyDataIndex=function(){var e=a.props,t=e.data,n=e.renderHeaderCell;if("function"===typeof e.renderEmptyCell){if(0===t.length)return 0;if(1===t.length&&n)return 1}return-1},a._row=function(e){var t=e.index,n=e.style,r=a.props,i=r.columns,s=r.data,c=r.loadingPlaceholder,u=r.listGridConfig,m=r.renderHeaderCell,v=r.renderEmptyCell,y=r.onSelect;if(0===t&&"function"===typeof m)return m();if(a.getEmptyDataIndex()===t&&"function"===typeof v)return v();if(!a.isItemLoaded(t))return l().createElement(o.Z,{style:n},c);var I=s[t],S=a.getSelectKeyWithIndex(I,t);return l().createElement(g,{style:n},i.map((function(e,n){return 0===n?l().createElement(x,{key:n,onClick:function(){return a.handleExpandAndCollapse(t)}},l().createElement(d.Z,{flex:1,alignItems:"center",onClick:y?function(e){e.stopPropagation(),e.preventDefault(),a.handleSelectRow(S)}:void 0},y&&a._checkbox(I,t)," ",a._cell(I,e)),u.expandHeight&&l().createElement(o.Z,{pl:"20px"},t===a.state.expandItemIndex?l().createElement(f,{tx:"listGrid",variant:"toggleIcon"}):l().createElement(p.Z,{tx:"listGrid",variant:"toggleIcon"}))):l().createElement(h,{alignItems:"flex-start",key:n},!i[n].hideTitle&&l().createElement(o.Z,{tx:"listGrid",variant:"leftHeader",__css:{whiteSpace:"nowrap",flexShrink:0}},i[n].title),l().createElement(o.Z,{tx:"listGrid",flex:1,variant:i[n].hideTitle?"":"rightContent"},a._cell(I,e)))})))},a._cell=function(e,t){return"function"===typeof t.render?t.render(e[t.dataIndex],e):e[t.dataIndex]},a._checkbox=function(e,t){var n=a.getSelectKeyWithIndex(e,t);return l().createElement(c.Z,{tx:"listGrid",variant:"checkbox"},l().createElement(u.Z,{checked:a.state.selectedKeySet.has(n),readOnly:!0}))},a.toggleAllSelection=function(e){void 0===e&&(e=!1);var t=a.props,n=t.data,r=t.renderHeaderCell,l=a.state.selectedKeySet;if(e)for(var i=0;i<n.length;i++)0===i&&r||l.add(a.getSelectKeyWithIndex(n[i],i));else l.clear();a.renderAndOnSelect()},a.state={expandItemIndex:-1,selectedKeySet:new Set},a}return(0,n.__extends)(t,e),t.getDerivedStateFromProps=function(e){return e.selectedKeys?{selectedKeySet:new Set(e.selectedKeys)}:null},t.prototype.handleExpandAndCollapse=function(e){var t=Math.min(e,this.state.expandItemIndex);t<0&&(t=0),this.state.expandItemIndex===e?this.setState({expandItemIndex:-1}):this.setState({expandItemIndex:e}),this.listRef.current&&this.listRef.current.resetAfterIndex(t,!0)},t.prototype.handleSelectRow=function(e){var t=this.state.selectedKeySet;t.has(e)?t.delete(e):t.add(e),this.renderAndOnSelect()},t.prototype.renderAndOnSelect=function(){var e=this,t=this.state.selectedKeySet,a=this.props,n=a.data,r=a.onSelect,l=a.renderHeaderCell,i=Array.from(t).sort((function(e,t){return e-t})),s=[];n.forEach((function(a,n){t.has(e.getSelectKeyWithIndex(a,n))&&s.push(n)})),r&&r(l?s.map((function(e){return e-1})):s,i),this.setState({selectedKeySet:new Set(i)}),this.listRef.current&&this.listRef.current.resetAfterIndex(0,!0)},t.prototype.render=function(){var e=this,t=this.props,a=t.data,r=t.hasMore,o=t.loadMore,d=void 0===o?function(){return Promise.resolve()}:o,c=t.listGridConfig,u=t.threshold,m=void 0===u?15:u,f=(0,n.__rest)(t,["data","hasMore","loadMore","listGridConfig","threshold"]),p=r?a.length+1:a.length;return-1!==this.getEmptyDataIndex()&&p++,l().createElement(s.Z,{threshold:m,isItemLoaded:this.isItemLoaded,itemCount:p,loadMoreItems:d},(function(t){var a=t.onItemsRendered,r=t.ref;return l().createElement(i.S_,(0,n.__assign)({},f,{height:c.height,itemCount:p,itemSize:e.getItemSize,onItemsRendered:a,ref:function(t){r(t),e.listRef={current:t}},width:c.width}),e._row)}))},t}(r.PureComponent)},r8hx:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var n=a("/SIk"),r=a.n(n),l=a("Vg22"),i=a("Wx6g"),s=a("6Afj"),o=a("MMVH"),d=a("Gbz3"),c=a("5vwO"),u=a("4xt1");const m=e=>e.map((e=>((e,{marginPrecision:t})=>{const{walletBalance:a,upnl:n,availableBalance:r,realMarginBalance:l}=e;return(0,c.Z)((0,c.Z)({},e),{},{formattedWalletBalance:(0,u.GW)(a,t,!0),formattedUnpl:(0,u.uf)(n,t),formattedAvailableBalance:(0,u.uf)(r,t),formattedMarginBalance:(0,u.uf)(l,t)})})(e,{marginPrecision:8})));var f=a("OV9X"),p=a("rdEq"),g=r().createElement;const h={maxHeight:"28px",lineHeight:"14px",verticalAlign:"bottom",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word",fontSize:0,mb:"10px"},x=(0,n.memo)((({title:e})=>g(f.Z,{sx:h,color:"t.secondary"},e))),v=(0,n.memo)((({tip:e,title:t})=>g(p.m,{tip:e,labelSx:h},t)));var y=a("e5RN"),I=a("JTQp"),S=a("X46w"),b=a("LcTY"),w=r().createElement;const E=(0,n.memo)((({assetLogo:e,assetCode:t})=>w(y.Z,{sx:{alignItems:"center"}},w(I.Z,{variant:"avatar",src:e,alt:"",sx:{width:24,height:24,alignSelf:"center"}}),w(f.Z,{sx:{ml:1,color:"t.secondary"}},t)))),B=(0,n.memo)((({formattedWalletBalance:e})=>w("div",null,e))),C=(0,n.memo)((({formattedUnpl:e})=>w("div",null,e))),A=(0,n.memo)((({formattedAvailableBalance:e})=>w("div",null,e))),_=(0,n.memo)((({formattedMarginBalance:e})=>w("div",null,e))),k=(0,n.memo)((({assetCode:e})=>{const{getI18n:t}=(0,d.yk)(),a=(0,n.useCallback)((()=>{b.T.emit(b.F.OPEN_TRANSFER_MODAL,e)}),[e]);return w(S.Z,{variant:"quiet",sz:"s",pl:"0",onClick:a},t("transfer",{defaultValue:"Transfer"}))}));var Z=r().createElement;var H=a("pVAJ"),M=a("8Y2u"),L=a("cucV"),K=a("wdcV"),G=a("6A9W");var P=r().createElement;const R=(0,s.ck)("mobile",(()=>Promise.all([a.e(374),a.e(712),a.e(162)]).then(a.bind(a,"+tiw")))),V=(0,s.ck)("pc",(()=>Promise.all([a.e(374),a.e(712),a.e(773)]).then(a.bind(a,"XYAY")))),W=()=>{const{getI18n:e}=(0,d.yk)();let t=!1;try{t=JSON.parse(window.localStorage.getItem("futures-hideZeroAssets"))}catch(w){}const{0:a,1:s}=(0,n.useState)(!!t),u=(0,n.useCallback)((()=>{const e=!a;s(e),window.localStorage.setItem("futures-hideZeroAssets",String(e))}),[a]),f=(0,l.useDispatch)(),p=(()=>{const e=(0,d.KQ)(),t=(0,d.zF)(),[a]=(0,H.z4)(),{leverageList:n}=(0,d.rf)(),r=(0,M.dM)(),l=(0,K.L6)(r),i=(0,d.G8)(),s=Object.values(e),{assetMode:o}=(0,d.F7)(),u=(0,G.F)({assetIndexes:i,balances:e,marginGroupPositions:l,pageSymbol:a,symbolLeverage:n[a]||20});return s.map((e=>{const r=e.asset,s=t[r],d=l[r]||[],m=(0,L.ot)(d),{askRate:f=1}=i[r]||{},p=o?u/f:(0,G.$)({crossWalletBalance:Number(e.crossWalletBalance),marginPositions:d,pageSymbol:a,symbolLeverage:n[a]||20}),g=e.walletBalance+m;return(0,c.Z)((0,c.Z)({},e),{},{assetCode:(null===s||void 0===s?void 0:s.asset)||r,assetName:null===s||void 0===s?void 0:s.assetName,assetLogo:null===s||void 0===s?void 0:s.logoUrl,upnl:m,availableBalance:p,realMarginBalance:g})}))})(),g=(0,n.useMemo)((()=>p.filter((e=>!a||(0!==e.walletBalance||0!==e.upnl||0!==e.availableBalance)))),[a,p]),h=m(g),y=(()=>{const{getI18n:e}=(0,d.yk)();return(0,n.useMemo)((()=>[{key:"assetCode",title:Z(x,{title:e("assets",{defaultValue:"assets"})}),width:100,dataIndex:"assetCode",render:(e,t)=>Z(E,{assetLogo:t.assetLogo,assetCode:t.assetCode})},{key:"walletBalance",title:Z(v,{title:e("assetsList-walletBalance",{defaultValue:"Wallet Balance"}),tip:e("tradeHistory-marginBalance-walletBalanceTip")}),width:100,dataIndex:"formattedWalletBalance",render:(e,t)=>Z(B,{formattedWalletBalance:e})},{key:"unpl",title:Z(v,{title:e("tradeHistory-marginBalance-unrealizedPNLTitle",{defaultValue:"Unrealized PNL"}),tip:e("tradeHistory-marginBalance-unrealizedPNLTip")}),width:100,dataIndex:"formattedUnpl",render:(e,t)=>Z(C,{formattedUnpl:e})},{key:"availableBalance",title:Z(v,{title:e("tradeHistory-marginBalance-availableForOrderTitle",{defaultValue:"Available for Order"}),tip:e("tradeHistory-marginBalance-availableForOrderTip")}),width:100,dataIndex:"formattedAvailableBalance",render:(e,t)=>Z(A,{formattedAvailableBalance:e})},{key:"Mb",title:Z(x,{title:e("tradeHistory-marginBalanceLabel",{defaultValue:"Margin Balance"})}),width:100,dataIndex:"MbUSDEquity",render:(e,t)=>Z(_,{formattedMarginBalance:t.formattedMarginBalance})},{key:"Action",title:Z(x,{title:e("assetsList-Action",{defaultValue:"Action"})}),width:60,dataIndex:"assetCode",render:(e,t)=>Z(k,{assetCode:e})}]),[e])})(),I=P(o.p,{className:"empty"},e("noasset",{defaultValue:"You have no asset."})),{0:S,1:b}=(0,n.useState)(!1);return(0,n.useEffect)((()=>{b(!0),f.transferAssets.getUserAssets().finally((()=>b(!1)))}),[f.transferAssets]),P(i.Z,null,(({isMobile:e,isIPad:t})=>P(r().Fragment,null,t?P(R,{isMobile:e,loading:S,emptyText:I,data:h,hideZeroAsset:a,toggleZeroAsset:u}):P(V,{loading:S,emptyText:I,columns:y,data:h,hideZeroAsset:a,toggleZeroAsset:u}))))},z=r().memo(W)}}]);