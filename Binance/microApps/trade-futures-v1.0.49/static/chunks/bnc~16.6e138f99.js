(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[285],{"XbY+":(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n("D57K"),o=n("wZts"),a=function(e){return void 0===e&&(e={}),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,o.v_)("/bapi/futures/v1/private/future/account/open",e)];case 1:return t=n.sent(),[3,3];case 2:return n.sent(),t={success:!1},[3,3];case 3:return[2,t]}}))}))}},EVzf:(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n("D57K"),o=n("wZts"),a=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return[2,(0,o.v_)("/bapi/futures/v2/private/future/order/clear-position",e)]}))}))}},"/2BB":(e,t,n)=>{"use strict";n.d(t,{E:()=>zo});var r,o=n("D57K"),a=n("/SIk"),i=n.n(a),s=n("Tr4L"),l=n("Vg22"),c=n("j0Pw"),u=n("lwSb"),d=n("HT+E"),m=n("H8sf"),p=n.n(m),g=n("/bvR"),f={CHAT_ROOM_MP_UI:"chatroom-mp-ui"},h="IS_WS_OPEN",v="REMOVE_MEMBER",y="FORBIDDEN_GROUP_MEMBER",b="UN_FORBIDDEN_GROUP_MEMBER",x="TOGGLE_CHAT_ROOM",I="ON_OPEN_FUTURES_ACCOUNT",E="CHAT_ROOM_LAST_ROOM_ID",w=["Strutting_Bibi","Baffled_Bibi","Thumbs_Up_Bibi","allgood_Bibi","Laughing","Desperate","Cautious","Mobile","sayhi","Salute","Embarassed","Reluctant","Hatsoff","Spender","Coffee","Dabbing","hiding","Levitating","angry","Highfive","Board_up","Board_down","Intrigued","Concerned","Safu","Safu_in","Miner","Crying","Buy_Button","Sell_Button","Hodl","moon","Going_up","Going_down","Captain_punch","Captain_block","Christmas","Pumpkin","Zombie","Devil"],C={maxLen:150,at:"@Admin ",title:"Chat Room (EN)",option:"English",outMax:"Max input 150 characters",atTooMany:"Operation too frequent, please try again in $0s",typeTooMany:"Operation too frequent, please try again later"},S=[{commandLabel:"Share-USDTPosition",commandText:"/uposition ",sensor:"ChatRoom-ShareUMPosition"},{commandLabel:"Share-UPNL",commandText:"/urpnl ",sensor:"ChatRoom-ShareUMPNL"},{commandLabel:"Share-COINPosition",commandText:"/cposition ",sensor:"ChatRoom-ShareCMPosition"},{commandLabel:"Share-CPNL",commandText:"/crpnl ",sensor:"ChatRoom-ShareCMPNL"}],_=[{label:"Command-bold-label",defaultLabel:"<b>Bold</b>",command:"<b></b>"},{label:"Command-italic-label",defaultLabel:"<i>Italic</i>",command:"<i></i>"},{label:"Command-underline-label",defaultLabel:"<u>Underline</u>",command:"<u></u>"},{label:"Command-color-label",defaultLabel:"<c>Color</c>",command:"<c></c>"},{label:"Command-mix-label",defaultLabel:"<b><i><c><u>Mix</u></c></i></b>",command:"<b><i><c><u></u></c></i></b>"}],R=[{commandLabel:"Share-NoticeAdmin",commandText:"@Admin",sensor:"ChatRoom-ShareAtAdmin"},{commandLabel:"BannedUsers-Title",commandText:"/mute username",command:"/mute "},{commandLabel:"UnBanUser-Title",commandText:"/unmute username",command:"/unmute "}],N={ban:"BAN_PERSON",foul:"FOUL_WORD",entrance:"SWITCH_VIEW",cposition:"SHARE_COIN_POSITION",uposition:"SHARE_U_POSITION",urpnl:"LAST_U_ORDER_PNL",crpnl:"LAST_COIN_ORDER_PNL",mute:"BLOCK_USER",unmute:"UN_BLOCK_USER"},M=["ban","foul","entrance"],O="@Admin",k=-1,L=50,B=1e5;!function(e){e[e.Backwards=1]="Backwards",e[e.Forwards=2]="Forwards",e[e.Around=3]="Around"}(r||(r={}));var T=-"FAKE_FUTURES_ROOM_ID".length,A=function(e,t){return void 0===t&&(t="en"),(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,r;return(0,o.__generator)(this,(function(a){switch(a.label){case 0:return n=Object.values(f),[4,Promise.all(n.map((function(n){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var r,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,g.Ux)({basePath:e+"/api/i18n/-/web/cms",locale:t,namespace:n})];case 1:return r=o.sent(),[2,(a={},a[n]=r,a)]}}))}))})))];case 1:return r=a.sent(),[2,Object.assign.apply(Object,(0,o.__spreadArray)([{}],r))]}}))}))},Z=i().createContext({STATIC_HOST:"",API_HOST:"",WS_HOST:""});const P=function(e){var t=e.STATIC_HOST,n=e.API_HOST,r=e.WS_HOST,o=e.children,s=(0,a.useMemo)((function(){return{STATIC_HOST:t,API_HOST:n,WS_HOST:r}}),[t,n,r]);return i().createElement(Z.Provider,{value:s},o)};var U=function(){return(0,a.useContext)(Z)},H=n("XhNN");const D={display:"flex",width:"fit-content",flexDirection:"row",bg:"moduleBg",border:"1px solid",borderColor:"newLine",height:"500px",position:"fixed",right:"0",bottom:"23px",borderRadius:"5px",minWidth:"390px",zIndex:99,".ChatRoom-content":{position:"relative",display:"flex",width:"calc(100% - 2px)",height:"calc(100% - 2px)",boxSizing:"border-box",left:"1px",top:"1px"}};var j={width:"100%",".Resizable-bar":{position:"absolute",userSelect:"none",bg:"transparent","&.top":{width:"100%",height:"1px",top:0,cursor:"n-resize"},"&.right":{width:"1px",height:"100%",right:0,cursor:"e-resize"},"&.bottom":{width:"100%",height:"1px",bottom:0,cursor:"row-resize"},"&.left":{width:"1px",height:"100%",left:0,cursor:"w-resize"}},".Resizable-content":{width:"100%",height:"100%"}},F=function(e){var t=e.children,n=e.resizeRef,r=(0,a.useRef)(0),o=(0,a.useCallback)((function(e){var t=e.clientY;(null===n||void 0===n?void 0:n.current)&&(n.current.style.height=Math.min(window.innerHeight-n.current.offsetTop,Math.max(t,220))+"px")}),[n]),s=(0,a.useCallback)((function(){window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",s)}),[o]),l=(0,a.useCallback)((function(){window.addEventListener("mousemove",o),window.addEventListener("mouseup",s)}),[o,s]),c=(0,a.useCallback)((function(e){r.current=e.clientY,l()}),[l]);return i().createElement(H.Z,{className:"Resizable",sx:j},i().createElement("div",{className:"Resizable-bar bottom",onMouseDown:c,onMouseUp:s}),i().createElement("div",{className:"Resizable-content"},t))};const V=i().memo((function(e){var t=e.children,n=(0,a.useRef)(null);return i().createElement(H.Z,{className:"ChatRoom",sx:D,ref:n},i().createElement(F,{resizeRef:n},t))}));var z=n("OV9X"),q=n("KDve"),W=n("wZts"),G="/bapi/futures";var Y=n("JTQp"),J=function(){return function(e,t){var n=(0,s.$)(t),r=n.t,o=n.i18n,i=(0,a.useCallback)((function(t,n){void 0===n&&(n={});var o=[e,t].filter((function(e){return e})).join("-");return r(o,n).trim()||("string"===typeof n?n:n.defaultValue)}),[r,e]);return{i18n:o,t:r,getI18n:i}}("","chatroom-mp-ui")},K=n("RdyI");const $=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M11.414 17.586L10 19l-7-7 7-7 1.414 1.414L6.828 11H22v2H6.829l4.585 4.586z",fill:"#76808F"}))};var X=n("4sPL");const Q=function(e){var t=e.elRef,n=e.targetSelector,r=e.onEnd,o=e.disableSelector;(0,a.useEffect)((function(){var e=document.querySelector(n);if(t.current&&e){var a,i,s,l,c=!1,u=e.getBoundingClientRect(),d=document.documentElement.getBoundingClientRect(),m=function(t){if(c){t.touches&&(t=t.touches[0]);var n,r,o=s+t.clientX-a,m=l+t.clientY-i;d&&(o<=0&&(o=0),o+u.width>d.width&&(r=0),m<=0&&(m=0),m+u.height>d.height&&(n=0)),function(t,n,r,o){e&&(void 0!==t&&(e.style.left=t+"px"),void 0!==n&&(e.style.top=n+"px"),void 0!==r&&(e.style.top="unset",e.style.bottom=r+"px"),void 0!==o&&(e.style.left="unset",e.style.right=o+"px"))}(o,m,n,r)}};t.current.addEventListener("mousedown",(function(t){e&&(t.target.closest(o)||(t.stopPropagation(),t.preventDefault(),u=e.getBoundingClientRect(),d=document.documentElement.getBoundingClientRect(),c||(c=!0),t.touches&&(t=t.touches[0]),a=t.clientX,i=t.clientY,s=e.offsetLeft,l=e.offsetTop,document.addEventListener("mousemove",m)))}));document.addEventListener("mouseup",(function(){c&&(c=!1),document.removeEventListener("mousemove",m),"function"===typeof r&&r()}))}}),[o,t,r,n])};const ee={"&.Header":{display:"flex",width:"100%",justifyContent:"center",alignItems:"center",bg:"popupBg",zIndex:10,borderBottom:"1px solid",borderBottomColor:"newLine",cursor:"move",userSelect:"none","& > .Header-area":{flex:1,fontSize:"18px",lineHeight:"28px",fontWeight:"500",cursor:"default","&.center-area":{color:"t.primary",fontSize:"18px",lineHeight:"28px",textAlign:"center",flex:3,maxWidth:"80%",position:"relative"},"&.left-area":{display:"flex",position:"relative",left:"15px",textAlign:"left"},"&.right-area":{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"relative",right:"15px",textAlign:"right"}},".Header-navigation-pop":{width:"24px",height:"24px",cursor:"pointer"},height:"50px"}};var te=function(){function e(){this.eventMap={}}return e.prototype.on=function(e,t){var n=this;this.eventMap[e]||(this.eventMap[e]=[]);var r=this.eventMap[e].push(t);return function(){n.eventMap[e].splice(r-1,1)}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventMap[e]||[];r.forEach((function(e){e.apply(void 0,t)}))},e.prototype.off=function(e){delete this.eventMap[e]},e.prototype.emitLast=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventMap[e]||[],o=r[r.length-1];o&&o.apply(void 0,t)},e}();const ne=te;var re=new te,oe=(0,a.forwardRef)((function(e){var t=e.children,n=e.left,r=e.right,o=(0,a.useRef)();return Q({elRef:o,targetSelector:".ChatRoom",disableSelector:".Header-area"}),i().createElement(H.Z,{className:"Header",sx:ee,ref:o},i().createElement(H.Z,{className:"Header-area left-area"},n&&n),i().createElement(H.Z,{className:"Header-area center-area"},t),i().createElement(H.Z,{className:"Header-area right-area"},r&&r))})),ae=function(e){return i().createElement($,(0,o.__assign)({size:24,cursor:"pointer"},e))},ie=function(e){var t=(0,a.useCallback)((function(){re.emit(x,!1)}),[]);return i().createElement(X.Z,(0,o.__assign)({size:24,cursor:"pointer"},e,{onClick:t}))};const se=i().memo(oe);const le={"&.Maintain":{width:"390px",".Maintain-svg":{width:"96px",margin:"90px auto 20px auto"},".Maintain-tip":{color:"t.primary",textAlign:"center",fontSize:"14px",lineHeight:"22px","&.NeedUpdate":{margin:"0 73px"},"&.NeedLogin":{margin:"0 106px"}}}};var ce=function(){var e=J().getI18n;return i().createElement(H.Z,{className:"Maintain",sx:le},i().createElement(se,{right:i().createElement(ie,null)},i().createElement(z.Z,{variant:"subtitle1",className:"Header-title"},e("ChatRoom","Chat Room"))),i().createElement("div",{className:"Maintain-svg"},i().createElement("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M55 48L70.1422 32.8579C73.8929 29.1071 76 24.3043 76 19L76 12H20L20 18.7157C20 24.0201 22.1072 29.1071 25.8579 32.8579L41 48L25.8579 63.1421C22.1072 66.8929 20 71.9799 20 77.2843L20 84L76 84V77C76 71.6957 73.8929 66.8929 70.1422 63.1421L55 48Z",fill:"url(#paint0_linear)"}),i().createElement("path",{d:"M68 48L74 54L80 48L74 42L68 48Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M8 62L12 66L16 62L12 58L8 62Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M84 30H87V27H84V30Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M20 84V77C20 71.6957 22.1071 66.8929 25.8579 63.1421L41 48L25.8579 32.8579C22.1071 29.1071 20 24.3043 20 19L20 12L48 12L48 84H20Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M76 8L20 8L20 12L76 12L76 8Z",fill:"url(#paint1_linear)"}),i().createElement("path",{d:"M76 84L20 84L20 88L76 88L76 84Z",fill:"url(#paint2_linear)"}),i().createElement("path",{d:"M61.0002 36.3431L50.0002 47.3431L50.0002 65.9997L58.0005 73.9999L71.7082 73.9999C71.9017 74.9734 72.0002 75.9753 72.0002 76.9999L72.0002 84L24.0002 84L24.0002 77.2842C24.0002 76.1721 24.116 75.072 24.3409 73.9999L38.0006 73.9999L46.0007 65.9997L46.0003 47.3431L35.0003 36.3431L61.0002 36.3431Z",fill:"url(#paint3_linear)"}),i().createElement("defs",null,i().createElement("linearGradient",{id:"paint0_linear",x1:"76",y1:"12",x2:"76",y2:"84",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#FAFAFA"}),i().createElement("stop",{offset:"1",stopColor:"#E6E8EA"})),i().createElement("linearGradient",{id:"paint1_linear",x1:"76",y1:"48",x2:"20",y2:"48",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#929AA5"}),i().createElement("stop",{offset:"1",stopColor:"#76808F"})),i().createElement("linearGradient",{id:"paint2_linear",x1:"76",y1:"48",x2:"20",y2:"48",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#929AA5"}),i().createElement("stop",{offset:"1",stopColor:"#76808F"})),i().createElement("linearGradient",{id:"paint3_linear",x1:"24.0002",y1:"60.1716",x2:"72.0002",y2:"60.1716",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#F0B90B"}),i().createElement("stop",{offset:"1",stopColor:"#F8D33A"}))))),i().createElement(z.Z,{variant:"subtitle2",className:"Maintain-tip NeedUpdate"},e("Maintain-Text",{defaultValue:"Chat room is now under maintenance. Please come back later. Thank you for understanding."})))},ue=function(){var e=J().getI18n,t=U().STATIC_HOST;return i().createElement(H.Z,{className:"Maintain",sx:le},i().createElement(se,{right:i().createElement(ie,null)},i().createElement(z.Z,{variant:"subtitle1",className:"Header-title"},e("ChatRoom","Chat Room"))),i().createElement("div",{className:"Maintain-svg"},i().createElement(Y.Z,{src:t+"/static/chatroom/image/user-login.png"})),i().createElement(z.Z,{variant:"subtitle2",className:"Maintain-tip NeedLogin"},e("Maintain-NeedLogin","Please log in before using chat room")))},de=n("FZ38"),me=function(){return(0,l.useSelector)((function(e){return e.home.listIds}))},pe=function(){return(0,l.useSelector)((function(e){return e.chat.currentChatId===k?{}:e.home.byId[e.chat.currentChatId]}))},ge=function(){return(0,l.useSelector)((function(e){return e.chat.currentChatId}))},fe=n("Uqe+"),he=n("nsO7");function ve(e,t){return("0".repeat(t)+e).slice(-t)}function ye(){var e=new Date;return"["+ve(String(e.getHours()),2)+":"+ve(String(e.getMinutes()),2)+":"+ve(String(e.getSeconds()),2)+":"+ve(String(e.getMilliseconds()),3)+"] "}var be=function(){var e=!1;try{e="function"===typeof URLSearchParams&&new URLSearchParams(location.search).has("chatroomdebug")}catch(t){e=!1}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e?console.log.apply(null,(0,o.__spreadArray)([ye(),"chatroom web"],t)):""}}(),xe=n("BQ33"),Ie=n.n(xe),Ee=n("DNBt"),we=n.n(Ee),Ce=n("0fiJ"),Se=n.n(Ce),_e=n("dvnC"),Re=n.n(_e),Ne=n("YpRi"),Me=n.n(Ne),Oe=n("B5RX"),ke=n.n(Oe),Le=n("YiqZ"),Be=n.n(Le),Te=n("Vq3e"),Ae=n.n(Te),Ze=n("7NZ2"),Pe=n.n(Ze),Ue=n("5MVY"),He=n.n(Ue),De=n("aPkM"),je=n.n(De);Ie().extend(Re()),Ie().extend(Me()),Ie().extend(He()),Ie().extend(je()),Ie().extend(Be()),Ie().extend(ke()),Ie().extend(Ae()),Ie().extend(Pe()),Ie().extend(we()),Ie().extend(Se());const Fe=Ie();var Ve,ze,qe,We,Ge;!function(e){e[e.NONE=0]="NONE",e[e.POSITION=1]="POSITION",e[e.TRADE_PNL=2]="TRADE_PNL"}(Ve||(Ve={})),function(e){e[e.HIDDEN_MESSAGE=0]="HIDDEN_MESSAGE",e[e.UN_HIDDEN_MESSAGE=1]="UN_HIDDEN_MESSAGE",e[e.FORBIDDEN_PERSON=2]="FORBIDDEN_PERSON",e[e.SWITCH_VIEW=3]="SWITCH_VIEW",e[e.ADD_MEMBER=4]="ADD_MEMBER",e[e.REMOVE_MEMBER=5]="REMOVE_MEMBER",e[e.ERROR_INFO=6]="ERROR_INFO",e[e.MODIFY_GROUP_NAME=7]="MODIFY_GROUP_NAME",e[e.FORBIDDEN_GROUP_MEMBER=8]="FORBIDDEN_GROUP_MEMBER"}(ze||(ze={})),function(e){e[e.WEB=0]="WEB",e[e.APP=1]="APP"}(qe||(qe={})),function(e){e.NONE="NONE",e.POSITION="POSITION",e.TRADE_PNL="TRADE_PNL"}(We||(We={})),function(e){e.GROUP_CHAT="GROUP_CHAT",e.CHANNEL="CHANNEL"}(Ge||(Ge={}));var Ye,Je,Ke=[function(e){var t,n=e.ids,r=e.chatType,o=e.chatId,a=e.state;if(r!==Ge.CHANNEL)return n;var i=((null===(t=a.messages.byRoomId[o])||void 0===t?void 0:t.meta)||{}).hiddenIds,s=void 0===i?[]:i;return 0===s.length?n:n.filter((function(e){return!s.includes(e)}))},function(e){var t=e.ids,n=e.state,r=e.chatType,o=e.messages,a=n.muteUsers,i=void 0===a?[]:a;return r!==Ge.CHANNEL||0===i.length?t:t.filter((function(e){return o[e]?!i.some((function(t){return t.blockChatUid===o[e].sender.id&&o[e].time>t.dbCreateTime})):console.warn("@@@@ filter message id not exist",o,e)}))}],$e=function(e){return Ke.reduce((function(t,n){return n((0,o.__assign)((0,o.__assign)({},e),{ids:t}))}),(0,o.__spreadArray)([],e.ids))},Xe=function(e,t,n){return e.reduce((function(e,r){return e[r]=t[r]?(0,o.__spreadArray)([],t[r].meta[n]):[],e}),{})},Qe=function(e,t,n,o,a,i){be("@@@@@=====getViewportSlice=====",n,t,i);var s,l,c=$e({ids:e,chatId:i,state:a,chatType:o,messages:a.messages.byRoomId[i].byId}),u=c.length,d=t?function(e,t){return t<e[0]?0:t>e[e.length-1]?e.length-1:e.findIndex((function(n,r){return n===t||n<t&&e[r+1]>t}))}(c,t):-1,m=n===r.Backwards?d:d+1||u,p=m-L,g=m+L-1-(p>=0?0:p),f=c.slice(Math.max(0,p),g+1);switch(n){case r.Backwards:s=m>0,l=p>=0;break;case r.Forwards:s=m<u,l=g<=u-1;break;case r.Around:default:s=f.length>0,l=f.length===L}return be("================","offsetId",t,"listedIds",c,"viewportIds",f,"from",p,"to",g,"areSomeLocal",l,"areAllLocal",l),{newViewportIds:f,areSomeLocal:s,areAllLocal:l}},et=function(e){return e.sort((function(e,t){return e-t}))},tt=function(e){var t=e.sequence;return{chatId:e.groupId||e.channelId,payload:e.payload,sequence:+t,sender:{id:+e.fromChatUid,name:e.fromName},cardType:Ve[e.cardType],cardExt:e.cardExt,replyExt:e.replyExt,time:e.time,toAdmin:e.toAdmin,isAdmin:e.isAdmin}},nt={selectCurrentChatMessages:function(e){var t=e.chat.currentChatId||k;return e.chat.messages.byRoomId[t]},selectReplyMessage:function(e){return e.chat.replyMessageId?(0,he.pick)(nt.selectCurrentChatMessages(e).byId[e.chat.replyMessageId],["sender","payload","cardType","cardExt","time"]):void 0}},rt=function(e){return(0,l.useSelector)((function(t){return nt.selectCurrentChatMessages(t).byId[e]}))},ot=function(){return(0,l.useSelector)((function(e){return nt.selectReplyMessage(e)}))},at=function(){return(0,l.useSelector)((function(e){return e.common.userInfo}))},it=function(){return(0,l.useSelector)((function(e){return e.common.isExistFutureAccount}))};!function(e){e.NONE="NONE",e.POSITION="POSITION",e.TRADE_PNL="TRADE_PNL"}(Ye||(Ye={})),function(e){e.GROUP_CHAT="GROUP_CHAT",e.CHANNEL="CHANNEL"}(Je||(Je={}));var st=n("O94r"),lt=n.n(st);function ct(e,t,n){return void 0===n&&(n=!1),e?Fe(e).isToday()?Fe(e).format("HH:mm"):Fe(e).isYesterday()?""+t.yesterday+(n?Fe(e).format(" HH:mm"):""):Fe(e).format("YYYY/MM/DD"):""}var ut={b:"<b>$1</b>",i:"<i>$1</i>",u:"<u>$1</u>",c:'<span style="color: #0ECB81">$1</span>'},dt=function(e){return Object.entries(ut).forEach((function(t){var n=t[0],r=t[1];e=e.replace(new RegExp("&lt;"+n+"&gt;(.*?)&lt;/"+n+"&gt;","g"),r)})),e};const mt={"&.Room":{width:"100%",height:"70px",display:"flex",justifyContent:"space-between",flexDirection:"column",p:"10px 12px 10px 15px",minHeight:"60px",borderBottom:"0.5px solid",borderBottomColor:"newLine",bg:"modalBg",cursor:"pointer"},".Room-info":{display:"flex",justifyContent:"space-between",alignItems:"center",".Room-info-name":{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginRight:"5px",overflow:"hidden",whiteSpace:"nowrap",flex:1},".Room-info-name-official":{display:"flex",justifyContent:"center",alignItems:"center",background:"linear-gradient(90deg, #fcd535 0%, #f0b90b 100%)",borderRadius:"2px",marginRight:"10px",padding:"2px 4px",fontSize:"12px",minWidth:"45px",height:"16px"},".Room-info-name-text":{color:"t.primary",fontSize:"16px",lineHeight:"24px",width:"100%",textOverflow:"ellipsis",overflow:"hidden"},".Room-info-last-update":{color:"t.third",fontSize:"12px",lineHeight:"16px"}},".Room-Meta":{display:"flex",justifyContent:"space-between",alignItems:"center",".Room-msg":{color:"t.secondary",fontSize:"12px",lineHeight:"16px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".unread-dot":{width:"8px",height:"8px",bg:"#f6465d",borderRadius:"50%",display:"none","&.visible":{display:"block"}}},"&.active":{bg:"bg4",".Room-info-name-text":{color:"t.white"},".Room-info-last-update":{color:"t.white"},".Room-msg":{color:"t.white"}}};const pt=i().memo((function(e){var t=e.data,n=e.isOfficial,r=e.isUnread,o=e.onClick,s=e.active,l=J().getI18n,c=l("Yesterday","Yesterday"),u=l("Official","Official"),d=(0,a.useCallback)((function(){o(t)}),[t,o]),m=t.id,p=t.name,g=t.lastMsg.payload,f=t.lastMsgTime;return(0,a.useMemo)((function(){return i().createElement(H.Z,{"data-testid":n?"ChatRoom-RoomId-"+m:"ChatRoom-RoomId-Group-"+m,className:lt()("Room",s&&"active"),sx:mt,onClick:d},i().createElement(H.Z,{className:"Room-info"},i().createElement(H.Z,{className:"Room-info-name"},n&&i().createElement(z.Z,{className:"Room-info-name-official"},u),i().createElement(z.Z,{variant:"subtitle1",className:"Room-info-name-text"},p)),i().createElement(z.Z,{variant:"caption1",className:"Room-info-last-update"},ct(f,{yesterday:c}))),i().createElement(H.Z,{className:"Room-Meta"},g&&i().createElement(z.Z,{variant:"caption1",className:"Room-msg",dangerouslySetInnerHTML:{__html:dt(g)}}),i().createElement(H.Z,{className:lt()("unread-dot",r&&"visible")})))}),[s,d,n,r,f,p,u,g,c])}));const gt=function(){var e=J().getI18n;return(0,a.useMemo)((function(){return{id:T,type:"CHANNEL",name:e("Room-FuturesChannelName","\u671f\u8d27\u804a\u5929\u623f"),lastMsg:{payload:e("Room-OpenFuturesToChat","Open a Futures account to start chatting")}}}),[e])};var ft={"&.RoomList":{width:"100%",height:"calc(100% - 50px)",overflow:"auto"}};const ht=i().memo((function(){var e=(0,l.useDispatch)(),t=(0,l.useSelector)((function(e){return e.home.byId})),n=me(),r=(0,l.useSelector)((function(e){return e.chat.messages.byRoomId})),s=ge(),c=it(),u=gt(),d=(0,fe.Z)(E),m=d[0],p=d[1],g=(0,a.useMemo)((function(){var e=n.reduce((function(e,n){return(0,o.__spreadArray)((0,o.__spreadArray)([],e),[t[n]])}),[]);return c||e.unshift(u),e}),[u,c,n,t]),f=(0,a.useCallback)((function(t){var n=t.id;(0,l.batch)((function(){p(n),e.chat.updateCurrentChatId(n),e.common.updateMiddleColumnViewType("ROOM")}))}),[e.chat,e.common,p]);return(0,a.useEffect)((function(){c&&s===T&&g.length>1&&e.chat.setCurrentFirstChatId({exclude:T})}),[e.chat,c,s,g.length]),(0,a.useEffect)((function(){if(s===k&&g.length){var t=void 0;m&&m>0&&g.includes(m)?(t=m,e.chat.updateCurrentChatId(t)):(t=g[0].id,e.chat.updateCurrentChatId(t),p(t))}else 1===g.length&&g[0].id===T&&e.chat.updateCurrentChatId(T)}),[e.chat,m,s,p,g]),i().createElement(H.Z,{className:"RoomList",sx:ft},g.length?g.map((function(e){var t,n,o=(null===(t=r[e.id])||void 0===t?void 0:t.meta)||{listedIds:[],unReadIds:[]},a=o.listedIds,l=o.unReadIds,c=a.slice(-1)[0],u=l&&l.length>0||(e.sequence||0)>(c||0);return i().createElement(pt,{key:e.id,data:e,isOfficial:(n=e,n.type===Je.CHANNEL),isUnread:u,active:s===e.id,onClick:f})})):i().createElement(q.Z,null))}));var vt=n("7nmT"),yt=n("Yn3l"),bt=n("Ys09"),xt=n("DhFf");const It=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M7.05 8.465L10.585 12 7.05 15.536l1.414 1.414L12 13.414l3.535 3.536 1.414-1.414L13.414 12l3.535-3.535-1.414-1.415L12 10.586 8.464 7.05 7.05 8.465z",fill:"#76808F"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",fill:"#76808F"}))};const Et=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M11 6v5H6v2h5v5h2v-5h5v-2h-5V6h-2z",fill:"#76808F"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",fill:"#76808F"}))};function wt(e){return(0,W.v_)(G+"/v1/private/future/chatroom/create-chat-group",{groupName:e})}function Ct(e,t){return(0,W.v_)(G+"/v1/private/future/chatroom/modify-chat-group",{groupId:e,groupName:t})}function St(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/get-chat-group",{groupId:e})];case 1:return t=r.sent(),[3,3];case 2:return n=r.sent(),t={success:!1,message:null===n||void 0===n?void 0:n.message},[3,3];case 3:return[2,t]}}))}))}function _t(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/join-chat-group",{groupId:e})];case 1:return t=r.sent(),[3,3];case 2:return n=r.sent(),t={success:!1,message:null===n||void 0===n?void 0:n.message},[3,3];case 3:return[2,t]}}))}))}function Rt(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/quit-chat-group",{groupId:e})];case 1:return t=r.sent(),[3,3];case 2:return n=r.sent(),t={success:!1,message:null===n||void 0===n?void 0:n.message},[3,3];case 3:return[2,t]}}))}))}function Nt(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/get-block-users")];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),e={success:!1,message:null===t||void 0===t?void 0:t.message},[3,3];case 3:return[2,e]}}))}))}var Mt={sx:{mt:0,width:"100%",height:"32px",bg:"inputBg",borderRadius:"20px",border:"none",".bn-input-prefix":{display:"flex",justifyContent:"center",alignItems:"center",p:"0 12px"},".bn-input-suffix":{display:"flex",mr:"9px",cursor:"pointer"},"& input":{p:0,borderRadius:"20px",fontSize:"14px",color:"t.secondary"}}};const Ot={"&.Search":{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"50px",borderBottom:"1px solid",borderBottomColor:"newLine",p:"0 8px"},".Search-create-room":{color:"t.third",ml:"8px",cursor:"pointer"}};const kt=i().memo((function(e){var t=e.onSearched,n=e.onCancelSearch,r=e.handleRoomCreateClick,s=J().getI18n,l=at().canGroup,c=(0,a.useRef)(!1),u=(0,a.useState)(""),d=u[0],m=u[1],p=(0,a.useState)(""),g=p[0],f=p[1],h=(0,yt.Z)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,n,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return g?[4,St(g)]:[2];case 1:return e=o.sent(),n=e.success,r=e.data,f(""),c.current?[2]:(t(n?r:void 0),[2])}}))}))}),300,[g])[1],v=(0,a.useCallback)((function(e){var t=e.currentTarget.value;m(t),c.current=!1,t||(h(),n()),t.length>=7?f(t):h()}),[h,n]),y=(0,a.useCallback)((function(){(0,vt.unstable_batchedUpdates)((function(){m(""),f(""),c.current=!0})),h(),n()}),[h,n]),b=(0,a.useMemo)((function(){return i().createElement(xt.Z,{size:20,className:"Search-create-room"})}),[]),x=(0,a.useMemo)((function(){return d?i().createElement(It,{size:20,onClick:y}):null}),[y,d]);return i().createElement(H.Z,{"data-testid":"ChatRoom-HomeRoomSearch",className:"Search",sx:Ot},i().createElement(bt.Z,{boxProps:Mt,value:d,variant:"line",prefix:b,suffix:x,onChange:v,placeholder:s("Room-Search-placeholder","Search Room ID + Add")}),l&&i().createElement(Et,{"data-testid":"ChatRoom-HomeRoomCreate",className:"Search-create-room",size:24,onClick:r}))}));const Lt={"&.SliderBar":{position:"relative",width:"50px",height:"100%",bg:"moduleBg",p:"10px",display:"flex",flexDirection:"column",cursor:"move",userSelect:"none"},".SliderBar-menu":{cursor:"pointer",width:"32px",height:"32px",mb:"10px","&.toggle-list-menu":{position:"absolute",bottom:"12px",left:"10px",mb:0}}};var Bt=function(){return i().createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("circle",{cx:"16",cy:"16",r:"16",fill:"#707A8A"}),i().createElement("path",{d:"M8.5 15.1519C8.5 18.3563 11.1141 20.9704 14.3185 20.9704C15.5833 20.9704 16.8482 20.5488 17.7758 19.7898L21.4861 23.5002L22.6667 22.3196L18.9563 18.6093C19.631 17.6817 20.1369 16.4168 20.1369 15.1519C20.1369 13.5498 19.4623 12.1162 18.4504 11.02C17.4385 10.0081 15.9206 9.3335 14.3185 9.3335C11.1141 9.3335 8.5 11.9476 8.5 15.1519ZM17.1855 12.2006C17.9444 12.9595 18.3661 13.9714 18.3661 15.0676C18.3661 16.1639 17.9444 17.1758 17.1855 17.9347C16.4266 18.6936 15.4147 19.1152 14.3185 19.1152C13.2222 19.1152 12.2103 18.6936 11.4514 17.9347C10.6081 17.2601 10.1865 16.2482 10.1865 15.1519C10.1865 14.0557 10.6081 13.0438 11.3671 12.2849C12.126 11.4416 13.2222 11.02 14.3185 11.02C15.4147 11.02 16.4266 11.4416 17.1855 12.2006Z",fill:"white"}))},Tt=function(){return i().createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("circle",{cx:"16",cy:"16",r:"16",fill:"#707A8A"}),i().createElement("path",{d:"M15.1667 10.9998V15.1665H11L11 16.8332H15.1667V20.9998H16.8334V16.8332H21V15.1665H16.8334V10.9998H15.1667Z",fill:"white"}),i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.3334 15.9998C24.3334 11.3975 20.6024 7.6665 16 7.6665C11.3976 7.6665 7.66669 11.3975 7.66669 15.9998C7.66669 20.6022 11.3976 24.3332 16 24.3332C20.6024 24.3332 24.3334 20.6022 24.3334 15.9998ZM22.6667 15.9998C22.6667 12.3179 19.6819 9.33317 16 9.33317C12.3181 9.33317 9.33335 12.3179 9.33335 15.9998C9.33335 19.6817 12.3181 22.6665 16 22.6665C19.6819 22.6665 22.6667 19.6817 22.6667 15.9998Z",fill:"white"}))},At=function(){return i().createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("circle",{cx:"16",cy:"16",r:"16",fill:"#F0B90B"}),i().createElement("path",{d:"M10.6666 10.6665H9.33331V11.9998H10.6666V10.6665Z",fill:"#181A20"}),i().createElement("path",{d:"M22.6666 10.6665H12.6666V11.9998H22.6666V10.6665Z",fill:"#181A20"}),i().createElement("path",{d:"M9.33331 15.3332H10.6666V16.6665H9.33331V15.3332Z",fill:"#181A20"}),i().createElement("path",{d:"M22.6666 15.3332H12.6666V16.6665H22.6666V15.3332Z",fill:"#181A20"}),i().createElement("path",{d:"M9.33331 19.9998H10.6666V21.3332H9.33331V19.9998Z",fill:"#181A20"}),i().createElement("path",{d:"M22.6666 19.9998H12.6666V21.3332H22.6666V19.9998Z",fill:"#181A20"}))};const Zt=i().memo((function(e){var t=e.onToggleList,n=e.handleRoomCreateClick,r=J().getI18n,o=(0,a.useRef)(),s=at().canGroup;return Q({elRef:o,targetSelector:".ChatRoom",disableSelector:".SliderBar-menu"}),i().createElement(H.Z,{sx:Lt,className:"SliderBar",ref:o},i().createElement("div",{className:"SliderBar-menu",onClick:t},i().createElement(Bt,null)),s&&i().createElement("div",{className:"SliderBar-menu",onClick:n},i().createElement(Tt,null)),i().createElement("div",{className:"SliderBar-menu toggle-list-menu",onClick:t},i().createElement(de.Z,{arrow:!0,enablePortal:!0,tip:r("RoomList-expand","Expand Chatroom List")},i().createElement(At,null))))}));var Pt=n("MvZp"),Ut=n("X46w");const Ht={"&.Room-Searched":{display:"flex",justifyContent:"center",flexDirection:"column",padding:"10px 15px",borderBottom:"0.5px solid",borderBottomColor:"newLine",bg:"modalBg",height:"70px",".Room-Searched-container":{display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center",".Room-Searched-info":{overflow:"hidden",".Room-Searched-name":{color:"t.primary",fontSize:"16px",lineHeight:"24px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".Room-Searched-id":{color:"t.third",fontSize:"12px",lineHeight:"16px",marginTop:"6px"}},".Room-Searched-join":{minWidth:"40px",width:"40px",height:"24px",margin:"0",fontSize:"12px !important",lineHeight:"16px !important"}},".Room-Searched-full":{color:"t.sell",fontSize:"10px",lineHeight:"16px"}}};const Dt=i().memo((function(e){var t=e.data,n=(0,Pt.Z)().enqueueNotification,r=J().getI18n,s=(0,l.useDispatch)(),c=t.maxUserNum,u=t.groupName,d=t.groupId,m=t.groupUserNum,p=m>=c,g=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,t,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return p?[2]:[4,_t(d)];case 1:return e=o.sent(),t=e.success,a=e.data,t&&a?(n({message:r("Room-JoinedSuccess","Joined Successfully"),variant:"success"}),[4,s.home.initialUserRoomList()]):[3,3];case 2:o.sent(),s.chat.updateCurrentChatId(d),o.label=3;case 3:return[2]}}))}))}),[p,d,n,r,s.home,s.chat]);return i().createElement(H.Z,{className:"Room-Searched",sx:Ht},i().createElement("div",{className:"Room-Searched-container"},i().createElement("div",{className:"Room-Searched-info"},i().createElement(z.Z,{variant:"subtitle1",className:"Room-Searched-name"},u,"(",m,")"),i().createElement(z.Z,{variant:"caption1",className:"Room-Searched-id"},"ID: ",d)),i().createElement(Ut.Z,{"data-testid":"ChatRoom-HomeRoomJoin",variant:"primary",className:"Room-Searched-join",disabled:p,onClick:g},r("Room-Search-Join","Join"))),p&&i().createElement(z.Z,{variant:"caption1",className:"Room-Searched-full"},r("Room-Search-FullDesc","The room is full. New member unable to join.")))}));const jt={"&.RoomSearchedEmpty":{textAlign:"center",".RoomSearchedEmpty-icon":{width:"96px",height:"96px",margin:"98px auto 16px auto"},".RoomSearchedEmpty-title":{color:"t.secondary"}}};var Ft=i().createElement("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M63.9995 7.99988H25.9995V87.9999H83.9995V27.9999L63.9995 7.99988ZM35.9995 36.9999H73.9995V40.9999H35.9995V36.9999ZM35.9995 45.9999H73.9995V49.9999H35.9995V45.9999ZM73.9995 54.9999H35.9995V58.9999H73.9995V54.9999Z",fill:"url(#paint0_linear)"}),i().createElement("path",{d:"M61.9995 71.0001L65.9995 67.0001L69.9995 71.0001L65.9995 75.0001L61.9995 71.0001Z",fill:"white"}),i().createElement("path",{d:"M85.9995 49.9999L88.9995 46.9999L91.9995 49.9999L88.9995 52.9999L85.9995 49.9999Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M46.9995 21L49.9995 18L52.9995 21L49.9995 24L46.9995 21Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M84 28.0001H64V8.00012L84 28.0001Z",fill:"#E6E8EA"}),i().createElement("path",{d:"M21.5005 61.5002L7.00046 76.0001",stroke:"url(#paint1_linear)",strokeWidth:"8"}),i().createElement("path",{d:"M35 29.9999C44.9411 29.9999 53 38.0588 53 47.9999C53 57.941 44.9411 65.9999 35 65.9999C25.0589 65.9999 17 57.941 17 47.9999C17 38.0588 25.0589 29.9999 35 29.9999Z",stroke:"url(#paint2_linear)","stroke-Width":"4"}),i().createElement("defs",null,i().createElement("linearGradient",{id:"paint0_linear",x1:"83.9995",y1:"10.162",x2:"83.9995",y2:"87.9999",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#FAFAFA"}),i().createElement("stop",{offset:"1",stopColor:"#E6E8EA"})),i().createElement("linearGradient",{id:"paint1_linear",x1:"7.00049",y1:"68.7502",x2:"21.5005",y2:"68.7502",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#929AA5"}),i().createElement("stop",{offset:"1",stopColor:"#76808F"})),i().createElement("linearGradient",{id:"paint2_linear",x1:"15",y1:"47.9999",x2:"55",y2:"47.9999",gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#929AA5"}),i().createElement("stop",{offset:"1",stopColor:"#76808F"}))));const Vt=i().memo((function(){var e=J().getI18n;return i().createElement(H.Z,{className:"RoomSearchedEmpty",sx:jt},i().createElement("div",{className:"RoomSearchedEmpty-icon"},Ft),i().createElement(z.Z,{variant:"body2",className:"RoomSearchedEmpty-title"},e("Room-Search-NoRoomFound","No rooms found")))}));const zt={"&.LeftColumn":{position:"relative",bg:"popupBg",overflow:"hidden",borderRight:"1px solid",borderRightColor:"newLine",height:"100%"},".LeftColumn-container":{width:"265px",height:"100%"},".toggle-list-menu":{position:"absolute",cursor:"pointer",width:"32px",height:"32px",bottom:"12px",right:"12px"}};const qt=i().memo((function(){var e=(0,l.useDispatch)(),t=J().getI18n,n=ge(),r=(0,a.useRef)(!0),o=(0,a.useState)(!0),s=o[0],c=o[1],u=(0,a.useState)(!1),d=u[0],m=u[1],p=(0,a.useState)(void 0),g=p[0],f=p[1],h=(0,a.useRef)(),v=(0,a.useCallback)((function(){return c((function(e){return r.current=!e,!e}))}),[c]),y=(0,a.useCallback)((function(e){f(e),m(!0)}),[f,m]),b=(0,a.useCallback)((function(){return m(!1)}),[m]),x=(0,a.useCallback)((function(){e.common.updateMiddleColumnViewType("CREATE_ROOM")}),[e.common]);return(0,a.useLayoutEffect)((function(){var e,t;s&&r.current&&(null===(t=null===(e=h.current)||void 0===e?void 0:e.querySelector('[data-room-id="'+n+'"]'))||void 0===t||t.scrollIntoView(),r.current=!1)}),[s,n]),(0,a.useEffect)((function(){e.common.updateRightColumnViewType(null)}),[e.common]),(0,a.useEffect)((function(){(0,l.batch)((function(){e.home.initialUserRoomList(),e.chat.getMuteUsers()}))}),[e.chat,e.common,e.home]),(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"LeftColumn",sx:zt,ref:h},s&&i().createElement("div",{className:"LeftColumn-container"},i().createElement(kt,{onSearched:y,onCancelSearch:b,handleRoomCreateClick:x}),d?g?i().createElement(Dt,{data:g}):i().createElement(Vt,null):i().createElement(i().Fragment,null,i().createElement(ht,null),i().createElement("div",{className:"toggle-list-menu",onClick:v},i().createElement(de.Z,{arrow:!0,enablePortal:!0,tip:t("RoomList-hide","Hide Chatroom List")},i().createElement(At,null))))),!s&&i().createElement(Zt,{onToggleList:v,handleRoomCreateClick:x}))}),[t,b,y,x,v,s,d,g])}));var Wt={position:"absolute",top:0,right:0,bottom:0,left:0},Gt={justifyContent:"space-around",alignItems:"center",display:"none","&.show":(0,o.__assign)({display:"flex"},Wt),".mask":(0,o.__assign)((0,o.__assign)({},Wt),{bg:"rgba(0,0,0,.1)",zIndex:9998}),".scale-enter":{opacity:0,transform:"scale(0.6)"},".scale-enter-active":{opacity:1,transform:"scale(1)",transition:"opacity 300ms, transform 300ms"},".scale-exit":{opacity:1},".scale-exit-active":{opacity:0,transform:"scale(0.6)",transition:"opacity 300ms, transform 300ms"},".slide-enter":{transform:"translate3d(0, 100%, 0)"},".slide-enter-active":{transform:"translate3d(0, 0, 0)",transition:"transform 300ms"},".slide-exit":{},".slide-exit-active":{transform:"translate3d(0, 100%, 0)",transition:"transform 300ms"},".fade-enter":{opacity:0},".fade-enter-active":{opacity:1,transition:"opacity 200ms"},".fade-exit":{opacity:1},".fade-exit-active":{opacity:0,transition:"opacity 200ms"}},Yt={".Dialog":{display:"flex",flexDirection:"column"},boxShadow:"0px 8px 16px rgba(20, 21, 26, 0.16), 0px 16px 32px rgba(71, 77, 87, 0.16),\n    0px 0px 1px rgba(20, 21, 26, 0.1)",bg:"modalBg",zIndex:9999,overflow:"hidden","&.dialog-center":{position:"relative",borderRadius:"10px",bg:"popupBg",".default-dialog":{width:"295px",padding:"24px 22.5px",".default-dialog-title":{fontSize:"18px",lineHeight:"28px",margin:"8px 0 24px"},".default-dialog-slogan":{mb:"16px",textAlign:"center",wordBreak:"break-all",wordWrap:"break-word"},".default-dialog-button-wrap":{display:"flex",justifyContent:"space-around",minHeight:"40px",width:"250px",".default-dialog-button":{height:"40px",lineHeight:"40px",borderRadius:"4px",border:"none"}}}},"&.dialog-bottom":{position:"absolute",borderRadius:"10px 10px 0 0",bottom:"0px",left:"0",right:"0",".default-dialog":{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:"0",".default-dialog-title":{backgroundColor:"popupBg",borderBottom:"0.5px solid",borderBottomColor:"newLine"},".default-dialog-slogan":{backgroundColor:"popupBg","& > *":{height:"50px",lineHeight:"50px",textAlign:"center",color:"t.secondary",cursor:"pointer","& > *":{lineHeight:"50px !important"}}},".default-dialog-button-wrap":{backgroundColor:"popupBg",marginTop:"6px",minHeight:"50px",".default-dialog-button":{minWidth:"112px",height:"50px",lineHeight:"50px",textAlign:"center",cursor:"pointer",color:"t.third"}}}},".default-dialog":{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:"0",".default-dialog-icon":{width:"60px",height:"60px"},".default-dialog-title":{width:"100%",fontSize:"16px",lineHeight:"50px",color:"t.primary",whiteSpace:"pre",textAlign:"center"},".default-dialog-slogan":{width:"100%",fontSize:"14px",lineHeight:"22px",color:"t.primary",wordBreak:"break-all"},".default-dialog-button-wrap":{width:"100%",marginTop:"6px",minHeight:"50px",".default-dialog-button":{minWidth:"112px",height:"50px",lineHeight:"50px",textAlign:"center",cursor:"pointer"}}}};const Jt=function(e){e.sx,e.maskStyles;var t=e.center,n=void 0!==t&&t,r=e.className,a=void 0===r?"":r,s=e.visible,l=e.onMaskClick,c=e.children,u=(0,o.__rest)(e,["sx","maskStyles","center","className","visible","onMaskClick","children"]);return i().createElement(H.Z,{className:lt()("dialog-wrap",{show:s}),sx:Gt},i().createElement(H.Z,{className:"mask",onClick:l}),i().createElement(H.Z,(0,o.__assign)({sx:Yt,className:lt()(n?"dialog-center":"dialog-bottom",a)},u),i().createElement(H.Z,{className:"Dialog"},c)))};var Kt=function(){},$t=i().createContext({hide:Kt,show:Kt}),Xt=function(){return(0,a.useContext)($t)},Qt=new ne,en=function(e){var t,n=e.children,r=(0,a.useRef)({}),s=(0,a.useState)(!1),l=s[0],c=s[1],u=(0,a.useState)({})[1],d=(0,a.useCallback)((function(e){void 0===e&&(e={}),r.current=(0,o.__assign)((0,o.__assign)((0,o.__assign)({},r.current),{center:!0}),e),(0,vt.unstable_batchedUpdates)((function(){c(!0),u({})}))}),[]),m=(0,a.useCallback)((function(){r.current={},c(!1)}),[]),p=(0,a.useMemo)((function(){return{show:function(e){void 0===e&&(e={}),Qt.emitLast("dialog-show",e)},hide:function(){Qt.emitLast("dialog-hide")}}}),[]);(0,a.useEffect)((function(){var e=Qt.on("dialog-show",d),t=Qt.on("dialog-hide",m);return function(){e(),t()}}),[d,m]);var g=(0,a.useCallback)((function(){r.current.maskClose&&m()}),[m]),f=(0,a.useCallback)((function(){var e,t,n,o,a,s,l,c,u,d,m,p,g;return r.current.component?r.current.component:r.current.center?i().createElement(H.Z,{className:"default-dialog"},(null===(e=r.current)||void 0===e?void 0:e.icon)&&("string"===typeof(null===(t=r.current)||void 0===t?void 0:t.icon)?i().createElement(Y.Z,{src:null===(n=r.current)||void 0===n?void 0:n.icon,className:"default-dialog-icon"}):r.current.icon),(null===(o=r.current)||void 0===o?void 0:o.title)&&i().createElement(z.Z,{variant:"headline4",className:"default-dialog-title"},null===(a=r.current)||void 0===a?void 0:a.title),(null===(s=r.current)||void 0===s?void 0:s.content)&&i().createElement(z.Z,{variant:"body2",className:"default-dialog-slogan"},null===(l=r.current)||void 0===l?void 0:l.content),null===(c=r.current)||void 0===c?void 0:c.footer):i().createElement(H.Z,{className:"default-dialog"},(null===(u=r.current)||void 0===u?void 0:u.title)&&i().createElement(z.Z,{variant:"subtitle1",className:"default-dialog-title"},null===(d=r.current)||void 0===d?void 0:d.title),(null===(m=r.current)||void 0===m?void 0:m.content)&&i().createElement(z.Z,{variant:"body1",className:"default-dialog-slogan"},null===(p=r.current)||void 0===p?void 0:p.content),null===(g=r.current)||void 0===g?void 0:g.footer)}),[]),h=i().createElement(Jt,{center:null===(t=r.current)||void 0===t?void 0:t.center,onMaskClick:g,visible:l},f()),v="undefined"===typeof n?null:i().isValidElement(n)?i().createElement(i().Fragment,null,n,h):n(h);return i().createElement($t.Provider,{value:p},v)},tn=function(e){if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(n){return console.warn("Copy to clipboard failed.",n),!1}finally{document.body.removeChild(t)}}return!1},nn={"&.RoomCreateDialog":{width:"295px",minHeight:"266px",display:"flex",flexDirection:"column",alignItems:"center",padding:"25px 22.5px",borderRadius:"7px",margin:"0 auto",bg:"cardBg",".RoomCreateDialog-icon":{width:"60px",height:"60px"},".RoomCreateDialog-title":{fontSize:"18px",lineHeight:"28px",color:"t.primary",marginTop:"20px",marginBottom:"8px",whiteSpace:"pre",textAlign:"center"},".RoomCreateDialog-slogan":{fontSize:"14px",lineHeight:"22px",color:"t.primary",marginBottom:"16px"},".RoomCreateDialog-btn":{width:"100%",height:"40px"}}};const rn=i().memo((function(e){var t=e.data,n=e.onClose,r=(0,Pt.Z)().enqueueNotification,o=J().getI18n,s=U().STATIC_HOST,l=(0,a.useCallback)((function(){tn(t.groupId.toString())&&(r({message:o("Home-CopySuccess","Copied Successfully"),variant:"success"}),n())}),[t.groupId,r,o,n]);return i().createElement(H.Z,{className:"RoomCreateDialog",sx:nn},i().createElement(Y.Z,{src:s+"/static/chatroom/image/create-success.png",className:"RoomCreateDialog-icon"}),i().createElement(z.Z,{variant:"headline4",className:"RoomCreateDialog-title"},o("Room-CrateSuccess","Successfully Created \n Chat Room")),i().createElement(z.Z,{variant:"body2",className:"RoomCreateDialog-slogan"},o("Room-InviteFriendsToJoin","Invite friends to start chat")),i().createElement(Ut.Z,{variant:"primary",className:"RoomCreateDialog-btn",onClick:l},o("Room-CopyRoomId","Copy Room ID")," ",t.groupId))}));const on={"&.RoomCreate":{position:"absolute",width:"100%",height:"100%",bg:"popupBg",zIndex:100,".RoomCreate-content":{p:"20px 15px 0 15px"},".Room-name-input":{height:"50px",color:"t.primary",bg:"inputBg",borderRadius:"4px",padding:"0 10px",fontSize:"16px",lineHeight:"24px",margin:"5px 0"},".RoomCreate-title":{color:"t.third"},".RoomCreate-max-len":{color:"t.third"},".RoomCreate-btn":{position:"absolute",bottom:"10px",width:"calc(100% - 30px)",height:"40px"}}};const an=i().memo((function(){var e=(0,Pt.Z)().enqueueNotification,t=(0,l.useDispatch)(),n=Xt(),r=J().getI18n,s=(0,a.useState)(""),c=s[0],u=s[1],d=(0,a.useState)(!1),m=d[0],p=d[1],g=(0,a.useCallback)((function(e){return u(e.currentTarget.value)}),[]),f=(0,a.useCallback)((function(t){e({message:t||r("RoomCreate-CreateFailed","Access failed, please refresh"),variant:"error"})}),[e,r]),h=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var a,s,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:c||e({message:r("RoomCreate-CanNotEmpty","Field can not be empty"),variant:"error"}),p(!0),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,wt(c)];case 2:return a=o.sent(),s=a.success,l=a.data,s?[4,t.home.initialUserRoomList()]:[3,4];case 3:o.sent(),t.chat.updateChatIds([l.groupId]),setTimeout((function(){t.chat.updateCurrentChatId(l.groupId),t.common.updateMiddleColumnViewType("ROOM"),n.show({component:i().createElement(rn,{data:l,onClose:function(){return n.hide()}})})}),300),o.label=4;case 4:return[3,6];case 5:return o.sent(),f(),[3,6];case 6:return p(!1),[2]}}))}))}),[n,t.chat,t.common,t.home,e,r,c,f]),v=(0,a.useCallback)((function(){t.common.updateMiddleColumnViewType("ROOM")}),[t.common]);return i().createElement(H.Z,{className:"RoomCreate",sx:on},i().createElement(se,{left:i().createElement(ae,{onClick:v})},r("RoomCreate","Create Room")),i().createElement("div",{className:"RoomCreate-content"},i().createElement(z.Z,{variant:"subtitle2",className:"RoomCreate-title"},r("RoomCreate-RoomName","Room Name")),i().createElement(bt.Z,{boxProps:{sx:{height:"50px",my:"5px",width:"100%",border:"none"}},className:"Room-name-input",value:c,variant:"line",maxLength:30,onChange:g,placeholder:r("Room-Create-placeholder","Room Name")}),i().createElement(z.Z,{variant:"caption",className:"RoomCreate-max-len"},r("RoomCreate-MaxLen","Max Length"),": 30"),i().createElement(Ut.Z,{"data-testid":"ChatRoom-RoomCreateButton",className:"RoomCreate-btn",onClick:h,disabled:!c||m},r("RoomCreate-CreateNow","Create Now"))))}));var sn=n("2/hP");const ln=i().memo((function(e){var t=e.icon,n=(e.size,e.style,e.className,e.onClick,(0,o.__rest)(e,["icon","size","style","className","onClick"])),r=U().STATIC_HOST;return i().createElement(Y.Z,(0,o.__assign)({src:r+"/static/chatroom/image/"+t+".svg"},n))}));var cn=n("JCmj"),un=n("sSYt"),dn=n("1W4u"),mn=dn.Reader,pn=dn.Writer,gn=dn.util,fn={};fn.futures=function(){var e={};return e.chatroom=function(){var e={};return e.ServerMessages=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messages=gn.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=pn.create()),null!=e.messages&&e.messages.length)for(var n=0;n<e.messages.length;++n)fn.futures.chatroom.ServerMessage.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.ServerMessages;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(fn.futures.chatroom.ServerMessage.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.messages&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=fn.futures.chatroom.ServerMessage.verify(e.messages[t]);if(n)return"messages."+n}}return null},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.ServerMessages)return e;var t=new fn.futures.chatroom.ServerMessages;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".futures.chatroom.ServerMessages.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if("object"!==typeof e.messages[n])throw TypeError(".futures.chatroom.ServerMessages.messages: object expected");t.messages[n]=fn.futures.chatroom.ServerMessage.fromObject(e.messages[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var r=0;r<e.messages.length;++r)n.messages[r]=fn.futures.chatroom.ServerMessage.toObject(e.messages[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e.ServerMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}var t;return e.prototype.chatMessage=null,e.prototype.controlMessage=null,e.prototype.ackMessage=null,Object.defineProperty(e.prototype,"body",{get:gn.oneOfGetter(t=["chatMessage","controlMessage","ackMessage"]),set:gn.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=pn.create()),null!=e.chatMessage&&Object.hasOwnProperty.call(e,"chatMessage")&&fn.futures.chatroom.ChatMessage.encode(e.chatMessage,t.uint32(810).fork()).ldelim(),null!=e.controlMessage&&Object.hasOwnProperty.call(e,"controlMessage")&&fn.futures.chatroom.ControlMessage.encode(e.controlMessage,t.uint32(818).fork()).ldelim(),null!=e.ackMessage&&Object.hasOwnProperty.call(e,"ackMessage")&&fn.futures.chatroom.AckMessage.encode(e.ackMessage,t.uint32(826).fork()).ldelim(),t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.ServerMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 101:r.chatMessage=fn.futures.chatroom.ChatMessage.decode(e,e.uint32());break;case 102:r.controlMessage=fn.futures.chatroom.ControlMessage.decode(e,e.uint32());break;case 103:r.ackMessage=fn.futures.chatroom.AckMessage.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";var t={};if(null!=e.chatMessage&&e.hasOwnProperty("chatMessage")&&(t.body=1,n=fn.futures.chatroom.ChatMessage.verify(e.chatMessage)))return"chatMessage."+n;if(null!=e.controlMessage&&e.hasOwnProperty("controlMessage")){if(1===t.body)return"body: multiple values";if(t.body=1,n=fn.futures.chatroom.ControlMessage.verify(e.controlMessage))return"controlMessage."+n}if(null!=e.ackMessage&&e.hasOwnProperty("ackMessage")){if(1===t.body)return"body: multiple values";var n;if(t.body=1,n=fn.futures.chatroom.AckMessage.verify(e.ackMessage))return"ackMessage."+n}return null},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.ServerMessage)return e;var t=new fn.futures.chatroom.ServerMessage;if(null!=e.chatMessage){if("object"!==typeof e.chatMessage)throw TypeError(".futures.chatroom.ServerMessage.chatMessage: object expected");t.chatMessage=fn.futures.chatroom.ChatMessage.fromObject(e.chatMessage)}if(null!=e.controlMessage){if("object"!==typeof e.controlMessage)throw TypeError(".futures.chatroom.ServerMessage.controlMessage: object expected");t.controlMessage=fn.futures.chatroom.ControlMessage.fromObject(e.controlMessage)}if(null!=e.ackMessage){if("object"!==typeof e.ackMessage)throw TypeError(".futures.chatroom.ServerMessage.ackMessage: object expected");t.ackMessage=fn.futures.chatroom.AckMessage.fromObject(e.ackMessage)}return t},e.toObject=function(e,t){t||(t={});var n={};return null!=e.chatMessage&&e.hasOwnProperty("chatMessage")&&(n.chatMessage=fn.futures.chatroom.ChatMessage.toObject(e.chatMessage,t),t.oneofs&&(n.body="chatMessage")),null!=e.controlMessage&&e.hasOwnProperty("controlMessage")&&(n.controlMessage=fn.futures.chatroom.ControlMessage.toObject(e.controlMessage,t),t.oneofs&&(n.body="controlMessage")),null!=e.ackMessage&&e.hasOwnProperty("ackMessage")&&(n.ackMessage=fn.futures.chatroom.AckMessage.toObject(e.ackMessage,t),t.oneofs&&(n.body="ackMessage")),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e.ChatMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.channelId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.sequence=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.time=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.payload="",e.prototype.replyExt="",e.prototype.fromChatUid=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.fromName="",e.prototype.toAdmin=!1,e.prototype.isAdmin=!1,e.prototype.cardType=0,e.prototype.cardExt="",e.prototype.userAgent="",e.prototype.clientType="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=pn.create()),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(8).int64(e.groupId),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(16).int64(e.channelId),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).int64(e.sequence),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(32).int64(e.time),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.replyExt&&Object.hasOwnProperty.call(e,"replyExt")&&t.uint32(50).string(e.replyExt),null!=e.fromChatUid&&Object.hasOwnProperty.call(e,"fromChatUid")&&t.uint32(56).int64(e.fromChatUid),null!=e.fromName&&Object.hasOwnProperty.call(e,"fromName")&&t.uint32(66).string(e.fromName),null!=e.toAdmin&&Object.hasOwnProperty.call(e,"toAdmin")&&t.uint32(72).bool(e.toAdmin),null!=e.isAdmin&&Object.hasOwnProperty.call(e,"isAdmin")&&t.uint32(80).bool(e.isAdmin),null!=e.cardType&&Object.hasOwnProperty.call(e,"cardType")&&t.uint32(88).int32(e.cardType),null!=e.cardExt&&Object.hasOwnProperty.call(e,"cardExt")&&t.uint32(98).string(e.cardExt),null!=e.userAgent&&Object.hasOwnProperty.call(e,"userAgent")&&t.uint32(106).string(e.userAgent),null!=e.clientType&&Object.hasOwnProperty.call(e,"clientType")&&t.uint32(114).string(e.clientType),t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.ChatMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.groupId=e.int64();break;case 2:r.channelId=e.int64();break;case 3:r.sequence=e.int64();break;case 4:r.time=e.int64();break;case 5:r.payload=e.string();break;case 6:r.replyExt=e.string();break;case 7:r.fromChatUid=e.int64();break;case 8:r.fromName=e.string();break;case 9:r.toAdmin=e.bool();break;case 10:r.isAdmin=e.bool();break;case 11:r.cardType=e.int32();break;case 12:r.cardExt=e.string();break;case 13:r.userAgent=e.string();break;case 14:r.clientType=e.string();break;default:e.skipType(7&o)}}return r},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!gn.isInteger(e.groupId)&&!(e.groupId&&gn.isInteger(e.groupId.low)&&gn.isInteger(e.groupId.high)))return"groupId: integer|Long expected";if(null!=e.channelId&&e.hasOwnProperty("channelId")&&!gn.isInteger(e.channelId)&&!(e.channelId&&gn.isInteger(e.channelId.low)&&gn.isInteger(e.channelId.high)))return"channelId: integer|Long expected";if(null!=e.sequence&&e.hasOwnProperty("sequence")&&!gn.isInteger(e.sequence)&&!(e.sequence&&gn.isInteger(e.sequence.low)&&gn.isInteger(e.sequence.high)))return"sequence: integer|Long expected";if(null!=e.time&&e.hasOwnProperty("time")&&!gn.isInteger(e.time)&&!(e.time&&gn.isInteger(e.time.low)&&gn.isInteger(e.time.high)))return"time: integer|Long expected";if(null!=e.payload&&e.hasOwnProperty("payload")&&!gn.isString(e.payload))return"payload: string expected";if(null!=e.replyExt&&e.hasOwnProperty("replyExt")&&!gn.isString(e.replyExt))return"replyExt: string expected";if(null!=e.fromChatUid&&e.hasOwnProperty("fromChatUid")&&!gn.isInteger(e.fromChatUid)&&!(e.fromChatUid&&gn.isInteger(e.fromChatUid.low)&&gn.isInteger(e.fromChatUid.high)))return"fromChatUid: integer|Long expected";if(null!=e.fromName&&e.hasOwnProperty("fromName")&&!gn.isString(e.fromName))return"fromName: string expected";if(null!=e.toAdmin&&e.hasOwnProperty("toAdmin")&&"boolean"!==typeof e.toAdmin)return"toAdmin: boolean expected";if(null!=e.isAdmin&&e.hasOwnProperty("isAdmin")&&"boolean"!==typeof e.isAdmin)return"isAdmin: boolean expected";if(null!=e.cardType&&e.hasOwnProperty("cardType"))switch(e.cardType){default:return"cardType: enum value expected";case 0:case 1:case 2:}return null!=e.cardExt&&e.hasOwnProperty("cardExt")&&!gn.isString(e.cardExt)?"cardExt: string expected":null!=e.userAgent&&e.hasOwnProperty("userAgent")&&!gn.isString(e.userAgent)?"userAgent: string expected":null!=e.clientType&&e.hasOwnProperty("clientType")&&!gn.isString(e.clientType)?"clientType: string expected":null},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.ChatMessage)return e;var t=new fn.futures.chatroom.ChatMessage;switch(null!=e.groupId&&(gn.Long?(t.groupId=gn.Long.fromValue(e.groupId)).unsigned=!1:"string"===typeof e.groupId?t.groupId=parseInt(e.groupId,10):"number"===typeof e.groupId?t.groupId=e.groupId:"object"===typeof e.groupId&&(t.groupId=new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber())),null!=e.channelId&&(gn.Long?(t.channelId=gn.Long.fromValue(e.channelId)).unsigned=!1:"string"===typeof e.channelId?t.channelId=parseInt(e.channelId,10):"number"===typeof e.channelId?t.channelId=e.channelId:"object"===typeof e.channelId&&(t.channelId=new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber())),null!=e.sequence&&(gn.Long?(t.sequence=gn.Long.fromValue(e.sequence)).unsigned=!1:"string"===typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"===typeof e.sequence?t.sequence=e.sequence:"object"===typeof e.sequence&&(t.sequence=new gn.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.time&&(gn.Long?(t.time=gn.Long.fromValue(e.time)).unsigned=!1:"string"===typeof e.time?t.time=parseInt(e.time,10):"number"===typeof e.time?t.time=e.time:"object"===typeof e.time&&(t.time=new gn.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber())),null!=e.payload&&(t.payload=String(e.payload)),null!=e.replyExt&&(t.replyExt=String(e.replyExt)),null!=e.fromChatUid&&(gn.Long?(t.fromChatUid=gn.Long.fromValue(e.fromChatUid)).unsigned=!1:"string"===typeof e.fromChatUid?t.fromChatUid=parseInt(e.fromChatUid,10):"number"===typeof e.fromChatUid?t.fromChatUid=e.fromChatUid:"object"===typeof e.fromChatUid&&(t.fromChatUid=new gn.LongBits(e.fromChatUid.low>>>0,e.fromChatUid.high>>>0).toNumber())),null!=e.fromName&&(t.fromName=String(e.fromName)),null!=e.toAdmin&&(t.toAdmin=Boolean(e.toAdmin)),null!=e.isAdmin&&(t.isAdmin=Boolean(e.isAdmin)),e.cardType){case"NONE":case 0:t.cardType=0;break;case"POSITION":case 1:t.cardType=1;break;case"TRADE_PNL":case 2:t.cardType=2}return null!=e.cardExt&&(t.cardExt=String(e.cardExt)),null!=e.userAgent&&(t.userAgent=String(e.userAgent)),null!=e.clientType&&(t.clientType=String(e.clientType)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(gn.Long){var r=new gn.Long(0,0,!1);n.groupId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.groupId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.channelId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.channelId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.sequence=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.sequence=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.time=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.time=t.longs===String?"0":0;if(n.payload="",n.replyExt="",gn.Long){r=new gn.Long(0,0,!1);n.fromChatUid=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.fromChatUid=t.longs===String?"0":0;n.fromName="",n.toAdmin=!1,n.isAdmin=!1,n.cardType=t.enums===String?"NONE":0,n.cardExt="",n.userAgent="",n.clientType=""}return null!=e.groupId&&e.hasOwnProperty("groupId")&&("number"===typeof e.groupId?n.groupId=t.longs===String?String(e.groupId):e.groupId:n.groupId=t.longs===String?gn.Long.prototype.toString.call(e.groupId):t.longs===Number?new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber():e.groupId),null!=e.channelId&&e.hasOwnProperty("channelId")&&("number"===typeof e.channelId?n.channelId=t.longs===String?String(e.channelId):e.channelId:n.channelId=t.longs===String?gn.Long.prototype.toString.call(e.channelId):t.longs===Number?new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber():e.channelId),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"===typeof e.sequence?n.sequence=t.longs===String?String(e.sequence):e.sequence:n.sequence=t.longs===String?gn.Long.prototype.toString.call(e.sequence):t.longs===Number?new gn.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.time&&e.hasOwnProperty("time")&&("number"===typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?gn.Long.prototype.toString.call(e.time):t.longs===Number?new gn.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber():e.time),null!=e.payload&&e.hasOwnProperty("payload")&&(n.payload=e.payload),null!=e.replyExt&&e.hasOwnProperty("replyExt")&&(n.replyExt=e.replyExt),null!=e.fromChatUid&&e.hasOwnProperty("fromChatUid")&&("number"===typeof e.fromChatUid?n.fromChatUid=t.longs===String?String(e.fromChatUid):e.fromChatUid:n.fromChatUid=t.longs===String?gn.Long.prototype.toString.call(e.fromChatUid):t.longs===Number?new gn.LongBits(e.fromChatUid.low>>>0,e.fromChatUid.high>>>0).toNumber():e.fromChatUid),null!=e.fromName&&e.hasOwnProperty("fromName")&&(n.fromName=e.fromName),null!=e.toAdmin&&e.hasOwnProperty("toAdmin")&&(n.toAdmin=e.toAdmin),null!=e.isAdmin&&e.hasOwnProperty("isAdmin")&&(n.isAdmin=e.isAdmin),null!=e.cardType&&e.hasOwnProperty("cardType")&&(n.cardType=t.enums===String?fn.futures.chatroom.CardType[e.cardType]:e.cardType),null!=e.cardExt&&e.hasOwnProperty("cardExt")&&(n.cardExt=e.cardExt),null!=e.userAgent&&e.hasOwnProperty("userAgent")&&(n.userAgent=e.userAgent),null!=e.clientType&&e.hasOwnProperty("clientType")&&(n.clientType=e.clientType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e.CardType=function(){var e={},t=Object.create(e);return t[e[0]="NONE"]=0,t[e[1]="POSITION"]=1,t[e[2]="TRADE_PNL"]=2,t}(),e.ControlType=function(){var e={},t=Object.create(e);return t[e[0]="HIDDEN_MESSAGE"]=0,t[e[1]="UN_HIDDEN_MESSAGE"]=1,t[e[2]="FORBIDDEN_PERSON"]=2,t[e[3]="SWITCH_VIEW"]=3,t[e[4]="ADD_MEMBER"]=4,t[e[5]="REMOVE_MEMBER"]=5,t[e[6]="ERROR_INFO"]=6,t[e[7]="MODIFY_GROUP_NAME"]=7,t[e[8]="FORBIDDEN_GROUP_MEMBER"]=8,t}(),e.ClientType=function(){var e={},t=Object.create(e);return t[e[0]="WEB"]=0,t[e[1]="APP"]=1,t}(),e.ControlMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.controlType=0,e.prototype.channelId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.groupId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.sequence=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.chatUid=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.liftBanTime=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.banReason="",e.prototype.view=!1,e.prototype.clientType=0,e.prototype.serverCode=0,e.prototype.serverMsg="",e.prototype.groupName="",e.prototype.fromChatUid=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.isBan=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=pn.create()),null!=e.controlType&&Object.hasOwnProperty.call(e,"controlType")&&t.uint32(8).int32(e.controlType),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(16).int64(e.channelId),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).int64(e.groupId),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(32).int64(e.sequence),null!=e.chatUid&&Object.hasOwnProperty.call(e,"chatUid")&&t.uint32(40).int64(e.chatUid),null!=e.liftBanTime&&Object.hasOwnProperty.call(e,"liftBanTime")&&t.uint32(48).int64(e.liftBanTime),null!=e.banReason&&Object.hasOwnProperty.call(e,"banReason")&&t.uint32(58).string(e.banReason),null!=e.view&&Object.hasOwnProperty.call(e,"view")&&t.uint32(64).bool(e.view),null!=e.clientType&&Object.hasOwnProperty.call(e,"clientType")&&t.uint32(72).int32(e.clientType),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(80).int32(e.serverCode),null!=e.serverMsg&&Object.hasOwnProperty.call(e,"serverMsg")&&t.uint32(90).string(e.serverMsg),null!=e.groupName&&Object.hasOwnProperty.call(e,"groupName")&&t.uint32(98).string(e.groupName),null!=e.fromChatUid&&Object.hasOwnProperty.call(e,"fromChatUid")&&t.uint32(104).int64(e.fromChatUid),null!=e.isBan&&Object.hasOwnProperty.call(e,"isBan")&&t.uint32(112).bool(e.isBan),t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.ControlMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.controlType=e.int32();break;case 2:r.channelId=e.int64();break;case 3:r.groupId=e.int64();break;case 4:r.sequence=e.int64();break;case 5:r.chatUid=e.int64();break;case 6:r.liftBanTime=e.int64();break;case 7:r.banReason=e.string();break;case 8:r.view=e.bool();break;case 9:r.clientType=e.int32();break;case 10:r.serverCode=e.int32();break;case 11:r.serverMsg=e.string();break;case 12:r.groupName=e.string();break;case 13:r.fromChatUid=e.int64();break;case 14:r.isBan=e.bool();break;default:e.skipType(7&o)}}return r},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.controlType&&e.hasOwnProperty("controlType"))switch(e.controlType){default:return"controlType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:}if(null!=e.channelId&&e.hasOwnProperty("channelId")&&!gn.isInteger(e.channelId)&&!(e.channelId&&gn.isInteger(e.channelId.low)&&gn.isInteger(e.channelId.high)))return"channelId: integer|Long expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!gn.isInteger(e.groupId)&&!(e.groupId&&gn.isInteger(e.groupId.low)&&gn.isInteger(e.groupId.high)))return"groupId: integer|Long expected";if(null!=e.sequence&&e.hasOwnProperty("sequence")&&!gn.isInteger(e.sequence)&&!(e.sequence&&gn.isInteger(e.sequence.low)&&gn.isInteger(e.sequence.high)))return"sequence: integer|Long expected";if(null!=e.chatUid&&e.hasOwnProperty("chatUid")&&!gn.isInteger(e.chatUid)&&!(e.chatUid&&gn.isInteger(e.chatUid.low)&&gn.isInteger(e.chatUid.high)))return"chatUid: integer|Long expected";if(null!=e.liftBanTime&&e.hasOwnProperty("liftBanTime")&&!gn.isInteger(e.liftBanTime)&&!(e.liftBanTime&&gn.isInteger(e.liftBanTime.low)&&gn.isInteger(e.liftBanTime.high)))return"liftBanTime: integer|Long expected";if(null!=e.banReason&&e.hasOwnProperty("banReason")&&!gn.isString(e.banReason))return"banReason: string expected";if(null!=e.view&&e.hasOwnProperty("view")&&"boolean"!==typeof e.view)return"view: boolean expected";if(null!=e.clientType&&e.hasOwnProperty("clientType"))switch(e.clientType){default:return"clientType: enum value expected";case 0:case 1:}return null!=e.serverCode&&e.hasOwnProperty("serverCode")&&!gn.isInteger(e.serverCode)?"serverCode: integer expected":null!=e.serverMsg&&e.hasOwnProperty("serverMsg")&&!gn.isString(e.serverMsg)?"serverMsg: string expected":null!=e.groupName&&e.hasOwnProperty("groupName")&&!gn.isString(e.groupName)?"groupName: string expected":null==e.fromChatUid||!e.hasOwnProperty("fromChatUid")||gn.isInteger(e.fromChatUid)||e.fromChatUid&&gn.isInteger(e.fromChatUid.low)&&gn.isInteger(e.fromChatUid.high)?null!=e.isBan&&e.hasOwnProperty("isBan")&&"boolean"!==typeof e.isBan?"isBan: boolean expected":null:"fromChatUid: integer|Long expected"},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.ControlMessage)return e;var t=new fn.futures.chatroom.ControlMessage;switch(e.controlType){case"HIDDEN_MESSAGE":case 0:t.controlType=0;break;case"UN_HIDDEN_MESSAGE":case 1:t.controlType=1;break;case"FORBIDDEN_PERSON":case 2:t.controlType=2;break;case"SWITCH_VIEW":case 3:t.controlType=3;break;case"ADD_MEMBER":case 4:t.controlType=4;break;case"REMOVE_MEMBER":case 5:t.controlType=5;break;case"ERROR_INFO":case 6:t.controlType=6;break;case"MODIFY_GROUP_NAME":case 7:t.controlType=7;break;case"FORBIDDEN_GROUP_MEMBER":case 8:t.controlType=8}switch(null!=e.channelId&&(gn.Long?(t.channelId=gn.Long.fromValue(e.channelId)).unsigned=!1:"string"===typeof e.channelId?t.channelId=parseInt(e.channelId,10):"number"===typeof e.channelId?t.channelId=e.channelId:"object"===typeof e.channelId&&(t.channelId=new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber())),null!=e.groupId&&(gn.Long?(t.groupId=gn.Long.fromValue(e.groupId)).unsigned=!1:"string"===typeof e.groupId?t.groupId=parseInt(e.groupId,10):"number"===typeof e.groupId?t.groupId=e.groupId:"object"===typeof e.groupId&&(t.groupId=new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber())),null!=e.sequence&&(gn.Long?(t.sequence=gn.Long.fromValue(e.sequence)).unsigned=!1:"string"===typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"===typeof e.sequence?t.sequence=e.sequence:"object"===typeof e.sequence&&(t.sequence=new gn.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.chatUid&&(gn.Long?(t.chatUid=gn.Long.fromValue(e.chatUid)).unsigned=!1:"string"===typeof e.chatUid?t.chatUid=parseInt(e.chatUid,10):"number"===typeof e.chatUid?t.chatUid=e.chatUid:"object"===typeof e.chatUid&&(t.chatUid=new gn.LongBits(e.chatUid.low>>>0,e.chatUid.high>>>0).toNumber())),null!=e.liftBanTime&&(gn.Long?(t.liftBanTime=gn.Long.fromValue(e.liftBanTime)).unsigned=!1:"string"===typeof e.liftBanTime?t.liftBanTime=parseInt(e.liftBanTime,10):"number"===typeof e.liftBanTime?t.liftBanTime=e.liftBanTime:"object"===typeof e.liftBanTime&&(t.liftBanTime=new gn.LongBits(e.liftBanTime.low>>>0,e.liftBanTime.high>>>0).toNumber())),null!=e.banReason&&(t.banReason=String(e.banReason)),null!=e.view&&(t.view=Boolean(e.view)),e.clientType){case"WEB":case 0:t.clientType=0;break;case"APP":case 1:t.clientType=1}return null!=e.serverCode&&(t.serverCode=0|e.serverCode),null!=e.serverMsg&&(t.serverMsg=String(e.serverMsg)),null!=e.groupName&&(t.groupName=String(e.groupName)),null!=e.fromChatUid&&(gn.Long?(t.fromChatUid=gn.Long.fromValue(e.fromChatUid)).unsigned=!1:"string"===typeof e.fromChatUid?t.fromChatUid=parseInt(e.fromChatUid,10):"number"===typeof e.fromChatUid?t.fromChatUid=e.fromChatUid:"object"===typeof e.fromChatUid&&(t.fromChatUid=new gn.LongBits(e.fromChatUid.low>>>0,e.fromChatUid.high>>>0).toNumber())),null!=e.isBan&&(t.isBan=Boolean(e.isBan)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.controlType=t.enums===String?"HIDDEN_MESSAGE":0,gn.Long){var r=new gn.Long(0,0,!1);n.channelId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.channelId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.groupId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.groupId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.sequence=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.sequence=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.chatUid=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.chatUid=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.liftBanTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.liftBanTime=t.longs===String?"0":0;if(n.banReason="",n.view=!1,n.clientType=t.enums===String?"WEB":0,n.serverCode=0,n.serverMsg="",n.groupName="",gn.Long){r=new gn.Long(0,0,!1);n.fromChatUid=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.fromChatUid=t.longs===String?"0":0;n.isBan=!1}return null!=e.controlType&&e.hasOwnProperty("controlType")&&(n.controlType=t.enums===String?fn.futures.chatroom.ControlType[e.controlType]:e.controlType),null!=e.channelId&&e.hasOwnProperty("channelId")&&("number"===typeof e.channelId?n.channelId=t.longs===String?String(e.channelId):e.channelId:n.channelId=t.longs===String?gn.Long.prototype.toString.call(e.channelId):t.longs===Number?new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber():e.channelId),null!=e.groupId&&e.hasOwnProperty("groupId")&&("number"===typeof e.groupId?n.groupId=t.longs===String?String(e.groupId):e.groupId:n.groupId=t.longs===String?gn.Long.prototype.toString.call(e.groupId):t.longs===Number?new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber():e.groupId),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"===typeof e.sequence?n.sequence=t.longs===String?String(e.sequence):e.sequence:n.sequence=t.longs===String?gn.Long.prototype.toString.call(e.sequence):t.longs===Number?new gn.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.chatUid&&e.hasOwnProperty("chatUid")&&("number"===typeof e.chatUid?n.chatUid=t.longs===String?String(e.chatUid):e.chatUid:n.chatUid=t.longs===String?gn.Long.prototype.toString.call(e.chatUid):t.longs===Number?new gn.LongBits(e.chatUid.low>>>0,e.chatUid.high>>>0).toNumber():e.chatUid),null!=e.liftBanTime&&e.hasOwnProperty("liftBanTime")&&("number"===typeof e.liftBanTime?n.liftBanTime=t.longs===String?String(e.liftBanTime):e.liftBanTime:n.liftBanTime=t.longs===String?gn.Long.prototype.toString.call(e.liftBanTime):t.longs===Number?new gn.LongBits(e.liftBanTime.low>>>0,e.liftBanTime.high>>>0).toNumber():e.liftBanTime),null!=e.banReason&&e.hasOwnProperty("banReason")&&(n.banReason=e.banReason),null!=e.view&&e.hasOwnProperty("view")&&(n.view=e.view),null!=e.clientType&&e.hasOwnProperty("clientType")&&(n.clientType=t.enums===String?fn.futures.chatroom.ClientType[e.clientType]:e.clientType),null!=e.serverCode&&e.hasOwnProperty("serverCode")&&(n.serverCode=e.serverCode),null!=e.serverMsg&&e.hasOwnProperty("serverMsg")&&(n.serverMsg=e.serverMsg),null!=e.groupName&&e.hasOwnProperty("groupName")&&(n.groupName=e.groupName),null!=e.fromChatUid&&e.hasOwnProperty("fromChatUid")&&("number"===typeof e.fromChatUid?n.fromChatUid=t.longs===String?String(e.fromChatUid):e.fromChatUid:n.fromChatUid=t.longs===String?gn.Long.prototype.toString.call(e.fromChatUid):t.longs===Number?new gn.LongBits(e.fromChatUid.low>>>0,e.fromChatUid.high>>>0).toNumber():e.fromChatUid),null!=e.isBan&&e.hasOwnProperty("isBan")&&(n.isBan=e.isBan),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e.AckMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.prototype.message="",e.prototype.isError=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=pn.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.isError&&Object.hasOwnProperty.call(e,"isError")&&t.uint32(24).bool(e.isError),t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.AckMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.code=e.int32();break;case 2:r.message=e.string();break;case 3:r.isError=e.bool();break;default:e.skipType(7&o)}}return r},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.code&&e.hasOwnProperty("code")&&!gn.isInteger(e.code)?"code: integer expected":null!=e.message&&e.hasOwnProperty("message")&&!gn.isString(e.message)?"message: string expected":null!=e.isError&&e.hasOwnProperty("isError")&&"boolean"!==typeof e.isError?"isError: boolean expected":null},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.AckMessage)return e;var t=new fn.futures.chatroom.AckMessage;return null!=e.code&&(t.code=0|e.code),null!=e.message&&(t.message=String(e.message)),null!=e.isError&&(t.isError=Boolean(e.isError)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.code=0,n.message="",n.isError=!1),null!=e.code&&e.hasOwnProperty("code")&&(n.code=e.code),null!=e.message&&e.hasOwnProperty("message")&&(n.message=e.message),null!=e.isError&&e.hasOwnProperty("isError")&&(n.isError=e.isError),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e.ClientMessage=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groupId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.channelId=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.time=gn.Long?gn.Long.fromBits(0,0,!1):0,e.prototype.payload="",e.prototype.replyExt="",e.prototype.toAdmin=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=pn.create()),null!=e.groupId&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(8).int64(e.groupId),null!=e.channelId&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(16).int64(e.channelId),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(24).int64(e.time),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).string(e.payload),null!=e.replyExt&&Object.hasOwnProperty.call(e,"replyExt")&&t.uint32(42).string(e.replyExt),null!=e.toAdmin&&Object.hasOwnProperty.call(e,"toAdmin")&&t.uint32(48).bool(e.toAdmin),t},e.decode=function(e,t){e instanceof mn||(e=mn.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fn.futures.chatroom.ClientMessage;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.groupId=e.int64();break;case 2:r.channelId=e.int64();break;case 3:r.time=e.int64();break;case 4:r.payload=e.string();break;case 5:r.replyExt=e.string();break;case 6:r.toAdmin=e.bool();break;default:e.skipType(7&o)}}return r},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null==e.groupId||!e.hasOwnProperty("groupId")||gn.isInteger(e.groupId)||e.groupId&&gn.isInteger(e.groupId.low)&&gn.isInteger(e.groupId.high)?null==e.channelId||!e.hasOwnProperty("channelId")||gn.isInteger(e.channelId)||e.channelId&&gn.isInteger(e.channelId.low)&&gn.isInteger(e.channelId.high)?null==e.time||!e.hasOwnProperty("time")||gn.isInteger(e.time)||e.time&&gn.isInteger(e.time.low)&&gn.isInteger(e.time.high)?null!=e.payload&&e.hasOwnProperty("payload")&&!gn.isString(e.payload)?"payload: string expected":null!=e.replyExt&&e.hasOwnProperty("replyExt")&&!gn.isString(e.replyExt)?"replyExt: string expected":null!=e.toAdmin&&e.hasOwnProperty("toAdmin")&&"boolean"!==typeof e.toAdmin?"toAdmin: boolean expected":null:"time: integer|Long expected":"channelId: integer|Long expected":"groupId: integer|Long expected"},e.fromObject=function(e){if(e instanceof fn.futures.chatroom.ClientMessage)return e;var t=new fn.futures.chatroom.ClientMessage;return null!=e.groupId&&(gn.Long?(t.groupId=gn.Long.fromValue(e.groupId)).unsigned=!1:"string"===typeof e.groupId?t.groupId=parseInt(e.groupId,10):"number"===typeof e.groupId?t.groupId=e.groupId:"object"===typeof e.groupId&&(t.groupId=new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber())),null!=e.channelId&&(gn.Long?(t.channelId=gn.Long.fromValue(e.channelId)).unsigned=!1:"string"===typeof e.channelId?t.channelId=parseInt(e.channelId,10):"number"===typeof e.channelId?t.channelId=e.channelId:"object"===typeof e.channelId&&(t.channelId=new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber())),null!=e.time&&(gn.Long?(t.time=gn.Long.fromValue(e.time)).unsigned=!1:"string"===typeof e.time?t.time=parseInt(e.time,10):"number"===typeof e.time?t.time=e.time:"object"===typeof e.time&&(t.time=new gn.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber())),null!=e.payload&&(t.payload=String(e.payload)),null!=e.replyExt&&(t.replyExt=String(e.replyExt)),null!=e.toAdmin&&(t.toAdmin=Boolean(e.toAdmin)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(gn.Long){var r=new gn.Long(0,0,!1);n.groupId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.groupId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.channelId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.channelId=t.longs===String?"0":0;if(gn.Long){r=new gn.Long(0,0,!1);n.time=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.time=t.longs===String?"0":0;n.payload="",n.replyExt="",n.toAdmin=!1}return null!=e.groupId&&e.hasOwnProperty("groupId")&&("number"===typeof e.groupId?n.groupId=t.longs===String?String(e.groupId):e.groupId:n.groupId=t.longs===String?gn.Long.prototype.toString.call(e.groupId):t.longs===Number?new gn.LongBits(e.groupId.low>>>0,e.groupId.high>>>0).toNumber():e.groupId),null!=e.channelId&&e.hasOwnProperty("channelId")&&("number"===typeof e.channelId?n.channelId=t.longs===String?String(e.channelId):e.channelId:n.channelId=t.longs===String?gn.Long.prototype.toString.call(e.channelId):t.longs===Number?new gn.LongBits(e.channelId.low>>>0,e.channelId.high>>>0).toNumber():e.channelId),null!=e.time&&e.hasOwnProperty("time")&&("number"===typeof e.time?n.time=t.longs===String?String(e.time):e.time:n.time=t.longs===String?gn.Long.prototype.toString.call(e.time):t.longs===Number?new gn.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber():e.time),null!=e.payload&&e.hasOwnProperty("payload")&&(n.payload=e.payload),null!=e.replyExt&&e.hasOwnProperty("replyExt")&&(n.replyExt=e.replyExt),null!=e.toAdmin&&e.hasOwnProperty("toAdmin")&&(n.toAdmin=e.toAdmin),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,dn.util.toJSONOptions)},e}(),e}(),e}();const hn=fn;var vn=function(e){return new Promise((function(t){if(e instanceof ArrayBuffer)t(e);else{var n=new FileReader;n.onload=function(){t(n.result)},n.readAsArrayBuffer(e)}}))};const yn=function(){var e,t,n=!1,r=function(){},a=0,i=!1,s={},c=null,u={},d=new ne,m=hn.futures.chatroom,p=m.ServerMessages,g=m.ClientMessage,f=function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,a,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.data?[4,vn(e.data)]:[3,2];case 1:t=o.sent(),n=p.toObject(p.decode(new Uint8Array(t)))||{messages:[]},be("ws onmessage",JSON.stringify(n)),r=n.messages.map((function(e){return e.chatMessage})).filter((function(e){return!!e})),a=n.messages.map((function(e){return e.controlMessage})).filter((function(e){return!!e})),(i=n.messages.map((function(e){return e.ackMessage})).filter((function(e){return!!e}))).length&&i.forEach((function(e){var t=e.isError,n=e.message,r=e.code;t&&(0,un.PV)(u[r]||n,{variant:"error"})})),r.length&&function(e){(0,l.batch)((function(){s.home.updateLastMsgBySocket(e),s.chat.updateLastMsgBySocket(e)}))}(r),a.length&&function(e){e.forEach((function(e){var t=e.controlType,n=e.view,r=e.clientType,o=e.serverMsg,a=e.chatUid,i=e.liftBanTime,u=e.banReason,d=e.channelId,m=e.groupId,p=e.groupName,g=e.isBan,f=e.sequence,h=e.fromChatUid;switch(t){case ze.ERROR_INFO:(0,un.PV)(o,{variant:"error"});break;case ze.SWITCH_VIEW:r===qe.APP&&s.common.updateState({enable:n});break;case ze.FORBIDDEN_PERSON:a===c&&s.common.banUser({liftBanTime:i,banReason:u});break;case ze.FORBIDDEN_GROUP_MEMBER:m&&(a===c&&re.emit(g?y:b,{userId:a,roomId:m}),s.chat.updateChatIsBan({chatId:m,bans:[{isBan:g,chatUid:a}]}));break;case ze.ADD_MEMBER:m&&s.home.updateRoomUserAmount({roomId:m,mount:1});break;case ze.REMOVE_MEMBER:m&&(a===c&&h!==c?re.emit(v,{userId:a,roomId:m}):s.home.updateRoomUserAmount({roomId:m,mount:-1}));break;case ze.MODIFY_GROUP_NAME:m&&s.home.updateRoomName({groupId:m,groupName:p});break;case ze.HIDDEN_MESSAGE:d&&(0,l.batch)((function(){s.chat.addHiddenId({channelId:d,sequence:f}),s.chat.updateCurrentChatViewportIdsWithFilter(d)}));break;case ze.UN_HIDDEN_MESSAGE:d&&(0,l.batch)((function(){s.chat.removeHiddenId({channelId:d,sequence:f}),s.chat.updateCurrentChatViewportIdsWithFilter(d)}))}}))}(a),o.label=2;case 2:return[2]}}))}))},x=function(l){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var u;return(0,o.__generator)(this,(function(m){switch(m.label){case 0:return s=l.dispatch,c=l.userId,e=l.wsHost||"",n=!1,i||!c?[3,2]:[4,(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,(0,W.v_)(G+"/v1/private/future/chatroom/get-token")];case 1:return e=r.sent(),t=e.success,n=e.data,t?[2,null===n||void 0===n?void 0:n.token]:[2,null]}}))}))];case 1:if(!(u=m.sent()))return be("getWsToken failed"),[2];t=(0,cn.Z)(function(e,t){return e+"/group-chat?"+Object.keys(t).map((function(e){return Array.isArray(t[e])?t[e].map((function(t){return e+"="+t})).join("&"):e+"="+t[e]})).join("&")}(e,{token:u})),be("ws open",c,u),t.open(),t.onmessage(f),t.onopen((function(){i=!!t&&"OPEN"===t.readyState(),(i=!!t)&&(a=0,d.emit(h,!0),be("ws onopen"))})),r=function(){i=!1,d.emit(h,!1),a>=10?be("ws reconnect max count 10"):(be("ws reconnect with count "+(a+=1)),x({userId:c,dispatch:s,wsHost:e}))},t.onclose((function(){be("ws onClose"),i=!1,n||r()})),m.label=2;case 2:return[2]}}))}))};return{connect:x,reconnect:function(){be("ws manual reconnect"),a=0,r()},close:function(){n=!0,t&&t.close()},sendMessage:function(e){if(i){be("ws send message",e),e.replyExt&&be("ws send message","reply ext",e.replyExt);var n=g.encode(e).finish();n=new Uint8Array(n),t&&t.send(n.buffer)}else be("ws send message when ws not connected")},onIsWSOpen:function(e){return d.on(h,e)},setI18n:function(e){u=e},get isWsOpen(){return i}}}();const bn={"&.WSStatus":{width:"100%",backgroundColor:"moduleBg",".WSStatus-content":{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"40px",padding:"0 15px",".WSStatus-content-icon":{width:"16px",height:"16px",marginRight:"5px",color:"t.primary"},".WSStatus-content-text":{color:"t.primary",fontSize:"12px",lineHeight:"16px"}}}};const xn=i().memo((function(e){var t=e.connected,n=void 0!==t&&t,r=J().getI18n,o=(0,a.useState)(n||!1),s=o[0],l=o[1];return(0,a.useEffect)((function(){return yn.onIsWSOpen((function(e){return l(e)}))}),[]),s?i().createElement(H.Z,null):i().createElement(H.Z,{className:"WSStatus",sx:bn},i().createElement("div",{className:"WSStatus-content"},i().createElement(ln,{icon:"ws-warn",size:16,className:"WSStatus-content-icon"}),i().createElement(z.Z,{variant:"caption1",className:"WSStatus-content-text"},r("WS-WaitForRecovery","Wait for network recovery or refresh"))))}));var In=function(){return(0,l.useSelector)((function(e){var t;return e.chat.currentChatId===k||null===(t=e.home.byId[e.chat.currentChatId])||void 0===t?void 0:t.type}))===Ge.CHANNEL},En=n("J37u"),wn=n("XbY+"),Cn={"&.OpenFuturesAccountRoom":{".container":{p:"20px 15px",textAlign:"center"},".title":{mb:"20px",color:"t.primary",fontWeight:500,px:"50px"},".reminder":{display:"flex",justifyContent:"center",alignItems:"center",svg:{path:{fill:"t.secondary"}}},".reminder-text":{ml:"7px",color:"t.primary"},".risk-warn-text":{fontWeight:"400",fontSize:"14px",lineHeight:"20px",color:"t.primary",mb:"20px",whiteSpace:"pre-line",fontFamily:"BinancePlex,Arial,sans-serif!important"},".Header":{cursor:"move",".Room-head-center":{width:"max-content",maxWidth:"100%",cursor:"pointer",verticalAlign:"middle","&.is-channel":{cursor:"default"},display:"inline-block",".Room-title":{display:"flex",width:"100%",justifyContent:"flex-start",alignItems:"center",color:"t.primary"},".Room-title-text":{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}}};const Sn=function(){var e=this,t=(0,Pt.Z)().enqueueNotification,n=J().getI18n,r=me(),s=gt(),c=(0,l.useDispatch)(),u=(0,a.useState)(""),d=u[0],m=u[1],p=(0,a.useRef)(!1),g=(0,a.useCallback)((function(e){m(e.target.value)}),[]),f=(0,a.useCallback)((function(){return(0,o.__awaiter)(e,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,(0,wn.L)({agentCode:d})];case 1:return(null===(e=r.sent())||void 0===e?void 0:e.success)||(null===e||void 0===e?void 0:e.rootUserId)?(t({message:n("Room-OpenFuturesSuccess","open success"),variant:"success"}),p.current=!0,c.home.initialUserRoomList(),c.common.updateState({isExistFutureAccount:!0}),[4,c.common.getUserInfo()]):[3,3];case 2:r.sent(),re.emit(I),r.label=3;case 3:return[2]}}))}))}),[d,c.common,c.home,t,n]);return(0,a.useEffect)((function(){p.current&&r.length&&c.chat.updateCurrentChatId(r[0])}),[c.chat,r]),i().createElement(H.Z,{className:"OpenFuturesAccountRoom",sx:Cn},i().createElement(se,{right:i().createElement(ie,null)},i().createElement(H.Z,{className:"Room-head-center is-channel"},i().createElement(z.Z,{variant:"subtitle1",className:"Room-title",title:s.name},i().createElement("div",{className:"Room-title-text"},s.name)))),i().createElement("div",{className:"container"},i().createElement(z.Z,{className:"title",variant:"headline6"},n("Room-OpenFuturesToChat","Open a Futures account to start chatting")),i().createElement("div",{className:"reminder"},i().createElement(En.Z,{size:12}),i().createElement(z.Z,{className:"reminder-text",variant:"body2"},n("Room-OpenFuturesReminder"))),i().createElement("pre",{className:"risk-warn-text"},n("Room-OpenFuturesRiskWarn")),i().createElement(bt.Z,{variant:"filled",value:d,onChange:g,placeholder:n("Room-OpenFuturesPlaceholder"),boxProps:{sx:{height:"50px",my:"5px",width:"100%",border:"none",mb:"50px",input:{fontSize:"16px",lineHeight:"24px"}}}}),i().createElement(Ut.Z,{sz:"l",onClick:f},n("Room-OpenFuturesOpenNow"))))};const _n=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M11.997 19.994a7.997 7.997 0 117.997-7.997 8.005 8.005 0 01-7.997 7.997zm0 2a9.997 9.997 0 100-19.994 9.997 9.997 0 000 19.994z",fill:"currentColor"}),i().createElement("path",{d:"M12 17c-1.513 0-2.93-.666-4-1.877L8.992 14c.8.907 1.87 1.408 3.008 1.408 1.137 0 2.202-.501 3.008-1.408L16 15.123C14.93 16.334 13.513 17 12 17zM8 11h2V9H8v2zM14 11h2V9h-2v2z",fill:"currentColor"}))};var Rn=function(e,t){return t?{channelId:e}:{groupId:e}},Nn=function(e){return new Date(e.format("YYYY-MM-DD HH:mm:ss").replace(/-/g,"/")).getTime()},Mn=function(e,t){var n=e?Fe.utc(e):Fe(),r=Fe(),o=Nn(n)-Nn(r);if(be("getDiffTime",o),o<=0)return"";var a=Fe.duration(o),i=function(e){return("0"+e).slice(-2)};return(a.asDays()>=1?Math.floor(a.asDays())+" "+t+" ":"")+i(a.hours())+":"+i(a.minutes())+":"+i(a.seconds())};const On=function(e){var t=J().getI18n,n=In(),r=t("Days","days"),o=(0,a.useState)(e&&n?Mn(e,r):""),i=o[0],s=o[1];return(0,a.useEffect)((function(){if(e&&n){var t=setInterval((function(){var n,o=Mn(e,r);"0:0:0"===(n=o)||n.includes("-")?(s(""),clearInterval(t)):s(o)}),1e3);return function(){return clearInterval(t)}}}),[e,r,n]),[i]};var kn=function(e){return(0,W.v_)(G+"/v1/private/future/chatroom/send-command",e)},Ln=function(e,t){return(0,W.v_)(G+"/v1/private/future/chatroom/delete-group-user",{chatUid:e,groupId:t})},Bn=function(e,t,n){return(0,W.v_)(G+"/v1/private/future/chatroom/ban-group-user",{chatUidList:e,groupId:t,isBan:n})},Tn=function(e){return(0,W.v_)(G+"/v1/private/future/chatroom/get-ban-group-user-list",{groupId:e})},An=function(e){return(0,W.v_)(G+"/v1/private/future/chatroom/get-self-group-ban-info",{groupId:e})},Zn=function(e){var t=e.chatId,n=e.isChannel,r=e.sequence,a=e.size;return(0,W.v_)(G+"/v1/private/future/chatroom/get-chat-msg-page",(0,o.__assign)((0,o.__assign)({},n?{channelId:t}:{groupId:t}),{sequence:r,size:a}))};const Pn=i().memo((function(){var e=(0,l.useDispatch)(),t=ot(),n=J().getI18n,r=(0,a.useCallback)((function(){e.chat.updateReplyMessageId()}),[e]);return i().createElement(H.Z,{className:lt()("reply-container",{show:t})},t&&i().createElement(i().Fragment,null,i().createElement(z.Z,{variant:"caption",className:"reply-body"},i().createElement(z.Z,{className:"reply-body-reply-to"},n("Msg-ReplyTo","Reply to"),"\xa0"),i().createElement(z.Z,{className:"reply-body-reply-name"},t.sender.name),":\xa0",i().createElement(z.Z,{className:"reply-content"},t.payload)),i().createElement(X.Z,{className:"reply-body-close",size:16,onClick:r})))}));const Un=i().memo((function(e){var t=e.banTime,n=e.banReason,r=J().getI18n;return i().createElement(H.Z,{className:"ban-time"},i().createElement(z.Z,{variant:"body2",className:"ban-reason"},r("BanReasonPrefix",{defaultValue:"Chat currently unavailable because of {{banReason}}",banReason:n||r("BanReason","you are banned from chat")})),i().createElement(z.Z,{variant:"body2",className:"ban-duration",ml:"38px"},t))}));var Hn=function(e){return w.includes(e.replace(/^\[:(.*?)\]$/,"$1"))},Dn={value:B,get:function(){return this.value--,this.value<99990&&(this.value=B),this.value}},jn=function(e){return 0===e.length?"":e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},Fn=function(e){return function(e,t){var n,r,o,a=0,i=t?t.toLowerCase():"";if(["utf-16","utf16"].includes(i))for(r=0,o=e.length;r<o;r++)a+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,o=e.length;r<o;r++)a+=(n=e.charCodeAt(r))<=127?1:n<=2047?2:n<=65535?3:4;return a}(e)>150},Vn={b:"<b>$1</b>",i:"<i>$1</i>",u:"<u>$1</u>",c:'<span style="color: #0ECB81">$1</span>'},zn=function(e){return Object.entries(Vn).forEach((function(t){var n=t[0],r=t[1];e=e.replace(new RegExp("&lt;"+n+"&gt;(.*?)&lt;/"+n+"&gt;","g"),r)})),e},qn=function(e){var t=e.positionList,n=void 0===t?[]:t,r=e.select,o=void 0===r?function(e){}:r;return i().createElement(i().Fragment,null,n.map((function(e,t){var n=e.symbol.split("_").join(" ");return n.includes(" ")||(n+=" PERP"),i().createElement(H.Z,{onClick:function(e){e.stopPropagation(),o(n)},className:"ChatInput-share-li",key:t,as:"li"},n)})))},Wn=function(e){var t=e.shareList,n=void 0===t?[]:t,r=e.select,o=void 0===r?function(e){}:r;return i().createElement(i().Fragment,null,n.map((function(e,t){var n=lt()("ChatInput-share-li",0===t?"share-title":"");return i().createElement(H.Z,{onClick:function(e){e.stopPropagation(),1===t?o("PNL"):2===t&&o("")},className:n,key:t,as:"li"},e)})))};const Gn=function(e){var t=e.children,n=e.sx,r=void 0===n?{}:n;return(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"ChatInput-share-ul",__css:(0,o.__assign)({},r),as:"ul"},t)}),[t,r])};const Yn={"&.ChatInput":{display:"flex",flexDirection:"column",flex:"0 0 auto",bg:"popupBg",borderTop:".5px solid",borderTopColor:"newLine"},".ChatInput-container":{display:"flex",bg:"popupBg",width:"100%",flexDirection:"column"},".ban-time":{display:"flex",marginRight:"15px",borderRadius:"3px",padding:"8px 10px",justifyContent:"space-between",cursor:"not-allowed",backgroundColor:"calendar.line",".ban-reason":{color:"t.four"},".ban-duration":{color:"t.secondary",textAlign:"right"}},".out-max-tip":{height:"24px",lineHeight:"24px",fontSize:"12px",color:"t.sell",pl:"10px"},".ChatInput-content":{display:"flex",position:"relative",justifyContent:"space-around",p:"8px 10px"},".ChatInput-input":{},".ChatInput-input-box":{width:"310px",minHeight:"40px",fontSize:"14px",lineHeight:"20px",color:"t.primary",borderRadius:"4px",outline:"none",p:"10px 8px",bg:"inputBg",cursor:"text",maxHeight:"120px",overflow:"auto","&:empty::before":{content:"attr(placeholder)",position:"absolute",color:"t.disabled",bg:"transparent"}},".ChatInput-command":{display:"flex",alignItems:"center",justifyContent:"space-around",ml:"9px",svg:{cursor:"pointer","&:first-of-type":{mr:"12px"},color:"t.third",path:{fill:"t.third"},":hover":{color:"t.yellow"},":hover path":{fill:"t.yellow"},"&.active":{color:"t.yellow"},"&.active path":{fill:"t.yellow"}}},".reply-container":{display:"none","&.show":{display:"flex"},p:"12px 10px",pb:0,justifyContent:"space-between",".reply-body":{color:"t.secondary",display:"flex",width:"100%",".reply-body-reply-to":{flex:"0 0 auto",color:"t.secondary"},".reply-body-reply-name":{flex:"0 0 auto",color:"t.primary"},".reply-content":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},".reply-body-close":{cursor:"pointer",path:{fill:"t.tertiary"}}},".ChatInput-share-ul":{listStyleType:"none",color:"t.white",position:"absolute",bottom:"9px",left:"85px",padding:"1px 0px",bg:"bg4",fontSize:"14px",lineHeight:"150%",borderRadius:"3px"},"& .ChatInput-share-li":{padding:"0 8px",":not(.share-title)":{cursor:"pointer",":hover":{bg:"bg4",color:"#F0B90B"}}}};var Jn={"\ud83d\ude00":"\ud83d\ude00 \ud83d\ude03 \ud83d\ude04 \ud83d\ude01 \ud83d\ude06 \ud83d\ude05 \ud83d\ude02 \ud83e\udd23 \ud83d\ude0a \ud83d\ude07 \ud83d\ude42 \ud83d\ude43 \ud83d\ude09 \ud83d\ude0c \ud83d\ude0d \ud83e\udd70 \ud83d\ude18 \ud83d\ude17 \ud83d\ude19 \ud83d\ude1a \ud83d\ude0b \ud83d\ude1b \ud83d\ude1d \ud83d\ude1c \ud83e\udd2a \ud83e\udd28 \ud83e\uddd0 \ud83e\udd13 \ud83d\ude0e \ud83e\udd29 \ud83e\udd73 \ud83d\ude0f \ud83d\ude12 \ud83d\ude1e \ud83d\ude14 \ud83d\ude1f \ud83d\ude15 \ud83d\ude41 \u2639\ufe0f \ud83d\ude23 \ud83d\ude16 \ud83d\ude2b \ud83d\ude29 \ud83e\udd7a \ud83d\ude22 \ud83d\ude2d \ud83d\ude24 \ud83d\ude20 \ud83d\ude21 \ud83e\udd2f \ud83d\ude33 \ud83e\udd75 \ud83e\udd76 \ud83d\ude31 \ud83d\ude28 \ud83d\ude30 \ud83d\ude25 \ud83d\ude13 \ud83e\udd17 \ud83e\udd14 \ud83e\udd2d \ud83e\udd2b \ud83e\udd25 \ud83d\ude36 \ud83d\ude10 \ud83d\ude11 \ud83d\ude2c \ud83d\ude44 \ud83d\ude2f \ud83d\ude26 \ud83d\ude27 \ud83d\ude2e \ud83d\ude32 \ud83e\udd71 \ud83d\ude34 \ud83e\udd24 \ud83d\ude2a \ud83d\ude35 \ud83e\udd10 \ud83e\udd74 \ud83e\udd22 \ud83e\udd2e \ud83e\udd27 \ud83d\ude37 \ud83e\udd12 \ud83e\udd15 \ud83e\udd11 \ud83e\udd20 \ud83d\ude08 \ud83d\udc7f \ud83d\udc79 \ud83d\udc7a \ud83e\udd21 \ud83d\udc7b \ud83d\udc80 \u2620\ufe0f \ud83d\udc7d \ud83d\udc7e \ud83e\udd16 \ud83c\udf83 \ud83d\ude3a \ud83d\ude38 \ud83d\ude39 \ud83d\ude3b \ud83d\ude3c \ud83d\ude3d \ud83d\ude40 \ud83d\ude3f \ud83d\ude3e \ud83d\udc76 \ud83d\udc67 \ud83e\uddd2 \ud83d\udc66 \ud83d\udc69 \ud83e\uddd1 \ud83d\udc68 \ud83d\udc69\u200d\ud83e\uddb1 \ud83e\uddd1\u200d\ud83e\uddb1 \ud83d\udc68\u200d\ud83e\uddb1 \ud83d\udc69\u200d\ud83e\uddb0 \ud83e\uddd1\u200d\ud83e\uddb0 \ud83d\udc68\u200d\ud83e\uddb0 \ud83d\udc71\u200d\u2640\ufe0f \ud83d\udc71 \ud83d\udc71\u200d\u2642\ufe0f \ud83d\udc69\u200d\ud83e\uddb3 \ud83e\uddd1\u200d\ud83e\uddb3 \ud83d\udc68\u200d\ud83e\uddb3 \ud83d\udc69\u200d\ud83e\uddb2 \ud83e\uddd1\u200d\ud83e\uddb2 \ud83d\udc68\u200d\ud83e\uddb2 \ud83e\uddd4 \ud83d\udc75 \ud83e\uddd3 \ud83d\udc74 \ud83d\udc72 \ud83d\udc73\u200d\u2640\ufe0f \ud83d\udc73 \ud83d\udc73\u200d\u2642\ufe0f \ud83e\uddd5 \ud83d\udc6e\u200d\u2640\ufe0f \ud83d\udc6e \ud83d\udc6e\u200d\u2642\ufe0f \ud83d\udc77\u200d\u2640\ufe0f \ud83d\udc77 \ud83d\udc77\u200d\u2642\ufe0f \ud83d\udc82\u200d\u2640\ufe0f \ud83d\udc82 \ud83d\udc82\u200d\u2642\ufe0f \ud83d\udd75\ufe0f\u200d\u2640\ufe0f \ud83d\udd75\ufe0f \ud83d\udd75\ufe0f\u200d\u2642\ufe0f \ud83d\udc69\u200d\u2695\ufe0f \ud83e\uddd1\u200d\u2695\ufe0f \ud83d\udc68\u200d\u2695\ufe0f \ud83d\udc69\u200d\ud83c\udf3e \ud83e\uddd1\u200d\ud83c\udf3e \ud83d\udc68\u200d\ud83c\udf3e \ud83d\udc69\u200d\ud83c\udf73 \ud83e\uddd1\u200d\ud83c\udf73 \ud83d\udc68\u200d\ud83c\udf73 \ud83d\udc69\u200d\ud83c\udf93 \ud83e\uddd1\u200d\ud83c\udf93 \ud83d\udc68\u200d\ud83c\udf93 \ud83d\udc69\u200d\ud83c\udfa4 \ud83e\uddd1\u200d\ud83c\udfa4 \ud83d\udc68\u200d\ud83c\udfa4 \ud83d\udc69\u200d\ud83c\udfeb \ud83e\uddd1\u200d\ud83c\udfeb \ud83d\udc68\u200d\ud83c\udfeb \ud83d\udc69\u200d\ud83c\udfed \ud83e\uddd1\u200d\ud83c\udfed \ud83d\udc68\u200d\ud83c\udfed \ud83d\udc69\u200d\ud83d\udcbb \ud83e\uddd1\u200d\ud83d\udcbb \ud83d\udc68\u200d\ud83d\udcbb \ud83d\udc69\u200d\ud83d\udcbc \ud83e\uddd1\u200d\ud83d\udcbc \ud83d\udc68\u200d\ud83d\udcbc \ud83d\udc69\u200d\ud83d\udd27 \ud83e\uddd1\u200d\ud83d\udd27 \ud83d\udc68\u200d\ud83d\udd27 \ud83d\udc69\u200d\ud83d\udd2c \ud83e\uddd1\u200d\ud83d\udd2c \ud83d\udc68\u200d\ud83d\udd2c \ud83d\udc69\u200d\ud83c\udfa8 \ud83e\uddd1\u200d\ud83c\udfa8 \ud83d\udc68\u200d\ud83c\udfa8 \ud83d\udc69\u200d\ud83d\ude92 \ud83e\uddd1\u200d\ud83d\ude92 \ud83d\udc68\u200d\ud83d\ude92 \ud83d\udc69\u200d\u2708\ufe0f \ud83e\uddd1\u200d\u2708\ufe0f \ud83d\udc68\u200d\u2708\ufe0f \ud83d\udc69\u200d\ud83d\ude80 \ud83e\uddd1\u200d\ud83d\ude80 \ud83d\udc68\u200d\ud83d\ude80 \ud83d\udc69\u200d\u2696\ufe0f \ud83e\uddd1\u200d\u2696\ufe0f \ud83d\udc68\u200d\u2696\ufe0f \ud83d\udc70 \ud83d\udc78 \ud83e\udd34 \ud83e\uddb8\u200d\u2640\ufe0f \ud83e\uddb8 \ud83e\uddb8\u200d\u2642\ufe0f \ud83e\uddb9\u200d\u2640\ufe0f \ud83e\uddb9 \ud83e\uddb9\u200d\u2642\ufe0f \ud83e\udd36 \ud83e\uddd1\u200d\ud83c\udf84 \ud83c\udf85 \ud83e\uddd9\u200d\u2640\ufe0f \ud83e\uddd9 \ud83e\uddd9\u200d\u2642\ufe0f \ud83e\udddd\u200d\u2640\ufe0f \ud83e\udddd \ud83e\udddd\u200d\u2642\ufe0f \ud83e\udddb\u200d\u2640\ufe0f \ud83e\udddb \ud83e\udddb\u200d\u2642\ufe0f \ud83e\udddf\u200d\u2640\ufe0f \ud83e\udddf \ud83e\udddf\u200d\u2642\ufe0f \ud83e\uddde\u200d\u2640\ufe0f \ud83e\uddde \ud83e\uddde\u200d\u2642\ufe0f \ud83e\udddc\u200d\u2640\ufe0f \ud83e\udddc \ud83e\udddc\u200d\u2642\ufe0f \ud83e\uddda\u200d\u2640\ufe0f \ud83e\uddda \ud83e\uddda\u200d\u2642\ufe0f \ud83d\udc7c \ud83e\udd30 \ud83e\udd31 \ud83d\ude47\u200d\u2640\ufe0f \ud83d\ude47 \ud83d\ude47\u200d\u2642\ufe0f \ud83d\udc81\u200d\u2640\ufe0f \ud83d\udc81 \ud83d\udc81\u200d\u2642\ufe0f \ud83d\ude45\u200d\u2640\ufe0f \ud83d\ude45 \ud83d\ude45\u200d\u2642\ufe0f \ud83d\ude46\u200d\u2640\ufe0f \ud83d\ude46 \ud83d\ude46\u200d\u2642\ufe0f \ud83d\ude4b\u200d\u2640\ufe0f \ud83d\ude4b \ud83d\ude4b\u200d\u2642\ufe0f \ud83e\uddcf\u200d\u2640\ufe0f \ud83e\uddcf \ud83e\uddcf\u200d\u2642\ufe0f \ud83e\udd26\u200d\u2640\ufe0f \ud83e\udd26 \ud83e\udd26\u200d\u2642\ufe0f \ud83e\udd37\u200d\u2640\ufe0f \ud83e\udd37 \ud83e\udd37\u200d\u2642\ufe0f \ud83d\ude4e\u200d\u2640\ufe0f \ud83d\ude4e \ud83d\ude4e\u200d\u2642\ufe0f \ud83d\ude4d\u200d\u2640\ufe0f \ud83d\ude4d \ud83d\ude4d\u200d\u2642\ufe0f \ud83d\udc87\u200d\u2640\ufe0f \ud83d\udc87 \ud83d\udc87\u200d\u2642\ufe0f \ud83d\udc86\u200d\u2640\ufe0f \ud83d\udc86 \ud83d\udc86\u200d\u2642\ufe0f \ud83e\uddd6\u200d\u2640\ufe0f \ud83e\uddd6 \ud83e\uddd6\u200d\u2642\ufe0f \ud83d\udc85 \ud83e\udd33 \ud83d\udc83 \ud83d\udd7a \ud83d\udc6f\u200d\u2640\ufe0f \ud83d\udc6f \ud83d\udc6f\u200d\u2642\ufe0f \ud83d\udd74 \ud83d\udc69\u200d\ud83e\uddbd \ud83e\uddd1\u200d\ud83e\uddbd \ud83d\udc68\u200d\ud83e\uddbd \ud83d\udc69\u200d\ud83e\uddbc \ud83e\uddd1\u200d\ud83e\uddbc \ud83d\udc68\u200d\ud83e\uddbc \ud83d\udeb6\u200d\u2640\ufe0f \ud83d\udeb6 \ud83d\udeb6\u200d\u2642\ufe0f \ud83d\udc69\u200d\ud83e\uddaf \ud83e\uddd1\u200d\ud83e\uddaf \ud83d\udc68\u200d\ud83e\uddaf \ud83e\uddce\u200d\u2640\ufe0f \ud83e\uddce \ud83e\uddce\u200d\u2642\ufe0f \ud83c\udfc3\u200d\u2640\ufe0f \ud83c\udfc3 \ud83c\udfc3\u200d\u2642\ufe0f \ud83e\uddcd\u200d\u2640\ufe0f \ud83e\uddcd \ud83e\uddcd\u200d\u2642\ufe0f \ud83d\udc6d \ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1 \ud83d\udc6c \ud83d\udc6b \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc69 \ud83d\udc91 \ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68 \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc68 \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69 \ud83d\udc8f \ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68 \ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68 \ud83d\udc6a \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc67 \ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc67 \ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 \ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc67 \ud83d\udde3 \ud83d\udc64 \ud83d\udc65 ".split(" "),"\ud83d\udc4b":"\ud83d\udc4b \ud83e\udd1a \ud83d\udd90 \u270b \ud83d\udd96 \ud83d\udc4c \ud83e\udd0f \u270c\ufe0f \ud83e\udd1e \ud83e\udd1f \ud83e\udd19 \ud83d\udc48 \ud83d\udc49 \ud83d\udc46 \ud83d\udc47 \u261d\ufe0f \ud83d\udc4d \ud83d\udc4e \u270a \ud83d\udc4a \ud83e\udd1b \ud83e\udd1c \ud83d\udc4f \ud83d\ude4c \ud83d\udc50 \ud83e\udd32 \ud83e\udd1d \ud83d\ude4f \u270d\ufe0f \ud83d\udc85 \ud83e\udd33 \ud83d\udcaa \ud83e\uddbe \ud83e\uddb5 \ud83e\uddbf \ud83e\uddb6 \ud83d\udc63 \ud83d\udc42 \ud83e\uddbb \ud83d\udc43 \ud83e\udde0 \ud83e\uddb7 \ud83e\uddb4 \ud83d\udc40 \ud83d\udc41 \ud83d\udc45 \ud83d\udc44 \ud83d\udc8b \ud83e\ude78 \ud83e\uddf3 \ud83c\udf02 \u2602\ufe0f \ud83e\uddf5 \ud83e\uddf6 \ud83d\udc53 \ud83d\udd76 \ud83e\udd7d \ud83e\udd7c \ud83e\uddba \ud83d\udc54 \ud83d\udc55 \ud83d\udc56 \ud83e\udde3 \ud83e\udde4 \ud83e\udde5 \ud83e\udde6 \ud83d\udc57 \ud83d\udc58 \ud83e\udd7b \ud83e\ude71 \ud83e\ude72 \ud83e\ude73 \ud83d\udc59 \ud83d\udc5a \ud83d\udc5b \ud83d\udc5c \ud83d\udc5d \ud83c\udf92 \ud83d\udc5e \ud83d\udc5f \ud83e\udd7e \ud83e\udd7f \ud83d\udc60 \ud83d\udc61 \ud83e\ude70 \ud83d\udc62 \ud83d\udc51 \ud83d\udc52 \ud83c\udfa9 \ud83c\udf93 \ud83e\udde2 \ud83d\udc84 \ud83d\udc8d \ud83d\udcbc".split(" "),"\ud83d\udc02":"\ud83d\udc36 \ud83d\udc31 \ud83d\udc2d \ud83d\udc39 \ud83d\udc30 \ud83e\udd8a \ud83d\udc3b \ud83d\udc3c \ud83d\udc28 \ud83d\udc2f \ud83e\udd81 \ud83d\udc2e \ud83d\udc37 \ud83d\udc3d \ud83d\udc38 \ud83d\udc35 \ud83d\ude48 \ud83d\ude49 \ud83d\ude4a \ud83d\udc12 \ud83d\udc14 \ud83d\udc27 \ud83d\udc26 \ud83d\udc24 \ud83d\udc23 \ud83d\udc25 \ud83e\udd86 \ud83e\udd85 \ud83e\udd89 \ud83e\udd87 \ud83d\udc3a \ud83d\udc17 \ud83d\udc34 \ud83e\udd84 \ud83d\udc1d \ud83d\udc1b \ud83e\udd8b \ud83d\udc0c \ud83d\udc1e \ud83d\udc1c \ud83e\udd9f \ud83e\udd97 \ud83d\udd77 \ud83d\udd78 \ud83e\udd82 \ud83d\udc22 \ud83d\udc0d \ud83e\udd8e \ud83e\udd96 \ud83e\udd95 \ud83d\udc19 \ud83e\udd91 \ud83e\udd90 \ud83e\udd9e \ud83e\udd80 \ud83d\udc21 \ud83d\udc20 \ud83d\udc1f \ud83d\udc2c \ud83d\udc33 \ud83d\udc0b \ud83e\udd88 \ud83d\udc0a \ud83d\udc05 \ud83d\udc06 \ud83e\udd93 \ud83e\udd8d \ud83e\udda7 \ud83d\udc18 \ud83e\udd9b \ud83e\udd8f \ud83d\udc2a \ud83d\udc2b \ud83e\udd92 \ud83e\udd98 \ud83d\udc03 \ud83d\udc02 \ud83d\udc04 \ud83d\udc0e \ud83d\udc16 \ud83d\udc0f \ud83d\udc11 \ud83e\udd99 \ud83d\udc10 \ud83e\udd8c \ud83d\udc15 \ud83d\udc29 \ud83e\uddae \ud83d\udc15\u200d\ud83e\uddba \ud83d\udc08 \ud83d\udc13 \ud83e\udd83 \ud83e\udd9a \ud83e\udd9c \ud83e\udda2 \ud83e\udda9 \ud83d\udd4a \ud83d\udc07 \ud83e\udd9d \ud83e\udda8 \ud83e\udda1 \ud83e\udda6 \ud83e\udda5 \ud83d\udc01 \ud83d\udc00 \ud83d\udc3f \ud83e\udd94 \ud83d\udc3e \ud83d\udc09 \ud83d\udc32 \ud83c\udf35 \ud83c\udf84 \ud83c\udf32 \ud83c\udf33 \ud83c\udf34 \ud83c\udf31 \ud83c\udf3f \u2618\ufe0f \ud83c\udf40 \ud83c\udf8d \ud83c\udf8b \ud83c\udf43 \ud83c\udf42 \ud83c\udf41 \ud83c\udf44 \ud83d\udc1a \ud83c\udf3e \ud83d\udc90 \ud83c\udf37 \ud83c\udf39 \ud83e\udd40 \ud83c\udf3a \ud83c\udf38 \ud83c\udf3c \ud83c\udf3b \ud83c\udf1e \ud83c\udf1d \ud83c\udf1b \ud83c\udf1c \ud83c\udf1a \ud83c\udf15 \ud83c\udf16 \ud83c\udf17 \ud83c\udf18 \ud83c\udf11 \ud83c\udf12 \ud83c\udf13 \ud83c\udf14 \ud83c\udf19 \ud83c\udf0e \ud83c\udf0d \ud83c\udf0f \ud83e\ude90 \ud83d\udcab \u2b50\ufe0f \ud83c\udf1f \u2728 \u26a1\ufe0f \u2604\ufe0f \ud83d\udca5 \ud83d\udd25 \ud83c\udf2a \ud83c\udf08 \u2600\ufe0f \ud83c\udf24 \u26c5\ufe0f \ud83c\udf25 \u2601\ufe0f \ud83c\udf26 \ud83c\udf27 \u26c8 \ud83c\udf29 \ud83c\udf28 \u2744\ufe0f \u2603\ufe0f \u26c4\ufe0f \ud83c\udf2c \ud83d\udca8 \ud83d\udca7 \ud83d\udca6 \u2614\ufe0f \u2602\ufe0f \ud83c\udf0a \ud83c\udf2b".split(" "),"\ud83c\udf4f":"\ud83c\udf4f \ud83c\udf4e \ud83c\udf50 \ud83c\udf4a \ud83c\udf4b \ud83c\udf4c \ud83c\udf49 \ud83c\udf47 \ud83c\udf53 \ud83c\udf48 \ud83c\udf52 \ud83c\udf51 \ud83e\udd6d \ud83c\udf4d \ud83e\udd65 \ud83e\udd5d \ud83c\udf45 \ud83c\udf46 \ud83e\udd51 \ud83e\udd66 \ud83e\udd6c \ud83e\udd52 \ud83c\udf3d \ud83e\udd55 \ud83e\uddc4 \ud83e\uddc5 \ud83e\udd54 \ud83c\udf60 \ud83e\udd50 \ud83e\udd6f \ud83c\udf5e \ud83e\udd56 \ud83e\udd68 \ud83e\uddc0 \ud83e\udd5a \ud83c\udf73 \ud83e\uddc8 \ud83e\udd5e \ud83e\uddc7 \ud83e\udd53 \ud83e\udd69 \ud83c\udf57 \ud83c\udf56 \ud83e\uddb4 \ud83c\udf2d \ud83c\udf54 \ud83c\udf5f \ud83c\udf55 \ud83e\udd6a \ud83e\udd59 \ud83e\uddc6 \ud83c\udf2e \ud83c\udf2f \ud83e\udd57 \ud83e\udd58 \ud83e\udd6b \ud83c\udf5d \ud83c\udf5c \ud83c\udf72 \ud83c\udf5b \ud83c\udf63 \ud83c\udf71 \ud83e\udd5f \ud83e\uddaa \ud83c\udf64 \ud83c\udf59 \ud83c\udf5a \ud83c\udf58 \ud83c\udf65 \ud83e\udd60 \ud83e\udd6e \ud83c\udf62 \ud83c\udf61 \ud83c\udf67 \ud83c\udf68 \ud83c\udf66 \ud83e\udd67 \ud83e\uddc1 \ud83c\udf70 \ud83c\udf82 \ud83c\udf6e \ud83c\udf6d \ud83c\udf6c \ud83c\udf6b \ud83c\udf7f \ud83c\udf69 \ud83c\udf6a \ud83c\udf30 \ud83e\udd5c \ud83c\udf6f \ud83e\udd5b \ud83c\udf7c \u2615\ufe0f \ud83c\udf75 \ud83e\uddc3 \ud83e\udd64 \ud83c\udf76 \ud83c\udf7a \ud83c\udf7b \ud83e\udd42 \ud83c\udf77 \ud83e\udd43 \ud83c\udf78 \ud83c\udf79 \ud83e\uddc9 \ud83c\udf7e \ud83e\uddca \ud83e\udd44 \ud83c\udf74 \ud83c\udf7d \ud83e\udd63 \ud83e\udd61 \ud83e\udd62 \ud83e\uddc2".split(" "),"\ud83c\udfaf":"\u26bd\ufe0f \ud83c\udfc0 \ud83c\udfc8 \u26be\ufe0f \ud83e\udd4e \ud83c\udfbe \ud83c\udfd0 \ud83c\udfc9 \ud83e\udd4f \ud83c\udfb1 \ud83e\ude80 \ud83c\udfd3 \ud83c\udff8 \ud83c\udfd2 \ud83c\udfd1 \ud83e\udd4d \ud83c\udfcf \ud83e\udd45 \u26f3\ufe0f \ud83e\ude81 \ud83c\udff9 \ud83c\udfa3 \ud83e\udd3f \ud83e\udd4a \ud83e\udd4b \ud83c\udfbd \ud83d\udef9 \ud83d\udef7 \u26f8 \ud83e\udd4c \ud83c\udfbf \u26f7 \ud83c\udfc2 \ud83e\ude82 \ud83c\udfcb\ufe0f\u200d\u2640\ufe0f \ud83c\udfcb\ufe0f \ud83c\udfcb\ufe0f\u200d\u2642\ufe0f \ud83e\udd3c\u200d\u2640\ufe0f \ud83e\udd3c \ud83e\udd3c\u200d\u2642\ufe0f \ud83e\udd38\u200d\u2640\ufe0f \ud83e\udd38 \ud83e\udd38\u200d\u2642\ufe0f \u26f9\ufe0f\u200d\u2640\ufe0f \u26f9\ufe0f \u26f9\ufe0f\u200d\u2642\ufe0f \ud83e\udd3a \ud83e\udd3e\u200d\u2640\ufe0f \ud83e\udd3e \ud83e\udd3e\u200d\u2642\ufe0f \ud83c\udfcc\ufe0f\u200d\u2640\ufe0f \ud83c\udfcc\ufe0f \ud83c\udfcc\ufe0f\u200d\u2642\ufe0f \ud83c\udfc7 \ud83e\uddd8\u200d\u2640\ufe0f \ud83e\uddd8 \ud83e\uddd8\u200d\u2642\ufe0f \ud83c\udfc4\u200d\u2640\ufe0f \ud83c\udfc4 \ud83c\udfc4\u200d\u2642\ufe0f \ud83c\udfca\u200d\u2640\ufe0f \ud83c\udfca \ud83c\udfca\u200d\u2642\ufe0f \ud83e\udd3d\u200d\u2640\ufe0f \ud83e\udd3d \ud83e\udd3d\u200d\u2642\ufe0f \ud83d\udea3\u200d\u2640\ufe0f \ud83d\udea3 \ud83d\udea3\u200d\u2642\ufe0f \ud83e\uddd7\u200d\u2640\ufe0f \ud83e\uddd7 \ud83e\uddd7\u200d\u2642\ufe0f \ud83d\udeb5\u200d\u2640\ufe0f \ud83d\udeb5 \ud83d\udeb5\u200d\u2642\ufe0f \ud83d\udeb4\u200d\u2640\ufe0f \ud83d\udeb4 \ud83d\udeb4\u200d\u2642\ufe0f \ud83c\udfc6 \ud83e\udd47 \ud83e\udd48 \ud83e\udd49 \ud83c\udfc5 \ud83c\udf96 \ud83c\udff5 \ud83c\udf97 \ud83c\udfab \ud83c\udf9f \ud83c\udfaa \ud83e\udd39 \ud83e\udd39\u200d\u2642\ufe0f \ud83e\udd39\u200d\u2640\ufe0f \ud83c\udfad \ud83e\ude70 \ud83c\udfa8 \ud83c\udfac \ud83c\udfa4 \ud83c\udfa7 \ud83c\udfbc \ud83c\udfb9 \ud83e\udd41 \ud83c\udfb7 \ud83c\udfba \ud83c\udfb8 \ud83e\ude95 \ud83c\udfbb \ud83c\udfb2 \u265f \ud83c\udfaf \ud83c\udfb3 \ud83c\udfae \ud83c\udfb0 \ud83e\udde9 \ud83d\ude97 \ud83d\ude95 \ud83d\ude99 \ud83d\ude8c \ud83d\ude8e \ud83c\udfce \ud83d\ude93 \ud83d\ude91 \ud83d\ude92 \ud83d\ude90 \ud83d\ude9a \ud83d\ude9b \ud83d\ude9c \ud83e\uddaf \ud83e\uddbd \ud83e\uddbc \ud83d\udef4 \ud83d\udeb2 \ud83d\udef5 \ud83c\udfcd \ud83d\udefa \ud83d\udea8 \ud83d\ude94 \ud83d\ude8d \ud83d\ude98 \ud83d\ude96 \ud83d\udea1 \ud83d\udea0 \ud83d\ude9f \ud83d\ude83 \ud83d\ude8b \ud83d\ude9e \ud83d\ude9d \ud83d\ude84 \ud83d\ude85 \ud83d\ude88 \ud83d\ude82 \ud83d\ude86 \ud83d\ude87 \ud83d\ude8a \ud83d\ude89 \u2708\ufe0f \ud83d\udeeb \ud83d\udeec \ud83d\udee9 \ud83d\udcba \ud83d\udef0 \ud83d\ude80 \ud83d\udef8 \ud83d\ude81 \ud83d\udef6 \u26f5\ufe0f \ud83d\udea4 \ud83d\udee5 \ud83d\udef3 \u26f4 \ud83d\udea2 \u2693\ufe0f \u26fd\ufe0f \ud83d\udea7 \ud83d\udea6 \ud83d\udea5 \ud83d\ude8f \ud83d\uddfa \ud83d\uddff \ud83d\uddfd \ud83d\uddfc \ud83c\udff0 \ud83c\udfef \ud83c\udfdf \ud83c\udfa1 \ud83c\udfa2 \ud83c\udfa0 \u26f2\ufe0f \u26f1 \ud83c\udfd6 \ud83c\udfdd \ud83c\udfdc \ud83c\udf0b \u26f0 \ud83c\udfd4 \ud83d\uddfb \ud83c\udfd5 \u26fa\ufe0f \ud83c\udfe0 \ud83c\udfe1 \ud83c\udfd8 \ud83c\udfda \ud83c\udfd7 \ud83c\udfed \ud83c\udfe2 \ud83c\udfec \ud83c\udfe3 \ud83c\udfe4 \ud83c\udfe5 \ud83c\udfe6 \ud83c\udfe8 \ud83c\udfea \ud83c\udfeb \ud83c\udfe9 \ud83d\udc92 \ud83c\udfdb \u26ea\ufe0f \ud83d\udd4c \ud83d\udd4d \ud83d\uded5 \ud83d\udd4b \u26e9 \ud83d\udee4 \ud83d\udee3 \ud83d\uddfe \ud83c\udf91 \ud83c\udfde \ud83c\udf05 \ud83c\udf04 \ud83c\udf20 \ud83c\udf87 \ud83c\udf86 \ud83c\udf07 \ud83c\udf06 \ud83c\udfd9 \ud83c\udf03 \ud83c\udf0c \ud83c\udf09 \ud83c\udf01".split(" "),"\u2764\ufe0f":"\u2764\ufe0f \ud83e\udde1 \ud83d\udc9b \ud83d\udc9a \ud83d\udc99 \ud83d\udc9c \ud83d\udda4 \ud83e\udd0d \ud83e\udd0e \ud83d\udc94 \u2763\ufe0f \ud83d\udc95 \ud83d\udc9e \ud83d\udc93 \ud83d\udc97 \ud83d\udc96 \ud83d\udc98 \ud83d\udc9d \ud83d\udc9f \u262e\ufe0f \u271d\ufe0f \u262a\ufe0f \ud83d\udd49 \u2638\ufe0f \u2721\ufe0f \ud83d\udd2f \ud83d\udd4e \u262f\ufe0f \u2626\ufe0f \ud83d\uded0 \u26ce \u2648\ufe0f \u2649\ufe0f \u264a\ufe0f \u264b\ufe0f \u264c\ufe0f \u264d\ufe0f \u264e\ufe0f \u264f\ufe0f \u2650\ufe0f \u2651\ufe0f \u2652\ufe0f \u2653\ufe0f \ud83c\udd94 \u269b\ufe0f \ud83c\ude51 \u2622\ufe0f \u2623\ufe0f \ud83d\udcf4 \ud83d\udcf3 \ud83c\ude36 \ud83c\ude1a\ufe0f \ud83c\ude38 \ud83c\ude3a \ud83c\ude37\ufe0f \u2734\ufe0f \ud83c\udd9a \ud83d\udcae \ud83c\ude50 \u3299\ufe0f \u3297\ufe0f \ud83c\ude34 \ud83c\ude35 \ud83c\ude39 \ud83c\ude32 \ud83c\udd70\ufe0f \ud83c\udd71\ufe0f \ud83c\udd8e \ud83c\udd91 \ud83c\udd7e\ufe0f \ud83c\udd98 \u274c \u2b55\ufe0f \ud83d\uded1 \u26d4\ufe0f \ud83d\udcdb \ud83d\udeab \ud83d\udcaf \ud83d\udca2 \u2668\ufe0f \ud83d\udeb7 \ud83d\udeaf \ud83d\udeb3 \ud83d\udeb1 \ud83d\udd1e \ud83d\udcf5 \ud83d\udead \u2757\ufe0f \u2755 \u2753 \u2754 \u203c\ufe0f \u2049\ufe0f \ud83d\udd05 \ud83d\udd06 \u303d\ufe0f \u26a0\ufe0f \ud83d\udeb8 \ud83d\udd31 \u269c\ufe0f \ud83d\udd30 \u267b\ufe0f \u2705 \ud83c\ude2f\ufe0f \ud83d\udcb9 \u2747\ufe0f \u2733\ufe0f \u274e \ud83c\udf10 \ud83d\udca0 \u24c2\ufe0f \ud83c\udf00 \ud83d\udca4 \ud83c\udfe7 \ud83d\udebe \u267f\ufe0f \ud83c\udd7f\ufe0f \ud83c\ude33 \ud83c\ude02\ufe0f \ud83d\udec2 \ud83d\udec3 \ud83d\udec4 \ud83d\udec5 \ud83d\udeb9 \ud83d\udeba \ud83d\udebc \u26a7 \ud83d\udebb \ud83d\udeae \ud83c\udfa6 \ud83d\udcf6 \ud83c\ude01 \ud83d\udd23 \u2139\ufe0f \ud83d\udd24 \ud83d\udd21 \ud83d\udd20 \ud83c\udd96 \ud83c\udd97 \ud83c\udd99 \ud83c\udd92 \ud83c\udd95 \ud83c\udd93 0\ufe0f\u20e3 1\ufe0f\u20e3 2\ufe0f\u20e3 3\ufe0f\u20e3 4\ufe0f\u20e3 5\ufe0f\u20e3 6\ufe0f\u20e3 7\ufe0f\u20e3 8\ufe0f\u20e3 9\ufe0f\u20e3 \ud83d\udd1f \ud83d\udd22 #\ufe0f\u20e3 *\ufe0f\u20e3 \u23cf\ufe0f \u25b6\ufe0f \u23f8 \u23ef \u23f9 \u23fa \u23ed \u23ee \u23e9 \u23ea \u23eb \u23ec \u25c0\ufe0f \ud83d\udd3c \ud83d\udd3d \u27a1\ufe0f \u2b05\ufe0f \u2b06\ufe0f \u2b07\ufe0f \u2197\ufe0f \u2198\ufe0f \u2199\ufe0f \u2196\ufe0f \u2195\ufe0f \u2194\ufe0f \u21aa\ufe0f \u21a9\ufe0f \u2934\ufe0f \u2935\ufe0f \ud83d\udd00 \ud83d\udd01 \ud83d\udd02 \ud83d\udd04 \ud83d\udd03 \ud83c\udfb5 \ud83c\udfb6 \u2795 \u2796 \u2797 \u2716\ufe0f \u267e \ud83d\udcb2 \ud83d\udcb1 \u2122\ufe0f \xa9\ufe0f \xae\ufe0f \u3030\ufe0f \u27b0 \u27bf \ud83d\udd1a \ud83d\udd19 \ud83d\udd1b \ud83d\udd1d \ud83d\udd1c \u2714\ufe0f \u2611\ufe0f \ud83d\udd18 \ud83d\udd34 \ud83d\udfe0 \ud83d\udfe1 \ud83d\udfe2 \ud83d\udd35 \ud83d\udfe3 \u26ab\ufe0f \u26aa\ufe0f \ud83d\udfe4 \ud83d\udd3a \ud83d\udd3b \ud83d\udd38 \ud83d\udd39 \ud83d\udd36 \ud83d\udd37 \ud83d\udd33 \ud83d\udd32 \ud83d\udfe5 \ud83d\udfe7 \ud83d\udfe8 \ud83d\udfe9 \ud83d\udfe6 \ud83d\udfea \u2b1b\ufe0f \u2b1c\ufe0f \ud83d\udfeb \ud83d\udd08 \ud83d\udd07 \ud83d\udd09 \ud83d\udd0a \ud83d\udd14 \ud83d\udd15 \ud83d\udce3 \ud83d\udce2 \ud83d\udc41\u200d\ud83d\udde8 \ud83d\udcac \ud83d\udcad \ud83d\uddef \u2660\ufe0f \u2663\ufe0f \u2665\ufe0f \u2666\ufe0f \ud83c\udccf \ud83c\udfb4 \ud83c\udc04\ufe0f \ud83d\udd50 \ud83d\udd51 \ud83d\udd52 \ud83d\udd53 \ud83d\udd54 \ud83d\udd55 \ud83d\udd56 \ud83d\udd57 \ud83d\udd58 \ud83d\udd59 \ud83d\udd5a \ud83d\udd5b \ud83d\udd5c \ud83d\udd5d \ud83d\udd5e \ud83d\udd5f \ud83d\udd60 \ud83d\udd61 \ud83d\udd62 \ud83d\udd63 \ud83d\udd64 \ud83d\udd65 \ud83d\udd66 \ud83d\udd67 \u231a\ufe0f \ud83d\udcf1 \ud83d\udcf2 \ud83d\udcbb \ud83d\udda5 \ud83d\udda8 \ud83d\uddb1 \ud83d\uddb2 \ud83d\udd79 \ud83d\udddc \ud83d\udcbd \ud83d\udcbe \ud83d\udcbf \ud83d\udcc0 \ud83d\udcfc \ud83d\udcf7 \ud83d\udcf8 \ud83d\udcf9 \ud83c\udfa5 \ud83d\udcfd \ud83c\udf9e \ud83d\udcde \u260e\ufe0f \ud83d\udcdf \ud83d\udce0 \ud83d\udcfa \ud83d\udcfb \ud83c\udf99 \ud83c\udf9a \ud83c\udf9b \ud83e\udded \u23f1 \u23f2 \u23f0 \ud83d\udd70 \u231b\ufe0f \u23f3 \ud83d\udce1 \ud83d\udd0b \ud83d\udd0c \ud83d\udca1 \ud83d\udd26 \ud83d\udd6f \ud83e\ude94 \ud83e\uddef \ud83d\udee2 \ud83d\udcb8 \ud83d\udcb5 \ud83d\udcb4 \ud83d\udcb6 \ud83d\udcb7 \ud83d\udcb0 \ud83d\udcb3 \ud83d\udc8e \u2696\ufe0f \ud83e\uddf0 \ud83d\udd27 \ud83d\udd28 \u2692 \ud83d\udee0 \u26cf \ud83d\udd29 \u2699\ufe0f \ud83e\uddf1 \u26d3 \ud83e\uddf2 \ud83d\udd2b \ud83d\udca3 \ud83e\udde8 \ud83e\ude93 \ud83d\udd2a \ud83d\udde1 \u2694\ufe0f \ud83d\udee1 \ud83d\udeac \u26b0\ufe0f \u26b1\ufe0f \ud83c\udffa \ud83d\udd2e \ud83d\udcff \ud83e\uddff \ud83d\udc88 \u2697\ufe0f \ud83d\udd2d \ud83d\udd2c \ud83d\udd73 \ud83e\ude79 \ud83e\ude7a \ud83d\udc8a \ud83d\udc89 \ud83e\ude78 \ud83e\uddec \ud83e\uddeb \ud83e\uddea \ud83c\udf21 \ud83e\uddf9 \ud83e\uddfa \ud83e\uddfb \ud83d\udebd \ud83d\udeb0 \ud83d\udebf \ud83d\udec1 \ud83d\udec0 \ud83e\uddfc \ud83e\ude92 \ud83e\uddfd \ud83e\uddf4 \ud83d\udece \ud83d\udd11 \ud83d\udddd \ud83d\udeaa \ud83e\ude91 \ud83d\udecb \ud83d\udecf \ud83d\udecc \ud83e\uddf8 \ud83d\uded2 \ud83c\udf81 \ud83c\udf88 \ud83c\udf8f \ud83c\udf80 \ud83c\udf8a \ud83c\udf89 \ud83c\udf8e \ud83c\udfee \ud83c\udf90 \ud83e\udde7 \u2709\ufe0f \ud83d\udce9 \ud83d\udce8 \ud83d\udce7 \ud83d\udc8c \ud83d\udce5 \ud83d\udce4 \ud83d\udce6 \ud83c\udff7 \ud83d\udcea \ud83d\udceb \ud83d\udcec \ud83d\udced \ud83d\udcee \ud83d\udcef \ud83d\udcdc \ud83d\udcc3 \ud83d\udcc4 \ud83d\udcd1 \ud83e\uddfe \ud83d\udcca \ud83d\udcc8 \ud83d\udcc9 \ud83d\uddd2 \ud83d\uddd3 \ud83d\udcc6 \ud83d\udcc5 \ud83d\uddd1 \ud83d\udcc7 \ud83d\uddc3 \ud83d\uddf3 \ud83d\uddc4 \ud83d\udccb \ud83d\udcc1 \ud83d\udcc2 \ud83d\uddc2 \ud83d\uddde \ud83d\udcf0 \ud83d\udcd3 \ud83d\udcd4 \ud83d\udcd2 \ud83d\udcd5 \ud83d\udcd7 \ud83d\udcd8 \ud83d\udcd9 \ud83d\udcda \ud83d\udcd6 \ud83d\udd16 \ud83e\uddf7 \ud83d\udd17 \ud83d\udcce \ud83d\udd87 \ud83d\udcd0 \ud83d\udccf \ud83e\uddee \ud83d\udccc \ud83d\udccd \u2702\ufe0f \ud83d\udd8a \ud83d\udd8b \u2712\ufe0f \ud83d\udd8c \ud83d\udd8d \ud83d\udcdd \u270f\ufe0f \ud83d\udd0d \ud83d\udd0e \ud83d\udd0f \ud83d\udd10 \ud83d\udd12 \ud83d\udd13".split(" ")},Kn=function(e,t){return void 0===t&&(t=""),t+"/static/images/futures/sticker/"+e+"@3x.png"},$n={textAlign:"center",borderBottom:"1px solid",borderBottomColor:"newLine","::-webkit-scrollbar-track":{background:"transparent"},"::-webkit-scrollbar-thumb":{height:"auto"},".msg-emoji-tabs":{display:"flex",alignItems:"center",pl:"8px",height:"40px",borderBottom:"1px solid",borderBottomColor:"newLine"},"& .msg-emoji-tab":{mx:"8px",width:"28px",cursor:"pointer",fontSize:"25px","&.selected":{borderBottom:"2px solid",borderBottomColor:"primary"}},"& .msg-emoji-box":{flexWrap:"wrap",textAlign:"center",maxHeight:"158px",overflow:"auto scroll",display:"flex"},"& .msg-emoji-item":{width:"12.5%",pt:"5px",boxSizing:"border-box",fontSize:"25px",borderRadius:"5px",border:"1px solid transparent",cursor:"pointer",":hover":{borderColor:"#F0B90B"}},".msg-bibi-box":{borderRadius:"5px",width:"62px",height:"62px",margin:"7px 15px",cursor:"pointer",border:"1px solid transparent","& > img":{width:"100%"},"&:hover":{borderColor:"#F0B90B"}}},Xn=(0,a.memo)((function(e){var t=e.text,n=e.onClick,r=(0,a.useCallback)((function(e){e.stopPropagation(),n(t)}),[n,t]);return i().createElement("div",{className:"msg-emoji-item",onClick:r},t)}));const Qn=(0,a.memo)((function(e){var t,n=e.visible,r=e.onClick,o=e.onSend,s=(0,a.useState)(!1),l=s[0],c=s[1],u=(0,a.useRef)(null),d=(0,a.useState)("bibi"),m=d[0],p=d[1],g=U().STATIC_HOST;(0,a.useEffect)((function(){l||c(n)}),[l,n]);var f=(0,a.useCallback)((function(e,t){p(e),t.stopPropagation(),u.current&&(u.current.scrollTop=0)}),[]);return l?i().createElement(H.Z,{sx:$n,display:n?"block":"none"},i().createElement("div",{className:"msg-emoji-tabs"},i().createElement("div",{onClick:function(e){return f("bibi",e)},className:lt()("msg-emoji-tab",{selected:"bibi"===m})},i().createElement(Y.Z,{sx:{width:"25px",mt:"4px"},src:g+"/static/chatroom/image/bibi-smile.png",alt:"BIBI"})),Object.keys(Jn).map((function(e){return i().createElement("div",{className:lt()("msg-emoji-tab",{selected:m===e}),onClick:function(t){return f(e,t)},key:e},e)}))),i().createElement("div",{ref:u,className:"msg-emoji-box"},null===(t=Jn[m])||void 0===t?void 0:t.map((function(e){return i().createElement(Xn,{key:e,text:e,onClick:r})})),"bibi"===m&&w.map((function(e){return i().createElement("div",{key:e,onClick:function(){return o(e)},className:"msg-bibi-box"},i().createElement("img",{src:Kn(e,g)}))})))):null}));var er=n("fi7b"),tr=n("e5RN"),nr={flexWrap:"wrap",textAlign:"center",maxHeight:"168px",overflow:"auto",borderBottom:"1px solid",borderBottomColor:"newLine",bg:"popupBg",p:"8px 20px","::-webkit-scrollbar-track":{background:"transparent"},"::-webkit-scrollbar-thumb":{height:"auto"},".command-title":{display:"flex",justifyContent:"space-between",width:"100%",fontSize:"12px",fontWeight:"500",color:"t.third",lineHeight:"16px",mb:"6px","&>div:last-of-type":{mr:"60px"}},".command-item":{display:"flex",justifyContent:"space-between",color:"t.secondary",width:"100%",fontSize:"12px",lineHeight:"16px",alignItems:"center",textAlign:"left",height:"30px",margin:"8px 0",".command-button":{width:"150px",bg:"bg3",color:"t.secondary",boxSizing:"border-box",textAlign:"left",p:"6px",borderRadius:"3px",border:"1px solid",borderColor:"bg3",cursor:"pointer",wordBreak:"break-all",":hover":{borderColor:"#F0B90B"}}}};const rr=(0,a.memo)((function(e){var t=e.visible,n=e.setCommand,r=(0,a.useState)(!1),o=r[0],s=r[1],l=J(),c=l.getI18n,u=l.t,d=In(),m=it();return(0,a.useEffect)((function(){o||s(t)}),[o,t]),o?i().createElement(tr.Z,{sx:nr,display:t?"flex":"none"},m&&i().createElement(i().Fragment,null,i().createElement(tr.Z,{className:"command-title"},i().createElement(z.Z,null,c("Share-function")),i().createElement(z.Z,null,c("Share-command"))),S.map((function(e){var t=e.commandText,r=e.commandLabel,o=e.sensor;return i().createElement(tr.Z,{key:r,className:"command-item","data-testid":o||void 0},i().createElement(z.Z,null,c(r)),i().createElement(H.Z,{className:"command-button",onClick:function(e){e.stopPropagation(),n(t)}},t))}))),i().createElement(tr.Z,{className:"command-title"},i().createElement(z.Z,null,c("Share-style-function")),i().createElement(z.Z,null,c("Share-command"))),_.map((function(e){var t=e.label,r=e.defaultLabel,o=e.command;return i().createElement(tr.Z,{key:t,className:"command-item"},i().createElement(z.Z,null,i().createElement(er.c,{t:u,i18nKey:t,defaults:r,components:{b:i().createElement("b",null),i:i().createElement("i",null),c:i().createElement(z.Z,{color:"buy"}),u:i().createElement("u",null)}})),i().createElement(H.Z,{className:"command-button",onClick:function(e){e.stopPropagation(),n(o,!1)}},c(t,{defaultValue:r})))})),d&&i().createElement(i().Fragment,null,i().createElement(tr.Z,{className:"command-title"},i().createElement(z.Z,null,c("Share-more-function")),i().createElement(z.Z,null,c("Share-command"))),R.map((function(e){var t=e.commandText,r=e.commandLabel,o=e.command,a=e.sensor;return i().createElement(tr.Z,{key:r,className:"command-item","data-testid":a||void 0},i().createElement(z.Z,null,c(r)),i().createElement(H.Z,{className:"command-button",onClick:function(e){e.stopPropagation(),n(o||t)}},t))})))):null}));var or=(0,a.forwardRef)((function(e,t){var n=e.onGotoBottom,r=(0,Pt.Z)().enqueueNotification,s=(0,l.useDispatch)(),c=J().getI18n,u=it(),d=at(),m=d.liftBanTime,p=d.banReason,g=d.isAdmin,f=(0,l.useSelector)((function(e){var t,n,r;return null===(r=null===(n=null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||void 0===n?void 0:n.banIds)||void 0===r?void 0:r.includes(e.common.userInfo.userId)}))||!1,h=(0,a.useRef)(0),v=(0,a.useState)(!0),y=v[0],b=v[1],x=(0,a.useState)(""),I=x[0],E=x[1],w=(0,a.useState)(!1),S=w[0],_=w[1],R=(0,a.useState)(!1),k=R[0],L=R[1],B=(0,a.useState)(!1),T=B[0],A=B[1],Z=(0,a.useState)(!1),P=Z[0],U=Z[1],D=(0,a.useState)(!1),j=D[0],F=D[1],V=(0,a.useState)(!1),z=V[0],q=V[1],Y=(0,a.useState)(!1),K=Y[0],$=Y[1],X=(0,a.useState)(!1),Q=X[0],ee=X[1],te=(0,a.useState)([]),ne=te[0],re=te[1],oe=(0,a.useState)([]),ae=oe[0],ie=oe[1],se=(0,a.useRef)([]),le=(0,a.useRef)([]),ce=(0,a.useRef)(),ue=On(m)[0],de=ot(),me=pe(),ge=In(),fe=(0,a.useMemo)((function(){return Rn(me.id,ge)}),[ge,me.id]),he=(0,a.useMemo)((function(){return[c("sharePNL","Share PNL")+"?",c("Yes",{defaultValue:"YES"}),c("No",{defaultValue:"NO"})]}),[c]),ve=(0,a.useCallback)((function(){return!f&&!ue}),[ue,f]),ye=(0,a.useCallback)((function(){var e=ce.current;if(e){e.focus();var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t),n.collapseToEnd())}}),[]),xe=(0,a.useCallback)((function(){F(!1),U(!1),$(!1),ee(!1),q(!1)}),[]),Ie=(0,a.useCallback)((function(e){E((function(t){return""+(t||"")+e+" "})),xe(),setTimeout((function(){q(!0)})),ye()}),[xe,ye]),Ee=(0,a.useCallback)((function(e){E((function(t){return""+(t||"")+e+" "})),xe(),ye()}),[xe,ye]),we=(0,a.useCallback)((function(e){var t=e.command,n=e.params;return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,a,i;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return[4,s.chat.sendChatCommand((0,o.__assign)((0,o.__assign)({},fe),{command:t,params:n,replyExt:JSON.stringify(de)}))];case 1:return e=l.sent().success,(i={})[N.mute]="mute-successfully",i[N.unmute]="unmute-successfully",a=i,e&&r({message:c(a[t]||"Input-ChatCmdSuccess"),variant:"success"}),xe(),(0,vt.unstable_batchedUpdates)((function(){L(!1),E("")})),de&&s.chat.updateReplyMessageId(),[2]}}))}))}),[s.chat,r,c,xe,fe,de]),Ce=(0,a.useCallback)((function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i,l,u,d,m,p,f;return(0,o.__generator)(this,(function(v){switch(v.label){case 0:return t=e.currentTarget.textContent,a=e.keyCode,i=Fn(t),(0,vt.unstable_batchedUpdates)((function(){i!==S&&_(i)})),27===e.keyCode&&xe(),13!==a?[3,5]:(e.preventDefault(),t.trim()?i?[2]:(l=Date.now())-h.current<=1e3?(r({message:c("WS-ErrorMsg-110101"),variant:"error"}),[2]):(u=g&&M.some((function(e){return null===t||void 0===t?void 0:t.startsWith("/"+e)})),d=Object.keys(N).some((function(e){return!M.includes(e)&&(null===t||void 0===t?void 0:t.startsWith("/"+e))})),m=function(e){var t=e.trim().split(/\s+/);be("extractCmd",e,t);var n=t[0];if(Object.keys(N).some((function(e){return"/"+e===n})))for(var r=t[0],o=t.slice(1),a=0,i=Object.keys(N);a<i.length;a++){var s=i[a];if(new RegExp("\\/"+s).test(r))return{command:N[s],params:o.join(" ")}}return{command:"",params:""}}(t),p=m.command,f=m.params,/(?:\/cposition )|(?:\/uposition )/.test(t)&&!f?(r({message:c("Input-MessageParamsError"),variant:"error"}),[2]):(h.current=l,xe(),E(""),e.currentTarget.textContent="",u&&p&&ge||d&&p?(h.current=l,[4,we({command:p,params:f})]):[3,4])):[2]);case 1:return v.sent(),p!==N.mute&&p!==N.unmute?[3,3]:[4,s.chat.getMuteUsers()];case 2:v.sent(),v.label=3;case 3:return[2];case 4:s.chat.sendMessage((0,o.__assign)((0,o.__assign)({},fe),{time:Date.now(),payload:jn(t),replyExt:de?JSON.stringify(de):"",toAdmin:t.includes(O)})),s.chat.updateReplyMessageId(),n(),v.label=5;case 5:return[2]}}))}))}),[S,xe,g,ge,s.chat,fe,de,r,c,we,n]),Se=(0,a.useCallback)((function(e){ve()&&(s.chat.sendMessage((0,o.__assign)((0,o.__assign)({},fe),{time:Date.now(),payload:jn("[:"+e+"]"),replyExt:de?JSON.stringify(de):"",toAdmin:!1})),A(!1),de&&s.chat.updateReplyMessageId())}),[ve,s.chat,fe,de]),_e=(0,a.useCallback)((function(e){E((function(t){return""+(t||"")+e})),q(!1),ye()}),[ye]),Re=(0,a.useCallback)((function(e){"/uposition "===e?U(!0):"/cposition "===e?F(!0):"/urpnl "===e?$(!0):"/crpnl "===e&&ee(!0)}),[]),Ne=(0,a.useCallback)((function(e){ve()&&(e.stopPropagation(),L((function(e){return!e})),A(!1))}),[k,ve]),Me=(0,a.useCallback)((function(e){ve()&&(e.stopPropagation(),A((function(e){return!e})),L(!1))}),[T,ve]),Oe=(0,a.useCallback)((function(e){E(e.currentTarget.textContent||"")}),[]),ke=(0,a.useCallback)((function(e,t){ve()&&(xe(),E((function(n){return t?""+e:""+(n||"")+e})),ye())}),[xe,ve,ye]),Le=(0,a.useCallback)((function(e,t){void 0===t&&(t=!0),ve()&&(xe(),setTimeout((function(){ke(e,t),Re(e)})))}),[ve,xe,ke,Re]),Be=(0,a.useCallback)((function(e){xe();var t=e.currentTarget.textContent;Re(t),_(Fn(t))}),[xe,Re]),Te=(0,a.useMemo)((function(){return f?c("Input-GroupBanTips","Being turned off comments."):c("Input-TypeHereToSubmit","Type here... (Enter to submit)")}),[f,c]);return(0,a.useEffect)((function(){ve()||ce.current&&(ce.current.textContent="")}),[ve]),(0,a.useEffect)((function(){return function(){s.chat.updateState({chooseMessageId:void 0,replyMessageId:void 0})}}),[s]),(0,a.useEffect)((function(){(T||k)&&n()}),[T,k,n]),(0,a.useEffect)((function(){var e="webkitLineBreak"in document.documentElement.style;b(!e||"plaintext-only")}),[]),(0,a.useEffect)((function(){u&&((0,W.v_)(G+"/v1/private/future/chatroom/own-position-symbol",{}).then((function(e){var t=e.data;le.current=t||[]})),(0,W.v_)(G+"/v1/private/delivery/chatroom/own-position-symbol",{}).then((function(e){var t=e.data;se.current=t||[]})),(0,W.v_)(G+"/v1/private/future/chatroom/traded-symbols",{}).then((function(e){var t=e.data;re(t||[])})),(0,W.v_)(G+"/v1/private/delivery/chatroom/tradedSymbols",{}).then((function(e){var t=e.data;ie(t||[])})))}),[u]),(0,a.useImperativeHandle)(t,(function(){return{onBlankClick:function(){A(!1),L(!1)}}})),i().createElement(H.Z,{className:"ChatInput",sx:Yn},i().createElement(rr,{visible:k,setCommand:Le}),i().createElement(Qn,{visible:T,onClick:ke,onSend:Se}),i().createElement(H.Z,{className:"ChatInput-container"},i().createElement(Pn,null),ue?i().createElement(Un,{banTime:ue,banReason:p}):i().createElement("div",{className:"ChatInput-content"},i().createElement("div",{className:"ChatInput-input"},i().createElement(H.Z,{ref:ce,className:"ChatInput-input-box",contentEditable:f?"false":y,placeholder:Te,suppressContentEditableWarning:!0,onInput:Be,onBlur:Oe,onFocus:function(){},onKeyDown:Ce},I),j&&i().createElement(Gn,null,i().createElement(qn,{select:Ie,positionList:se.current})),P&&i().createElement(Gn,null,i().createElement(qn,{select:Ie,positionList:le.current})),K&&i().createElement(Gn,null,i().createElement(qn,{select:Ee,positionList:ne})),Q&&i().createElement(Gn,null,i().createElement(qn,{select:Ee,positionList:ae})),z&&i().createElement(Gn,{sx:{left:"179px!important",width:"95px"}},i().createElement(Wn,{select:_e,shareList:he}))),i().createElement("div",{className:"ChatInput-command"},i().createElement(Et,{"data-testid":"ChatRoom-ShareIcon",className:lt()({active:k}),size:20,onClick:Ne}),i().createElement(_n,{"data-testid":"ChatRoom-StickerIcon",className:lt()({active:T}),size:20,onClick:Me}))),S&&i().createElement("div",{className:"out-max-tip"},c("Input-OutMaxTips",{length:C.maxLen,defaultValue:"Max input {{length}} characters"}))))}));const ar=i().memo(or);var ir=n("BrsQ");const sr=function(e,t){var n=(0,a.useRef)(),r=n.current;return t&&void 0===e||(n.current=e),r};var lr=function(e){var t=document.querySelector(e);if(!t)throw new Error("queryBoundingClientRect "+e+" error");return t.getBoundingClientRect()},cr=function(e){var t=document.querySelector(e);if(!t)throw new Error("queryScrollOffset "+e+" error");return{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}};function ur(e,t){var n=e.rootContainerRef,r=e.throttleMs,o=e.debounceMs,i=e.shouldSkipFirst,s=e.margin,l=e.threshold,c=e.isDisabled,u=(0,a.useRef)(),d=(0,a.useRef)(),m=(0,a.useRef)(0),p=(0,a.useRef)();d.current=t;var g=(0,a.useCallback)((function(){m.current++}),[]),f=(0,a.useCallback)((function(){m.current&&(m.current--,!m.current&&p.current&&(p.current(),p.current=void 0))}),[]);return(0,a.useEffect)((function(){if(!c)return function(){u.current&&(u.current.observer.disconnect(),u.current.callbacks.clear(),u.current=void 0)}}),[c]),{observe:(0,a.useCallback)((function(e,t){u.current||function(){var e=new Map,t=new Map,a=function(){var n=Array.from(t.values());n.forEach((function(t){var r=e.get(t.target);r&&r(t,n)})),d.current&&d.current(n),t.clear()},c=r?he.throttle:o?he.debounce:void 0,g=c?c(a,r||o,{leading:!i}):a,f=new IntersectionObserver((function(e){e.forEach((function(e){t.set(e.target,e)})),m.current?p.current=function(){g()}:g()}),{root:null===n||void 0===n?void 0:n.current,rootMargin:s?s+"px":void 0,threshold:l});u.current={observer:f,callbacks:e}}();var a=u.current;return a.observer.observe(e),t&&a.callbacks.set(e,t),function(){t&&a.callbacks.delete(e),a.observer.unobserve(e)}}),[c]),freeze:g,unfreeze:f}}function dr(e,t,n){(0,a.useEffect)((function(){return t?t(e.current,n):void 0}),[])}const mr={bg:"moduleBg",overflow:"auto"};var pr=(0,a.forwardRef)((function(e,t){var n=e.id,r=e.height,s=e.scrollTop,l=void 0===s?0:s,c=e.upperThreshold,u=void 0===c?0:c,d=e.onScrollToUpper,m=e.onScrollToLower,p=e.onScroll,g=e.onClick,f=e.className,h=e.style,v=void 0===h?{}:h,y=e.sx,b=void 0===y?{}:y,x=e.children,I=(0,a.useRef)(null),E=(0,a.useRef)(null),w=(0,a.useRef)(null),C=ur({rootContainerRef:w,shouldSkipFirst:!0,margin:u},(function(e){var t=e.find((function(e){return e.isIntersecting}));if(t){var n=t.target;"backwards-trigger"===n.className&&d?d():"forwards-trigger"===n.className&&m&&m()}})).observe;dr(I,C),dr(E,C);var S=(0,a.useCallback)((function(e){"undefined"!==typeof e&&w.current&&(w.current.scrollTop=e)}),[]);(0,a.useEffect)((function(){S(l)}),[S,l]),(0,a.useImperativeHandle)(t,(function(){return{scrollTo:S}}));var _=(0,a.useMemo)((function(){return(0,o.__assign)((0,o.__assign)({},v),{height:r+"px"})}),[v,r]);return i().createElement(H.Z,{id:n,className:lt()("scroll-view",f),style:_,sx:(0,o.__assign)((0,o.__assign)({},mr),b),ref:w,onScroll:function(e){p&&(e.persist(),p(e))},onClick:g},i().createElement("div",{ref:I,key:"backwards-trigger",className:"backwards-trigger"}),x,i().createElement("div",{ref:E,key:"forwards-trigger",className:"forwards-trigger"}))}));const gr=(0,a.memo)(pr);var fr,hr=n("9rpF"),vr=n("vM3x"),yr=n.n(vr),br=n("tBvR");!function(e){e.Square="SQUARE",e.Diamond="DIAMOND"}(fr||(fr={}));var xr=n("GmLw").Buffer,Ir=[{light:"#F0A20B",normal:"#E39600",dark:"#D0810B"},{light:"#5CA7F7",normal:"#328DFD",dark:"#1773EB"},{light:"#BCD329",normal:"#A6C002",dark:"#88AD04"},{light:"#FF92C6",normal:"#FF62AD",dark:"#D93081"},{light:"#FF9255",normal:"#FF730D",dark:"#E55300"},{light:"#C09FF9",normal:"#8E60F0",dark:"#7645D9"},{light:"#54DADE",normal:"#24C7D6",dark:"#12AAB5"},{light:"#FFBEA6",normal:"#E8A37D",dark:"#CB8C54"}],Er={size:64},wr={light:[0,1],normal:[2],dark:[3,4]},Cr=function(e){return parseInt(e,16)},Sr=function(e){var t=[0,2,4,6,8,10,12,14];return e>=t.slice(-25*t.length/100)[0]?fr.Diamond:fr.Square},_r=function(e,t){return e[Object.keys(wr).find((function(e){return wr[e].includes(t)}))||"normal"]},Rr=function(e,t){void 0===t&&(t=Er);var n=(0,br.sha512)(e),r=function(e,t){return t[Cr(e.charAt(0))%t.length]}(n,Ir);return"data:image/svg+xml;base64,"+function(e){return xr.from(e,"binary").toString("base64")}(function(e,t,n){for(var r=Math.floor(n.size/5),o=Math.floor((n.size-5*r)/2),a='<svg xmlns="http://www.w3.org/2000/svg" width="'+n.size+'" height="'+n.size+'">',i=0;i<e.length;i++){var s=e[i],l=s.xIndex,c=s.yIndex,u=s.shape,d=_r(t,c),m=u===fr.Diamond,p=m?new(yr())(r/Math.sqrt(2)).toFixed(2):r,g=m?new(yr())(r/Math.sqrt(2)).toFixed(2):r,f=m?new(yr())((r-parseFloat(""+p))/2+l*r+o).toFixed(2):l*r+o,h=m?new(yr())((r-parseFloat(""+g))/2+c*r+o).toFixed(2):c*r+o,v=parseFloat(""+f)+parseFloat(""+p)/2,y=parseFloat(""+h)+parseFloat(""+g)/2;a+='<rect x="'+f+'" y="'+h+'" width="'+p+'" height="'+g+'" fill="'+d+'" '+(m?'transform="rotate(45 '+v+", "+y+')"':"")+" />"}return a+"</svg>"}(function(e,t){if(e.some((function(e){return e.shape===fr.Diamond})))return e;var n=[{xIndex:Math.floor(2.5),yIndex:Cr(t.charAt(1))%5,shape:fr.Diamond}],r=e.slice();return n.forEach((function(t){var n=e.findIndex((function(e){return e.xIndex===t.xIndex&&e.yIndex===t.yIndex}));-1===n?r.push(t):r[n]=t})),r}(function(e){for(var t=[],n=5*Math.ceil(2.5),r=0;r<n;r++){var o=Cr(e.charAt(r));if(o%2===0){var a=Math.floor(r/5),i=r-5*a,s=4-a,l=0===a?fr.Square:Sr(o);t.push({xIndex:a,yIndex:i,shape:l}),a!==s&&t.push({xIndex:s,yIndex:i,shape:l})}}return t}(n),n),r,t))},Nr={},Mr=function(e,t){var n=e+"-"+JSON.stringify(t);if(n in Nr)return Nr[n];Object.keys(Nr).length>=50&&(Nr={});var r=Rr(e,t);return Nr[n]=r,r};const Or=function(e){var t=e.name,n=void 0===t?"":t,r=e.opts,o=e.className,a=void 0===o?"":o,s=e.onClick;return i().createElement(H.Z,{className:"avatar "+a,onClick:s},i().createElement(Y.Z,{src:Mr(n,r)}))};var kr={"&.message-header-dropdown":{display:"flex",width:"143px",py:"4px",justifyContent:"center",flexDirection:"column",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px",".message-header-dropdown-item":{display:"flex",alignItems:"center",color:"t.primary",fontSize:"12px",lineHeight:"16px",pl:"8px",width:"100%",height:"40px",cursor:"pointer"}}};const Lr=function(e){var t,n=e.sender,r=e.roomId,s=J().getI18n,c=(t=n.id,(0,l.useSelector)((function(e){var n,r,o;return null===(o=null===(r=null===(n=nt.selectCurrentChatMessages(e))||void 0===n?void 0:n.meta)||void 0===r?void 0:r.banIds)||void 0===o?void 0:o.includes(t)}))),u=Xt(),d=(0,Pt.Z)().enqueueNotification,m=(0,a.useCallback)((function(){u.hide()}),[u]),p=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ln(n.id,r)];case 1:return e.sent().success&&(d({message:s("RemoveRoom-Success","Removed Successfully"),variant:"success"}),u.hide()),[2]}}))}))}),[u,d,s,r,n.id]),g=(0,a.useCallback)((function(){u.show({title:s("RemoveRoom","Remove Room"),content:s("RemoveRoom-Confirm",{nickName:n.name,defaultValue:"Are you sure you want to remove "+n.name+" from the room?"}),footer:i().createElement(H.Z,{className:"default-dialog-button-wrap"},i().createElement(Ut.Z,{variant:"secondary",className:"default-dialog-button",onClick:m},s("Cancel","Cancel")),i().createElement(Ut.Z,{variant:"primary",className:"default-dialog-button",onClick:p},s("Confirm","Confirm"))),maskClose:!1})}),[u,s,m,p,n.name]),f=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Bn([n.id],r,!c)];case 1:return e.sent().success&&(d({message:c?s("UnBanUser-Success","Turned on successfully"):s("BanUser-Success","Turned off successfully"),variant:"success"}),u.hide()),[2]}}))}))}),[u,d,s,c,r,n.id]),h=(0,a.useCallback)((function(){u.show({title:c?s("UnBanUser-Title","Turn on comments"):s("BanUser-Title","Turn off comments"),content:c?s("UnBanUser-Confirm",{nickName:n.name,defaultValue:"Continue to turn on comments? This will turn on comments for {{nickName}} in the chat."}):s("BanUser-Confirm",{nickName:n.name,defaultValue:"Continue to turn off comments? This will turn off comments for {{nickName}} in the chat."}),footer:i().createElement(H.Z,{className:"default-dialog-button-wrap"},i().createElement(Ut.Z,{variant:"secondary",className:"default-dialog-button",onClick:m},s("Cancel","Cancel")),i().createElement(Ut.Z,{variant:"primary",className:"default-dialog-button",onClick:f},s("Confirm","Confirm"))),maskClose:!1})}),[u,s,f,c,m,n.name]);return(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"message-header-dropdown",sx:kr},i().createElement("div",{className:"message-header-dropdown-item",onClick:h},c?s("UnBanUser-Title","Turn on comments"):s("BanUser-Title","Turn off comments")),i().createElement("div",{className:"message-header-dropdown-item",onClick:g},s("RemoveRoom-Title","Remove Room")))}),[s,h,g,c])};var Br={"&.chat-list-view":{height:"100%",overflow:"auto",bg:"moduleBg",userSelect:"none",scrollbarWidth:"none",msOverflowStyle:"none"},".chat-list-item":{margin:"20px 15px","&.from-self":{direction:"rtl",".admin-avatar":{marginRight:"unset",marginLeft:"1px",color:"primary"}}},".chat-list-item-wrapper:first-of-type":{paddingTop:"25px"},".loading-svg":{"& > *":{color:"t.disabled",margin:"16px auto",animation:"circle 2s ease infinite"},textAlign:"center",display:"none","&.show":{display:"block"}},"@keyframes circle":{"0%":{transform:"rotate(0)"},"50%":{transform:"rotate(180deg)"},"100%":{transform:"rotate(360deg)"}}},Tr={display:"flex",alignItems:"center",color:"t.third",".avatar":{width:"16px",height:"16px",p:"8px",margin:"-8px",boxSizing:"content-box",pt:"10px","&+div":{position:"absolute !important"}},".message-header-name":{display:"flex",color:"t.third",margin:"0 8px","&.master-name":{direction:"ltr"}},".message-header-time":{direction:"ltr",color:"t.third"},".message-header-sequence":{color:"#fd683b",ml:"5px",fontSize:"12px"},".admin-avatar":{width:"16px",height:"16px",verticalAlign:"middle",marginRight:"1px",color:"primary"},".message-header-dropdown":{display:"flex",py:"4px",justifyContent:"center",alignItems:"center"},".message-header-dropdown-item":{color:"t.primary",fontSize:"12px",lineHeight:"16px",pl:"8px"}},Ar={margin:"8px 0",display:"flex",flexDirection:"column",".message-body-wrap":{padding:"4px 10px",margin:"0 24px 0 24px",position:"relative",wordBreak:"break-all",wordWrap:"break-word",bg:"popupBg",color:"t.primary",borderRadius:"3px",width:"max-content",maxWidth:"300px",direction:"ltr",lineHeight:"22px",fontSize:"14px","&.emoji":{bg:"transparent"},"&.message-chosen":{bg:"t.disabled"},".share-item":{color:"t.primary",lineHeight:"20px"},".symbol":{color:"primary",lineHeight:"22px"},".admin":{color:"primary"},".msg-item-reply-payload":{borderBottom:"1px solid",borderBottomColor:"newLine",marginBottom:"5px",paddingBottom:"3px",position:"relative","&.is-card .msg-reply-content":{pr:"65px"},".msg-reply-sender":{color:"t.primary",fontSize:"12px",lineHeight:"18px",fontWeight:500},".msg-reply-content":{color:"t.grey300 !important",WebkitLineClamp:"2",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",".share-item, .symbol":{fontSize:"12px !important",lineHeight:"16px !important",color:"t.grey300"}},".share-list-wrapper":{display:"none","&.expand":{display:"block"}},".collapse-button":{position:"absolute",right:"-6px",top:"10px",padding:"8px",fontSize:"12px",lineHeight:"16px",color:"t.third",cursor:"pointer"},".chat-share-list":{marginBottom:"3px",".share-list-title":{fontSize:"10px",padding:"5px 4px",paddingLeft:"8px"},".tbody":{height:"26px",padding:"5px 4px",paddingLeft:"8px"},".td":{transform:"scale(0.8)"}}},".hide-box":{position:"absolute",fontSize:"12px",lineHeight:"16px",left:"50%",top:"-30px",transform:"translateX(-50%)",minWidth:"max-content",height:"24px",display:"flex",zIndex:99,cursor:"pointer",borderRadius:"2px",padding:"5px 0",color:"#eaecef",bg:"#707a8a",boxShadow:"0 0 1px rgb(20 21 26 / 10%)",".arrow-wrapper":{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",".arrow-deco":{width:"0",height:"0",borderTopColor:"#707a8a",borderTopStyle:"solid",borderTopWidth:"6px",borderRightColor:["transparent","transparent"],borderRightStyle:"solid",borderRightWidth:"6px",borderBottomColor:["transparent","transparent"],borderBottomStyle:"solid",borderBottomWidth:"6px",borderLeftColor:["transparent","transparent"],borderLeftStyle:"solid",borderLeftWidth:"6px",position:"absolute",bottom:"-17px",left:"50%",transform:"translateX(-50%)"}},".tools":{borderRightColor:"newLine",borderRightWidth:"1px",borderRightStyle:"solid",padding:"0 10px",display:"flex",alignItems:"center","&:last-of-type":{border:"none"},"&:focus":{color:"primary"}}}},".self-share-list":{direction:"ltr"}},Zr={width:"100%",fontSize:"12px",border:"1px solid",borderRadius:"3px",borderCollapse:"collapse",marginTop:"5px",bg:"popupBg",borderColor:"newLine",".table":{width:"100%"},".td":{textAlign:"left",alignItems:"center"},".th":{fontWeight:"normal",textAlign:"left"},".tbody":{padding:"10px 4px",paddingLeft:"8px"},".share-list-title":{display:"flex",justifyContent:"space-around",borderColor:"newLine",borderBottomWidth:"1px",borderBottomStyle:"solid",fontSize:"12px",padding:"10px 4px",paddingLeft:"8px",color:"t.third"},".share-list-title.tr":{width:"100%"},".share-list-row":{display:"flex",justifyContent:"space-around",height:"16px",lineHeight:"16px",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row",color:"t.primary",".positive":{color:"buyHover"},".negative":{color:"sellHover"},".share-list-item":{padding:"0 4px",overflow:"hidden",height:"36px",lineHeight:"36px"}}},Pr=function(e){var t=e.message,n=e.self,r=t.sender,o=t.isAdmin,s=t.time,c=t.sequence,u=r.name,d=J().getI18n,m=(0,l.useSelector)((function(e){return e.common.debug})),p=pe(),g=In(),f=function(){var e=pe(),t=at().userId;return(0,a.useMemo)((function(){return e.leaderChatUid===t}),[e.leaderChatUid,t])}(),h=(0,a.useMemo)((function(){return d("Yesterday","Yesterday")}),[d]),v=(0,a.useMemo)((function(){return lt()("message-header-name",o?"master-name":"user-name",n&&"from-self")}),[n,o]),y=(0,a.useMemo)((function(){return n||g||!f?null:i().createElement(Lr,{sender:r,roomId:p.id})}),[g,f,p.id,n,r]);return(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"message-header",sx:Tr},i().createElement(hr.ZP,{trigger:"click",overlay:y,placement:"bottom-start",isFixed:!1},i().createElement(Or,{name:u,opts:{size:16}})),i().createElement(z.Z,{variant:"subtitle2",className:v},(o&&g||p.leaderChatUid===r.id&&!g)&&i().createElement(ln,{className:"admin-avatar",icon:"admin",size:15}),u),i().createElement(z.Z,{variant:"body2",className:"message-header-time"},ct(s,{yesterday:h},!0)),m&&i().createElement(z.Z,{className:"message-header-sequence"},c))}),[o,g,m,v,u,y,p.leaderChatUid,r.id,c,s,h])};Pr.displayName="MessageHeader";const Ur=i().memo(Pr);var Hr=n("4xt1"),Dr=function(e){var t=e.width,n=e.children,r=(0,o.__rest)(e,["width","children"]),s=(0,a.useMemo)((function(){return{width:t}}),[t]);return i().createElement(H.Z,(0,o.__assign)({style:s},r),n)},jr=function(e){var t=e.columns;return i().createElement(H.Z,{className:"thead"},i().createElement(H.Z,{className:"share-list-title tr"},t.map((function(e){var t=e.title,n=e.key,r=e.dataIndex,o=e.width;return i().createElement(Dr,{className:"th",key:r||n,width:o||0},t)}))))},Fr=function(e){var t=e.columns,n=e.data;return i().createElement(H.Z,{className:"share-list-row"},t.map((function(e){var t=e.dataIndex,r=e.key,o=e.render,a=e.width;return i().createElement(Dr,{className:"td",key:t||r,width:a},"function"===typeof o?o(n[t]):n[t])})))},Vr=function(e){var t=e.columns,n=e.dataSource;return i().createElement(H.Z,{className:"chat-share-list",sx:Zr},i().createElement(H.Z,{className:"table"},i().createElement(jr,{columns:t}),i().createElement(H.Z,{className:"tbody"},n.map((function(e,n){return i().createElement(Fr,{columns:t,key:n,data:e})})))))},zr=function(e){var t=e.shareList,n=void 0===t?[]:t,r=J().getI18n,o=(0,a.useMemo)((function(){return[{title:r("Share-Position-Side",{defaultValue:"Side"}),dataIndex:"side",width:50,render:function(e){return"LONG"===e?r("Share-Position-Long",{defaultValue:"Long"}):r("Share-Position-Short",{defaultValue:"Short"})}},{title:r("Share-Position-Leverage",{defaultValue:"Leverage"}),dataIndex:"leverage",width:65,render:function(e){return(0,Hr.SB)(e,{maximumFractionDigits:8})}},{title:r("Share-Position-EntryPrice",{defaultValue:"Entry Price"}),dataIndex:"entryPrice",width:75},{title:r("Share-Position-PNL",{defaultValue:"PNL"}),dataIndex:"upnl",width:65,render:function(e){return e?e>0?i().createElement(z.Z,{className:"positive"},"+"+e):i().createElement(z.Z,{className:"negative"},e):i().createElement(z.Z,null,"-")}},{title:r("Share-Position-ROE",{defaultValue:"ROE"}),dataIndex:"roe",width:70,render:function(e){var t=Number(e).toFixed(2)+"%";return e?e>0?i().createElement(z.Z,{className:"positive"},"+"+t):i().createElement(z.Z,{className:"negative"},t):i().createElement(z.Z,null,"-")}}]}),[r]);return i().createElement(Vr,{columns:o,dataSource:n})},qr=function(e){var t=e.data,n=J().getI18n,r=(0,a.useMemo)((function(){return[{title:n("Share-Position-Symbol",{defaultValue:"Symbol"}),dataIndex:"symbol",width:115},{title:n("Share-Position-Amount",{defaultValue:"Amount"}),dataIndex:"volume",width:160,render:function(e){return(0,Hr.SB)(e,{maximumFractionDigits:8})}},{title:n("Share-Position-Asset",{defaultValue:"Asset"}),dataIndex:"asset",width:65}]}),[n]);return i().createElement(Vr,{columns:r,dataSource:t})};const Wr=function(e){var t=e.type,n=(0,o.__rest)(e,["type"]);switch(t){case We.POSITION:return i().createElement(zr,(0,o.__assign)({},n));case We.TRADE_PNL:return i().createElement(qr,{data:n.shareList});default:return null}};var Gr=n("i7F8"),Yr={width:110,minHeight:116};const Jr=(0,a.memo)((function(e){var t=e.message,n=U().STATIC_HOST,r=t.toAdmin,o=t.payload,a=t.cardExt,s=t.sequence,l=t.isAdmin,c=o;if(a){var u=o.split(" ");c='<span class="share-item">'+u[0]+'<span class="symbol"> '+u[1]+" "+u[2]+" </span>"+(u[3]||"")+"</span>"}else r?c=o.replace(new RegExp("(@Admin)","g"),'<span class="admin">$1</span>'):l&&(c=Gr.ZP.link(o,{newWindow:!0,className:"msg-item-url",stripPrefix:!1}));c=zn(c);var d=w.includes(c.replace(/^\[:(.*?)\]$/,"$1"));return i().createElement(H.Z,{className:"msg-item-payload message-box",id:"msgBox-"+s},d?function(e,t){var n=e.replace(/^\[:(.*?)\]$/,"$1");return w.includes(n)?i().createElement(Y.Z,{src:Kn(n,t),style:Yr}):e}(c,n):i().createElement(H.Z,{dangerouslySetInnerHTML:{__html:c}}))}));const Kr=(0,a.memo)((function(e){var t=e.message,n=e.self,r=t.payload,o=t.cardExt,s=t.sender,l=t.cardType,c=l&&l!==We.NONE,u=J().getI18n,d=(0,a.useState)(!1),m=d[0],p=d[1],g=(0,a.useCallback)((function(e){e.stopPropagation(),p(!m)}),[m]),f=(0,a.useMemo)((function(){return c?m?i().createElement(z.Z,{className:"collapse-button",onClick:g},u("Msg-Hide","Hide")):m?null:i().createElement(z.Z,{className:"collapse-button",onClick:g},u("Msg-Expand","Expand")):null}),[m,c,u,g]),h=(0,a.useMemo)((function(){var e=r;if(Hn(r))e="["+e+"]";else if(c&&o){var t=r.split(" ");e='<span class="share-item">'+t[0]+'<span class="symbol"> '+t[1]+" "+t[2]+" </span>"+(t[3]||"")+"</span>"}return zn(e)}),[r,c,o]);return i().createElement(H.Z,{className:lt()("msg-item-reply-payload message-box",c&&"is-card")},i().createElement(z.Z,{variant:"link3",className:"msg-reply-sender"},s.name),i().createElement(z.Z,{variant:"caption",className:"msg-reply-content",dangerouslySetInnerHTML:{__html:h}}),f,c&&i().createElement(H.Z,{className:lt()((n?"self-share-list":"")+" share-list-wrapper",m&&"expand")},o&&i().createElement(Wr,{type:l,shareList:JSON.parse(o),sub:!0})))}));var $r=function(e){var t=e.messageId,n=(0,l.useDispatch)(),r=(0,Pt.Z)().enqueueNotification,s=J().getI18n,c=In(),u=rt(t),d=(0,l.useSelector)((function(e){return e.chat.muteUsers})),m=pe(),p=(0,a.useMemo)((function(){return d.some((function(e){return e.blockChatUid===u.sender.id}))}),[d,u]),g=(0,a.useCallback)((function(e){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.stopPropagation(),p?[4,n.chat.unmuteUser({id:m.id,isChannel:c,name:u.sender.name})]:[3,2];case 1:return t=o.sent(),[3,4];case 2:return[4,n.chat.muteUser({id:m.id,isChannel:c,name:u.sender.name})];case 3:t=o.sent(),o.label=4;case 4:return n.chat.updateChooseId(),(t||{}).success&&r({message:p?s("Msg-Operation-Unmute-Success","Unmute successfully"):s("Msg-Operation-Mute-Success","Mute successfully"),variant:"success"}),[2]}}))}))}),[n.chat,r,s,c,u.sender.name,p,m.id]);return i().createElement(H.Z,{"data-testid":"ChatRoom-Mute",className:"mute-tool tools",onClick:g},p?s("Msg-Operation-UnMute","Unmute"):s("Msg-Operation-Mute","Mute"))},Xr=function(e){var t=e.messageId,n=(0,l.useDispatch)(),r=J().getI18n,o=rt(t),s=(0,a.useCallback)((function(e){e.stopPropagation(),(0,l.batch)((function(){n.chat.updateReplyMessageId(o.sequence),n.chat.updateChooseId()}))}),[o.sequence,n]);return i().createElement(H.Z,{"data-testid":"ChatRoom-Reply",className:"reply-tool tools",onClick:s},r("Msg-Operation-Reply","Reply"))};const Qr=i().memo((function(e){var t=e.messageId,n=e.self,r=In(),o=rt(t).isAdmin;return i().createElement(H.Z,{className:"hide-box"},i().createElement(H.Z,{className:"arrow-wrapper"},i().createElement(H.Z,{className:"arrow-deco"}),r&&!n&&!o&&i().createElement($r,{messageId:t}),i().createElement(Xr,{messageId:t})))}));var eo=function(e){var t=e.message,n=e.self,r=t.sequence,o=t.cardExt,s=t.cardType,c=t.replyExt,u=t.payload,d=(0,l.useDispatch)(),m=(0,l.useSelector)((function(e){return e.chat.chooseMessageId})),p=(0,a.useCallback)((function(e){e.stopPropagation(),d.chat.updateChooseId(r)}),[r,d]),g=(0,a.useMemo)((function(){return r===m}),[r,m]),f=(0,a.useMemo)((function(){return c?JSON.parse(c):null}),[c]),h=(0,a.useMemo)((function(){return o?JSON.parse(o):null}),[o]);return(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"message-body",sx:Ar},i().createElement(H.Z,{className:lt()("message-body-wrap",{emoji:Hn(u)&&!c,"message-chosen":g}),variant:"body2",onClick:p},c&&i().createElement(Kr,{self:n,message:f}),i().createElement(Jr,{message:t,self:n}),g&&i().createElement(Qr,{self:n,messageId:t.sequence})),s!==We.NONE&&i().createElement(H.Z,{className:(n?"self-share-list":"")+" share-list-wrapper"},o&&i().createElement(Wr,{type:s,shareList:h})))}),[o,h,s,g,t,p,u,c,f,n])};eo.displayName="MessageBody";const to=(0,a.memo)(eo);var no=function(e){var t=e.id,n=rt(t),r=at(),o=(null===n||void 0===n?void 0:n.sender.id)===r.userId;return i().createElement(H.Z,{className:"chat-list-item-wrap",id:"messageId-"+t},i().createElement(H.Z,{className:lt()("chat-list-item",{"from-self":o})},i().createElement(Ur,{message:n,self:o}),i().createElement(to,{message:n,self:o})))};no.displayName="MessageItem";const ro=(0,a.memo)(no);var oo=(0,a.forwardRef)((function(e,t){var n=e.onBlankClick,s=(0,l.useDispatch)(),c=(0,l.useSelector)((function(e){var t,n;return null===(n=null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||void 0===n?void 0:n.viewportIds})),u=ge(),d=(0,a.useRef)(),m=(0,a.useRef)(),p=(0,l.useSelector)((function(e){var t,n;return null===(n=null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||void 0===n?void 0:n.loading})),g=(0,a.useRef)(!1),f=(0,l.useSelector)((function(e){var t,n=(null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||{listedIds:[],viewportIds:[]},r=n.listedIds,o=n.viewportIds,a=e.chat.currentChatId,i=$e({ids:r,chatId:a,state:e.chat,chatType:e.home.byId[a].type,messages:e.chat.messages.byRoomId[a].byId});return!!o&&i[i.length-1]===o[o.length-1]})),h=(0,a.useRef)(!1),v=(0,a.useRef)(!1),y=(0,a.useRef)(),b=(0,a.useRef)(null),x=(0,a.useCallback)((function(){s.chat.updateChooseId(),null===n||void 0===n||n()}),[s,n]);(0,a.useEffect)((function(){u&&(v.current=!0,setTimeout((function(){v.current=!1}),100))}),[u]),(0,a.useEffect)((function(){return s.chat.updateUnReadIds({chatId:u,unReadIds:[]}),function(){(0,l.batch)((function(){s.chat.updateViewportIdsReset({chatId:u,force:!0}),s.chat.updateChatIsAtBottom({chatId:u,isAtBottom:!0})}))}}),[u,s]);var I=(0,a.useCallback)((function(e){void 0===e&&(e=0),y.current&&(be("@@@@ gotoBottomAutoControlRef clean timer"),clearTimeout(y.current),y.current=null),be("@@@@ gotoBottomAutoControlRef set true"),h.current=!0,y.current=setTimeout((function(){be("@@@@ gotoBottomAutoControlRef set false"),h.current=!1,y.current=null}),1e3),setTimeout((function(){var e;null===(e=b.current)||void 0===e||e.scrollTo(Dn.get()),g.current=!0}),e)}),[]),E=function(e,t){var n=sr(t);return(0,a.useMemo)((function(){return e(n||[])}),t)}((function(e){var t=e[0];if(!c&&!t)return[[],[],[]];if(!t)return[[],c,[]];var n=t.filter((function(e){return c.includes(e)}));be("@@@@ preservedMessageIds",n);var r=n.length;if(r>0){var o=[n[0],n[r-1]],a=o[0],i=o[1];return[c.slice(0,c.indexOf(a)),c.slice(c.indexOf(a),c.indexOf(i)+1),c.slice(c.indexOf(i)+1)]}return[[],c,[]]}),[c]),w=E[0],C=E[1],S=E[2];!function(e,t){var n=sr(t);n&&!t.some((function(e,t){return e!==n[t]}))||e(n||[])}((function(e){var t=e[0],n=e[1],r=e[2];return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,a,i;return(0,o.__generator)(this,(function(o){if(0===w.length&&S.length<=1)return[2];if(n===w&&r===S)return[2];if(g.current&&f)return[2];if(e=t.filter((function(e){return c.includes(e)})),be("@@@@ headMessageIds footMessageIds",w.length,S.length,e.length),!(a=e[1]||e[0]))return[2];be("@@@@@ useOnChange assign anchor",a),d.current=a;try{i=lr("#messageId-"+a).top,be("@@@@@@ record old anchor top "+a,i),m.current=i}catch(s){be("component maybe destroy")}return[2]}))}))}),[c,w,S,f]),function(e,t){var n=sr(t);(0,a.useLayoutEffect)((function(){e(n||[])}),t)}((function(e){var t,n=e[0],r=e[1];be("====================messageIds, prevMessageIds",c,n);var o=c!==n;if(c.length>0&&(!n||0===n.length||u!==r))be("@@@@@ init messageIds first loaded, scroll bottom default , prevMessageIds",n),s.chat.updateViewportIdsReset({chatId:u}),I();else if(g.current&&f&&o&&S.length>0)be("@@@@@ current isAtBottom is true, so new message come in need to scroll to bottom automatily"),(0,vt.unstable_batchedUpdates)((function(){I()}));else if(d.current&&!h.current&&(w.length>0||S.length>1)){be("@@@@@ useLayoutEffectWithPrevDeps deal with anchor",d.current);try{var a=[cr("#message-container"),lr("#messageId-"+d.current),lr("#loading-svg")],i=a[0].scrollTop,l=a[1].top,p=a[2].height;if(be("autoScrollControlRef.current",h.current,"anchorId",d.current),h.current||!d.current)return;be("@@@@@@ gotoBottomAutoControlRef.current",h.current),be("@@@@@@ container scrolltop",i),be("@@@@@@ new top "+d.current,l),be("@@@@@@ loadingHeight",p);var v=i+(l-(m.current||0))-p;be("@@@@@@ new scrolltop",v),null===(t=b.current)||void 0===t||t.scrollTo(v),d.current=void 0,g.current=!1,s.chat.updateChatIsAtBottom({chatId:u,isAtBottom:!1})}catch(y){be("component maybe destroy",y)}}}),[c,u,f,w,S]);var _=(0,a.useMemo)((function(){return[(0,he.debounce)((function(){be("========start loadMoreBackwards"),h.current||v.current||(be("========loadMoreBackwards"),s.chat.loadViewportMessages({direction:r.Backwards}))}),1e3,{leading:!0,trailing:!1}),(0,he.debounce)((function(){be("========start loadMoreForwards"),h.current||v.current||(be("========loadMoreForwards"),s.chat.loadViewportMessages({direction:r.Forwards}))}),1e3,{leading:!0,trailing:!1}),(0,he.debounce)((function(){return s.chat.loadViewportMessages({direction:r.Around})}),1e3,{leading:!0,trailing:!1})]}),[s]),R=_[0],N=_[1],M=(_[2],(0,a.useMemo)((function(){return(0,he.throttle)((function(e){be("@@@@@@ start caculate is at bottom");var t=e.target.scrollHeight;try{var n=[cr("#message-container"),lr("#message-container")],r=t-n[0].scrollTop-n[1].height,o=r<=100&&r>=-2;be("@@@@@@ scrollHeight - scrollTop - containerHeight = ",r,"atBottom",o),g.current=Boolean(o&&f),s.chat.updateChatIsAtBottom({chatId:u,isAtBottom:o&&f})}catch(a){be("component maybe destroy")}}),300,{leading:!0,trailing:!0})}),[u,s,f])),O=(0,a.useCallback)((function(e){return e&&e.length?e.map((function(e){return i().createElement(ro,{key:""+e,id:e})})):null}),[]);return(0,a.useImperativeHandle)(t,(function(){return{gotoBottom:function(){(0,l.batch)((function(){s.chat.updateViewportIdsReset({chatId:u}),s.chat.updateChatIsAtBottom({chatId:u,isAtBottom:!0})})),I(100)}}})),be("@@@@@ ---- render start ----"),be("@@@@@ isAtBottom",g.current,"messageLoading",p,"isLastSlice",f),be("@@@@@ [headMessageIds, middleMessageIds, footMessageIds]",[w,C,S]),be("@@@@@ ---- render end ----"),be("@@@@@"),i().createElement(i().Fragment,null,i().createElement(gr,{id:"message-container",className:"chat-list-view",sx:Br,ref:b,onScroll:M,onClick:x,onScrollToUpper:R,onScrollToLower:N,upperThreshold:0},i().createElement(H.Z,{className:lt()("real-message-container")},i().createElement(H.Z,{id:"loading-svg",className:lt()("loading-svg",{show:p})},i().createElement(ir.Z,{size:24})),i().createElement(H.Z,{className:"header-message-list"},O(w)),i().createElement(H.Z,{className:"middle-message-list"},O(C)),i().createElement(H.Z,{className:"footer-message-list"},O(S)))))}));const ao=(0,a.memo)(oo);const io={position:"absolute",right:"15px",width:"28px",height:"28px",bottom:"20px",borderRadius:"3px",backgroundColor:"overallBg",display:"none",fontSize:"12px",textAlign:"center",lineHeight:"15px",cursor:"pointer","&.show":{display:"block"},"&:before":{content:"''",display:"block",height:"7px",width:"7px",borderColor:"t.third",borderStyle:"solid",borderWidth:"0 2px 2px 0",position:"absolute",left:"10px",top:"8px",transform:"rotate(45deg)"},"&.unread:before":{top:"12px"}};const so=i().memo((function(e){var t=e.onGotoBottom,n=void 0===t?function(){}:t,r=(0,l.useSelector)((function(e){var t,n;return null===(n=null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||void 0===n?void 0:n.isAtBottom})),s=(0,l.useSelector)((function(e){var t,n;return null===(n=null===(t=nt.selectCurrentChatMessages(e))||void 0===t?void 0:t.meta)||void 0===n?void 0:n.unReadIds}))||[],c=ot(),u=(0,a.useMemo)((function(){var e=(s||[]).length;return e?e>99?"99+":""+e:""}),[s]),d=(0,a.useMemo)((function(){return{bottom:77+(c?30:0)+"px"}}),[c]);return i().createElement(H.Z,{className:lt()("scroll-to-bottom",!r&&"show",s.length>0&&"unread"),sx:(0,o.__assign)((0,o.__assign)({},io),d),onClick:n},u)}));const lo={"&.Room":{display:"flex",flexDirection:"column",height:"100%"},".Room-head-center":{width:"max-content",maxWidth:"100%",cursor:"pointer",verticalAlign:"middle","&.is-channel":{cursor:"default"},display:"inline-block",".Room-title":{display:"flex",width:"100%",justifyContent:"flex-start",alignItems:"center",color:"t.primary"},".Room-title-text":{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".Room-member":{color:"t.third"}},".chat-view":{height:"calc(100% - 50px)",display:"flex",flexDirection:"column",position:"relative"},".ban-warn-filled":{marginBottom:"20px",backgroundClip:"text",WebkitTextFillColor:"transparent",backgroundImage:"linear-gradient(90deg, #fcd535 0%, #f0b90b 100%)"},".dialog-content-center":{textAlign:"center"},".control-event-dialog-button":{width:"100% !important"}};var co=i().memo((function(){var e=(0,l.useDispatch)(),t=at().userId,n=(0,l.useSelector)((function(e){return e.home.byId})),r=ge(),s=J().getI18n,c=In(),u=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useMemo)((function(){return n[r]||{}}),[n,r]),p=m.type;!function(e,t){var n=(0,l.useDispatch)(),r=Xt(),s=J().getI18n,c=(0,a.useCallback)((function(e,t){r.show({icon:i().createElement(ln,{icon:"warn-filled2",className:"ban-warn-filled",size:40,mb:"20px"}),content:i().createElement(z.Z,{className:"dialog-content-center"},e),footer:i().createElement(H.Z,{className:"default-dialog-button-wrap"},i().createElement(Ut.Z,{variant:"primary",className:"default-dialog-button control-event-dialog-button",onClick:function(){r.hide(),null===t||void 0===t||t()}},s("Ok","Ok"))),maskClose:!1})}),[r,s]);(0,a.useEffect)((function(){return re.on(v,(function(t){var r=t.roomId;return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return r===e?c(s("Room-RemovedFromCurrentRoom",{defaultValue:"You have been removed from the room by the owner"}),(function(){n.home.initialUserRoomList(),n.chat.setCurrentFirstChatId({excludeId:r})})):n.home.initialUserRoomList(),[2]}))}))}))}),[e,n,s,c]),(0,a.useEffect)((function(){return re.on(y,(function(t){t.roomId===e&&c(s("Room-BanCurrentRoom",{defaultValue:"You have been turned off comments by the room owner"}))}))}),[e,s,t,c]),(0,a.useEffect)((function(){return re.on(b,(function(t){t.roomId===e&&c(s("Room-UnBanCurrentRoom",{defaultValue:"You have been turned on comments by the room owner"}))}))}),[e,s,c])}(r,u);var g=(0,a.useCallback)((function(){var e;null===(e=u.current)||void 0===e||e.onBlankClick()}),[]),f=(0,a.useCallback)((function(){c||e.common.updateRightColumnViewType("ROOM_SETTING")}),[e.common,c]),h=(0,a.useCallback)((function(){var e;return null===(e=d.current)||void 0===e?void 0:e.gotoBottom()}),[]),x=(0,a.useMemo)((function(){return void 0===m||!function(e){return!Object.keys(e).length}(m)}),[m]),I=(0,a.useMemo)((function(){return i().createElement(H.Z,{className:lt()("Room-head-center",c&&"is-channel"),onClick:f},i().createElement(z.Z,{variant:"subtitle1",className:"Room-title",title:m.name},i().createElement("div",{className:"Room-title-text"},m.name),"\xa0\xa0",!c&&i().createElement(sn.Z,{"data-testid":"ChatRoom-RoomSetting",size:16})),!c&&i().createElement(z.Z,{variant:"caption",className:"Room-member","data-testid":"ChatRoom-RoomSetting"},m.userAmount||0," ",s("Room-Members","Members")))}),[c,f,m.name,m.userAmount,s]),E=(0,a.useMemo)((function(){return i().createElement(H.Z,{className:"chat-view"},i().createElement(xn,{connected:yn.isWsOpen}),x?i().createElement(i().Fragment,null,i().createElement(ao,{ref:d,onBlankClick:g}),i().createElement(ar,{onGotoBottom:h,ref:u}),i().createElement(so,{onGotoBottom:h})):i().createElement(q.Z,null))}),[x,g,h]);return(0,a.useEffect)((function(){(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return p!==Ge.GROUP_CHAT?[3,2]:[4,e.home.getRoomInfoById(r)];case 1:(null===(n=o.sent())||void 0===n?void 0:n.leaderChatUid)===t?e.chat.getBanGroupUserList(r):e.chat.getSelfGroupBanInfo(r),o.label=2;case 2:return[2]}}))}))}),[e,r,p,t]),(0,a.useEffect)((function(){r&&r!==k&&r!==T&&e.chat.fetchAndLoadLatestMessages()}),[e.chat,r]),i().createElement(H.Z,{className:"Room",sx:lo},i().createElement(se,{right:i().createElement(ie,null)},I),E)}));const uo=function(){return ge()===T?i().createElement(Sn,null):i().createElement(co,null)};const mo={"&.MiddleColumn":{width:"390px",bg:"popupBg",overflow:"hidden",position:"relative",borderRight:"1px solid",borderRightColor:"newLine"},".MiddleColumn-container":{position:"relative",width:"100%",height:"100%"}};function po(){switch((0,l.useSelector)((function(e){return e.common.middleColumnViewType}))){case"ROOM":return i().createElement(uo,null);case"CREATE_ROOM":return i().createElement(an,null);case null:return null;default:return i().createElement(uo,null)}}const go=i().memo((function(e){var t=e.dialog;return i().createElement(H.Z,{className:"MiddleColumn",sx:mo},i().createElement(po,null),t)}));const fo=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M7.586 18.586L9 20l8-8-8-8-1.414 1.414L14.172 12l-6.586 6.586z",fill:"#76808F"}))};const ho=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("path",{d:"M4 5.98V22h12V6L4 5.98zm9.99 14.04H6V8h8l-.01 12.02z",fill:"#76808F"}),i().createElement("path",{d:"M20 2v16h-2V4H8V2h12z",fill:"#76808F"}))};const vo={"&.RoomSetting":{position:"relative",height:"calc(100% - 50px)",p:"20px",pt:0,".cursor":{cursor:"pointer"},".room-name":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative"},".RoomSetting-title":{color:"t.secondary"},".RoomSetting-max-len":{fontSize:"12px",lineHeight:"16px",color:"t.secondary"},".RoomSetting-exit-room":{position:"absolute",bottom:"10px",left:"20px",right:"20px",width:"calc(100% - 40px)",height:"40px"},".RoomSetting-grid-row":{display:"flex",height:"64px",alignItems:"center",justifyContent:"space-between","div:first-of-type":{color:"t.primary",flex:1},"div:last-of-type":{display:"flex",flex:1,textAlign:"right",color:"t.secondary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",minWidth:"30px",justifyContent:"flex-end",alignItems:"center",svg:{ml:"5px"}}}},".RoomSetting-header-title":{fontSize:"18px",lineHeight:"28px"}};var yo=i().memo((function(){var e=(0,Pt.Z)().enqueueNotification,t=(0,l.useDispatch)(),n=at().userId,r=J().getI18n,s=ge(),c=pe(),u=Xt(),d=(0,a.useMemo)((function(){return c.leaderChatUid===n}),[c.leaderChatUid,n]),m=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return tn(s)&&e({message:r("RoomSetting-CopySuccess","Copy Successful"),variant:"success"}),[2]}))}))}),[s,e,r]),p=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return t.common.updateRightColumnViewType("BANNED_USERS"),[2]}))}))}),[t.common]),g=(0,a.useCallback)((function(){d&&t.common.updateRightColumnViewType("ROOM_EDIT")}),[t.common,d]),f=(0,a.useCallback)((function(){t.common.updateRightColumnViewType(null)}),[t.common]),h=(0,a.useCallback)((function(){u.show({title:r("RoomSetting-ExitRoom","Exit Room"),content:r("RoomSetting-ExitRoom-Confirm",{roomName:c.name,defaultValue:"Are you sure you want to exclude and exit {{roomName}} room chat?"}),footer:i().createElement(H.Z,{className:"default-dialog-button-wrap"},i().createElement(Ut.Z,{variant:"secondary",className:"default-dialog-button",onClick:function(){return u.hide()}},r("Cancel","Cancel")),i().createElement(Ut.Z,{variant:"primary",className:"default-dialog-button",onClick:function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,a,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Rt(s)];case 1:return n=o.sent(),a=n.success,i=n.message,a?(t.chat.setCurrentFirstChatId({excludeId:s}),t.common.updateRightColumnViewType(null),setTimeout((function(){t.home.removeRoomById(s)}),500),u.hide()):e({message:i||r("RoomSetting-QuitFailed","Access failed, please refresh"),variants:"error"}),[2]}}))}))}},r("Confirm","Confirm"))),maskClose:!0})}),[u,t.home,e,r,f,c.name,s]);return i().createElement(i().Fragment,null,i().createElement(se,{left:i().createElement(ae,{onClick:f})},i().createElement(z.Z,{variant:"subtitle1",className:"RoomSetting-header-title"},r("Room-Setting","Room Settings"))),i().createElement(H.Z,{className:"RoomSetting",sx:vo},i().createElement("div",{className:"RoomSetting-grid"},i().createElement("div",{className:"RoomSetting-grid-row"},i().createElement(z.Z,{variant:"body1"},r("RoomSetting-RoomName","Room Name")),i().createElement(z.Z,{variant:"body1",className:lt()("room-name",d&&"cursor"),onClick:g},c.name," ",d&&i().createElement(fo,{size:16}))),i().createElement("div",{className:"RoomSetting-grid-row","data-testid":"ChatRoom-CopyRoomId"},i().createElement(z.Z,{variant:"body1"},r("RoomSetting-RoomId","Room Id")),i().createElement(z.Z,{variant:"body1",className:"cursor",onClick:m},c.id," ",c.type!==Ge.CHANNEL&&i().createElement(ho,{size:16}))),d&&i().createElement("div",{className:"RoomSetting-grid-row"},i().createElement(z.Z,{variant:"body1"},r("RoomSetting-BannedUsers","Banned Users")),i().createElement(z.Z,{variant:"body1",className:"room-name cursor",onClick:p},i().createElement(fo,{size:16})))),!d&&i().createElement(Ut.Z,{className:"RoomSetting-exit-room",disabled:d,onClick:h},r("RoomSetting-ExitRoom","Exit Room"))))}));const bo=i().memo(yo);const xo={"&.RoomEdit":{width:"100%",height:"100%",bg:"popupBg",".RoomEdit-header-title":{color:"t.secondary"},".RoomEdit-content":{boxSizing:"border-box",position:"relative",height:"calc(100% - 50px)",p:"20px 15px 0 15px"},".Room-name-input":{height:"50px",color:"t.primary",bg:"inputBg",borderRadius:"4px",padding:"0 10px",fontSize:"16px",lineHeight:"24px",margin:"5px 0"},".RoomEdit-title":{color:"t.third"},".RoomEdit-max-len":{color:"t.third"},".RoomEdit-btn":{position:"absolute",bottom:"10px",width:"calc(100% - 30px)",height:"40px"}}};const Io=i().memo((function(){var e=(0,Pt.Z)().enqueueNotification,t=(0,l.useDispatch)(),n=pe(),r=n.id,s=J().getI18n,c=(0,a.useState)(""),u=c[0],d=c[1],m=(0,a.useCallback)((function(e){return d(e.currentTarget.value)}),[]),p=(0,a.useCallback)((function(){t.common.updateRightColumnViewType("ROOM_SETTING")}),[t.common]),g=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var n,a,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return u?[4,Ct(r,u)]:(e({message:s("RoomCreate-CanNotEmpty","Field can not be empty"),variant:"error"}),[2]);case 1:return n=o.sent(),a=n.success,i=n.data,a&&i&&(e({message:s("Room-ModifyNameSuccess"),variant:"success"}),t.home.updateRoomName({groupId:r,groupName:u}),t.common.updateRightColumnViewType("ROOM_SETTING")),[2]}}))}))}),[t.common,t.home,e,s,u,r]);return(0,a.useEffect)((function(){r&&n.name&&d(n.name)}),[r,n.name]),i().createElement(H.Z,{className:"RoomEdit",sx:xo},i().createElement(se,{left:i().createElement(ae,{onClick:p})},i().createElement(z.Z,{variant:"subtitle1",className:"RoomEdit-header-title"},s("Room-ChangeRoomName","Change Room Name"))),i().createElement("div",{className:"RoomEdit-content"},i().createElement(z.Z,{variant:"subtitle2",className:"RoomEdit-title"},s("RoomEdit-RoomName","Room Name")),i().createElement(bt.Z,{boxProps:{sx:{height:"50px",my:"5px",width:"100%",border:"none"}},className:"Room-name-input",value:u,variant:"line",maxLength:30,onChange:m,placeholder:s("Room-Create-placeholder","Room Name")}),i().createElement(z.Z,{variant:"caption",className:"RoomEdit-max-len"},s("RoomEdit-MaxLen","Max Length"),": 30"),i().createElement(Ut.Z,{id:"RoomCreateButton",className:"RoomEdit-btn",onClick:g,disabled:!u},s("RoomCreate-Confirm","Confirm"))))}));const Eo=function(e){return i().createElement(K.Z,(0,o.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),i().createElement("circle",{r:10,transform:"matrix(1 0 0 -1 12 12)",fill:"url(#circled-checkmark-g_svg__paint0_linear)"}),i().createElement("path",{d:"M6.18 12l4.23 4.24 6.96-6.95-1.42-1.42-5.54 5.54-2.82-2.82L6.18 12z",fill:"#76808F"}),i().createElement("defs",null,i().createElement("linearGradient",{id:"circled-checkmark-g_svg__paint0_linear",x1:10,y1:0,x2:10,y2:20,gradientUnits:"userSpaceOnUse"},i().createElement("stop",{stopColor:"#F0B90B"}),i().createElement("stop",{offset:1,stopColor:"#F8D33A"}))))};const wo={"&.banned-users":{position:"relative",width:"100%",height:"calc(100% - 50px)",display:"flex",flexDirection:"column",".cursor":{cursor:"pointer"},".banned-users-grid":{height:"calc(100% - 60px)",overflow:"auto"},".button-unban-user":{position:"absolute",bottom:"10px",width:"calc(100% - 30px)",height:"40px",left:"20px",right:"20px"},".banned-users-title":{fontSize:"14px",lineHeight:"22px",color:"t.secondary"},".banned-users-max-len":{fontSize:"12px",lineHeight:"16px",color:"t.secondary"},".ban-list-row":{display:"flex",p:"19px 15px",">div:first-of-type":{width:"80%",color:"t.primary"},">div:last-of-type":{width:"20%",textAlign:"right",color:"t.secondary"},".check-box":{path:{fill:"popupBg"},circle:{fill:"#B7BDC6"},"&.active":{circle:{fill:"t.yellow"}}}}},".banned-users-header-title":{fontSize:"18px",lineHeight:"28px"}};const Co=i().memo((function(){var e=(0,l.useDispatch)(),t=(0,Pt.Z)().enqueueNotification,n=at().userId,r=J().getI18n,s=ge(),c=pe(),u=Xt(),d=(0,a.useState)([]),m=d[0],p=d[1],g=(0,a.useState)([]),f=g[0],h=g[1],v=(0,a.useState)(!0),y=v[0],b=v[1],x=(0,a.useMemo)((function(){return c.leaderChatUid===n}),[c.leaderChatUid,n]),I=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,Tn(s)];case 1:return e=r.sent(),t=e.success,n=e.data,t&&(0,vt.unstable_batchedUpdates)((function(){p(n||[]),h([]),b(!1)})),[2]}}))}))}),[s]);(0,a.useEffect)((function(){I()}),[I]);var E=(0,a.useCallback)((function(){u.show({title:r("BannedUsers-UnBan","Turn On Comments"),content:r("BannedUsers-UnBan-Confirm","Are you sure you want to turn on these users' comments?"),footer:i().createElement(H.Z,{className:"default-dialog-button-wrap"},i().createElement(Ut.Z,{variant:"secondary",className:"default-dialog-button",onClick:function(){return u.hide()}},r("Cancel","Cancel")),i().createElement(Ut.Z,{variant:"primary",className:"default-dialog-button",onClick:function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Bn(f,s,!1)];case 1:return e.sent().success&&(t({message:r("UnBanUser-Success","Turned on successfully"),variant:"success"}),u.hide(),I()),[2]}}))}))}},r("Confirm","Confirm"))),maskClose:!0})}),[f,u,t,r,s,I]),w=(0,a.useCallback)((function(e){f.includes(e)?h(f.filter((function(t){return t!==e}))):h((0,o.__spreadArray)((0,o.__spreadArray)([],f),[e]))}),[f]),C=(0,a.useCallback)((function(){e.common.updateRightColumnViewType("ROOM_SETTING")}),[e.common]);return i().createElement(i().Fragment,null,i().createElement(se,{left:i().createElement(ae,{onClick:C})},i().createElement(z.Z,{variant:"subtitle1"},r("BannedUsers-Title","Banned Users"))),i().createElement(H.Z,{className:"banned-users",sx:wo},y&&i().createElement(q.Z,null),i().createElement("div",{className:"banned-users-grid"},null===m||void 0===m?void 0:m.map((function(e){return i().createElement("div",{className:"ban-list-row cursor",key:e.chatUid,onClick:function(){return w(e.chatUid)}},i().createElement(z.Z,{variant:"body1"},e.nickname),i().createElement(z.Z,{variant:"body1"},i().createElement(Eo,{className:lt()("check-box",f.includes(e.chatUid)&&"active"),size:20})))}))),i().createElement(Ut.Z,{className:"button-unban-user ",disabled:!x||0===f.length,onClick:E},r("BannedUsers-Button-UnBan","Turn On Comments"))))}));const So={"&.RightColumn":{width:"300px",bg:"popupBg",overflow:"hidden",borderRight:"1px solid",borderRightColor:"newLine"}};const _o=i().memo((function(){var e=(0,l.useSelector)((function(e){return e.common.rightColumnViewType}));return e?i().createElement(H.Z,{className:"RightColumn",sx:So},function(e){switch(e){case"ROOM_SETTING":return i().createElement(bo,null);case"BANNED_USERS":return i().createElement(Co,null);case"ROOM_EDIT":return i().createElement(Io,null);default:return null}}(e)):null}));function Ro(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/get-user-info")];case 1:return e=n.sent(),[3,3];case 2:return t=n.sent(),e={success:!1,message:null===t||void 0===t?void 0:t.message},[3,3];case 3:return[2,e]}}))}))}function No(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,W.v_)(G+"/v1/private/future/chatroom/set-nickname",{nickname:e})];case 1:return t=r.sent(),[3,3];case 2:return n=r.sent(),t={success:!1,message:null===n||void 0===n?void 0:n.message},[3,3];case 3:return[2,t]}}))}))}const Mo={"&.chat-registration":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",".chat-registration-title":{textAlign:"center",lineHeight:"22px",marginTop:"24px",color:"t.primary",whiteSpace:"pre-line"},".chat-registration-container":{display:"flex",flexDirection:"column"},".chat-registration-content":{width:"345px",height:"50px",bg:"inputBg",display:"flex",alignItems:"center",marginTop:"30px",borderRadius:"3px"},".chat-registration-avatar":{width:"16px",height:"16px",marginLeft:"10px",marginTop:"4px"},".chat-registration-error-tip":{height:"24px",lineHeight:"24px",fontSize:"12px",color:"error"},".chat-registration-button":{position:"absolute",bottom:"20px",width:"350px",height:"40px",borderRadius:"4px",color:"t.primary"}}};var Oo={width:"100%",height:"50px",fontSize:"16px",lineHeight:"24px",border:"none",paddingLeft:"10px"};const ko=i().memo((function(){var e=(0,Pt.Z)().enqueueNotification,t=U().STATIC_HOST,n=(0,l.useDispatch)(),r=J().getI18n,s=(0,a.useRef)(!1),c=(0,a.useState)(void 0),u=c[0],d=c[1],m=(0,a.useState)(void 0),p=m[0],g=m[1],f=(0,a.useCallback)((function(){return(0,o.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return!u||s.current?[2]:/^[\S]{3,16}$/.test(u)?(g(void 0),s.current=!0,[4,No(u)]):(g(r("Follow-The-Rule")),[2]);case 1:return t=o.sent(),a=t.success,i=t.message,s.current=!1,a?(e({message:r("Register-Success"),variant:"success"}),setTimeout((function(){return n.common.getUserInfo()}),1e3)):g(i||r("Register-Failed")),[2]}}))}))}),[n.common,e,r,u]),h=(0,a.useCallback)((function(e){var t=e.target.value;g(void 0),d(t.replace(/\s/g,""))}),[]);return i().createElement(H.Z,{className:"chat-registration",sx:Mo},i().createElement(se,{right:i().createElement(ie,null)},i().createElement(z.Z,{variant:"subtitle1",className:"Header-title"},r("ChatRoom","Chat Room"))),i().createElement(Y.Z,{src:t+"/static/chatroom/image/chat-register.png",style:{width:"96px",height:"96px",marginTop:"43px"}}),i().createElement(z.Z,{variant:"subtitle2",className:"chat-registration-title"},r("ChatRoom-Intro")),i().createElement(H.Z,{className:"chat-registration-container"},i().createElement(H.Z,{className:"chat-registration-content"},u&&i().createElement(H.Z,{className:"chat-registration-avatar"},i().createElement(Y.Z,{src:Rr(u,{size:16})})),i().createElement(bt.Z,{boxProps:{sx:{height:"50px",my:"5px",width:"100%",border:"none"}},value:u,onChange:h,placeholder:r("Register-PlaceHolder"),style:Oo})),i().createElement(z.Z,{className:"chat-registration-error-tip"},p&&p)),i().createElement(Ut.Z,{variant:"default",className:"chat-registration-button",onClick:f,disabled:!u},r("Register-EnterChatRoom")))}));var Lo=function(e){var t=e.children,n=e.isExistFutureAccount,r=e.isLoggedIn,s=(0,l.useDispatch)(),c=J().getI18n,u=at(),d=u.isFirst,m=u.isLoading,p=u.isLoggIn,g=(0,l.useSelector)((function(e){return e.common.enable})),f=(0,a.useState)(void 0),h=f[0],v=f[1];return(0,a.useEffect)((function(){(0,o.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,a,i,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(!r)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(void 0===c&&(c="APP"),(0,W.v_)(G+"/v1/public/future/chatroom/get-client-type-view",{clientType:c}))];case 2:return e=o.sent(),t=e.success,n=e.data,a=(n||{}).view,i=void 0===a||a,t?(v(i),s.common.updateState({enable:i})):v(!0),[3,4];case 3:return l=o.sent(),console.error("getClientTypeView error",l),v(!0),[3,4];case 4:return[2]}var c}))}))}),[s.common,r]),(0,a.useEffect)((function(){r&&(0,o.__awaiter)(void 0,void 0,void 0,(function(){return(0,o.__generator)(this,(function(e){return h?(s.common.getUserInfo(),[2]):[2]}))}))}),[h,s.common,r]),(0,a.useEffect)((function(){r&&s.common.updateState({isExistFutureAccount:n})}),[s.common,n,r]),r?void 0===h||m?i().createElement(i().Fragment,null,i().createElement(se,{right:i().createElement(ie,null)},i().createElement(z.Z,{variant:"subtitle1",color:"t.secondary"},c("ChatRoom"))),i().createElement(q.Z,null)):!1===h||!1===g?i().createElement(ce,null):p?d?i().createElement(ko,null):i().createElement(i().Fragment,null,t):i().createElement(ue,null):i().createElement(ue,null)};const Bo=i().memo((function(){var e=(0,l.useDispatch)(),t=(at()||{}).userId,n=U().WS_HOST;(0,a.useEffect)((function(){return t&&n&&yn.connect({dispatch:e,userId:t,wsHost:n}),function(){yn.close()}}),[n,e,t]);var r=(0,a.useCallback)((function(e){return i().createElement(i().Fragment,null,i().createElement(qt,null),i().createElement(go,{dialog:e}),i().createElement(_o,null))}),[]);return i().createElement("div",{className:"ChatRoom-content"},i().createElement(en,null,r))}));var To=n("XGcN"),Ao=n("9EWH"),Zo={updateState:function(e,t){return(0,o.__assign)((0,o.__assign)({},e),t)},updateStateImmutable:function(e,t){return(0,Ao.ZP)(e,(function(e){return p()({},e,t)}))}};var Po=function(e,t){return+Fe(t.lastMsgTime)-+Fe(e.lastMsgTime)},Uo=function(e){return null===e.lastMsgTime},Ho=function(e){return null!==e.lastMsgTime};var Do,jo={common:{name:"common",state:{userInfo:{isLoading:!0,isLoggIn:!1},enable:void 0,debug:!1,isExistFutureAccount:!0,middleColumnViewType:"ROOM",rightColumnViewType:null},reducers:{updateState:Zo.updateState,updateStateImmutable:Zo.updateStateImmutable,updateMiddleColumnViewType:function(e,t){return(0,Ao.ZP)(e,(function(e){switch(t){case"CREATE_ROOM":case"ROOM":e.rightColumnViewType=null}e.middleColumnViewType=t}))},updateRightColumnViewType:function(e,t){return(0,Ao.ZP)(e,(function(e){e.rightColumnViewType=t}))},updateUserInfo:function(e,t){return(0,Ao.ZP)(e,(function(n){n.userInfo=(0,o.__assign)((0,o.__assign)({},e.userInfo),t)}))},updateUserNotLoggIn:function(e){return(0,Ao.ZP)(e,(function(t){t.userInfo=(0,o.__assign)((0,o.__assign)({},e.userInfo),{isLoggIn:!1,isLoading:!1})}))}},effects:function(e){return{getUserInfo:function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,i,s;return(0,o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,Ro()];case 1:return t=l.sent(),[3,3];case 2:return l.sent(),e.common.updateUserNotLoggIn(),[2];case 3:return n=t.success,r=t.data,n?(i=(a=r||{}).nickname,s=a.chatUid,e.common.updateUserInfo((0,o.__assign)((0,o.__assign)({},r),{userId:s,isFirst:!i,isLoggIn:!0,isLoading:!1}))):e.common.updateUserNotLoggIn(),[2]}}))}))},banUser:function(t){var n=t.liftBanTime,r=t.banReason;return e.common.updateUserInfo({liftBanTime:n,banReason:r})}}}},home:{name:"home",state:{byId:{},listIds:[]},reducers:{updateState:Zo.updateState,updateStateImmutable:Zo.updateStateImmutable,updateLastMsgBySocketReducer:function(e,t){var n=t.data,r=t.messages,a=t.state,i=a.home.listIds.map((function(e){return a.home.byId[e]}));return(0,Ao.ZP)(e,(function(t){var s;n.forEach((function(n){var s,l=n.channelId||n.groupId;if(l){var c=tt(n);0!==$e({ids:[n.sequence],chatId:l,state:a.chat,chatType:e.byId[l].type,messages:(0,o.__assign)((0,o.__assign)({},r[l]),(s={},s[n.sequence]=c,s))}).length&&(t.byId[l].lastMsgTime=n.time,t.byId[l].lastMsg={chatId:l,payload:n.payload,sequence:n.sequence,sender:{id:n.fromChatUid,name:n.fromName},cardType:We[n.cardType],cardExt:n.cardExt,replyExt:n.replyExt,time:n.time,toAdmin:n.toAdmin,isAdmin:n.isAdmin},i=i.map((function(e){return e.id===l?(0,o.__assign)((0,o.__assign)({},e),{lastMsgTime:n.time}):e})))}})),t.listIds=(s=i,(0,o.__spreadArray)((0,o.__spreadArray)([],s.filter(Ho).sort(Po)),s.filter(Uo)).map((function(e){return e.id})))}))},updateRoomInfo:function(e,t){var n=t.groupId;return(0,Ao.ZP)(e,(function(e){e.byId[n]&&(e.byId[n].userAmount=t.groupUserNum,e.byId[n].maxUserAmount=t.maxUserNum,e.byId[n].leaderChatUid=+t.leaderChatUid)}))},updateRoomName:function(e,t){var n=t.groupId,r=t.groupName;return(0,Ao.ZP)(e,(function(e){e.byId[n]&&(e.byId[n].name=r)}))},removeRoomById:function(e,t){return(0,Ao.ZP)(e,(function(n){delete n.byId[t],n.listIds=e.listIds.filter((function(e){return e!==t}))}))},addRoom:function(e,t){var n=t.id,r=t.name,o=t.lastMsg.payload,a=t.type,i=t.lastMsgTime;return(0,Ao.ZP)(e,(function(e){e.byId[n]||(e.byId[n]={id:n,name:r,lastMsg:{payload:o},type:a,lastMsgTime:i},e.listIds.unshift(n))}))},updateRoomUserAmount:function(e,t){var n=t.roomId,r=t.mount;return(0,Ao.ZP)(e,(function(t){t.byId[n]&&t.byId[n].userAmount&&(t.byId[n].userAmount=(e.byId[n].userAmount||0)+r)}))}},effects:function(e){return{initialUserRoomList:function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.home.getUserRoomList(t)];case 1:return n=r.sent(),e.chat.updateChatIds(null===n||void 0===n?void 0:n.map((function(e){return e.groupId||e.channelId}))),[2]}}))}))},getUserRoomList:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,a,i;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return[4,(0,W.v_)(G+"/v1/private/future/chatroom/get-user-dialog-list")];case 1:return r=s.sent(),a=r.success,i=r.data,a&&i?(e.home[t?"updateStateImmutable":"updateState"]({byId:i.reduce((function(e,t){var r,a,i=t.channelId||t.groupId,s=t.channelId?Ge.CHANNEL:Ge.GROUP_CHAT;if(i){var l=0!==$e({ids:[t.sequence],chatId:i,state:n.chat,chatType:s,messages:(r={},r[t.sequence]={time:t.lastMsgTime,sender:{id:t.fromChatUid}},r)}).length;return(0,o.__assign)((0,o.__assign)({},e),((a={})[i]={id:i,name:t.groupName,lastMsg:{payload:l?t.lastMsg:""},type:s,lastMsgTime:l?t.lastMsgTime:""},a))}return(0,o.__assign)({},e)}),{}),listIds:(l=i,(0,o.__spreadArray)((0,o.__spreadArray)([],l.filter(Ho).sort(Po)),l.filter(Uo)).map((function(e){return e.channelId||e.groupId})))}),[2,i]):[2,[]]}var l}))}))},updateLastMsgBySocket:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(r){return[2,e.home.updateLastMsgBySocketReducer({data:t,state:n,messages:t.map((function(e){return e.channelId||e.groupId})).map((function(e){var t;return(t={})[e]=n.chat.messages.byRoomId[e].byId,t}))})]}))}))},getRoomInfoById:function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,St(e)];case 1:return t=o.sent(),n=t.success,r=t.data,n?(this.updateRoomInfo(r),[2,r]):[2,null]}}))}))}}}},chat:{name:"chat",state:{messages:{byRoomId:{}},chooseMessageId:void 0,currentChatId:k,replyMessageId:void 0,muteUsers:[]},reducers:{updateState:Zo.updateState,updateStateImmutable:Zo.updateStateImmutable,updateChooseId:function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{chooseMessageId:t})},updateCurrentChatId:function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{currentChatId:t})},removeRoomMessageById:function(e,t){return(0,Ao.ZP)(e,(function(e){delete e.messages[t]}))},updateViewportIds:function(e,t){var n=t.chatId,r=t.viewportIds;return(0,Ao.ZP)(e,(function(t){var o,a,i=e.messages.byRoomId[n].meta,s=i.viewportIds,l=i.unReadIds;a=r,(o=s).length===a.length&&o.every((function(e,t){return e===a[t]}))||(be("@@@@=========updateViewportIds",r),t.messages.byRoomId[n].meta.viewportIds=r,t.messages.byRoomId[n].meta.unReadIds=l.filter((function(e){return!r.includes(e)})))}))},updateUnReadIds:function(e,t){var n=t.chatId,r=t.unReadIds,o=void 0===r?[]:r;return(0,Ao.ZP)(e,(function(e){be("=========updateUnReadIds",o),e.messages.byRoomId[n].meta.unReadIds=o}))},updateChatIds:function(e,t){return void 0===t&&(t=[]),t.length?(0,Ao.ZP)(e,(function(e){t.forEach((function(t){!e.messages.byRoomId[t]&&Boolean(t)&&(e.messages.byRoomId[t]={byId:{},meta:{listedIds:[],pinnedIds:[],viewportIds:[],hiddenIds:[],initialize:!1,loading:!1,isAtBottom:!0,unReadIds:[],banIds:[]}})}))})):e},updateChatInitialize:function(e,t){return(0,Ao.ZP)(e,(function(e){e.messages.byRoomId[t].meta.initialize=!0}))},updateChatLoading:function(e,t){var n=t.chatId,r=t.loading;return(0,Ao.ZP)(e,(function(e){e.messages.byRoomId[n].meta.loading=r}))},updateChatIsAtBottom:function(e,t){var n=t.chatId,r=t.isAtBottom;return(0,Ao.ZP)(e,(function(e){e.messages.byRoomId[n].meta.isAtBottom=r}))},updateReplyMessageId:function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{replyMessageId:t})},updateMessages:function(e,t){var n=t.chatId,r=t.messages,o=t.ids,a=Xe([n],e.messages.byRoomId,"listedIds")[n],i=e.messages.byRoomId[n].byId;return(0,Ao.ZP)(e,(function(e){o.forEach((function(t){i[t]||(e.messages.byRoomId[n].byId[t]=r[t]),!a.includes(t)&&a.push(t)})),e.messages.byRoomId[n].meta.listedIds=et(a)}))},cleanMessages:function(e,t){var n=t.chatId;return(0,Ao.ZP)(e,(function(e){e.messages.byRoomId[n].byId={},e.messages.byRoomId[n].meta.listedIds=[],e.messages.byRoomId[n].meta.viewportIds=[]}))},updateLastMsgBySocketReducer:function(e,t){var n=this,r=t.data,a=t.currentRoomId,i=t.userId,s=t.chatById,l=r.map((function(e){return e.groupId||e.channelId})),c=Xe(l,e.messages.byRoomId,"viewportIds"),u=Xe(l,e.messages.byRoomId,"listedIds");return(0,Ao.ZP)(e,(function(t){var d=!1;r.forEach((function(r){var l,m=r.sequence,p=r.fromChatUid,g=r.groupId||r.channelId;if(g){e.messages.byRoomId[g]||n.updateChatIds([g]);var f=e.messages.byRoomId[g],h=t.messages.byRoomId[g],v=f.meta.hiddenIds,y=(0,o.__spreadArray)([],u[g]),b=(0,o.__spreadArray)([],c[g]);if(y.includes(m))return;var x=[y.length,b.length],I=x[1],E=tt(r);if(h.byId[m]=E,u[g]=et((0,o.__spreadArray)((0,o.__spreadArray)([],y),[m])),!(0!==$e({ids:[m],chatId:g,state:e,chatType:s[g].type,messages:(l={},l[m]=E,l)}).length))return;var w=$e({ids:y,chatId:g,state:e,chatType:s[g].type,messages:h.byId});a===g&&w[w.length-1]===b[I-1]&&!(null===v||void 0===v?void 0:v.includes(m))&&e.messages.byRoomId[g].meta.isAtBottom?b.includes(m)||(b=et((0,o.__spreadArray)((0,o.__spreadArray)([],b.length<100?b:w.slice(-25)),[m])),c[g]=b,d=!0):p===i||h.meta.unReadIds.includes(m)||h.meta.unReadIds.push(m)}})),l.forEach((function(e){d&&(t.messages.byRoomId[e].meta.viewportIds=c[e]),t.messages.byRoomId[e].meta.listedIds=u[e]}))}))},addHiddenId:function(e,t){var n=t.channelId,r=t.sequence;return(0,Ao.ZP)(e,(function(e){var t;null===(t=e.messages.byRoomId[n].meta.hiddenIds)||void 0===t||t.push(r)}))},removeHiddenId:function(e,t){var n=t.channelId,r=t.sequence;return(0,Ao.ZP)(e,(function(t){var o;t.messages.byRoomId[n].meta.hiddenIds=null===(o=e.messages.byRoomId[n].meta.hiddenIds)||void 0===o?void 0:o.filter((function(e){return e!==r}))}))},updateMuteUsers:function(e,t){var n=t.muteUsers;return(0,Ao.ZP)(e,(function(e){e.muteUsers=n}))},updateChatIsBan:function(e,t){var n=t.chatId,r=t.bans,o=Xe([n],e.messages.byRoomId,"banIds")[n];return(0,Ao.ZP)(e,(function(e){r.forEach((function(e){var t=e.chatUid;e.isBan?!o.includes(t)&&o.push(t):o=o.filter((function(e){return e!==t}))})),e.messages.byRoomId[n].meta.banIds=o}))}},effects:function(e){return{sendChatCommand:function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return[2,kn(e)]}))}))},muteOrUnmute:function(t){var n=t.sender,r=t.id,a=t.isChannel,i=t.command;return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(s){switch(s.label){case 0:return[4,kn((0,o.__assign)((0,o.__assign)({},Rn(r,a)),{command:i,params:""+n}))];case 1:return(t=s.sent()).success&&e.chat.getMuteUsers(),[2,t]}}))}))},muteUser:function(t){var n=t.name,r=t.id,a=t.isChannel;return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,kn((0,o.__assign)((0,o.__assign)({},Rn(r,a)),{command:"BLOCK_USER",params:""+n}))];case 1:return(t=i.sent()).success&&e.chat.getMuteUsers(),[2,t]}}))}))},unmuteUser:function(t){var n=t.name,r=t.id,a=t.isChannel;return(0,o.__awaiter)(this,void 0,void 0,(function(){var t;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return[4,kn((0,o.__assign)((0,o.__assign)({},Rn(r,a)),{command:"UN_BLOCK_USER",params:""+n}))];case 1:return(t=i.sent()).success&&e.chat.getMuteUsers(),[2,t]}}))}))},getMuteUsers:function(){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Nt()];case 1:return t=o.sent(),n=t.success,r=t.data,n&&(0,l.batch)((function(){e.chat.updateMuteUsers({muteUsers:r||[]}),e.chat.updateCurrentChatViewportIdsWithFilter(null)})),[2]}}))}))},getBanGroupUserList:function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,Tn(t)];case 1:return n=o.sent(),r=n.success,a=n.data,r&&a&&a.length>0&&e.chat.updateChatIsBan({chatId:t,bans:a}),[2]}}))}))},getSelfGroupBanInfo:function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,r,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,An(t)];case 1:return n=o.sent(),r=n.success,a=n.data,r&&a&&e.chat.updateChatIsBan({chatId:t,bans:[a]}),[2]}}))}))},sendMessage:function(e){return(0,o.__awaiter)(this,void 0,void 0,(function(){return(0,o.__generator)(this,(function(t){return yn.sendMessage(e),[2]}))}))},updateLastMsgBySocket:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r;return(0,o.__generator)(this,(function(o){return r=n.chat.currentChatId,e.chat.updateLastMsgBySocketReducer({data:t,currentRoomId:r,userId:n.common.userInfo.userId,chatById:n.home.byId}),[2]}))}))},fetchAndLoadLatestMessages:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var t,a,i,s,c,u,d,m,p;return(0,o.__generator)(this,(function(g){switch(g.label){case 0:return t=n.chat.currentChatId,a=n.chat.messages.byRoomId[t].meta,i=a.listedIds,s=a.viewportIds,c=(0,o.__spreadArray)([],s),u=n.home.byId[t].type===Ge.CHANNEL,[4,e.chat.fetchViewportMessages({chatId:t,offsetId:null,onlyFetch:!0,direction:r.Around,isChannel:u,isBudgetPreload:s.length>0,size:100})];case 1:return d=g.sent(),m=d.collection,p=d.keys,(0,l.batch)((function(){be("@@@@ messages listedIds",i),be("@@@@ messages keys",p);var r=$e({ids:p,chatId:t,state:n.chat,chatType:n.home.byId[t].type,messages:m});if(!r||r.some((function(e){return!i.includes(e)}))){var a=r.slice(0,L);p&&p.slice(-1).pop()&&!i.includes(p.slice(-1).pop())?(be("@@@@ latest messages is far away, clean old"),e.chat.cleanMessages({chatId:t}),c=et((0,o.__spreadArray)([],a))):c=et((0,he.uniq)((0,o.__spreadArray)((0,o.__spreadArray)([],c),a))).slice(-50),be("@@@@ update latest messages"),e.chat.updateMessages({chatId:t,messages:m,ids:p}),e.chat.updateViewportIds({chatId:t,viewportIds:c})}else be("@@@@ need not to update latest messages, return")})),[2]}}))}))},loadViewportMessages:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var a,i,s,l,c,u,d,m,p,g,f,h,v,y,b,x,I,E,w;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return a=n.chat,s=(i=t||{}).direction,l=void 0===s?r.Around:s,c=i.isBudgetPreload,u=void 0!==c&&c,d=i.chatId,m=void 0===d?n.chat.currentChatId:d,p=n.home.byId[m].type===Ge.CHANNEL,be("@@@@@=====loadViewportMessages=====",l,u?"preload":"fetch",m),g=a.messages.byRoomId[m].meta,f=g.viewportIds,h=g.listedIds,v=f.length,f&&v&&l!==r.Around?[3,3]:(y=Qe(h,b=void 0,r.Around,n.home.byId[m].type,n.chat,m),I=y.newViewportIds,E=y.areSomeLocal,w=y.areAllLocal,E&&I.length>=L?[4,e.chat.updateViewportIds({chatId:m,viewportIds:I})]:[3,2]);case 1:o.sent(),o.label=2;case 2:return w||l===r.Forwards||(e.chat.fetchViewportMessages({chatId:m,offsetId:b,direction:r.Around,isBudgetPreload:u,isChannel:p}),e.chat.updateChatInitialize(m)),[3,6];case 3:return l===r.Forwards&&f[v-1]===h[h.length-1]||l===r.Backwards&&1===f[0]?[2]:(b=l===r.Backwards?f[0]:f[v-1],x=Qe(h,b,l,n.home.byId[m].type,n.chat,m),I=x.newViewportIds,E=x.areSomeLocal,w=x.areAllLocal,u||!E?[3,5]:[4,e.chat.updateViewportIds({chatId:m,viewportIds:I})]);case 4:o.sent(),o.label=5;case 5:e.chat.loadWithBudget({areAllLocal:w,isBudgetPreload:u,chatId:m,direction:l,offsetId:b,isChannel:p}),o.label=6;case 6:return[2]}}))}))},loadWithBudget:function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,a,i,s,l,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return a=(n=t||{}).areAllLocal,i=n.isBudgetPreload,s=n.chatId,l=n.direction,c=n.offsetId,u=n.isChannel,a||l===r.Forwards?[3,2]:[4,e.chat.fetchViewportMessages({chatId:s,offsetId:c,direction:l,isBudgetPreload:i,isChannel:u})];case 1:o.sent(),o.label=2;case 2:return i?[3,4]:[4,Promise.resolve()];case 3:o.sent(),e.chat.loadViewportMessages({chatId:s,direction:l,isBudgetPreload:!0}),o.label=4;case 4:return[2]}}))}))},fetchViewportMessages:function(t){return(0,o.__awaiter)(this,void 0,void 0,(function(){var n,a,i,s,c,u,d,m,p,g,f,h,v,y,b,x,I=this;return(0,o.__generator)(this,(function(E){switch(E.label){case 0:return a=(n=t||{}).chatId,i=n.offsetId,s=n.direction,c=void 0===s?r.Forwards:s,u=n.isBudgetPreload,d=n.isChannel,m=n.onlyFetch,p=n.size,g=void 0===p?50:p,!u&&e.chat.updateChatLoading({chatId:a,loading:!0}),be("@@@@ request messages",i),[4,Zn({chatId:a,isChannel:d,sequence:i,size:g})];case 1:return f=E.sent(),h=f.success,v=f.data,h&&v&&v.length?(w=v.map((function(e){return function(e){var t=e.sequence;return{chatId:e.groupId||e.channelId,payload:e.payload,sequence:+t,sender:{id:+e.fromChatUid,name:e.fromName},cardType:We[e.cardType],cardExt:e.cardExt,replyExt:e.replyExt,time:Fe(e.time).valueOf(),toAdmin:e.toAdmin,isAdmin:e.isAdmin}}(e)})),C="sequence",y=w.reduce((function(e,t){return e.collection[t[C]]=t,e.keys.push(t[C]),e}),{collection:{},keys:[]}),b=y.collection,x=y.keys,m?(e.chat.updateChatLoading({chatId:a,loading:!1}),[2,{collection:b,keys:x}]):((0,l.batch)((function(){return(0,o.__awaiter)(I,void 0,void 0,(function(){var t,n,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.chat.updateChatLoading({chatId:a,loading:!1}),[4,e.chat.updateMessages({chatId:a,messages:b,ids:x})];case 1:return o.sent(),u||(t=Fo(),n=t.chat.messages.byRoomId[a].meta.listedIds,be("@@@@ batch update listedIds",n),r=Qe(n,i,c,t.home.byId[a].type,t.chat,a).newViewportIds,e.chat.updateViewportIds({chatId:a,viewportIds:r})),[2]}}))}))})),[2,{collection:{},keys:[]}])):(e.chat.updateChatLoading({chatId:a,loading:!1}),[2,{collection:{},keys:[]}])}var w,C}))}))},updateViewportIdsReset:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,a,i,s,c,u,d;return(0,o.__generator)(this,(function(o){return r=t.chatId,a=t.force,n.home.byId[r]?(i=n.chat.messages.byRoomId[r].meta,s=i.listedIds,c=i.viewportIds,u=n.home.byId[r].type,(s[s.length-1]!==c[c.length-1]||a)&&(d=$e({ids:s,chatId:r,state:n.chat,chatType:u,messages:n.chat.messages.byRoomId[r].byId}).slice(-50),be("@@@@=========updateViewportIdsReset",d),be("cache updateViewportIdsReset",d),(0,l.batch)((function(){e.chat.updateViewportIds({chatId:r,viewportIds:d}),e.chat.updateUnReadIds({chatId:r,unReadIds:[]})}))),[2]):[2]}))}))},updateCurrentChatViewportIdsWithFilter:function(t,n){return(0,o.__awaiter)(this,void 0,void 0,(function(){var r,a,i,s,l,c,u,d,m;return(0,o.__generator)(this,(function(o){return r=n.chat,a=r.currentChatId,i=r.messages,[k,T].includes(a)||a!==t&&t||(s=i.byRoomId[a].meta,l=s.viewportIds,c=s.listedIds,u=s.isAtBottom,d=n.home.byId[a].type,be("@@@@ updateCurrentChatViewportIdsWithFilter isAtBottom ",u,c.slice(-25)),m=$e({ids:u?c.slice(-50):c.slice(c.indexOf(l[0]),c.indexOf(l[l.length-1])),chatId:a,state:n.chat,chatType:d,messages:i.byRoomId[a].byId}),be("@@@@ updateCurrentChatViewportIdsWithFilter result ",m),e.chat.updateViewportIds({chatId:a,viewportIds:m})),[2]}))}))},setCurrentFirstChatId:function(t,n){var r=t.excludeId;e.chat.updateCurrentChatId(k),setTimeout((function(){e.chat.updateCurrentChatId(r?n.home.listIds.filter((function(e){return e!==r}))[0]:n.home.listIds[0])}))}}}}};var Fo=function(){return Do.getState()},Vo=Do=(0,To.init)({models:jo});function zo(e){var t=this,n=e.WS_HOST,r=e.STATIC_HOST,l=e.isLightTheme,m=e.children,g=(0,s.$)().i18n,f=g.language;return(0,a.useEffect)((function(){(0,o.__awaiter)(t,void 0,void 0,(function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,A(r,f)];case 1:return e=t.sent(),Object.keys(e).length>0&&Object.keys(e).forEach((function(t){return g.addResourceBundle(f,t,e[t],!0,!0)})),[2]}}))}))}),[r,g,f]),Object.keys(g).length?i().createElement(P,{WS_HOST:n,STATIC_HOST:r},i().createElement(c.Z,{theme:p()({},l?u.Z:d.Z)},i().createElement(qo,(0,o.__assign)({},e)),m)):null}function qo(e){var t=e.visible,n=void 0!==t&&t,r=e.onClose,o=e.isLoggedIn,s=void 0===o||o,c=e.userInfo,u=void 0===c?{isExistFutureAccount:!0}:c,d=e.onOpenFuturesAccount,m=u.isExistFutureAccount;return(0,a.useEffect)((function(){return re.on(x,(function(){return r()})),function(){re.off(x)}}),[r]),(0,a.useEffect)((function(){return re.on(I,(function(){null===d||void 0===d||d(),yn.close(),yn.reconnect()})),function(){re.off(I)}}),[d]),(0,a.useMemo)((function(){return i().createElement("div",{className:"ChatRoom-container",style:{display:n?"block":"none"}},i().createElement(l.Provider,{store:Vo},i().createElement(V,null,i().createElement(Lo,{isExistFutureAccount:m,isLoggedIn:s},i().createElement(Bo,null)))))}),[m,s,n])}},JCmj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r={0:"CONNECTING",1:"OPEN",2:"CLOSING",3:"CLOSED"};const o=function(e,t){var n,o,a,i,s;void 0===t&&(t=3e3);var l=!1,c=function(){l||(l=!0,(n=new WebSocket(e)).onerror=function(e){console.error("socket error",e)},n.onclose=function(e){l=!1,1e3!==e.code&&d()},n.onopen=a,n.onmessage=i)},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(o),n&&n.close.apply(n,e)},d=function(){u(),o=setTimeout((function(){c()}),t)};return{open:c,close:u,send:function(e){n&&n.send(e)},onopen:function(e){a=e,n&&(n.onopen=a)},onmessage:function(e){i=e,n&&(n.onmessage=i)},onclose:function(e){s=e,n&&(n.onclose=s)},readyState:function(){return n?r[n.readyState]:"UNKNOWN"}}}},FV4P:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("RdyI");const s=function(e){return a().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a().createElement("path",{d:"M6 8h12v2H6V8zM6 12h7v2H6v-2z",fill:"currentColor"}),a().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 3v16h4v4h2.414l4-4H22V3H2zm7.586 16l2-2H20V5H4v12h4v3.586L9.586 19z",fill:"currentColor"}))}},"4sPL":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("RdyI");const s=function(e){return a().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a().createElement("path",{d:"M10.586 12L4.293 5.707 5 5l.707-.707L12 10.586l6.293-6.293L19 5l.707.707L13.414 12l6.293 6.293-1.414 1.414L12 13.414l-6.293 6.293L5 19l-.707-.707L10.586 12z",fill:"#76808F"}))}},BrsQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("RdyI");const s=function(e){return a().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.071 6.343C8.6 4.815 9.881 4 12 4a8 8 0 018 8h2c0-5.523-4.477-10-10-10-2.853 0-4.614 1.2-6.343 2.929L4 6.586V3H2v7h7V8H5.414l1.657-1.657zM16.929 17.657C15.4 19.185 14.119 20 12 20a8 8 0 01-8-8H2c0 5.523 4.477 10 10 10 2.852 0 4.614-1.2 6.343-2.929L20 17.414V21h2v-7h-7v2h3.586l-1.657 1.657z",fill:"#76808F"}))}},Mvln:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("RdyI");const s=function(e){return a().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),a().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zm0 2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm1.012-16h-2.009v8h2.009V6zm-2.009 9.991h2.009V18h-2.009v-2.009z",fill:"currentColor"}))}},Du7o:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("XhNN"),s=(0,o.forwardRef)((function(e,t){var n=e.children,o=(0,r.__rest)(e,["children"]);return a().createElement(i.Z,(0,r.__assign)({},o,{ref:t,__css:{position:["fixed","static"],zIndex:[1,"auto"],left:["0px","unset"],bottom:["0px","unset"],pt:"md",pb:["md","0px"],px:["md","0px"],width:["100%","unset"],boxShadow:["0px 2px 4px rgba(0, 0, 0, 0.08), 0px 0px 4px rgba(0, 0, 0, 0.08)","none"],bg:"popupBg"}}),n)}))},XPyD:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var r=n("D57K"),o=n("/SIk"),a=n.n(o),i=n("Enqy"),s=function(){if(Object.keys)return Object.keys;var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!==typeof o&&"function"!==typeof o||null===o)throw new TypeError("Object.keys called on non-object");var a=[];for(var i in o)e.call(o,i)&&a.push(i);if(t)for(var s=0;s<r;s++)e.call(o,n[s])&&a.push(n[s]);return a}}(),l=n("+DvX"),c=n("BY6O"),u=n("e5RN");const d=a().memo((function(e){var t=e.anchorOrigin,n=e.position,o=e.enablePortal,i=e.container,s=(0,r.__rest)(e,["anchorOrigin","position","enablePortal","container"]),l={position:n,zIndex:"notification"};return"top"===t.vertical?l.top=12:l.bottom=12,"left"===t.horizontal?l.left=12:"center"===t.horizontal?(l.left="50%",l.transform="translateX(-50%)"):l.right=12,o||i?a().createElement(c.ZP,{container:i},a().createElement(u.Z,(0,r.__assign)({flexDirection:"top"===t.vertical?"column-reverse":"column"},s,{__css:l}))):a().createElement(u.Z,(0,r.__assign)({flexDirection:"top"===t.vertical?"column-reverse":"column"},s,{__css:l}))}));var m=n("XhNN"),p=n("OV9X"),g=n("J37u"),f=n("aZzm"),h=n("+o9S"),v=n("peb7"),y=n("RdyI");const b=function(e){return a().createElement(y.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor"},e),a().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.791a.723.723 0 00.716-.729V2.729c0-.402-.32-.729-.716-.729a.723.723 0 00-.716.73v1.332c0 .402.32.73.716.73zM6.884 6.51a.713.713 0 01-.716.72.733.733 0 01-.508-.2l-.936-.94a.713.713 0 01-.212-.515c0-.197.076-.385.212-.515a.734.734 0 011.016 0l.932.934c.136.13.212.319.212.516zm4.436 14.032h1.336c.396 0 .716.326.716.729 0 .402-.32.729-.716.729h-1.332a.723.723 0 01-.716-.73c0-.38.32-.707.712-.729zM2.716 10.268h1.332c.388 0 .716.335.716.73 0 .401-.32.728-.716.728H2.716A.723.723 0 012 10.998c0-.394.328-.73.716-.73zm16.776-4.694a.696.696 0 00-.212-.511.701.701 0 00-1.02 0l-.932.934a.713.713 0 00-.212.516c0 .197.076.386.212.515.14.135.324.202.508.202a.719.719 0 00.508-.206l.932-.934a.73.73 0 00.216-.516zm.46 4.694h1.332c.388 0 .716.335.716.73 0 .401-.32.728-.716.728h-1.332a.723.723 0 01-.716-.729c0-.402.32-.73.716-.73zm-5.964 8.294h-3.976a.723.723 0 00-.716.73c0 .402.32.729.716.729h3.976a.723.723 0 00.716-.73c0-.402-.32-.729-.716-.729zM12 5.981c1.612 0 3.124.625 4.26 1.76A5.984 5.984 0 0118.024 12c0 1.61-.628 3.122-1.764 4.258a5.982 5.982 0 01-4.26 1.76 5.982 5.982 0 01-4.26-1.76A5.984 5.984 0 015.976 12c0-1.61.628-3.123 1.764-4.258A5.982 5.982 0 0112 5.982z",fill:"currentColor"}))};var x=n("KM4q"),I={info:g.Z,error:f.Z,warning:h.Z,success:v.Z,tips:b},E=(0,o.forwardRef)((function(e,t){var n=e.message,i=e.header,s=e.footer,l=e.icon,c=e.variant,d=void 0===c?"tips":c,g=e.closable,f=void 0!==g&&g,h=e.showIcon,v=void 0===h||h,y=e.onClose,b=(0,r.__rest)(e,["message","header","footer","icon","variant","closable","showIcon","onClose"]),E=I[d],w="toast."+d,C=(0,o.isValidElement)(l)?a().cloneElement(l,(0,r.__assign)({size:20,display:"block"},l.props),[]):E?a().createElement(E,{size:20,display:"block"}):null;return a().createElement(u.Z,(0,r.__assign)({ref:t,tx:"toast",variant:d},b),a().createElement(u.Z,{alignItems:"flex-start",__css:{width:"100%"}},v?a().createElement(m.Z,{color:w,__css:{mr:"ls",pt:"2px",flexShrink:0}},C):null,a().createElement(u.Z,{className:"bn-notification-body-wrapper",__css:{maxHeight:"146px",flexDirection:"column",width:"100%"}},i?a().createElement(p.Z,{sx:{color:"t.primary",mb:"2px",flexShrink:0},variant:"subtitle1"},i):null,n?a().createElement(p.Z,{className:"bn-notification-msg-wrapper",variant:"body2",sx:{color:"t.secondary",overflow:"auto",maxHeight:120}},n):null,s?a().createElement(p.Z,{variant:"label5",sx:{color:"toast.content",flexShrink:0}},s):null)),f?a().createElement(m.Z,{p:"minor",__css:{alignItems:"flex-start",flexShrink:0,ml:"8px"}},a().createElement(x.Z,{size:16,onClick:y,display:"block",cursor:"pointer",color:"toast.closeColor"})):null)}));E.displayName="Toast";const w=E,C=function(e){var t=e.onClose,n=e.item,o=e.style,i=n.autoHideDuration,s=n.open,l=n.key,c=n.onClose,u=(0,r.__rest)(n,["autoHideDuration","open","key","onClose"]),d=a().useRef(),m=a().useCallback((function(e,n){c&&c(e,n,l),t(e,n,l)}),[l]),p=a().useCallback((function(){i&&(clearTimeout(d.current),d.current=setTimeout((function(){i&&m(null,"timeout")}),i))}),[i,m]);return a().useEffect((function(){return s&&p(),function(){clearTimeout(d.current)}}),[s,p]),s?a().createElement(w,(0,r.__assign)({mb:"xs",onClose:m},u,{style:o})):null};var S={vertical:"top",horizontal:"center"},_=function(e,t){var n;return"object"!==typeof t[0]||o.isValidElement(t[0])?(n=t[1]||e).message=n.message||t[0]:n=t[0]||e,n};const R=function(e){var t=e.anchorOrigin,n=void 0===t?S:t,a=e.autoHideDuration,c=void 0===a?5e3:a,u=e.closable,m=void 0!==u&&u,p=e.disableAnimate,g=void 0!==p&&p,f=e.position,h=void 0===f?"fixed":f,v=e.children,y=e.queueSize,b=void 0===y?10:y,x=e.container,I=e.enablePortal,E=o.useState(I),w=E[0],R=E[1],N=o.useMemo((function(){return[]}),[]),M=o.useState([]),O=M[0],k=M[1],L=o.useCallback((function(t,n,r){e.onClose&&e.onClose(t,n,r),k(void 0!==r&&null!==r?function(e){return e.filter((function(e){return e.key!==r.toString()}))}:[])}),[e]),B=o.useCallback((function(){k((function(t){var n=t.length-b+1;if(n>=1){for(var o=t.splice(0,n),a=0;a<o.length;++a){var i=o[a];i&&(i.onClose&&i.onClose(null,"max",i.key),e.onClose&&e.onClose(null,"max",i.key))}var s=N.splice(0,Math.min(n-1,N.length));if(s.length>0)return(0,r.__spreadArray)((0,r.__spreadArray)([],t),s)}return(0,r.__spreadArray)([],t)}))}),[e,N,b]),T=o.useCallback((function(){N.length>0&&k((function(e){var t=N.shift();return t?(0,r.__spreadArray)((0,r.__spreadArray)([],e),[t]):e}))}),[N]),A=o.useCallback((function(){return B(),T()}),[B,T]),Z=O.reduce((function(e,t){var o,a,i=(a=t.anchorOrigin||n).vertical+"-"+a.horizontal,s=e[i]||[];return(0,r.__assign)((0,r.__assign)({},e),((o={})[i]=(0,r.__spreadArray)((0,r.__spreadArray)([],s),[t]),o))}),{}),P=o.useMemo((function(){return{enqueueNotification:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==e[0]||void 0!==e[1]){var o=_({anchorOrigin:n,autoHideDuration:c,closable:m,enablePortal:I},e);o.enablePortal&&R(o.enablePortal);var a=o.key,i=o.anchorOrigin,s=void 0===i?n:i,l=o.autoHideDuration,u=void 0===l?c:l,d=o.closable,p=void 0===d?m:d,g=o.persist,f=o.message,h=(0,r.__rest)(o,["key","anchorOrigin","autoHideDuration","closable","persist","message"]),v=a&&a.toString()||(new Date).getTime().toString()+Math.random().toString(),y=(0,r.__assign)((0,r.__assign)({key:v},h),{persist:Boolean(g),autoHideDuration:g?0:u,closable:p,open:!0,message:f,anchorOrigin:s});return N.push(y),A(),v}},closeNotification:function(e){L(null,null,e)}}}),[N,n,c,m,I,L,A]);return o.createElement(l.Z.Provider,{value:P},v,function(e){if(Object.entries)return Object.entries(e);for(var t=s(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}(Z).map((function(e){var t=e[0],n=e[1],r=n[0].anchorOrigin,a="top"===r.vertical?-1:1;return g?o.createElement(d,{key:t,anchorOrigin:r,position:h,container:x,enablePortal:w},O.map((function(e){return o.createElement(C,{key:e.key,item:e,onClose:L})}))):o.createElement(i.bg,{key:t,defaultStyles:O.map((function(e){return{key:e.key,data:e,style:{opacity:0,translateY:60*a}}})),styles:O.map((function(e){return{key:e.key,data:e,style:{translateY:(0,i.ST)(0,i.um.gentle),opacity:(0,i.ST)(1,i.um.gentle)}}})),willLeave:function(e){var t=e.key;return{translateY:(0,i.ST)(-60*a*(n[0].key===t?1:-1)),opacity:(0,i.ST)(0)}},willEnter:function(){return{translateY:60*a,opacity:1}}},(function(e){return o.createElement(d,{key:t,anchorOrigin:r,position:h,container:x,enablePortal:w,style:{transform:"translate3d("+("center"===r.horizontal?"-50%":"0")+", "+e[e.length-1].style.translateY+"px, 0)"}},e.map((function(e){var t=e.key,n=e.style.opacity,r=e.data;return o.createElement(C,{key:t,item:r,onClose:L,style:{opacity:n}})})))}))})))}},BxVK:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n("/SIk"),o=n.n(r),a=n("pVAJ"),i=n("wjiZ"),s=n("H6/m"),l=n("U0yl"),c=n("revF"),u=o().createElement;const d=()=>{const{0:e,1:t}=(0,r.useState)(!1),n={root:{borderRadius:0,marginTop:"1px"},link:{color:(0,a.Fg)().isLight?"t.yellow300":"t.yellow200",marginLeft:2}};const{getI18n:o}=(0,l.Z)("futures-battle","futures-ui"),d=`/${(0,a.tZ)()}/futures-activity/battle`;(0,c.A)();const m=(0,c.M)();(0,r.useEffect)((()=>{t(m.inBattle)}),[m.inBattle]);const p=(0,r.useCallback)((()=>{t(!1)}),[]);return e&&u(s.Z,{variant:"warning",closable:!0,onClose:p,sx:n.root},o("You-Are-In-A-Battle"),u(i.Z,{sx:n.link,href:d},o("View-Battle-Page")))}},revF:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,M:()=>u});var r=n("5vwO"),o=n("/SIk"),a=n("Vg22"),i=n("wZts"),s=n("pVAJ");const l="BTCUSD_PERP";function c(){const e=(0,a.useDispatch)(),t=(0,s.Pc)();(0,o.useEffect)((()=>{t.isExistFutureAccount&&(0,i.v_)("/bapi/futures/v1/private/delivery/battle/game-status",{symbol:l}).then((t=>{t.success&&t.data.inBattle&&e.pageStore.updateState({battleStatus:t.data})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.pageStore,t.isExistFutureAccount])}function u(){const[e]=(0,s.z4)(),t=e===l,n=(0,a.useSelector)((e=>e.pageStore.battleStatus))||{};return(0,r.Z)((0,r.Z)({},n),{},{inBattle:!(!t||!n.inBattle)})}}}]);