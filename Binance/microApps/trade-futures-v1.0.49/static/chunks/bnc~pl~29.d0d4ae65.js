(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[174],{nmYl:(e,t,n)=>{"use strict";n.d(t,{T$:()=>o});var r=n("D57K"),a=n("wZts"),o=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:n="0",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.U2)("/bapi/margin/v1/private/isolated-margin/borrowable/"+t+"?asset="+e)];case 2:return o=r.sent().data,n=o||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,n]}}))}))}},Hjl5:(e,t,n)=>{"use strict";n.d(t,{vX:()=>o});var r=n("D57K"),a=n("wZts"),o=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(t="0",!e)return[2,t];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.U2)("/bapi/margin/v1/private/margin/max-borrowable?asset="+e)];case 2:return n=r.sent().data.value,t=n||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,t]}}))}))}},C6Va:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>o});var r=n("D57K"),a=n("wZts"),o=function(e){var t=e.asset;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(e="0",!t)return[2,e];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,a.U2)("/bapi/margin/v1/private/margin/max-transferable?asset="+t)];case 2:return n=r.sent().data.value,e=n||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,e]}}))}))}},"/dAn":(e,t,n)=>{"use strict";n.d(t,{Z:()=>me});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("oXkQ"),s=n.n(i);const l=function(e){var t=function(t){var n=t.destroyOnClose,a=void 0===n||n,i=t.visible,s=(0,r.__rest)(t,["destroyOnClose","visible"]);return a?i?o().createElement(e,(0,r.__assign)({visible:i},s)):null:o().createElement(e,(0,r.__assign)({visible:i},s))};return s()(t,e),t};var c=n("Rhv4"),u=n("t8ft"),d=n("XhNN"),f=n("OV9X"),m=n("e5RN"),v=n("X46w"),p=n("aZzm"),h=n("CMHa"),g=n("RdyI");const b=function(e){return o().createElement(g.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M20.7 11.925c0 2.1-.8 4.1-2.3 5.6-1.6 1.5-3.6 2.3-5.6 2.3-2 0-4-.8-5.6-2.3l-1.3-1.3 1.4-1.4 1.3 1.3c2.3 2.3 6 2.3 8.3 0 1.1-1.1 1.7-2.6 1.7-4.2s-.6-3.1-1.7-4.2c-2.3-2.3-6-2.3-8.3 0l-1.1 1.2h3.3v2H4v-6.8h2v3.4l1.2-1.2c3.1-3.1 8.1-3.1 11.2 0 1.5 1.5 2.3 3.5 2.3 5.6z",fill:"currentColor"}))};var x,_,E=n("Bb2c"),w=n("u74s"),y=n("Du7o"),C=n("7qyG"),S=n("wZts"),Z=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.v_)("/bapi/futures/v1/private/delivery/order/coin-swap",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},M=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.v_)("/bapi/futures/v1/private/delivery/order/coin-swap-fee",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},k=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,S.U2)("/bapi/futures/v1/public/delivery/common/coin-swap-assets")];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e={success:!1},[3,3];case 3:return[2,e]}}))}))},T=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.v_)("/bapi/futures/v1/private/future/order/coin-swap",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},A=function(e,t){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,S.v_)("/bapi/futures/v1/private/future/order/coin-swap-fee",e,t)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n={success:!1},[3,3];case 3:return[2,n]}}))}))},z=function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,S.U2)("/bapi/futures/v1/public/future/common/coin-swap-assets")];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e={success:!1},[3,3];case 3:return[2,e]}}))}))};!function(e){e.USDT_FUTURES="USDT_FUTURES",e.COIN_FUTURES="COIN_FUTURES",e.USDT_FUTURES_AND_COIN_FUTURES="USDT_FUTURES_AND_COIN_FUTURES",e.STOCK_TOKEN="STOCK_TOKEN"}(x||(x={})),function(e){e.MAIN="MAIN",e.MARGIN="MARGIN",e.FUTURE="FUTURE",e.DELIVERY="DELIVERY"}(_||(_={}));var R=[];function I(e){var t=e.assets,n=e.defaultFromAsset,r=e.defaultToAsset,o=e.defaultAllFromAssets,i=e.defaultAllToAssets,s=e.wallet,l=function(e){var t=(0,a.useState)(e),n=t[0],r=t[1];return(0,a.useEffect)((function(){r(e)}),[e]),[n,r]}(t||R),c=l[0],u=l[1],d=(0,a.useState)([]),f=d[0],m=d[1],v=(0,a.useState)(o||[]),p=v[0],h=v[1],g=(0,a.useState)(i||[]),b=g[0],x=g[1],E=(0,a.useState)(n||"BTC"),w=E[0],y=E[1],S=(0,a.useState)(r||""),Z=S[0],M=S[1],T=(0,a.useState)({loaded:!1,loading:!1,error:!1,errorMessage:null}),A=T[0],I=A.loaded,N=A.loading,B=A.error,U=A.errorMessage,F=T[1],D=(0,a.useRef)(Boolean(t));(0,a.useEffect)((function(){t||D.current||(D.current=!0,(0,C.v)().then((function(e){u(e.map((function(e){return{assetCode:e.assetCode,assetName:e.assetName,assetLogo:e.logoUrl}})))})).finally((function(){D.current=!1})))}),[t,u]),(0,a.useEffect)((function(){if(!I&&c.length){var e=!1;return F({loaded:!1,loading:!0,error:!1,errorMessage:null}),(s===_.DELIVERY?k:z)().then((function(t){var n,r=t.success,a=t.data,o=t.message;if(!e){if(!r)throw new Error(o);var i=a.map((function(e){return c.find((function(t){return t.assetCode===e}))})).filter((function(e){return!!e}));m(i);var s=i.filter((function(e){return e.assetCode!==Z})),l=i.filter((function(e){return e.assetCode!==w}));h(s),x(l),Z||M(null===(n=l[0])||void 0===n?void 0:n.assetCode),F({loaded:!0,loading:!1,error:!1,errorMessage:null})}})).catch((function(t){e||F({loaded:!0,loading:!1,error:!0,errorMessage:t.message})})),function(){e=!0}}}),[I,c,w,Z,s]);return{fromAsset:w,toAsset:Z,changeFromAsset:function(e){y(e);var t=f.filter((function(t){return t.assetCode!==e}));x(t)},changeToAsset:function(e){M(e);var t=f.filter((function(t){return t.assetCode!==e}));h(t)},allFromAssets:p,allToAssets:b,invertAssetPair:function(){y(Z),M(w),h(f.filter((function(e){return e.assetCode!==w}))),x(f.filter((function(e){return e.assetCode!==Z})))},loading:N,loaded:I,error:B,errorMessage:U}}var N=n("C6Va"),B=n("q5wW");function U(e){var t=e.spotAssets,n=void 0===t?[]:t,o=e.asset,i=e.wallet,s=(0,a.useState)({balance:0,error:null,loading:!0}),l=s[0],c=s[1];return(0,a.useEffect)((function(){var e;if(i===_.MAIN&&o){var t=(null===(e=n.find((function(e){return e.assetCode===o})))||void 0===e?void 0:e.balance)||0;c({balance:t,error:null,loading:!1})}}),[n,i,o]),(0,a.useEffect)((function(){i!==_.MAIN&&o&&(c({balance:0,error:null,loading:!0}),function(e){var t=e.asset,n=e.wallet;return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(n){case _.MARGIN:return[2,(0,N.Cr)({asset:t})];case _.FUTURE:return[2,(0,B.yd)({assetName:t})];case _.DELIVERY:return[2,(0,B.m_)({assetName:t})];default:return[2,0]}return[2]}))}))}({asset:o,wallet:i}).then((function(e){c({balance:e,error:null,loading:!1})})).catch((function(e){c({balance:0,error:e.title||e.message,loading:!1})})))}),[o,i]),l}var F=n("4xt1"),D={USDT:{pricePrecision:8},USDT2:{pricePrecision:8},BNB:{pricePrecision:8},BNB2:{pricePrecision:8},delivery:{pricePrecision:4}},P=function(e){var t;return(null===(t=null===D||void 0===D?void 0:D[e])||void 0===t?void 0:t.pricePrecision)||8};function L(e,t){var n=P(t);return(0,F.PD)(e).toFixed(n,1)}function V(e){var t=(0,a.useState)(""),n=t[0],r=t[1],o=(0,a.useCallback)((function(t){(function(e){return!/[^\d|.|,|\u3002|e-]/.test(String(e))&&!isNaN(Number(e))})(t)&&r(function(e,t){var n=P(t);return-1!==(e=String(e)).indexOf("e")&&(e=(0,F.uf)(Number(e),n)),/\u3002|,/.test(e)&&(e=e.replace(/[\u3002|,]/g,".")),/^0\d/.test(e)?e="0":/^\./.test(e)?e=0+e.substring(0,n+1):Number(e)>=0&&-1!==e.indexOf(".")&&e.split(".")[1].length>=n&&(e=e.replace(new RegExp("^(\\d*\\.\\d{"+n+"})\\d*"),"$1")),e}(t,e))}),[e]);return(0,a.useEffect)((function(){o("")}),[e,o]),{amount:n,changeAmount:o}}var O=n("JTQp"),H={color:"t.primary",justifyContent:"flex-start",alignItems:"center",flex:1,height:"100%",pl:"12px",fontSize:"14px",fontFamily:"Binance PLEX",letterSpacing:"0.16px",".asset-code":{ml:"4px"},".asset-name":{ml:"4px",color:"t.third"}};const q=function(e){var t=e.assetLogo,n=e.assetCode,r=e.assetName;return o().createElement(m.Z,{sx:H},o().createElement(O.Z,{variant:"avatar",src:t,alt:"",width:16,height:16}),o().createElement("div",{className:"asset-code"},n),o().createElement("div",{className:"asset-name"},r))};var W=n("QxY3"),j=function(e){return o().createElement(g.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:e.color},e),o().createElement("path",{d:"M20.5 7.42L9.41 18.5 8 17.09l-5-5 1.41-1.42 5 5L19.08 6l1.42 1.42z",fill:e.color}))},K=o().forwardRef((function(e,t){var n=e.isChecked,a=void 0!==n&&n,i=e.value,s=e.disabled,l=e.showChecked,c=void 0!==l&&l,u=e.children,f=(0,r.__rest)(e,["isChecked","value","disabled","showChecked","children"]);return o().createElement(d.Z,(0,r.__assign)({ref:t,as:"li",role:"option",tx:"search",id:i,key:i,title:i,variant:"option",className:a?"bnb-active-option":"",__css:{color:!s&&a?"primary":"t.primary",opacity:s?.4:1}},f),u,c&&o().createElement(o().Fragment,null,o().createElement(m.Z,{flex:1,minWidth:"8px"}),o().createElement(j,{color:a?"primary":"transparent"})))}));K.displayName="SearchOption";var Y=function(e){var t;if(e){var n=e.props;return n&&(null!==(t=n.value)&&void 0!==t?t:"string"===typeof n.children?n.children:"")}},G=function(e){var t=e.label,n=e.onValueChange,i=e.limit,s=void 0===i?5:i,l=e.children,c=e.value,u=e.placeholder,f=e.defaultValue,m=e.renderValue,v=void 0===m?function(e){return function(e){if(e){var t=e.props;return t&&t.children?t.children:t.value}}(o().Children.toArray(l).find((function(t){return Y(t)===e})))||e}:m,p=e.filterFunction,h=void 0===p?function(e,t){return t.toLowerCase().startsWith(e.toLowerCase())}:p,g=e.onChange,b=e.onBlur,x=e.disableInput,_=void 0!==x&&x,w=e.showChecked,y=void 0!==w&&w,C=(0,r.__rest)(e,["label","onValueChange","limit","children","value","placeholder","defaultValue","renderValue","filterFunction","onChange","onBlur","disableInput","showChecked"]),S=(0,a.useState)(""),Z=S[0],M=S[1],k=(0,a.useState)(f),T=k[0],A=k[1],z=(0,a.useState)(0),R=z[0],I=z[1],N=(0,a.useState)(!1),B=N[0],U=N[1],F=(0,a.useState)({}),D=F[0],P=F[1],L=(0,a.useRef)(null),V=(0,a.useRef)(null),O=(0,a.useRef)({});void 0!==c&&c!==T&&A(c),(0,a.useEffect)((function(){M(c||"")}),[c]);var H=(0,a.useMemo)((function(){return Z?o().Children.toArray(l).filter((function(e){return h(Z,Y(e))})):o().Children.toArray(l)}),[l,Z]),q=(0,a.useMemo)((function(){return Array.isArray(H)?Math.min(H.length,s):0}),[H]);(0,a.useEffect)((function(){var e=O.current[Y(H[R])];if(e&&e.offsetParent){var t=e.offsetParent.scrollTop,n=40*s,r=e.offsetTop;r<t&&e.offsetParent.scroll(0,t-40),r>=t+n&&e.offsetParent.scroll(0,t+40)}}),[R]),(0,a.useEffect)((function(){var e=function(){U(!1)};return B?window.addEventListener("click",e):window.removeEventListener("click",e),function(){window.removeEventListener("click",e)}}),[B]);var j=function(e){n&&n(e),M(e)},G=function(){if(null!==V.current){var e=V.current.getBoundingClientRect();e.bottom+40*q>window.innerHeight?P({bottom:e.height+"px"}):P({}),U(!0)}},Q=v&&v(T);return o().createElement(d.Z,(0,r.__assign)({ref:V,__css:{position:"relative",outline:"none"}},C),o().createElement(E.Z,{ref:L,sx:{cursor:"pointer"},boxProps:{sx:{width:"100%",".bn-input-suffix":{height:"100%",mr:"0px"}},onClick:function(e){!B&&e.stopPropagation(),G(),M("")}},suffix:o().createElement(W.Z,{tx:"search",role:"icon",sx:{transform:B?"rotate(180deg)":"rotate(0)"},size:24}),onFocus:_?function(){var e;return null===(e=L.current)||void 0===e?void 0:e.blur()}:function(){},label:t,value:!B&&v?"":Z,labelFixed:!0,onChange:function(e){j(e.target.value),!1===B&&G()},onKeyDown:function(e){return function(e){if(38===e.keyCode){var t=Math.max(R-1,0);I(t)}else if(40===e.keyCode)t=Math.min(R+1,o().Children.count(H)-1),I(t);else if(13===e.keyCode)if(B){if(H[R]){var n=H[R].props,r=n.label||n.value;if(n.disabled)return;j(r),g&&g(r),A(r),L.current&&L.current.blur()}U(!1)}else G();else 27===e.keyCode&&U(!1)}(e)},onBlur:function(){return setTimeout((function(){b&&b(T)}),300)}}),!T&&!Z&&!Q&&o().createElement(d.Z,{color:"t.third",sx:{position:"absolute",left:0,bottom:0,right:0,padding:"4px",pointerEvents:"none",height:t?"50%":"100%",wordBreak:"keep-all"}},u),Q&&o().createElement(d.Z,{py:1,sx:{opacity:B?.2:1,position:"absolute",left:0,bottom:0,right:0,display:B&&Z?"none":"unset",pointerEvents:"none",height:t?"50%":"100%",wordBreak:"keep-all"}},Q),o().createElement(d.Z,{as:"ul",role:"listbox",tabIndex:0,tx:"search",variant:"dropdown",__css:(0,r.__assign)({outline:"none",height:B?"auto":0,display:B?"block":"none",maxHeight:40*(.5+s)+"px",width:"auto!important",minWidth:"100%!important"},D)},o().Children.map(H,(function(e,t){return o().createElement(K,(0,r.__assign)((0,r.__assign)({},e.props),{isChecked:Y(e)===T,showChecked:y,ref:function(t){return O.current[Y(e)]=t},onClick:function(n){n.stopPropagation(),function(e){if(e){var t=e.props;return t&&t.disabled}}(e)||(j(Y(e)),I(t),g&&g(Y(e)),A(Y(e)),U(!1))}}))}))),o().createElement(d.Z,{"data-bn-type":"input",as:"input",sx:{display:"none"},value:T||"",readOnly:!0}))};G.displayName="Search";const Q=G;var X={label:{color:"t.secondary"},".select":{bg:"bg3",height:"48px","> div":{height:"100%",border:"none",m:0,input:{pl:"12px"}},".bn-input-suffix":{ml:0,mr:"8px",display:"flex",alignItems:"center",svg:{fontSize:"16px"}}}};const J=function(e){var t=e.label,n=e.options,a=e.value,i=e.onChange,s=(0,r.__rest)(e,["label","options","value","onChange"]);return o().createElement(d.Z,{sx:X},t&&o().createElement("label",null,t),o().createElement(Q,(0,r.__assign)({placeholder:"please select",onValueChange:i,value:a,className:"select",renderValue:function(e){return function(e,t){var n;return null===(n=e.find((function(e){return e.value===t})))||void 0===n?void 0:n.title}(n,e)}},s),n.map((function(e){return o().createElement(K,{value:e.value,key:e.value},e.title)}))))};const $=function(e){return o().createElement(g.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M2 10V8l5-5 1.414 1.414L4.83 8h17.17v2H2zM22 14v2l-5 5-1.414-1.414L19.172 16H2v-2h20z",fill:"#76808F"}))};var ee={width:"32px",position:"relative",py:"48px",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",".line":{flex:1,width:0,borderWidth:"0 1px 0 0",borderStyle:"dashed",borderColor:"line"},".convert-icon-container":{cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"32px",bg:"bg3",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%) rotate(90deg)","&:hover":{"svg, svg > path":{color:"#F0B90B",fill:"#F0B90B"}}}},te=function(e){var t=e.color;return o().createElement(d.Z,{sx:{width:"5px",height:"5px",borderRadius:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:t,background:"t.white"}})};const ne=function(e){var t=e.onClick;return o().createElement(m.Z,{sx:ee},o().createElement(te,{color:"buy"}),o().createElement("div",{className:"line"}),o().createElement(te,{color:"sell"}),o().createElement("div",{className:"convert-icon-container",onClick:t},o().createElement($,{size:16,color:"t.third"})))};var re={pt:"8px",px:"24px",borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"line",".revert-container":{mr:"8px"},".select-container":{flexDirection:"column",flex:1,"> div":{mb:"24px"}}};const ae=function(e){var t=e.fromOptions,n=e.toOptions,r=e.from,a=e.to,i=e.onFromChange,s=e.onToChange,l=e.onInvert,c=(0,u.yk)().getI18n,d=o().createElement(J,{options:t,value:r,label:c("fromLabel",{defaultValue:"From"}),onChange:i}),f=o().createElement(J,{options:n,value:a,label:c("toLabel",{defaultValue:"To"}),onChange:s});return o().createElement(m.Z,{sx:re},o().createElement("div",{className:"revert-container"},o().createElement(ne,{onClick:l})),o().createElement("div",{className:"select-container"},o().createElement("div",null,d),o().createElement("div",null,f)))};var oe={minHeight:"380px",".error-notification":{display:"flex",bg:"alert.errorBg",border:"1px solid #FDBAB9",borderRadius:"4px",mt:"sm",p:"xs"},".container":{px:"24px",pt:"24px"},".bn-input-label":{width:"100%",top:"-24px"},".label":{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",color:"t.primary",fontStyle:"normal",fontWeight:"normal",fontSize:"14px",lineHeight:"20px",".available":{color:"t.third",mr:"4px"}},".amount-container":{width:"100%",height:"48px",bg:"bg3",px:"12px"},".amount":{flex:1,height:"48px",color:"t.primary"},".convert-tip":{mt:"22px",color:"t.third",fontSize:"12px",lineHeight:"16px"}};const ie=o().memo((function(e){var t,n=e.assets,i=e.afterSubmit,s=e.wallet,l=e.defaultFromAsset,c=e.defaultToAsset,g=e.defaultAllToAssets,x=e.defaultAllFromAssets,C=e.showCrossMarginHint,S=void 0!==C&&C,k=I({defaultAllFromAssets:x,defaultAllToAssets:g,defaultFromAsset:l,defaultToAsset:c,assets:n,wallet:s}),z=k.allFromAssets,R=k.allToAssets,N=k.toAsset,B=k.fromAsset,D=k.changeFromAsset,O=k.changeToAsset,H=k.invertAssetPair,W=(0,u.yk)().getI18n,j=(0,u.e0)().getI18n,K=U({spotAssets:n,asset:B,wallet:s}),Y=K.balance,G=K.loading,Q=V(B),X=Q.amount,J=Q.changeAmount,$=function(e){var t=this,n=e.fromAsset,o=e.toAsset,i=e.amount,s=e.wallet,l=(0,a.useState)({loading:!1,success:!1,error:!1,errorMessage:null,data:{buyAmount:0,formattedRate:0,formattedReceive:0}}),c=l[0],u=c.loading,d=c.success,f=c.error,m=c.errorMessage,v=c.data,p=l[1],h=(0,a.useCallback)((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var e,t,a,l,c,u,d,f,m;return(0,r.__generator)(this,(function(v){switch(v.label){case 0:e=P(n),v.label=1;case 1:return v.trys.push([1,3,,4]),o&&n&&0!==Number(i)?(p((function(e){return(0,r.__assign)((0,r.__assign)({},e),{success:!1,error:!1,errorMessage:null,loading:!0})})),[4,(s===_.FUTURE?A:M)({userBuyAsset:o,userSellAsset:n,userSellAssetAmount:i},{enableErrorMsgIntercept:!1})]):[2];case 2:if(t=v.sent(),a=t.data,l=t.success,c=t.message,u=void 0,d=void 0,f=void 0,!l)throw new Error(c);return u=a.buyAmount,d=(0,F.uf)(a.buyAmount,e),f=(0,F.uf)(a.buyAmount/a.sellAmount,e),p({loading:!1,success:!0,error:!1,errorMessage:null,data:{buyAmount:u,formattedRate:f,formattedReceive:d}}),[3,4];case 3:return m=v.sent(),p({success:!1,loading:!1,error:!0,errorMessage:m.message,data:{buyAmount:0,formattedRate:0,formattedReceive:0}}),[3,4];case 4:return[2]}}))}))}),[i,n,o]),g=(0,a.useRef)(null);return(0,a.useEffect)((function(){return h(),g.current&&clearInterval(g.current),g.current=setInterval((function(){h()}),1e4),function(){g.current&&clearInterval(g.current)}}),[h]),(0,r.__assign)({loading:u,success:d,error:f,errorMessage:m,calcConvertReap:h},v)}({fromAsset:B,toAsset:N,amount:X,wallet:s}),ee=$.calcConvertReap,te=$.success,ne=$.error,re=$.errorMessage,ie=$.buyAmount,se=$.formattedRate,le=$.formattedReceive,ce=function(e){var t=this,n=e.calcConvertReap,o=e.amount,i=e.buyAmount,s=e.afterSubmit,l=e.wallet,c=e.fromAsset,u=e.toAsset,d=(0,a.useState)({loading:!1,error:!1,errorMessage:null}),f=d[0],m=f.loading,v=f.error,p=f.errorMessage,h=d[1],g=(0,a.useCallback)((function(){return(0,r.__awaiter)(t,void 0,void 0,(function(){var e,t,a,d,f;return(0,r.__generator)(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,3,4]),h({loading:!0,error:!1,errorMessage:null}),[4,(l===_.FUTURE?T:Z)({userBuyAsset:u,userBuyAssetAmount:i,userSellAsset:c,userSellAssetAmount:String(o)},{})];case 1:if(e=m.sent(),t=e.success,a=e.message,d=e.data,!t)throw new Error(a);return h({loading:!1,error:!1,errorMessage:null}),s&&s(void 0,{asset:d.userBuyAsset,amount:d.userBuyAssetAmount}),[3,4];case 2:return f=m.sent(),n(),h({loading:!1,error:!0,errorMessage:f.message}),[3,4];case 3:return h((function(e){return(0,r.__assign)((0,r.__assign)({},e),{loading:!1})})),[7];case 4:return[2]}}))}))}),[n,o,i,s,c,u]),b=(0,a.useRef)(null);return(0,a.useEffect)((function(){return v&&!b.current&&(b.current=setTimeout((function(){h((function(e){return(0,r.__assign)((0,r.__assign)({},e),{error:!1,errorMessage:null})})),b.current=null}),5e3)),function(){b.current&&clearTimeout(b.current)}}),[v]),{convert:g,loading:m,error:v,errorMessage:p}}({fromAsset:B,toAsset:N,afterSubmit:i,amount:Number(X),buyAmount:ie,calcConvertReap:ee,wallet:s}),ue=ce.convert,de=ce.loading,fe=ce.error,me=ce.errorMessage,ve=function(e){var t=e.formValues,n=e.validator,r={};return Object.keys(t).forEach((function(e){var a,o=(null===(a=null===n||void 0===n?void 0:n[e])||void 0===a?void 0:a.call(n,t[e]))||null;r[e]={error:null!==o,errorText:o}})),r}({formValues:{amount:X},validator:{amount:function(e){return Number(e)>Y?W("validAmountTip1",{defaultValue:"You don't have enough asset."}):Number(X||0)<0&&""!==X?W("validAmountTip2",{defaultValue:"Please enter a valid amount."}):null}}}),pe=z.map((function(e){return{title:o().createElement(q,(0,r.__assign)({},e)),value:e.assetCode}})),he=R.map((function(e){return{title:o().createElement(q,(0,r.__assign)({},e)),value:e.assetCode}}));return o().createElement(d.Z,{sx:oe},fe&&o().createElement("div",{className:"error-notification"},o().createElement(p.Z,{color:"#D9304E"}),o().createElement(f.Z,{ml:"xs"},me)),o().createElement(ae,{fromOptions:pe,toOptions:he,from:B,to:N,onFromChange:D,onToChange:O,onInvert:H}),o().createElement("div",{className:"container"},o().createElement(E.Z,{name:"amount",variant:"filled",labelFixed:!0,label:o().createElement("div",{className:"label"},W("convert-amount",{defaultValue:"Convert Amount"}),o().createElement("div",null,o().createElement("span",{className:"available"},W("convert-max")),(G?"-":L(Y,B))+" "+function(){var e=pe.find((function(e){var t;return(null===(t=null===e||void 0===e?void 0:e.value)||void 0===t?void 0:t.toLocaleLowerCase())===B.toLocaleLowerCase()}));return e?e.value:""}())),boxProps:{className:"amount-container"},value:X,defaultValue:X,onChange:function(e){J(e.target.value)},onBlur:function(e){/\d*\.?\d+$/.test(e.target.value)||J("")},error:(null===(t=null===ve||void 0===ve?void 0:ve.amount)||void 0===t?void 0:t.error)||ne,errorText:(null===ve||void 0===ve?void 0:ve.amount.errorText)||re||"",autoComplete:"off",className:"amount",suffix:o().createElement(m.Z,{mr:"xs",alignItems:"center"},!!X&&o().createElement(h.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer"},onClick:function(){return J("")}}),o().createElement(f.Z,{onClick:function(){return J(L(Y,B))},sx:{fontSize:"16px",color:"t.yellow",lineHeight:"24px",cursor:"pointer"}},j("action-max")))}),o().createElement(m.Z,{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",mt:"plus"},o().createElement(f.Z,{color:"t.third"},W("realtimeRate",{defaultValue:"Real-time Rate"})),te?o().createElement(w.Z,{tip:W("realtimeRateTip"),arrow:!0},o().createElement(m.Z,{onClick:ee,sx:{cursor:"pointer","&:hover":{color:"t.yellow",svg:{color:"t.yellow"}}}},o().createElement(f.Z,{color:"t.primary"},"1 ",B," \u2248 ",se," ",N),o().createElement(b,{ml:"2px",color:"t.third",size:16}))):o().createElement(f.Z,null,"--")),o().createElement(m.Z,{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",mt:"sm"},o().createElement(f.Z,{color:"t.third"},W("youWillReceive",{defaultValue:"You Will Receive"})),te?o().createElement(f.Z,null,le," ",N):o().createElement(f.Z,null,"--")),S&&o().createElement("div",{className:"convert-tip"},W("convertTip",{fromAsset:B,defaultValue:"Please note that the liquidation prices of your {{fromAsset}} positions may\n  change after if you are using cross margin mode."})),o().createElement(y.y,{sx:{textAlign:"right"}},o().createElement(v.Z,{disabled:de||!te,sz:"l",width:[1,.5],onClick:ue},W("confirmBtn",{defaultValue:"Confirm"})))))}));const se=function(e){return o().createElement(g.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 64 64",fill:"none"},e),o().createElement("path",{d:"M44.38 19.62a17.46 17.46 0 00-12.36-5.13c-9.66-.01-17.5 7.82-17.51 17.49 0 9.66 7.82 17.5 17.49 17.51 9.67 0 17.51-7.82 17.51-17.49 0-4.65-1.84-9.1-5.13-12.38zM28.8 39l-6.1-6.1 1.27-1.27.14-.14 4.69 4.68 11.12-11.12.13.14 1.15 1.15.13.13L28.8 39zM32 56.5c-.4 0-.8-.01-1.19-.03l.1-2c.63.03 1.27.03 1.9.01l.07 2c-.29.01-.58.02-.88.02zm3.46-.24l-.28-1.98c.62-.09 1.25-.2 1.87-.35l.45 1.95c-.68.15-1.36.28-2.04.38zm-7.22-.05c-.68-.1-1.36-.24-2.03-.4l.47-1.94c.61.15 1.24.27 1.87.37l-.31 1.97zm11.74-1.04l-.65-1.89c.6-.21 1.19-.44 1.77-.7l.81 1.83c-.63.28-1.28.53-1.93.76zm-16.26-.11c-.65-.23-1.29-.5-1.92-.78l.83-1.82c.57.26 1.16.5 1.76.72l-.67 1.88zm20.5-1.83l-1-1.73c.54-.31 1.09-.66 1.61-1.02l1.14 1.64c-.56.4-1.15.77-1.75 1.11zm-24.71-.15c-.59-.35-1.18-.73-1.73-1.13l1.16-1.63c.51.37 1.05.72 1.59 1.04l-1.02 1.72zm28.51-2.54l-1.31-1.51c.48-.41.95-.85 1.39-1.3l1.43 1.4c-.48.48-.99.96-1.51 1.41zm-32.27-.2c-.51-.46-1.02-.94-1.49-1.44l1.45-1.38c.44.46.9.9 1.37 1.32l-1.33 1.5zm35.48-3.17l-1.57-1.24c.39-.5.77-1.01 1.11-1.54l1.67 1.1c-.37.58-.78 1.14-1.21 1.68zm-38.65-.24c-.42-.55-.82-1.12-1.19-1.69l1.68-1.08c.34.53.71 1.05 1.1 1.56l-1.59 1.21zm41.18-3.67l-1.78-.92c.29-.56.56-1.14.8-1.72l1.85.77c-.26.63-.55 1.27-.87 1.87zm-43.66-.27c-.31-.61-.6-1.25-.85-1.89l1.86-.74c.24.59.5 1.17.78 1.73l-1.79.9zm45.4-4.04l-1.92-.57c.18-.61.33-1.23.46-1.84l1.96.4c-.14.67-.31 1.35-.5 2.01zm-47.08-.3c-.19-.66-.35-1.34-.48-2.02l1.96-.38c.12.62.27 1.25.44 1.85l-1.92.55zm47.96-4.27l-1.99-.19c.06-.63.1-1.27.1-1.9l2 .02c0 .69-.04 1.38-.11 2.07zm-48.79-.31c-.06-.68-.09-1.38-.09-2.07l2-.1v.1c0 .63.03 1.27.08 1.9l-1.99.17zm46.81-4.16c-.06-.63-.14-1.26-.25-1.88l1.97-.35c.12.68.21 1.37.28 2.05l-2 .18zm-44.76-.38l-1.99-.22c.08-.69.18-1.37.31-2.05l1.96.38c-.12.63-.21 1.26-.28 1.89zm43.97-3.82c-.17-.6-.38-1.21-.61-1.8l1.87-.72c.25.65.47 1.31.66 1.96l-1.92.56zm-43.11-.36l-1.91-.59c.2-.66.44-1.31.7-1.95l1.85.75c-.23.58-.45 1.18-.64 1.79zm41.53-3.61c-.29-.56-.6-1.12-.94-1.65l1.7-1.06c.37.58.71 1.19 1.02 1.8l-1.78.91zm-39.88-.34l-1.76-.94c.32-.6.68-1.2 1.05-1.78l1.68 1.09c-.35.53-.67 1.08-.97 1.63zm37.57-3.26c-.39-.5-.8-.98-1.23-1.45l1.46-1.36c.47.51.92 1.04 1.35 1.58l-1.58 1.23zm-35.2-.3l-1.55-1.26c.43-.53.89-1.06 1.37-1.55l1.44 1.39c-.45.45-.87.93-1.26 1.42zm32.26-2.8c-.48-.42-.98-.82-1.49-1.19l1.18-1.61c.55.41 1.1.84 1.62 1.29l-1.31 1.51zm-29.27-.25l-1.29-1.53c.53-.44 1.08-.87 1.64-1.27l1.16 1.63c-.52.37-1.03.76-1.51 1.17zm25.79-2.25c-.55-.32-1.11-.62-1.68-.89l.86-1.81c.62.29 1.24.62 1.83.97l-1.01 1.73zm-22.27-.18l-.98-1.75c.6-.34 1.22-.65 1.85-.94l.83 1.82c-.58.27-1.15.56-1.7.87zm18.39-1.6c-.6-.21-1.21-.39-1.82-.55l.5-1.94c.67.17 1.33.37 1.98.6l-.66 1.89zm-14.48-.13l-.63-1.9c.65-.22 1.32-.41 1.99-.57l.46 1.95c-.61.15-1.22.33-1.82.52zm10.33-.89c-.62-.09-1.26-.16-1.89-.19l.12-2c.69.04 1.38.11 2.06.21l-.29 1.98zm-6.17-.05l-.25-1.99c.68-.09 1.38-.15 2.06-.18l.09 2c-.63.03-1.27.09-1.9.17z",fill:"#00C087"}))};var le=n("wjiZ");const ce=function(e){var t=e.hide,n=e.asset,r=e.receivedAmount,a=e.goTrade,i=(0,u.yk)().getI18n;return o().createElement(o().Fragment,null,o().createElement(d.Z,{sx:{textAlign:"center",minHeight:"400px",pt:"80px"}},o().createElement(se,{size:100}),o().createElement(f.Z,{sx:{fontSize:"20px",lineHeight:"24px",mb:"40px"}},i("convert-suc",{defaultValue:"Convert Successfully"})),o().createElement(f.Z,{sx:{fontSize:"16px",lineHeight:"22px",color:"t.third"}},i("youHaveRecieved",{defaultValue:"You have received"})),o().createElement(m.Z,{justifyContent:"center",mt:"xs"},o().createElement(f.Z,{sx:{fontSize:"32px"}},(0,F.uf)(r,8)),o().createElement(f.Z,{sx:{fontSize:"20px",ml:"xs"}},n))),o().createElement(y.y,null,o().createElement(m.Z,{px:"24px"},a&&o().createElement(le.Z,{onClick:function(){return a(n)},variant:"defaultLink",flex:"auto",mr:"md"},o().createElement(v.Z,{variant:"outline",sx:{boxShadow:"outlineBtnShadow",color:"t.primary",width:"100%"}},i("tradeBtn",{defaultValue:"Trade"})," ",n)),o().createElement(v.Z,{flex:"auto",onClick:t},i("doneBtn",{defaultValue:"Done"})))))};var ue={p:0,".title":{py:"20px",fontWeight:"medium",fontSize:"20px",lineHeight:"28px",px:"24px",color:"t.primary"},pb:"24px"},de={width:["100%","484px"]},fe=function(e){var t=e.visible,n=void 0===t||t,i=e.onClose,s=e.assets,l=e.afterSubmit,d=e.wallet,f=void 0===d?_.FUTURE:d,m=(0,r.__rest)(e,["visible","onClose","assets","afterSubmit","wallet"]),v=(0,u.yk)().getI18n,p=function(e){var t=e.afterConvert,n=(0,a.useState)(!1),r=n[0],o=n[1],i=(0,a.useState)({amount:0,asset:""}),s=i[0],l=i[1];return{convertSuccess:r,convertData:s,afterConvert:(0,a.useCallback)((function(e,n){e||(o(!0),l(n)),null===t||void 0===t||t(e,n)}),[t])}}({afterConvert:l}),h=p.convertSuccess,g=p.convertData,b=p.afterConvert,x=o().createElement(ie,(0,r.__assign)({afterSubmit:b,wallet:f,assets:s},m));return o().createElement(c.Z,{open:n,sx:de,contentSx:ue,showCloseIcon:!h,onCloseIconClick:i},h?o().createElement(ce,{goTrade:m.goTrade,receivedAmount:+g.amount,asset:g.asset,hide:i}):o().createElement(o().Fragment,null,o().createElement("div",{className:"title"},v("convert",{defaultValue:"Convert"})),x))};fe.Wallet=_;const me=l(fe)},"5Cux":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22h14V2H5v20zM7 4h10v4H7V4zm2 6H7v2h2v-2zm0 4H7v2h2v-2zm-2 4h2v2H7v-2zm6-8h-2v2h2v-2zm-2 4h2v2h-2v-2zm2 4h-2v2h2v-2zm2-8h2v2h-2v-2zm2 4h-2v6h2v-6z",fill:"currentColor"}))}},AnCx:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M13 18V7h2v11h-2zM9 7v11h2V7H9z",fill:"#76808F"}),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 3V1h2v2h9v2h-2v17H4V5H2V3h9zM6 5v15h12V5H6z",fill:"#76808F"}))}},"/pJK":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{d:"M8.39 10.517L5 7.127 6.135 6 8.39 8.255 10.645 6l1.135 1.127-3.39 3.39z",fill:"currentColor"}))}},YaHi:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M12.03 18.975l-1.415 1.414 1.414 1.414 1.415-1.414-1.415-1.414zM14.2 5.3v2.8l2.9 2.8V8.1l-2.9-2.8z",fill:"currentColor"}),o().createElement("path",{d:"M12 8.3L5.3 15l1.4 1.4 1.2 1.2L9.3 19l2.7-2.7 2.7 2.7 1.4-1.4 1.2-1.2 1.4-1.4L12 8.3zm2.7 8l-1.2-1.2-1.4-1.4-1.4 1.4-1.2 1.2-1.2-1.2 3.9-3.9 3.9 3.9-1.4 1.2zM12 3v2.8l-4 4V7l4-4z",fill:"currentColor"}))}},fcuc:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8zm0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm.997 9.004h-2.009v6h2.009v-6zm-2.009-4h2.009v2.009h-2.009v-2.01z",fill:"currentColor"}))}},"9wUS":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"none"},e),o().createElement("path",{d:"M2 7.25h12v1.5H2v-1.5z",fill:"currentColor"}),o().createElement("path",{d:"M8.75 2v12h-1.5V2h1.5z",fill:"currentColor"}))}},jDOd:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("RdyI");const s=function(e){return o().createElement(i.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M2 7l5.5 5.5 1.41-1.42L5.82 8H21V6H5.82l3.09-3.09L7.5 1.5 2 7zM22 17l-5.49-5.5-1.41 1.42L18.19 16H3v2h15.19l-3.09 3.08 1.41 1.41L22 17z",fill:"currentColor"}))}},s0TC:(e,t,n)=>{"use strict";n.d(t,{M:()=>a,i:()=>o});var r=n("/SIk"),a=(0,r.createContext)({}),o=function(){return(0,r.useContext)(a)}},cTVF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ge});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("wZts"),s=n("7nmT"),l=n("yneA"),c=n("7ucV"),u=n("ffDY"),d=function(e,t){return void 0===t&&(t=10),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n,a,o,s,d;return(0,r.__generator)(this,(function(f){switch(f.label){case 0:return n=function(e,t){return Math.min(Math.floor(e/1e3),t)},a=Date.now(),o=(0,l.OE)(),s=(0,l.MQ)(),d=function(r){var l=r?2*t:t;return(0,i.U2)("/bapi/asset/v2/private/asset-service/wallet/balance?"+(0,u.DT)(e)).then((function(e){var t=e.data,i=void 0===t?[]:t,c=n(Date.now()-a,l);return o({type:c===l?"SUCCESS_TIMEOUT":"SUCCESS",ws_sessionId:s,responseFrom:"http",fallback:r.toString(),request:"walletBalanceReq",duration:c}),i})).catch((function(e){throw o({type:"ERROR",ws_sessionId:s,request:"walletBalanceReq",fallback:r.toString(),responseFrom:"http",error:JSON.stringify(e.message),duration:n(Date.now()-a,l)}),e}))},[4,(0,l.GW)()("cr00")];case 1:return f.sent()?[2,(0,l.tv)()?d(!1):(0,c.c)({service:"binance-mgs-asset",argName:"walletBalanceReq",responseName:"walletBalanceResp"})(e,t).then((function(e){return"error"in e?(o((0,r.__assign)({responseFrom:"websocket",request:"walletBalanceReq",ws_sessionId:s,duration:n(Date.now()-a,t)},e.error)),d(!0)):(o({responseFrom:"websocket",request:"walletBalanceReq",type:"SUCCESS",duration:n(Date.now()-a,t),ws_sessionId:s}),e.data.walletBalance||[])})).catch((function(e){return o({responseFrom:"websocket",request:"balanceValuationReq",type:"ERROR",ws_sessionId:s,error:JSON.stringify(e.message),duration:n(Date.now()-a,t)}),d(!0)}))]:[2,[]]}}))}))},f=function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return[4,(0,i.v_)("/bapi/asset/v1/private/asset-service/wallet/transfer",e)];case 1:return[2,t.sent()]}}))}))},m={needMargin:!0},v=function(e){var t=e.supportAssets,n=e.assetBalances,r=new Set,a=n.map((function(e){return e.asset&&r.add(e.asset),{assetCode:e.asset,assetName:e.assetName,logoUrl:e.logoUrl}}));return t.forEach((function(e){r.has(e.assetCode)||(a.push(e),r.add(e.assetCode))})),a},p=n("Hszp");const h=function(){function e(e,t,n){var r=this;this.nativeMediaQueryList=e.matchMedia(t),this.active=!0,this.cancellableListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.matches=r.nativeMediaQueryList.matches,r.active&&n.apply(void 0,e)},this.nativeMediaQueryList.addListener(this.cancellableListener),this.matches=this.nativeMediaQueryList.matches}return e.prototype.cancel=function(){this.active=!1,this.nativeMediaQueryList.removeListener(this.cancellableListener)},e}();var g,b={mobile:"(max-width: 767px)",tablet:"(min-width: 768px) and (max-width: 1023px)",desktop:"(min-width: 1024px)"},x=o().createContext(((g={}).mobile=!1,g.tablet=!1,g.desktop=!0,g)),_=function(e){var t,n=e.children,i=(0,a.useState)(((t={}).mobile=!1,t.tablet=!1,t.desktop=!0,t)),s=i[0],l=i[1],c=(0,a.useRef)(),u=(0,a.useCallback)((function(){l(c.current.reduce((function(e,t){var n,a=t.name,o=t.mqListener;return(0,r.__assign)((0,r.__assign)({},e),((n={})[a]=o.matches,n))}),{}))}),[l]);return(0,a.useEffect)((function(){c.current=Object.keys(b).map((function(e){return{name:e,mqListener:new h(window,b[e],u)}})),u()}),[u]),o().createElement(x.Provider,{value:(0,r.__assign)((0,r.__assign)({},s),{updateMedia:u})},n)},E=function(){var e=(0,a.useContext)(x),t=e.mobile,n=e.tablet,r=e.desktop;return(0,a.useMemo)((function(){return{isTablet:n,isMobile:t,isDesktop:r}}),[t,n,r])},w=n("XhNN"),y=n("GEp0"),C=n("6i0u"),S=n("OV9X"),Z=n("e5RN"),M=n("X46w"),k=n("CMHa"),T=n("4xt1"),A=n("C6Va"),z=n("q5wW"),R=function(e){var t=e.asset,n=e.symbol;return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e="0",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,i.U2)("/bapi/margin/v1/private/isolated-margin/transferable-amount/"+n+"?asset="+t)];case 2:return a=r.sent().data,e=a||"0",[3,4];case 3:return r.sent(),[3,4];case 4:return[2,e]}}))}))},I=n("Du7o"),N=n("Rhv4"),B=n("Ys09"),U=n("MvZp"),F=n("s0TC"),D=n("H6/m"),P=n("Tr4L"),L=function(e){var t=(0,P.$)("asset-transfer"),n=t.t;return{i18n:t.i18n,getI18n:(0,a.useCallback)((function(t,r){return void 0===r&&(r={}),n(e+"-"+t,r)}),[e,n])}},V=function(e,t,n){for(var r=[],a=e.length,o=t.length,i=0;i<a;i++)for(var s=n(e[i]),l=0;l<o;l++){if(s===n(t[l])){r.push(e[i]);break}}return r},O=function(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];if(t.indexOf(a)>=0)return!0}return!1};const H=function(){var e=(0,F.i)(),t=e.from,n=e.fromIsoSymbol,s=e.isolatedPairs,l=L("assetTransfer").getI18n,c=function(){var e=(0,p.N)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/margin/v1/private/margin/account-details"+(n=t,void 0===n?"":Object.keys(n).reduce((function(e,t){return n[t]?e+"&"+t+"="+n[t]:e}),"").replace(/^&/,"?")))];case 1:return[2,e.sent().data]}var n}))}))];case 1:return[2,e.sent()]}var t}))}))}),[],{value:[]}),t=e.value,n=(0,r.__rest)(e,["value"]);return(0,r.__assign)((0,r.__assign)({},n),{marginAccountInfo:t})}().marginAccountInfo,u=(0,a.useMemo)((function(){var e;return null===(e=s.filter((function(e){return e.symbol===n})))||void 0===e?void 0:e[0]}),[s,n]),d=("MARGIN"===t?null===c||void 0===c?void 0:c.transferOutBar:null===u||void 0===u?void 0:u.transferOutBar)||"2";return"MARGIN"===t||"ISOLATED_MARGIN"===t?o().createElement(D.Z,{variant:"warning"},o().createElement(S.Z,{lineHeight:"20px"},l("margin-riskTip").replace("##",parseFloat(Number(d||"2.0").toFixed(2))))):null};var q=n("wgY5"),W=n.n(q);const j=o().memo((function(){var e=(0,F.i)(),t=e.from,n=e.to,r=e.isolatedPairs,i=e.toIsoSymbol,s=e.walletsBalance,l=e.coin,c=L("assetTransfer").getI18n,u="ISOLATED_MARGIN"===t||"ISOLATED_MARGIN"===n,d="MARGIN"===t||"MARGIN"===n,f=(0,a.useMemo)((function(){var e,t;return null===(t=null===(e=null===r||void 0===r?void 0:r.filter)||void 0===e?void 0:e.call(r,(function(e){return e.symbol===i})))||void 0===t?void 0:t[0]}),[r,i]),m=(0,a.useMemo)((function(){var e,t,n,r,a;return null===(a=null===(r=null===(n=null===(t=null===(e=null===s||void 0===s?void 0:s.activate)||void 0===e?void 0:e.filter((function(e){return"MARGIN"===e.accountType})))||void 0===t?void 0:t[0])||void 0===n?void 0:n.assetBalances)||void 0===r?void 0:r.filter((function(e){return e.asset===l})))||void 0===a?void 0:a[0]}),[s,l]);if(!d&&!u)return null;if(d&&!m)return null;if(u&&!f)return null;if("PREPARE_DELIST"===(d?m.status:f.status)){var v=d?m.asset:f.base+"/"+f.quote,p=d?m.delistedTime:f.delistTime,h=d?"cross-delist":"isolated-delist";return o().createElement(D.Z,{variant:"error"},o().createElement(S.Z,{lineHeight:"20px",fontSize:"14px"},c(h,{interpolation:{escapeValue:!1},pair:v,delistTime:W()(Number(p)).format("YYYY-MM-DD HH:mm (UTCZ)")})))}return null}));var K=n("AunK"),Y=n("Z/7v"),G=n("iCcb"),Q=n("fInK"),X=n("dcD/"),J=n("RqPo"),$=n("DhFf"),ee=function(e){var t=e.value,n=e.renderValue,a=e.open,i=(0,r.__rest)(e,["value","renderValue","open"]);return o().createElement(Z.Z,(0,r.__assign)({sx:{width:"100%",height:"48px",bg:"bg3",px:"ls",borderRadius:"4px",cursor:"pointer",justifyContent:"space-between",alignItems:"center"}},i),o().createElement(w.Z,{flex:"1"},n()||t),o().createElement(X.Z,{sx:{transform:a?"rotate(180deg)":"rotate(0)",color:"t.third"},size:16}))};const te=function(e){var t=e.label,n=e.listTitle,r=e.value,i=e.renderValue,s=e.hideSearch,l=void 0!==s&&s,c=e.searchPlaceholder,u=e.listData,d=e.onChange,f=(0,a.useState)(!1),m=f[0],v=f[1],p=(0,a.useState)(""),h=p[0],g=p[1],b=(0,a.useCallback)((function(e){v(!1),d&&d(e)}),[]),x=(0,a.useCallback)((function(){v(!1),g("")}),[]),_=(0,a.useMemo)((function(){if(!h)return u;var e=new RegExp(h,"i");return u.filter((function(t){var n=t.name;return e.test(n)}))}),[h,u]);return o().createElement(o().Fragment,null,t&&o().createElement(S.Z,{sx:{fontSize:"14px",lineHeight:"20px",color:"t.secondary",mb:"minor"}},t),o().createElement(ee,{value:r,renderValue:i,open:m,onClick:function(){return v(!0)}}),o().createElement(G.Z,{visible:m,onClick:x}),o().createElement(Q.Z,{visible:m,direction:"bottom",outerClick:x,bg:"popupBg",childProps:{sx:{borderRadius:"24px 24px 0 0"}}},o().createElement(w.Z,{sx:{maxHeight:"500px",height:"500px",overflow:"hidden"}},o().createElement(Z.Z,{flexDirection:"column",p:"sm",height:"100%"},o().createElement(Z.Z,{justifyContent:"space-between",alignItems:"center",mt:"4px",mb:"10px"},o().createElement(S.Z,{sx:{fontSize:"16px",lineHeight:"24px",color:"t.primary"}},n),o().createElement(J.Z,{size:16,color:"t.third",onClick:function(){return v(!1)}})),!l&&o().createElement(w.Z,{mb:"xs",width:1},o().createElement(B.Z,{variant:"filled",boxProps:{width:"100%"},placeholder:c,value:h,defaultValue:h,onChange:function(e){return g((e.target.value||"").replace(/\W/g,""))},autoComplete:"off",prefix:o().createElement($.Z,{color:"t.placeholder",ml:"8px",mr:"-8px",sx:{verticalAlign:"middle"}}),suffix:!!h&&o().createElement(k.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer",verticalAlign:"middle",mr:"xs"},onClick:function(){return g("")}})})),o().createElement(w.Z,{flex:"1",sx:{overflow:"scroll",li:{listStyleType:"none","> div":{height:"100%",alignItems:"center"}}}},_.map((function(e){var t=e.value,n=e.name,a=e.desc,i=e.prefix,s=e.suffix,l=e.disabled;return o().createElement(Y.W,{height:48,key:t,value:""+t,onClick:function(){l||b(t)},bg:"popupBg",prefix:i,suffix:s},o().createElement(S.Z,{sx:{opacity:l?.4:1,fontSize:"14px",color:t===r?"t.yellow":"t.primary"}},n),(null===a||void 0===a?void 0:a.length)?o().createElement(S.Z,{sx:{fontSize:"12px",lineHeight:"16px",color:"t.third"}},a):null)})))))))};const ne=function(){var e=L("assetTransfer").getI18n;return o().createElement(S.Z,{sx:{ml:"sm",fontSize:"12px",color:"t.secondary",":before":{content:"' '",display:"inline-block",width:"8px",height:"8px",borderRadius:"100%",bg:"sell",opacity:"0.4",mr:"minor"}}},e("tag-inactive"))};const re=function(e){var t=e.value,n=e.onChange,r=e.data,i=e.activatdAccounts,s=E().isMobile,l=L("assetTransfer").getI18n,c=(0,a.useCallback)((function(e){if(!e)return null;var t=e.toLocaleLowerCase();return l("account-"+("isolated_margin"===t?"isolatedMargin":t))}),[l]),u=(0,a.useMemo)((function(){return s?r.map((function(e){var t=-1===i.indexOf(e),n=t?o().createElement(ne,null):null;return{value:e,name:c(e),suffix:n,disabled:t}})):r}),[s,r,i]);return(0,F.i)().fixWalletType?o().createElement(Z.Z,{sx:{width:"100%",height:"48px",bg:"bg3",px:"ls",borderRadius:"4px",justifyContent:"space-between",alignItems:"center"}},o().createElement(w.Z,{flex:"1"},c(t))):s?o().createElement(te,{hideSearch:!0,listTitle:l("select-selectAccount"),value:t,renderValue:function(){return c(t)},listData:u,onChange:n}):o().createElement(K.Z,{hideSearch:!0,size:"lg",placeholder:l("select-placeholder"),value:t,onChange:n,renderValue:function(e){return c(e)},limit:5,sx:{li:{opacity:1}}},u.map((function(e){var n=-1===i.indexOf(e),r=e===t;return o().createElement(Y.W,{key:e,value:e,disabled:n,suffix:n?o().createElement(ne,null):null},o().createElement(S.Z,{sx:{opacity:n?.4:1,color:r?"t.yellow":"t.primary"}},c(e)))})))};var ae=n("JTQp");const oe=function(e){var t=e.assetLogo,n=e.assetCode,a=e.assetName,i=e.children,s=e.logoSize,l=void 0===s?20:s,c=(0,r.__rest)(e,["assetLogo","assetCode","assetName","children","logoSize"]);return o().createElement(Z.Z,(0,r.__assign)({},c,{__css:{lineHeight:1,alignItems:"flex-end",justifyContent:"space-between"}}),o().createElement(Z.Z,{sx:{alignItems:"center",flex:"1"}},!!t&&o().createElement(ae.Z,{variant:"avatar",src:t,sx:{mr:"xs",flex:"none",width:l,height:l,border:"1px solid",borderColor:"lines.light"}}),o().createElement(S.Z,{sx:{color:"t.primary",flex:"none"},children:n}),a?o().createElement(S.Z,{as:"small",sx:{flex:1,ml:"xs",mr:"sm",mt:"2px",color:"t.third",display:"-webkit-box",wordBreak:"break-all",WebkitBoxOrient:"vertical",overflow:"hidden",WebkitLineClamp:1},children:""+a}):null),i)};const ie=o().memo((function(e){var t=e.value,n=e.onChange,r=e.data,i=E().isMobile,s=L("assetTransfer").getI18n,l=(0,a.useMemo)((function(){return r.filter((function(e){return e.coin===t}))[0]||{coin:"",logoUrl:"",name:""}}),[t,r]),c=(0,a.useMemo)((function(){return i?r.map((function(e){var t=e.coin,n=e.name,r=e.logoUrl;return{value:t,name:t,desc:n,prefix:o().createElement(ae.Z,{src:r,variant:"avatar",sx:{width:"20px",height:"20px",borderWidth:"1px",borderStyle:"solid",borderColor:"line"}})}})):r}),[i,r]);return i?o().createElement(te,{listTitle:s("select-selectCoin"),searchPlaceholder:s("input-placeholder-searchCoin"),value:t,renderValue:function(){return o().createElement(oe,{assetLogo:l.logoUrl,assetCode:l.coin,assetName:l.name})},listData:c,onChange:n}):o().createElement(K.Z,{size:"lg",value:t,onChange:n,renderValue:function(){return o().createElement(oe,{assetLogo:l.logoUrl,assetCode:l.coin,assetName:l.name})},empty:null,disabled:!c.length,placeholder:s("select-placeholder"),limit:3},c.map((function(e){var n=e.coin,r=e.logoUrl,a=e.name;return o().createElement(Y.W,{key:n,prefix:o().createElement(ae.Z,{src:r,variant:"avatar",sx:{width:"20px",height:"20px",borderWidth:"1px",borderStyle:"solid",borderColor:"line"}}),value:n},o().createElement(Z.Z,{alignItems:"flex-end"},o().createElement(S.Z,{color:n===t?"t.yellow":"t.primary"},n)," ",o().createElement(S.Z,{sx:{fontSize:"12px",color:"t.third",lineHeight:"16px",ml:"minor",mb:"1px"}},a)))})))}));var se=n("RdyI");const le=function(e){return o().createElement(se.Z,(0,r.__assign)({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none"},e),o().createElement("path",{d:"M10 2H8L3 7l1.414 1.414L8 4.83v17.17h2V2zM14 22h2l5-5-1.414-1.414L16 19.172V2h-2v20z",fill:"currentColor"}))};var ce=function(e){var t=e.color,n=(0,r.__rest)(e,["color"]);return o().createElement(w.Z,(0,r.__assign)({sx:{width:"5px",height:"5px",borderRadius:"100%",borderWidth:"1px",borderStyle:"solid",borderColor:t}},n))};const ue=function(e){var t=e.onClick;return o().createElement(Z.Z,{sx:{width:"32px",position:"relative",py:"md",flexDirection:"column",justifyContent:"space-between",alignItems:"center"}},o().createElement(ce,{color:"buy"}),o().createElement(w.Z,{sx:{flex:1,width:0,borderWidth:"0 1px 0 0",borderStyle:"dashed",borderColor:"line"}}),o().createElement(ce,{color:"sell"}),o().createElement(Z.Z,{onClick:t,sx:{cursor:"pointer",justifyContent:"center",alignItems:"center",width:"32px",height:"32px",borderRadius:"32px",bg:"bg3",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","&:hover":{"svg, svg > path":{color:"primary",fill:"primary"}}}},o().createElement(le,{size:16,color:"t.third"})))};const de=o().memo((function(e){var t=e.value,n=e.onChange,r=e.pairs,i=E().isMobile,s=L("assetTransfer").getI18n,l=(0,a.useMemo)((function(){return i?r.map((function(e){var t=e.symbol;return{value:t,name:t,desc:""}})):r}),[i,r]),c=(0,a.useCallback)((function(e){return n(e)}),[n]);return i?o().createElement(te,{listTitle:s("isolated-pair"),searchPlaceholder:s("select-placeholder"),value:t,listData:l,onChange:c,renderValue:function(e){return e}}):o().createElement(K.Z,{size:"lg",value:t,onChange:c,empty:null,disabled:!l.length,placeholder:s("select-placeholder")},l.map((function(e){var n=e.symbol;return o().createElement(Y.W,{key:n,value:n},o().createElement(Z.Z,{alignItems:"flex-end"},o().createElement(S.Z,{color:n===t?"primary":"t.primary"},n)," "))})))}));var fe="ISOLATED_MARGIN",me=function(e){var t=e.label,n=e.children,r=e.mt;return o().createElement(w.Z,{sx:{mt:r||"md"}},t&&o().createElement(y.Z,null,t),n)},ve=function(){return o().createElement(C.Z,{sx:{height:18,width:20}})},pe=function(){var e=(0,F.i)(),t=e.open,n=e.setOpen,i=e.from,s=e.setFrom,l=e.to,c=e.setTo,u=e.coin,d=e.setCoin,m=e.walletsBalance,v=e.freshBalance,p=e.walletConfig,h=e.onTransferSuccess,g=e.isolatedPairs,b=e.logoMap,x=e.fromIsoSymbol,_=e.setFromIsoSymbol,y=e.toIsoSymbol,C=e.setToIsoSymbol,D=e.afterTransfer,P=e.needMargin,q=e.needFuturesJointMargin,W=e.delay,K=(0,U.Z)().enqueueNotification,Y=L("assetTransfer").getI18n,G=(0,a.useState)(""),Q=G[0],X=G[1],J=(0,a.useState)(!1),$=J[0],ee=J[1],te=E().isMobile,ne=m.activate,ae=(0,a.useMemo)((function(){return p.reduce((function(e,t){var n,a,o=e.allFrom,s=e.allTo,c=t.fromAccount,u=t.toAccount,d=[u].indexOf(l)>-1,f=[c].indexOf(i)>-1;return{allFrom:d?(0,r.__assign)((0,r.__assign)({},o),(n={},n[c]=!0,n)):o,allTo:f?(0,r.__assign)((0,r.__assign)({},s),(a={},a[u]=!0,a)):s}}),{allFrom:{},allTo:{}})}),[p,i,l]),oe=ae.allFrom,se=ae.allTo,le=(0,a.useMemo)((function(){return i===fe&&l!==fe||i!==fe&&l===fe}),[i,l]),ce=(0,a.useMemo)((function(){return i===fe&&l===fe}),[i,l]),pe=(0,a.useMemo)((function(){var e;return null===(e=g.filter((function(e){return e.symbol===x})))||void 0===e?void 0:e[0]}),[g,x]),he=(0,a.useMemo)((function(){var e;return null===(e=g.filter((function(e){return e.symbol===y})))||void 0===e?void 0:e[0]}),[g,y]),ge=(0,a.useMemo)((function(){return ne.reduce((function(e,t){var n=t.accountType;return(t.assetBalances||[]).forEach((function(t){var r=t.asset;e[r]||(e[r]={}),e[r][n]=t})),e}),{})}),[ne]),be=(0,a.useMemo)((function(){var e,t,n;if(le){var r=i===fe?pe:he;if(!r)return[];var a=[r.base,r.quote].map((function(e){return{name:e,coin:e,logoUrl:b[e]}})),o=i===fe?l:i,s=(null!==(n=null===(t=null===(e=ne.filter((function(e){return e.accountType===o})))||void 0===e?void 0:e[0])||void 0===t?void 0:t.assetBalances)&&void 0!==n?n:[]).map((function(e){return{coin:e.asset,name:e.assetName,logoUrl:e.logoUrl}}));return V(a,s,(function(e){return e.coin}))}if(ce){if(!pe||!he)return[];var c=pe.base,u=pe.quote,d=he.base,f=he.quote,m=[c,u].map((function(e){return{name:e,coin:e,logoUrl:b[e]}})),v=[d,f].map((function(e){return{name:e,coin:e,logoUrl:b[e]}}));return V(m,v,(function(e){return e.coin}))}return Object.keys(ge).map((function(e){var t=ge[e];return l in t&&t[i]})).filter((function(e){return!!e})).map((function(e){var t=e.asset;return{name:e.assetName||t,coin:t,logoUrl:e.logoUrl}})).sort((function(e,t){return e.coin.localeCompare(t.coin)}))}),[ge,i,l,le,g,b,ce,x,y,pe,he]),xe=(0,a.useCallback)((function(e){if(!ce){var t=be.some((function(t){return t.coin===e}));d(0===be.length||t?e:(be[0]||{}).coin||""),X("")}}),[be,ce]);(0,a.useMemo)((function(){return xe(u)}),[xe,u]);var _e=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return"MARGIN"!==i?[3,2]:[4,(0,A.Cr)({asset:u})];case 1:return[2,e.sent()];case 2:return"FUTURE"!==i?[3,4]:[4,(0,z.yd)({assetName:u})];case 3:return[2,e.sent()];case 4:return"DELIVERY"!==i?[3,6]:[4,(0,z.m_)({assetName:u})];case 5:return[2,e.sent()];case 6:return i===fe&&u.length&&x.length?[4,R({asset:u,symbol:x})]:[3,8];case 7:return[2,e.sent()];case 8:return[2,((ge[u]||{})[i]||{}).free||0]}}))}))}),[i,u,ge,x]),Ee=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return"FUTURE"===l&&q?[4,(0,z.SZ)({asset:u})]:[3,2];case 1:return[2,e.sent()];case 2:return[2,Number.MAX_SAFE_INTEGER]}}))}))}),[l,q,u]),we=(0,a.useState)(0),ye=we[0],Ce=we[1];(0,a.useEffect)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n,a,o,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return o=(a=Promise).all,[4,Ee()];case 1:return i=[r.sent()],[4,_e()];case 2:return[4,o.apply(a,[i.concat([r.sent()])])];case 3:return e=r.sent(),t=e[0],n=e[1],q&&"FUTURE"===l?t<0?[2,n]:[2,Math.min(t,n)]:[2,n]}}))})).then((function(e){return Ce(e)})).catch((function(){Ce(0)})),function(){Ce(0)}}),[_e,Ee,q]);var Se=(0,a.useCallback)((function(e){s(e)}),[s]),Ze=(0,a.useCallback)((function(e){c(e)}),[c]),Me=(0,a.useCallback)((function(e){d(e)}),[d]),ke=(0,a.useCallback)((function(e){var t,n=(null===(t=e.target.value.match(/[0]?(\d){1,12}(?:\.\d{0,8}){0,1}/))||void 0===t?void 0:t[0])||"";X(!n||/\./.test(n)?n:+n)}),[X]),Te=(0,a.useCallback)((function(){n(!1)}),[n]),Ae=(0,a.useCallback)((function(){s(l),c(i),l!==fe&&i!==fe||(C(x),_(y))}),[i,l,x,y]),ze=(0,a.useCallback)((function(){X((0,T.D$)(ye))}),[ye,X]),Re=(0,a.useMemo)((function(){return+Q>+ye?Y("validate-amountError"):""}),[Q,ye,Y]),Ie=(0,a.useMemo)((function(){return ne.reduce((function(e,t){var n=t.accountType;return(0,r.__spreadArray)((0,r.__spreadArray)([],e),[n])}),[])}),[ne]),Ne=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,a,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:e={asset:u,kindType:[i,l].join("_"),amount:Q},le&&(e.symbol=i===fe?x:y),ce&&(e.symbol=x,e.targetSymbol=y),r.label=1;case 1:return r.trys.push([1,3,,4]),ee(!0),[4,f(e)];case 2:return t=r.sent(),a=t.success,o=t.message,D?(a?setTimeout((function(){D(null,e,t),ee(!1),n(!1),v()}),W):(D(new Error(o),e,t),ee(!1)),[2]):a?(setTimeout((function(){K(Y("notify-transferSuccessful"),{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"}}),v(),h&&h(e),n(!1),ee(!1)}),W),[3,4]):(K(o,{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}),ee(!1),[2]);case 3:return r.sent(),K(Y("error-abnormal"),{variant:"error",anchorOrigin:{vertical:"top",horizontal:"right"}}),ee(!1),[3,4];case 4:return[2]}}))}))}),[u,i,l,Q,x,y,le,ce]),Be=(0,a.useMemo)((function(){if(!le||!ce)return!0;if(!he)return!1;var e=he.base,t=he.isBaseTransferIn,n=he.quote,r=he.isQuoteTransferIn;return!!(u===e&&t||u===n&&r)}),[le,ce,g,u,he]),Ue=!i||!l||!u||!+Q||!!Re||$||!Be,Fe=(0,a.useRef)([]),De=(0,a.useRef)([]),Pe=(0,a.useMemo)((function(){return g.map((function(e){return e.symbol}))}),[g]),Le=(0,a.useState)(0)[1],Ve=(0,a.useCallback)((function(){return Le((function(e){return e+1}))}),[]);(0,a.useEffect)((function(){if(le)i===fe&&(Fe.current=g,De.current=[],_((function(e){var t,n;return Pe.indexOf(e)>=0?e:null!==(n=null===(t=g[0])||void 0===t?void 0:t.symbol)&&void 0!==n?n:"BTCBUSD"})),C("")),l===fe&&(Fe.current=[],De.current=g,C((function(e){var t,n;return Pe.indexOf(e)>=0?e:null!==(n=null===(t=g[0])||void 0===t?void 0:t.symbol)&&void 0!==n?n:"BTCBUSD"})),_("")),Ve();else if(ce){if(he&&!pe){var e=he.base,t=he.quote,n=he.symbol,r=(b=g.filter((function(r){var a=r.base,o=r.quote,i=r.symbol;return O([a,o],[e,t])&&n!==i})))[0];if(!r)return;var a=r.base,o=r.quote,s=r.symbol,c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return O([t,n],[a,o])&&s!==r}));Fe.current=b,De.current=c,_(r.symbol)}if(!he&&pe){var u=pe.base,d=pe.quote,f=pe.symbol,m=(c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return O([t,n],[u,d])&&f!==r})))[0];if(!m)return;var v=m.base,p=m.quote,h=m.symbol,b=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return O([t,n],[v,p])&&h!==r}));Fe.current=b,De.current=c,C(m.symbol)}if(he&&pe){var x=he.base,E=he.quote,w=he.symbol,y=pe.base,S=pe.quote,Z=pe.symbol;c=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return O([t,n],[y,S])&&r!==Z})),b=g.filter((function(e){var t=e.base,n=e.quote,r=e.symbol;return O([t,n],[x,E])&&r!==w}));Fe.current=b,De.current=c}Ve()}}),[le,ce,i,l,pe,he,Ve,g,Pe]);var Oe=(0,a.useCallback)((function(){return Be?null:o().createElement(S.Z,{lineHeight:"14px",fontSize:"12px",mt:"4px",color:"sell"},Y("coin-not-transfer"))}),[Be,Y]);(0,a.useEffect)((function(){var e,t;if(ce){var n=null!==(t=null===(e=be[0])||void 0===e?void 0:e.coin)&&void 0!==t?t:"";d(n)}}),[ce,be,d]);var He=(0,a.useCallback)((function(e){return"from"===e&&i===fe?o().createElement(w.Z,{width:["100%","156px"],flex:"none",ml:[0,"16px"]},o().createElement(me,{label:te?null:Y("isolated-pair"),mt:te?"8px":"0"},o().createElement(de,{value:x,onChange:_,pairs:Fe.current}))):"to"===e&&l===fe?o().createElement(w.Z,{width:["100%","156px"],flex:"none",ml:[0,"16px"]},o().createElement(me,{label:te?null:Y("isolated-pair"),mt:te?"8px":"24px"},o().createElement(de,{value:y,onChange:C,pairs:De.current}))):null}),[i,l,te,x,y]);return o().createElement(N.Z,{open:t,title:o().createElement(S.Z,null,Y("dialog-title")),onCloseIconClick:Te,showTitleBottomLine:!1,onMaskClick:Te,sx:{width:["100%","484px","484px"],height:["100%","auto","auto"]},contentSx:{position:"relative",height:"100%",px:0,pt:0,scrollBehavior:"smooth",pb:["176px","md"],overflowY:["auto","visible","visible"]}},o().createElement(j,null),P&&o().createElement(H,null),o().createElement(w.Z,{pt:"md"}),o().createElement(S.Z,{sx:{px:"md"}},Y("dialog-tips")),o().createElement(Z.Z,{sx:{p:"md",borderStyle:"solid",borderWidth:"0 0 1px",borderColor:"line"}},o().createElement(Z.Z,{mt:"20px",mr:"xs"},o().createElement(ue,{onClick:Ae})),o().createElement(w.Z,{flex:1},o().createElement(Z.Z,{width:"100%",flexWrap:"wrap"},o().createElement(w.Z,{flex:["none","1"],width:["100%","auto"]},o().createElement(me,{label:Y("select-from"),mt:"0"},o().createElement(re,{value:i,data:Object.keys(oe),onChange:Se,activatdAccounts:Ie}))),He("from")),o().createElement(Z.Z,{width:"100%",flexWrap:"wrap"},o().createElement(w.Z,{flex:["none","1"],width:["100%","auto"]},o().createElement(me,{label:Y("select-to")},o().createElement(re,{value:l,data:Object.keys(se),onChange:Ze,activatdAccounts:Ie}))),He("to")))),o().createElement(w.Z,{px:"md"},o().createElement(me,{label:Y("select-coin")},o().createElement(ie,{value:u,data:be,onChange:Me}),Oe()),o().createElement(me,{label:o().createElement(Z.Z,{justifyContent:"space-between",width:1},o().createElement(S.Z,null,Y("select-amount")),u&&o().createElement(w.Z,{sx:{fontSize:"14px",color:"t.third",lineHeight:"20px"}},o().createElement(S.Z,{as:"span",sx:{color:"t.primary"}},(0,T.uf)(ye,8)),o().createElement(S.Z,{as:"span",px:"minor"},u),Y("label-available")))},o().createElement(B.Z,{variant:"filled",value:Q,defaultValue:Q,boxProps:{fontSize:1,width:"100%",height:"48px"},onChange:ke,error:!!Re,errorText:Re,autoComplete:"off",suffix:o().createElement(Z.Z,{mr:"xs",alignItems:"center"},!!Q&&o().createElement(k.Z,{size:16,color:"t.placeholder",sx:{cursor:"pointer"},onClick:function(){return X("")}}),o().createElement(S.Z,{onClick:ze,sx:{fontSize:"16px",color:"t.yellow",lineHeight:"24px",cursor:"pointer",ml:"xs"}},Y("action-max")))})),o().createElement(I.y,null,o().createElement(me,{mt:"0"},o().createElement(Z.Z,{justifyContent:"flex-end"},o().createElement(M.Z,{variant:"default",colorStyle:"flatprimary",sz:"l",onClick:Ne,disabled:Ue,height:40,sx:{width:"100%",maxWidth:["100%","180px;"]}},$?o().createElement(ve,null):Y("action-confirm")))))))};pe.displayName="TransferUI";const he=pe;var ge=function(e){var t=e.children,n=e.onTransferSuccess,l=void 0===n?function(){}:n,c=e.afterTransfer,u=e.needMargin,f=void 0===u||u,h=e.delay,g=void 0===h?1e3:h,b=e.needFuturesJointMargin,x=void 0!==b&&b,E=(0,a.useState)(!1),w=E[0],y=E[1],C=(0,a.useState)(!1),S=C[0],Z=C[1],M=(0,a.useState)(""),k=M[0],T=M[1],A=(0,a.useState)(""),z=A[0],R=A[1],I=(0,a.useState)(""),N=I[0],B=I[1],U=(0,a.useState)([]),D=U[0],P=U[1],L=(0,a.useState)(""),V=L[0],O=L[1],H=(0,a.useState)(""),q=H[0],W=H[1],j=function(e,t){var n=(void 0===t?m:t).needMargin,o=void 0===n||n,l=(0,a.useState)({}),c=l[0],u=l[1],f=(0,a.useState)([]),p=f[0],h=f[1],g=(0,a.useState)(!0),b=g[0],x=g[1],_=(0,a.useState)({}),E=_[0],w=_[1];(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,l,c,f,m,p,g,b,_,E,y,C,S,Z;return(0,r.__generator)(this,(function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,Promise.all([d(e),(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/public/asset-service/wallet/get-support-asset")];case 1:return[2,e.sent().data||{}]}}))})),o?(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/margin/v1/friendly/margin/asset/all")];case 1:return[2,e.sent().data]}}))})):[],(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/public/asset/asset/get-asset-logo")];case 1:return[2,e.sent().data||[]]}}))}))])];case 1:return t=M.sent(),n=t[0],a=t[1],l=t[2],c=t[3],f={},c.forEach((function(e){var t=null!==e&&void 0!==e?e:{},n=t.pic,r=void 0===n?"":n,a=t.asset;f[void 0===a?"":a]=r})),m=l.map((function(e){var t=e.assetName,n=e.assetFullName,r=e.delistedTime,a=e.status;return{assetCode:t,assetName:n,logoUrl:f[t]||"",delistedTime:r,status:a}})),p=new Set,g=((null===(C=null===n||void 0===n?void 0:n.find((function(e){return"FUTURE"===e.accountType})))||void 0===C?void 0:C.assetBalances)||[]).map((function(e){return e.asset&&p.add(e.asset),{assetCode:e.asset,assetName:e.assetName,logoUrl:e.logoUrl}})),a.future.forEach((function(e){p.has(e.assetCode)||(g.push(e),p.add(e.assetCode))})),b=v({assetBalances:(null===(S=null===n||void 0===n?void 0:n.find((function(e){return"FUTURE"===e.accountType})))||void 0===S?void 0:S.assetBalances)||[],supportAssets:a.future||[]}),_=v({assetBalances:(null===(Z=null===n||void 0===n?void 0:n.find((function(e){return"DELIVERY"===e.accountType})))||void 0===Z?void 0:Z.assetBalances)||[],supportAssets:a.delivery||[]}),E=(0,r.__assign)((0,r.__assign)({},a),{future:b,delivery:_,margin:m,mining:a.main||[]}),(0,s.unstable_batchedUpdates)((function(){x(!1),u(E),h(n),w(f)})),[3,3];case 2:return y=M.sent(),x(!1),console.log("useWalletBalance abnormal!",y),[3,3];case 3:return[2]}}))}))}),[]);var y=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),x(!0),[4,d(e)];case 1:return t=r.sent(),(0,s.unstable_batchedUpdates)((function(){x(!1),h(t||[])})),[3,3];case 2:return n=r.sent(),x(!1),console.log("refresh walletBalance abnormal!",n),[3,3];case 3:return[2]}}))}))}),[]),C=(0,a.useMemo)((function(){return(p||[]).map((function(e){var t,n=e.accountType,a=e.activate,o=e.assetBalances;if(!a)return(0,r.__assign)((0,r.__assign)({},e),{assetBalances:[]});var i=c[null!==(t=null===n||void 0===n?void 0:n.toLowerCase())&&void 0!==t?t:0];if(!i)return(0,r.__assign)({},e);var s=i.map((function(e){var t=e.assetCode,n=e.assetName,a=e.logoUrl,i=e.status,s=e.delistedTime,l=(o||[]).filter((function(e){return e.asset===t}));if(l.length){var c=l[0],u=c.free,d=c.freeze,f=c.locked,m=c.withdrawing,v=c.transferBtc;return(0,r.__assign)((0,r.__assign)({},e),{asset:t,assetName:n,free:u,freeze:d,locked:f,withdrawing:m,transferBtc:v})}return{logoUrl:a,asset:t,assetName:n,free:"0",freeze:"0",locked:"0",withdrawing:"0",transferBtc:"0",status:i,delistedTime:s}}));return(0,r.__assign)((0,r.__assign)({},e),{assetBalances:(0,r.__spreadArray)([],s)})}))}),[p,c]);return{data:(0,a.useMemo)((function(){return C.reduce((function(e,t){return e[t.activate?"activate":"unActivate"].push(t),e}),{activate:[],unActivate:[],all:C})}),[C]),loading:b,onRefresh:y,logoMap:E}}({needBalanceDetail:!0},{needMargin:f}),K=j.data,Y=j.loading,G=j.onRefresh,Q=j.logoMap,X=function(){var e=(0,p.N)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,r.__awaiter)(void 0,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,i.U2)("/bapi/asset/v1/private/asset-service/wallet/get-all-config")];case 1:return[2,e.sent().data||[]]}}))}))];case 1:return[2,e.sent()]}}))}))}),[],{value:[]});return{value:e.value,loading:e.loading,error:e.error}}().value,J=(0,a.useCallback)((function(e){var t=e.from,n=e.to,r=e.defaultCoin,a=e.defaultIsoSymbol,o=e.fixWalletType,i=void 0!==o&&o;t&&T(t),n&&R(n),r&&B(r),a&&W(a),Z(!0),y(i)}),[]);return(0,a.useEffect)((function(){var e;f&&Promise.all([(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.U2)("/bapi/margin/v1/public/isolated-margin/pair/coeff")];case 1:return e=n.sent(),t=e.data,e.success?[2,t]:[3,3];case 2:return n.sent(),[2,[]];case 3:return[2]}}))})),(void 0===e&&(e=""),(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,n,a,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:t=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,i.U2)(e+"/bapi/margin/v1/public/isolated-margin/pair/listed")];case 2:return n=r.sent(),a=n.success,o=n.data,a&&Array.isArray(o)&&(t=o),[3,4];case 3:return r.sent(),[3,4];case 4:return[2,t||[]]}}))})))]).then((function(e){var t=e[0],n=e[1],a={};null===t||void 0===t||t.map((function(e){var t,n=e.symbol,r=e.coeff;a[n]=null!==(t=null===r||void 0===r?void 0:r.transferOutBar)&&void 0!==t?t:"2"}));var o=n.map((function(e){var t;return(0,r.__assign)((0,r.__assign)({},e),{transferOutBar:null!==(t=null===a||void 0===a?void 0:a[e.symbol])&&void 0!==t?t:"2"})}));P(o)}))}),[f]),o().createElement(F.M.Provider,{value:{open:S,setOpen:Z,from:k,setFrom:T,to:z,setTo:R,coin:N,setCoin:B,loadingWalletsBalance:Y,walletsBalance:K,walletConfig:X,launchTransfer:J,freshBalance:G,onTransferSuccess:l,afterTransfer:c,isolatedPairs:D,toIsoSymbol:q,setToIsoSymbol:W,fromIsoSymbol:V,setFromIsoSymbol:O,logoMap:Q,fixWalletType:w,needMargin:f,needFuturesJointMargin:x,delay:g}},o().createElement(_,null,o().createElement(he,null)),t)}},Du7o:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("XhNN"),s=(0,a.forwardRef)((function(e,t){var n=e.children,a=(0,r.__rest)(e,["children"]);return o().createElement(i.Z,(0,r.__assign)({},a,{ref:t,__css:{position:["fixed","static"],zIndex:[1,"auto"],left:["0px","unset"],bottom:["0px","unset"],pt:"md",pb:["md","0px"],px:["md","0px"],width:["100%","unset"],boxShadow:["0px 2px 4px rgba(0, 0, 0, 0.08), 0px 0px 4px rgba(0, 0, 0, 0.08)","none"],bg:"popupBg"}}),n)}))},u74s:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("D57K"),a=n("/SIk"),o=n.n(a),i=n("dgRg"),s=n("BY6O"),l=n("YkGQ"),c=n("nxFc"),u=n("l29r"),d=n("WDTU"),f=n("uy0S"),m=function(){return"undefined"!==typeof window?document.body.offsetHeight:0};const v=o().forwardRef((function(e,t){var n=this,v=e.arrow,p=void 0!==v&&v,h=e.boundary,g=e.delay,b=void 0===g?0:g,x=e.container,_=e.tip,E=e.placement,w=e.pos,y=e.children,C=e.open,S=e.trigger,Z=void 0===S?"hover":S,M=e.scroll,k=void 0===M||M,T=e.resize,A=void 0===T||T,z=e.enablePortal,R=void 0!==z&&z,I=e.leaveDelay,N=void 0===I?0:I,B=e.boxOffset,U=void 0===B?0:B,F=e.arrowPadding,D=void 0===F?0:F,P=e.onlyShowOnHover,L=void 0!==P&&P,V=e.bg;E=E||w||"top",E="rtl"===(0,l.Z)()?f.O9[E]:E;var O=o().useRef(null!=C).current,H=(0,a.useState)(null),q=H[0],W=H[1],j=(0,a.useState)(null),K=j[0],Y=j[1],G=(0,a.useState)(null),Q=G[0],X=G[1],J=o().useRef(0),$=o().useRef(0),ee=(0,c.D)(q,K,{placement:E,modifiers:[{name:"eventListeners",options:{scroll:k,resize:A}},{name:"arrow",options:{element:Q,padding:D}},{name:"offset",options:{offset:[U||0,f.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:h}}]}),te=ee.styles,ne=ee.attributes,re=ee.update,ae=ee.state,oe=o().useMemo((function(){return(0,f.BP)(null===ae||void 0===ae?void 0:ae.placement)}),[null===ae||void 0===ae?void 0:ae.placement]),ie=(0,a.useState)(C),se=ie[0],le=ie[1];o().useEffect((function(){return function(){$.current&&window.clearTimeout($.current),$.current=0}}),[se]),O&&(Z=void 0,C!==se&&le(C));var ce=(0,i.Z)(W,t),ue="click"===Z?function(e){$.current&&window.clearTimeout($.current),J.current=0,$.current=0,le(!se),re&&re(),y.props.onClick&&y.props.onClick(e)}:y.props.onClick,de="hover"===Z?function(e){!se&&window.performance.now()-J.current>500&&($.current=b?$.current||window.setTimeout((function(){return le(!0)}),b):(le(!0),0),re&&re(),J.current=window.performance.now()),y.props.onMouseMove&&y.props.onMouseMove(e)}:y.props.onMouseMove,fe="hover"===Z?function(e){return(0,r.__awaiter)(n,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return N?setTimeout((function(){$.current&&window.clearTimeout($.current),J.current=0,$.current=0,le(!1),re&&re(),y.props.onMouseLeave&&y.props.onMouseLeave(e)}),N):($.current&&window.clearTimeout($.current),J.current=0,$.current=0,le(!1),re&&re(),y.props.onMouseLeave&&y.props.onMouseLeave(e)),[2]}))}))}:y.props.onMouseLeave,me=(0,r.__assign)((0,r.__assign)({},y.props),{onClick:ue,onMouseMove:de,onMouseLeave:fe,ref:ce}),ve=L?{appear:!0,mountOnEnter:!0,unmountOnExit:!0,onEnter:m}:{};return o().createElement(o().Fragment,null,o().cloneElement(y,me),o().createElement(u.ZP,(0,r.__assign)({in:se,timeout:f.x9},ve),(function(e){return x||R?o().createElement(s.ZP,{container:x},o().createElement(d.Z,(0,r.__assign)({open:!0,arrow:p,arrowStyle:te.arrow,style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},te.popper),f.hy),oe[e]),bg:V,arrowRef:X,ref:Y},ne.popper),_)):o().createElement(d.Z,(0,r.__assign)({open:!0,arrow:p,arrowStyle:te.arrow,style:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},te.popper),f.hy),oe[e]),bg:V,arrowRef:X,ref:Y},ne.popper),_)})))}))},d2db:(e,t,n)=>{"use strict";n.d(t,{P:()=>f});var r=n("/SIk"),a=n.n(r),o=n("XhNN"),i=n("OV9X"),s=n("8RC1"),l=n("U0yl"),c=n("pVAJ"),u=n("xxGv"),d=a().createElement;const f=()=>{const{getI18n:e}=(0,l.Z)("futures-battle","futures-ui"),{isLight:t}=(0,u.Fg)(),[,[n,r]]=(0,c.z4)(),a=(0,c.tZ)();return{showBattleDialog:l=>{const c=new s.Vq;c.confirm({content:d(o.Z,{sx:{width:[360]}},d(i.Z,{sx:{fontSize:20,mt:5,mb:3}},e("You-Have-On-Going-Battle")),d(i.Z,{sx:{color:"t.thead",fontSize:14}},e("Please-End-Battle"))),okText:e("View-Battle"),isLight:t}).then((()=>{window.location.href="um"===l?`/${a}/futures-activity/battle/um/${n}_${r}`:`/${a}/futures-activity/battle`})).catch((()=>{})).finally(c.close).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}}}},vSWf:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r=n("eXOl"),a=n("wtWh"),o=n("FOuV");const i=({orderType:e,symbol:t})=>{const n=(0,r.AM)(),i=(0,r.j2)(),s=t?n[t]:i,{filters:l,equalQtyPrecision:c=2}=s,{limitStepSizePrecision:u,marketStepSizePrecision:d,tickSizePrecision:f}=(0,a.k)({filters:l});return{stepSizePrecision:(0,o.Br)(e)?d:u,tickSizePrecision:f,equalQtyPrecision:c}}},"/mDK":(e,t,n)=>{"use strict";n.d(t,{r:()=>s,A:()=>l});var r=n("5vwO"),a=n("GpFh"),o=n("/SIk");const i=({lowPrice:e,lastPrice:t,highPrice:n,openPrice:r})=>{const a=+t-+r;return{lowPrice:e,lastPrice:t,highPrice:n,openPrice:r,difference:[a>=0?"+":"",(Number(r)?a/+r*100:0).toFixed(2)].join(""),bigThan:(o=t,i=r,+o>=+i)};var o,i};function s(e){const{baseTicker:t,marketTabs:n}=(0,o.useMemo)((()=>({baseTicker:Object.keys(e).reduce(((t,n)=>{const o=e[n]||{},{low:s,close:l,high:c,open:u,parentMarket:d,quoteAsset:f,etf:m}=o,v=(0,a.Z)(o,["low","close","high","open","parentMarket","quoteAsset","etf"]),p=m?"ETF":"USD\u24c8"===d?"FIAT":d,h=i({lowPrice:s,lastPrice:l,highPrice:c,openPrice:u});return t[n]=Object.assign(v,(0,r.Z)({parentMarket:p,quoteAsset:f},h)),t}),{}),marketTabs:void 0})),[e]);return{baseTicker:t,marketTabs:n}}function l(e,t){return Object.keys(t).reduce(((e,n)=>{const a=e[n];if(a){const{lowPrice:o,lastPrice:s,highPrice:l,openPrice:c}=t[n],u=Number(s)-Number(a.lastPrice),d=a.lastPrice?0===u?a.lastFlag:u:void 0;e[n]=(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},a),t[n]),i({lowPrice:o,lastPrice:s,highPrice:l,openPrice:c})),{},{lastFlag:d})}return e}),e)}}}]);