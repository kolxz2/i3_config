(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[806],{CEY3:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>r,li:()=>a,n:()=>s});const r="1w",a=1,s=200},"7PVv":(e,t,i)=>{"use strict";i.d(t,{R7:()=>p});var r=i("tsUn"),a=i("XXmh"),s=i("4xt1"),n=i("eXOl"),o=i("Gbz3"),l=i("AHTf"),d=i("mE5e"),u=i("jQmP");function c(e,t,i={}){const{tickSize:r,minQty:a,equalQtyPrecision:s}=i,n=(0,u.M)(String(t)),o=r?(0,d.pC)(+r):n,l=a?(0,d.pC)(+a):n;switch(e.toLowerCase()){case"fee":return(0,d.uf)(t,8);case"filled":return(0,d.uf)(t,l);case"equalqty":return(0,d.mD)(+t,s);case"totalquota":return(0,d.mD)(+t,o);case"price":return(0,d.uf)(t,o);case"total":return(0,d.uf)(t,8);default:return e}}var m=i("RUYm");const f=(0,l.nM)(),p=e=>f?(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:p,commissionAsset:y,realizedProfit:h})=>{const T=((0,n.Vh)()||{})[e]||{},{marginAsset:P,pricePrecision:g}=T,{getI18n:b}=(0,m.Z)(),{getI18n:x}=(0,o.yk)(),w=x("Cont",{defaultValue:"Cont"}),{isCoinUnit:v}=(0,o.QV)();let $,M=e;return T&&($=(0,r.H)(T,x),M=$.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:M,symbolName:$,nextSide:"BUY"===i?{color:"buy",children:b(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:b(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,g),nextQty:v?`${c("equalQty",f,T)} ${P}`:`${c("filled",u,T)} ${w}`,nextFee:`${c("fee",p,T)}\n              ${y||P}`,nextProfit:`${c("fee",h,T)}\n              ${P}`}})(e):(({symbol:e,insertTime:t,side:i,positionSide:l="BOTH",price:d,qty:u,totalQuota:f,fee:p,commissionAsset:y,realizedProfit:h})=>{const T=((0,n.Vh)()||{})[e]||{},{baseAsset:P,marginAsset:g,pricePrecision:b}=T,{getI18n:x}=(0,m.Z)(),{getI18n:w}=(0,o.yk)(),{isCoinUnit:v}=(0,o.QV)();let $,M=e;return T&&($=(0,r.H)(T,w),M=$.shortName),{nextDate:(0,a.v)(new Date(t),"yyyy-MM-dd hh:mm:ss"),nextPair:M,symbolName:$,nextSide:"BUY"===i?{color:"buy",children:x(`sideBuy${l}`,{defaultValue:"Buy"})}:{color:"sell",children:x(`sideSell${l}`,{defaultValue:"Sell"})},nextPrice:(0,s.uf)(d,b),nextQty:v?`${c("filled",u,T)} ${P}`:`${c("totalQuota",f,T)} ${g}`,nextFee:`${c("fee",p,T)}\n              ${y||g}`,nextProfit:`${c("fee",h,T)}\n                ${g}`}})(e)},RUYm:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i("pVAJ");const a=e=>(0,r.ZK)("trd-tradeHistory",e)},HX21:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>V});var r=i("5vwO"),a=i("wZts"),s=i("e5RN"),n=i("/SIk"),o=i.n(n),l=i("Vg22"),d=i("Kwub"),u=i("Gbz3"),c=i("pVAJ"),m=i("kZs2"),f=i("OhB/"),p=i("6Afj"),y=i("x+gY"),h=i("7Pma"),T=i("CEY3"),P=i("7PVv"),g=o().createElement;const b=(0,p.ck)("mobile",(()=>Promise.all([i.e(374),i.e(712),i.e(162)]).then(i.bind(i,"JcaH")))),x=(0,p.ck)("pc",(()=>Promise.all([i.e(374),i.e(712),i.e(773)]).then(i.bind(i,"GrNR")))),w="UpdateFilter",v="FetchSuccess",$={nextPage:T.li,hasMore:!0,filters:{l_pair:!1,timePeriod:T.Bs,startTime:0,endTime:0},items:[],symbolMap:{}},M=(0,y.j)({[w](e,t){const{startTime:i,endTime:r,timePeriod:a,pair:s}=t.payload;void 0!==a&&(e.filters.timePeriod=a),void 0!==i&&(e.filters.startTime=i),void 0!==r&&(e.filters.endTime=r),void 0!==s&&(e.filters.l_pair=s)},[v](e,t){const{data:i,page:r,total:a}=t.payload;r===T.li?e.items=i:i.length&&(e.items=e.items.concat(i)),e.hasMore=r*T.n<a,e.nextPage=r+1}},$),O=(0,h.Z)(w),k=(0,h.Z)(v);const S=()=>{const{getI18n:e}=(0,u.yk)(),t="hideOtherSymbol",i=e(t,{defaultValue:"Hide Other Symbol"}),[o]=(0,c.uT)(),p=(0,l.useDispatch)(),{isTradeHideOtherPairs:y}=(0,c.VX)(),{isMobile:h,isIPad:w}=(0,c.Fs)();$.filters.timePeriod=w?"1w":"1d",$.filters.l_pair=y;const v=(0,c.AM)(),[S,V]=(0,n.useReducer)(M,(0,r.Z)((0,r.Z)({},$),{},{symbolMap:v})),Z=(0,m.O_)(o,!1),{nextPage:C,filters:H,hasMore:Q}=S,B=function(e,{pair:t}){const[i]=(0,c.z4)();let r;return(0,f.I9)(e,"insertTime"),t&&(r=e.filter((e=>e.symbol===i))),r||e}(S.items,{pair:H.l_pair}),A=(0,m.lx)(o),_=(0,n.useCallback)((e=>{V(O({pair:e})),p.userProfile.save({key:"isTradeHideOtherPairs",value:e})}),[p.userProfile]),[{loading:D},E]=(0,d.Z)((async({page:e=C,times:t}={})=>{if(!Z)return;const{startTime:i,endTime:r}=t||function(e){let t=(0,f.OQ)(e.timePeriod);return t||(t={type:"1w",startTime:e.startTime,endTime:e.endTime}),t}(H);if(null===i||null===r)return;const{data:s,total:n}=await(async({startTime:e,endTime:t,rows:i,page:r,accountType:s}={})=>{let n;try{n=await(0,a.v_)("/bapi/futures/v1/private/future/user-data/trade-history",{accountType:s,startTime:e,endTime:t,page:r,rows:i})}catch(o){throw new Error("nework error")}if("000000"!==n.code)throw new Error(n.message||"unknown error");return{data:n.data||[],total:n.total}})({startTime:i,endTime:r,page:e,rows:T.n,accountType:A});V(k({data:s,total:n,page:e}))}),[C,H,Z],{loading:!0}),I=(0,n.useCallback)((({type:e,startTime:t,endTime:i})=>{V(O({timePeriod:e,startTime:t,endTime:i})),E({page:T.li,times:{startTime:t,endTime:i}})}),[E]);(0,n.useEffect)((()=>{Q||I((0,f.OQ)("1d"))}),[]);const N=(0,n.useCallback)((()=>E()),[E]),R=!D&&B.length<=0;return g(s.Z,{"data-testid":"DataTable",sx:{flexDirection:"column",height:"100%",pb:"xs"}},w?g(b,{isMobile:h,hideOtherPairs:H.l_pair,onHideOtherPairs:_,hasMore:Q,loadMore:N,isEmpty:R,data:B,loading:D,useColumn:P.R7,hideName:t,mHeaderText:i,filterType:H.timePeriod,hideText:i,onSearch:I}):g(x,{filterType:H.timePeriod,onSearch:I,hideOtherPairs:H.l_pair,onHideOtherPairs:_,hasMore:Q,loadMore:N,isEmpty:R,data:B,loading:D,currentPage:C-1,useColumn:P.R7,hideText:i,hideName:t}))},V=o().memo(S)},"x+gY":(e,t,i)=>{"use strict";i.d(t,{j:()=>n});var r=i("5vwO"),a=i("d019"),s=i("rfrl");const n=(e,t)=>(0,a.Z)(Object.keys(e).reduce(((t,i)=>(0,r.Z)((0,r.Z)({},t),{},{[i]:(t,r)=>(0,s.ZP)(t,(t=>e[i](t,r)))})),{}),t)}}]);