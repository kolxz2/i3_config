(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[712],{F4Cb:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AssetsContent:()=>F,Label:()=>A,default:()=>_});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("O94r"),l=r.n(s),c=r("X46w"),u=r("XhNN"),d=r("9rpF"),m=r("e5RN"),p=r("OV9X"),f=r("4xt1"),g=r("dcD/"),y=r("/Fn1"),h=r("H6/m"),b=r("pVAJ"),v=r("kjyE"),x=r("LcTY"),S=r("AHTf"),k=r("FOuV"),P=r("Gbz3"),T=r("rdEq"),C=r("hfnl"),w=r("UIpo");const I={position:"sticky",zIndex:999,top:`-${w.Jy}px`,mt:`-${w.Jy}px`,display:"inline-flex",alignItems:"center",justifyContent:"flex-end",float:"right",height:`${w.Jy}px`,mr:"24px",cursor:"pointer"},M={position:"absolute",zIndex:999,top:0,right:"16px",display:"flex",alignItems:"center",justifyContent:"flex-end",height:`${w.Jy}px`,cursor:"pointer"},E={".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},N={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",overflowY:"auto",maxHeight:"193px",".asset-option":{padding:"4px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"12px"}};var Z=n().createElement;const A=(0,i.forwardRef)(((e,t)=>{let{children:r}=e,i=(0,a.Z)(e,["children"]);return Z(c.Z,Object.assign({variant:"default",colorStyle:"secondary",sz:"tiny",sx:{flex:1,mr:"8px",fontWeight:"normal",":last-of-type":{mr:"0"}},ref:t},i),r)})),O=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return Z(u.Z,{sx:E},Z(d.ZP,{trigger:"hover",enablePortal:!0,overlay:Z(u.Z,{sx:N},a.map((e=>{const{asset:a}=e||{};return Z("div",{className:l()({"asset-option":!0,active:a===r}),key:a,onClick:()=>{t(a)}},a)})))},Z("div",{className:"asset-label"},r,Z(g.Z,{ml:"4px",color:"t.third",size:16}))))},R=n().memo((({curAsset:e,balance:t,setCurAsset:r,showSelector:a})=>{const i=(0,P.C3)()===S.UW,{isIPad:n}=(0,b.Fs)();return Z(u.Z,{sx:n?M:I},a&&Z(O,{curAsset:e,balance:t,onChange:r}),i&&Z(y.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{x.T.emit(x.F.OPEN_TRANSFER_MODAL,e)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:n,balance:o,setCurAsset:s}=t,l=Object.keys(a).join(),c=Object.keys(o).join();return r===n&&i===s&&l===c})),V=n().memo((({getFutI18n:e,futUrlConfig:t,locale:r,disabled:a,curAsset:i})=>Z(m.Z,{sx:{justifyContent:"space-between",pt:"6px"}},Z(A,{onClick:()=>{let e=(0,v.CN)(t.BUYING_URL,{locale:r,crypto:i});e=(0,v.CN)(t.BUYING_URL_ELECTRON,{crypto:i}),window.open(e)},disabled:a},e("buy-crypto",{defaultValue:"Buy Crypto"})),Z(A,{onClick:()=>x.T.emit(x.F.OPEN_CONVERT_MODAL),disabled:a,"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),Z(A,{onClick:()=>x.T.emit(x.F.OPEN_TRANSFER_MODAL,i),disabled:a,"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))))),L=n().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,P.Gb)(t);return Z(p.Z,{color:"t.primary"},(0,f.GW)(r||0,e,!0)," ",t)})),F=n().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:o,quoteAsset:s,bnbWalletBalance:l,locale:c})=>{const d=(0,i.useMemo)((()=>Z(m.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(T.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),Z(p.Z,{color:"t.primary"},(0,f.GW)(a||0,o,!0)," ",s))),[r,s,o,a]);return Z(n().Fragment,null,!e&&!t&&Z(u.Z,{mt:"16px"},d,Z(m.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},Z(T.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),Z(L,{marginPrecision:o,marginAsset:s}))),e&&!t&&Z(h.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),D=({noButtons:e})=>{var t,r;const{getI18n:a,i18n:{language:n}}=(0,P.yk)(),s=(0,b._n)(),{isExistFutureAccount:l}=(0,b.Pc)(),c=(0,o.useDispatch)(),d=(0,P.KQ)(),m=(0,P.Kc)("loading"),[,[p,f]]=(0,b.z4)(),{0:g,1:y}=(0,i.useState)(f),{isMobile:h}=(0,b.Fs)(),v=Object.values(d).every((({walletBalance:e})=>!e));return(0,i.useEffect)((()=>{y(f),c.transferAssets.updateState({transferAsset:f})}),[f,c]),h?null:Z(u.Z,{fontSize:"12px",px:"16px"},Z(R,{getFutI18n:a,curAsset:g,balance:d,setCurAsset:y,showSelector:s}),e||Z(V,{getFutI18n:a,futUrlConfig:k.x,locale:n,base:p,curAsset:g,disabled:!s||!l}),Z(F,{isEmptyBalance:v,loading:m,getFutI18n:a,walletBalance:null===(t=d[g])||void 0===t?void 0:t.walletBalance,marginPrecision:4,quoteAsset:g,bnbWalletBalance:null===(r=d.BNB)||void 0===r?void 0:r.walletBalance,locale:n}),s&&!v&&!m&&Z(C.Z,null))},_=n().memo(D)},"wkn/":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r("/SIk"),i=r.n(a),n=r("pVAJ"),o=r("wjiZ"),s=r("H6/m"),l=r("U0yl"),c=r("Gbz3"),u=i().createElement;const d=()=>{const{0:e,1:t}=(0,a.useState)(!1),[,[r,i]]=(0,n.z4)(),d={root:{borderRadius:0,marginTop:"1px",padding:"8px 16px"},link:{color:(0,n.Fg)().isLight?"t.yellow300":"t.yellow200",marginLeft:2}};const{getI18n:m}=(0,l.Z)("futures-battle","futures-ui"),p=`/${(0,n.tZ)()}/futures-activity/battle/um/${r}_${i}`;(0,c.d2)();const f=(0,c.E5)();(0,a.useEffect)((()=>{t(f.inBattle)}),[f.inBattle]);const g=(0,a.useCallback)((()=>{t(!1)}),[]);return e&&u(s.Z,{variant:"warning",closable:!0,onClose:g,sx:d.root},m("You-Are-In-A-Battle"),u(o.Z,{sx:d.link,href:p},m("View-Battle-Page")))}},BkSH:(e,t,r)=>{"use strict";r.d(t,{oF:()=>a,DD:()=>i,uf:()=>n,Yl:()=>o,Tw:()=>s,nU:()=>l});const a={baseAsset:"BTC",quoteAsset:"USDT",pricePrecision:2,quantityPrecision:2,tickSizePrecision:2},i={LONG:"LONG",SHORT:"SHORT"},n="-",o={ISOLATED:"ISOLATED",CROSS:"CROSS"},s={ONEWAY:"ONEWAY",HEDGE:"HEDGE"},l=1e10},dDuV:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var a=r("pVAJ"),i=r("XhNN"),n=r("k/S5"),o=r("/SIk"),s=r.n(o);const l=Math.round(window.devicePixelRatio||1),c=240*l,u=140*l,d=5*l,m=5*l,p=5*l,f=25*l,g=230*l,y=110*l;function h({ref:e,name:t,fg:r,bg:a,min:i,value:n,max:s,limit:h}){const b=(0,o.useRef)();(0,o.useEffect)((()=>{if(!e.current)return;e.current.width=c,e.current.height=u;const t=e.current.getContext("2d");t&&(t.font=`bold ${16*l}px Helvetica,Arial,sans-serif`,t.textBaseline="top",t.fillStyle=a,t.fillRect(0,0,c,u),t.fillStyle=r,t.fillText("FPS",d,m),t.fillRect(p,f,g,y),t.fillStyle=a,t.globalAlpha=.9,t.fillRect(p,f,g,y),b.current=t)}),[e,r,a]),(0,o.useEffect)((()=>{if(!b.current||!e.current)return;const o=b.current;o.fillStyle=a,o.globalAlpha=1,o.fillRect(0,0,c,f),o.fillStyle=r,o.fillText(`${n||"--"} ${t} (${Math.round(i||0)}-${Math.round(s||0)})`,d,m),o.drawImage(e.current,p+l,f,g-l,y,p,f,g-l,y),o.fillRect(p+g-l,f,l,y),o.fillStyle=a,o.globalAlpha=.9,o.fillRect(p+g-l,f,l,Math.round((1-(n||0)/h)*y))}),[e,t,r,a,i,n,s,h])}const b={min:void 0,value:void 0,max:void 0},v=()=>(window.performance||Date).now(),x=v();function S(){const{0:e,1:t}=(0,o.useState)(b),{0:r,1:a}=(0,o.useState)(b),i=(0,o.useRef)(x),n=(0,o.useRef)(x),s=(0,o.useRef)(0);return(0,o.useEffect)((()=>{let e;const r=()=>{i.current=v(),(()=>{s.current++;const e=v();if(e>=n.current+1e3){const r=Math.round(1e3*s.current/(e-n.current));if(a((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r}))),n.current=e,s.current=0,window.performance&&window.performance.memory){const{memory:e}=window.performance,r=Math.round(e.usedJSHeapSize/1048576);t((e=>({min:e.min?Math.min(e.min,r):r,max:e.max?Math.max(e.max,r):r,value:r})))}}})(),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}}),[]),{memory:e,fps:r}}var k=s().createElement;const P=1048576;const T=function(){const e=(0,o.useRef)(null),t=(0,o.useRef)(null),{fps:r,memory:a}=S();return h({ref:e,name:"FPS",fg:"#0ff",bg:"#002",min:r.min,value:r.value,max:r.max,limit:100}),h({ref:t,name:"MB",fg:"#f08",bg:"#201",min:a.min,value:a.value,max:a.max,limit:window.performance&&window.performance.memory?window.performance.memory.jsHeapSizeLimit/P:4294967296}),k(i.Z,{pt:"md"},k(n.Z,{columns:[1,3],gap:24},k("canvas",{ref:e,id:"fpsCanvas",style:{width:"240px",height:"140px"}}),k("canvas",{ref:t,id:"memoryCanvas",style:{width:"240px",height:"140px"}})))};var C=r("e5RN"),w=r("NXSR"),I=s().createElement;function M(){const{isLight:e}=(0,a.Fg)(),{0:t,1:r}=(0,o.useState)(!1);return I(C.Z,{sx:{width:"fit-content",minHeight:"40px",position:"fixed",bottom:"140px",right:"24px",zIndex:9999}},I(i.Z,{sx:{display:"grid",placeItems:"center",width:"40px",height:"40px",borderRadius:"50%",color:"primary",backgroundColor:"button.downloadBg",cursor:"pointer",overflow:"hidden",boxShadow:e?"0px 0px 3px rgba(0, 0, 0, 0.05), 0px 1px 10px rgba(0, 0, 0, 0.08)":"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 3px 6px rgba(71, 77, 87, 0.04), 0px 1px 2px rgba(20, 21, 26, 0.04)"},onClick:()=>r((e=>!e))},I(w.Z,{sx:{width:"100%",height:"100%"}})),t&&I(i.Z,{sx:{position:"absolute",right:"24px",bottom:"-120px"}},I(T,null)))}},OhiR:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r("5vwO"),i=r("GpFh"),n=r("pVAJ"),o=r("2rU8"),s=r("kZs2"),l=r("XhNN"),c=r("e5RN"),u=r("dcev"),d=r("1lQ6"),m=r("2/hP"),p=r("tsUn"),f=r("/SIk"),g=r.n(f),y=r("Gbz3");function h(e,t,r,a){const i=e/a-1;return Math.round(r*(i**3+1)+t)}const b=[];function v(e,t,r,a,i){let n=b.filter((({el:t})=>t===e))[0];if(n||(n={el:e,done:!0},b.push(n)),n.t=1,n.d=Math.ceil(a/1e3*60),n.originX=e===window?window.scrollX:e.scrollLeft,n.offsetX=t,n.originY=e===window?window.scrollY:e.scrollTop,n.offsetY=r,!n.done)return;const o=()=>{const{t:e,d:t,originX:r,originY:a,offsetX:s,offsetY:l,el:c}=n;if(e<t){const i=h(e,r,s,t),u=h(e,a,l,t);n.t+=1,c===window?window.scrollTo(i,u):(c.scrollLeft=i,c.scrollTop=u),window&&window.requestAnimationFrame(o)}else n.done=!0,c===window?window.scrollTo(r+s,a+l):(c.scrollLeft=r+s,c.scrollTop=a+l),i&&window&&window.requestAnimationFrame(i)};n.done=!1,o()}var x=r("QqFe"),S=r("Dvpw"),k=g().createElement;const P=({height:e,width:t,children:r})=>k(l.Z,{__css:{position:"relative",height:`${e}px`,width:t?`${t}px`:"100%","> div::-webkit-scrollbar":{width:"0",height:"0"}}},r),T=(0,f.memo)((function({symbol:e,change:t,delivery:r=!1,symbolText:a,deliveryDateFormat:i}){const n=(0,y.G3)(),s=(0,y.d0)(),l=(0,f.useCallback)((()=>{s({isBlank:n!==r,stateSymbol:e,isDeliveryColumn:r})}),[s,r,n,e]);return k("div",{className:"favorite-item",onClick:l},k("div",{className:"favorite-item-symbol"},k("span",null,a,!!i&&k("span",{className:"favorite-item-date"},i))),k(o.PH,{className:"favorite-item-change "+(Number(t>0)?"buy":"sell")},`${t}%`))})),C=(0,f.memo)((()=>k(c.Z,{className:"draggableHandle",sx:{pl:"16px",pr:"16px",color:"primary"}},k(u.Z,{size:16,color:"primary"})))),w=({onRemove:e})=>{const t=(0,f.useRef)(null),{nextTickers:r}=(0,x.Pj)(),o=(0,s.FB)(r,"symbol"),u=(0,y.s4)(),{getI18n:g}=(0,y.yk)(),h=u.map((e=>{const{symbol:t}=e,r=o[t]||{},n=(0,a.Z)((0,a.Z)({},e),r),{difference:s=0}=n,l=(0,i.Z)(n,["difference"]);return(0,a.Z)({symbol:t,change:s},l)})),{0:b,1:w}=(0,f.useState)(!1),{0:I,1:M}=(0,f.useState)(!1),E=(0,f.useCallback)((()=>{var e,r;t.current&&(w(!(null===(e=t.current)||void 0===e||!e.scrollLeft)),M(t.current.scrollWidth>t.current.clientWidth+(null===(r=t.current)||void 0===r?void 0:r.scrollLeft)))}),[t]);(0,f.useEffect)((()=>{E()}),[h,E]);const N="rtl"===(0,n.gm)(),Z=(0,f.useCallback)((()=>v(t.current,-300,0,300,E)),[E]),A=(0,f.useCallback)((()=>v(t.current,300,0,300,E)),[E]);return k(c.Z,{sx:{alignItems:"center",justifyContent:"center",mb:"4px",bg:"moduleBg",height:"100%","& .favorite-item":{display:"flex",cursor:"pointer",position:"relative",minWidth:"unset",px:"8px",py:"10px",flexShrink:0,height:"100%",whiteSpace:"nowrap",color:"t.secondary",justifyContent:"space-around",alignItems:"center","&:hover":{bg:"bg3",color:"t.primary"},"& .favorite-item-symbol":{fontSize:"14px",lineHeight:"16px"},"& .favorite-item-date":{ml:"4px"},"& .favorite-item-change":{marginLeft:"4px",fontSize:"12px","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"}}}}},k(C,null),k(P,null,!N&&b?k(c.Z,{sx:{position:"absolute",left:"-8px",cursor:"pointer",width:"58px",height:"100%",background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`,zIndex:"999",alignItems:"center",justifyContent:"flex-start"},onClick:Z},k(d.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}})):null,k(c.Z,{ref:t,__css:{overflowX:"auto"}},h.map((e=>{const{symbol:t,change:r,isDelivery:a}=e,{symbol:i,deliveryDateFormat:n}=(0,p.H)(e,g);return k(T,{key:t,symbol:t,change:r,delivery:a,symbolText:i,deliveryDateFormat:n})}))),!N&&I?k(c.Z,{sx:{position:"absolute",top:"0px",right:"-1px",cursor:"pointer",width:"58px",height:"100%",alignItems:"center",justifyContent:"flex-end",pr:"1px",background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%,  transparent 95.69%)`},onClick:A},k(m.Z,{color:"icons.close",size:20,sx:{"&:hover":{color:"t.third"}}})):null),e&&k(l.Z,{sx:{display:"flex",alignItems:"center",height:"100%",mr:"16px",ml:"12px"}},k(S.Z,{size:20,onRemove:e,sx:{cursor:"pointer",flexShrink:0,alignItem:"flex-end",color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}}})))},I=g().memo(w)},IewQ:(e,t,r)=>{"use strict";r.d(t,{z:()=>a,w:()=>i});const a="PLACE_ORDER_TYPE",i="futures-flash-order-visible"},"5G2b":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>se});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("e5RN"),s=r("pVAJ"),l=r("EPGa"),c=r("b2zI"),u=r("m+kj"),d=r("Io4e"),m=r("YkKT"),p=r("FOuV"),f=r("Gbz3"),g=r("IewQ"),y=r("0tOJ"),h=r("5igY");const b={userSelect:"none",fontSize:"12px",height:"40px",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,minWidth:"100px",borderTop:"2px solid",cursor:"pointer",lineHeight:"16px","&.buy-button":{":hover":{bg:e=>(0,y.D)(e.colors.buy,.7)},bg:e=>(0,y.D)(e.colors.buy,.15),borderColor:"buy"},"&.sell-button":{":hover":{bg:e=>(0,y.D)(e.colors.sell,.7)},bg:e=>(0,y.D)(e.colors.sell,.15),borderColor:"sell"},padding:"2px 0 3px",".title":{color:"t.secondary"},".text":{color:"t.primary"}},v={bg:"bg1",pt:"xs",".container":{width:"25px",mx:"2px",flexDirection:"column",alignItems:"center",cursor:"pointer",color:"t.third","&.active":{"& > div:first-of-type":{bg:"t.secondary"},color:"t.secondary"}},".stepper":{height:"10px",mb:"2px",width:"23px",bg:"bg3"},".value":{fontSize:"12px",transform:"scale(calc(10/12))",color:"t.third"},".position-value":{flex:1,fontSize:"12px",color:"t.secondary"}},x={minWidth:"312px",width:"auto",position:"absolute",zIndex:h.Z.flashOrder,color:"white",minHeight:"40px",alignItems:"center",justifyContent:"space-between",bg:"popupBg","&.drag-hide":{display:"none"}},S={minWidth:"16px",width:"16px",justifyContent:"center",display:"flex",height:"40px",alignItems:"center",cursor:"grab",color:"icons.close",userSelect:"none",bg:"popupBg"},k={fontSize:"12px",flexDirection:"column",justifyContent:"center",minWidth:"100px",padding:"3px 4px 4px 4px",maxWidth:"150px",textAlign:"center",".amount":{"div.bn-input-tooltip":{bottom:"47px",width:"fit-content",left:"50%",transform:"translateX(-50%)","& .bn-input-tooltip-arrow":{left:"50%"},"& .bn-input-tooltip-content":{p:"7px 12px",width:"fit-content",whiteSpace:"nowrap"}},"div:not(.bn-input-tooltip):not(.bn-input-tooltip-arrow):not(.bn-input-tooltip-content)":{border:"none",margin:"0",height:"20px",input:{fontSize:"12px",textAlign:"center"}},".bn-input-prefix":{display:"none"}},"div:first-of-type":{color:"t.secondary"},input:{minWidth:"80px",maxWidth:"100px",width:"auto",bg:"popupBg",color:"t.primary"}},P={userSelect:"none",minWidth:"16px",width:"16px",height:"40px",justifyContent:"center",display:"flex",alignItems:"center",bg:"popupBg",".icon":{cursor:"pointer",flexShrink:0,color:"icons.close","&:hover":{color:"primary"}}};var T=n().createElement;const C=({positionDirection:e,type:t="bid",handleClick:r=(()=>{}),dispatch:a=(()=>{})})=>{const{BuyText:n,SellText:s}=(0,f.x_)(e);let c,u,d,m,p=l.PR.BOTH;const{bidPrice:y,askPrice:h}=(0,f.he)(),{positionMode:v}=(0,f.F7)();"bid"===t?(u=n,d=h,c="buy-button",m=1,v&&(e===l.RS.OPEN?p=l.PR.LONG:e===l.RS.CLOSE&&(p=l.PR.SHORT))):(u=s,d=y,c="sell-button",m=-1,v&&(e===l.RS.OPEN?p=l.PR.SHORT:e===l.RS.CLOSE&&(p=l.PR.LONG)));const x=(0,i.useCallback)((e=>{e.preventDefault(),a({type:g.z,payload:{side:m,positionSide:p}}),r(!0)}),[p,a,m,r]);return(0,i.useMemo)((()=>T(o.Z,{onClick:x,sx:b,className:c},T("div",{className:"title"},u),T("div",{className:"text"},d))),[x,c,u,d])};var w=r("4m5F"),I=r("GpFh"),M=r("Bb2c"),E=r("O94r"),N=r.n(E),Z=r("BzR9"),A=r("kjyE"),O=n().createElement;const R=/^\d+\.?\d*|%$/,V=/^0+(?=\d)/,L=e=>{let{name:t,value:r,error:a,disabled:n=!1,precision:o,errorText:l,infoText:c,placeholder:u,onChange:d,maxLength:m,autoZero:p=!1,onFocus:f,onBlur:g}=e,y=(0,I.Z)(e,["name","value","error","disabled","precision","errorText","infoText","placeholder","onChange","maxLength","autoZero","onFocus","onBlur"]);const h="rtl"===(0,s.gm)()?N()(Z.Z["alb-text-align"]):"",b=(0,i.useCallback)((e=>{let t=e.target.value;if(!0===p&&"string"===typeof t&&0===t.indexOf(".")&&(t=`0${t}`),!R.test(t)&&""!==t||isNaN(t))return void e.stopPropagation();t=t.replace(V,"");(0,A.N3)(t)>o&&(t=t.replace(new RegExp(`^(\\d*\\.\\d{${o}})\\d*`),"$1")),m&&t.split(".")[0].length>m&&(t=r),0===o&&(t=t.replace(".","")),d&&(t=d(t)),e.target.value=t}),[d,m,o,r,p]),v=(0,i.useCallback)((e=>{const t=e.target.value;R.test(t)||(e.target.value=""),null===g||void 0===g||g(e)}),[g]),x=(0,i.useCallback)((e=>{e.target.value||(e.target.value="")}),[]);return O(M.Z,Object.assign({name:t,variant:"inline",className:h,type:"text",value:r,placeholder:u,disabled:n,onClick:x,onChange:b,onBlur:v,onFocus:f,error:a,infoText:c,errorText:l},y))},F=n().memo(L);var D=n().createElement;const _=({submitError:e,quantity:t="",setQuantity:r,dispatch:a,onFocus:n})=>{const{getI18n:s}=(0,f.yk)(),[l]=(0,f.eY)(),{cUnit:c,precision:u,helperText:d,ticker:m,minContQty:p,placeholder:y,buyCont:h,buyQty:b,sellCont:v,sellQty:x}=(0,f.ql)({quantity:t}),{minQty:S}=m,P=`${s("quantity")} (${c})`;return(0,i.useEffect)((()=>{a({type:g.z,payload:{minContQty:p,buyQty:b,sellQty:x,buyCont:h,sellCont:v}})}),[t,p,l]),D(o.Z,{sx:k},D("div",null,P),D("div",{className:"amount"},D(F,{id:"flashOrderQuantity",min:S,step:S,precision:u,value:t,placeholder:y,maxLength:w.ze,error:Boolean(e),errorText:e,infoText:d,autoZero:!0,onChange:r,onFocus:n})))};var z=r("Uqe+"),B=r("g28e"),K=r("v5rq"),q=r("AHTf"),W=n().createElement;const H={l:15,t:15,b:q.sk?0:window.innerHeight-55,r:q.sk?0:window.innerWidth-340},U={l:15,t:250},j=({children:e,visible:t,draggableRef:r})=>{const{isIPad:n}=(0,s.Fs)(),[l,c]=(0,z.Z)("flash-order-position",U),u=(0,B.Z)(l),d=(0,i.useRef)(!0),m=(0,i.useRef)(!1),p=(0,K.xG)((e=>e.setDisableMouse)),f=(0,i.useCallback)((()=>{m.current=!0,p(!0)}),[p]);(0,i.useEffect)((()=>{var e,t;return null===(e=r.current)||void 0===e||e.addEventListener("mousedown",f),null===(t=r.current)||void 0===t||t.addEventListener("touchstart",f),()=>{const{current:e}=r;null===e||void 0===e||e.removeEventListener("mousedown",f),null===e||void 0===e||e.removeEventListener("touchstart",f)}}),[r,f]);const g=(0,i.useCallback)((e=>{e.preventDefault(),m.current=!1,p(!1)}),[p]),y=(0,i.useCallback)((e=>{setTimeout((()=>{if(e.preventDefault(),!m.current)return;if(n){const t=window.innerWidth-e.changedTouches[0].clientX,r=window.innerWidth-e.changedTouches[0].clientY;return c({l:Math.min(H.r,Math.max(t,H.l)),t:Math.min(H.b,Math.max(r,H.t))})}const{movementX:t,movementY:r}=e,a=u.current;if(!a)return;const{l:i,t:o}=a,s=i+t,l=o+r;c({l:Math.min(H.r,Math.max(s,H.l)),t:Math.min(H.b,Math.max(l,H.t))})}),15)}),[c,n,u]);return(0,i.useEffect)((()=>{if(d.current)return window.addEventListener(n?"touchmove":"mousemove",y),window.addEventListener(n?"touchend":"mouseup",g),d.current=!1,()=>{window.removeEventListener(n?"touchmove":"mousemove",y),window.removeEventListener(n?"touchend":"mouseup",g)}}),[g,y,n]),W(o.Z,{className:""+(t?"":"drag-hide"),sx:(0,a.Z)((0,a.Z)({},x),{},{transform:`translate(${l?Math.max(l.l,H.l):U.l}px, ${l?Math.max(l.t,H.t):U.t}px)`})},e)},$=({draggableRef:e})=>(0,i.useMemo)((()=>W(o.Z,{ref:e,sx:S},W("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},W("rect",{width:"2",height:"2",fill:"currentColor"}),W("rect",{y:"5",width:"2",height:"2",fill:"currentColor"}),W("rect",{y:"10",width:"2",height:"2",fill:"currentColor"}),W("rect",{x:"4",width:"2",height:"2",fill:"currentColor"}),W("rect",{x:"4",y:"5",width:"2",height:"2",fill:"currentColor"}),W("rect",{x:"4",y:"10",width:"2",height:"2",fill:"currentColor"})))),[e]),G=n().memo(j);var J=r("KM4q"),Y=n().createElement;const Q=({onRemove:e})=>Y(o.Z,{sx:P},Y(J.Z,{className:"icon",size:8,onClick:e}));var X=r("OV9X"),ee=r("4xt1"),te=n().createElement;const re=[25,50,75,100],ae=({onClose:e,onChange:t,percent:r,setPercent:a,precision:n})=>{const{curMaxBuyAmount:s,curMaxSellAmount:l,cUnit:c,unitAmountPrecision:u}=(0,f._k)(),d=(0,i.useMemo)((()=>(0,ee.Jp)((0,ee.Jp)(r/100,s).toFixed(u,1),1).toFixed(n,1)),[u,r,n]),m=(0,i.useMemo)((()=>(0,ee.Jp)((0,ee.Jp)(r/100,l).toFixed(u,1),1).toFixed(n,1)),[u,r,n]),p=(0,i.useCallback)((i=>{var n;const o=+(null===(n=i.currentTarget.dataset)||void 0===n?void 0:n.stepper);o!==r?(a(o),null===t||void 0===t||t(o)):null===e||void 0===e||e()}),[t,e,r,a]);return te(o.Z,{sx:v},te(o.Z,{className:"position-value",justifyContent:"flex-end"},r?te(X.Z,null,d,"\xa0",c):null),te(o.Z,{mx:"6px"},re.map((e=>te(o.Z,{key:e,"data-stepper":e,onClick:p,className:r>=e?"container active":"container"},te(o.Z,{className:"stepper"}),te(X.Z,{className:"value"},e,"%"))))),te(o.Z,{className:"position-value",justifyContent:"flex-start"},r?te(X.Z,null,m,"\xa0",c):null))},ie=n().memo(ae);var ne=n().createElement;const oe=()=>{const{0:e,1:t}=(0,i.useState)(""),[r]=(0,f.hN)(),{0:n,1:y}=(0,i.useState)(!1),{0:h,1:b}=(0,i.useState)(""),{0:v,1:x}=(0,i.useState)(!1),S=(0,i.useRef)(null),k=(0,i.useRef)(null),{0:P,1:T}=(0,i.useState)(0),w=(0,s._n)(),{isExistFutureAccount:I}=(0,s.Pc)(),{placeOrderReducer:M}=(0,f.b9)(),[E,[N,Z]]=(0,s.z4)(),A=(0,s.j2)(),{marginAsset:O}=A,{0:R,1:V}=(0,i.useReducer)(M,{isFetching:!1,tradeCont:0,buyCont:0,buyQty:0,sellCont:0,sellQty:0,side:1,positionSide:l.PR.LONG}),{precision:L}=(0,f.ql)({quantity:e}),F=(0,i.useCallback)((()=>{t(""),T(0),x(!1),b("")}),[]),{side:D,tradeCont:z}=R,B=r?l.RS.OPEN:l.RS.BOTH,K=1===D?p.hp.BUY:p.hp.SELL,[,q]=(0,f.e5)(),W=(0,i.useCallback)((()=>{q(!1)}),[q]),{setMessageInfo:H}=(0,s.YT)(),U=(0,f.h5)(),j=(0,m.F)({afterSubmit:F,overrides:{positionDirection:B,timeInForce:p.rb.GTC,orderType:l.Jm.MARKET,reduceOnly:!1}});return(0,i.useEffect)((()=>{if(n){const{valid:t,message:r}=U(+z);if(!t)return b(r),H({message:r,variant:"error"}),void y(!1);j((0,a.Z)((0,a.Z)({},c.U),{},{buyOrderAmount:+z,sellOrderAmount:+z,side:K,unitAmount:e})),y(!1)}}),[j,K,e,z,n]),(0,i.useEffect)((function(){F()}),[E,F]),(0,i.useEffect)((function(){b("")}),[e]),ne(G,{visible:!0,draggableRef:S},ne(o.Z,{sx:{flexDirection:"column"}},ne(o.Z,{justifyContent:"center"},ne($,{draggableRef:S}),ne(o.Z,{height:"40px",justifyContent:"stretch",bg:"popupBg",sx:{position:"relative"}},ne(u.ZP,{isExistFutureAccount:I,isLoggedIn:w,sz:"small",bg:"popupBg"}),ne(C,{positionDirection:B,handleClick:()=>{V({type:g.z,payload:{tradeCont:(null===R||void 0===R?void 0:R.buyCont)||(null===R||void 0===R?void 0:R.buyQty)}}),y(!0)},type:"bid",dispatch:V}),ne(_,{quantity:e,setQuantity:e=>{v&&!~e.indexOf("%")&&T(0),t(e)},dispatch:V,onFocus:()=>x(!0),submitError:h}),ne(C,{positionDirection:B,handleClick:()=>{V({type:g.z,payload:{tradeCont:(null===R||void 0===R?void 0:R.sellCont)||(null===R||void 0===R?void 0:R.sellQty)}}),y(!0)},type:"ask",dispatch:V})),ne(Q,{onRemove:W})),v&&ne(ie,{percent:P,setPercent:T,precision:L,onChange:e=>{t(`${e}%`)},onClose:()=>{x(!1),T(0),t("")}})),ne(d.Z,{symbol:E,base:N,quote:Z,ticker:A,ref:k,marginAsset:O}))};function se(){const e=(0,s.Pc)(),{isExistFutureAccount:t}=e,{isLoggedIn:r}=(0,s.f0)(),[a]=(0,f.e5)();return(0,i.useMemo)((()=>t&&r&&a?ne(oe,null):null),[a,t,r])}},"/Lmb":(e,t,r)=>{"use strict";var a=r("/SIk"),i=r.n(a),n=(r("Vg22"),r("sZZk"),r("kZs2"));r("pVAJ"),r("AHTf"),r("z+x3"),r("Gbz3"),i().createElement;(0,n._x)((()=>Promise.all([r.e(712),r.e(335)]).then(r.bind(r,"2TMS")))),(0,n._x)((()=>Promise.all([r.e(712),r.e(340)]).then(r.bind(r,"LPVO"))))},OjEc:(e,t,r)=>{"use strict";r.d(t,{mA:()=>u,JO:()=>d,ZP:()=>m,yK:()=>p});var a=r("AHTf"),i=r("pVAJ"),n=r("XhNN"),o=r("lCLP"),s=r("0YXG"),l=r("/SIk"),c=r.n(l)().createElement;const u="INDEX_SYMBOL",d=({isChina:e,cnDoc:t,enDoc:r})=>{const i=e?`${a.$g}${t}`:`${a.$g}${r}`;window.open(i)};function m({config:e={},sx:t={}}={}){const r=(0,i.hd)();return(0,l.useMemo)((()=>{const{underlyingType:a,cnDoc:i,enDoc:s}=e;return"INDEX"===a?c(n.Z,{className:u,sx:t,onClick:e=>{e.preventDefault(),d({isChina:r,cnDoc:i,enDoc:s})}},c(o.Z,{color:"t.yellow200",size:15,sx:{cursor:"pointer"}})):null}),[e,r,t])}const p=({url:e})=>(0,l.useMemo)((()=>e?c(n.Z,{onClick:t=>{t.preventDefault(),window.open(e,"_blank")},sx:{background:"rgba(240, 185, 11, 0.15)",borderRadius:"2px",ml:"2px"}},c(s.Z,{fontSize:"14px",color:"t.yellow"})):null),[e])},"/7dI":(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var a=r("/SIk"),i=r.n(a),n=r("GuU3"),o=r.n(n),s=r("/MJE"),l=r("0MIW"),c=r("d92h"),u=r("6u/I"),d=r("v5rq"),m=r("WBfh"),p=r("pVAJ"),f=r("I/SI"),g=r("5vwO"),y=r("alyV"),h=r("t3Ex"),b=r("kZs2");const v=["5m","15m","30m","1h","2h","4h","6h","12h","1d"],x=({symbol:{pair:e},period:t})=>({symbol:e,period:t,limit:500}),S=(0,g.Z)((0,g.Z)({},(0,h.r)({availableIntervals:v,transform:e=>e.map((({timestamp:e,sumOpenInterest:t,sumOpenInterestValue:r})=>({time:e,sum:+t,sumValue:+r}))),makeRequest:e=>async()=>(0,y.K$)(x(e))})),{},{defaultProps:{id:"@OI-UM",title:"O.I",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,sumValue:t})=>({time:e,value:t})));r([{data:e.map((({time:e,sum:t})=>({time:e,value:t}))),chartType:"BAR",color:"@OI-UM.bar.color"},{data:a,chartType:"LINE",color:"@OI-UM.nv.color",lineWidth:"@OI-UM.nv.lineWidth",yAxisIndex:"oiValue"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Open Interest"},{key:"oi-value",label:`${(0,b.XR)((0,h.W)(e,r),2)}`,styles:{color:"@OI-UM.bar.color"}},{key:"noi-text",label:"Notional Value of Open Interest"},{key:"noi-value",label:`${(0,b.XR)((0,h.W)(e,a),2)}`,styles:{color:"@OI-UM.nv.color"}}]},getMobileLabel:()=>[{key:"title",label:"Open Interest"}]}),k=(0,g.Z)((0,g.Z)({},(0,h.r)({availableIntervals:v,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,y.Zc)(x(e))})),{},{defaultProps:{id:"@LS-Acco",title:"L.S Acco.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"candle.upBarColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!1},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"candle.downBarColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!1},{data:a,chartType:"LINE",color:"@LS-Acco.color",lineWidth:"@LS-Acco.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Account Ratio"},{key:"ratio-value",label:`${(0,b.JX)((0,h.W)(e,i),2)}`,styles:{color:"@LS-Acco.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,b.JX)(100*(0,h.W)(e,r),2)}%`,styles:{color:"candle.upBarColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,b.JX)(100*(0,h.W)(e,a),2)}%`,styles:{color:"candle.downBarColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Account Ratio"}]}),P=(0,g.Z)((0,g.Z)({},(0,h.r)({availableIntervals:v,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,y.mk)(x(e))})),{},{defaultProps:{id:"@LS-Posit",title:"L.S Posit.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"candle.upBarColor",yAxisIndex:"bar",name:"bar",min:0,max:1,visible:!1},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"candle.downBarColor",yAxisIndex:"bar",stack:"bar",min:0,max:1,visible:!1},{data:a,chartType:"LINE",color:"@LS-Posit.color",lineWidth:"@LS-Posit.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Position Ratio"},{key:"ratio-value",label:`${(0,b.JX)((0,h.W)(e,i),2)}`,styles:{color:"@LS-Posit.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,b.JX)(100*(0,h.W)(e,r),2)}%`,styles:{color:"candle.upBarColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,b.JX)(100*(0,h.W)(e,a),2)}%`,styles:{color:"candle.downBarColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Position Ratio"}]}),T=(0,g.Z)((0,g.Z)({},(0,h.r)({availableIntervals:v,transform:e=>e.map((({timestamp:e,longAccount:t,shortAccount:r,longShortRatio:a})=>({time:e,long:+t,short:+r,longShortRatio:+a}))),makeRequest:e=>async()=>(0,y._K)(x(e))})),{},{defaultProps:{id:"@LS-Ratio",title:"L.S Ratio",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0},getResult(e,t,r){const a=e.map((({time:e,longShortRatio:t})=>({time:e,value:t})));r([{data:e.map((({time:e,long:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"candle.upBarColor",yAxisIndex:"bar1",name:"bar1",min:0,max:1,visible:!1},{data:e.map((({time:e,short:t})=>({time:e,value:t}))),chartType:"BAR",color:"candle.downBarColor",yAxisIndex:"bar1",stack:"bar1",min:0,max:1,visible:!1},{data:a,chartType:"LINE",color:"@LS-Ratio.color",lineWidth:"@LS-Ratio.lineWidth"},{data:a,chartType:"AREA",color:"LSratio.area"}])},getLabel(e,t){const[{data:r}={},{data:a}={},{data:i}={}]=t;return[{key:"title",label:"Long/Short Ratio"},{key:"ratio-value",label:`${(0,b.JX)((0,h.W)(e,i),2)}`,styles:{color:"@LS-Ratio.color"}},{key:"long-text",label:"Long"},{key:"long-value",label:`${(0,b.JX)(100*(0,h.W)(e,r),2)}%`,styles:{color:"candle.upBarColor"}},{key:"short-text",label:"Short"},{key:"short-value",label:`${(0,b.JX)(100*(0,h.W)(e,a),2)}%`,styles:{color:"candle.downBarColor"}}]},getMobileLabel:()=>[{key:"title",label:"Long/Short Ratio"}]}),C=(0,g.Z)((0,g.Z)({},(0,h.r)({availableIntervals:v,transform:e=>e.map((({timestamp:e,buyVol:t,sellVol:r,buySellRatio:a})=>({time:e,buy:+t,sell:+r,buySellRatio:+a}))),makeRequest:e=>async()=>(0,y.eq)(x(e))})),{},{defaultProps:{id:"@BSVol",title:"B.S Vol.",isHistBase:!1,isScaleCenter:!0,isDiffSource:!0,barWeight:.5},getResult(e,t,r){r([{data:e.map((({time:e,buy:t})=>({time:e,value:t}))),chartType:"BAR",color:"BS.buy"},{data:e.map((({time:e,sell:t},r)=>({time:e,value:t}))),chartType:"BAR",color:"BS.sell",yAxisIndex:"bar"}])},getLabel(e,t){const[{data:r}={},{data:a}={}]=t;return[{key:"title",label:"Taker Buy/Sell Volume"},{key:"buy-text",label:"Buy"},{key:"buy-value",label:`${(0,b.XR)((0,h.W)(e,r),2)}`,styles:{color:"candle.upBarColor"}},{key:"sell-text",label:"Sell"},{key:"sell-value",label:`${(0,b.XR)((0,h.W)(e,a),2)}`,styles:{color:"candle.downBarColor"}}]},getMobileLabel:()=>[{key:"title",label:"Taker Buy/Sell Volume"}]});var w=i().createElement;const I=[{name:S.defaultProps.id,indicator:S},{name:k.defaultProps.id,indicator:k},{name:P.defaultProps.id,indicator:P},{name:T.defaultProps.id,indicator:T},{name:C.defaultProps.id,indicator:C}],{storage:M}=s.Z,E=({symbol:e,namespace:t,showTradingView:r,useMiniTicker:n,isShowDrawPanel:s,isShowAnnotationPanel:g,candleRef:y})=>{const h=(0,a.useMemo)((()=>o().createInstance({name:t})),[t]),{0:b,1:v}=(0,a.useState)(1),{0:x,1:S}=(0,a.useState)(1),{0:k,1:P}=(0,a.useState)(!1),{0:T,1:C}=(0,a.useState)(!1),{0:E,1:N}=(0,a.useState)(0),{0:Z,1:A}=(0,a.useState)(!1),O=(0,a.useRef)(!0),R=(0,a.useRef)(),V=(0,d.H9)(t)(m.Hs),L=(0,d.Qy)(t)(m.VW),[F]=(0,d.kH)(t)(m.J$),[,D]=(0,d.gq)(t)(m.gW),_=(0,p.Vh)()[e],{pair:z="",contractType:B="",isDelivery:K}=_||{};(0,a.useEffect)((()=>{const e=()=>{N(Date.now()),S((e=>-1*e)),v((e=>-1*e))};return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}}),[]),(0,a.useEffect)((()=>{M.onStorageEvent((({key:e,newValue:t,oldValue:r})=>{"customIndicatorPassFilesTime"!==e&&"customIndicatorPassFiles"!==e||t===r||v((e=>-1*e))}))}),[]),(0,a.useEffect)((()=>(V===u.vm.tradingView&&O.current&&(O.current=!1),V===u.vm.tradingView?(C(!1),clearTimeout(R.current),R.current=window.setTimeout(P,6e5,!0),Z&&(N(Date.now()),A(!1))):V===u.vm.basic?(P(!1),clearTimeout(R.current),R.current=window.setTimeout(C,6e5,!0),Z&&(S((e=>-1*e)),A(!1))):V===u.vm.depth&&(clearTimeout(R.current),R.current=window.setTimeout((()=>{P(!0),C(!0),A(!0)}),6e5)),()=>{clearTimeout(R.current)})),[V]);const q=(0,a.useCallback)((()=>{setTimeout((()=>{var e;const t=null===y||void 0===y||null===(e=y.current)||void 0===e?void 0:e.getCandlestick(),r=null===t||void 0===t?void 0:t.getCurrentItemByTime(Date.now()),a=(null===t||void 0===t?void 0:t.getSeriesData())||[];D([r,a[a.length-2]])}),0)}),[D,y]),W=(0,a.useMemo)((()=>(0,f.B)()),[E]),H=(0,a.useMemo)((()=>W({symbol:e,pair:z,contractType:B,interval:L,priceType:F,useMiniTicker:n,isDelivery:K,onNewDataArrived:q,disconnectCallback:()=>v((e=>-1*e))})),[W,e,z,B,L,F,K,n,q]);(0,p.M9)(e,n,"UM"),(0,p.jT)({pair:z,symbol:e,contractType:B,interval:L,business:"UM",priceType:F}),(0,a.useEffect)((()=>{v((e=>-1*e)),V===u.vm.tradingView?S((e=>-1*e)):C(!0)}),[F]);const U=(0,a.useMemo)((()=>({pair:z,contractType:B})),[z,B]);return e&&L&&B&&z?w(i().Fragment,null,k?null:w(c.Z,{key:`bk-${b}`,symbol:U,storeSymbol:e,namespace:t,customIndicators:I,isShowDrawPanel:s,isShowAnnotationPanel:g,candleRef:y,dataProvider:H}),O.current&&V!==u.vm.tradingView||!r||T?null:w(l.Z,{key:`tv-${x}`,symbol:e,storage:h,namespace:t,useMiniTicker:n})):null}},T50r:(e,t,r)=>{"use strict";r.d(t,{q1:()=>n,oH:()=>o,fb:()=>s});var a=r("5vwO"),i=r("/Kmz");const n=()=>(0,a.Z)((0,a.Z)({},i.O),{},{overflow:"hidden",display:"grid",width:"100vw",minHeight:"100vh",gridGap:"1px",gridTemplateColumns:"minmax(0px, auto) 1fr 280px 288px",gridTemplateRows:"minmax(64px, auto) 1.1fr auto 289px",gridTemplateAreas:'"header header header header"\n    "chart chart orderbook trades"\n    "chart chart orderform orderform"\n    "assets userinfo orderform orderform"'}),o=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100%",gridTemplateRows:"100%",gridTemplateAreas:'"chart"',overflow:"hidden"}),s=(0,a.Z)((0,a.Z)({},i.O),{},{gridTemplateColumns:"100vw",gridTemplateRows:"100vh",gridTemplateAreas:'"content"',overflow:"hidden"})},rK1x:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("pVAJ"),s=r("6u/I"),l=r("v5rq"),c=r("WBfh"),u=r("HEA0"),d=r("eGLs"),m=i().createElement;const p=e=>{const[t]=(0,l.PH)(s.A4)(c._9),{isMobile:r}=(0,o.Fs)();return r?m(d.Z,e):t===n.k.Dropdowns.MultiChartDropdownType.Four?m(u.e,{singleChartNamespace:e.namespace,multiChartNamespace:s.A4,onRemove:e.onRemove,isPro:e.isPro}):m(d.Z,e)}},"7KZG":(e,t,r)=>{"use strict";r.d(t,{Lx:()=>u,DT:()=>m,Et:()=>f,Uv:()=>y});var a=r("/SIk"),i=r.n(a),n=r("RfYP"),o=r("8Y2u"),s=r("869M"),l=i().createElement;const c=i().memo((({active:e,i18nKey:t="trd-layout-tabPositions"})=>{const r=(0,o.kD)();return l(n.KP,{i18nKey:t,defaultValue:"Positions",active:e,testId:"Positions",suffix:`(${r})`})})),u=e=>l(c,{active:e}),d=i().memo((({active:e,i18nKey:t="trd-layout-tabTransactionHistory"})=>l(n.KP,{i18nKey:t,defaultValue:"Transaction History",active:e,testId:"transactionHistory"}))),m=e=>l(d,{active:e}),p=i().memo((({active:e,i18nKey:t="trd-layout-tabAssets"})=>l(n.KP,{i18nKey:t,defaultValue:"Assets",active:e,testId:"assetsTableTitle"}))),f=e=>l(p,{active:e}),g=i().memo((({active:e})=>{const{getI18n:t}=(0,s.yk)(),r=t("tradeHistory-APIKeyLabel",{defaultValue:"API Key"});return l(n.KP,{i18nKey:"futures-trade-tradeHistory-APIKeyLabel",defaultValue:r,active:e,testId:"apiTableTitle"})})),y=e=>l(g,{active:e})},"4toX":(e,t,r)=>{"use strict";r.d(t,{MY:()=>oe,wK:()=>ee,P_:()=>Y,sb:()=>ie,k3:()=>X,tW:()=>ne,sN:()=>J,kc:()=>re,cE:()=>Q,SJ:()=>G,Eu:()=>te});var a=r("6u/I"),i=r("a9vC"),n=r("pVAJ"),o=r("UIpo"),s=(r("z+x3"),r("JwA9")),l=(r("96Xb"),r("LxGj")),c=r("CWkv"),u=r("6C5I"),d=r("6Afj"),m=r("BRtp"),p=r("/SIk"),f=r.n(p),g=r("Vg22"),y=r("m+kj"),h=r("SLNl"),b=r("Q9ZO"),v=r("gDJg"),x=(r("gNzA"),r("zgli")),S=(r("Qkkg"),r("/Lmb"),r("5vwO")),k=r("XhNN"),P=r("PMF4"),T=r("zZ5f"),C=r("RfYP"),w=r("h00H"),I=r("FOuV"),M=r("7KZG"),E=f().createElement;const N=({sx:e={},testId:t,children:r})=>E(k.Z,{"data-testid":t,sx:(0,S.Z)({width:"100%",height:"100%"},e)},r),Z=f().lazy((()=>Promise.all([r.e(374),r.e(712),r.e(606)]).then(r.bind(r,"7cvD")))),A=f().lazy((()=>r.e(870).then(r.bind(r,"pVqC")))),O=f().lazy((()=>Promise.all([r.e(374),r.e(806)]).then(r.bind(r,"HX21")))),R=f().lazy((()=>Promise.all([r.e(374),r.e(196)]).then(r.bind(r,"m4or")))),V=f().lazy((()=>Promise.all([r.e(374),r.e(712),r.e(40)]).then(r.bind(r,"r8hx")))),L=f().lazy((()=>r.e(557).then(r.bind(r,"GWgF")))),F=[[M.Lx,E(N,{testId:"positionTableInfo",key:"futuresPosition"},E(P.u,null,E(w.Z,null)))],[C.rr,E(N,{testId:"openOrdersTableInfo",key:"futuresOpenOrder"},E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(Z,null))))],[C.S9,E(N,{testId:"orderHistoryTableInfo",key:"futuresOrderHistory"},E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(A,null))))],[C.Tc,E(N,{testId:"tradeHistoryTableInfo",key:"futuresTradeHistory"},E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(O,null))))],[M.DT,E(N,{testId:"transactionHistoryTableInfo",key:"futuresTransactionHistory"},E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(R,null))))],[M.Et,E(N,{testId:"assetsTableInfo",key:"futuresAssets"},E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(V,null))))]];I.Jg&&F.push([M.Uv,E(P.u,null,E(p.Suspense,{fallback:E(T.Z,null)},E(L,{key:"APIKeyPanel"})))]);var D=f().createElement;(0,d.SA)((()=>Promise.all([r.e(712),r.e(34)]).then(r.bind(r,"OhiR"))));const _=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(282)]).then(r.bind(r,"rK1x")))),z=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(305)]).then(r.bind(r,"GnZy")))),B=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(175)]).then(r.bind(r,"X2Id")))),K=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(682)]).then(r.bind(r,"yU+F")))),q=(0,d.SA)((()=>r.e(712).then(r.bind(r,"+Eiz")))),W=(0,d.SA)((()=>r.e(712).then(r.bind(r,"F4Cb")))),H=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(791)]).then(r.bind(r,"5G2b")))),U=(0,d.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(726)]).then(r.bind(r,"4PCx")))),j=(0,d.ck)("afterLogin",(()=>Promise.all([r.e(374),r.e(712),r.e(285)]).then(r.bind(r,"tXWo")))),$=((0,d.ck)("afterLogin",(()=>Promise.all([r.e(374),r.e(712),r.e(285)]).then(r.bind(r,"X4vm")))),(0,d.ck)("afterLogin",(()=>Promise.all([r.e(374),r.e(712),r.e(285)]).then(r.bind(r,"wkn/")))),(0,d.ck)("afterLogin",(()=>Promise.all([r.e(374),r.e(712),r.e(285)]).then(r.bind(r,"Vnoa"))))),G=(0,p.memo)((()=>D(ae,null))),J=(0,p.memo)((({isMarketChange:e,w:t})=>D(s.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"market"},name:"market"},D(U,{isGridWidget:!0,isMarketChange:e,w:t})))),Y=(0,p.memo)((({onRemove:e,isElectronPro:t=!1,isPro:r})=>{const i=(0,n.j2)(),[o]=(0,n.z4)(),l=(0,g.useSelector)(u.Xj);return D(c.Z,{type:"CHART_LOADED",condition:()=>!!document.querySelector('div[data-testid="kline-trace"]')},D(s.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"chart"},name:"chart"},D(_,{symbol:o,tickSize:i.tickSize,isDelivery:!1,currentProduct:i,useMiniTicker:!1,showTradingView:!0,namespace:a.sy,height:void 0,tabKeys:[a.vm.basic,a.vm.tradingView,a.vm.depth],onRemove:e,headerSlot:null,showFullscreenIcon:!0,showMultiChartDropdown:!l,isPro:r||t})))})),Q=(0,p.memo)((({type:e})=>{const t=()=>{const e=document.querySelector('div[name="orderForm"]')||document.querySelector('div[name="horizontalOrderForm"');return!!e&&Boolean(e.querySelector("button#buy")||e.querySelector('div[data-testid="register-and-login-buttons"]'))},r=(0,n._n)(),{isExistFutureAccount:a}=(0,n.Pc)(),{isMobile:i}=(0,n.Fs)();return e===b.C.FullScreen||e===b.C.Horizontal?D(c.Z,{type:"FULL_SCREEN_ORDER_FORM_LOADED",condition:t},D(s.Z,{sx:{width:"100%",position:"relative",height:"100%",bg:"popupBg",gridArea:"orderform",overflowY:e===b.C.Horizontal?"scroll":"auto",overflowX:"hidden"},name:"horizontalOrderForm"},D(y.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),D(l.a,null),D(K,{type:e}),r&&!i&&D($,null))):D(c.Z,{type:"ORDER_FORM_LOADED",condition:t},D(s.Z,{sx:{width:"100%",overflowY:["initial","scroll"],overflowX:["visible","hidden"],position:["fixed","relative"],bottom:["0"],height:["72px","100%","100%"],bg:"popupBg",gridArea:"orderform"},name:"orderForm"},D(y.ZP,{isLoggedIn:r,isExistFutureAccount:a,bg:i?"popupBg":void 0,sz:i?"small":void 0}),D(K,{type:e}),r&&!i&&D($,null)))})),X=(0,p.memo)((({onRemove:e})=>{const{isMobile:t,isIPad:r}=(0,n.Fs)(),a=t||r?D(j,null):null;return D(c.Z,{type:"POSITION_LOADED",condition:()=>!!document.querySelector('div[data-testid="positionTableInfo"]')},D(v.G,null),D(o.oZ,{area:"userinfo",onRemove:e,panes:F,extra:a}))})),ee=(0,p.memo)((()=>{const e=(0,n._n)(),{0:t,1:r}=(0,p.useState)(!1);return e?D(s.Z,{sx:{width:t?"260px":"24px",position:"relative",zIndex:1,height:"100%",bg:"moduleBg",gridArea:"assets"},name:"assets"},t?D("div",{style:{padding:"12px 16px"}},D(h.Z,{handleShowAssets:()=>r(!1)})):D("div",{style:{height:"100%",width:"24px",paddingTop:"16px",paddingLeft:"2px"}},D(m.Z,{color:"t.grey500",size:20,onClick:()=>r(!0),sx:{cursor:"pointer"}}))):null})),te=(0,p.memo)((({withMb:e=!1})=>D(s.Z,{sx:{width:"100%",height:"100%",pb:e?16:0,bg:"moduleBg",gridArea:"trades"},name:"trades"},D(B,null)))),re=(0,p.memo)((()=>D(s.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"orderbook",position:"relative"},py:"xs",name:"orderbook"},D(z,null)))),ae=()=>D(s.Z,{sx:{width:"100%",height:"100%",gridArea:"subheader"},name:"subheader"},D(x.default,{type:"futures",sx:{height:"100%",bg:"moduleBg",pl:"16px"}},D(i.default,{showRightBorderLine:!0}))),ie=(0,p.memo)((()=>D(H,null))),ne=(0,p.memo)((()=>D(s.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"marginRatio"},name:"marginRatio"},D(q,null)))),oe=(0,p.memo)((()=>D(s.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",gridArea:"assetsCard"},name:"assetsCard"},D(W,null))))},"+Eiz":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var a=r("5vwO"),i=r("Vg22"),n=r("O94r"),o=r.n(n),s=r("5kFy"),l=r("kjyE"),c=r("XhNN"),u=r("X46w"),d=r("9rpF"),m=r("wjiZ"),p=r("OV9X"),f=r("e5RN"),g=r("dcD/"),y=r("/SIk"),h=r.n(y),b=r("fi7b"),v=r("Rhv4"),x=r("4xt1"),S=r("kZs2"),k=r("pVAJ"),P=r("Gbz3"),T=h().createElement;const C={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},w=({children:e})=>T(p.Z,{variant:"body2"},e),I=({visible:e,onClose:t})=>{const r=(0,k.tZ)(),{t:a}=(0,P.$G)(),{getI18n:i}=(0,P.yk)(),n=(()=>{const e=(0,P.G8)(),t=(0,P.KQ)();return(0,y.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return T(v.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},T(f.Z,{__css:C},T(p.Z,{variant:"title6",color:"t.primary"},i("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),T("div",{className:"content"},T("div",{className:"grid cation"},T(w,null,i("joinMargin-Pair",{defaultValue:"Pair"})),T(w,null,i("joinMargin-AskRate",{defaultValue:"Ask Rate"})),T(w,null,i("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),T("div",{className:"rateList"},n.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>T("div",{key:e,className:"grid row"},T(w,null,e.slice(0,-3),"/",e.slice(-3)),T(w,null,(0,x.GW)(t,4)),T(w,null,(0,x.GW)(r,4)))))),T("div",{className:"info updateTime"},"\xb7"," ",i("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",n[0]?(0,S.vs)(n[0].time||0):""," UTC"),T("div",{className:"info"},i("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),T("div",{className:"info link"},T(b.c,{t:a,i18nKey:(0,P.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:T("a",{href:`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:i("joinMargin-guidLink")}})))))},M=h().memo(I);var E=r("iW4m"),N=r("tLXD"),Z=r("Ygfp"),A=r.n(Z),O=r("rdEq");const R={display:"flex",alignItems:"center",justifyContent:"flex-end",mt:"8px",mb:"16px",cursor:"pointer",".margin-ratio-label":{display:"flex",alignItems:"center",color:"t.primary"}},V={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".margin-ratio-option":{padding:"4px 16px",color:"t.primary",fontSize:"12px","&:hover":{bg:"line"},"&.active":{color:"t.yellow"}}};var L=h().createElement;const F=h().memo((({getFutI18n:e})=>L(c.Z,{pb:"16px",pt:"6px"},L(u.Z,{variant:"default",colorStyle:"secondary",sz:"tiny",width:"100%",sx:{fontWeight:"normal",borderRadius:"2px"},onClick:()=>S.TB.emit(S.FP.SHOW_PREFERENCE_PANEL,"am")},e("joinMargin-multi-assets",{defaultValue:"Multi-Assets "}))))),D=h().memo((({selectedOption:e,marginRatioList:t,onChange:r,marginRatioLabel:i})=>{const n=Boolean(null===t||void 0===t?void 0:t.length),{isIPad:s}=(0,k.Fs)();return n?L(c.Z,{sx:(0,a.Z)((0,a.Z)({},R),{},{right:s?"16px":"48px"})},L(d.ZP,{trigger:"hover",enablePortal:!0,overlay:L(c.Z,{sx:V},t.map((t=>L("div",{className:o()({"margin-ratio-option":!0,active:t.key===e}),key:t.key,onClick:()=>{r(t.key)}},t.marginRatioLabel))))},L("div",{className:"margin-ratio-label"},i,L(g.Z,{ml:"4px",color:"t.third",size:16})))):null}),(function(e,t){const{marginRatioLabel:r,marginRatioList:a,setMarginRatioItem:i}=e,{marginRatioLabel:n,marginRatioList:o,setMarginRatioItem:s}=t,l=a.map((e=>e.marginRatioLabel)).join(),c=o.map((e=>e.marginRatioLabel)).join();return r===n&&i===s&&l===c})),_=h().memo((({isRtl:e,isJoinMargin:t,getFutI18n:r,riskRatio:a,maintenanceMargin:n,marginBalance:o,marginAsset:u,marginPrecision:d})=>{const g=(0,k.tZ)(),{t:y}=(0,P.$G)(),{visible:h,onOpen:v,onClose:S}=(0,P.yV)(),T=L(m.Z,{href:`/${g}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,target:"_blank",variant:"secondaryLink",color:"t.yellow"}),C=L(p.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:v}),w=t?r("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):r("tradeHistory-positions-marginRatioTip",{defaultValue:""}),I=t?r("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):r("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),N=t?L(b.c,{t:y,i18nKey:(0,P.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:T,showRate:C},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:r("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:r("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):r("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),Z=t?r("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):r("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),A=t?L(b.c,{t:y,i18nKey:(0,P.Gv)("joinMargin-accountEquityTipV2"),components:{jump:T,showRate:C},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:r("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:r("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):r("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),R=t?r("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):r("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),V=(0,i.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),F=(0,i.useSelector)((e=>e.loading.effects.preference.getAssetMode)),D=V||F;return L(c.Z,null,L(f.Z,{justifyContent:"space-between",alignItems:"center"},L(O.m,{tip:w},I),L(f.Z,{alignItems:"center"},L(s.Z,{riskRatio:a}),L(p.Z,{fontSize:"18px",color:"buy",ml:"10px"},(0,l.JX)(D?0:a,2)||"0.00","%"))),L(f.Z,{sx:{marginTop:"6px",lineHeight:"16px"},justifyContent:"space-between"},L(O.m,{tip:N},Z),L(f.Z,{flexDirection:e?"row-reverse":""},L(p.Z,{color:"t.primary"},(0,x.uf)(D?0:n,d)),"\xa0",L(p.Z,{color:"t.primary"},u))),L(f.Z,{sx:{marginTop:"6px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},L(f.Z,null,L(O.m,{tip:A},R),t&&L(E.Z,{ml:1,size:2,onClick:v,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),L(f.Z,{flexDirection:e?"row-reverse":""},L(p.Z,{color:"t.primary"},(0,x.GW)(D?0:o,d,!0)),"\xa0",L(p.Z,{color:"t.primary"},u))),L(M,{visible:h,onClose:S}))})),z=()=>{var e;const{marginAsset:t}=(0,k.j2)(),r=(0,P.KQ)(),[a]=(0,k.z4)(),i=(0,P.G3)(),{getI18n:n}=(0,P.yk)(),o="rtl"===(0,k.gm)(),{0:s,1:l}=(0,y.useState)(""),{positionMode:u=!1}=(0,P.F7)(),d=(0,P.m)(n,u,i),m=(0,N.Z)(d),p=d.find((e=>e.key===s)),{riskRatio:f=0,marginBalance:g=(null===(e=r[t])||void 0===e?void 0:e.walletBalance)||0,maintenanceMargin:h,marginAsset:b=t,marginRatioLabel:v}=p||{},x=e=>{let t;d.length>0&&(t=d.find((e=>e.symbols.some((e=>e===a)))),e||t||(t=d[0]||{}),t&&l(t.key))};(0,y.useEffect)((()=>{p||x()}),[d.length]),(0,y.useEffect)((()=>{const e=A()(d,m,"key").find((e=>e.symbols.some((e=>e===a))));e&&l(e.key)}),[d.length]),(0,y.useEffect)((()=>{x(!0)}),[a]);return L(c.Z,{fontSize:"12px",display:["none","block"],px:"16px"},L(D,{selectedOption:s,marginRatioLabel:v,marginRatioList:d,onChange:l}),L(_,{isRtl:o,isJoinMargin:!1,getFutI18n:n,riskRatio:f,maintenanceMargin:h,marginBalance:g,marginAsset:b,marginPrecision:4}))},B=()=>{const e=(0,P.G3)(),{getI18n:t}=(0,P.yk)(),r="rtl"===(0,k.gm)(),{riskRatio:a=0,marginBalance:i,maintenanceMargin:n}=(0,P.Nx)(e),o=e?4:2;return L(c.Z,{px:"16px",fontSize:"12px",display:["none","block"]},L(F,{getFutI18n:t}),L(_,{isRtl:r,isJoinMargin:!0,getFutI18n:t,riskRatio:a,maintenanceMargin:n,marginBalance:i,marginAsset:"USD",marginPrecision:o}))},K=()=>{const{assetMode:e}=(0,P.F7)();return L(e?B:z,null)},q=h().memo(K)},"QF/n":(e,t,r)=>{"use strict";r.d(t,{O$:()=>i,QN:()=>n,I_:()=>o,_C:()=>s,Z4:()=>l,E6:()=>c,_V:()=>u,UD:()=>d,mW:()=>m,UC:()=>p,Jw:()=>f,UW:()=>g,Ok:()=>y,Pi:()=>h,X3:()=>b,jQ:()=>v,wC:()=>x});var a=r("pVAJ");const i=40,n="All",o="FAVORITES",s="DELIVERY",l="PERPETUAL",c="BUSD_PERPETUAL",u=[n,l,s],d="USDT-MARIN",m="COIN-MARIN",p="HOT",f=()=>!0,g=e=>e.stopPropagation(),y="STORAGE_MARKET_ACTIVE_TAB",h="STORAGE_MARKET_ACTIVE_SUB_TAB",b={first:{flex:"2 2 0",justifyContent:"flex-start",minWidth:"110px"},second:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},secondHeader:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-start"},third:{flex:"1 1 0",minWidth:"63px",justifyContent:"flex-end"}},v={1e3:{key:"volume",des:"up"},2e3:{key:"volume",des:"down"},3e3:{key:"change",des:"down"},4e3:{key:"change",des:"up"}},x=e=>(0,a.ZK)("trd-market",e)},QqFe:(e,t,r)=>{"use strict";r.d(t,{Pj:()=>y,Mp:()=>b,e:()=>x});var a=r("5vwO"),i=r("AHTf"),n=r("pVAJ"),o=r("kZs2"),s=r("/mDK"),l=r("Qa1J"),c=r("Uqe+"),u=r("/SIk"),d=r("Vg22"),m=r("KUZ0"),p=r("Gbz3"),f=r("QF/n");const g={default:0,descend:Number.MIN_SAFE_INTEGER,ascend:Number.MAX_SAFE_INTEGER},y=()=>{const e=(0,n.AM)(),t=(0,n.j2)(),r=(0,n.vK)(),o=(0,n.hP)(),{baseTicker:c,marketTabs:u}=(0,s.r)(e),{update:d,tickers:m}=(()=>{const{update:e,tickers:t}=(0,l.s)((0,i.BN)()),{tickers:r}=(0,l.s)((0,i.RU)());return{update:e,tickers:(0,a.Z)((0,a.Z)({},t),r)}})(),f=(0,s.A)(c,m),g=(0,p.M6)();return{loading:r,update:[o,d],marketTabs:u,nextTickers:Object.keys(f).reduce(((e,t)=>{const r=f[t];if(g.length){const e=g.filter((e=>e.symbolName===r.symbol));e.length&&(r.activityUrl=e[0].activityUrl,r.rules=e[0].rules)}return e.push(r),e}),[]),activeSymbol:t}},h=(e,t,r="",a=!1)=>e===f.QN||(e===f.Z4?a?t===f.Z4&&"BUSD"!==r.toUpperCase():t===f.Z4:e===f.E6?t===f.Z4&&"BUSD"===r.toUpperCase():t!==f.Z4),b=(e=f.UD,t=[],r=!1)=>{const a=(0,d.useSelector)(m.zO),{favorites:n}=(0,p.ux)(),s=(0,u.useMemo)((()=>(0,i.nM)()),[]),[l,g]=(0,c.Z)(`${f.Ok}_${s?"CM":"UM"}`,e),[y,b]=(0,c.Z)(`${f.Pi}_${s?"CM":"UM"}`,f.QN),{0:v,1:x}=(0,u.useState)(""),S=(0,u.useMemo)((()=>(0,o.JA)(l,f.I_)?e=>{const t=e.isDelivery?n.indexOf(`${e.pair}-${e.contractType}`):n.indexOf(e.symbol);return t>-1&&(e.favoritesIndex=n.length-t),~t}:f.Jw),[l,n]),k=(0,u.useCallback)((e=>{const{isDelivery:t,symbol:a,marginAsset:i,contractType:n,tags:s=[],rules:c}=e||{};if(c){const t=c.filter((e=>e.sectionKey===l));e.ruleNumber=t.length&&t[0].ruleNumber}else e.ruleNumber=0;const u=new RegExp((0,o.hr)(v),"i").test(a);if(v)return u;switch(l){case f.QN:return u;case f.UD:return!t&&h(y,n,i,r);case f.mW:return t&&h(y,n,i,r);case f.I_:return S(e)&&h(y,n,i,r);default:return Array.isArray(s)&&s.includes(l)&&h(y,n,i,r)}}),[y,S,l,v,r]);return(0,u.useEffect)((()=>{a&&(t.concat({sectionKey:f.I_}).filter((e=>e.sectionKey===l)).length||g(e))}),[l,e,a,g,t]),{tabState:{activeTab:l,switchTab:g},searchState:{keyword:v,search:x},subTabState:{activeSubTab:y,switchSubTab:b},filterFunc:k}};let v=[];const x=(e=!0,t,r,i)=>{const n=(0,d.useSelector)((e=>e.futureMarket.sortInfo)),{getI18n:o}=(0,p.yk)(),s=(0,u.useMemo)((()=>{f.UD;return[(0,a.Z)({label:o("Contract",{defaultValue:"Contracts"}),key:"symbol"},f.X3.first),...t?r?[(0,a.Z)({label:o("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},f.X3.secondHeader)]:[]:[(0,a.Z)({label:o("lastPrice",{defaultValue:"Last Price"}),key:"lastPrice"},f.X3.secondHeader)],e?(0,a.Z)({label:o("24h"),key:"difference"},f.X3.third):(0,a.Z)({label:o("vol"),key:"quoteVolume"},f.X3.third)]}),[i,o,e,t,r]),l=(0,u.useMemo)((()=>{const e=Object.keys(n).length?Object.keys(n)[0]:"symbol",t=Object.values(n).length?Object.values(n)[0]:void 0,r=s.filter((t=>t.key===e));if(!e||!r[0])switch(i){case f.I_:return(e,t)=>Number(t.favoritesIndex||0)-Number(e.favoritesIndex||0);case f.mW:return(e,t)=>{if(v.includes(t.baseAsset)||v.push(t.baseAsset),v.includes(e.baseAsset)||v.push(e.baseAsset),e.isDelivery^t.isDelivery)return i===f.mW?-1:1;let r=v.indexOf(e.baseAsset)-v.indexOf(t.baseAsset);return 0===r&&(r=e.symbol.localeCompare(t.symbol)),r};default:return(e,t)=>t.ruleNumber-e.ruleNumber}const a=g[t];return(r,n)=>{let o=a,s=a;if("descend"===t&&(o=r[e],s=n[e]),"ascend"===t&&(o=n[e],s=r[e]),r.isDelivery^n.isDelivery){if(i===f.mW)return-1;if(i===f.UD)return 1}return"symbol"===e&&"default"!==t?o.localeCompare(s):+o-+s}}),[n,i]);return{sortHeaders:s,sortFunc:l}}},"4PCx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ze});var a=r("pVAJ"),i=r("AHTf");const n=({data:e,path:t,metaKey:r,ctrlKey:a,deliveryPath:n})=>{const{symbol:o,symbolDisplay:s,isDelivery:l}=e;let c=!1;const u=n===l;let d="spot";t&&(d=l?"delivery":"futures"),c=/windows|win32/i.test(navigator.userAgent)?a:r;{var m;let r=null===s||void 0===s||null===(m=s.split("/"))||void 0===m?void 0:m.join("_"),a=`binance://trade/spot/${r}${c?"":"?update=true"}`;if("delivery"===d){r=t[t.length-1];const e=!u;a=`binance://trade/quarterly/${r}${c?"":`?update=true&dateSymbol=${o}&refresh=${e}`}`}if("futures"===d){r=t[t.length-1];const n=!u;e.contractType===i.Yp.PERPETUAL&&(r=r.split("_").join("")),a=`binance://trade/perpetual/${r}${c?"":`?update=true&dateSymbol=${o}&refresh=${n}`}`}window.open(a,"_blank")}};var o=r("Uqe+"),s=r("XhNN"),l=r("dUK7"),c=r("kZs2"),u=r("/SIk"),d=r.n(u),m=r("Vg22"),p=r("6xN1"),f=r("Gbz3"),g=r("k7O1"),y=r("4Dm0"),h=r("QF/n"),b=r("kFpN"),v=d().createElement;const x=(0,u.memo)((({group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})=>v(b.Z,{group:e,active:t,getGroupOrderKey:r,showSort:a,renderProps:i})));var S=r("2yOj"),k=d().createElement;const P=({sx:e,value:t,search:r=(()=>!1),openShotCut:a})=>{const i=d().useRef(),{getI18n:n}=(0,h.wC)(),o=n("searchHolder",{defaultValue:"Search"});return(0,u.useEffect)((()=>{a&&setTimeout((()=>{i.current&&i.current.focus()}),100)}),[a]),k(S.Z,{sx:e,value:t,search:r,placeholder:o,ref:i})},T=d().memo(P),C=(0,u.createContext)({activeTab:"",keyword:"",favorite:{values:[],setValues:()=>!1}});var w=r("QqFe"),I=r("bN60"),M=r("OV9X"),E=r("H3O3"),N=r("8Hfj"),Z=r("ph+q"),A=r("U0yl"),O=r("2rU8"),R=r("9rpF"),V=r("e5RN"),L=r("wjiZ"),F=r("9RIL"),D=r("dcev"),_=r("tsUn"),z=r("l4n0"),B=r("OjEc");const K={"& .bn-input-prefix":{ml:"6px",mt:"6px"},"& input":{fontSize:0,mt:"-2px",height:"18px",borderRadius:"4px"},flex:1,mb:"4px",mt:"4px",lineHeight:1.5,height:"24px",border:"none",width:"100%",borderRadius:"4px",bg:"inputBg",position:"static"},q={px:"sm"},W={display:"flex",flexDirection:"column",height:"100%","& .searchWrap":{padding:"0 16px","& .bn-input-suffix":{display:"flex"}},"& .tabListWrap":{display:"flex",justifyContent:"space-between",pt:"8px",pb:"4px",px:["5px","5px","sm"],flexWrap:"wrap",".tabBtn":{display:"flex"},".hot-icon":{marginLeft:"2px",position:"relative",bottom:"1px"},svg:{color:"inherit"}},"& .sortHeaderWrap":{height:"20px",lineHeight:"20px",marginTop:"8px",px:"16px"}},H={boxShadow:"card",bg:"t.grey500",fontSize:0,px:"xs",py:2,borderRadius:"2px",color:"t.grey0",alignItems:"center","& .nextLink":{color:"background",ml:"2px","& .linkIcon":{transform:"scale(1.6)"}},"&::before":{content:"''",position:"absolute",left:"-3px",top:"50%",transform:"rotate(45deg)",mt:"-5px",bg:"t.grey500",width:"10px",height:"10px",borderRadius:"2px"}},U={fontSize:0,color:"t.grey600",fontWeight:"normal"},j={" & .futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%","& .content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},"& .item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px","& .favorite":{pr:"2px",color:"t.grey500","&.primary":{color:"primary"},"& .muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}},$={".market-multiple":{boxSizing:"border-box",px:"1px",height:"14px",fontSize:"12px",lineHeight:"12px",borderRadius:"2px",ml:"4px",fontWeight:"normal",border:"1px solid",color:"multiple.color",cursor:"inherit",borderColor:"multiple.border"},".futuresMarketColumnWrap":{display:"flex",flex:1,flexDirection:"column",height:"100%",".content":{px:"sm",display:"flex",alignItems:"center",height:"100%",fontSize:0,color:"t.third",textDecoration:"none",cursor:"pointer","&:hover":{bg:"marketColumn.hover"},".item":{display:"flex",alignItems:"center",cursor:["auto","pointer"],userSelect:"none",fontSize:"14px",".favorite":{pr:"2px",color:"t.third","&.primary":{color:"primary"},"&.muted":{color:"t.muted"}},".name":{flex:1,color:"t.third",display:"flex",lineHeight:1,flexWrap:"wrap",alignItems:"center",".symbol":{color:"t.primary"}}}}}};var G=d().createElement;const J=(0,u.memo)((e=>G(M.Z,Object.assign({__css:U},e)))),Y=e=>{const{symbol:t,symbolDisplay:r,lastPrice:n,difference:o="--",quoteVolume:s,bigThan:l,tickSize:p=1e-7,pair:g,contractType:y,noFavorite:b,noFiat:v,changeSymbol:x,lastFlag:S,isGridWidget:k,isDefaultChange:P,needBreakline:T,active:w,openShotCut:I,activityUrl:M,trackId:E}=e,N=(0,a.Kn)()[t]||{},Z=l?"buy":"sell",A=(0,a.U1)(p),K=(0,a.tZ)()||"en",{format:q}=(0,a.ve)(A),{format:W}=(0,a.ve)(0),{favorites:j,setFavorite:$}=(0,f.ux)(),{pathname:Y}=(0,z.Hb)(),Q=Y.split("/").slice(0,-1),{activeTab:X}=(0,u.useContext)(C),ee=(0,m.useSelector)((e=>e.futureMarket.radioWord)),te=!!e.isDelivery,re="change"===ee,{getI18n:ae}=(0,f.yk)(),ie=(0,u.useMemo)((()=>S>0?"buy":S<0?"sell":"t.grey600"),[S]),ne=te?j.indexOf(`${g}-${y}`):j.indexOf(t),oe=(0,u.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),$(te?`${g}-${y}`:t,ne,j)}),[$,te,g,y,t,ne,j]),se=(0,u.useMemo)((()=>{let e="";var t;te?(Q[2]="delivery",e=[...Q,(0,c.eB)({pair:g,contractType:y})].join("/")):(Q[2]="futures",e=y!==i.Yp.PERPETUAL?[...Q,(0,c.eB)({pair:g,contractType:y})].join("/"):[...Q,null===r||void 0===r||null===(t=r.split("/"))||void 0===t?void 0:t.join("_")].join("/"));return e}),[te,Q,g,y,r]),le=X===h.I_,ce=(0,u.useCallback)((e=>{var r,a;if(null!==(r=(a=e.target).closest)&&void 0!==r&&r.call(a,`.${B.mA}`)){const{cnDoc:e,enDoc:t}=N;(0,B.JO)({lng:K,cnDoc:e,enDoc:t})}else e.metaKey||e.ctrlKey||(e.preventDefault(),x&&x(t,te,y))}),[N,K,x,t,te,y]),ue=(0,u.useMemo)((()=>{const{symbol:t,contractTypeI18n:r,deliveryDateFormat:a}=(0,_.H)(e,ae);return G(d().Fragment,null,G("span",{className:"symbol"},`${t}`,"\xa0"),G("div",{style:{width:T?"100%":"auto",display:"flex",alignItems:"center"}},G("div",null,r," ",a),G(B.ZP,{config:N}),G(B.yK,{url:M})))}),[ae,e,T]),de=(0,u.useMemo)((()=>I&&w),[w,I]);return G(R.ZP,{enablePortal:!0,trigger:"hover",className:"futuresMarketColumnWrap",placement:"right",sx:de?{bg:"marketColumn.hover"}:{},overlay:v?null:G(V.Z,{sx:H},G(L.Z,Object.assign({href:se,target:"_blank",className:"nextLink"},E?{"data-testid":E}:null),G(F.Z,{size:10,className:"linkIcon"})))},G("a",Object.assign({href:se,className:"content",onClick:ce},E?{"data-testid":E}:null),G("div",{className:"item",style:h.X3.first},b?null:G("div",{className:"favorite "+(ne>-1?"primary":""),onClick:oe},G(D.Z,{size:12})),G(J,{className:"name"},ue)),!k||P?G("div",{className:"item",style:h.X3.second},G(J,{sx:{color:ie}},(te&&le?"$":"")+q(n))):null,G("div",{className:"item",style:h.X3.third},G(O.XI,{sx:{color:re?Z:"t.grey600"},__css:U},re?`${o}%`:`${W(s)}`))))},Q=(0,u.memo)(Y);var X=d().createElement;const ee=(0,u.memo)((({name:e})=>X(V.Z,{variant:"columns.space",sx:{px:"sm",height:h.O$,"&::after":{content:'""',position:"absolute",width:"2px",background:"#F0B90B",borderRadius:"2px",height:"7px",left:"11px",top:"calc(50% - 3px)"}}},X(M.Z,{__css:{fontSize:0,color:"t.grey600",fontWeight:"normal"},sx:{color:"#CACED3"}},e.toUpperCase()))));var te=r("ir67"),re=r("eIfy"),ae=r.n(re),ie=r("YJCA"),ne=d().createElement;const oe=(0,ie.W8)((({itemElement:e,itemData:t,itemHeight:r})=>ne(s.Z,{style:{height:r,zIndex:2e3},sx:j},ne(e,t)))),se=(0,ie.JN)((({items:e,itemElement:t,itemHeight:r})=>ne("div",{style:{overflow:"auto"}},Boolean(e.length)&&e.map(((e,a)=>ne(oe,{index:a,key:`${e.symbolDisplay}-${e.symbol}`,itemElement:t,itemData:e,itemHeight:r}))))));let le=[];const ce=({itemElement:e,itemHeight:t,dataSource:r})=>{const a=(0,m.useDispatch)(),i=(0,te._n)(),{0:n,1:o}=(0,u.useState)({items:[]});(0,u.useEffect)((()=>{o({items:r})}),[r]),(0,u.useEffect)((()=>{le=[],r.forEach((e=>{e.isDelivery?le.includes(`${e.pair}-${e.contractType}`)||le.push(`${e.pair}-${e.contractType}`):le.includes(e.symbol)||le.push(e.symbol)}))}),[r.length]);return ne(se,{distance:1,items:n.items,onSortEnd:({oldIndex:e,newIndex:t})=>{const r=le[e];le[e]=le[t],le[t]=r,a.futureMarket.oprFuturesFavorite({values:le,isLoggedIn:i}),o((({items:r})=>({items:ae()(r,e,t)})))},itemElement:e,itemHeight:t})},ue=(0,u.memo)(ce);var de=d().createElement;const me=(e,t)=>{const r=t[e];return"string"===typeof r?r:`${r.symbolDisplay}-${r.symbol}`},pe=(0,u.memo)((({filterFunc:e,sortFunc:t,noFavorite:r,noFiat:i,changeSymbol:n,isGridWidget:o,isDefaultChange:l,shouldSortByBusd:p,needBreakline:f,openShotCut:g,onKeyDownCallback:y})=>{const{isLight:b}=(0,a.Fg)(),{getI18n:v}=(0,A.Z)("","futures-ui"),{nextTickers:x,loading:S}=(0,w.Pj)(),{activeTab:k,activeSubTab:P,keyword:T}=(0,u.useContext)(C),O=(0,a.iB)(),R=(0,u.useMemo)((()=>{const e=[];return x.forEach((t=>{const{contractVal:r,volume:a,symbol:i,isDelivery:n}=t;if((0,c.cZ)(t)){var o;if(n)t.quoteVolume=Number(r)*Number(a||(null===(o=O[i])||void 0===o?void 0:o.volume)||0);e.push(t)}})),e}),[O,x]),V=(({data:e,activeTab:t,keyword:r})=>{const{index:a,desc:i}=(0,m.useSelector)((e=>e.futureMarket.sortInfo)),n=!r&&t===h._C&&(null===a||0===a||0===i);return(0,u.useMemo)((()=>{if(n){const t={},r=[];return e.forEach((e=>{t[e.baseAsset]||(t[e.baseAsset]=!0,r.push({baseAsset:e.baseAsset,isDelivery:e.isDelivery,symbol:2===i?`${e.baseAsset}zzz`:e.baseAsset,isPushItem:!0}))})),e.concat(r)}return e}),[n,e,i])})({data:(0,u.useMemo)((()=>R.filter(e)),[R,e]),activeTab:k,keyword:T}),L=(0,u.useMemo)((()=>{const e=V.sort(t);if(T&&p){const t=[],r=[];return e.forEach((e=>{"BUSD"===e.marginAsset.toUpperCase()?t.push(e):r.push(e)})),[...t,...r]}return e}),[V,t,T,p]),F=(0,u.useMemo)((()=>de(s.Z,{sx:{textAlign:"center"}},de(b?E.Z:N.Z,{size:96}),de(M.Z,{variant:"body2",color:"t.placeholder",pt:o?"18px":"5px"},v("futures-Market-NoSymbolUnder","No symbol under this category")))),[v,o,b]),D=(0,Z.D)((e=>{if(null!==e&&void 0!==e&&e.isPushItem)return de(ee,{name:null===e||void 0===e?void 0:e.baseAsset});const t=P===h.E6?{trackId:`BUSD_perp_${null===e||void 0===e?void 0:e.baseAsset}`}:"";return de(d().Fragment,null,de(Q,Object.assign({},e,t,{noFavorite:r,noFiat:i,changeSymbol:n,isGridWidget:o,isDefaultChange:l,needBreakline:f,openShotCut:g})))})),_=o?h.O$:24;return k===h.I_?de(ue,{dataSource:L,itemElement:D,itemHeight:_}):de(I.a,{sx:$,dataSource:L,loading:S,itemElement:D,itemKey:me,itemHeight:_,openShotCut:g,onKeyDownCallback:y,emptyChildren:F})}));var fe=r("5vwO"),ge=r("89i/"),ye=r("17TW"),he=d().createElement;const be={delay:500,bg:"bg4"};let ve=!0;const xe=({width:e,activeTab:t,switchTab:r,w:a,tabs:i})=>{const n=(0,u.useMemo)((()=>{const e=i,t=e.findIndex((e=>e.sectionKey===h.UC)),r=e.find((e=>e.sectionKey===h.UC));return t>-1&&ve&&(ve=!1,e.splice(t,1,(0,fe.Z)((0,fe.Z)({},r),{},{display:he(d().Fragment,null,he("span",null," ",r.display),he(ge.Z,{size:14,sx:{color:"t.yellow200",ml:"3px",fontSize:"16px",position:"relative",bottom:"2px"}}))}))),[{sectionKey:h.I_,display:he(D.Z,{size:14}),description:"",ruleNumber:"1000"}].concat(e)}),[i]);return he(ye.Z,{w:a,list:n,width:e,activeTab:t,switchTab:r,tabsStyle:{marginRight:"2px"},tooltipProps:be})},Se=(0,u.memo)(xe);var ke=r("JSzP"),Pe=d().createElement;const Te=({types:e,activeType:t,onChange:r,sx:a={}})=>Pe(s.Z,{sx:a},Pe(ke.Z,{types:e,type:t,onChange:r})),Ce=(0,u.memo)(Te);var we=r("/Fn1"),Ie=d().createElement;const Me=(0,u.memo)((({value:e,sx:t,change:r=(()=>!1)})=>Ie(we.Z,{fontSize:16,onClick:t=>{t.stopPropagation(),r("change"===e?"volume":"change")},sx:(0,fe.Z)({mt:"2px",cursor:"pointer","&:hover":{color:"t.primary"}},t)})));var Ee=d().createElement;const Ne=({name:e,noFavorite:t,noFiat:r,isGridWidget:i=!1,electronUpdateTabs:d,openShotCut:b,selectedCallback:v,changeSymbolCb:S=null,w:k})=>{const P=(0,m.useDispatch)(),I=(0,a.Pv)(),M=(0,y.G)(),E=(0,m.useSelector)((e=>e.futureMarket.sortInfo)),N=(0,m.useSelector)((e=>e.futureMarket.radioWord)),Z=(0,u.useRef)(),{0:A,1:O}=(0,u.useState)(!1),{width:R}=(0,p.i)(),{0:V,1:L}=(0,u.useState)(!0),{0:F,1:D}=(0,u.useState)({showBusdPerpetual:!1,shouldSortByBusd:!1}),_=(0,f.Bd)();let z=(0,g.d0)();z=S||z;const[B,H]=(0,o.Z)("futuresSort"),{getI18n:U}=(0,f.yk)(),j=(0,u.useMemo)((()=>M?h.mW:h.UD),[M]),$=(0,u.useMemo)((()=>F.showBusdPerpetual?[...h._V,h.E6]:h._V),[F]);(0,u.useEffect)((()=>{O(Z.current.offsetWidth>256),L(Z.current.offsetWidth<400)}),[R,k]),(0,u.useEffect)((()=>{!async function(){const e=await l.Z.getHelper(),t=await e.getAbConfig(),{flows:r={}}=t||{};Object.keys(r).length&&D({showBusdPerpetual:"show"===r.market_busdPerpetual,shouldSortByBusd:"sort"===r.market_sort})}()}),[]);const G=(0,u.useCallback)(((t,r)=>{z({isBlank:M!==r,stateSymbol:t,isDeliveryColumn:r,electronUpdateTabs:d,name:e}),v&&v(),(0,c.PI)(t)}),[z,e,M,v,d]),{tabState:{activeTab:J,switchTab:Y},searchState:{keyword:Q,search:X},favoritesState:ee,subTabState:{activeSubTab:te,switchSubTab:re},filterFunc:ae}=(0,w.Mp)(j,_,F.showBusdPerpetual),{sortFunc:ie,sortHeaders:ne}=(0,w.e)("change"===N,i,A,J),oe=(0,u.useCallback)((e=>P.futureMarket.updateState({sortInfo:e})),[P.futureMarket]),se=(0,u.useCallback)((e=>{var t;P.futureMarket.updateState({radioWord:null===(t=h.jQ[e.ruleNumber])||void 0===t?void 0:t.key}),Y(e.sectionKey)}),[P.futureMarket,Y]),le=(0,u.useCallback)((e=>P.futureMarket.updateState({radioWord:e})),[P.futureMarket]);(0,u.useEffect)((()=>{B?oe(B):J===h.I_?oe({index:null,desc:0}):oe({index:2,desc:2})}),[J,B,oe]);const ce=(({list:e,i18nFunction:t=(()=>{})})=>{const r=[];return e.forEach((e=>{r.push({key:e,label:Ee("span",{"data-testid":e===h.E6?"BUSD_perp_tab":""},t(`market-text-${e}`))})})),r})({list:$,i18nFunction:U});return Ee(s.Z,{ref:Z,sx:W},Ee(C.Provider,{value:{favorite:ee,activeTab:J,activeSubTab:te,keyword:Q}},Ee("div",{onClick:h.UW},Ee("div",{className:"searchWrap"},Ee(T,{value:Q,search:X,openShotCut:b,sx:K})),Ee("div",{className:"tabListWrap"},Ee(Se,{tabs:_,switchTab:se,activeTab:J,width:R,w:k})),Ee(Ce,{types:ce,activeType:te,onChange:re,sx:q}),Ee("div",{className:"sortHeaderWrap"},Ee(x,{group:ne,active:E,getGroupOrderKey:e=>{H(e),oe(e)},showSort:!Q,renderProps:Ee(Me,{value:N,change:le})}))),Ee(pe,{filterFunc:ae,sortFunc:ie,noFavorite:t,noFiat:r,changeSymbol:G,isGridWidget:i,isDefaultChange:A,needBreakline:V,shouldSortByBusd:F.shouldSortByBusd,openShotCut:b,onKeyDownCallback:({data:e,metaKey:t,ctrlKey:r})=>{const a=(0,g.co)(e.symbol,I,e.isDelivery);n({data:e,path:a,metaKey:t,ctrlKey:r,deliveryPath:M}),setTimeout((()=>{v&&v()}),100)}})))},Ze=d().memo(Ne)},eGLs:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("nZi1"),o=r("/7dI"),s=i().createElement;const l=({symbol:e,useMiniTicker:t,showTradingView:r,namespace:i,height:l,tabKeys:c,onRemove:u,headerSlot:d,showFullscreenIcon:m,showMultiChartDropdown:p,isPro:f})=>{const g=(0,a.useRef)(null);return s(n.K,{namespace:i,height:l,tabKeys:c,onRemove:u,headerSlot:d,showMultiChartDropdown:p,showFullscreenIcon:m,isPro:f,symbol:e},s(o.Z,{symbol:e,namespace:i,useMiniTicker:t,showTradingView:r,candleRef:g,isShowDrawPanel:!0,isShowAnnotationPanel:!0}))}},DD9E:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("Mnnb"),o=r("eGLs"),s=i().createElement;const l=e=>e.isDelivery?s(n.Z,e):s(o.Z,e)},CLE1:(e,t,r)=>{"use strict";r.d(t,{xG:()=>n,NU:()=>o,mU:()=>s,z$:()=>c});var a=r("4xt1"),i=(r("pVAJ"),r("jQmP"));const n=e=>({price:`${e("orderBook-price",{defaultValue:"Price"})}`,size:`${e("orderBook-Size",{defaultValue:"Size"})}`,sum:`${e("orderBook-Sum",{defaultValue:"Sum"})}`}),o=({maxSumRef:e,amountAskSum:t,quantityPrecision:r,isCoinUnit:n,direction:o,tickSize:s,filters:l})=>(c,u,d,m)=>{var p;const f=(0,i.p)(s),{amount:g,sum:y}=u[d],h=m?t-((null===(p=u[d-1])||void 0===p?void 0:p.sum)||0):y||0,b=l.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:v}=b,x=(0,i.p)(v),S={size:n?(0,a.uf)(g,x):(0,a.uf)(g,f),sum:n?(0,a.uf)(Number(h),r):(0,a.uf)(Number(h),f)};return{progress:Number(h)/Number(e.current),datas:c.map((({type:e},t)=>({type:e,value:S[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[o],direction:o}})))}},s=({getI18n:e,quoteAsset:t,baseAsset:r,marginAsset:a,isCoinUnit:i})=>[{type:"price",title:`${n(e).price}(${t})`,direction:"l",style:{flex:1,justifyContent:"flex-start"}},{type:"size",title:`${n(e).size}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}},{type:"sum",title:`${n(e).sum}(${i?r:a})`,direction:"r",style:{flex:1,justifyContent:"flex-end"}}],l={bg:"bg4",delay:200,enablePortal:!0,placement:"top"},c=[{type:"all",dataTestid:"defaultModeButton",toolTipProps:l},{type:"bid",dataTestid:"buyModeButton",toolTipProps:l},{type:"ask",dataTestid:"sellModeButton",toolTipProps:l}]},GtUU:(e,t,r)=>{"use strict";r.d(t,{M:()=>l,N:()=>c});var a=r("4xt1"),i=r("pVAJ"),n=r("jQmP"),o=r("Gbz3");const s=e=>({price:`${e("orderBook-Price",{defaultValue:"Price"})}`,amount:`${e("orderBook-Amount",{defaultValue:"Amount"})}`,total:`${e("orderBook-Total",{defaultValue:"Total"})}`}),l=(e,t)=>e.map(((e,r)=>({type:e,title:s(t)[e],style:{flex:1,justifyContent:0===r?"flex-start":"flex-end"}}))),c=({median:e,quantityPrecision:t,decimalPlace:r,isCoinUnit:s})=>(t,l,c)=>{const u=(0,i.gm)(),{tickSize:d,filters:m}=(0,i.j2)(),p=(0,n.p)(d),{amount:f,total:g,price:y}=l[c],h=m.find((e=>"LOT_SIZE"===e.filterType)),{stepSize:b}=h,v=(0,n.p)(b),x={amount:s?(0,a.uf)(f,v):(0,o.WA)({quantity:f,price:y,precision:p}),total:s?(0,a.uf)(Number(g),r):(0,o.WA)({quantity:f,price:y,precision:p})};return{progress:Number(f)/Number(e),datas:t.map((({type:e},t)=>({type:e,value:x[e]||null,style:{textAlign:{ltr:0===t?"left":"right",rtl:0===t?"right":"left"}[u],direction:u}})))}}},"6hWq":(e,t,r)=>{"use strict";r.d(t,{_:()=>a});const a={"&#futuresOrderbook":{".orderbook-tbheader":{".item":{display:"block",color:"t.third",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"end","&:first-of-type":{textAlign:"start"}}},"& .tick-content":{color:"t.primary"},"& .orderbook-ticker":{display:"flex",py:"1px",px:3,height:33,alignItems:"center","& .contractPrice":{display:"flex",mr:1,fontSize:"20px",alignItems:"center",fontWeight:"medium"},"& .markPrice":{flex:1,display:"inline-block",fontSize:"12px",textAlign:"left",color:"t.secondary"},"& .right":{flex:1,textAlign:"right"},"& .more":{color:"tradeWidget.orderbookMoreIconColor",fontSize:1,mr:2,textDecoration:"none","&:hover":{color:r("hHvS").er[300]}},"& .arrow-icon":{fontSize:"16px "},"& .status-sell":{color:"t.sell"},"& .status-green":{color:"t.buy"},"& .status-primary":{color:"t.primary"}},"& .orderbook-progress":{height:"20px !imporant","& .row-content":{lineHeight:"20px !imporant",px:"0px !important"},"& .progress-container":{height:"20px !imporant","& .row-content":{"& .text":{color:"t.secondary"}}},"& .progress-bar":{height:"20px !imporant"}}}}},qCKq:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r("/SIk");const i=({currentType:e,asks:t,bids:r,addSumData:i,isMobile:n})=>{if(n)return{amountAskSum:0,amountBidSum:0,maxSumRef:(0,a.useRef)(0),setMaxSumRef:()=>{}};const o=(0,a.useRef)(0),s="bid"!==e?i(t):0,l="ask"!==e?i(r):0,c=(0,a.useCallback)((a=>{let i=0,n=0;if("ask"!==e){var l;const e=Math.min(a,r.length);i=(null===(l=r[e-1])||void 0===l?void 0:l.sum)||0}if("bid"!==e){var c;const e=Math.min(a,t.length);n=s-((null===(c=t[t.length-e-1])||void 0===c?void 0:c.sum)||0)}o.current=Math.max(i,n)}),[e,r,t,s]);return{amountAskSum:s,amountBidSum:l,maxSumRef:o,setMaxSumRef:c}}},GnZy:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("67mE"),l=r("8Rb0"),c=r("LcTY"),u=r("lv1b"),d=r("AHTf"),m=r("kZs2"),p=r("pVAJ"),f=r("u4NA"),g=r("Gbz3"),y=r("4Dm0"),h=r("CLE1"),b=r("GtUU"),v=r("jQmP");var x=r("qCKq"),S=r("6hWq"),k=n().createElement;const P="obSymbol",T={ask:void 0,bid:void 0},C=()=>{const e=(0,o.useDispatch)(),t=(0,d.BN)(),r=(0,p.gm)(),[n,[C,w]]=(0,p.z4)(),I=(0,p.j2)(),{tickSize:M,filters:E}=I,N=(0,o.useSelector)((e=>e.exchangeInfo.infos))[n],{levels:Z=[],levelsIndex:A=[],minQty:O="0.01"}=N||{},R=-Math.log10(O),[V,L]=(0,p.it)(P,{}),F=(0,p.r5)(P),{getI18n:D}=(0,g.yk)(),{isCoinUnit:_}=(0,g.QV)(),z=function(){const{isCoinUnit:e}=(0,g.QV)(),{tickSize:t}=(0,p.j2)(),r=(0,v.p)(t);return(0,i.useCallback)((t=>t.reduce(((t,a)=>(a.originAmount||(a.originAmount=a.amount,a.unitChangedAmount=(0,g.WA)({quantity:a.amount,price:a.price,precision:r,format:!1})),a.amount=e?a.originAmount:a.unitChangedAmount,a.sum=t+Number(a.amount||0),a.sum)),0)),[e,r])}(),{isMobile:B}=(0,p.Fs)(),K=(0,y.G)(),q="rtl"===r?"right":"left",W=()=>"undefined"===typeof V[n]?A[A.length-1]:A.includes(V[n])?V[n]:A[A.length-1],H=(0,i.useCallback)(((e,t)=>{if(j(e),!t){const t=l.tO.getItem(F,{});L((0,a.Z)((0,a.Z)({},t),{},{[n]:e}))}}),[L,F,n]),{0:U,1:j}=(0,i.useState)(W()),$=Z[U],G=(0,i.useMemo)((()=>(0,h.mU)({getI18n:D,quoteAsset:w,baseAsset:C,marginAsset:I.marginAsset,isCoinUnit:_})),[_,D,w,C,I]),{preOrders:J,loading:Y}=(0,p.E)(),Q=(0,u.AJ)(J,!0,n),X=(0,p.U6)(n,t,K).getState(),ee=(0,m.jM)(X.ask,{num:400,level:$,desc:!1}),te=(0,m.jM)(X.bid,{num:400,level:$,desc:!0}),re=(0,i.useMemo)((()=>{if(ee&&te){var e;const t=ee.concat(te).sort(((e,t)=>e.amount-t.amount));return null===(e=t[Math.floor(.95*t.length)])||void 0===e?void 0:e.amount}return 0}),[ee,te]),{0:ae,1:ie}=((0,i.useRef)(T),(0,i.useState)("all")),{amountAskSum:ne,maxSumRef:oe,setMaxSumRef:se}=(0,x.E)({currentType:ae,asks:ee,bids:te,addSumData:z,isMobile:B}),le=(0,i.useMemo)((()=>B?(0,b.N)({median:re,quantityPrecision:R,decimalPlace:U,product:I,isCoinUnit:_}):(0,h.NU)({maxSumRef:oe,amountAskSum:ne,quantityPrecision:R,tickSize:M,filters:E,direction:r,isCoinUnit:_})),[B,M,oe,ne,R,I,re,U,_,r,E]),ce=(0,i.useCallback)((t=>{c.T.emit(c.F.UPDATE_ORDER_PRICE_INPUT,t.price),e.position.setOrderbookPrice({symbol:n,price:t.price})}),[e.orderForm,e.position,n]),ue=(0,i.useCallback)((t=>{e.userProfile.save({key:"orderBookDecimal",value:t})}),[e.userProfile]),de=(0,i.useMemo)((()=>k(f.Z,null)),[]);return(0,i.useEffect)((()=>{H(W(),"changeSymbol")}),[A,n]),k(s.Z,{symbol:n,TICK_MAP:Z,baseAsset:C,quoteAsset:w,tickSizeMap:A,qty:O,ordersLoading:Y,openOrders:Q,asks:ee,bids:te,type:ae,changeType:ie,listStyle:{direction:r},isElectron:!0,level:U,setLevel:H,tableHeaderConfig:G,handleDecimalChange:ue,handleOrderSelected:ce,renderTicker:de,renderRow:le,renderAutoSizer:se,getHeaderConfig:b.M,getI18n:D,__css:S._,id:"futuresOrderbook",progessDirection:q,rowHeight:20,typeList:B?void 0:h.z$})}},"2TMS":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=(r("O94r"),r("sZZk")),s=r("pVAJ"),l=r("Uqe+"),c=(r("LfFT"),r("e5RN"),r("OV9X"),r("wjiZ"),r("XhNN"),r("9rpF")),u=(r("fcuc"),r("8T8r")),d=(r("FZ38"),r("AHTf"));r("zVBf"),r("vuc/");i().createElement;r("Z8nA"),r("5vwO"),r("GpFh");var m=r("YhxV"),p=r("mmep");i().createElement;m.Z.colors.sell,m.Z.colors.buy,p.Z.colors.sell,p.Z.colors.buy;i().createElement;var f=r("ux7Q"),g=r("FOuV"),y=r("Gbz3");var h=i().createElement;d.Xs,d.Xs,d.Xs,d.Xs;const b=()=>{(0,n.useDispatch)();const[e,t]=(0,l.Z)(g.di,g.kj),{getI18n:r}=(0,s.ZK)(),{getI18n:i}=((0,s.gm)(),(0,y.yk)()),{setLayouts:c}=(0,a.useContext)(f.VY),{isIPad:u}=((0,n.useSelector)((e=>e.layout.pageLayout)),(0,s.Fs)()),{color:d}=(0,s.rd)(),m=(0,o.useMediaQuery)({query:"screen and (max-width: 1440px)"});(0,a.useCallback)((e=>{if(m&&"six"===e)return;const{pathname:t,search:r}=window.location;let a="";if(t.indexOf("multipleChart")>-1){a=`${t.split("/").slice(0,4).join("/")}?type=${e}`}else{const i=t.split("/").slice(0,2);a=""===r?`${i.join("/")}/futures/multipleChart?type=${e}`:`${i.join("/")}/futures/multipleChart${r}&type=${e}`}return window.open(a,"_blank")}),[m]);return null},v=()=>{const{getI18n:e}=(0,s.ZK)(),t=(0,a.useRef)();return h(c.ZP,{trigger:"hover",ref:t,sx:{height:"64px",pt:"20px",pr:26,pl:"8px",bg:"moduleBg",position:"relative",cursor:"pointer",svg:{path:{fill:"t.primary"},"&:hover":{path:{fill:"t.yellow"}}}},"data-testid":"UIOptionSelect",overlay:h(b,null),placement:"bottom",enablePortal:!0},h(u.Z,{sx:{zIndex:10}}))},x=i().memo(v)},tXWo:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("fi7b"),s=r("pVAJ"),l=r("+o9S"),c=r("QB3Q"),u=r("e5RN"),d=r("OV9X"),m=r("Gbz3"),p=r("VDPE"),f=i().createElement;const g=()=>{const{isMobile:e}=(0,s.Fs)(),t=((e=!0,t=!0)=>({root:{color:e?"themeConfig.grey800":"themeConfig.grey50",backgroundColor:e?"#FEF6D8":"t.yellow700",border:"1px solid "+(e?"t.yellow100":"#665A28"),borderRadius:"4px",height:"auto",padding:"12px",margin:"0px 10px 4px",marginTop:t?"10px":"0px","& .warning":{width:"16px",height:"16px",marginRight:"10px",color:"t.yellow200"},"& .description":{fontSize:"12px",width:t?"calc(100% - 30px)":"auto",marginRight:t?"25px":2,wordBreak:"break-word",color:"#F0B90B"}},close:{width:"16px",height:"16px"}}))((0,s.Fg)().isLight,e),{t:r}=(0,m.$G)(),{getI18n:i}=(0,m.yk)(),g=(0,p.yN)({hideOtherSymbol:!1}),y=(0,s.zk)("openTip"),h=(0,s.zk)("placeOrder"),b=(0,n.useDispatch)(),v=(0,a.useCallback)((()=>b.serviceStatus.updateStateImmutable({openTip:!1})),[]);return y&&f(u.Z,{sx:t.root,alignItems:"center"},f(u.Z,{alignItems:"flex-start"},f(l.Z,{className:"warning"}),f("div",{className:"description"},f("span",null,i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning."})," ","\xa0",h&&f(o.c,{t:r,i18nKey:(0,m.Gv)("abnormal-close-all"),components:{bold:f("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),f(d.Z,{mt:"4px",onClick:g},i("confirmBtn",{defaultValue:"Confirm"})," >"," "))),f(c.Z,{sx:t.close,onClick:v}))}},a9vC:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r("pVAJ"),i=r("2rU8"),n=r("/1uR"),o=r("/MJE"),s=r("jQmP"),l=r("6Afj"),c=r("9rpF"),u=r("NJWl"),d=r("e5RN"),m=r("OV9X"),p=r("uRhr"),f=r("/SIk"),g=r.n(f),y=r("NHWx"),h=r("OjEc"),b=r("Gbz3"),v=r("4Dm0"),x=g().createElement;const S=(0,l.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(726)]).then(r.bind(r,"4PCx")))),{registerActionHandle:k,constants:P}=o.Z,T=({name:e=null,showRightBorderLine:t})=>{const r=(0,v.G)(),a=(0,f.useRef)(),{0:i,1:n}=(0,f.useState)(!1),{0:o,1:s}=(0,f.useState)(!1);(0,f.useEffect)((()=>{const e=k((({name:e})=>{switch(e){case P.ACTION_TRADE_SEARCH_SYMBOL:n(!0),s(!0)}}));return()=>e}),[i,o]);const l=()=>n(!0),d=()=>{n(!1),s(!1)};(0,y.Z)({callback:d,id:"marketSymbol"});const m=(0,f.useMemo)((()=>({open:i,onMouseEnter:l,onMouseLeave:d,onClick:()=>n(!i)})),[i]);return x(c.ZP,Object.assign({ref:a,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:[r?"4px":0]},trigger:"hover",enablePortal:!0,overlay:x(u.Z,{id:"marketSymbol",className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:"425px",maxWidth:"100vw",height:318,maxHeight:"100vh",boxShadow:"selectShadow"}},x(S,{name:e,isGridWidget:!1,openShotCut:o,selectedCallback:d}))},m),x(C,{showRightBorderLine:t}))};function C({showRightBorderLine:e}){const[t]=(0,a.z4)(),r=(0,a.Kn)()[t]||{},o=(0,a.j2)(),l=(0,a.rR)(),c=(0,b.CE)()[t],{getI18n:u}=(0,b.yk)(),{loading:y,value:v}=(0,n.s)(o.deliveryDate),S=!y&&v<1,k=(0,s.p)(l),P=Number((null===c||void 0===c?void 0:c.estimatedSettlePrice)||0).toFixed(k),{isMobile:T}=(0,a.Fs)(),{symbol:C,contractTypeI18n:w,deliveryDateFormat:I}=(0,b.oO)();return(0,f.useMemo)((()=>x(g().Fragment,null,x(d.Z,{sx:{alignItems:"center",mr:0,mb:[1,0],pr:"16px",borderRight:e?"1px solid":"none",borderColor:"newLine"}},x(d.Z,{flexDirection:"column",sx:{color:"t.primary"}},x("h1",{style:{fontSize:"20px",fontWeight:"500"}},C,"\xa0 "),x(i.XI,{sx:{fontSize:"sm"}},x("h1",{style:{fontSize:"14px",display:"flex",alignItems:"center",fontWeight:"500"}},`${w} ${I}`,x(h.ZP,{config:r,sx:{display:"inline-block",top:"2px",position:"relative","& svg":{fontSize:"20px"}}})))),x(p.Z,{color:"t.primary",fontSize:20})),S&&x(m.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"normal",width:T?"100%":"100px",whiteSpace:T?"normal":"nowrap"}},u("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",P))),[P,S,o])}const w=(0,f.memo)(T)},X2Id:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("sZZk"),s=r("pVAJ"),l=r("PoRd"),c=r("v2M8"),u=r("LTcb"),d=r("LcTY"),m=r("AHTf"),p=r("T3qr"),f=r("Gbz3"),g=r("jQmP"),y=r("z+x3"),h=n().createElement;const b=Math.floor((y.FA-44-31)/20),v=({sx:e={}})=>{const[t,r]=(0,s.z4)(),{getI18n:n}=(0,u.Rk)(),{formatMi:v,formatTk:x}=(0,s.mC)(),{isCoinUnit:S}=(0,f.QV)(),{marginAsset:k,tickSize:P}=(0,s.j2)(),T=(0,g.p)(P),[C,w]=r,I=(0,i.useMemo)((()=>[{text:`${n("price",{defaultValue:"Price"})}(${w})`,area:"left"},{text:`${n("amount",{defaultValue:"Amount"})}(${S?C:k})`,area:"right"},{text:n("time",{defaultValue:"Time"}),area:"right"}]),[w,C,k,S]),{trades:M,loading:E}=(0,p.K)({symbol:t,stream:(0,m.BN)(),isFutures:!0,isDelivery:!1}),N=(0,i.useCallback)((e=>{d.T.emit(d.F.UPDATE_ORDER_PRICE_INPUT,e.price)}),[]),Z=(0,i.useMemo)((()=>n("common-nodata",{defaultValue:"No Data"})),[]),A=(0,o.useMediaQuery)({query:y.is}),O=(0,i.useMemo)((()=>(A?M.reverse().slice(0,b):M.slice().reverse()).map((e=>{const{quantity:t,price:r}=e,i=S?t:(0,f.WA)({quantity:t,price:r,precision:T,format:!1});return(0,a.Z)((0,a.Z)({},e),{},{quantity:i})}))),[M,A,T]);return h(c.Z,{sx:(0,a.Z)({px:"0",pb:"12px",width:"100%"},e)},h(l.Z,{headers:I,trades:O,loading:E,itemHeight:20,formatMi:v,formatTk:x,formatQty:S,onRowClick:N,emptyText:Z}))},x=n().memo(v)},"7Q68":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r("/SIk"),i=r.n(a),n=r("O94r"),o=r.n(n),s=r("9rpF"),l=r("XhNN"),c=r("e5RN"),u=r("dcD/"),d=r("Gbz3"),m=r("FOuV"),p=i().createElement;const{LAST_PRICE:f,MARK_PRICE:g}=m.gu,y={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 32px 10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},h=({workingType:e,changeWorkingType:t,sx:r={}})=>{var i;const{getI18n:n}=(0,d.yk)(),m=(0,a.useMemo)((()=>[{label:n("advancedStrategy-lastPrice",{defaultValue:"Last"}),type:f},{label:n("advancedStrategy-markPrice",{defaultValue:"Mark"}),type:g}]),[n]);return p(s.ZP,{trigger:"hover",sx:{ml:"8px"},overlay:p(l.Z,{sx:y},m.map((({label:r,type:a})=>p("div",{className:o()({"filter-option":!0,active:a===e}),key:a,onClick:()=>{a!==e&&t(a)}},r))))},p(c.Z,{sx:{height:"40px",bg:"inputBg",borderRadius:"4px",justifyContent:"center",alignItems:"center",color:"t.primary",minWidth:"80px"}},null===(i=m.find((t=>t.type===e)))||void 0===i?void 0:i.label,p(u.Z,{ml:"4px",color:"t.third",size:16})))}},FOuV:(e,t,r)=>{"use strict";r.d(t,{yf:()=>n,vQ:()=>o,dk:()=>s,PR:()=>l,Yl:()=>c,hp:()=>u,HZ:()=>d,O6:()=>m,gu:()=>p,PH:()=>f,HM:()=>g,Jg:()=>y,x:()=>h,CN:()=>b,IA:()=>v,Fy:()=>x,rb:()=>S,cQ:()=>k,Y1:()=>P,fj:()=>T,di:()=>C,kj:()=>w,Z$:()=>I,PV:()=>M,rf:()=>E,hI:()=>N,kE:()=>Z,Sm:()=>A,yX:()=>O,L6:()=>R,Br:()=>V,Zv:()=>L,Xd:()=>F,y3:()=>D});var a=r("AHTf"),i=r("EPGa");const n="futures/funding-history",o={USDT:{pricePrecision:2},USDT2:{pricePrecision:8},BNB:{pricePrecision:2},BNB2:{pricePrecision:8},perpetual:{pricePrecision:2},delivery:{pricePrecision:4}},s={UFutures:{precision:2},CFutures:{precision:4}};let l;!function(e){e.LONG="LONG",e.SHORT="SHORT",e.BOTH="BOTH"}(l||(l={}));const c={ISOLATED:"ISOLATED",CROSSED:"CROSSED"};let u;!function(e){e.BUY="BUY",e.SELL="SELL"}(u||(u={}));const d={CONTRACT_PRICE:"Last Price",MARK_PRICE:"Mark Price"};let m,p,f;!function(e){e[e.LONG=1]="LONG",e[e.SHORT=-1]="SHORT"}(m||(m={})),function(e){e.LAST_PRICE="CONTRACT_PRICE",e.MARK_PRICE="MARK_PRICE"}(p||(p={})),function(e){e.LIMIT="limit",e.LIMIT_TYPE="LIMIT",e.MARKET="market",e.MARKET_TYPE="MARKET",e.STOP="stop",e.STOP_TYPE="STOP",e.TAKE_PROFIT="takeProfit",e.CLOSE="close",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.LIQUIDATION="LIQUIDATION"}(f||(f={}));f.LIMIT,f.MARKET,f.STOP_LIMIT,f.STOP_MARKET,f.TAKE_PROFIT_LIMIT,f.TAKE_PROFIT_MARKET;const g={ONE_WAY:.001,TWO_WAY:5e-4},y=null===a.$g||void 0===a.$g?void 0:a.$g.includes(".binancefuture."),h={FEE_URL:`${a.$g}/%locale%/fee/futureFee`,DEPOSIT_URL:`${a.$g}/%locale%/my/wallet/exchange/deposit/crypto/%coin%`,BUYING_URL:`${a.$g}/%locale%/buy-sell-crypto?crypto=%crypto%`,BUYING_URL_ELECTRON:"binance://buy-sell-crypto?crypto=%crypto%",COLLATERAL_URL:`${a.$g}/%locale%/my/wallet/account/futures`,GRID_TRADING_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%`,GRID_LEARN_URL:`${a.$g}/%locale%/futures/strategy/grid?symbol=%symbol%&activeTab=%activeTab%`,TWAP_LEARN_URL:`${a.$g}/%locale%/futures/strategy/twap?symbol=%symbol%`};function b(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const v=1,x={transferAvailable:!y,openAccountAvailable:!y,feeAvailable:!y,enableReduceOnly:!0,enableTakeProfit:!0,enableFundingHistory:!y,leverageInfo:{symbol:"\u2715",defaultVal:20,minVal:1,maxVal:125,avaliableVal:40,minNationalVal:5e4},slideFlag:!0,enabledMonthly:!1,enabledActivity:!y&&!1},S={GTC:"GTC",IOC:"IOC",FOK:"FOK",POST_ONLY:"GTX",GTE_GTC:"GTE_GTC"},k=[i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET],P=[i.Jm.MARKET,i.Jm.TRAILING_STOP_MARKET,i.Jm.STOP_MARKET,i.Jm.TAKE_PROFIT_MARKET];let T;!function(e){e.OTOCO="OTOCO",e.OTO="OTO"}(T||(T={}));const C="page-mode",w="order_mode",I="chart_mode",M="futures-chartSymbol",E="futures-lastProductList",N={two:[],three:[],four:[],six:[]},Z={two:["btcusd_quarter","btcusd_quarter"],three:["btcusd_quarter","btcusd_quarter","btcusd_quarter"],four:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"],six:["btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter","btcusd_quarter"]},A={two:["delivery","delivery"],three:["delivery","delivery","delivery"],four:["delivery","delivery","delivery","delivery"],six:["delivery","delivery","delivery","delivery","delivery","delivery"]},O={futures:"futures",delivery:"delivery"},R="btcusd_quarter",V=e=>e.includes(i.Jm.MARKET)&&!(e=>e===i.Jm.TRAILING_STOP_MARKET)(e),L="MODIFY_ORDER_CONFIG",F={kLine:!0,needConfirm:!0},D={PRICE:"PRICE",QUANTITY:"QUANTITY",BOTH:"BOTH"}},Gbz3:(e,t,r)=>{"use strict";r.d(t,{xm:()=>i.xm,Gv:()=>N.Gv,WA:()=>Te.WA,zZ:()=>Ge,cO:()=>i.cO,G8:()=>de,zF:()=>ot,zu:()=>Ie.zu,KQ:()=>m,Kc:()=>p,he:()=>J,Wr:()=>y,Gf:()=>b,nL:()=>S,w2:()=>c,IV:()=>Ie.IV,d0:()=>k.d0,f3:()=>C,oD:()=>I,gN:()=>M.g,$h:()=>At,oO:()=>Z,G3:()=>A.G,UI:()=>Ie.UI,t1:()=>Ie.t1,mL:()=>O,yV:()=>R,s4:()=>D,aq:()=>_.a,b9:()=>Y,_k:()=>Q,e5:()=>X,CJ:()=>Ie.CJ,I3:()=>Ie.I3,Bd:()=>oe,d2:()=>ae,E5:()=>ie,yk:()=>N.yk,C3:()=>ne.C3,nN:()=>le,m8:()=>ue,uD:()=>Be,Nx:()=>It,rf:()=>ye,ho:()=>be,H3:()=>Me,Qd:()=>je,m:()=>Pt,se:()=>Ne,CE:()=>Re,ux:()=>Ae,kN:()=>Ie.kN,K5:()=>Le,M6:()=>Ke,t2:()=>i.t2,lE:()=>De,Xb:()=>i.Xb,hN:()=>Ie.hN,db:()=>Qe,$J:()=>i.$J,F7:()=>Ie.F7,r8:()=>Ie.r8,QV:()=>Xe.Q,KK:()=>ze,W5:()=>Ie.W5,BF:()=>Zt,H$:()=>Fe,NJ:()=>he,aT:()=>Ie.aT,l8:()=>yt,LY:()=>_e,x_:()=>et,ql:()=>rt,_$:()=>nt,$G:()=>N.$G,Gb:()=>l,eY:()=>Ie.eY,s7:()=>Te.s7,F:()=>i.dM,Dj:()=>i.Dj,h5:()=>ee});var a=r("AHTf");var i=r("8Y2u"),n=r("cucV"),o=r("DCTW"),s=r("wdcV");const l=e=>{const t=(0,i.dM)(),r=(0,s.L6)(t)[e]||[];return(0,n.ot)(r)},c=e=>{const t=(0,i.dM)(),r=(0,s.L6)(t)[e]||[];return(0,o.ot)(r)};var u=r("Vg22"),d=r("Q2PN");function m(){return(0,u.useSelector)(d.Pv)}function p(e){return(0,u.useSelector)(d.JW)[e]}var f=r("Hszp"),g=r("0igl");function y({symbol:e,isDelivery:t}){const{value:r=(e?{}:[])}=(0,f.N)((()=>t?(0,g.u)(e):(0,g.x)(e)),[e,t]);return r}var h=r("IOB8");function b(){return(0,u.useSelector)(h.Y)}var v=r("/SIk");r("mpwE"),r("Utn3");var x=r("EPGa");function S({orderType:e,activePrice:t,price:r}){let a=!1,i=!1;if(e===x.Jm.TRAILING_STOP_MARKET){const e=Number(t);t&&(e<r?i=!0:e>r&&(a=!0))}return{buyDisabled:a,sellDisabled:i}}var k=r("k7O1"),P=r("JjwV");async function T(){const{data:e}=await(0,P.w)();return e}function C(){const{value:e=!1,error:t,loading:r}=(0,f.N)(T,[]);return{value:e,error:t,loading:r}}var w=r("pVAJ");const I=()=>{const{contractType:e}=(0,w.j2)();return e!==a.Yp.PERPETUAL};var M=r("vJ4P");var E=r("tsUn"),N=r("869M");function Z(){const{getI18n:e}=(0,N.yk)(),t=(0,w.j2)();return(0,E.H)(t,e)}var A=r("4Dm0");function O(e){return(0,w.iB)()[e]||{}}const R=()=>{const{0:e,1:t}=(0,v.useState)(!1);return{visible:e,onOpen:(0,v.useCallback)((()=>{t(!0)}),[]),onClose:(0,v.useCallback)((()=>{t(!1)}),[])}};var V=r("5vwO"),L=r("eXOl"),F=r("KUZ0");const D=()=>{const e=(0,u.useSelector)(F.W9),{delivery:t,perpetual:r}=(0,L.Pv)();return e.map((e=>{if(Object.keys(r).includes(e))return(0,V.Z)((0,V.Z)({},r[e]||{}),{},{delivery:!1});const a=Object.values(t).find((({pair:t,contractType:r})=>{if("string"===typeof e&&e.indexOf("-")){const[a,i]=e.split("-");return a===t&&i===r}return!1}));return a?(0,V.Z)((0,V.Z)({},a),{},{delivery:!0}):void 0})).filter((e=>!!e))};var _=r("2ynj"),z=r("GpFh"),B=r("/MJE"),K=r("2yzH"),q=r("4m5F"),W=r("wqQ1"),H=r("4xt1");const U=({orderType:e,qty:t=0,triggerPrice:r,orderPrice:a,contractVal:i,activationPrice:n,lastPrice:o,unit:s,precision:l})=>{const c=s===q.SW.coin,u=s===q.AO.usdt;if(c||u){let s;switch(e){case x.Jm.LIMIT:case x.Jm.STOP_LIMIT:case x.Jm.TAKE_PROFIT_LIMIT:case x.Jm.POST_ONLY:s=a||0;break;case x.Jm.MARKET:s=o||0;break;case x.Jm.STOP_MARKET:case x.Jm.TAKE_PROFIT_MARKET:s=r||0;break;case x.Jm.TRAILING_STOP_MARKET:s=n||0;break;default:s=0}if(c){const e=Number(i);return s=Number(s),s?(0,H.Jp)(e/s,t).toFixed(l,2):0}return u&&s?(0,H.Jp)(s,t).toFixed(l,2):0}return t};var j=r("IewQ"),$=r("NQFm");const G=x.Jm.MARKET;function J(){var e;const t=(0,A.G)(),[r]=(0,w.z4)(),i=O(r)||{},{filters:n=[]}=i,o=(null===(e=n.find($.$H))||void 0===e?void 0:e.tickSize)||"",s=(0,a.l6)(!0),l=(0,w.d)(r,s,{num:1,level:o,isDelivery:t}),c=(0,w.H0)(r,s,{num:1,level:o,isDelivery:t});return{bidPrice:(0,v.useMemo)((()=>{var e;return null===(e=l[0])||void 0===e?void 0:e.price}),[l]),askPrice:(0,v.useMemo)((()=>{var e;return null===(e=c[0])||void 0===e?void 0:e.price}),[c])}}function Y(){return{placeOrderReducer:(e,{type:t,payload:r})=>t===j.z?(0,V.Z)((0,V.Z)({},e),r):(0,V.Z)({},e)}}const Q=()=>{const e=(0,A.G)(),[t]=(0,Ie.eY)(),[r,[a]]=(0,w.z4)(),i=(0,w.j2)(),{marginAsset:n}=i,{getI18n:o}=(0,N.yk)(),s=o("Cont"),{contractVal:l}=(0,w.j2)(),c=(0,w.uH)(!0),u=(0,w.XY)(t),{maxBuyOrderAmount:d,maxSellOrderAmount:m}=(0,w.V2)({reduceOnly:!1,orderPrice:0,orderType:G,positionDirection:x.RS.OPEN}),p=U({qty:d,orderType:G,lastPrice:c,triggerPrice:c,orderPrice:c,activationPrice:c,unit:t,contractVal:l,precision:u}),f=U({qty:m,orderType:G,lastPrice:c,triggerPrice:c,orderPrice:c,activationPrice:c,unit:t,contractVal:l,precision:u});let g;return g=e?t===q.SW.coin?a:s:t===q.AO.usdt?n:a,{curMaxBuyAmount:p,curMaxSellAmount:f,cUnit:g,unitAmountPrecision:u}};function X(){const e=(0,u.useDispatch)(),{showFlashOrder:t}=(0,Ie.F7)(),r=(0,A.G)(),a=(0,u.useSelector)(r?W.BG:W.O0),i=(0,v.useCallback)((t=>{localStorage.setItem(j.w,t),e.preference.updateState({showFlashOrder:t}),(e=>{let{isDelivery:t}=e,r=(0,z.Z)(e,["isDelivery"]);null===B.Z||void 0===B.Z||B.Z.updateUserSettings({trade:{[t?"futuresCoinLayoutDetail":"futuresUsdtLayoutDetail"]:{components:(0,V.Z)({},r)}}})})({flashOrder:t,isDelivery:r})}),[e.preference,r]);return(0,v.useEffect)((()=>{0}),[i]),(0,v.useEffect)((()=>{{const{flashOrder:t}=a;localStorage.setItem(j.w,t),e.preference.updateState({showFlashOrder:t})}}),[e.preference,a]),[t,i]}const ee=()=>{const{getI18n:e}=(0,N.yk)(),t=(0,A.G)(),[r]=(0,Ie.eY)(),a=(0,w.XY)(),i=(0,w.XY)(t?q.SW.cont:q.AO.coin),n=(0,w.j2)(),o=(0,w.iB)(),[s]=De(),[l]=ze(),c=(0,w.c7)();return(0,v.useCallback)(((u,d)=>{var m;const p=null!==d&&void 0!==d&&d.symbol?o[null===d||void 0===d?void 0:d.symbol]:n,{contractVal:f,baseAsset:g,marginAsset:y,minQty:h,filters:b}=p,v=(null===(m=b.find($.Jv))||void 0===m?void 0:m.notional)||"1";return(0,K.m)({unit:r,orderAmount:u,price:Number((null===d||void 0===d?void 0:d.price)||c()),contractVal:f,unitAmountPrecision:a,orderAmountPrecision:i,base:g,margin:y,minQty:h,minNotional:v,isDelivery:t,getFutI18n:e,positionDirection:s,reduceOnly:l,messageType:null===d||void 0===d?void 0:d.messageType})}),[o,e,c,i,r,a,t,l,s])};var te=r("wZts");const re=["BTCUSDT","ETHUSDT","EOSUSDT","LTCUSDT","BCHUSDT","ETCUSDT","DOTUSDT","LINKUSDT","ADAUSDT","BNBUSDT","XLMUSDT"];function ae(){const e=(0,u.useDispatch)(),t=(0,w.Pc)(),[r]=(0,w.z4)();(0,v.useEffect)((()=>{t.isExistFutureAccount&&re.includes(r)&&(0,te.v_)("/bapi/futures/v1/private/delivery/battle/um/game-status",{symbol:r}).then((t=>{t.success&&t.data.inBattle&&e.pageStore.updateState({battleStatus:t.data})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[e.pageStore,r,t.isExistFutureAccount])}function ie(){var e;const[t]=(0,w.z4)(),r=re.includes(t),a=(0,u.useSelector)((e=>e.pageStore.battleStatus))||{};return(0,V.Z)((0,V.Z)({},a),{},{inBattle:!(!r||!a.inBattle||(null===(e=a.battleOrderVo)||void 0===e?void 0:e.symbol)!==t)})}var ne=r("unna");const oe=()=>(0,u.useSelector)(F.mS);var se=r("kZs2");function le(){const{getI18n:e}=(0,N.yk)(),t=(0,v.useCallback)(((t={},r=!1)=>function({product:e={},getFuturesI18n:t}){var r,a,i;const{pair:n,baseAsset:o,quoteAsset:s,deliveryDate:l}=e,c=(null===(r=e.contractType)||void 0===r||null===(a=r.toLowerCase())||void 0===a||null===(i=a.split(" "))||void 0===i?void 0:i[0])||"",u=l?new Date(l):null,d=n||`${o}${s}`,m=(0,se.Hn)(e),p=t((g=c,{perpetual:"inversePerpetual"}[g]||g),{defaultValue:c||""}),f=m||!u?"":`${`0${u.getMonth()+1}`.slice(-2)}${`0${u.getDate()}`.slice(-2)}`;var g;return{symbol:d,contractTypeI18n:p,deliveryDateFormat:f,fullName:`${d} ${p} ${f}`,shortName:`${d} ${m?p:f}`}}({product:t,objValue:r,getFuturesI18n:e})),[e]);return(0,v.useMemo)((()=>({genSymbolDisplay:t})),[t])}const ce=e=>e.indexPrice,ue=()=>(0,u.useSelector)(ce)||{},de=()=>(0,u.useSelector)((e=>e.assetIndex));var me=r("FOuV"),pe=r("xGav"),fe=r("yxRq");const{leverageInfo:ge}=me.Fy;function ye(){return(0,u.useSelector)(pe.G)}function he(e){const{leverageList:t={}}=ye()||{};return t[e]||ge.defaultVal}function be({symbol:e,brackets:t,positions:r}){var a,i;const{curLeverage:n}=ye(),o=(null===t||void 0===t?void 0:t[e])||[],s=Math.abs((null===r||void 0===r||null===(a=r[e])||void 0===a?void 0:a.notionalValue)||0);return{leverageData:{curLeverage:n||ge.defaultVal,minVal:ge.minVal,maxVal:(null===o||void 0===o||null===(i=o[0])||void 0===i?void 0:i.maxOpenPosLeverage)||ge.maxVal,userNotionalValue:s,userCurLeverage:(0,fe.IK)(o,s)},findLeverageByLevel:e=>(0,fe._F)(o,e)}}var ve=r("MwrP"),xe=r.n(ve),Se=r("Qa1J"),ke=r("g9rt"),Pe=r("jQmP"),Te=r("GG68"),Ce=r("H3aL"),we=r("k2tD"),Ie=r("+dPF");function Me({symbol:e,tickSize:t}){const{getI18n:r}=(0,N.yk)(),{tickers:i={}}=(0,Se.s)((0,a.l6)(!0))||{},{delOpenOrders:n}=(0,ke.W)(),{preOrders:o}=(0,w.E)(),s=(0,w.AM)(),{unit:l}=(0,Ie.F7)(),c=(0,Pe.p)(t),u=(0,v.useMemo)((()=>r("limit",{defaultValue:"Limit"})),[r]),d=(0,v.useMemo)((()=>r("orderType-postOnly",{defaultValue:"Post only"})),[r]),m=(0,v.useCallback)((async e=>{xe()(e)||await n(e)}),[n]);return(0,v.useMemo)((()=>{const t=[me.PH.LIMIT_TYPE,me.PH.TAKE_PROFIT_LIMIT,me.PH.TAKE_PROFIT_MARKET,me.PH.STOP_LIMIT,me.PH.STOP_MARKET];return o.filter((({symbol:r,type:a})=>r===e&&t.includes(a))).map((e=>{const{orderId:t,origQty:r,type:a,price:n,stopPrice:o,symbol:p,side:f,activatePrice:g,executedQty:y,timeInForce:h}=e;let b=r-y;const v=Number(o)>0?o:n,x="BUY"===f,S=(0,we.mD)(Number(n),c),k=(0,we.mD)(Number(o),c),P=a===me.PH.STOP_LIMIT?"Stop Limit":a===me.PH.STOP_MARKET?"Stop Market Trigger":a===me.PH.TAKE_PROFIT_LIMIT?"Take Profit Limit":a===me.PH.TAKE_PROFIT_MARKET?"Take Profit Market: Trigger":a===me.PH.LIMIT_TYPE?"GTX"===h?d:u:"";let T="";if(a===me.PH.STOP_LIMIT?T=`Stop Limit: ${S} Trigger ${x?">=":"<="} ${k}`:a===me.PH.STOP_MARKET?T=`Stop Market Trigger ${x?">=":"<="} ${k}`:a===me.PH.TAKE_PROFIT_LIMIT?T=`Take Profit Limit: ${S} Trigger ${x?"<=":">="} ${k}`:a===me.PH.TAKE_PROFIT_MARKET?T=`Take Profit Market: Trigger ${x?"<=":">="} ${k}`:a===me.PH.LIMIT_TYPE&&(T=`${"GTX"===h?d:u}: ${S}`),l===q.SW.coin){const{contractVal:e=0}=s[p]||{},{lastPrice:t}=i[p]||{},l=me.cQ.includes(a)?o:a===me.PH.TRAILING_STOP_MARKET?g||t:n;b=(0,Ce.unitChangeCoinQty)({quantity:r,contractVal:e,price:l,precision:c})}if(l===q.AO.usdt){const{lastPrice:e}=i[p]||{},t=me.cQ.includes(a)?o:a===me.PH.TRAILING_STOP_MARKET?g||e:n;b=(0,Te.WA)({quantity:r,price:t,precision:c})}return{orderId:t,orderTypeText:P,quantity:+b>0?b:0,origQty:r,price:v,isBuy:x,text:T,symbol:p,stopPrice:o,unit:l,order:e,cancel:()=>m(e)}}))}),[o,e,m,s,l,i,c,u,d])}const Ee=e=>e.marginType;function Ne(){return(0,u.useSelector)(Ee)}var Ze=r("ir67");const Ae=()=>{const e=(0,u.useDispatch)(),t=(0,Ze._n)();return{favorites:(0,u.useSelector)(F.W9)||[],setFavorite:(0,v.useCallback)((async(r,a,i=[])=>{let n=[],o="";a>-1?(n=[...i.slice(0,a),...i.slice(a+1)],o="del"):(n=[...i,r],o="add"),e.futureMarket.oprFuturesFavorite({symbol:r,type:o,values:n,isLoggedIn:t})}),[e.futureMarket,e.market,t])}},Oe=e=>e.markPrice,Re=()=>(0,u.useSelector)(Oe)||{};var Ve=r("bmcq");const Le=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.yg),e.futuresOrderForm.changeOrderType]},Fe=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.T8),e.futuresOrderForm.changeSubOrderType]},De=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.Vj),e.futuresOrderForm.changePositionDirection]},_e=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.DX),e.futuresOrderForm.changeTimeInForce]},ze=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.Oc),e.futuresOrderForm.changeReduceOnly]},Be=()=>{const e=(0,u.useDispatch)();return[(0,u.useSelector)(Ve.kd),e.futuresOrderForm.changeIsTPSLEnabled]},Ke=()=>(0,u.useSelector)(F.nJ),{leverageInfo:qe}=me.Fy,We=({symbol:e,marginAsset:t,contractVal:r,positionSide:a,delta:n=0})=>{var l;const c=(0,s._g)(e,a),m=(0,u.useSelector)(h.Y),p=(0,u.useSelector)(d._Y),f=(0,u.useSelector)(pe.G),{leverageList:g={}}=f,y=g[e]||qe.defaultVal,b=(0,o.yh)(y),v=(0,i.$J)(),x=v[c];if(!x)return{};const S=(0,s.nn)({positions:v,marginAsset:t}),{entryPrice:k,markPrice:P,isolated:T,isolatedWallet:C,positionSize:w}=x,I=[(0,V.Z)((0,V.Z)({},x),{},{isolatedWallet:C+n})],M=(0,o.Ak)(m,I,p,f,e,!0,!1,S),{liquidationPrice:E=0}=(null===M||void 0===M?void 0:M[0])||{},N=(({markPrice:e=1,entryPrice:t=1,leverage:r=1,position:a,bracket:i,contractVal:n=0})=>{if(0===t||0===e)return 0;const{isolatedWallet:s=0,positionSize:l=0}=a,c=(0,o.yh)(r),u=(0,o.SH)(i,a);return Math.max(0,Math.min(s-u,s+l*n*(1/t-1/e)-Math.abs(l)*c*n/e))})({markPrice:P,entryPrice:k,leverage:y,position:x,bracket:(null===m||void 0===m?void 0:m[e])||[],contractVal:r}),Z=S.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),A=S.filter((e=>null===e||void 0===e?void 0:e.isolated)),O=(0,o.ot)(Z),R=(0,o.Uy)(Z,y,e),L=(0,o.sE)(A,y,e),F=null===p||void 0===p||null===(l=p[t])||void 0===l?void 0:l.crossWalletBalance,D=F+O-(R+L),_=(0,o.zW)(Z,m),z=(0,o.wj)(A)*b,B=Math.max(Math.min(D,F-z-_),0);return(0,V.Z)((0,V.Z)({maxAppend:B,maxRemovable:N},x),{},{isolated:T,isolatedWallet:C,liquidationPrice:E,marginAsset:t})},{leverageInfo:He}=me.Fy,Ue=({symbol:e,marginAsset:t,positionSide:r,delta:a=0})=>{var o;const l=(0,s._g)(e,r),c=(0,u.useSelector)(h.Y),m=(0,u.useSelector)(d._Y),p=(0,u.useSelector)(pe.G),{leverageList:f={}}=p,g=f[e]||He.defaultVal,y=(0,n.yh)(g),b=(0,i.$J)(),v=b[l];if(!v)return{};const x=(0,s.nn)({positions:b,marginAsset:t}),{entryPrice:S,markPrice:k,isolated:P,isolatedWallet:T}=v,C=[(0,V.Z)((0,V.Z)({},v),{},{isolatedWallet:T+a})],w=(0,n.Zk)(c,C,m,p,e,!0,!1,x),{liquidationPrice:I=0}=(null===w||void 0===w?void 0:w[0])||{},M=(({markPrice:e=0,entryPrice:t,leverage:r=0,position:a,bracket:i})=>{const{isolatedWallet:o=0,positionSize:s=0}=a,l=(0,n.yh)(r),c=(0,n.SH)(i,a);return Math.max(0,Math.min(o-c,o+s*(e-t)-e*Math.abs(s)*l))})({markPrice:k,entryPrice:S,leverage:g,position:v,bracket:(null===c||void 0===c?void 0:c[e])||[]}),E=x.filter((e=>!(null!==e&&void 0!==e&&e.isolated))),N=x.filter((e=>null===e||void 0===e?void 0:e.isolated)),Z=(0,n.ot)(E),A=(0,n.Uy)(E,g,e),O=(0,n.sE)(N,g,e),R=null===m||void 0===m||null===(o=m[t])||void 0===o?void 0:o.crossWalletBalance,L=R+Z-(A+O),F=(0,n.zW)(E,c),D=(0,n.wj)(N)*y,_=Math.max(Math.min(L,R-D-F),0);return(0,V.Z)((0,V.Z)({maxAppend:_,maxRemovable:M},v),{},{isolated:P,isolatedWallet:T,liquidationPrice:I,marginAsset:t})},je=e=>(0,A.G)()?We(e):Ue(e);var $e=r("6JMj");const Ge=({symbol:e})=>{const{close:t}=(0,L.iB)()[e]||{},{tickers:r={}}=(0,Se.s)((0,a.l6)(!0))||{};return r[e]||{lastPrice:Number(t)}},Je=()=>{const[e]=(0,w.z4)(),t=(0,A.G)(),r=(0,u.useSelector)(d._Y),s=(0,u.useSelector)(h.Y),l=(()=>{const e=(0,L.iB)()||{},t={};for(var r in e){const a=e[r].close?Number(e[r].close):0;t[r]={lastPrice:a}}const{tickers:i}=(0,Se.s)((0,a.l6)(!0))||{};return i||t})(),c=(0,i.dM)().map((e=>{var t;return(0,V.Z)((0,V.Z)({},e),{},{lastPrice:(null===l||void 0===l||null===(t=l[e.symbol])||void 0===t?void 0:t.lastPrice)||e.lastPrice})})),{preOrders:m}=(0,u.useSelector)($e.b),p=(0,u.useSelector)(pe.G)||{},{useLastPrice:f,assetMode:g}=(0,Ie.F7)(),{riskRatio:y,assetsRateEquity:b,assetsMM:v}=It(t),x=de();return t?(0,o.Ak)(s,c,r,p,e,!0,f,void 0,m):g?(0,n.bG)({riskRatio:y,assetsRateEquity:b,assetsMM:v,assetIndexes:x,brackets:s,positions:c,balances:r,leverages:p,useLastPrice:f,openOrders:m}):(0,n.Zk)(s,c,r,p,e,!0,f,void 0,m)};var Ye=r("mE5e");function Qe({symbol:e,tickSize:t}){const{getI18n:r}=(0,N.yk)(),a=Je(),i=Re(),n=(0,w.AM)(),{unit:o}=(0,Ie.F7)(),s=(0,Pe.p)(t),l=(0,v.useMemo)((()=>r("pnl",{defaultValue:"PNL"})),[r]);return(0,v.useMemo)((()=>a.filter((({symbol:t,positionSize:r})=>{const a=Number(r);return t===e&&0!==a})).map((({id:e,entryPrice:t,positionSize:r,unrealizedPnl:a,symbol:c,lastPrice:u})=>{var d;const{contractVal:m=0}=n[c]||{},p=null===(d=i[c])||void 0===d?void 0:d.markPrice;let f=0;o===q.SW.cont||o===q.AO.coin?f=Number(r):o===q.SW.coin?f=(0,Ce.unitChangeCoinQty)({quantity:Number(r),contractVal:m,price:u||p,precision:s}):o===q.AO.usdt&&(f=(({quantity:e,price:t,func:r=Ye.mD,precision:a=2,format:i})=>r(e*t,a,i))({quantity:Number(r),price:u||p,precision:s}));const g=Number(a.toFixed(2));return{id:e,price:t,quantity:f,isBuy:f>0,PNL:g,text:`${l} ${g}`,positionTypeText:l}}))),[a,e,o,i,n,s,l])}var Xe=r("IpC4");r("viQn");function et(e){const{getI18n:t}=(0,N.yk)(),{positionMode:r=!1}=(0,Ie.F7)(),a=r&&e?e:x.RS.BOTH;return(0,se.ad)({positionMode:r,positionDirection:a,getFutI18n:t})}var tt=r("SnVb");function rt({quantity:e}){const[t]=(0,Ie.eY)(),[r,[a,i]]=(0,w.z4)(),n=(0,w.j2)(),o=(0,A.G)(),{marginAsset:s}=n,{getI18n:l}=(0,N.yk)(),{quantityPrecision:c,equalQtyPrecision:u=2,minQty:d,tickSize:m}=n,p=Number(d),f=(0,se.p8)(m);let g,y=c,h="",b=l("entry-size",{defaultValue:"Enter Size"});const v=l("Cont"),S=Number((0,w.uH)(!0)),{contractVal:k}=n,{curMaxBuyAmount:P,curMaxSellAmount:T}=Q(),C=S,I=~e.indexOf("%");let M,E;I?(M=(0,H.Jp)(parseFloat(e)/100,P).toNumber(),E=(0,H.Jp)(parseFloat(e)/100,T).toNumber()):M=E=Number(e);const Z={quantity:e,buyQty:M,sellQty:E,buyCont:0,sellCont:0};let O;return o?t===q.SW.coin?(g=a,y=u,Z.buyCont=Number((0,tt.Z)({orderType:x.Jm.MARKET,contractVal:k,qty:M,lastPrice:S,isDelivery:o})),Z.sellCont=Number((0,tt.Z)({orderType:x.Jm.MARKET,contractVal:k,qty:E,lastPrice:S,isDelivery:o})),O=1,!I&&Number(e)&&(h=Z.buyCont<1?C?`${l("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,H.Jp)(k/C).toFixed(y,0)} ${a} \u2248 1 ${v}`:"":` \u2248 ${Z.buyCont||0} ${v}`)):(y=0,g=v,b=`1 ${l("Cont",{defaultValue:"Cont"})} = ${k} ${i}`):t===q.AO.usdt?(g=s,y=f,Z.buyCont=S?M/S:0,Z.sellCont=S?E/S:0,O=p,!I&&Number(e)&&(h=Z.buyCont<p?C?`${l("mininumQtyPrefix",{defaultValue:"Minimum Qty is"})} ${(0,H.Jp)(p*C).toFixed(y,0)} ${s} \u2248 ${p} ${a}`:"":` \u2248 ${(0,H.GW)(Z.buyCont||0,c)} ${a}`,C||(h=""))):(g=a,y=c),(0,V.Z)({cUnit:g,precision:y,helperText:h,ticker:n,minContQty:O,placeholder:b},Z)}const at=e=>e.transferAssets,it=e=>e.transferAssets.assets;function nt(){return(0,u.useSelector)(at)}function ot(){return(0,u.useSelector)(it)}var st=r("2srY"),lt=r.n(st),ct=r("frZ3"),ut=r("wRKo");const dt=(0,a.l6)(!0),mt="t.third";let pt,ft;const gt=Array.from({length:4},(()=>mt)),yt=(e="buy")=>{const t=Array.from({length:4},(()=>e)),r=(0,w.Fg)().isLight?ut.Wb:ut.$_,{0:i,1:n}=(0,v.useState)(""),{0:o,1:s}=(0,v.useState)(""),{0:l,1:c}=(0,v.useState)(!0),u=(0,v.useRef)(0),{0:d,1:m}=(0,v.useState)("connected"===i?t:gt),{0:p,1:f}=(0,v.useState)(0);(0,v.useEffect)((()=>dt.getStreamTickers().subscribe((()=>{pt=Date.now()}))),[]);const g=(0,v.useRef)(new Set([]));return(0,v.useEffect)((()=>(0,a.l6)(!0).getOrderbookStatusStream().subscribe((({status:e})=>{g.current.has(e)?c("connected"===e):g.current.add(e)}))),[d]),(0,ct.Z)((()=>{if(u.current>10)return n("disconnected"),void m(gt);"reconnecting"===i?u.current+=1:u.current=0}),l?null:1e3),(0,v.useEffect)((()=>(0,a.l6)(!0).getSocketEventsStream().subscribe((({event:e,data:t})=>{"reConnected"===e&&(u.current=0,n("reconnecting"))})))),(0,ct.Z)((()=>{if(pt&&Date.now()-pt>=5e3&&ft!==pt){ft=pt;m([e,e,e,mt]),n("slow")}else m(t),n("stable")}),l?1e3:null),(0,ct.Z)((()=>{const e=Array.from({length:4},((e,t)=>t<=p?"primary":mt));f((p+1)%4),s(` ${Array.from({length:(p+1)%4},(()=>".")).join("")}`),n("reconnecting"),m(e)}),!l&&u.current<=10?500:null),{status:i,colorList:d.map((e=>lt()(r.colors,e,e))),connectingDeco:o}};var ht=r("tN1Z"),bt=r("Zl10"),vt=r.n(bt),xt=r("h++M"),St=r.n(xt),kt=r("QlFx");const Pt=(e,t,r)=>r?Ct(e,t):Tt(e,t),Tt=(e,t)=>{const r=(0,u.useSelector)(d._Y),a=(0,u.useSelector)(h.Y),o=(0,i.dM)(),l=[],c=e("header-Cross",{defaultValue:"Cross"}),m=(0,s.L6)(o.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===x.PR.BOTH||t&&r!==x.PR.BOTH)})));return Object.values(m).forEach(((i=[])=>{const[o,s]=vt()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e}=s[0]||{},t=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:i=0}=t,o=(0,n.zW)(s,a),u=(0,n.ot)(s);l.push({riskRatio:wt(o,i,u),marginBalance:i+u,maintenanceMargin:o,key:`${e}`,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${e} ${c}`})}o.forEach((r=>{const{positionSide:i,symbol:o,isolatedWallet:s=0,marginAsset:c}=r,u=(0,kt.lE)(o,e),d=(null===a||void 0===a?void 0:a[o])||[],m=(0,n.SH)(d,r),p=(0,n.nn)(r),f=t?` ${e(i,{defaultValue:St()(i)})}`:" ",g=e("headerIsolated",{defaultValue:"Isolated"});l.push({riskRatio:wt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${o}_${i}`,marginAsset:c,symbols:[o],isolated:!0,marginRatioLabel:`${u}${f} ${g}`})}))})),l},Ct=(e,t)=>{const r=(0,u.useSelector)(d._Y),a=(0,u.useSelector)(h.Y),n=(0,i.dM)(),l=[],c=e("header-Cross",{defaultValue:"Cross"}),m=(0,s.L6)(n.filter((e=>{const{positionSide:r,positionSize:a}=e;return 0!==a&&(!t&&r===x.PR.BOTH||t&&r!==x.PR.BOTH)})));return Object.values(m).forEach(((i=[])=>{const[n,s]=vt()(i,(e=>e.isolated));if(s.length>0){const{marginAsset:e,symbol:t}=s[0]||{},[i]=t.split("_"),n=(null===r||void 0===r?void 0:r[e])||{},{crossWalletBalance:u=0}=n,d=(0,o.zW)(s,a),m=(0,o.ot)(s);l.push({riskRatio:wt(d,u,m),marginBalance:u+m,maintenanceMargin:d,key:i,marginAsset:e,symbols:s.map((e=>e.symbol)),isolated:!1,marginRatioLabel:`${i} ${c}`})}n.forEach((r=>{const{positionSide:i,symbol:n,isolatedWallet:s=0,marginAsset:c}=r,u=(0,kt.lE)(n,e),d=(null===a||void 0===a?void 0:a[n])||[],m=(0,o.SH)(d,r),p=(0,o.nn)(r),f=t?` ${e(i,{defaultValue:St()(i)})}`:" ";l.push({riskRatio:wt(m,s,p),marginBalance:s+p,maintenanceMargin:m,key:`${n}_${i}`,marginAsset:c,symbols:[n],isolated:!0,marginRatioLabel:`${u}${f} ${e("headerIsolated",{defaultValue:"Isolated"})}`})}))})),l},wt=(e=0,t=0,r=0)=>{const a=t+r;return(0,Ye.JX)(a?e/a*100:0,2)},It=e=>e?Nt():Et(),Mt=(0,ht._)(((e,t,r,a)=>{let i=0,o=0;const l={},c={},u={},d=(0,s.L6)(r);return Object.entries(e).forEach((([e,r])=>{if(!r.marginAvailable)return;const s=d[e]||[],[,m]=vt()(s,(e=>e.isolated)),{crossWalletBalance:p=0}=r||{},f=(null===a||void 0===a?void 0:a[e])||{},{askRate:g=0,bidRate:y=0}=f;let h=p,b=0;if(m.length>0){const e=(0,n.zW)(m,t);h+=(0,n.ot)(m),b+=e}i+=Math.min(h*g,h*y),o+=b*g,c[e]=Math.min(h*g,h*y),l[e]=h,u[e]=b})),{riskRatio:wt(o,i),marginBalance:i,maintenanceMargin:o,assetsRateEquity:c,assetsEquity:l,assetsMM:u}})),Et=()=>{const e=(0,u.useSelector)(d._Y),t=(0,u.useSelector)(h.Y),r=(0,i.dM)(),a=de();return Mt(e,t,r,a)},Nt=()=>({riskRatio:0,marginBalance:0,maintenanceMargin:0,assetsRateEquity:{},assetsEquity:{},assetsMM:{}});function Zt(e=a.UW){const t=(0,A.G)(),r=(0,u.useSelector)((e=>e.setting)),{CoinFutures:{layout:i},USDTFutures:{layout:n}}=r,o=t?i===e:n===e;(0,ne.C3)();return o}const At=({symbol:e})=>{const{getI18n:t}=(0,N.yk)(),r=(0,w.iB)(),{baseAsset:a,marginAsset:i,isDelivery:n}=r[e]||{},{unit:o}=(0,Ie.F7)();return n?o===q.SW.coin?a:t("Cont"):o===q.AO.usdt?i:a}},k7O1:(e,t,r)=>{"use strict";r.d(t,{d0:()=>u,co:()=>m});var a=r("/SIk"),i=r("Vg22"),n=r("l4n0"),o=r("At/5"),s=r("AHTf"),l=r("eXOl"),c=(r("/M83"),r("FOuV"));const u=(e=!1)=>{const t=(0,i.useDispatch)(),{pathname:r,search:u}=(0,n.Hb)(),m=(0,l.AM)(),p=(0,o.C)();return(0,a.useCallback)((({isBlank:t=!1,stateSymbol:a,isDeliveryColumn:i=e,electronUpdateTabs:n,resPathList:o=[]})=>{if(o.length<1){const e=d(a,m,i);o=[i?c.yX.delivery:c.yX.futures,e]}const l=r.split("/"),u=l.slice(0,l.length-o.length).concat(o),p=a||o[o.length-1],f=(u.join("/"),m[p]||m[p.split("_").join("")]),{contractType:g}=f;{let e=u[u.length-1],r=`binance://trade/quarterly/${e}${n?"":`?update=true&dateSymbol=${p}&refresh=${t}`}`;return i||(g===s.Yp.PERPETUAL&&(e="string"===typeof e&&e.split("_").join("")),r=`binance://trade/perpetual/${e}${n?"":`?update=true&dateSymbol=${p}&refresh=${t}`}`),void window.open(r,"_blank")}}),[t.pageStore,t.products,p,e,r,m,u])},d=(e,t,r=!1)=>{let a="";if(r){const{pair:r,contractType:i}=t[e]||{};a=[r,s.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbol:n}=t[e]||{};a=i===s.Yp.PERPETUAL?n:[r,s.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return a},m=(e,t,r=!1)=>{let a="";const i=r?c.yX.delivery:c.yX.futures;if(r){const{pair:r,contractType:i}=t.delivery[e]||{};a=[r,s.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:i,symbolDisplay:n}=t.perpetual[e]||{};a=i===s.Yp.PERPETUAL?n.split("/").join("_"):[r,s.Yp[i]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return[i,a]}},vJ4P:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var a=r("/SIk"),i=r("AHTf");function n(){const{0:e,1:t}=(0,a.useState)({});return(0,a.useEffect)((()=>(0,i.BN)().getContractInfoStream().subscribe((e=>{t(e)}))),[]),e}},"3AuT":(e,t,r)=>{"use strict";r.d(t,{U:()=>b});var a=r("5vwO"),i=r("AHTf"),n=r("pVAJ"),o=r("W2gp"),s=r("H8sf"),l=r.n(s),c=r("/SIk"),u=r("Vg22"),d=r("TNnZ"),m=r("4m5F"),p=r("3p6E"),f=r("ph+q"),g=r("bi7V"),y=r("wdcV");const h=(0,i.l6)(!0),b=()=>{const e=(0,n._n)(),{isExistFutureAccount:t}=(0,n.Pc)(),[r]=(0,n.z4)(),i=(0,u.useDispatch)(),s=(0,c.useRef)({}),[b=""]=r.split("_"),{run:v}=(0,g.Z)((()=>i.position.updatePosition(s.current)),300);(0,p.aD)(),(0,n.mL)(),(0,n.S_)(),(0,n.U6)(r,h,!0),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets("",!0),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>h.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e)}))),[i.markPrice,r]),(0,c.useEffect)((()=>h.getIndexPriceStream(b).subscribe((e=>{i.indexPrice.updateStateImmutable({[r]:(0,a.Z)((0,a.Z)({},e[b]),{},{symbol:r})})}))),[i.indexPrice,b,r]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:m.SW.cont}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getPriceProtection(d.x),i.balance.getBalance(!0),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:b}),i.tradeForbidden.getCoolingPeriodConfig())}),[r,b,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier]);const x=(0,f.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,y.kh)(e);s.current=l()({},s.current,r),v()}}));(0,c.useEffect)((()=>h.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),x(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return h.getStreamTickers().subscribe((e=>{const t=(0,y.kh)(Object.values(e));s.current=l()({},s.current,t),v()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return h.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,o.FB)(e,"asset"),n=Object.values(t).reduce(((e,t)=>{const{symbol:r="",positionSide:i}=t;return e[(0,y._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),s.current=l()({},s.current,n),v()}))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!0);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!0)}),18e4);return()=>clearInterval(e)}}),[e,t])}},"4Dm0":(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var a=r("l4n0");function i(){const{pathname:e}=(0,a.Hb)();return e.includes("delivery")}},"2ynj":(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var a=r("Vg22");const i=e=>e.feeTier;function n(){return(0,a.useSelector)(i)}},"57Vj":(e,t,r)=>{"use strict";r.d(t,{D:()=>x,n:()=>S});var a=r("5vwO"),i=r("AHTf"),n=r("pVAJ"),o=r("W2gp"),s=r("H8sf"),l=r.n(s),c=r("/SIk"),u=r("Vg22"),d=r("ph+q"),m=r("OdNO"),p=r("Fidm"),f=r("4m5F"),g=r("3p6E"),y=r("Gbz3"),h=r("bi7V"),b=r("wdcV");const v=(0,i.l6)(!0),x=()=>{const e=(0,n._n)(),{isExistFutureAccount:t}=(0,n.Pc)(),[r]=(0,n.z4)(),i=(0,u.useDispatch)(),{getI18n:s}=(0,y.yk)(),m=(0,c.useRef)({}),{run:x}=(0,h.Z)((()=>i.position.updatePosition(m.current)),300);(0,g.aD)(),(0,n.mL)(),(0,n.S_)(),(0,c.useEffect)((()=>{i.userCenter.queryCurrency(),i.products.queryFuturesProduct(),i.bracket.getBrackets(),i.symbolConfigInfo.querySymbolConfigInfo()}),[i.userCenter,i.bracket,i.products,i.symbolConfigInfo]),(0,c.useEffect)((()=>{e&&t&&(i.leverage.getUserLeverageData(r),i.position.queryPosition({symbol:r}),i.preference.getOrderConfirmation(),i.preference.getUnit({data:{unit:f.AO.coin}}),i.preference.getFuturesPnlBasis(),i.preference.getPositionMode(),i.preference.getMultiAssetMarginEnableConfig().then((e=>{e&&i.preference.getAssetMode()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),i.preference.getPriceProtection(p.xK),i.balance.getBalance(!1),i.futureMarket.queryFuturesFavorites(),i.feeTier.getFeeTier({name:r}),i.tradeForbidden.getCoolingPeriodConfig())}),[r,e,t,i.preference,i.balance,i.leverage,i.position,i.futureMarket,i.feeTier,i.grid]),(0,c.useEffect)((()=>v.getMarkPriceStream(r).subscribe((e=>{i.markPrice.updateStateImmutable(e),i.indexPrice.updateStateImmutable(e)}))),[i.indexPrice,i.markPrice,r]);const S=(0,d.D)((t=>{if(e){const e=Object.values(t).map((e=>({symbol:null===e||void 0===e?void 0:e.symbol,markPrice:null===e||void 0===e?void 0:e.markPrice}))),r=(0,b.kh)(e);m.current=l()({},m.current,r),x()}}));(0,c.useEffect)((()=>v.getMarkPriceMiniStream().subscribe((e=>{i.markPrice.updateStateImmutable(e),S(e)}))),[]),(0,c.useEffect)((()=>{if(e&&t)return v.getStreamTickers().subscribe((e=>{const t=(0,b.kh)(Object.values(e));m.current=l()({},m.current,t),x()}))}),[e,t]),(0,c.useEffect)((()=>{if(e&&t)return v.getUserAssetsStream().subscribe((({balances:e,positions:t})=>{const r=(0,o.FB)(e,"asset"),n=Object.values(t).reduce(((e,t)=>{const{symbol:r,positionSide:i}=t;return e[(0,b._g)(r,i)]=(0,a.Z)((0,a.Z)({},t),{},{pushTime:Date.now()}),e}),{});i.balance.mergeState(r),m.current=l()({},m.current,n),x()}))}));const k=(0,d.D)((({leverage:e})=>{if(e){const{symbol:t,leverage:a}=e;r===t?i.leverage.updateCurrentLeverage({symbol:t,leverage:a}):i.leverage.updateLeverageList({symbol:t,leverage:a})}}));(0,c.useEffect)((()=>{if(e&&t)return v.getUserAccountConfigUpdateStream().subscribe((e=>k(e)))})),(0,c.useEffect)((()=>{if(e&&t){i.serviceStatus.getServiceStatus(!1);const e=setInterval((()=>{i.serviceStatus.getServiceStatus(!1)}),18e4);return()=>clearInterval(e)}}),[e,t])},S=()=>{const e=(0,n._n)(),{isExistFutureAccount:t}=(0,n.Pc)(),r=(0,u.useDispatch)();(0,c.useEffect)((()=>{e&&t&&m.C&&r.orders.queryOpenOrder()}),[e,t,r.orders])}},"869M":(e,t,r)=>{"use strict";r.d(t,{yk:()=>s,Gv:()=>l,$G:()=>c});var a=r("Tr4L"),i=r("U0yl");const n="futures-trade",o="futures-ui",s=()=>(0,i.Z)(n,o),l=e=>`${n}-${e}`,c=()=>(0,a.$)(o)},unna:(e,t,r)=>{"use strict";r.d(t,{Nm:()=>c,C3:()=>s,ZF:()=>l});var a=r("Vg22"),i=r("AHTf"),n=r("wqQ1");const o=e=>e.layout.pageLayout,s=()=>(0,a.useSelector)(o)||i.$f,l=()=>(0,a.useSelector)(n.qb)||i.$f,c=()=>(0,a.useSelector)(n.As)||i.$f},JlsY:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var a=r("FOuV"),i=r("Gbz3");const{UFutures:{precision:n},CFutures:{precision:o}}=a.dk;function s(){return(0,i.G3)()?o:n}},"8Y2u":(e,t,r)=>{"use strict";r.d(t,{xm:()=>c,$J:()=>d,dM:()=>m,kD:()=>p,Dj:()=>f,cO:()=>g,t2:()=>y,Xb:()=>h});var a=r("5vwO"),i=r("Vg22"),n=r("eXOl"),o=r("tN1Z"),s=r("wdcV");const l=e=>"undefined"!==typeof e?Number(e):void 0,c=(0,o._)(((e,t)=>Object.entries(e).reduce(((e,[r,i])=>{const{symbol:n}=i||{},o=t[n]||{},{close:s,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:h,marketStepSize:b}=o;return e[r]=(0,a.Z)((0,a.Z)({lastPrice:s,contractVal:c,marginAsset:u,baseAsset:d,quoteAsset:m,quantityPrecision:p,pricePrecision:f,equalQtyPrecision:g,tickSize:y,limitStepSize:h,marketStepSize:b},i),{},{askNotional:l(i.askNotional),bidNotional:l(i.bidNotional),cumRealized:l(i.cumRealized),entryPrice:l(i.entryPrice),isolatedWallet:l(i.isolatedWallet),markPrice:l(i.markPrice),notionalValue:l(i.notionalValue),positionSize:l(i.positionSize),unrealizedProfit:l(i.unrealizedProfit)}),e}),{}))),u=(0,o._)((e=>(0,s.J9)(e)));function d(){const e=(0,i.useSelector)((e=>e.position.positionMap)),t=(0,n.Vh)();return c(e,t)}function m(){const e=d();return u(e)}function p(){const{length:e}=m();return e}const f=()=>(0,i.useSelector)((e=>e.position.validPositionKeyArray)),g=e=>(0,i.useSelector)((t=>{var r;return null===(r=t.position.positionMap)||void 0===r?void 0:r[e]})),y=(e,t)=>(0,i.useSelector)((r=>{var a,i;return null===(a=r.position.positionMap)||void 0===a||null===(i=a[e])||void 0===i?void 0:i[t]})),h=()=>(0,i.useSelector)((e=>e.position.hideOtherSymbol))},"+dPF":(e,t,r)=>{"use strict";r.d(t,{zu:()=>k,IV:()=>Z,UI:()=>C,t1:()=>w,CJ:()=>E,I3:()=>N,kN:()=>A,hN:()=>P,F7:()=>x,r8:()=>T,W5:()=>I,aT:()=>M,eY:()=>S});var a=r("5vwO"),i=r("/SIk"),n=r("Vg22"),o=r("AHTf");const s=e=>e.preference,l=e=>e.preference.displayMarginTypeAndLeverage,c=e=>e.preference.enableAdvancedTPSL,u=e=>e.preference.positionMode,d=e=>e.preference.usdtFuturesUnit,m=e=>e.preference.coinFuturesUnit,p=e=>e.preference.assetMode,f=e=>e.preference.TPSLNotify,g=e=>e.preference.isEnableFundingFee,y=e=>e.preference.fundingFee,h=e=>e.preference.fundingFeeRange,b=e=>e.preference.orderConfirmation;var v=r("kZs2");function x(){const e=(0,n.useSelector)(s),t=(0,o.nM)();return(0,a.Z)((0,a.Z)({},e),{},{unit:t?e.coinFuturesUnit:e.usdtFuturesUnit})}function S(){const e=(0,n.useDispatch)(),t=(0,o.nM)(),r=(0,n.useSelector)(d),a=(0,n.useSelector)(m);return[t?a:r,e.preference.changeUnit]}function k(){const e=(0,n.useDispatch)();return[(0,n.useSelector)(p),e.preference.changeAssetMode]}function P(){const e=(0,n.useDispatch)();return[(0,n.useSelector)(u),(0,i.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[])]}function T(){return{showPreferencePanel:(0,i.useCallback)((e=>{v.TB.emit(v.FP.SHOW_PREFERENCE_PANEL,e)}),[])}}function C(){const e=(0,n.useDispatch)();return[(0,n.useSelector)(l),t=>{e.preference.updateState({displayMarginTypeAndLeverage:t})}]}function w(){const e=(0,n.useDispatch)();return[(0,n.useSelector)(c),t=>{e.preference.updateState({enableAdvancedTPSL:t})}]}function I(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{var t,r;null===(t=e.current)||void 0===t||null===(r=t.showResponsibleConfigPanel)||void 0===r||r.call(t)}),[]);return{responsiblePanelRef:e,showResponsiblePanel:t}}function M(){const e=(0,n.useDispatch)();return[(0,n.useSelector)(f),e.preference.updateTPSLNotify]}function E(){const e=(0,n.useDispatch)();return[{isEnableFundingFeeNotify:(0,n.useSelector)(g),fundingFee:(0,n.useSelector)(y)},e.preference.updateFundingFeeNotify]}function N(){return(0,n.useSelector)(h)}function Z(){return(0,n.useDispatch)().preference.changeOrderConfirmation}function A(){return[(0,n.useSelector)(b),Z()]}},IpC4:(e,t,r)=>{"use strict";r.d(t,{Q:()=>s});var a=r("4m5F"),i=r("+dPF");const{coin:n,usdt:o}=a.AO;function s(){const{unit:e}=(0,i.F7)();return{isCoinUnit:e===n,isUSDTUnit:e===o}}},viQn:(e,t,r)=>{"use strict";r.d(t,{I:()=>s});var a=r("/SIk"),i=r("pVAJ"),n=r("eXOl"),o=r("FOuV");function s(e){const t=(0,i.tZ)(),r=(0,n.AM)(),{pair:s="",quoteAsset:l}=r[e]||{};return(0,a.useMemo)((()=>`/${t}/${o.yf}${"USD"===l?"/quarterly":""}/3?contract=${s}`),[t,l,s])}},bi7V:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(e,t,r)=>{const i=Array.isArray(t)?t:[],n="number"===typeof t?t:r||0,o=(0,a.useRef)(!1),s=(0,a.useRef)(),l=(0,a.useRef)(e);l.current=e;const c=(0,a.useRef)([]),u=(0,a.useCallback)((()=>{s.current&&clearTimeout(s.current),s.current=void 0}),[]),d=(0,a.useCallback)(((...e)=>{c.current=e,s.current||(s.current=setTimeout((()=>{l.current(...c.current),s.current=void 0}),n))}),[n,u]);return(0,a.useEffect)((()=>u),[]),(0,a.useEffect)((()=>{o.current?d():o.current=!0}),[...i,d]),{run:d,cancel:u}}},GG68:(e,t,r)=>{"use strict";r.d(t,{WA:()=>l,s7:()=>c});var a=r("/SIk"),i=r("4xt1"),n=r("jQmP"),o=r("IpC4"),s=r("k2tD");const l=({quantity:e,price:t,func:r=s.mD,precision:a=2,format:i})=>r(e*t,a,i),c=e=>{const t=(0,n.p)(e.tickSize),{isCoinUnit:r}=(0,o.Q)(),c=(0,a.useCallback)((({quantity:e,price:a,func:i=s.mD,precision:n=t,format:o})=>r?e:l({quantity:e,price:a,precision:n,func:i,format:o})),[r,t]),u=(0,a.useCallback)((()=>r?e.baseAsset:e.marginAsset),[r,e]),d=(0,a.useCallback)((({quantity:e,price:a,func:n=s.mD,qtyPrecision:o=2,tickSizePrecision:c,format:d=!0})=>{const m=u();return r?`${(0,i.uf)(e,o)} ${m}`:`${l({quantity:e,price:a,precision:c||t,func:n,format:d})} ${m}`}),[u,t,r]);return(0,a.useMemo)((()=>({getQuantity:c,getAssetLabel:u,getFormatedQuantity:d})),[u,c,d])}},"lP6+":(e,t,r)=>{"use strict";r.d(t,{z:()=>m});var a=r("AHTf"),i=r("pVAJ"),n=r("frZ3"),o=r("/SIk"),s=r("M8Qk"),l=r("S24M");const c=(0,a.l6)(!0);let u,d;const m=()=>{const e=(0,i._n)(),{isExistFutureAccount:t}=(0,i.Pc)();(0,o.useEffect)((()=>{if(e&&t)return c.getStreamTickers().subscribe((()=>{u=Date.now()}))}),[e,t]),(0,n.Z)((()=>{u&&Date.now()-u>=5e3&&d!==u&&(d=u,(0,s.gp)({t:"ws_nodata"}),(0,l.j)("ws_nodata",{source:"futures",isOnline:window.navigator.onLine,visibilityState:document.visibilityState}))}),1e3)}},Q2PN:(e,t,r)=>{"use strict";r.d(t,{Pv:()=>a,_Y:()=>i,JW:()=>n});const a=e=>e.balance.balance,i=e=>e.balance.balance,n=e=>e.balance},IOB8:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=e=>e.bracket},KUZ0:(e,t,r)=>{"use strict";r.d(t,{W9:()=>a,mS:()=>i,nJ:()=>n,zO:()=>o});const a=e=>e.futureMarket.futuresFavorites,i=e=>e.futureMarket.futuresMarketTabs,n=e=>e.futureMarket.placeholderSymbols,o=e=>e.futureMarket.isLoadedSectionInfo},xGav:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});const a=e=>e.leverage},"2hF0":(e,t,r)=>{"use strict";r.d(t,{w:()=>oe});var a=r("IiM5"),i=r("5vwO"),n=r("47tN"),o=r("rfrl"),s=r("H8sf"),l=r.n(s),c=r("9sz9");const u=(0,c.NY)()({name:"assetIndex",state:{},reducers:{mergeState(e,t){const r={};return Object.values(t).forEach((e=>{const t=e.symbol.replace(/USD$/,"");r[t]=e})),(0,o.ZP)(e,(e=>l()({},e,r)))}},effects:{async getAssetIndex(){const{success:e,data:t}=await(0,n.p)();if(e){const e=null===t||void 0===t?void 0:t.map((e=>(0,i.Z)((0,i.Z)({},e),{},{askBuffer:Number(e.askBuffer),askRate:Number(e.askRate),bidBuffer:Number(e.bidBuffer),bidRate:Number(e.bidRate),index:Number(e.index)})));this.mergeState(e)}}}});var d=r("YLfc"),m=r("W2gp"),p=r("8HFP");const f=(0,c.NY)()({name:"balance",state:{loading:!0,isError:!1,balance:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState(e,t){const r=l()({},e.balance,t);return(0,i.Z)((0,i.Z)({},e),{},{loading:!1,isError:!1,balance:r})}},effects:e=>({async getBalance(t){const{success:r,data:a=[]}=t?await(0,p.ig)():await(0,p.kL)(),n=t?a:a.map((e=>(0,i.Z)((0,i.Z)({},e),{},{availableBalance:"availableBalance"in e?Number(e.availableBalance):0,crossWalletBalance:Number(e.crossWalletBalance),initialMargin:Number(e.initialMargin),maintenanceMargin:Number(e.maintenanceMargin),marginBalance:Number(e.marginBalance),unrealizedProfit:Number(e.unrealizedProfit),walletBalance:Number(e.walletBalance)})));if(r){const t=(0,m.FB)(n,"asset"),r=n.map((e=>e.asset));e.transferAssets.updateState({assetTypes:r}),this.mergeState(t||{})}else this.updateState({isError:!0})}})});var g=r("wZts");const y=(0,c.NY)()({name:"bracket",state:{isError:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,mergeState:(e,t)=>(0,i.Z)((0,i.Z)({},e),{},{isError:!1},t)},effects:{async getBrackets(e=""){let t;try{t=await(0,g.v_)("/bapi/futures/v1/friendly/future/common/brackets",{symbol:e},{enableErrorMsgIntercept:!1})}catch(r){t={success:!1}}if(t.success){const{brackets:e=[]}=t.data||{},r=(0,m.FB)(e,"symbol","riskBrackets");this.mergeState(r||{})}else this.updateState({isError:!0})}}});var h=r("q5wW");const b=(0,c.NY)()({name:"feeTier",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getFeeTier(e){const t=await(0,h.Io)(e);this.updateState(t)}}});var v=r("yLwz"),x=r("mlwG"),S=r.n(x);const k=(0,c.NY)()({name:"futureMarket",state:{futuresFavorites:[],sortInfo:{index:2,desc:2},radioWord:"change",futuresMarketTabs:[{description:"",display:"USDT-MARIN",ruleNumber:1e3,sectionKey:"USDT-MARIN",sortValue:1},{description:"",display:"COIN-MARIN",ruleNumber:4e3,sectionKey:"COIN-MARIN",sortValue:2}],isLoadedSectionInfo:!1,placeholderSymbols:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryFuturesFavorites(){const{success:e=!1,data:t}=await(0,v.eq)(),r=(t||"").length?t.split(","):[];if(e){var a,i;const e=null===(a=JSON.parse(localStorage.getItem("persist:root")))||void 0===a?void 0:a.futureMarket,t=(null===(i=JSON.parse(e||null))||void 0===i?void 0:i.futuresFavorites)||[];let n=!1;r.length!==t.length&&(n=!0);for(let a=0;a<t.length;a++){const e=t[a];-1===r.indexOf(e)&&(n=!0)}this.updateState({futuresFavorites:n?r:t})}},async oprFuturesFavorite({values:e,isLoggedIn:t},r){const a=r.futureMarket.futuresFavorites;if(this.updateState({futuresFavorites:e}),!t)return null;const i=await(0,v.YM)({optionalSymbols:S()(e.join(","),",")});return null!==i&&void 0!==i&&i.success||this.updateState({futuresFavorites:a}),i},async getSelectionInfo(){const{success:e=!1,data:t}=await(0,v.T)({pathFilter:!0});e&&t.length&&this.updateState({futuresMarketTabs:t}),this.updateState({isLoadedSectionInfo:!0})},async getSymbolExtInfo(){const{success:e=!1,data:t}=await(0,v.TV)({pathFilter:!0});e&&t.length&&this.updateState({placeholderSymbols:t})}}});var P=r("iV55");const T=(0,c.NY)()({name:"grid",state:{openGrids:{loading:!1,data:[]}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryOpenGrids(e){this.updateStateImmutable({openGrids:{loading:!0}});const{success:t,data:r}=await(0,P.q)(e);t&&this.updateState({openGrids:{loading:!1,data:r||[]}})}}}),C=(0,c.NY)()({name:"indexPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{}});var w=r("AHTf"),I=r("Feu0");const M=(0,c.NY)()({name:"layout",state:{pageLayout:void 0},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({toggleLayout(t){e.pageStore.updateState({showSetting:!1,isLayoutChanging:!0}),this.updateState({pageLayout:t}),I.Q.erase(w.IF),I.Q.write(w.IF,t)}})});var E=r("I+CG"),N=r("FOuV");const{leverageInfo:Z}=N.Fy,A=(0,c.NY)()({name:"leverage",state:{curLeverage:Z.defaultVal,leverageList:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updateCurrentLeverage(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r}),n=r;return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a,curLeverage:n})},updateLeverageList(e,{symbol:t,leverage:r}){const a=(0,i.Z)((0,i.Z)({},e.leverageList),{},{[t]:r});return(0,i.Z)((0,i.Z)({},e),{},{leverageList:a})}},effects:{async getUserLeverageData(e){const t=await(0,E.bK)(),{success:r,data:a}=t;if(r&&!Object.prototype.hasOwnProperty.call(a,"error")&&(null===a||void 0===a?void 0:a.length)>0){const t=(0,m.FB)(a,"symbol","leverage"),r=null===t||void 0===t?void 0:t[e];this.updateState({leverageList:t,curLeverage:r})}},async updateUserLeverage({symbol:e,leverage:t}){const r=await(0,E.Z)({symbol:e,leverage:t}),{success:a}=r;return a&&this.updateCurrentLeverage({symbol:e,leverage:t}),r}}});var O=r("gx5y");const R=(0,c.NY)()({name:"marginType",state:{marginType:"CROSSED"},reducers:{updateState:(e,t)=>({marginType:t})},effects:{async changeMarginType({symbol:e,marginType:t}){const{success:r,data:a={}}=await(0,O.W)({symbol:e,marginType:t});return r&&this.updateState(a.marginType||N.Yl.CROSSED),a}}});var V=r("xgLV");const L=(0,c.NY)()({name:"markPrice",state:{},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async queryMarkPrice(e){const t=await(0,V.m4)(e);this.updateStateImmutable(t)}}});var F=r("GpFh"),D=r("SRBl"),_=r("PuIx"),z=r.n(_),B=r("wdcV");const K=(e,t,r,a,i)=>{if("initialMarkPrice"===r)return e||t||a.markPrice},q=(0,c.NY)()({name:"position",state:{apiError:!1,hideOtherSymbol:!1,onlySymbol:"",validPositionKeyArray:[],positionMap:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable,updatePosition(e,t){const{positionMap:r,validPositionKeyArray:a,hideOtherSymbol:n,onlySymbol:s}=e,l=(0,F.Z)(e,["positionMap","validPositionKeyArray","hideOtherSymbol","onlySymbol"]),c=(0,o.ZP)(r,(e=>z()(e,t,K)));let u=(0,B.J9)(c).filter((e=>!n||(null===e||void 0===e?void 0:e.symbol)===s)).map((e=>(0,B._g)(e.symbol,e.positionSide)));return u.length===a.length&&u.every(((e,t)=>e===a[t]))&&(u=a),(0,i.Z)({positionMap:c,validPositionKeyArray:u,hideOtherSymbol:n,onlySymbol:s},l)},hideOtherSymbol(e,t){const{positionMap:r,validPositionKeyArray:a}=e,n=(0,F.Z)(e,["positionMap","validPositionKeyArray"]),{hideOtherSymbol:o,onlySymbol:s}=t;let l=(0,B.J9)(r).filter((e=>!o||(null===e||void 0===e?void 0:e.symbol)===s)).map((e=>(0,B._g)(e.symbol,e.positionSide)));return l.length===a.length&&l.every(((e,t)=>e===a[t]))&&(l=a),(0,i.Z)((0,i.Z)({positionMap:r,validPositionKeyArray:l},n),{},{hideOtherSymbol:o,onlySymbol:s})},setOrderbookPrice(e,t){const{price:r,symbol:a}=t,{positionMap:n}=e,s=(0,F.Z)(e,["positionMap"]),l=(0,o.ZP)(n,(e=>{const t=(0,B._g)(a,"LONG"),i=(0,B._g)(a,"SHORT"),{[a]:n,[t]:o,[i]:s}=e;return[n,o,s].forEach(((e={})=>{e.selectPrice=r})),e}));return(0,i.Z)({positionMap:l},s)}},effects:e=>({async queryPosition({symbol:t}){const r=(0,w.nM)()?D.G2:D.vY,{data:a,success:n}=await r({});n?this.updateState({apiError:!1}):this.updateState({apiError:!0});const o=(a||[]).reduce(((e,t)=>{const r=t||{},{symbol:a,positionSide:n,collateral:o,askNotional:s,bidNotional:l,cumRealized:c,entryPrice:u,isolatedWallet:d,markPrice:m,initialMarkPrice:p,notionalValue:f,positionAmount:g,unrealizedProfit:y}=r,h=(0,F.Z)(r,["symbol","positionSide","collateral","askNotional","bidNotional","cumRealized","entryPrice","isolatedWallet","markPrice","initialMarkPrice","notionalValue","positionAmount","unrealizedProfit"]);return e[(0,B._g)(a,n)]=(0,i.Z)({symbol:a,positionSide:n,marginAsset:o,askNotional:Number(s),bidNotional:Number(l),cumRealized:Number(c),entryPrice:Number(u),isolatedWallet:Number(d),markPrice:Number(m),initialMarkPrice:Number(p),notionalValue:Number(f),positionSize:Number(g),unrealizedProfit:Number(y)},h),e}),{}),{isolated:s}=(null===o||void 0===o?void 0:o[t])||{isolated:!1},l=s?N.Yl.ISOLATED:N.Yl.CROSSED;e.marginType.updateState(l),this.updatePosition(o)}})});var W=r("r/Qd"),H=r("t0pL"),U=r("4xt1"),j=r("kZs2"),$=r("4m5F"),G=r("C1dj"),J=r("s02S"),Y=r("EPGa");const Q=(0,c.NY)()({name:"preference",state:{orderConfirmation:{LIMIT:!1,MARKET:!1,STOP:!1,STOP_MARKET:!1,POST_ONLY:!1},priceProtection:!0,positionMode:!1,assetMode:!1,multiAssetMarginEnable:!1,usdtFuturesUnit:$.AO.coin,coinFuturesUnit:$.SW.cont,useLastPrice:!1,queryUnitFinished:void 0,showFlashOrder:!1,isEnableFundingFee:!1,fundingFee:.25,fundingFeeRange:{cap:.75,floor:1e-4},TPSLNotify:!1,displayMarginTypeAndLeverage:!0,enableAdvancedTPSL:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:e=>({async getOrderConfirmation(){const{success:e,data:t}=await(0,W.CQ)(),{orderConfirmation:r}=t||{};e&&r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)({},r),{},{POST_ONLY:r.LIMIT})})},async getFuturesPnlBasis(){const{success:e,data:t}=await(0,H.fc)(),{pnlPriceBasis:r}=t||{};e&&this.updateState({useLastPrice:"markPrice"!==r})},async changeOrderConfirmation(e,t){const r=await(0,W.wS)({orderConfirmation:e});return r&&this.updateState({orderConfirmation:(0,i.Z)((0,i.Z)((0,i.Z)({},t.preference.orderConfirmation),e),{},{POST_ONLY:e.LIMIT||t.preference.orderConfirmation.LIMIT})}),r},async getPositionMode(t,r){const{success:a,data:i}=await(0,W.wo)()||{dualSidePosition:!0},{dualSidePosition:n}=i||{};a&&(this.updateState({positionMode:n}),e.futuresOrderForm.changeReduceOnly(!n&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(n?Y.RS.OPEN:Y.RS.BOTH))},async getAssetMode(){const{success:e,data:t}=await(0,J.Jy)()||{joinMargin:!0},{joinMargin:r}=t||{};e&&this.updateState({assetMode:r})},async changePositionMode(t,r){const a=await(0,W.qM)(t),{success:i,data:n}=a,{dualSidePosition:o}=n||{};return i&&void 0!==o&&(this.updateState({positionMode:o}),e.futuresOrderForm.changeReduceOnly(!o&&r.futuresOrderForm.reduceOnly),e.futuresOrderForm.changePositionDirection(o?Y.RS.OPEN:Y.RS.BOTH)),a},async changeAssetMode(e){const t=await(0,J.QO)(e),{success:r,data:a}=t,{joinMargin:i}=a||{};return r&&void 0!==i&&this.updateState({assetMode:i}),t},async getUnit(e){const{success:t,data:r}=await(0,j.YD)(H.lU,5e3),a=(null===r||void 0===r?void 0:r.unit)||(null===e||void 0===e?void 0:e.data.unit),i=(0,w.nM)()?{coinFuturesUnit:a}:{usdtFuturesUnit:a};t&&a&&this.updateState(i)},async changeUnit(e){const t=(0,w.nM)()?{coinFuturesUnit:e}:{usdtFuturesUnit:e},r=await(0,W.t1)({unit:e});return r&&this.updateState(t),r},async getPriceProtection(e=(()=>({}))){const{success:t,data:r=!0}=await e();t&&this.updateState({priceProtection:r})},async getFundingFeeNotify(){const{success:e,data:{threshold:t,isEnable:r}}=await(0,G.TS)();e&&this.updateState({fundingFee:(0,U.Jp)(t,100).toNumber(),isEnableFundingFee:r})},async getFungFeeRange(){const{success:e,data:{cap:t,floor:r}}=await(0,G.j4)();e&&this.updateState({fundingFeeRange:{cap:(0,U.Jp)(t,100).toNumber(),floor:(0,U.Jp)(r,100).toNumber()}})},async getStopLimitOrderNotify(){const{success:e,data:t}=await(0,G.lj)();e&&this.updateState({TPSLNotify:t})},async getMultiAssetMarginEnableConfig(){const{success:e,data:t}=await(0,J.aO)(),{multiAssetMarginEnable:r=!1}=t||{},a=!e||r;return this.updateState({multiAssetMarginEnable:a}),a},async updateTPSLNotify(e){const t=await(0,G.rR)(e);return t.success&&this.updateState({TPSLNotify:e}),t},async updateFundingFeeNotify({fundingFee:e,isEnable:t}){const r=await(0,G.hw)({threshold:(0,U.QZ)(e,100).toNumber(),isEnable:t});return r.success&&this.updateState({isEnableFundingFee:t,fundingFee:e}),r}})});var X=r("BGBy");const ee=(0,c.NY)()({name:"serviceStatus",state:{marketData:!0,userData:!0,placeOrder:!0,abnormal:!1,openTip:!1},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getServiceStatus(e=!1){try{const t=await(0,X._)(e),{marketData:r,userData:a,placeOrder:i}=t,n=!r||!a||!i,o=n;this.updateStateImmutable({marketData:r,userData:a,placeOrder:i,abnormal:n,openTip:o})}catch(t){console.log("get service status error",t)}}}});var te=r("q8oT"),re=r("qp48");const ae=(0,c.NY)()({name:"transferAssets",state:{transferAsset:"USDT",assets:{},futuresAssets:{},assetTypes:[]},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable},effects:{async getUserAssets(){const e=await(0,re.N)({});this.updateState({assets:(0,m.FB)(e,"asset")})},async getMaxWithdrawAmount(e=[]){const t=await Promise.all(e.map((e=>(0,h.yd)({assetName:e})))),r=null===t||void 0===t?void 0:t.reduce(((t,r,a)=>(t[e[a]]={free:Math.max(Object.prototype.hasOwnProperty.call(r,"error")?0:r,0)},t)),{});this.updateState({futuresAssets:r})},transfer:async(e,t)=>(0,te.r)(e,{lang:t})}}),ie=(0,c.NY)()({name:"userAsset",state:{userAsset:{}},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),ne=(0,c.NY)()({name:"userTab",state:{activeTab:"0"},reducers:{updateState:d.I.updateState,updateStateImmutable:d.I.updateStateImmutable}}),oe={assetIndex:u,balance:f,bracket:y,feeTier:b,futureMarket:k,grid:T,indexPrice:C,layout:M,leverage:A,marginType:R,markPrice:L,position:q,preference:Q,serviceStatus:ee,tradeForbidden:a.Z,transferAssets:ae,userAsset:ie,userTab:ne}},COFI:(e,t,r)=>{"use strict";r.d(t,{GY:()=>i,Sn:()=>n,Nn:()=>o,aV:()=>s,hr:()=>l,oU:()=>c,nW:()=>u,IS:()=>d,BV:()=>m,DX:()=>p,ZA:()=>f,Dc:()=>g,Jt:()=>y,SA:()=>h});var a=r("/MJE");const{registerActionHandle:i,constants:{ACTION_TRADE_ONECLIKE_BUY:n,ACTION_TRADE_ONECLIKE_SELL:o,ACTION_FUTURES_DUAL_OPEN:s,ACTION_FUTURES_DUAL_CLOSE:l,ACTION_TRADE_BUY:c,ACTION_TRADE_SELL:u,ACTION_FUTURES_ONECLIKE_CLOSE:d,COMMON_CANCEL:m,COMMON_OK:p,ACTION_TRADE_INCREASE_ORDER_PRICE:f,ACTION_TRADE_REDUCE_ORDER_PRICE:g,ACTION_TRADE_INCREASE_ORDER_QUANTITY:y,ACTION_TRADE_REDUCE_ORDER_QUANTITY:h}}=a.Z},"6A9W":(e,t,r)=>{"use strict";r.d(t,{$:()=>s,F:()=>l});var a=r("Zl10"),i=r.n(a),n=r("yxRq"),o=r("cucV");const s=({crossWalletBalance:e,marginPositions:t,pageSymbol:r,symbolLeverage:a})=>{const i=(0,n.zS)({data:t,isolated:!1,isDelivery:!1,contractVal:1}),o=(0,n.wf)({data:t,isolated:!1,curLeverage:a,symbol:r,isDelivery:!1,contractVal:1}),s=(0,n.sE)({data:t,curLeverage:a,curSymbol:r,isDelivery:!1,contractVal:1});return Math.max(e+i-(o+s),0)},l=({assetIndexes:e,balances:t,marginGroupPositions:r,pageSymbol:a,symbolLeverage:s})=>{let l=0,c=0;return Object.entries(t).forEach((([t,u])=>{if(!u.marginAvailable)return;const d=r[t]||[],[,m]=i()(d,(e=>e.isolated)),{crossWalletBalance:p=0}=u||{},f=(null===e||void 0===e?void 0:e[t])||{},{askRate:g=0,bidRate:y=0}=f;let h=p,b=0;if(m.length>0){h+=(0,o.ot)(m),b=(0,n.wf)({data:m,isolated:!1,curLeverage:s,symbol:a,isDelivery:!1,contractVal:1})}l+=Math.min(h*g,h*y),c+=b*g})),l-c}},lbaD:(e,t,r)=>{"use strict";function a(e){return Number.isNaN(e)||Math.abs(e)===1/0}function i({quantity:e,isBuy:t,entryPrice:r=0,closedPrice:i=0,contractVal:n=100,isDelivery:o,askPrice:s,bidPrice:l}){const c=t?1:-1;let u,d;return o?(u=e?(1/r-1/(t?l:s))*e*n*c:0,d=e?(1/r-1/i)*e*n*c:0):(u=e?((t?l:s)-r)*e*c:0,d=(i-r)*e*c),{marketPNL:a(u)?"-":u,limitPNL:a(d)?"-":d}}r.d(t,{k:()=>i})},QlFx:(e,t,r)=>{"use strict";r.d(t,{uf:()=>a,kh:()=>i,lE:()=>n});r("RX+5");const a=(e,t=2)=>{try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}},i=e=>e&&e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),n=(e="",t)=>{const[r="",a=""]=e.split("_");let i=[r,a.substr(2)].join(" ");if("PERP"===a||!a){i=[r,t("inversePerpetual",{defaultValue:"Perpetual"})].join(" ")}return i}},yxRq:(e,t,r)=>{"use strict";r.d(t,{BJ:()=>c,Nu:()=>p,w_:()=>f,IK:()=>g,_F:()=>y,sY:()=>h,zS:()=>S,Fb:()=>P,sE:()=>I,wf:()=>M,qb:()=>N,sk:()=>A,qH:()=>O,mb:()=>R,iZ:()=>V,dK:()=>L,VX:()=>F,$g:()=>D});var a=r("5vwO"),i=r("FOuV"),n=r("k2tD"),o=r("wdcV");const{leverageInfo:s}=i.Fy,l=e=>Number((0,n.mD)(1/e,5)),c=e=>["MARKET","STOP_MARKET","TAKE_PROFIT_MARKET","TRAILING_STOP_MARKET"].includes(e),u=(e,t)=>{const r=[...e].reverse();let a=0;for(;a<r.length;){const e=r[a];if(t<=e.maxOpenPosLeverage&&e.minOpenPosLeverage<=t)return e;a+=1}return 0},d=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a=0,unrealizedProfit:i=0},{isDelivery:n=!1,contractVal:o=0},s=!1)=>{const l=s&&a?a:r;if(!l)return i;const c=Number(t)||0,u=Number(l)||0;return(Number(e)||0)*(n?o*((c?1/c:0)-(u?1/u:0)):u-c)||0},m=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=0})=>{const n=Number(t);return Math.abs(e*i.IA*(r?a*(n?1/n:0):n))},p=({positionSize:e=0,markPrice:t=0},{isDelivery:r=!1,contractVal:a=1}={})=>{const n=Number(t);return e*i.IA*(r?a*(n?1/n:0):n)},f=({formType:e="limit",type:t="bid",askPrice:r=0,bidPrice:a=0,orderPrice:n=0,markPrice:o=0,pricePrecision:s=2,isDelivery:l})=>{r=Number(r),a=Number(a),n=Number(n),o=Number(o);const u=r||o,d=a||o,m=10**s,p="bid"===t;let f;return f=c(e)?p?l?u:Math.floor(u*(1+i.HM.TWO_WAY)*m)/m:l?d*(1-i.HM.TWO_WAY):d:p?l?Math.min(r,o,n):n:l?n:Math.max(a,o,n),f},g=(e,t)=>((e,t)=>{let r=0;for(;r<e.length;){const a=e[r];if(t<a.bracketNotionalCap)return a;r+=1}return r&&e[r-1]})(e,t),y=(e,t)=>{let r=0;const a=[...e].reverse();for(;r<a.length;){const e=a[r],i=e.maxOpenPosLeverage;if(t===i)return e;if(t<i)return a[Math.max(r,0)];r+=1}return r&&a[r-1]},h=({positionSize:e,orderBidAmount:t,orderAskAmount:r,type:a})=>{r=Number(r),t=Number(t);const i="bid"===a;return(e=Number(e))>=0?i?t:Math.max(0,r-e):i?Math.max(0,t+e):r},b=({orderPrice:e=0,assumePrice:t=0,markPrice:r=0})=>({mp:r?1/r:0,op:e?1/e:0,ap:t?1/t:0}),v=({formType:e,type:t="bid",positionSize:r,orderBidAmount:a,orderAskAmount:n,markPrice:o=0,orderPrice:s=0,assumePrice:l=0,positionMode:u=!1,isDelivery:d=!1,contractVal:m=0})=>{o=Number(o)||0,s=Number(s)||0,l=Number(l)||0;const p="bid"===t?1:-1,f=h({positionSize:r,orderBidAmount:a,orderAskAmount:n,type:t}),g=u?Number("bid"===t?a:n):f*i.IA;let y;return y=d?(({orderPrice:e,markPrice:t,assumePrice:r,contractVal:a=0,formType:i})=>{const{mp:n,op:o,ap:s}=b({orderPrice:e,markPrice:t,assumePrice:r});return a*((c(i)?s:o)-n)})({orderPrice:s,markPrice:o,assumePrice:l,formType:e,contractVal:m}):o-(c(e)?l:s),g*Math.abs(Math.min(0,p*y))},x=({availableBalance:e,type:t="bid",formType:r="limit",orderPrice:a,markPrice:n,leverage:o,assumePrice:s=0,isolated:u=!1,isDelivery:d=!1,contractVal:m=0,bidNotional:p,askNotional:f,isTwoWay:g=!1,presetNotionalValue:y=0,positionNotionalValue:h=0,crossWalletBalance:v=0,totalIsolatedInitialMargin:x=0,totalCrossMaintenanceMargin:S=0})=>{e=Number(e),n=Number(n),a=Number(a);const k=l(o),P=y*k,T="bid"===t?1:-1;let C,w;if(d){const{ap:t,mp:i,op:o}=b({markPrice:n,assumePrice:s,orderPrice:a});if(g)w=e,C=m*(k*t+Math.abs(Math.min(0,T*((c(r)?t:o)-i)))),u&&(w=Math.max(0,Math.min(e,v-x-S)));else{let a=(h+(T>0?p:-f))*k;a=T>0?-a:a,C=m*(k*t+Math.abs(Math.min(0,T*((c(r)?t:o)-i)))),w=u?Math.max(0,Math.min(e,v-x-S)+P+a):Math.max(0,e+P+a)}}else w=u?Math.min(e,v-x-S):e,C=i.IA*(s*k+Math.abs(Math.min(0,T*(n-(c(r)?s:a)))));return C?w/C:0},S=({data:e={},isolated:t=!1,curPosition:r={},all:a=!1,isDelivery:i,contractVal:n})=>{let o=0;return t&&!a?Math.min(d(r,{isDelivery:i,contractVal:n},!1),d(r,{isDelivery:i,contractVal:n},!0)):(Object.values(e).forEach((e=>{!Number(e.positionSize)&&0!==Number(e.positionSize)||!a&&e.isolated||(o+=Math.min(d(e,{isDelivery:i,contractVal:n},!1),d(e,{isDelivery:i,contractVal:n},!0)))})),o)},k=({riskTable:e,positionNotionalValue:t=0,symbol:r,positionSize:a=0,markPrice:i=0,isDelivery:n=!1,contractVal:o=0})=>{const{bracketMaintenanceMarginRate:s=0,cumFastMaintenanceAmount:l=0}=(({riskTable:e={},symbol:t,positionSize:r,markPrice:a,isDelivery:i,contractVal:n})=>{const o=m({positionSize:r,markPrice:a},{isDelivery:i,contractVal:n}),{bracketMaintenanceMarginRate:s,cumFastMaintenanceAmount:l}=(e[t]||[]).find((e=>o<e.bracketNotionalCap))||{};return{bracketMaintenanceMarginRate:s,cumFastMaintenanceAmount:l}})({riskTable:e,symbol:r,positionSize:a,markPrice:i,isDelivery:n,contractVal:o});return t*s-l},P=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),T=({data:e={},riskTable:t={},isolated:r,curPosition:i={},all:n=!1,isDelivery:o=!1,contractVal:s=0})=>{let l=0;if(r&&!n){const e=m(i,{isDelivery:o,contractVal:s});return k((0,a.Z)((0,a.Z)({riskTable:t},i),{},{isDelivery:o,contractVal:s,positionNotionalValue:e}))}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(n||!e.isolated)){const r=m(e,{isDelivery:o,contractVal:s}),i=k((0,a.Z)({riskTable:t,positionNotionalValue:r,isDelivery:o,contractVal:s},e))||0;l+=i}})),l},C=({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,isDelivery:i,contractVal:n})=>{e=Number(e)||0,t=Number(t)||0;const o=p({positionSize:r,markPrice:a},{isDelivery:i,contractVal:n});return Math.max(Math.abs(o+e),Math.abs(o-t))},w=({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=s.defaultVal})=>{const i=l(a);return P({positionNotionalValue:e,bidNotional:t,askNotional:r})*i},I=({data:e,curLeverage:t,curSymbol:r,isDelivery:i=!1,contractVal:n=1})=>{let o=0;return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:s,markPrice:c,positionSize:u}=e,d=s===r?t:e.leverage,m=p(e,{isDelivery:i,contractVal:n});let f=Number(c);f=i?f?1/f:0:f,o+=(Math.abs(P((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:m})))-f*Math.abs(u)*n)*l(d)}})),o},M=({data:e={},curLeverage:t,symbol:r,isolated:i,all:n=!1,curPosition:o,isDelivery:s=!1,contractVal:l=1})=>{let c=0;if(i&&!n){const e=p(o,{isDelivery:s,contractVal:l}),i=r===o.symbol?(0,a.Z)((0,a.Z)((0,a.Z)({},o),{leverage:t}),{},{positionNotionalValue:e}):(0,a.Z)((0,a.Z)({},o),{},{positionNotionalValue:e});return w(i)}return Object.values(e).forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&(n||!e.isolated)){const i=p(e,{isDelivery:s,contractVal:l}),n=e.symbol===r?(0,a.Z)((0,a.Z)((0,a.Z)({},e),{leverage:t}),{},{positionNotionalValue:i}):(0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:i});c+=w(n)}})),c},E=({assumePrice:e=0,type:t="bid",orderBidAmount:r=0,orderAskAmount:a=0,isDelivery:n=!1,contractVal:o=1})=>{e=Number(e)||0,r=Number(r)||0,a=Number(a)||0;const s="bid"===t,l=n?e?o/e:0:e;return{newBidNotional:s?i.IA*r*l:0,newAskNotional:s?0:i.IA*a*l}},N=({riskTable:e,brackets:t,positionSize:r,markPrice:a,availableBalance:n,type:o,formType:s,askPrice:l,bidPrice:c,orderPrice:d,leverage:m,bidNotional:g,askNotional:y,isolated:h,pricePrecision:b,isDelivery:v,contractVal:x,crossWalletBalance:S,calculateDeliveryActualMaxAmount:k,currentMarginPositions:w={},symbol:M,isNew:N=!0})=>{const A=f({formType:s,type:o,askPrice:l,bidPrice:c,orderPrice:d,markPrice:a,pricePrecision:b,isDelivery:v}),O=p({positionSize:r,markPrice:a},{isDelivery:v,contractVal:x}),R=P({positionNotionalValue:O,bidNotional:g,askNotional:y}),V=T({data:w.filter((e=>!e.isolated)),riskTable:t,isolated:h,all:!0,contractVal:x,isDelivery:v}),L=I({data:w,curLeverage:m,curSymbol:M,isDelivery:v,contractVal:x});let F,D;const _=v?k({positionSize:r,availableBalance:n,positionNotionalValue:O,presetNotionalValue:R,bidNotional:g,askNotional:y,isolated:h,type:o,formType:s,orderPrice:d,markPrice:a,leverage:m,assumePrice:A,crossWalletBalance:S,contractVal:x,totalCrossMaintenanceMargin:V,totalIsolatedInitialMargin:L}):Z({positionSize:r,availableBalance:n,presetNotionalValue:R,positionNotionalValue:O,bidNotional:g,askNotional:y,contractVal:x,isolated:h,type:o,formType:s,orderPrice:d,markPrice:a,leverage:m,assumePrice:A,isDelivery:v,crossWalletBalance:S,totalCrossMaintenanceMargin:V,totalIsolatedInitialMargin:L});"bid"===o?(F=_,D=0):(D=_,F=0);const{presentNotional:z,notionalAfterTrade:B}=(({bidNotional:e=0,askNotional:t=0,positionSize:r,markPrice:a,assumePrice:i,orderBidAmount:n,orderAskAmount:o,type:s,isDelivery:l=!1,contractVal:c=1,isNew:u=!1})=>{e=Number(e)||0,t=Number(t)||0;const d=p({positionSize:r,markPrice:a},{isDelivery:l,contractVal:c}),{newBidNotional:m,newAskNotional:f}=E({assumePrice:i,type:s,orderAskAmount:o,orderBidAmount:n,isDelivery:l,contractVal:c});let g;return g=u?"bid"===s?Math.max(Math.abs(d+e+m),Math.abs(d-t)):Math.max(Math.abs(d+e),Math.abs(d-t-f)):Math.max(Math.abs(d+e+m),Math.abs(d-t-f)),{presentNotional:C({bidNotional:e,askNotional:t,positionSize:r,markPrice:a,isDelivery:l,contractVal:c}),notionalAfterTrade:g,positionNotionalValue:d}})({positionSize:r,bidNotional:g,askNotional:y,markPrice:a,assumePrice:A,orderBidAmount:F,orderAskAmount:D,type:o,isDelivery:v,contractVal:x,isNew:N}),{bracketNotionalCap:K}=u(e,m);if(B<=K)return{maxBidAmount:F,maxAskAmount:D};let q;return v?(q=A?x/A:0,{maxBidAmount:q?Math.max((K-O-g)/q,0):0,maxAskAmount:q?Math.max((K+O-y)/q,0):0}):(q=A*i.IA,N?(F=q?(K-O-g)/q:0,D=q?(K+O-y)/q:0,F=F<0?0:F,D=D<0?0:D,{maxBidAmount:F,maxAskAmount:D}):r>=0?{maxBidAmount:q?Math.max((K-z)/q,0):0,maxAskAmount:q?Math.max((K+z)/q,0):0}:{maxBidAmount:q?Math.max((K+z)/q,0):0,maxAskAmount:q?Math.max((K-z)/q,0):0})},Z=({positionSize:e,availableBalance:t,positionNotionalValue:r,bidNotional:a,askNotional:i,isolated:n,type:o,formType:s,orderPrice:u,markPrice:d,leverage:m,assumePrice:p,presetNotionalValue:f,crossWalletBalance:g,totalCrossMaintenanceMargin:y=0,totalIsolatedInitialMargin:h=0})=>{const b=l(m),v="bid"===o?1:-1,x=c(s)?p:u,S=c(s)?p:u,k=f*b,P=p*b+Math.abs(Math.min(0,v*(d-x))),T=p*b,C=1===v?-(r+a):r-i,w=n?Math.min(g-y-h,t):t,I=w+k+C*b,M=Math.abs(e)*Math.abs(Math.min(0,v*(d-S))),E=Math.max(0,I);if(e>=0){if(1===v)return P?E/P:0;const t=Math.max(0,I+M),n=P?t/P:0;return Math.abs(r+a)>Math.abs(r-i-n*p)&&n>=Math.abs(e)?Math.max(0,(w+k-(r+a)*b+M)/(M/Math.abs(e))):n<Math.abs(e)?T?E/T:0:n}if(1===v){const t=Math.max(0,I+M),n=P?t/P:0;return Math.abs(r+a+n*p)<Math.abs(r-i)&&n>=Math.abs(e)?Math.max(0,(w+k+(r-i)*b+M)/(M/Math.abs(e))):n<Math.abs(e)?T?E/T:0:n}return P?E/P:0},A=({leverage:e,positionSize:t,orderBidAmount:r,orderAskAmount:a,formType:i,type:n,askPrice:o,bidPrice:s,orderPrice:c,markPrice:u,bidNotional:d,askNotional:m,positionMode:g=!1,pricePrecision:y,isDelivery:h,contractVal:b})=>{const x=f({formType:i,type:n,askPrice:o,bidPrice:s,orderPrice:c,markPrice:u,pricePrecision:y,isDelivery:h}),S=(({positionSize:e,markPrice:t,assumePrice:r,type:a,bidNotional:i,askNotional:n,orderBidAmount:o,orderAskAmount:s,leverage:c=20,positionMode:u=!1,isDelivery:d=!1,contractVal:m=1})=>{const f=l(c);if(u){const e="bid"===a?o:s;return d?e*m*f*(Number(r)?1/r:0):r*f*e}i=Number(i)||0,n=Number(n)||0;const g=p({positionSize:e,markPrice:t},{isDelivery:d,contractVal:m}),{newBidNotional:y,newAskNotional:h}=E({assumePrice:r,type:a,orderAskAmount:s,orderBidAmount:o,isDelivery:d,contractVal:m}),b=Math.max(Math.abs(g+i),Math.abs(g-n)),v=Math.max(Math.abs(g+i+y),Math.abs(g-n-h));return Math.max((v-b)*f,0)})({positionSize:t,markPrice:u,assumePrice:x,type:n,bidNotional:d,askNotional:m,orderBidAmount:r,orderAskAmount:a,leverage:e,positionMode:g,isDelivery:h,contractVal:b}),k=v({formType:i,positionSize:t,orderBidAmount:r,orderAskAmount:a,markPrice:u,orderPrice:c,type:n,assumePrice:x,positionMode:g,isDelivery:h,contractVal:b});return{cost:S+k,openLost:k}},O=({riskTable:e,markPrice:t,availableBalance:r,formType:a,askPrice:i,bidPrice:n,leverage:o,longPosition:s,shortPosition:l,buyPrice:c,sellPrice:d,pricePrecision:m,isDelivery:g,isolated:y,contractVal:h,currentPairPositions:b={},getAllOthersPresentNotional:v,symbol:S,crossWalletBalance:k,brackets:P})=>{let C,w;const M=T({data:b.filter((e=>!e.isolated)),riskTable:P,isolated:y,all:!0,contractVal:h,isDelivery:g}),E=I({data:b,curLeverage:o,curSymbol:S,isDelivery:g,contractVal:h}),N=f({formType:a,type:"bid",askPrice:i,bidPrice:n,orderPrice:c,markPrice:t,pricePrecision:m,isDelivery:g}),Z=f({formType:a,type:"ask",askPrice:i,bidPrice:n,orderPrice:d,markPrice:t,pricePrecision:m,isDelivery:g}),A=x({availableBalance:r,type:"bid",formType:a,orderPrice:c,markPrice:t,leverage:o,assumePrice:N,isDelivery:g,contractVal:h,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:M,totalIsolatedInitialMargin:E,crossWalletBalance:k}),O=x({availableBalance:r,type:"ask",formType:a,orderPrice:d,markPrice:t,leverage:o,assumePrice:Z,isDelivery:g,contractVal:h,isTwoWay:!0,isolated:y,totalCrossMaintenanceMargin:M,totalIsolatedInitialMargin:E,crossWalletBalance:k}),{longNotionalAfterTrade:R,shortNotionalAfterTrade:V,shortPresentNotional:L,longPresentNotional:F}=(({longPosition:e,shortPosition:t,markPrice:r,longActualMaxOpenPositions:a,shortActualMaxOpenPositions:i,bidAssumePrice:n,askAssumePrice:o,isDelivery:s,contractVal:l})=>{const{bidNotional:c=0,askNotional:u=0,positionSize:d=0}=e,{bidNotional:m=0,askNotional:f=0,positionSize:g=0}=t,y=p({positionSize:d,markPrice:r},{isDelivery:s,contractVal:l}),h=p({positionSize:g,markPrice:r},{isDelivery:s,contractVal:l}),b=Math.max(Math.abs(y+Number(c)+(s?n?l/n:0:n)*a),Math.abs(y-u)),v=Math.max(Math.abs(h+Number(m)),Math.abs(h-f)),x=Math.max(Math.abs(y+Number(c)),Math.abs(y-u));return{longNotionalAfterTrade:b,shortNotionalAfterTrade:Math.max(Math.abs(h+Number(m)),Math.abs(h-f-(s?o?l/o:0:o)*i)),shortPresentNotional:v,longPresentNotional:x}})({longPosition:s,shortPosition:l,markPrice:t,longActualMaxOpenPositions:A,shortActualMaxOpenPositions:O,bidAssumePrice:N,askAssumePrice:Z,isDelivery:g,contractVal:h}),{bracketNotionalCap:D}=u(e,o),_=v({currentPairPositions:b.filter((e=>e.symbol===S)),markPrice:t,contractVal:h});return C=g&&A<=0?0:R+L<=D?A:g?h?N*(D-_)/h:0:N?(D-F-L)/N:0,w=g&&O<=0?0:V+F<=D?O:g?h?Z*(D-_)/h:0:Z?(D-L-F)/Z:0,{maxBidAmount:Math.max(C,0),maxAskAmount:Math.max(w,0)}},R=({orderPrice:e=0,assumePrice:t=0,triggerPrice:r=0,activationPrice:a=0,formType:n=i.PH.LIMIT})=>{switch(n){case i.PH.LIMIT_TYPE:case i.PH.STOP_LIMIT:case i.PH.TAKE_PROFIT_LIMIT:return Number(e);case i.PH.MARKET_TYPE:return Number(t);case i.PH.STOP_MARKET:case i.PH.TAKE_PROFIT_MARKET:return Number(r);case i.PH.TRAILING_STOP_MARKET:return Number(a);default:return Number(e)}},V=({positionSize:e=0,orderAmount:t=0,side:r=1})=>Number(e)+t*r,L=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:n=0,orderAmount:o=0,formType:s,side:l=1})=>{const c=Math.abs(t),u=Number(t),d=V({positionSize:t,orderAmount:o,side:l}),m=R({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:n,formType:s});return 0===u||1===l&&u>0||-1===l&&u<0?d?(e*c+m*o)/Math.abs(d):0:c>o?Number(e):c===Number(o)?0:m},F=({entryPrice:e=0,positionSize:t=0,orderPrice:r=0,assumePrice:a=0,triggerPrice:i=0,activationPrice:n=0,orderAmount:o=0,formType:s,side:l=1,isolatedWallet:c=0,crossWalletBalance:u=0,cost:d=0,openLost:m=0,bidNotional:p=0,askNotional:f=0,takerCommission:g=0})=>{const y=Math.abs(t),b=Number(t),v=0===b||1===l&&b>0||-1===l&&b<0,x=R({orderPrice:r,assumePrice:a,triggerPrice:i,activationPrice:n,formType:s});if(v)return{estCrossWalletBalance:u-o*x*g,estIsolatedWallet:Number(c)+Number(d)};if(y>o)return{estCrossWalletBalance:u-o*l*(x-e)-o*x*g,estIsolatedWallet:(b?(b-o)*c/b:0)+Math.min(0,(b?o*c/b:0)-o*l*(x-e))};if(y<o){const r=h({positionSize:t,orderBidAmount:o,orderAskAmount:o,type:1===l?"bid":"ask"});return{estCrossWalletBalance:u+b*(x-e)-o*x*g,estIsolatedWallet:m+Math.max(Math.abs(Number(p)+x*r),Math.abs(Number(f)-x*r))-Math.max(Math.abs(p),Math.abs(f))+Math.min(0,c+b*(x-e))}}return{estCrossWalletBalance:0,estIsolatedWallet:0}},D=({balance:e,leverage:t,symbol:r,isDelivery:a,contractVal:i,askRate:n=0,assetIndexes:s,positions:l})=>{let c=0,u=0;return Object.values(e).forEach((n=>{const{marginAvailable:d,asset:m}=n;if(d){var p;const n=(0,o.nn)({positions:l,marginAsset:m})||[],d=S({data:n,isolated:!1,isDelivery:a,contractVal:i}),f=(null===s||void 0===s?void 0:s[m])||{},{askRate:g=0,bidRate:y=0}=f||{},h=M({data:n,isolated:!1,curLeverage:t,symbol:r,isDelivery:a,contractVal:i});c+=h*g;const b=(({assetWalletBalance:e=0,totalCrossUnrealizedPNL:t=0})=>Number(e)+Number(t))({assetWalletBalance:Number((null===e||void 0===e||null===(p=e[m])||void 0===p?void 0:p.crossWalletBalance)||0),totalCrossUnrealizedPNL:d});u+=Math.min(b*y,b*g)}})),Number(n)?(u-c)/n:0}},DCTW:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>s,nn:()=>l,fS:()=>c,wj:()=>m,yh:()=>p,ot:()=>f,SH:()=>y,zW:()=>h,Uy:()=>b,sE:()=>v,W8:()=>x,ST:()=>S,Vo:()=>k});var a=r("5vwO"),i=r("mE5e"),n=r("FOuV");const{leverageInfo:o}=n.Fy,s=(e,t=[],r,i,n,s=!0,u=!1,d,m=[])=>{const{leverageList:g={}}=i||{},b=d||t;return t.map(((t={})=>{const{marginAsset:i,isolated:n,isolatedWallet:d=0,symbol:v="",positionSide:T}=t,C=r[i]||{},{crossWalletBalance:w=0}=C;let I,M,E=0,N=0,Z=0,A=0,O=0;const R=(null===e||void 0===e?void 0:e[v])||[],V=!n&&T&&"BOTH"!==T,L=n?d:w,F=g[v]||o.defaultVal;if(!n){const t=b.filter((e=>e.marginAsset===i)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));E=h(t,e),N=f(t),Z=k(E,w,N);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==v));A=h(r,e)-f(r)}if(V){const e=b.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===v&&"BOTH"!==r&&r!==T}))[0]||{positionSize:0,entryPrice:0};I="LONG"===T?t:e,M="SHORT"===T?t:e}s&&(O=V&&I.positionSize&&M.positionSize?S(R,L,A,I,M,t):x(R,L,A,t));const D=y(R,t),_=l(t),z=k(D,d,_),B=l(t,u),K=c(t)*p(F),q=`${(100*(B/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:O<0?0:O,unrealizedPnl:B,margin:n?d:K,riskRatio:n?z:Z,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},l=({positionSize:e=0,entryPrice:t=1,markPrice:r=1,contractVal:a=100,lastPrice:i},n=!1)=>{if(0===t||0===r)return 0;return e*a*(1/t-1/(n&&i||r))},c=({positionSize:e=0,markPrice:t=1,contractVal:r})=>Math.abs(e*r/t),u=({positionSize:e=0,markPrice:t=1,contractVal:r})=>e*r/t,d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(Number(e)+Number(t)),Math.abs(Number(e)-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a,contractVal:i})=>{const n=c({markPrice:r,positionSize:a,contractVal:i});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(n+e),Math.abs(n-t))})(e)-c(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+l(r,t)),0),g=(e=[],t)=>{const r=c(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},h=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),b=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=o.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:u(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:n,markPrice:o,positionSize:s,contractVal:l=100}=e,c=n===r?t:e.leverage,m=u(e);let f=Number(o);f=f?1/f:0,i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:m})))-f*Math.abs(s)*l)*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:n,contractVal:o=100}=a;if(!i||0===i)return 0;let s=0;const l=i>=0?1:-1;let c=e.length-1;for(;c>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:u,bracketNotionalFloor:d}=e[c];s=(Math.abs(i)*a+l*Math.abs(i))/((t-r+u)/o+l*Math.abs(i)/n);if(Math.abs(i)*o/s>d)break;if(0===c)break;c-=1}return s},S=(e=[],t,r,a,i,n)=>{const{entryPrice:o=0,positionSize:s=0,contractVal:l=100}=a,{entryPrice:c=0,positionSize:u=0,markPrice:d}=i;if(0===s||0===u)return 0;const{index:m,bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,a),{bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:h}=g(e,i);if(-1===m)return 0;let b=m,v=0,x=0;for(;b>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:n}=e[b];for(;a>=0;){const{bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m,bracketNotionalFloor:p}=e[a];if(v=(Math.abs(s)*d+Math.abs(u)*i+Math.abs(s)-Math.abs(u))/((t-r+m+n)/l+Math.abs(s)/o-Math.abs(u)/c),0===v)return v;if(Math.abs(s*l/v)>p)break;a-=1}const m=Math.abs(u*l/v),p=Math.abs(u*l/d);if(e.reverse().findIndex((e=>m>e.bracketNotionalFloor))===e.reverse().findIndex((e=>p>e.bracketNotionalFloor)))break;if(0===b)break;b-=1}if(Math.abs(s)<Math.abs(u)){const{markPrice:e}=n;if(x=(Math.abs(s)*p+Math.abs(u)*y+Math.abs(s)-Math.abs(u))/((t-r+f+h)/l+Math.abs(s)/o-Math.abs(u)/c),x>=0&&(Math.abs(x-e)<Math.abs(v-e)||v<0))return x}return v},k=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,o=e.positionSide===t.positionSide,s=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&o&&s&&(t.type===n.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===n.PH.STOP_MARKET&&(r.sl=t))})),r}},cucV:(e,t,r)=>{"use strict";r.d(t,{Zk:()=>a.Zk,Uy:()=>a.Uy,sE:()=>a.sE,yh:()=>a.yh,SH:()=>a.SH,wj:()=>a.wj,zW:()=>a.zW,ot:()=>a.ot,nn:()=>a.nn,bG:()=>i.bG});var a=r("74Of"),i=r("H8fa")},H8fa:(e,t,r)=>{"use strict";r.d(t,{bG:()=>l,Dj:()=>c,_O:()=>u});var a=r("5vwO"),i=r("FOuV"),n=r("wdcV"),o=r("74Of");const{leverageInfo:s}=i.Fy,l=({riskRatio:e,assetsRateEquity:t,assetsMM:r,assetIndexes:i,brackets:l,positions:d,balances:m,leverages:p,useLastPrice:f,openOrders:g})=>{const{leverageList:y={}}=p||{},h=(0,n.L6)(d);return d.map(((n={})=>{const{symbol:p,positionSide:b,marginAsset:v}=n,x=m[v]||{},{crossWalletBalance:S=0}=x;let k,P,T=0;const C=(null===l||void 0===l?void 0:l[p])||[],w=y[p]||s.defaultVal,I=i[v]||{},M=(h[v]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==p)),E=(0,o.zW)(M,l),N=(0,o.ot)(M);let Z=0;Object.entries(t).forEach((([e,t])=>{e!==v&&(Z+=t)})),Object.entries(r).forEach((([e,t])=>{const r=i[e]||{},{askRate:a=0}=r;Z-=e!==v?t*a:E*a}));if(b&&"BOTH"!==b){const e=d.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===p&&"BOTH"!==r&&r!==b}))[0]||{positionSize:0,entryPrice:0};k="LONG"===b?n:e,P="SHORT"===b?n:e,T=u({accEquityAndMMs:Z,assetIndex:I,bracket:C,crossWalletBalance:S,smdsUPNL:N,longPosition:k,shortPosition:P,curPosition:n})}else T=c({accEquityAndMMs:Z,assetIndex:I,bracket:C,crossWalletBalance:S,smdsUPNL:N,curPosition:n});const A=(0,o.nn)(n,f),O=(0,o.fS)(n)*(0,o.yh)(w),R=`${(100*(A/O||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},n),{},{liquidationPrice:T<0?0:T,riskRatio:e,unrealizedPnl:A,margin:O,ROEVal:R,leverage:w,strategyOrders:(0,o.Vf)(n,g)})}))},c=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,curPosition:n})=>{const{positionSize:o,entryPrice:s}=n,{askRate:l=1,bidRate:c=1}=t;if(!o||0===o)return 0;let u=0;const d=o>=0?1:-1;let m=r.length-1;const p={};for(;m>=0;){const{bracketMaintenanceMarginRate:t,cumFastMaintenanceAmount:n,bracketNotionalFloor:f,bracketNotionalCap:g}=r[m];p.mmr=t,p.cum=n,u=(e+n*l+(a+i-d*Math.abs(o)*s)*c)/(Math.abs(o)*(t*l-d*c));if(f<u*Math.abs(o))break;if(0===m)break;m-=1}if(a+i+d*Math.abs(o)*(u-s)<=0){const{mmr:t,cum:r}=p;u=(e+r*l+(a+i-d*Math.abs(o)*s)*l)/(Math.abs(o)*(t*l-d*l))}return u},u=({accEquityAndMMs:e,assetIndex:t,bracket:r,crossWalletBalance:a,smdsUPNL:i,longPosition:n,shortPosition:s,curPosition:l})=>{const{entryPrice:c=0,positionSize:u=0}=n,{entryPrice:d=0,positionSize:m=0}=s;if(0===u&&0===m)return 0;const{askRate:p=1,bidRate:f=1}=t,{index:g,bracketMaintenanceMarginRate:y,cumFastMaintenanceAmount:h}=(0,o.u5)(r,n),{bracketMaintenanceMarginRate:b,cumFastMaintenanceAmount:v}=(0,o.u5)(r,s);let x=g,S=0,k=0;const P={};for(;x>=0;){let t=r.length-1;const{bracketMaintenanceMarginRate:n,cumFastMaintenanceAmount:o,bracketNotionalFloor:s}=r[x];for(P.mmrLong=n,P.cumLong=o;t>=0;){const{bracketMaintenanceMarginRate:s,cumFastMaintenanceAmount:l,bracketNotionalFloor:g}=r[t];P.mmrShort=s,P.cumShort=l;S=(e+(l+o)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*n+Math.abs(m)*s)*p-(Math.abs(u)-Math.abs(m))*f);if(S*Math.abs(m)>g)break;t-=1}if(S*Math.abs(u)>s)break;if(0===x)break;x-=1}if(Math.abs(u)>Math.abs(m)){const{markPrice:t}=l;k=(e+(v+h)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*f)/((Math.abs(u)*y+Math.abs(m)*b)*p-(Math.abs(u)-Math.abs(m))*f),k>=0&&(Math.abs(k-t)<Math.abs(S-t)||S<0)&&(P.mmrLong=y,P.cumLong=h,P.mmrShort=b,P.cumShort=v,S=k)}if(a+i+Math.abs(u)*(S-c)+Math.abs(m)*(d-S)<=0){const{mmrLong:t,cumLong:r,mmrShort:n,cumShort:o}=P;S=(e+(o+r)*p+(a+i-Math.abs(u)*c+Math.abs(m)*d)*p)/((Math.abs(u)*t+Math.abs(m)*n)*p-(Math.abs(u)-Math.abs(m))*p)}return S}},"74Of":(e,t,r)=>{"use strict";r.d(t,{Zk:()=>l,nn:()=>c,fS:()=>u,wj:()=>m,yh:()=>p,ot:()=>f,u5:()=>g,SH:()=>y,zW:()=>h,Uy:()=>b,sE:()=>v,W8:()=>x,wr:()=>S,Vo:()=>k,Vf:()=>P});var a=r("5vwO"),i=r("mE5e"),n=r("FOuV"),o=r("yxRq");const{leverageInfo:s}=n.Fy,l=(e,t=[],r,i,n,o=!0,l=!1,d,m=[])=>{const{leverageList:g={}}=i||{},b=d||t;return t.map(((t={})=>{const{isolated:i,isolatedWallet:n=0,symbol:d,positionSide:v,marginAsset:T}=t,C=r[T]||{},{crossWalletBalance:w=0}=C;let I,M,E=0,N=0,Z=0,A=0,O=0;const R=(null===e||void 0===e?void 0:e[d])||[],V=!i&&v&&"BOTH"!==v,L=i?n:w,F=g[d]||s.defaultVal;if(!i){const t=b.filter((e=>e.marginAsset===T)).filter((e=>!(null!==e&&void 0!==e&&e.isolated)));E=h(t,e),N=f(t),Z=k(E,w,N);const r=t.filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d));A=h(r,e)-f(r)}if(V){const e=b.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==v}))[0]||{positionSize:0,entryPrice:0};I="LONG"===v?t:e,M="SHORT"===v?t:e}o&&(O=V?S(R,L,A,I,M,t):x(R,L,A,t));const D=y(R,t),_=c(t),z=k(D,n,_),B=c(t,l),K=u(t)*p(F),q=`${(100*(B/K||0)).toFixed(2)}%`;return(0,a.Z)((0,a.Z)({},t),{},{liquidationPrice:O<0?0:O,unrealizedPnl:B,margin:i?n:K,riskRatio:i?z:Z,ROEVal:q,leverage:F,strategyOrders:P(t,m)})}))},c=({positionSize:e=0,entryPrice:t=0,markPrice:r=0,lastPrice:a},i=!1)=>e*((i&&a||r)-t),u=({positionSize:e=0,markPrice:t=0})=>Math.abs(e*t),d=({positionNotionalValue:e=0,bidNotional:t=0,askNotional:r=0})=>Math.max(Math.abs(e+Number(t)),Math.abs(e-Number(r))),m=e=>{let t=0;return e.forEach((e=>{const r=(({bidNotional:e,askNotional:t,markPrice:r,positionSize:a})=>{const i=u({markPrice:r,positionSize:a});return e=Number(e||0),t=Number(t||0),Math.max(Math.abs(i+e),Math.abs(i-t))})(e)-u(e);t+=r})),t},p=e=>1*(0,i.mD)(1/e,4),f=(e=[],t)=>e.reduce(((e,r)=>e+c(r,t)),0),g=(e=[],t)=>{const r=u(t);let i=e.findIndex((e=>r<e.bracketNotionalCap));return-1===i&&(i=e.length-1),(0,a.Z)((0,a.Z)({positionNotionalValue:r},e[i]),{},{index:i})},y=(e,t)=>{const{positionNotionalValue:r,bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:i}=g(e,t);return r*a-i},h=(e=[],t={})=>e.reduce(((e,r)=>{const{symbol:a}=r||{},i=(null===t||void 0===t?void 0:t[a])||[];return e+y(i,r)}),0),b=(e=[],t,r)=>e.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).reduce(((e,i)=>e+(({positionNotionalValue:e,bidNotional:t,askNotional:r,leverage:a=s.defaultVal})=>{const i=p(a);return d({positionNotionalValue:e,bidNotional:t,askNotional:r})*i})((0,a.Z)((0,a.Z)({},i),{},{positionNotionalValue:(0,o.Nu)(i),leverage:r===i.symbol?t:i.leverage}))),0),v=(e=[],t,r)=>{let i=0;return e.forEach((e=>{if((Number(e.positionSize)||0===Number(e.positionSize))&&e.isolated){const{symbol:n,markPrice:s,positionSize:l}=e,c=n===r?t:e.leverage,u=(0,o.Nu)(e);i+=(Math.abs(d((0,a.Z)((0,a.Z)({},e),{},{positionNotionalValue:u})))-s*Math.abs(l))*p(c)}})),i},x=(e=[],t,r,a)=>{const{positionSize:i,entryPrice:n}=a;if(!i||0===i)return 0;let o=0;const s=i>=0?1:-1;let l=e.length-1;for(;l>=0;){const{bracketMaintenanceMarginRate:a,cumFastMaintenanceAmount:c,bracketNotionalFloor:u}=e[l];o=(t-r+c-s*Math.abs(i)*n)/(Math.abs(i)*(a-s));if(o*Math.abs(i)>u)break;if(0===l)break;l-=1}return o},S=(e=[],t,r,a,i,n)=>{const{entryPrice:o=0,positionSize:s=0}=a,{entryPrice:l=0,positionSize:c=0}=i;if(0===s&&0===c)return 0;const{index:u,bracketMaintenanceMarginRate:d,cumFastMaintenanceAmount:m}=g(e,a),{bracketMaintenanceMarginRate:p,cumFastMaintenanceAmount:f}=g(e,i);let y=u,h=0,b=0;for(;y>=0;){let a=e.length-1;const{bracketMaintenanceMarginRate:i,cumFastMaintenanceAmount:n,bracketNotionalFloor:u}=e[y];for(;a>=0;){const{bracketMaintenanceMarginRate:u,cumFastMaintenanceAmount:d,bracketNotionalFloor:m}=e[a];h=(t-r+d+n-Math.abs(s)*o+Math.abs(c)*l)/(Math.abs(s)*i+Math.abs(c)*u-Math.abs(s)+Math.abs(c));if(h*Math.abs(c)>m)break;a-=1}if(h*Math.abs(s)>u)break;if(0===y)break;y-=1}if(Math.abs(s)>Math.abs(c)){const{markPrice:e}=n;if(b=(t-r+f+m-Math.abs(s)*o+Math.abs(c)*l)/(Math.abs(s)*d+Math.abs(c)*p-Math.abs(s)+Math.abs(c)),b>=0&&(Math.abs(b-e)<Math.abs(h-e)||h<0))return b}return h},k=(e=0,t=0,r=0)=>{const a=t+r;return(0,i.JX)(a?e/a*100:0,2)},P=(e,t)=>{const r={sl:{},tp:{}};return t.forEach((t=>{const a=!0===t.closePosition,i=e.symbol===t.symbol,o=e.positionSide===t.positionSide,s=e.positionSize<0&&"BUY"===t.side||e.positionSize>0&&"SELL"===t.side;a&&i&&o&&s&&(t.type===n.PH.TAKE_PROFIT_MARKET&&(r.tp=t),t.type===n.PH.STOP_MARKET&&(r.sl=t))})),r}},xbrC:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});const a=(e=[])=>{const t=[];return e.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>!t.includes(e)&&t.push(e)))})),t}},k4WF:(e,t,r)=>{"use strict";function a(e){return/[^\d|.|,|\u3002|\%]/.test(e)}r.d(t,{_p:()=>i,Y5:()=>n,f5:()=>o});const i=(e,t,r,i)=>{let n="object"!==typeof e?e:e.target.value;return a(Number(n))?"":~n.indexOf("%")?n:(/\u3002|,/.test(n)&&(n=n.replace(/[\u3002|,]/g,".")),/^0\d/.test(n)?n="0":/^\./.test(n)?n=0+n.substring(0,i+1):Number(n)>=0&&-1!==n.indexOf(".")&&n.split(".")[1].length>=i&&(n=n.replace(new RegExp(`^(\\d*\\.\\d{${i}})\\d*`),"$1")),Number.isNaN(Number(n))?"":void(r?t(r,n):t(n)))},n=e=>!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value=""),o=(e,t)=>"Enter"===e.key&&t()},k2tD:(e,t,r)=>{"use strict";r.d(t,{GW:()=>n,mD:()=>o,OR:()=>s,nH:()=>l});var a=r("QlFx");const i=(e,t,r="round",i=!1)=>{const n=10**t;let o=(+(e=e||0)+1/10**(t+3))*n;if("string"===typeof r){const e=2;o=parseInt(o*10**e,10)/10**e,r=((e="bids")=>(()=>{switch(e){case"bids":return"floor";case"asks":return"ceil";default:if(Math[e])return Math[e];throw new Error("getRoundFunc called with unknown type")}})())(r)}if("function"!==typeof r)throw new Error("decRound unknown rounding func");return i?(0,a.uf)(r(o)/n,t):(r(o)/n).toFixed(t)},n=(e,t=2,r)=>i(e,t,"floor",r),o=(e,t=2,r)=>i(e,t,"ceil",r),s=e=>Math.abs(Math.log10(e)),l=(e=0)=>0===e?1:Math.abs(1/10**e)},wdcV:(e,t,r)=>{"use strict";r.d(t,{J9:()=>a,_g:()=>i,kh:()=>n,L6:()=>o,nn:()=>s,QN:()=>l});const a=e=>Object.values(e).filter((e=>{const{positionSize:t,isolatedWallet:r}=e||{};if(void 0===t)return;const a=Number(t);return 0!==a||0===a&&Number(r)<0})),i=(e,t)=>t&&"BOTH"!==t?`${e}_${t}`:e,n=(e=[])=>e.reduce(((e,t)=>{const{symbol:r}=t;return e[r]=t,e[`${i(r,"LONG")}`]=t,e[`${i(r,"SHORT")}`]=t,e}),{}),o=e=>e.reduce(((e,t)=>{const{marginAsset:r}=t;return e[r]=e[r]||[],e[r].push(t),e}),{}),s=({marginAsset:e,positions:t={}})=>Object.values(t).filter((t=>(null===t||void 0===t?void 0:t.marginAsset)===e))||[],l=e=>e.reduce(((e,{symbol:t,positionSide:r,orderSide:a,amount:i,message:n})=>{let o=r;"BOTH"===r&&(o="BUY"===a?"SHORT":"LONG");const s=`${t}_${o}`,l="LONG"===o?"buy":"sell",c=`${i} %unit% ${n}`;return e[s]?e[s].messages.push(c):e[s]={symbol:t,positionSide:o,color:l,amount:i,messages:[c]},e}),{})},"/M83":(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});const a=(e="",t={})=>{const{baseAsset:r,quoteAsset:a}=t;return[e,[r,a]]}},gHlc:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r("/SIk"),i=r.n(a),n=r("B+uY"),o=r("Fee1"),s=r("Gbz3"),l=r("pVAJ"),c=r("AHTf"),u=r("dUK7"),d=r("S24M"),m=i().createElement;const p={[c.$f]:"bottomRight",[c.UW]:"topRight",mobile:"topCenter"},f=()=>{const{0:e,1:t}=(0,a.useState)(!1),r=(()=>{const{isMobile:e}=(0,l.Fs)(),t=(0,s.C3)()===c.UW;let r=c.$f;return e?r="mobile":t&&(r=c.UW),r})();return(0,a.useEffect)((()=>{!async function(){var e;const r=await u.Z.getHelper(),a=null===(e=(await r.getAbConfig()).flows)||void 0===e?void 0:e.announcementToolCheckbox;t("show"===a)}()}),[]),m(o.Z,{name:"announcement"},m(n.Z,{business:"FUTURES",scope:"TRADING_PAGE",showCheckbox:e,i18nHost:c.Yz,WS_HOST:c.Ij,sensorsTrack:d.j,placement:p[r]}))}},"3Slz":(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("eZDF"),s=r("XPyD"),l=r("6eVz"),c=r("Qkkg"),u=r("Lbl8"),d=r("pVAJ"),m=r("3p6E"),p=r("AHTf"),f=r("6Afj"),g=i().createElement;const y=(0,f.SA)((()=>Promise.all([r.e(712),r.e(666)]).then(r.bind(r,"gHlc")))),h=({children:e})=>{(0,d.TF)(),(0,m.r5)(),(0,m.Vr)();const t=(0,n.useDispatch)();return(0,a.useEffect)((()=>{t.userCenter.checkLogin()}),[t.userCenter]),g(i().Fragment,null,g(u.Z,null),g(l.I,null),g(y,null),e)},b=({render:e,children:t})=>{const{isMobile:r}=(0,d.Fs)(),a=(0,n.useSelector)((e=>e.setting.layout)),l=(0,n.useSelector)((e=>e.layout.pageLayout))===p.UW,u=a===p.rh||a===p.UW||r||l,m=e?e():null;return g(i().Fragment,null,t,g(c.Z,null,g(o.Z,{sx:{pt:"8px",pb:"0px"}},g(s.Z,{queueSize:2,closable:!0,autoHideDuration:1500,anchorOrigin:{vertical:u?"top":"bottom",horizontal:"right"},disableAnimate:!0},g(h,null,m)))))},v=(0,a.memo)(b)},d92h:(e,t,r)=>{"use strict";r.d(t,{Z:()=>z});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=r("rI7q"),l=r("2swO"),c=r("Ozc/"),u=r("kZs2"),d=r("Tfqf"),m=r("pVAJ"),p=r("Gbz3"),f=r("3p6E"),g=r("Fee1"),y=r("SKkT"),h=r("6u/I"),b=r("v5rq"),v=r("WBfh"),x=r("/MJE"),S=r("qNjr"),k=r("MvZp"),P=r("xpv6"),T=r("FOuV"),C=r("EPGa"),w=r("S24M");const I=({type:e,price1:t,price2:r})=>{(0,w.j)("webClick",{module:"chart",type:e,price1:t,price2:r})};var M=r("NQFm");const E=[C.Jm.LIMIT];var N=r("lXyA"),Z=r.n(N),A=r("ph+q");const O="trd_chart_basic_kline_load_timeout",R=e=>[e.time,e.open,e.high,e.low,e.close];const V=({dataProvider:e,symbol:t,interval:r,logOnFetchEndCallback:n,logOnFetchStartCallback:o,logOnKlineReadyCallback:s,logOnErrorDataCallback:l,logOnCatchChartCallback:d})=>{const m=(0,i.useCallback)((()=>{Z()((e=>{(0,u.Os)({eventId:O,scheduleId:"",stepId:"fetchDataEnd",catch({error:t,track:r}){r({FETCH_DATA_END_TYPE:t,duration_:(0,u.Fr)(Date.now()-e)})},log({track:t}){t({FETCH_DATA_END_TYPE:"SUCCESS",duration_:(0,u.Fr)(Date.now()-e)})}})})),null===n||void 0===n||n()}),[n]),p=(0,i.useCallback)((()=>{Z()((()=>{const e=(0,u.Nb)({id:"fetchDataStart"}),t=(0,u.Nb)({id:"fetchDataEnd",timeout:6}),r=(0,u.Nb)({id:"basicKlineReady",timeout:3});u.Os.init({step:e._(t)._(r),eventId:O}),(0,u.Os)({eventId:O,stepId:"fetchDataStart",catch({error:e,track:t}){t({FETCH_DATA_START_TYPE:e})},log({track:e}){e({FETCH_DATA_START_TYPE:"SUCCESS"})}})})),null===o||void 0===o||o()}),[o]),f=(0,i.useCallback)((()=>{Z()((()=>{(0,u.Os)({eventId:O,stepId:"basicKlineReady",catch({error:e,track:t}){t({BASIC_KLINE_READY_TYPE:e})},log({track:e}){e({BASIC_KLINE_READY_TYPE:"SUCCESS"})}})})),null===s||void 0===s||s()}),[s]),g=(0,i.useRef)(new Set);return{logOnFetchEnd:m,logOnFetchStart:p,logOnKlineReady:f,logOnErrorData:(0,A.D)((i=>{if(!g.current.has(i.type)){const n=e.trackingData.klineDataQueue.find((({id:e})=>i.payload.prevItem.id===e)),o=e.trackingData.klineDataQueue.find((({id:e})=>i.payload.nextItem.id===e));(0,w.j)(`trd_chart_${i.type}`,(0,a.Z)({trd_chart_symbol:t,trd_chart_interval:r,neighbor:JSON.stringify([n,o])},function(e){switch(e.type){case"disConnect":case"renderError":return{trd_chart_nextItem:JSON.stringify(R(e.payload.nextItem)),trd_chart_prevItem:JSON.stringify(R(e.payload.prevItem))};case"invalidData":return{trd_chart_invalid_data:JSON.stringify(R(e.payload.data))};default:return{}}}(i))),g.current.add(i.type)}null===l||void 0===l||l()})),logOnCatchChart:(0,i.useCallback)((e=>{c.Z.log(JSON.stringify({type:"kline-error",error:e}),"custom"),null===d||void 0===d||d()}),[d])}};var L=n().createElement;const F=h.kM.map((({value:e})=>e)),D=({dataProvider:e,namespace:t,symbol:r,storeSymbol:n,customIndicators:c=[],logOnFetchEndCallback:g,candleRef:C,isShowDrawPanel:w=!1,isShowAnnotationPanel:N=!0})=>{var Z,A;const{getI18n:O}=(0,p.yk)(),{isContUnit:R}=(0,d.Q)(),D=(0,i.useMemo)((()=>O("Cont",{defaultValue:"Cont"})||""),[O]),_=(0,m.Fg)().isLight?"light":"dark",z=(0,m.Vh)()[n],{symbolDisplay:B="",baseAsset:K,quoteAsset:q,tickSize:W,isDelivery:H}=z||{},U=R?D:K,[j,$]=(0,f.TG)(),G=(0,m.C$)(),{getI18n:J}=(0,h.K_)(),{0:Y,1:Q}=(0,i.useState)(1),[X,ee]=(0,b.Qy)(t)(v.St),[te,re]=(0,b.Nu)(t)(v.At),[ae]=(0,b.kH)(t)(v.J$),ie=(0,b.H9)(t)(v.Hs),ne=(0,b.v5)(t)(v.B3),oe=(0,i.useCallback)((e=>ie===h.vm.basic&&ne(e)),[ie,ne]),se=(0,b.mj)(t)(v.aK),le=(0,i.useMemo)((()=>(0,u.p8)(+W)),[W]),{showConfirmation:ce,confirmationProps:ue}=(({candlestick:e,symbol:t,namespace:r})=>{var n;const{getI18n:o}=(0,p.yk)(),[l]=(0,b.PH)(h.A4)(v._9),[c]=(0,P.g)(T.Zv,T.Xd),[d]=(0,b.$q)(r)(v.QQ),{kLine:g=!1,needConfirm:y}=c||{},x=(0,m.AM)()[t],{tickSize:C,contractVal:w,isDelivery:N,filters:Z}=x||{},A=(null===(n=Z.find(M.W4))||void 0===n?void 0:n.maxQty)||"",O=(0,f.Xw)(),{enqueueNotification:R}=(0,k.Z)(),{0:V,1:L}=(0,i.useState)(1),{0:F,1:D}=(0,i.useState)(!1),{0:_,1:z}=(0,i.useState)(),B=(0,p.H3)({symbol:t,tickSize:C}),K=(0,i.useMemo)((()=>B.filter((({order:e})=>E.includes(e.origType)))),[B]),q=(0,i.useMemo)((()=>(0,u.p8)(+C)),[C]),W=(0,i.useMemo)((()=>o("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[o]),H=(0,i.useMemo)((()=>o("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[o]),U=(0,i.useMemo)((()=>o("cont-unit",{defaultValue:"Cont"})),[o]),j=(0,i.useMemo)((()=>`${H}: ${A} ${U}`),[U,A,H]),$=(0,i.useCallback)((()=>L((e=>e+1))),[]),G=(0,i.useCallback)((()=>{$(),D(!1)}),[$]),J=(0,i.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const n=await(0,S.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);n.success?R({message:W}):"90814005"===n.code&&R({message:j,autoHideDuration:1e4}),G()}),[R,G,j,W]),Y=(0,i.useCallback)((async e=>{var r;const i=+((null===e||void 0===e?void 0:e.origQty)||""),n=+((null===e||void 0===e?void 0:e.quantity)||""),o=+((null===e||void 0===e?void 0:e.price)||""),s="quantity"===e.hasChanged?"cont"===e.unit?n:(({price:e,coin:t,contractVal:r})=>t*e/r)({price:o,coin:n,contractVal:w}):i,l="cont"===e.unit?s:(({price:e,cont:t,contractVal:r})=>t*r/e)({price:o,cont:s,contractVal:w}),c={orderId:e.orderId,price:o,quantity:s,symbol:t,side:null===(r=e.order)||void 0===r?void 0:r.side},u="price"===e.hasChanged?"PRICE":"quantity"===e.hasChanged?"QUANTITY":"";y?(z({order:(0,a.Z)((0,a.Z)({},e.order),{},{modifyParams:{limitPrice:c.price,qty:l,amendedField:u},onConfirm:()=>J(c,void 0)}),onClose:G}),D(!0)):J(c,void 0)}),[w,t,y,G,J]);return(0,i.useEffect)((()=>{if(e&&N&&d&&l!==s.k.Dropdowns.MultiChartDropdownType.Four)return K.forEach((({price:t,quantity:r,orderTypeText:i,origQty:n,cancel:o,orderId:s,unit:l,order:c})=>{var u;const d=null===(u=(+t).toFixed(q))||void 0===u?void 0:u.toString();e.createOrderLine((0,a.Z)({price:d,quantity:r.toString(),orderTypeText:`${i} `,editable:g,onClose:()=>{I({type:"cancel"}),o()},onPriceChange:e=>{I({type:"dragIcon"===e.trigger?"order":"vertical",price1:+t,price2:+((null===e||void 0===e?void 0:e.price)||"")}),Y({price:e.price||"",quantity:e.quantity||"",origQty:n,orderId:s,unit:l,order:c,hasChanged:e.price!==e.prevPrice?"price":""})},onQuantityChange:e=>{I({type:"Amountclick"}),Y({price:e.price||"",quantity:e.quantity||"",origQty:n,orderId:s,unit:l,order:c,hasChanged:e.quantity!==e.prevQuantity?"quantity":""})},onClickDragArea:e=>{I({type:"dragIcon"===e.triggerType?"order":"vertical"})},onClickQuantity:e=>{I({type:"Amountclick"})}},(({isBuy:e,theme:t})=>{const r=e?t.colors.buy:t.colors.sell;return{textInputBorderColor:r,dragSquareIconColor:r,dragSquareBackgroundColor:t.colors.popupBg,dragSquareDraggingBackgroundColor:t.colors.line,closeIconColor:r,priceBackground:t.colors.popupBg,priceColor:r,priceBorderColor:r,quantityBackground:r,quantityColor:t.colors.t.white,quantityBorderColor:r,borderColor:r,priceLabelBackground:t.colors.moduleBg,priceLabelBorderColor:r,priceLabelColor:r,background:t.colors.popupBg,lineColor:r,lineDash:[2,2],draggingLineDash:[0,0]}})({isBuy:"BUY"===c.side,theme:O})))})),()=>{e.deleteAllOrderShape()}}),[l,e,q,O,K,V,Y,N,d,g]),{showConfirmation:F,confirmationProps:_}})({candlestick:null===C||void 0===C||null===(Z=C.current)||void 0===Z?void 0:Z.getCandlestick(),symbol:n,namespace:t});(({symbol:e,namespace:t,candlestick:r})=>{const[n]=(0,b.PH)(h.A4)(v._9),[o]=(0,b.$q)(t)(v.QQ),l=(0,f.Xw)(),c=(0,m.AM)()[e],{tickSize:d,isDelivery:g}=c||{},y=(0,p.db)({symbol:e,tickSize:d}),x=(0,i.useMemo)((()=>(0,u.p8)(+d)),[d]);(0,i.useEffect)((()=>{if(r&&g&&o&&n!==s.k.Dropdowns.MultiChartDropdownType.Four)return y.forEach((({isBuy:e,price:t,positionTypeText:i,quantity:n,PNL:o})=>{var s;const c=null===(s=t.toFixed(x))||void 0===s?void 0:s.toString();r.createPositionLine((0,a.Z)({price:c,quantity:n,pnl:o,positionTypeText:`${i} `,showCloseButton:!0},(({isBuy:e,pnl:t,theme:r})=>{const a=e?r.colors.buy:r.colors.sell,i=t>0?r.colors.buy:t<0?r.colors.sell:r.colors.t.primary;return{priceColor:i,priceBackgroundColor:r.colors.popupBg,priceBorderColor:i,quantityColor:r.colors.t.white,quantityBackgroundColor:a,quantityBorderColor:a,closeButtonColor:a,closeButtonBackgroundColor:r.colors.popupBg,closeButtonBorderColor:a,priceLabelColor:r.colors.t.white,priceLabelBackgroundColor:a,priceLabelBorderColor:a,lineColor:a,lineDash:[2,2]}})({isBuy:e,pnl:o,theme:l})))})),()=>{r.deleteAllPositionShape()}}),[n,r,y,l,g,o,x])})({candlestick:null===C||void 0===C||null===(A=C.current)||void 0===A?void 0:A.getCandlestick(),symbol:n,namespace:t});const{setMessageInfo:de}=(0,m.YT)(),me=(0,f.zE)((()=>{"1M"!==X&&Q((e=>e+1))}),1e3),pe=V({dataProvider:e,symbol:n,interval:X,logOnFetchEndCallback:g,logOnErrorDataCallback:me}),fe=(0,i.useMemo)((()=>(0,a.Z)({symbol:r,storeSymbol:n,interval:X,candlestick:{type:te,tickSize:le,isFloor:!0},theme:_,themeKey:G,isShowDrawPanel:w,isShowAnnotationPanel:N,getI18n:J,baseAsset:U,quoteAsset:q,dataProvider:e,customTheme:{light:j,dark:$},isStock:"last"!==ae,setLoading:oe,namespace:t,sensorsManager:pe},{isShowCustomIndicator:!0})),[r,n,X,te,_,J,U,q,e,j,$,oe,t,pe,ae,le,G,w,N]);return L(o.Z,{flex:1,style:{overflow:"hidden",height:"100%",display:ie!==h.vm.basic?"none":"block"},key:`${r}${Y}`,className:"focus-area","data-testid":"kline"},L(s.k.BasicKline,{klineOptions:fe,showIndicatorMenu:se,customIndicators:c,electronShortcutOptions:{symbol:n,value:te===l.oX.Line?"Time":X,options:F,setInterval:ee,setChartType:re,electron:x.Z,enabled:!0},userDefinedIndicatorOptions:{symbolDisplay:B.split("/").join("_"),bizType:H?"delivery":"futures",setMessageInfo:de,electron:x.Z},ref:C}),ce?L(y.Z,ue):null)},_=e=>{const{getI18n:t}=(0,m.ZK)(),r=(0,i.useMemo)((()=>t("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})),[t]),a=(0,i.useMemo)((()=>t("trd-chart-crash-refresh",{defaultValue:"Refresh"})),[t]),n=(0,i.useCallback)(((e,t)=>{c.Z.log(JSON.stringify({type:"origin_kline",error:e,componentStack:t}),"custom")}),[]);return L(g.Z,{name:"origin_kline",FallbackComponent:({resetErrorBoundary:e})=>L(s.k.ChartFallback,{mainText:r,btnText:a,resetErrorBoundary:e}),onError:n},L(D,e))},z=n().memo(_)},HEA0:(e,t,r)=>{"use strict";r.d(t,{e:()=>Z});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("XhNN"),l=r("rI7q"),c=r("CHeW"),u=r("WEMK"),d=r("Gbz3"),m=r("pVAJ"),p=r("krVE"),f=r("FOuV"),g=r("6u/I"),y=r("v5rq"),h=r("WBfh"),b=r("/7dI"),v=r("fn8a"),x=r("Dvpw");r("pGvM"),r("aOwG"),n().createElement;r("7OLi");var S=r("dD6d"),k=(r("yrF0"),r("dXG6"),r("4oPc"),r("QO6n"),r("Fj3s"),r("QTjk")),P=r("QZED"),T=(r("T35f"),r("F+U1")),C=(r("OWui"),r("w0pE"),r("RL5m"),r("hYic"),r("ahhx"),r("h69z"),r("cEvC")),w=n().createElement;const I=({symbol:e,namespace:t,height:r,children:a,onRemove:i,onResume:n})=>{const o=(0,y.v5)(t)(h.pT),s=(0,C.N)({isReadyToTrade:!0,symbolDisplay:"",openTime:0}),c=(0,C.r)({namespace:t,symbol:e,headerType:T.vb.Medium,intervalFilterType:T.ls.Small2,height:r,headerHeight:"40px",showLoading:o,tabKeys:[],onRemove:i,onResume:n,headerSlot:null,showIntervalFilter:!0,showIndicator:!0,showOrderMark:!1,showChartStyleDropdown:!1,showPriceDropdown:!0,showCompare:!1,showCamera:!1,showMiniSymbolStatus:!0,showTabs:!1,showMultiChartDropdown:!1,showChange:!0,showFullscreenIcon:!1,showResumeWindow:!0,showClose:!0,useDraggableHandle:!1});return w(l.k.Chart,{countdownProps:s,layoutProps:c},a)};var M=r("FIEq"),E=n().createElement;const N=new Array(4).fill(0).map(((e,t)=>({value:t,name:"",price:"",showClose:!0,children:null,visible:!1}))),Z=({singleChartNamespace:e,multiChartNamespace:t,isPro:r,onRemove:n})=>{var T,C;const w=(0,m.zO)(),[Z]=(0,m.z4)(),A=(0,m.j2)(),O=(0,o.useSelector)((e=>e.products.products)),R=(0,m.Vh)(),V=(0,d.d0)(),[,L]=(0,y.kH)(e)(h.J$),[,F]=(0,y.Qy)(e)(h.St),[,D]=(0,y.PH)(t)(h._9),[_,z]=(0,y.zz)(t)(h.DB),[B,K]=(0,y.Lb)(t)(h.AI),q=(0,i.useRef)(new Array(B.length).fill(0).map((()=>(0,i.createRef)()))),W=(0,i.useRef)(null),H=(0,i.useRef)(null),U=(0,i.useMemo)((()=>(0,g.lv)(t,_)),[t,_]),[j]=(0,y.Qy)(U)(h.St),[$]=(0,y.kH)(U)(h.J$),{0:G,1:J}=(0,i.useState)(N),{0:Y,1:Q}=(0,i.useState)(!1);(0,i.useEffect)((()=>{const{curSymbol:e}=(0,p.Ib)(O,f.L6,"delivery"),t=B.map(((t,r)=>{const a=r===_?Z:t,i=R[a],n=null===i||void 0===i?void 0:i.contractStatus.toLowerCase();return""===a?a:"close"===n||void 0===n?e:a}));K(t)}),[Z,w]);const X=(0,i.useCallback)((e=>{const t=B[e.value],r=R[t];r&&V({stateSymbol:r.symbol,isDeliveryColumn:r.isDelivery,isBlank:r.isDelivery!==A.isDelivery}),z(e.value)}),[B,R,A,z,V]),ee=(0,i.useCallback)((e=>{K(B.map(((t,r)=>e.value===r?"":t)))}),[B,K]),te=(0,i.useCallback)((e=>{X(e),Q(!0)}),[X]);(0,i.useEffect)((()=>{Y&&(F(j),L($),D(l.k.Dropdowns.MultiChartDropdownType.Single),Q(!1))}),[Y,F,L,D,U,j,$]),(0,i.useEffect)((()=>{J((e=>e.map(((e,r)=>{const i=B[r],n=q.current[r],o=R[i],s=(0,g.lv)(t,r);return(0,a.Z)((0,a.Z)({},e),{},{name:E(k.F,{symbol:i}),price:E(P.t,{symbol:i,namespace:s}),visible:!!i,children:i?E(I,{height:void 0,symbol:i,namespace:s,onRemove:t=>{t.stopPropagation(),ee(e)},onResume:t=>{t.stopPropagation(),te(e)}},null!==o&&void 0!==o&&o.isDelivery?E(v.default,{namespace:s,symbol:i,isContUnit:!1,useMiniTicker:!0,showTradingView:!1,isShowDrawPanel:!1,isShowAnnotationPanel:!1,candleRef:n}):E(b.Z,{namespace:s,symbol:i,useMiniTicker:!0,showTradingView:!1,isShowDrawPanel:!1,isShowAnnotationPanel:!1,candleRef:n})):E(l.k.ChartPlaceholder,null)})}))))}),[t,R,B,J,ee,te]);const re=null===(T=q.current[_])||void 0===T||null===(C=T.current)||void 0===C?void 0:C.getCandlestick(),ae=E(S.N,null),ie=r?E(x.Z,{onRemove:n}):null;return E(s.Z,{ref:W,sx:{overflow:"hidden",height:"100%",position:"relative"}},E(l.k.MultiChartManager,{draggable:r,windows:G,value:_,onChange:X,onCloseTab:ee,utilityTray:(0,M.l)([ae,ie]),sidebar:E(s.Z,{ref:H},E(c.Z,{wrapRef:H.current,candlestickInstance:re}))}),E(u.Z,{wrapRef:W,candlestickInstance:re}))}},nZi1:(e,t,r)=>{"use strict";r.d(t,{K:()=>b});var a=r("/SIk"),i=r.n(a),n=r("fAnk"),o=r("Vg22"),s=r("rI7q"),l=r("6u/I"),c=r("6C5I"),u=r("v5rq"),d=r("WBfh"),m=r("tS/l"),p=r("siTu"),f=r("pVAJ"),g=r("cEvC"),y=r("F+U1"),h=i().createElement;const b=({symbol:e,namespace:t,isPro:r,height:a,headerSlot:i,children:b,onRemove:v,tabKeys:x,showFullscreenIcon:S,showMultiChartDropdown:k})=>{const P=(0,f.Vh)(),{isDelivery:T}=P[e]||{},{isMobile:C,isIPad:w}=(0,m.F)(),I=(0,o.useSelector)(c.Xj),[M,{width:E}]=(0,n.Z)(),N=(0,u.H9)(t)(d.Hs),Z=(0,u.v5)(t)(d.pT),A=C||E<580?y.ls.Small:y.ls.Medium,O=(0,g.N)({isReadyToTrade:!0,symbolDisplay:"",openTime:0}),R=(0,g.r)({namespace:t,symbol:e,headerType:y.vb.Medium,intervalFilterType:A,height:a,headerHeight:C?"48px":"40px",showLoading:Z,tabKeys:x,onRemove:v,onResume:()=>null,headerSlot:i,showIntervalFilter:!!C||N!==l.vm.depth,showIndicator:!!C||N!==l.vm.depth,showOrderMark:T&&N!==l.vm.depth||N===l.vm.tradingView,showChartStyleDropdown:N===l.vm.tradingView,showPriceDropdown:!!C||N!==l.vm.depth,showCompare:N===l.vm.tradingView,showCamera:N===l.vm.tradingView,showMiniSymbolStatus:!1,showChange:!1,showTabs:!0,showMultiChartDropdown:k,showFullscreenIcon:S,showResumeWindow:!1,showClose:r&&!I&&!w,useDraggableHandle:r&&!I});return h(s.k.Chart,{countdownProps:O,layoutProps:R,ref:M},b,N===l.vm.depth&&h(p.default,{symbol:e}))}},T35f:(e,t,r)=>{"use strict";r.d(t,{R:()=>c});var a=r("/SIk"),i=r.n(a),n=r("v5rq"),o=r("WBfh"),s=r("pGvM"),l=i().createElement;const c=({namespace:e})=>{const[[t,r]=[void 0,void 0]]=(0,n.gq)(e)(o.gW),a=(null===r||void 0===r?void 0:r.close)||0,i=(null===t||void 0===t?void 0:t.close)||0;return l(s.W,{oldPrice:a,newPrice:i},null===t||void 0===t?void 0:t.change)}},"7OLi":(e,t,r)=>{"use strict";r.d(t,{i:()=>c});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("6C5I"),s=r("rI7q"),l=i().createElement;const c=()=>{const e=(0,n.useSelector)(o.Xj),t=(0,n.useDispatch)();return l(s.k.Icons.Fullscreen,{size:20,expanded:!e,onClick:t.pageStore.toggleFullScreen})}},"F+U1":(e,t,r)=>{"use strict";r.d(t,{vb:()=>p,ls:()=>f,Zl:()=>g});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("w0pE"),s=r("OWui"),l=r("RL5m"),c=r("ahhx"),u=r("h69z"),d=r("hYic"),m=i().createElement;let p,f;!function(e){e[e.Medium=0]="Medium",e[e.Small=1]="Small"}(p||(p={})),function(e){e[e.ExtraSmall=0]="ExtraSmall",e[e.Small=1]="Small",e[e.Small2=2]="Small2",e[e.Medium=3]="Medium"}(f||(f={}));const g=e=>{const t=(0,a.useMemo)((()=>{switch(e.intervalFilterType){case f.ExtraSmall:return m(l._,{namespace:e.namespace});case f.Small:return m(c.Y,{namespace:e.namespace});case f.Small2:return m(u.B,{namespace:e.namespace});default:return m(d.z,{namespace:e.namespace})}}),[e.intervalFilterType,e.namespace]);return e.headerType===p.Small?m(o.r,{namespace:e.namespace},t):m(s.n,Object.assign({},e,{intervalFilter:m(n.Z,{sx:{ml:"0px !important"}},t)}))}},OWui:(e,t,r)=>{"use strict";r.d(t,{n:()=>M});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("rI7q"),s=r("pVAJ"),l=r("aOwG"),c=r("7OLi"),u=r("dD6d"),d=r("yrF0"),m=r("dXG6"),p=r("6u/I"),f=r("v5rq"),g=r("WBfh"),y=i().createElement;const h=({namespace:e})=>{const{getI18n:t}=(0,p.ZK)(),[r,i]=(0,f.OL)(e)(g.NB),{0:n,1:s}=(0,a.useState)(!1),l=(0,a.useCallback)((()=>s(!0)),[]),c=(0,a.useCallback)((()=>s(!1)),[]),u=(0,a.useCallback)((()=>s((e=>!e))),[]),d=(0,a.useCallback)((e=>{i(e),s(!1)}),[i,s]),m=(0,a.useMemo)((()=>t("chartStyle-bar",{defaultValue:"Bar"})||""),[t]),h=(0,a.useMemo)((()=>t("chartStyle-candles",{defaultValue:"Candles"})||""),[t]),b=(0,a.useMemo)((()=>t("chartStyle-hollowCandles",{defaultValue:"Hollow Candles"})||""),[t]),v=(0,a.useMemo)((()=>t("chartStyle-heikinAshi",{defaultValue:"Heikin Ashi"})||""),[t]),x=(0,a.useMemo)((()=>t("chartStyle-line",{defaultValue:"Line"})||""),[t]),S=(0,a.useMemo)((()=>t("chartStyle-area",{defaultValue:"Area"})||""),[t]),k=(0,a.useMemo)((()=>t("chartStyle-baseline",{defaultValue:"Baseline"})||""),[t]);return y(o.k.Dropdowns.ChartStyleDropdown,{value:r,open:n,onMouseEnter:l,onMouseLeave:c,onClickDropdownButton:u,onClickItem:d,optionText:[m,h,b,v,x,S,k]})};var b=r("4oPc"),v=i().createElement;const x=()=>{const{getI18n:e}=(0,s.ZK)(),[t]=(0,f.TB)()(g.F5),r=(0,a.useMemo)((()=>e("trd-compare",{defaultValue:"Compare"})||""),[e]);return v(o.k.Icons.Compare,{tip:r,onClick:()=>null===t||void 0===t?void 0:t.showCompareDialog()})};var S=i().createElement;const k=()=>{const{getI18n:e}=(0,s.ZK)(),[t]=(0,f.TB)()(g.F5),r=(0,a.useMemo)((()=>e("trd-snapshot",{defaultValue:"Snapshot"})||""),[e]);return S(o.k.Icons.Camera,{tip:r,onClick:()=>null===t||void 0===t?void 0:t.createScreenshot()})};var P=r("QO6n"),T=r("Fj3s"),C=r("FIEq"),w=r("Dvpw"),I=i().createElement;const M=({namespace:e,symbol:t,tabKeys:r,onResume:a,onRemove:i,intervalFilter:p,headerSlot:f,showIntervalFilter:g,showIndicator:y,showOrderMark:v,showChartStyleDropdown:S,showPriceDropdown:M,showMiniSymbolStatus:E,showChange:N,showTabs:Z,showMultiChartDropdown:A,showFullscreenIcon:O,showResumeWindow:R,showClose:V,showCompare:L,showCamera:F,useDraggableHandle:D})=>{const{isMobile:_}=(0,s.Fs)(),z=g?p:null,B=y?I(d.z,{namespace:e}):null,K=v?I(m.P,{namespace:e}):null,q=S?I(h,{namespace:e}):null,W=M?I(b.s,{namespace:e}):null,H=L?I(x,null):null,U=F?I(k,null):null,j=E?I(T.p,{namespace:e,symbol:t,showChange:N}):null,$=Z?I(n.Z,{sx:{"&:not(:last-child)":{mr:"sm"}}},I(P.m,{namespace:e,tabKeys:r})):null,G=O?I(c.i,null):null,J=A?I(u.N,null):null,Y=R?I(l.k,{onResume:a}):null,Q=V?I(w.Z,{onRemove:i}):null;return I(o.k.ChartHeader.Medium,{head:(0,C.l)([f,z,B,K,q,U,H,W]),mid:(0,C.l)([j]),tail:(0,C.l)([$,G,J,Y,Q]),useDraggableHandle:D,sx:_?{px:0}:{}})}},w0pE:(e,t,r)=>{"use strict";r.d(t,{r:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=({namespace:e,children:t})=>{const{getI18n:r}=(0,o.ZK)(),i=(0,s.mj)(e)(l.mJ),[u,d]=(0,s.H9)(e)(l.eE),[,m]=(0,s.WH)(e)(l.X1),p=(0,a.useMemo)((()=>r("technicalIndicator",{defaultValue:"Technical Indicator"})||""),[r]),f=(0,a.useMemo)((()=>r("Depth",{defaultValue:"Depth"})||""),[r]),g=(0,a.useCallback)((()=>{u===o.vm.basic&&i(),m(!1)}),[u,i,m]),y=(0,a.useCallback)((()=>{d(o.vm.depth),m(!1)}),[d,m]);return c(n.k.ChartHeader.Small,{indicatorText:p,depthText:f,onClickIndicator:g,onClickDepth:y,isDepthActive:u===o.vm.depth},t)}},yrF0:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=({namespace:e})=>{const{getI18n:t}=(0,o.ZK)(),[r]=(0,s.H9)(e)(l.eE),i=(0,s.mj)(e)(l.mJ),u=(0,s.BD)(e)(l.q8),d=(0,a.useCallback)((e=>{r===o.vm.basic?i():u(),e&&(null===e||void 0===e||e.nativeEvent.stopImmediatePropagation())}),[r,i,u]),m=(0,a.useMemo)((()=>t("technicalIndicator",{defaultValue:"Technical Indicator"})||""),[t]);return c(n.k.Icons.Indicator,{tip:m,onClick:d,sx:{ml:"0px !important"}})}},RL5m:(e,t,r)=>{"use strict";r.d(t,{_:()=>m});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=r("tS/l"),u=r("+tyu"),d=i().createElement;const m=({namespace:e})=>{const{options:t,option:r,dropdownExpanded:i,setDropdownOpen:m,handleClickItem:p}=(0,u.J)(e),{isMobile:f}=(0,c.F)(),[g,y]=(0,s.H9)(e)(l.eE),h=(0,a.useCallback)((()=>{g!==o.vm.basic?y(o.vm.basic):m((e=>!e))}),[g,y,m]);var b;return b=()=>f&&m(!1),(0,a.useEffect)((()=>(document.addEventListener("click",b),()=>document.removeEventListener("click",b))),[b]),d(n.k.IntervalFilter.ExtraSmall,{options:t,value:r,isDropdownActive:g===o.vm.basic,showDropdown:i,onClickDropdownButton:h,onClickItem:p})}},hYic:(e,t,r)=>{"use strict";r.d(t,{z:()=>p});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("wyfB"),s=r.n(o),l=r("6u/I"),c=r("v5rq"),u=r("WBfh"),d=r("+tyu"),m=i().createElement;const p=({namespace:e})=>{const{options:t,setOptions:r,option:i,dropdownExpanded:o,setDropdownOpen:p,handleClickItem:f}=(0,d.J)(e),{getI18n:g}=(0,l.ZK)(),[,y]=(0,c.m2)(e)(u.J8),[h,b]=(0,c.lR)(e)(u.Ud),v=(0,a.useCallback)((e=>{if(h){r(e),p(!1);const t=s()(l.kM,e.filter((e=>e.selected)),"value");y(t)}b(!h)}),[h,r,p,y,b]),x=(0,a.useCallback)((()=>{h||(p(!1),b(!1))}),[h,p,b]),S=(0,a.useMemo)((()=>g("selectIntervals",{defaultValue:"Select Intervals"})||""),[g]),k=(0,a.useMemo)((()=>g("save",{defaultValue:"Save"})||""),[g]),P=(0,a.useMemo)((()=>g("edit",{defaultValue:"Edit"})||""),[g]);return m(n.k.IntervalFilter.Medium,{options:t,value:i,isEditing:h,onClickEdit:v,title:S,saveText:k,editText:P,dropdownExpanded:o,onDropdownMouseEnter:()=>p(!0),onDropdownMouseLeave:x,onDropdownButtonClick:()=>p((e=>!e)),onClickItem:f})}},ahhx:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("+tyu"),s=i().createElement;const l=({namespace:e})=>{const{options:t,option:r,dropdownExpanded:a,setDropdownOpen:i,handleClickItem:l}=(0,o.J)(e);return s(n.k.IntervalFilter.Small,{options:t,value:r,showDropdown:a,onMouseEnterDropdwon:()=>i(!0),onMouseLeaveDropdown:()=>i(!1),onClickDropdownButton:()=>i(!0),onClickItem:l})}},h69z:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("+tyu"),s=i().createElement;const l=({namespace:e})=>{const{options:t,option:r,dropdownExpanded:a,setDropdownOpen:i,handleClickItem:l}=(0,o.J)(e);return s(n.k.IntervalFilter.Small2,{options:t,value:r,open:a,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClickDropdownButton:()=>i((e=>!e)),onClickItem:l})}},dD6d:(e,t,r)=>{"use strict";r.d(t,{N:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=()=>{const{getI18n:e}=(0,o.ZK)(),[t,r]=(0,s.PH)(o.A4)(l._9),{0:i,1:u}=(0,a.useState)(!1),d=(0,a.useMemo)((()=>e("miniMultiChart_1",{defaultValue:"1 Chart"})||""),[e]),m=(0,a.useMemo)((()=>e("miniMultiChart_4",{defaultValue:"4 Charts"})||""),[e]),p=(0,a.useMemo)((()=>e("miniMultiChartTooltip",{defaultValue:"K-line update frequencies are lower in multi-charts mode."})||""),[e]),f=(0,a.useCallback)((()=>u(!0)),[]),g=(0,a.useCallback)((()=>u(!1)),[]),y=(0,a.useCallback)((()=>u((e=>!e))),[]),h=(0,a.useCallback)((e=>{r(e),u(!1)}),[r]);return c(n.k.Dropdowns.MultiChartDropdown,{value:t,open:i,onMouseEnter:f,onMouseLeave:g,onClickDropdownButton:y,onClickItem:h,singleOptionText:d,multiOptionText:m,tooltipText:p})}},Fj3s:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("QTjk"),s=r("QZED"),l=r("T35f"),c=i().createElement;const u=({symbol:e,namespace:t,showChange:r})=>c(n.k.MiniSymbol.Status,{name:c(o.F,{symbol:e}),price:c(s.t,{symbol:e,namespace:t}),change:r?c(l.R,{namespace:t}):null})},dXG6:(e,t,r)=>{"use strict";r.d(t,{P:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=({namespace:e})=>{const{getI18n:t}=(0,o.ZK)(),[r,i]=(0,s.$q)(e)(l.QQ),u=(0,a.useMemo)((()=>t("order-icon",{defaultValue:"Display open orders"})||""),[t]);return c(n.k.Icons.OrderMark,{tip:u,onClick:i,toggled:r})}},QZED:(e,t,r)=>{"use strict";r.d(t,{t:()=>m});var a=r("/SIk"),i=r.n(a),n=r("tLXD"),o=r("pVAJ"),s=r("kZs2"),l=r("v5rq"),c=r("WBfh"),u=r("pGvM"),d=i().createElement;const m=({symbol:e,namespace:t})=>{const r=(0,o.Vh)()[e],{close:a=0,tickSize:i}=r||{},m=(0,s.MU)(i),[[p]=[void 0,void 0]]=(0,l.gq)(t)(c.gW),f=(null===p||void 0===p?void 0:p.close)||+a,g=(0,n.Z)(f)||0;return d(u.W,{oldPrice:g,newPrice:f},f.toFixed(m))}},"4oPc":(e,t,r)=>{"use strict";r.d(t,{s:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=({namespace:e})=>{const{getI18n:t}=(0,o.ZK)("trade-ui"),[r,i]=(0,s.H9)(e)(l.eE),[u,d]=(0,s.kH)(e)(l.J$),{0:m,1:p}=(0,a.useState)(!1),f=(0,a.useMemo)((()=>t("indexPrice",{defaultValue:"Index Price"})||""),[t]),g=(0,a.useMemo)((()=>t("markPrice",{defaultValue:"Mark Price"})||""),[t]),y=(0,a.useMemo)((()=>t("lastPrice",{defaultValue:"Last Price"})||""),[t]),h=(0,a.useMemo)((()=>[{text:f,value:"index"},{text:g,value:"mark"},{text:y,value:"last"}]),[f,g,y]),b=(0,a.useCallback)((()=>p(!0)),[p]),v=(0,a.useCallback)((()=>p(!1)),[p]),x=(0,a.useCallback)((()=>p(!0)),[p]),S=(0,a.useCallback)((e=>{d(e),p(!1),r===o.vm.depth&&i(o.vm.basic)}),[d,p,r,i]);return c(n.k.Dropdowns.TextDropdown,{showArrowIcon:!0,open:m,onMouseEnter:b,onMouseLeave:v,onClickDropdownButton:x,onClickItem:S,options:h,value:u})}},pGvM:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=i().createElement;const s=({oldPrice:e,newPrice:t,children:r})=>o(t>e?n.k.MiniSymbol.PriceRise:t<e?n.k.MiniSymbol.PriceDrop:n.k.MiniSymbol.PriceFlat,null,r)},aOwG:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=i().createElement;const s=({onResume:e})=>o(n.k.Icons.ResumeWindow,{size:20,onClick:e})},QTjk:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("pVAJ"),s=r("Gbz3"),l=i().createElement;const c=({symbol:e})=>{const{genSymbolDisplay:t}=(0,s.nN)(),r=(0,o.Vh)()[e],{symbol:a,contractTypeI18n:i,deliveryDateFormat:c}=t(r);return l(n.k.MiniSymbol.Name,null,`${a} ${i}${c}`)}},QO6n:(e,t,r)=>{"use strict";r.d(t,{m:()=>u});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("6u/I"),s=r("v5rq"),l=r("WBfh"),c=i().createElement;const u=({tabKeys:e,namespace:t})=>{const{getI18n:r}=(0,o.ZK)(),[i,u]=(0,s.H9)(t)(l.eE),d=(0,a.useMemo)((()=>e.map((e=>({value:e,label:e===o.vm.tradingView?o.wT[e]:r(o.wT[e],{defaultValue:o.wT[e]})||""})))),[r]);return c(n.k.RadioGroups.Plain,{name:`tab-${t}`,options:d,value:i,onChange:u})}},"+tyu":(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var a=r("/SIk"),i=r("2swO"),n=r("6u/I"),o=r("v5rq"),s=r("WBfh");const l=e=>{const{getI18n:t}=(0,n.ZK)(),[r,l]=(0,o.H9)(e)(s.eE),[c,u]=(0,o.Qy)(e)(s.St),[d,m]=(0,o.Nu)(e)(s.At),[p]=(0,o.m2)(e)(s.J8),[f,g]=(0,o.WH)(e)(s.X1),y=(0,a.useMemo)((()=>n.kM.map((e=>{const r=t(e.i18key,{defaultValue:e.defaultLabel})||"";return{value:e.value,text:e.num?`${e.num}${r}`:r,selected:!!p.find((t=>t.value===e.value))}}))),[t,p]),{0:h,1:b}=(0,a.useState)(y),v=(0,a.useCallback)((e=>{g(!1),u("Time"===e?"1m":e),m("Time"===e?i.oX.Line:i.oX.CandleBar),r===n.vm.depth&&l(n.vm.basic)}),[g,u,m,l,r]);return{options:h,setOptions:b,option:d===i.oX.Line?"Time":c,dropdownExpanded:f,setDropdownOpen:g,handleClickItem:v}}},cEvC:(e,t,r)=>{"use strict";r.d(t,{N:()=>l,r:()=>d});var a=r("/SIk"),i=r.n(a),n=r("AHTf"),o=r("6u/I"),s=r("pVAJ");const l=({isReadyToTrade:e,symbolDisplay:t,openTime:r})=>{const{0:i,1:l}=(0,a.useState)(e),{getI18n:c}=(0,o.ZK)(),{isLight:u}=(0,s.Fg)(),d=(0,a.useMemo)((()=>u?"white":"black"),[u]),m=(0,a.useMemo)((()=>`${n.Xs}/static/images/trade-next-ui/${d}-hourglass.gif`),[d]),p=(0,a.useMemo)((()=>`${n.Xs}/static/images/trade-next-ui/countdown-bg-${d}.svg`),[d]),f=(0,a.useMemo)((()=>`${n.Xs}/static/images/trade-next-ui/countdown-shiny.svg`),[]),g=(0,a.useMemo)((()=>c("will-be-open",{defaultValue:"will be open for trading in"})||""),[c]);return(0,a.useEffect)((()=>{l(e)}),[e]),{hourglassImagePath:m,backgroundImagePath:p,backgroundShinyImagePath:f,willOpenInText:g,onReady:()=>l(!0),isReady:i,openTime:r,symbol:t}};var c=r("F+U1"),u=i().createElement;const d=e=>({height:e.height,headerHeight:e.headerHeight,showLoading:e.showLoading,headerSlot:u(c.Zl,e)})},FIEq:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});var a=r("/SIk"),i=r.n(a)().createElement;const n=e=>e.map(((e,t)=>i(a.Fragment,{key:t},e)))},cN65:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("GEp0"),i=r("HWFi"),n=r("/SIk"),o=r.n(n),s=o().createElement;const l={display:"flex",mt:"16px","& .checkBox":{height:"16px",width:"16px"},"& .label":{color:"t.primary",fontSize:"12px"}},c=(0,n.memo)((({defaultChecked:e,value:t,label:r,getValue:o,style:c})=>{const{0:u,1:d}=(0,n.useState)(e);return s(a.Z,{sx:l,style:c,onClick:e=>{e.stopPropagation()}},s(i.Z,{checked:u,onChange:e=>{d(e.currentTarget.checked),o({[t]:e.currentTarget.checked})},className:"checkBox"}),s("div",{className:"label"},r))})),u=(0,n.memo)((({options:e=[],getValue:t})=>s(o().Fragment,null,e.map((e=>s(c,{label:e.label,getValue:t,key:e.value,value:e.value,defaultChecked:e.defaultChecked,style:e.style}))))))},"E+7l":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),n=r("AHTf"),o=r("RwUM"),s=r("pVAJ"),l=i().createElement;const c=function(){const e=(0,s.tZ)();return(0,s._n)()&&!1?l(o.Z,{expand:!0,lng:e,i18nHost:n.Xs}):null}},siTu:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r("/SIk"),i=r.n(a),n=r("rI7q"),o=r("jYz7"),s=r("4xt1"),l=r("pVAJ"),c=r("6u/I"),u=i().createElement;const d=({symbol:e})=>{const t=(0,l.Xw)(),r=(0,l.Vh)()[e],{tickSize:i,isDelivery:d}=r||{},{scale:m,setScale:p}=(0,l.pq)(),{asks:f,bids:g}=(0,l.Xl)(e,d),y=(0,a.useMemo)((()=>n.k.getDepthChartStyles(t,{width:2,height:18})),[t]),h=(0,c.p8)(i),b=(0,a.useMemo)((()=>"BTCUSDT"===e?0:h-1),[e,h]),v=(0,a.useCallback)((e=>(0,c.oB)((0,s.uf)(e,h))),[h]),x=(0,a.useCallback)((e=>(0,c.pF)(e,2)),[]),S=(0,a.useCallback)((e=>(0,c.oB)(e,b)),[b]),k=(0,a.useCallback)((e=>(0,c.pF)(e)),[]),P=(0,a.useCallback)(((e,t)=>`+${(0,c.gt)((e-t)/t,1)}`),[]),T=(0,a.useCallback)(((e,t)=>`${(0,c.gt)((e-t)/t,1)}`),[]);return u(o.Z,null,(({width:t,height:r})=>u(n.k.DepthChart,{symbol:e,d1Group:f,d2Group:g,canvas:{width:t,height:r},scale:m,styles:y,setScale:p,xTicksFormatter:v,yTicksFormatter:x,d1XValueFormatter:S,d2XValueFormatter:S,d1YValueFormatter:k,d2YValueFormatter:k,d1DeltaXValueFormatter:P,d2DeltaXValueFormatter:T})))}},"8RC1":(e,t,r)=>{"use strict";r.d(t,{Vq:()=>S,ZP:()=>k});var a=r("5vwO"),i=r("GpFh"),n=r("GDnE"),o=r("/SIk"),s=r.n(o),l=r("7nmT"),c=r("AVT8"),u=r("X46w"),d=r("XhNN"),m=r("e5RN"),p=r("XPyD"),f=r("Rhv4"),g=r("Du7o"),y=r("j0Pw"),h=r("wRKo"),b=s().createElement;let v,x=0;!function(e){e.dialog="dialog",e.styledDialog="styledDialog"}(v||(v={}));class S{constructor(){(0,n.Z)(this,"id",""),(0,n.Z)(this,"show",(e=>{let{type:t=v.styledDialog}=e,r=(0,i.Z)(e,["type"]),a=document.getElementById(this.id);if(a||(a=document.createElement("div"),a.id=this.id,document.body.appendChild(a)),l.unmountComponentAtNode(a),t===v.dialog){if(!r.dialogProps)throw new Error("must pass dialogProps");this.showDialog(r,a)}else this.showStyledDialog(r,a)})),(0,n.Z)(this,"showDialog",((e,t)=>{const{dialogProps:r}=e;requestAnimationFrame((()=>{l.render(b(y.Z,{theme:e.isLight?h.Wb:h.$_},b(c.Z,{sx:(0,a.Z)({width:["298px","360px","360px"],p:"md"},e.sx),visible:!0,onMaskClick:this.close},null===r||void 0===r?void 0:r.body,b(u.Z,{mt:["16px","16px","24px"],sz:"l",width:"100%",onClick:this.close},null===r||void 0===r?void 0:r.okText))),t)}))})),(0,n.Z)(this,"showStyledDialog",((e,t)=>{requestAnimationFrame((()=>{l.render(b(y.Z,{theme:e.isLight?h.Wb:h.$_},b(p.Z,{queueSize:2,closable:!0,autoHideDuration:4e3,anchorOrigin:{vertical:e.isMobile?"top":"bottom",horizontal:"right"}},b(f.Z,Object.assign({open:!0,onMaskClick:this.close,onCloseIconClick:this.close},e)))),t)}))})),(0,n.Z)(this,"close",(()=>{const e=document.getElementById(this.id);e&&l.unmountComponentAtNode(e)})),(0,n.Z)(this,"confirm",(async e=>{let{isLight:t,sx:r,content:n,cancelText:o,okText:l,hasFooter:c=!0}=e,p=(0,i.Z)(e,["isLight","sx","content","cancelText","okText","hasFooter"]);return new Promise(((e,i)=>{this.show((0,a.Z)((0,a.Z)({},p),{},{isLight:t,sx:(0,a.Z)({minWidth:"368px"},r),children:b(s().Fragment,null,b(d.Z,{sx:{mt:"xs",textAlign:"center"}},n),c&&b(g.y,null,b(m.Z,null,o&&b(u.Z,{flexGrow:1,variant:"outline",onClick:i,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",color:"t.primary",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},o),l&&b(u.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:e},l))))}))}))})),this.id=`binance-dialog${x}`,x++}}const k=new S},lFb1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("e5RN"),s=r("X46w"),l=i().createElement;const c=({onCancel:e,message:t,cancelText:r,okText:a,onOk:i})=>l(n.Z,null,l(n.Z,{sx:{my:"md"}},t),l(o.Z,null,l(s.Z,{flexGrow:1,variant:"outline",onClick:e,sz:"l",sx:{boxShadow:"none",border:"1px solid",borderColor:"dropdown.hoverBg",mr:3,width:.5,"&:hover":{borderColor:"t.yellow300",color:"t.yellow300",bg:"transparent !important"}}},r),l(s.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:i},a))),u=i().memo(c)},"2rU8":(e,t,r)=>{"use strict";r.d(t,{XI:()=>d,PH:()=>m});var a=r("/SIk"),i=r.n(a),n=r("OV9X"),o=r("pVAJ"),s=r("BzR9"),l=r("O94r"),c=r.n(l),u=i().createElement;const d=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,o.gm)()?c()([s.Z["alb-direction-rtl"],e.className]):c()(e.className);return u(n.Z,Object.assign({ref:t},e,{className:r}),e.children)})),m=(0,a.forwardRef)(((e,t)=>{const r="rtl"===(0,o.gm)()?c()([s.Z["alb-direction-rtl"],e.className]):c()(e.className);return u("div",Object.assign({ref:t},e,{className:r}),e.children)}))},"b/WR":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=n().createElement;function l(e){let{children:t}=e,r=(0,a.Z)(e,["children"]);return s(o.Z,Object.assign({sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},r),t)}},Fee1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("GDnE"),i=r("/SIk"),n=r.n(i),o=r("OV9X"),s=r("S24M"),l=r("M8Qk"),c=n().createElement;const u=()=>window.performance?window.performance.now():+new Date,d={hasError:!1,error:void 0,info:void 0,start:0};class m extends n().Component{constructor(e){super(e),(0,a.Z)(this,"state",d),(0,a.Z)(this,"resetErrorBoundary",((...e)=>{var t,r;null===(t=(r=this.props).onReset)||void 0===t||t.call(r,...e),this.setState(d)})),this.state.start=u()}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){var r,a;"undefined"!==typeof Sentry&&Sentry.configureScope((t=>{t.setTag("widget",this.props.name),t.setExtra("widget",this.props.name),Sentry.captureException(e)})),null===(r=(a=this.props).onError)||void 0===r||r.call(a,e,null===t||void 0===t?void 0:t.componentStack),(0,s.j)("widget_error",{widget:this.props.name}),(0,l.gp)({t:"COMPONENT_JS_ERROR",componentName:this.props.name,errorInfo:t,errorName:e.name,errorMessage:e.message,renderError:1}),console.error(e),this.setState({error:e,info:t,hasError:!0}),console.log(`${this.props.name||"Something"} went wrong.`),console.error(e)}componentDidMount(){(0,l.gp)({t:"COMPONENT_JS_MOUNT",componentName:this.props.name,renderDuration:u()-this.state.start,mountTime:window.performance?window.performance.now():null,renderSuccess:1})}render(){const{error:e,info:t,hasError:r}=this.state,{fallbackRender:a,FallbackComponent:i,fallback:s}=this.props;if(r){const r={componentStack:null===t||void 0===t?void 0:t.componentStack,error:e,resetErrorBoundary:this.resetErrorBoundary};return n().isValidElement(s)?s:"function"===typeof a?a(r):"function"===typeof i?c(i,r):c(o.Z,{fontSize:3,color:"t.primary",p:3},`Sorry, ${this.props.name||"Something"} went wrong. Please refresh the page.`)}return this.props.children}}const p=m},wbLk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),n=r("6i0u"),o=i().createElement;const s=()=>o("div",{style:{width:"100vw",height:"100vh"}},o("div",{style:{display:"flex",flex:"1 1 1",alignItems:"center",justifyContent:"center",height:"100%"}},o(n.Z,null)))},hIa1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("QJpQ"),o=r("Qkkg"),s=i().createElement;function l(){return s(o.Z,null,s(n.xB,{styles:e=>n.iv`
          html {
            overflow: -moz-hidden-unscrollable;
            height: 100%;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          body {
            margin: 0;
            height: 100%;
            width: 100vw;
            overflow-x: hidden !important;
            overflow-y: auto;
            -ms-overflow-style: none;
            -webkit-overflow-scrolling: touch;
            -webkit-tap-highlight-color: transparent;
            background-color: ${e.colors.overallBg};
          }
          h1 {
            margin: 0;
            padding: 0;
          }
          #__next {
            max-width: 100vw;
            overflow-x: hidden;
          }
          input {
            font-family: inherit;

            &::placeholder {
              font-style: normal !important;
            }
          }

          .list-grid {
            > div > div > div {
              margin-top: 0;
              margin-bottom: 0;
              padding-left: 0;
              padding-right: 0;
              height: 100%;
              > div {
                flex: 1;
              }
            }
          }
          body:not(.scrollBar)::-webkit-scrollbar {
            display: none;
          }

          .scrollBar {
            padding-right: 0px;
          }
          .scrollBar:hover {
            padding-right: 0px;
          }
          .scrollBar::-webkit-scrollbar {
            width: 0px;
            height: 0px;
          }
          .scrollBar:hover::-webkit-scrollbar,
          ::-webkit-scrollbar {
            width: 5px;
            height: 6px;
          }
          body.scrollBar::-webkit-scrollbar {
            height: 6px;
            width: 8px !important;
          }
          /*  */
          input[type='number']::-webkit-outer-spin-button,
          input[type='number']::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          /* react-grid */
          .react-grid-layout {
            position: relative;
            transition: height 200ms ease;
            margin-bottom: 24px;
          }
          .react-grid-item {
            transition: all 100ms ease;
            transition-property: left, top;
          }
          .react-grid-item.cssTransforms {
            transition-property: transform;
          }
          .react-grid-item.resizing {
            z-index: 1;
            will-change: width, height;
          }
          .react-grid-item.react-draggable-dragging {
            transition: none;
            z-index: 3;
            will-change: transform;
          }
          .react-grid-item.dropping {
            visibility: hidden;
          }
          .react-grid-item.react-grid-placeholder {
            background: red;
            opacity: 0.2;
            transition-duration: 100ms;
            z-index: 2;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -o-user-select: none;
            user-select: none;
            box-shadow: 0px 0px 100px #000;
          }
          .react-grid-item > .react-resizable-handle {
            position: absolute;
            width: 20px;
            height: 20px;
            bottom: 0;
            right: 0;
            cursor: se-resize;
            z-index: inherit;
          }
          .react-grid-item > .react-resizable-handle::after {
            content: '';
            position: absolute;
            right: 3px;
            bottom: 3px;
            width: 5px;
            height: 5px;
            border-right: 2px solid ${e.colors.icons.close};
            border-bottom: 2px solid ${e.colors.icons.close};
          }
          .react-resizable-hide > .react-resizable-handle {
            display: none;
          }
          /* react-resizable */
          .react-resizable {
            position: relative;
          }

          .draggableHandle {
            cursor: grab;
          }

          .react-draggable-dragging .draggableHandle {
            cursor: grabbing;
          }
          /*  */
          ::-webkit-scrollbar-track {
            background: transparent;
          }
          ::-webkit-scrollbar-thumb {
            background: ${e.colors.line};
            border-radius: 4px;
            width: 4px;
          }

          /*  stylisRtl .rc-calendar-picker */
          .rc-calendar-picker {
            position: absolute;
            right: 0 !important;
            z-index: 1000;
          }

          .react-grid-item.react-grid-placeholder {
            pointer-events: none;
          }

          .react-resizable-handle {
            visibility: hidden;
          }

          .trading-page-close-button {
            visibility: hidden;
          }

          .react-grid-item:hover .react-resizable-handle,
          .react-grid-item:hover .trading-page-close-button,
          .react-resizable-handle:hover {
            visibility: visible;
          }
        `}))}},LPVO:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Q,openHelpCenterModal:()=>G,useHelpCenterLanguage:()=>J});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=r("M/l8"),s=r("AHTf"),l=r("lH+D"),c=r("U0yl"),u=r("Qkkg"),d=r("xpNn"),m=r("OV9X"),p=r("Rhv4"),f=r("QyEl"),g=r("kZs2"),y=r("wjiZ"),h=r("7nrG"),b=r("yoTI"),v=i().createElement;const x=({title:e,children:t,isDefaultExpand:r=!1})=>{const{0:i,1:n}=(0,a.useState)(r),o=(0,a.useCallback)((()=>{n((e=>!e))}),[]);return v("div",{className:"toggle-panel"+(i?" expand":"")},v("div",{className:"toggle-title",onClick:o},e,v(b.Z,{size:16,className:"arrow"})),v("div",{className:"toggle-content"},t))},S=i().memo(x);var k=i().createElement;const P=({codes:e,data:t})=>{const{i18n:{language:r},getI18n:a}=J();return k(S,{isDefaultExpand:!0,title:k(n.Z,null,k(h.Z,null),k(m.Z,{variant:"subtitle1",className:"panel-name"},a("HotTopics",{defaultValue:"Hot Topics"})))},e.map((e=>{const{code:a,title:i,type:n}=t[e]||{};return k(y.Z,{variant:"secondaryLink",key:a,className:"common-link",href:`/${r}/support/${1===n?"announcement":"faq"}/${a}`,target:"_blank"},i)})),k(m.Z,{as:"a",variant:"addressLink",href:`/${r}/support/list/a-guide-to-Binance-Futures`,target:"_blank",className:"more-link"},a("LearnMore",{defaultValue:"Learn More"})))},T=i().memo(P);var C=r("fi7b"),w=r("4oEz"),I=r("DK28"),M=r("yIQG"),E=r("6eVz"),N=r("vVzz"),Z=r("onJf"),A=r("Gbz3"),O=i().createElement;const R=({icon:e,name:t,desc:r,onClick:a})=>O("div",{className:"action-item",onClick:a},e,O("div",{className:"action-content"},O(m.Z,{variant:"subtitle1",color:"t.primary"},t),O(m.Z,{variant:"body2",color:"t.third"},r))),V=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{t:i,getI18n:n}=J(),{isLoggedIn:o}=(0,Z.f0)(),{isExistFutureAccount:l}=(0,Z.Pc)(),{shortName:c}=(0,A.oO)(),{0:u,1:p}=(0,a.useState)(),f=(0,a.useCallback)((e=>{r(),(0,E.F)(!0,{type:e,afterClose:t})}),[]),g=(0,a.useCallback)((()=>{r(),(0,d.O)({afterClose:t})}),[]);return(0,a.useEffect)((()=>{e&&o&&l&&(0,N.o)().then((({data:e})=>{p(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[o,l,e]),O("div",{className:"bottom-panel"},O(R,{icon:O(w.Z,null),name:O(C.c,{t:i,i18nKey:"helpCenter-TradingRules",defaults:"<colorWrap>{{symbolName}}</colorWrap> Trading Rules",values:{symbolName:c},components:{colorWrap:O(m.Z,{as:"span",color:"t.yellow"})}}),desc:n("LearnMoreTradingRules",{defaultValue:"Learn more about trading rules of each symbol"}),onClick:g}),O(R,{icon:O(I.Z,null),name:n("TutorialVideo",{defaultValue:"Tutorial Video"}),desc:n("3MinsVideoTutorial",{defaultValue:"3 mins video tutorial on Futures trade"}),onClick:()=>f(s.g3)}),!1===u?O(R,{icon:O(M.Z,null),name:n("Quiz",{defaultValue:"Quiz"}),desc:n("CompleteMandatoryQuiz",{defaultValue:"Complete the mandatory Quiz to start Trading"}),onClick:()=>f(s.Nz)}):null)},L=i().memo(V);var F=r("NrrF"),D=r("Lbl8"),_=i().createElement;const z=({openHelpCenter:e,closeHelpCenter:t})=>{const{getI18n:r}=J(),i=(0,a.useCallback)((()=>{t(),(0,D.m)({title:r("HowCompleteTrade",{defaultValue:"How to complete a trade?"}),showFooter:!1,afterClose:e})}),[]);return _(S,{title:_(n.Z,null,_(F.Z,null),_(m.Z,{variant:"subtitle1",className:"panel-name"},r("TourAround",{defaultValue:"Tour Around"})))},_(y.Z,{variant:"secondaryLink",className:"common-link",onClick:i},r("HowCompleteTrade",{defaultValue:"How to complete a trade?"})))},B=i().memo(z),K={pt:20,pl:"xs",pr:["sm","xs"],cursor:"pointer",bg:"moduleBg",flex:"0 0 auto","&  path":{fill:"t.primary"},"&:hover path":{fill:"t.yellow"}},q={minWidth:["100%",640,720],maxWidth:["100%",640,720],"& > div:first-of-type":{pt:18,svg:{fontSize:20,"&:hover":{color:"t.primary"}}}},W={height:"100%",p:0,"& .main-container":{height:["100%",580],display:"flex",flexDirection:"column"},"& .modal-title":{height:28,px:24,my:18,color:"t.primary"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{flex:1,overflow:"auto",mt:"ls",px:24,"&::-webkit-scrollbar":{width:"5px",height:"5px"},"&::-webkit-scrollbar-thumb":{bg:"icons.close"},"& .toggle-panel":{pb:"ls",mb:"ls",borderBottom:"1px solid",borderColor:"line","& .toggle-title":{display:"flex",justifyContent:"space-between",alignItems:"center",py:"ls",cursor:"pointer","& .panel-name":{ml:[10,18],color:"t.primary"},"& .arrow":{transform:"matrix(1, 0, 0, -1, 0, 0)",transition:"transform 0.3s ease-out","& > path":{fill:"t.third"}},"&:hover .arrow path":{fill:"t.primary"}},".toggle-content":{maxHeight:0,opacity:0,transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",overflow:"hidden",ml:[37,45],"& .common-link":{mb:"xs",display:"block",fontSize:1,color:"t.secondary",textDecoration:"underline",cursor:"pointer","&:first-of-type":{mt:"minor"}},"& .more-link":{color:"t.yellow",mb:"ls",fontSize:1}},"&.expand":{"& .toggle-title":{"& > svg":{transform:"matrix(-1, 0, 0, 1, 0, 0)"}},"& .toggle-content":{maxHeight:500,opacity:1}}},"& .bottom-panel":{display:"flex",flexDirection:["column","row"],justifyContent:["unset","space-between"],flexWrap:"wrap",pt:["ls",0],"& .action-item":{display:"flex",width:["100%",293,325],py:[0,"ls"],pl:"3px",pr:[0,"md"],mb:[30,0],cursor:"pointer",boxSizing:"border-box","& svg":{minWidth:"24px"}},"& .action-content":{ml:[10,18]}}}};var H=i().createElement;const U=({visible:e,openHelpCenter:t,closeHelpCenter:r})=>{const{getI18n:i}=J(),{0:n,1:o}=(0,a.useState)({codes:[],data:{}}),{codes:s,data:l}=n,c=(0,a.useCallback)((async()=>{let e=[],t=[];try{const r=await(async()=>{const{data:e}=await(0,f.a)("a-guide-to-Binance-Futures"),{data:t}=e||{},r=new Set,a=t?JSON.parse(t):{};if(a.hash){const e=a.hash;Object.keys(e).filter((t=>"PlaylistFAQArticleList"===e[t].id)).forEach((t=>{var a,i,n,o;Object.keys(null!==(a=null===(i=e[t])||void 0===i||null===(n=i.config)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.articles)&&void 0!==a?a:{}).forEach((a=>{var i,n,o;r.add(null===(i=e[t])||void 0===i||null===(n=i.config)||void 0===n||null===(o=n.config)||void 0===o?void 0:o.articles[a].id)}))}))}return r})();e=Array.from(r).slice(0,3),t=await(async e=>{const{data:t}=await(0,f.t)(e);return Array.isArray(null===t||void 0===t?void 0:t.items)?null===t||void 0===t?void 0:t.items:[]})(e)}catch(r){throw new Error(r)}o({codes:e,data:(0,g.FB)(t,"code")})}),[]);return(0,a.useEffect)((()=>{e&&!s.length&&c()}),[e,s,c]),H(p.Z,{open:e,onCloseIconClick:r,sx:q,contentSx:W},H("div",{className:"main-container"},H(m.Z,{variant:"headline6",className:"modal-title"},i("title",{defaultValue:"Futures Help Center"})),H("div",{className:"content-wrapper"},H("div",{className:"overflow-container"},H(T,{codes:s,data:l}),H(B,{openHelpCenter:t,closeHelpCenter:r}),H(L,{visible:e,openHelpCenter:t,closeHelpCenter:r})))))},j=i().memo(U);var $=i().createElement;const G=()=>{l.Y.emit(s.xm,{visible:!0})},J=()=>(0,c.Z)("helpCenter","futures-ui"),Y=()=>{const{0:e,1:t}=(0,a.useState)(!1),r=(0,a.useCallback)((()=>{t(!1)}),[]);return(0,a.useEffect)((()=>l.Y.on(s.xm,(({visible:e})=>{t(e)}))),[]),$(u.Z,null,$(n.Z,{__css:K},$(o.Z,{onClick:G})),$(j,{visible:e,openHelpCenter:G,closeHelpCenter:r}),!1)},Q=i().memo(Y)},pww2:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("d5gM"),s=r("snMe"),l=r("T9gt"),c=n().createElement;o.Z.use(s.Db);const u={fallbackLng:"en",debug:!1,saveMissing:!1,react:{useSuspense:!1},partialBundledLanguages:!0},d=({i18n:e={},lng:t="en",ns:r,children:n})=>{const{0:s,1:d}=(0,i.useState)(!1),m=Object.keys(e)||[];return s||(d(!0),o.Z.init((0,a.Z)((0,a.Z)({},u),{},{lng:t,ns:m,defaultNS:r,fallbackLng:t,resources:{[t]:e},backend:{}}))),(0,i.useEffect)((()=>{m.length>0&&m.forEach((r=>o.Z.addResourceBundle(t,r,e[r],!0,!0))),o.Z.changeLanguage(t)}),[m,e,t]),c(l.a,{i18n:o.Z},n)}},UIpo:(e,t,r)=>{"use strict";r.d(t,{Jy:()=>g,hM:()=>y,Zb:()=>h,oZ:()=>v});var a=r("GpFh"),i=r("JwA9"),n=r("e5RN"),o=r("XhNN"),s=r("yITN"),l=r("+4u2"),c=r("/SIk"),u=r.n(c),d=r("Vg22"),m=r("eXOl"),p=r("Dvpw"),f=u().createElement;const g=40,y=e=>{let{onRemove:t,renderExtra:r}=e,i=(0,a.Z)(e,["onRemove","renderExtra"]);return f(h,Object.assign({},i,{onRemove:t,renderExtra:()=>f(u().Fragment,null,r&&r(),t&&f(p.Z,{onRemove:t,size:20,sx:{flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"},ml:3}}))}))},h=e=>{let{children:t,title:r,area:s,renderExtra:l,onRemove:c,titleShrink:u=0,autoHeight:d}=e,m=(0,a.Z)(e,["children","title","area","renderExtra","onRemove","titleShrink","autoHeight"]);return f(i.Z,Object.assign({__css:{position:"relative",gridArea:s,zIndex:"auto",width:"100%",bg:"moduleBg",height:d?"auto":"100%"}},m),r&&f(n.Z,{sx:{position:"relative",zIndex:1,height:g,px:"sm",fontSize:1,color:"t.primary",justifyContent:"space-between",alignItems:"center",bg:"moduleBg",flexShrink:0,flexGrow:0,userSelect:c?"auto":"none"},className:c?"draggableHandle":void 0},f(n.Z,{sx:{fontSize:"14px",flexShrink:u,fontWeight:500}},r),l&&l()),f(o.Z,{sx:d?{overflowY:"auto",overflowX:"hidden"}:{position:"absolute",top:0,left:0,right:0,bottom:0,paddingTop:r?g:0,overflowY:"auto",overflowX:"hidden"}},t))},b={closeD:{cursor:"pointer",flexShrink:0,position:"absolute",right:"16px",top:"10px",color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}},tabsContainer:{height:"100%",display:"flex",flexDirection:"column"},tabs:{flexShrink:0,flexGrow:0,height:40,width:["100%","100%","calc(100% - 220px)"],fontSize:"16px",lineHeight:"16px",position:"relative",bg:"transparent","div.active":{color:"t.yellow",borderBottom:"none"},"div:hover":{color:"t.yellow"}}},v=u().forwardRef(((e,t)=>{let{panes:r,extra:n,area:g,onRemove:y}=e,h=(0,a.Z)(e,["panes","extra","area","onRemove"]);const v=(0,d.useDispatch)(),{activeTab:x}=(0,m.jV)();return f(i.Z,Object.assign({__css:(0,c.useMemo)((()=>({width:"100%",height:"100%",gridArea:g,px:"sm",bg:"moduleBg",zIndex:"auto",position:"relative"})),[g])},h,{ref:t,name:"position"}),y&&f(p.Z,{size:20,onRemove:y,sx:b.closeD}),n,f(s.Z,{lazy:!0,variant:"trade-next",sx:b.tabsContainer,tabsSx:b.tabs,tabsClassName:y?"draggableHandle":"",tabClassName:"draggableCancel",defaultActiveKey:"0",onChange:e=>v.userTab.updateState({activeTab:e})},r.map((([e,t],r)=>f(l.Z,{key:r,sx:{flex:1,height:"calc(100% - 40px)"},tab:e,tabKey:String(r)},f(o.Z,{className:"draggableCancel",width:"100%",height:"100%"},u().cloneElement(t,{active:Number(x)===r})))))))}))},GR32:(e,t,r)=>{"use strict";r.d(t,{i:()=>m});var a=r("/SIk"),i=r.n(a),n=r("fAnk"),o=r("JwA9"),s=r("pVAJ"),l=r("6Afj"),c=i().createElement;const u=(0,l.SA)((()=>Promise.all([r.e(374),r.e(712)]).then(r.bind(r,"KRmi")))),d=(0,l.SA)((()=>Promise.all([r.e(374),r.e(712)]).then(r.bind(r,"siTu")))),m=()=>{const[e,{width:t,height:r}]=(0,n.Z)(),[a]=(0,s.z4)(),i=t>r;return c(o.Z,{sx:{width:"100%",height:"100%",bg:"moduleBg",position:"relative"},name:"depthchart",ref:e},c(i?d:u,{symbol:a}))}},JwA9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("Fee1"),s=i().createElement;const l=i().memo(i().forwardRef(((e,t)=>s(o.Z,{name:e.name},s(n.Z,Object.assign({},e,{ref:t}),e.children)))))},hiQk:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("kO20"),s=r("ux7Q"),l=r("v5rq"),c=r("pVAJ"),u=r("AHTf"),d=r("nnRT"),m=r.n(d),p=n().createElement;const f=(0,o.WidthProvider)(o.Responsive),g=({RenderWGLGrid:e})=>{const{layouts:t,setLayout:r,setLayouts:n,breakpoint:o,setBreakpoint:d,layout:g}=(0,i.useContext)(s.VY),y=(0,i.useCallback)((e=>{e!==o&&d(e)}),[d,o]),[h,b]=(0,l.xG)((e=>[e.disableMouse,e.setDisableMouse])),v=(0,c.gm)(),x=(e,t)=>e&&"chart"===t?"disable-mouse":"",S=(0,i.useCallback)(((e,t,r)=>{b(!1),"orderForm"===r.i&&(r.w<t.w&&(r.w=r.minW),r.w>t.w&&(r.w=r.maxW))}),[b]),k=(0,i.useMemo)((()=>g.map((t=>p("div",{className:x(h,t.i),key:t.i,suppressHydrationWarning:!0},p(e,{el:t,layout:g,setLayout:r}))))),[g,r,h]);return!t||u.sk?null:p(f,{className:"layout",cols:s.e_,layouts:t,useCSSTransforms:"rtl"!==v,onBreakpointChange:y,rowHeight:10,margin:[1,1],autoSize:!0,draggableCancel:".draggableCancel",draggableHandle:".draggableHandle",containerPadding:[0,0],onLayoutChange:(e,r)=>{if(m()(e,g)&&m()(r,t))return;const i=Object.keys(t).find((e=>!m()(t[e],r[e])));if(i&&i!==o){const e=t[i].map((e=>e.i)),o=r[i].map((e=>e.i));if(!m()(e,o))return n((0,a.Z)((0,a.Z)({},r),{},{[i]:[...t[i],{i:"forceUpdate",x:0,y:0,h:0,w:0}]}))}return n(r)},onResizeStart:()=>{b(!0)},onResizeStop:S,breakpoints:s.j$},k)},y=(0,i.memo)(g)},DQ97:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var a=r("5vwO"),i=r("kO20"),n=r("ux7Q"),o=r("7OE6"),s=r("6C5I"),l=r("/SIk"),c=r.n(l),u=r("Vg22"),d=r("Uqe+"),m=r("AHTf"),p=r("/MJE"),f=r("Gbz3"),g=c().createElement;const y=(0,o.x)(),{constants:h,onAppEvent:b}=p.Z,v=({FullScreenLayout:e,Layout:t})=>{const r=(0,f.G3)(),o=(0,u.useSelector)(s.Xj),c=(0,u.useSelector)((e=>e.setting.USDTFutures.layoutDetail)),p=(0,u.useSelector)((e=>e.setting.CoinFutures.layoutDetail)),v=r?p:c,x=i.Responsive.utils.getBreakpointFromWidth(n.j$,y),{0:S,1:k}=(0,l.useState)(x),[P,T]=(0,d.Z)(r?m.h1:m.v6,n.gH),C=(0,l.useRef)(n.EY),w=(0,l.useMemo)((()=>Object.keys(P).reduce(((e,t)=>{let r=Object.keys(v).map((e=>v[e]&&(P[t].find((t=>t.i===e))||C.current[t].find((t=>t.i===e))))).filter(Boolean);return t===S&&(v.market?r.market=(0,n.C1)(r,t):r=(0,n.I5)(r,t),v.verticalDepth?r.verticalDepth=(0,n.oq)(r,t):r=(0,n.ys)(r)),e[t]=r,e}),(0,a.Z)({},C.current))),[v,P,S]),[I,M]=(0,d.Z)(m.VM,n.t3),E=((0,l.useMemo)((()=>P[S].filter((e=>"forceUpdate"!==e.i))),[P,S]),w[S]),N=(0,l.useCallback)((e=>{T((0,a.Z)((0,a.Z)({},P),{},{[S]:e}))}),[T,P,S]);return(0,l.useEffect)((()=>{const e=b(h.APPEVENT_RESET_FUTURES_USDT_LAYOUT,(e=>{T(n.gH)}));return()=>{null===e||void 0===e||e()}}),[]),(0,l.useEffect)((()=>{I!==n.t3&&(M(n.t3),T(n.gH))}),[I]),o?e:g(n.VY.Provider,{value:{layouts:w,setLayouts:T,layout:E,setLayout:N,breakpoint:S,setBreakpoint:k}},t)},x=(0,l.memo)(v)},RfYP:(e,t,r)=>{"use strict";r.d(t,{KP:()=>c,rr:()=>d,S9:()=>p,Tc:()=>g});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=r("pVAJ"),s=i().createElement;const l={color:"t.third",height:"100%",alignItems:"center",fontFamily:"BinancePlex",fontWeight:"medium",pr:"16px",fontSize:"14px"},c=i().memo((({i18nKey:e,defaultValue:t,active:r,suffix:a,testId:i})=>{const{getI18n:c}=(0,o.ZK)();return s(n.Z,{className:""+(r?"active":""),sx:l,active:r,"data-testid":i},c(e,{defaultValue:t}),a)})),u=i().memo((({active:e,i18nKey:t="trd-layout-tabOpenOrder"})=>{const{preOrders:r}=(0,o.E)();return s(c,{i18nKey:t,defaultValue:"Open Orders",active:e,suffix:`(${r.length})`,testId:"OpenOrder"})})),d=e=>s(u,{active:e}),m=i().memo((({active:e,i18nKey:t="trd-layout-tabOrderHistory"})=>s(c,{i18nKey:t,defaultValue:"Order History",active:e,testId:"OrderHistory"}))),p=e=>s(m,{active:e}),f=i().memo((({active:e,i18nKey:t="trd-layout-tabTradeHistory"})=>s(c,{i18nKey:t,defaultValue:"Trade History",active:e,testId:"TradeHistory"}))),g=e=>s(f,{active:e})},"/Kmz":(e,t,r)=>{"use strict";r.d(t,{O:()=>a});const a={bg:"overallBg",display:"grid",width:"100vw",height:"100vh",minHeight:"680px"}},ux7Q:(e,t,r)=>{"use strict";r.d(t,{j$:()=>x,e_:()=>S,EY:()=>C,gH:()=>T,ZJ:()=>P,mZ:()=>I,t3:()=>v,VY:()=>M,HC:()=>A,y3:()=>N,oq:()=>V,C1:()=>O,ys:()=>Z,I5:()=>R,tv:()=>E});var a=r("5vwO"),i=r("/SIk");const n=[{i:"favorite",x:0,y:0,w:18,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:18,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:43},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:63,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:63,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:64,w:21,h:13,hidden:!0},{i:"market",x:0,y:11,w:3,h:52,minW:3,hidden:!0}],o=[{i:"subHeader",x:0,y:0,isResizable:!1,w:18,h:7},{i:"chart",x:0,y:7,w:18,h:52},{i:"orderbook",x:18,y:0,w:3,h:39},{i:"trades",x:18,y:43,w:3,h:20},{i:"userinfo",x:0,y:59,w:21,h:50},{i:"orderForm",x:21,y:0,w:3,h:59,minW:3,maxW:6},{i:"marginRatio",x:21,y:63,w:3,h:17},{i:"assetsCard",x:21,y:80,w:3,h:33},{i:"verticalDepth",x:0,y:60,w:21,h:13,hidden:!0},{i:"market",x:0,y:7,w:3,h:52,minW:3,hidden:!0}],s=[{i:"favorite",x:0,y:0,w:16,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:16,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:43},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:63,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:64,w:20,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],l=[{i:"subHeader",x:0,y:0,isResizable:!1,w:16,h:7},{i:"chart",x:0,y:7,w:16,h:52},{i:"orderbook",x:16,y:0,w:4,h:39},{i:"trades",x:16,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:20,h:50},{i:"orderForm",x:20,y:0,w:4,h:59,minW:4,maxW:8},{i:"marginRatio",x:20,y:63,w:4,h:17},{i:"assetsCard",x:20,y:80,w:4,h:33},{i:"verticalDepth",x:0,y:60,w:20,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],c=[{i:"favorite",x:0,y:0,w:15,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:15,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:43},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],u=[{i:"subHeader",x:0,y:0,isResizable:!1,w:15,h:7},{i:"chart",x:0,y:7,w:15,h:52},{i:"orderbook",x:15,y:0,w:4,h:39},{i:"trades",x:15,y:43,w:4,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],d=[{i:"favorite",x:0,y:0,w:14,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:14,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:43},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:63,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:63,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:64,w:19,h:13,hidden:!0},{i:"market",x:0,y:11,w:4,h:52,minW:4,hidden:!0}],m=[{i:"subHeader",x:0,y:0,isResizable:!1,w:14,h:7},{i:"chart",x:0,y:7,w:14,h:52,minW:6,minH:6},{i:"orderbook",x:14,y:0,w:5,h:39},{i:"trades",x:14,y:43,w:5,h:20},{i:"userinfo",x:0,y:59,w:19,h:50},{i:"orderForm",x:19,y:0,w:5,h:59,minW:5,maxW:10},{i:"marginRatio",x:19,y:63,w:5,h:17},{i:"assetsCard",x:19,y:80,w:5,h:33},{i:"verticalDepth",x:0,y:60,w:19,h:13,hidden:!0},{i:"market",x:0,y:7,w:4,h:52,minW:4,hidden:!0}],p=[{i:"favorite",x:0,y:0,w:24,h:4,minH:4,maxH:4},{i:"subHeader",x:0,y:4,w:24,h:7,minH:7,maxH:7},{i:"chart",x:0,y:11,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:66,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:66,w:18,h:13,hidden:!0},{i:"market",x:0,y:11,w:5,h:52,minW:5,hidden:!0}],f=[{i:"subHeader",x:0,y:0,isResizable:!1,w:24,h:7},{i:"chart",x:0,y:7,w:13,h:55},{i:"orderbook",x:13,y:11,w:5,h:32},{i:"trades",x:13,y:44,w:5,h:23},{i:"userinfo",x:0,y:64,w:18,h:37},{i:"orderForm",x:18,y:11,w:6,h:55,minW:6,maxW:12},{i:"marginRatio",x:18,y:66,w:6,h:17},{i:"assetsCard",x:18,y:83,w:6,h:20},{i:"verticalDepth",x:0,y:62,w:18,h:13,hidden:!0},{i:"market",x:0,y:7,w:5,h:52,minW:5,hidden:!0}],g={i:"chart",getTitle:e=>e("trd-layout-chartTle")},y={i:"orderbook",getTitle:e=>e("trd-layout-orderBookTle")},h={i:"trades",getTitle:e=>e("trd-layout-tradesTle")},b={i:"userinfo",getTitle:e=>`${e("trd-layout-tabPosition")} & ${e("trd-layout-tabOpenOrder")} `},v=4,x={xl:2e3,lg:1500,md:1439,sm:1200,xs:1023},S={xl:24,lg:24,md:24,sm:24,xs:24},k={xl:n,lg:s,md:c,sm:d,xs:p},P={xl:n.filter((e=>!e.hidden)),lg:s.filter((e=>!e.hidden)),md:c.filter((e=>!e.hidden)),sm:d.filter((e=>!e.hidden)),xs:p.filter((e=>!e.hidden))},T={xl:o.filter((e=>!e.hidden)),lg:l.filter((e=>!e.hidden)),md:u.filter((e=>!e.hidden)),sm:m.filter((e=>!e.hidden)),xs:f.filter((e=>!e.hidden))},C={xl:o,lg:l,md:u,sm:m,xs:f},w={xl:JSON.parse(JSON.stringify(o)),lg:JSON.parse(JSON.stringify(l)),md:JSON.parse(JSON.stringify(u)),sm:JSON.parse(JSON.stringify(m)),xs:JSON.parse(JSON.stringify(f))},I=[{i:"favorite",getTitle:e=>e("trd-layout-favouriteTle")},{i:"market",x:0,y:0,w:4,h:27,minW:4,minH:6,getTitle:e=>e("trd-layout-MarketTle"),setting:!1},g,{i:"verticalDepth",x:11,y:27,w:16,h:9,minW:2,minH:2,getTitle:e=>e("trd-chart-Depth")},y,h,b,{i:"orderForm",getTitle:(e,t)=>t("placeOrder",{defaultValue:"Place Order"})},{i:"marginRatio",getTitle:(e,t)=>t("tradeHistory-positions-marginRatioLabel")},{i:"assetsCard",getTitle:(e,t)=>t("assets")}],M=(0,i.createContext)({layout:P.lg,layouts:P,breakpoint:"lg",setBreakpoint:()=>{},setLayout:()=>{},setLayouts:()=>{},showFavourite:!0,setFavourite:()=>{},dragged:!1,setDragged:()=>{}}),E=(e,t="lg")=>{const r=k[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=k[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},N=(e,t)=>{const r=k[t].find((e=>"market"===e.i)),a=k[t].find((e=>"chart"===e.i)),i=e.find((e=>"chart"===e.i));return i&&a&&r&&i.x===a.x&&i.y===a.y&&(i.x+=r.w,i.w-=r.w),[...e,r]},Z=e=>e.filter((e=>"verticalDepth"!==e.i)),A=(e,t)=>{const r=e.find((e=>"userinfo"===e.i)),a=k[t].find((e=>"verticalDepth"===e.i)),i=k[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),[a,...e]},O=(e,t="lg")=>{const r=w[t].find((e=>"market"===e.i)),i=w[t].find((e=>"chart"===e.i)),n=e.find((e=>"chart"===e.i));return n&&i&&r&&n.x===i.x&&n.y===i.y&&(n.x+=r.w,n.w-=r.w),(0,a.Z)({},r)},R=(e,t="lg")=>{const r=w[t].find((e=>"market"===e.i)),a=e.find((e=>"chart"===e.i)),i=w[t].find((e=>"chart"===e.i));return a&&i&&r&&a.x===i.x+r.w&&a.y===i.y&&a.w===i.w-r.w&&(a.x=i.x,a.w=i.w),e.filter((e=>"market"!==e.i))},V=(e,t="lg")=>{const r=e.find((e=>"userinfo"===e.i)),a=w[t].find((e=>"verticalDepth"===e.i)),i=w[t].find((e=>"userinfo"===e.i));return r&&i&&a&&r.y===i.y&&(r.y+=a.h),a}},"z+x3":(e,t,r)=>{"use strict";r.d(t,{ZK:()=>i,FA:()=>n,c9:()=>o,is:()=>s});var a=r("pVAJ");const i=e=>(0,a.ZK)("trd-layout",e),n=405,o="screen",s="screen and (max-width: 767px)"},vt3k:(e,t,r)=>{"use strict";r.d(t,{dh:()=>y,TE:()=>l,Yr:()=>d});var a=r("/SIk"),i=r.n(a),n=(r("W33l"),r("U0yl"),r("/MJE")),o=(r("AHTf"),i().createElement);const s=({children:e})=>o(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),n.Z.login()},href:"#"})),l=e=>o(s,e);var c=i().createElement;const u=({children:e})=>c(i().Fragment,null,i().cloneElement(e,{onClick:e=>{e&&e.preventDefault(),n.Z.register()},href:"#"})),d=e=>c(u,e);var m=r("GpFh"),p=r("OV9X"),f=r("869M"),g=i().createElement;const y=e=>{let{link:t}=e,r=(0,m.Z)(e,["link"]);const{getI18n:a}=(0,f.yk)();return g(p.Z,Object.assign({as:"a",variant:"addressLink",href:t,target:"_blank",color:"t.yellow",fontSize:12},r),a("learnMore",{defaultValue:"Learn More"}))}},DCFU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r("GDnE"),i=r("/SIk"),n=r.n(i),o=r("e5RN"),s=r("OV9X"),l=r("5vwO");const c={offset:0,x:!0},u=e=>"function"===typeof e,d=e=>e&&"object"===typeof e&&!(0,i.isValidElement)(e),m=(e,t)=>{const r=d(e),a=d(t);if(r&&r===a){const r=Object.keys(e),a=Object.keys(t);if(r.length===a.length)return Number(r.every((r=>m(e[r],t[r]))))}else if(u(e)&&u(t)||(0,i.isValidElement)(e)&&(0,i.isValidElement)(t))return!0;return Number(e===t)};function p(e,t=0,r=!0){const{top:a,right:i,bottom:n,left:o,width:s,height:l}=e.getBoundingClientRect(),{clientWidth:c,clientHeight:u}=document.documentElement;return(s>0||l>0)&&n>=-t&&a<u+t&&(!r||i>=-t&&o<c+t)}class f extends i.PureComponent{constructor(e){super(e),(0,a.Z)(this,"rootRef",(0,i.createRef)(null)),(0,a.Z)(this,"checkUpdate",(()=>{const{current:e}=this.rootRef;return e&&!this.unmount})),(0,a.Z)(this,"checkViewport",(e=>{const{index:t}=this,{current:r}=this.rootRef,{check:a,noLazy:i}=this.props;if(this.checkUpdate()){const{offset:n,x:o}=(0,l.Z)((0,l.Z)({},c),a);i||p(r,n,o)?(delete f.instances[t],this.inViewPort(e)):f.instances[t]=this}})),(0,a.Z)(this,"inViewPort",(()=>{})),(0,a.Z)(this,"equalUpdate",((e,t)=>{m(e,t)||this.checkViewport()})),this.index=f.count,f.count+=1}componentDidUpdate(e){const t=(0,l.Z)((0,l.Z)({},this.props),{},{check:null}),r=(0,l.Z)((0,l.Z)({},e),{},{check:null});this.equalUpdate(r,t)}componentDidMount(){this.checkViewport()}componentWillUnmount(){delete f.instances[this.index],this.unmount=!0}}(0,a.Z)(f,"instances",{}),(0,a.Z)(f,"count",0),(0,a.Z)(f,"reactEquals",m),(0,a.Z)(f,"isInViewport",p),(0,a.Z)(f,"checkViewport",(()=>{const{instances:e}=f;Object.keys(e).forEach((t=>{const r=e[t];r&&r.checkViewport()}))}));{const e=function(e,t){let r=null;return function(){r||(r=setTimeout((()=>{e.apply(this,[].slice.call(arguments,0)),r=null}),t))}}(f.checkViewport,100);document.addEventListener("scroll",e,!0),document.addEventListener("transitionend",e,!0)}const g=f;var y=n().createElement;const h=class extends g{constructor(...e){super(...e),(0,a.Z)(this,"state",{loading:!1}),(0,a.Z)(this,"checkUpdate",(()=>{const{loading:e}=this.state,{current:t}=this.rootRef;return t&&!e&&!this.unmount})),(0,a.Z)(this,"inViewPort",(()=>{const{showMore:e}=this.props;this.setState({loading:!0},(()=>{new Promise((t=>{e().then((()=>t(!1))).catch((e=>("undefined"!==typeof Sentry&&Sentry.captureException(e),t(!0))))})).then((()=>{g.instances[this.index]=this})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}))}))}componentWillReceiveProps({loading:e,error:t}){this.state.loading!==e&&setTimeout((()=>{this.setState({loading:e,error:t})}),2e3)}render(){const{rootRef:e,props:t}=this;return y(o.Z,{sx:{width:"100%",minHeight:"2px",justifyContent:"center",alignItems:"center",color:"t.secondary"},ref:e},t.error?y(s.Z,{onClick:this.inViewPort},"\u52a0\u8f7d\u5931\u8d25\uff0c\u70b9\u51fb\u91cd\u8bd5"):null)}}},zZ5f:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("7nmT"),s=r("6i0u"),l=n().createElement;const c={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},u=({show:e=!0,fullScreen:t=!1,inner:r=!1,children:i=null,zIndex:o="100"})=>{if(!e)return i||null;const u=l(s.Z,{sx:(0,a.Z)({zIndex:o||"100"},c)});return l(n().Fragment,null,i,t?l("div",{style:{position:r?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},u):u)};let d;u.show=({fullScreen:e=!1}={})=>{d||(d=document.createElement("div"),document.body.appendChild(d)),o.render(l(u,{fullScreen:e}),d)},u.hide=()=>{d&&o.render(l(u,{show:!1}),d)};const m=u},PMF4:(e,t,r)=>{"use strict";r.d(t,{u:()=>p});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=r("XhNN"),s=r("X46w"),l=r("OdNO"),c=r("vt3k"),u=r("pVAJ"),d=r("z+x3"),m=i().createElement;const p=({children:e,active:t=!1,height:r})=>{const{getI18n:a}=(0,d.ZK)(),{isLoggedIn:p,isLoading:f}=(0,u.f0)();return f||!l.C?null:p?i().cloneElement(e,{active:t}):m(n.Z,{sx:{justifyContent:"center",height:r||"100%",alignItems:"flex-end",color:"t.primary"}},m(o.Z,{sx:{height:"100%",fontSize:1,display:"flex",alignItems:"center"}},m(c.TE,null,m(s.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabLogIn",{defaultValue:"Log In"}))),"\xa0",a("tabOr",{defaultValue:"or"}),"\xa0",m(c.Yr,null,m(s.Z,{as:"a",variant:"text",sz:"tiny",px:"2px",py:"4px",fontSize:1},a("tabRegister",{defaultValue:"Register now"}))),"\xa0",a("tabStart",{defaultValue:"to start trading."})))}},vvaW:(e,t,r)=>{"use strict";r.d(t,{d:()=>u});var a=r("/SIk"),i=r.n(a),n=r("wjiZ"),o=r("x8gL"),s=r("869M"),l=i().createElement;const c={display:"inline-flex",alignItems:"center",textDecoration:"none",ml:"8px"},u=({href:e,text:t,target:r})=>{const{getI18n:a}=(0,s.yk)(),i=t||a("learnMore",{defaultValue:"Learn More"});return l(n.Z,{variant:"standardLink",sx:c,href:e,target:r},i,l(o.Z,{size:12,ml:"2px",color:"t.yellow"}))}},LxGj:(e,t,r)=>{"use strict";r.d(t,{a:()=>E});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("+bsz"),s=r("l4n0"),l=r("tsUn"),c=r("XXmh"),u=r("OV9X"),d=r("vJ4P"),m=r("869M"),p=r("eXOl"),f=r("AHTf"),g=r("vvaW"),y=i().createElement;var h=r("5vwO"),b=r("iV55"),v=r("7H20"),x=r("ir67"),S=r("LcTY"),k=r("FOuV"),P=i().createElement;const T=(0,f.l6)(!0);var C=r("R/7i"),w=i().createElement;var I=i().createElement;const M={marginTop:"1px",height:"40px"},E=()=>{const e=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{search:r}=(0,s.Hb)(),i=(0,p.j2)(),{symbol:n,settlePlan:o}=i,{0:h,1:b}=(0,a.useState)(!1),{fullName:v}=(0,l.H)(i,e),x=(0,a.useCallback)((()=>{b(!1)}),[]),{eventType:S,contractStatus:k,symbol:P}=(0,d.g)();return(0,a.useEffect)((()=>{if("contractInfo"!==S||P!==n||"CLOSE"!==k)return b(o>0),x;window.location.href=`${f.$g}/${t}/futures/BTC_USDT${r}`}),[k,P,S,x,t,r,o,n]),{content:h?y("div",null,y(u.Z,{color:"t.primary",as:"span"},e("settle-warning",{symbol:v,date:`${(0,c.v)(new Date(o),"yyyy-MM-dd hh:mm")}`})),y(g.d,{href:(0,f.b$)(t),target:"_blank"})):null,onClose:x}})(),t=(()=>{const{getI18n:e,i18n:{language:t}}=(0,m.yk)(),{isLoggedIn:r}=(0,x.f0)(),{isExistFutureAccount:i}=(0,x.Pc)(),[n]=(0,v.z)(),o=(0,p.j2)(),{0:s,1:c}=(0,a.useState)({[n]:!1}),{fullName:d}=(0,l.H)(o,e),f=(0,a.useCallback)((()=>{c((e=>(0,h.Z)((0,h.Z)({},e),{},{[n]:!1})))}),[n]);return(0,a.useEffect)((function(){if(i&&r)return async function(){const{data:e}=await(0,b.q)({});c((t=>e.reduce(((e,t)=>(e[t.symbol]=!0,e)),(0,h.Z)({},t))))}(),T.getStrategyStream().subscribe((({streategy:t={}})=>{const{code:r,symbol:a,strategyStatus:i,strategyType:n}=t;"GRID"===n&&(8003===r&&S.T.emit(S.F.NOTIFICATION,e("grid-canceled",{defaultValue:"Manually placing or cancelling an order of {{symbol}} has stopped the grid.",symbol:a}),{variant:"warning"}),c((e=>(0,h.Z)((0,h.Z)({},e),{},{[a]:"NEW"===i||"WORKING"===i}))))}))}),[i,r]),{content:s[n]?P("div",null,P(u.Z,{color:"t.primary",as:"span"},e("grid-warning",{defaultValue:"{{symbol}} is in Grid Trading. Manual trading, canceling orders or closing positions, of the symbol terminates Grid Strategy.",symbol:d})),P(g.d,{href:(0,k.CN)(k.x.GRID_LEARN_URL,{locale:t,symbol:n,activeTab:"workingGrid"})})):null,onClose:f}})(),r=(()=>{const{t:e,getI18n:t,i18n:{language:r}}=(0,m.yk)(),{isLoggedIn:i}=(0,x.f0)(),{isExistFutureAccount:n}=(0,x.Pc)(),[o]=(0,v.z)(),s=(0,p.j2)(),{0:c,1:u}=(0,a.useState)(0),{0:d,1:f}=(0,a.useState)({[o]:0}),{fullName:y}=(0,l.H)(s,t),b=d[o],S=(0,a.useCallback)((()=>{f((e=>(0,h.Z)((0,h.Z)({},e),{},{[o]:0})))}),[o]);return(0,a.useEffect)((function(){n&&i&&async function(){const{data:e}=await(0,C.OM)();u(e.length),f((t=>e.reduce(((e,t)=>(e[t.symbol]=e[t.symbol]?e[t.symbol]+1:1,e)),(0,h.Z)({},t))))}()}),[n,i]),{content:b>0?w("div",null,e("twap-warning",{defaultValue:"{{symbol}} is running TWAP Strategy. Manual trading, canceling orders or closing positions, of the symbol will not affect the total size of the strategy will execute.",symbol:y}),w(g.d,{href:(0,k.CN)(k.x.TWAP_LEARN_URL,{locale:r,symbol:o}),text:`${e("total-twap-orders",{defaultValue:"Total TWAP Orders"})} (${c})`})):null,onClose:S}})(),i=(0,a.useMemo)((()=>[e,t,r].filter((e=>Boolean(e.content)))),[e,t,r]);return 0===i.length?null:I(n.Z,{sx:M},I(o.v,{messages:i}))}},"96Xb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("+bsz"),s=r("ax76"),l=r("pVAJ"),c=r("f0TQ"),u=r("Gbz3"),d=r("vvaW"),m=i().createElement;const p={marginTop:"1px",height:"40px"},f=({type:e="umfutures"})=>{const{getI18n:t}=(0,u.yk)(),[r]=(0,l.z4)(),i=(0,c.pZ)((e=>e.announmentList)),[f,g]=(0,c.hM)(),y=(0,a.useMemo)((()=>(0,c.L0)(i,f||{},r,e).map((e=>({content:m("div",null,e.title,m(d.d,{href:(null===e||void 0===e?void 0:e.path)||e.url,text:t("view-more"),target:"_blank"})),onClose:()=>(0,c.V$)(e.id,f||{},g)})))),[i,f,r,e,t,g]);return 0===y.length?null:m(n.Z,{sx:p},m(o.v,{messages:y,icon:m(s.Z,null)}))},g=i().memo(f)},u4NA:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var a=r("/SIk"),i=r.n(a),n=r("AHTf"),o=r("jJ88"),s=r("unna"),l=r("Tr4L"),c=r("hpza"),u=r("LCMj"),d=r("rdEq"),m=r("Gbz3"),p=r("pVAJ"),f=i().createElement;const g=i().memo((({markPrice:e})=>{const{formatTk:t}=(0,p.mC)();return f(i().Fragment,null,t(e))})),y=()=>{var e;const[t]=(0,p.z4)(),r=null===(e=(0,m.CE)()[t])||void 0===e?void 0:e.markPrice;return r?f(g,{markPrice:r}):null};var h=i().createElement;const b=i().memo((()=>{const{status:e,colorList:t,connectingDeco:r}=(0,m.l8)(),{getI18n:i}=(0,m.yk)(),n=(0,a.useMemo)((()=>{switch(e){case"disconnected":return i("disconnected",{defaultValue:"Disconnected"});case"slow":return i("unstableConnection",{defaultValue:"Unstable connection"});case"stable":return i("stableConnection",{defaultValue:"Stable Connection"});case"reconnecting":return i("reconnection",{defaultValue:"Connecting"})+{connectingDeco:r};default:return""}}),[e,i,r]);return(0,a.useMemo)((()=>h(d.m,{tip:n},h("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h("rect",{y:"7",width:"2.66667",height:"5",fill:t[0]}),h("rect",{x:"4.44446",y:"4",width:"2.66667",height:"8",fill:t[1]}),h("rect",{x:"8.88892",y:"2",width:"2.66667",height:"10",fill:t[2]}),h("rect",{x:"13.3333",width:"2.66667",height:"12",fill:t[3]})))),[t,n])})),v=({isMore:e=!1})=>{const{t:t,i18n:{language:r}}=(0,l.$)(),a=(0,m.G3)()?(0,n.RU)():(0,n.BN)(),[i,[d,f]]=(0,p.z4)(),{trades:g}=(0,o.y)({symbol:i,stream:(0,n.l6)(!0),limit:2});let v=0;g[0]&&g[1]&&g[0].price!==g[1].price&&(v=Number(g[0].price)-Number(g[1].price)>0?-1:1);const{tickProps:x}=(0,u.k)(a),S=x?x.showPrice:0;let k,P="status-primary";const T=(0,s.C3)()===n.UW;switch(v){case-1:P="status-sell",k=h(c.Z,{className:`arrow-icon ${P}`});break;case 1:P="status-green",k=h(c.Z,{style:{transform:"rotate(180deg)"},className:`arrow-icon ${P}`});break;default:P="status-primary",k=h("div",{style:{width:"16px"}})}return h("div",{className:"orderbook-ticker"},h("div",{className:`contractPrice ${P}`},S,k),h("div",{className:"markPrice"},h(y,null)),h("div",null,e&&h("a",{className:"more",target:"_blank",href:`/${r}/orderbook/${d}_${f}`},t("trd-orderBook-More",{defaultValue:"More"})),T&&h(b,null)))},x=i().memo(v)},a2gA:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});var a=r("/SIk"),i=r.n(a),n=r("OV9X"),o=i().createElement;const s={maxWidth:"104px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},l=({children:e})=>o(n.Z,{sx:s},e)},IBbm:(e,t,r)=>{"use strict";r.d(t,{Q:()=>S});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=r("Bb2c"),l=r("kjyE"),c=r("k2tD"),u=r("OV9X"),d=r("a2gA"),m=n().createElement;const p={display:"inline-block"},f=({text:e,target:t})=>m(u.Z,{as:"label",htmlFor:t,color:"t.third",sx:p},"string"===typeof e?m(d.u,null,e):e),g={marginTop:"10px",borderRadius:"4px",border:"none !important",fontSize:"14px",bg:"transInputBG",".bn-input-prefix":{display:"flex",alignItems:"center","> label":{height:"22px"}},".bn-input-suffix":{display:"flex",alignItems:"center",height:"100%",marginLeft:"4px"},"> .bn-input-status-disabled":{bg:"transparent !important","> input::placeholder":{color:"t.placeholder"}}},y={width:"100%",height:"40px",margin:"0"},h={border:"none !important",MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}};var b=n().createElement;const v=/^\d+\.?\d*|%$/,x=/^0+(?=\d)/,S=e=>{let{precision:t,maxLength:r,value:n,onChange:u,prefix:d,target:m,className:p,maxNumberValue:S}=e,k=(0,a.Z)(e,["precision","maxLength","value","onChange","prefix","target","className","maxNumberValue"]);const P=(0,i.useRef)(`${m}-${(1e3*Math.random()).toFixed(0)}`),T=!isNaN(Number(n)),C=(0,c.nH)(t),w=e=>{let a=e;if(!v.test(a)&&""!==a||isNaN(Number(a)))return n;a=a.replace(x,"");return(0,l.N3)(a)>t&&(a=a.replace(new RegExp(`^(\\d*\\.\\d{${t}})\\d*`),"$1")),r&&a.split(".")[0].length>r&&(a=n),0===t&&(a=a.replace(".","")),S&&Number(a)>S&&(a=S.toString()),a},I=w(n);(0,i.useEffect)((function(){I!==n&&"function"===typeof u&&u(I)}),[I,u,n]);return b(o.Z,{sx:g,className:p},b(s.Z,Object.assign({},k,{className:"order-form-input",id:P.current,variant:"inline",boxProps:y,sx:h,type:T?"number":"text",step:C,value:I,onChange:e=>{"function"===typeof u&&u(w(e.target.value))},onKeyDown:e=>{if(69===e.keyCode||189===e.keyCode||187===e.keyCode)return e.preventDefault(),!1;38!==e.keyCode&&40!==e.keyCode||!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)||e.preventDefault()},prefix:b(f,{text:d,target:P.current})})))}},b2zI:(e,t,r)=>{"use strict";r.d(t,{T:()=>n,U:()=>o});var a=r("EPGa"),i=r("FOuV");const n={LIMIT_PRICE:"limitPrice",SIDE:"side",UNIT_AMOUNT:"unitAmount",BUY_ORDER_AMOUNT:"buyOrderAmount",SELL_ORDER_AMOUNT:"sellOrderAmount",ACTIVATE_PRICE:"activatePrice",ACTIVATE_PRICE_WORKING_TYPE:"activatePriceWorkingType",PRICE_RATE:"priceRate",TRIGGER_PRICE:"triggerPrice",TRIGGER_PRICE_WORKING_TYPE:"triggerPriceWorkingType",STRATEGY_SIDE:"strategySide",TP_STOP_PRICE:"takeProfitStopPrice",SL_STOP_PRICE:"stopLossStopPrice",TP_STOP_PRICE_WORKING_TYPE:"takeProfitStopPriceWorkingType",SL_STOP_PRICE_WORKING_TYPE:"stopLossStopPriceWorkingType",TP_LIMIT_PRICE:"takeProfitLimitPrice",SL_LIMIT_PRICE:"stopLossLimitPrice",TP_ORDER_TYPE:"takeProfitOrderType",SL_ORDER_TYPE:"stopLossOrderType"},o={[n.SIDE]:void 0,[n.LIMIT_PRICE]:"",[n.UNIT_AMOUNT]:"",[n.BUY_ORDER_AMOUNT]:0,[n.SELL_ORDER_AMOUNT]:0,[n.TRIGGER_PRICE]:"",[n.TRIGGER_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[n.STRATEGY_SIDE]:i.O6.LONG,[n.TP_STOP_PRICE]:"",[n.SL_STOP_PRICE]:"",[n.TP_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[n.SL_STOP_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[n.TP_LIMIT_PRICE]:"",[n.SL_LIMIT_PRICE]:"",[n.TP_ORDER_TYPE]:a.Jm.TAKE_PROFIT_MARKET,[n.SL_ORDER_TYPE]:a.Jm.STOP_MARKET,[n.ACTIVATE_PRICE]:"",[n.ACTIVATE_PRICE_WORKING_TYPE]:i.gu.MARK_PRICE,[n.PRICE_RATE]:""}},z29O:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var a=r("5vwO"),i=r("pVAJ"),n=r("/SIk"),o=r.n(n),s=r("e5RN"),l=r("SVGq"),c=r("Vg22"),u=r("3PgV"),d=r("AHTf"),m=r("kZs2"),p=r("sIpC"),f=r("Gbz3"),g=r("IOB8"),y=o().createElement;function h({visible:e,onClose:t}){const r=(0,c.useDispatch)(),a=(0,i._n)(),o=(0,i.tZ)(),s=(0,c.useSelector)(g.Y),{curLeverage:l}=(0,f.rf)(),h=(0,f.G3)(),b=(0,f.$J)(),[v]=(0,i.z4)(),x=(0,i.j2)(),S=(0,n.useCallback)((e=>{r.leverage.updateCurrentLeverage({symbol:v,leverage:e})}),[r.leverage,v]),k=(0,m.CN)(h?d.l8.CM_LEVERAGE_MARGIN:d.l8.UM_LEVERAGE_MARGIN,{locale:o}),P=(0,m.CN)(d.O8,{locale:o});return y(u.Z,{visible:e,symbol:v,isLoggedIn:a,lng:o,brackets:s,leverage:l,positions:b,ticker:x,onChangeLeverage:S,onClose:t,toLogin:()=>(0,p.G)(o),toRegister:()=>(0,p.s)(o),enableErrorMsgIntercept:!0,tradingRuleLink:k,positionLimitEnargeLink:P,liquidationInfoLink:(0,m.CN)(d.Wh.LIQ_PRICE,{locale:o})})}var b=r("0bbt"),v=o().createElement;const x=({title:e,visible:t,onClose:r})=>{const{isLoggedIn:a}=(0,i.f0)(),{preOrders:o}=(0,i.E)(),s=(0,f.F)(),[l]=(0,i.z4)(),{marginType:u}=(0,f.se)(),d=(0,c.useDispatch)(),m=(0,n.useCallback)((e=>{d.marginType.updateState(e)}),[]);return v(b.Z,{title:e,marginType:u,openOrders:o,symbol:l,validPositionArr:s,toLogin:p.G,visible:t,onClose:r,isLoggedIn:a,onChange:m,enableErrorMsgIntercept:!0})},S=(0,n.memo)(x);var k=o().createElement;const P=({sx:e={},labelSx:t={},className:r})=>{var a;const c="rtl"===(0,i.gm)(),{getI18n:u}=(0,f.yk)(),[d]=(0,i.z4)(),{contractType:m}=(0,i.j2)(),{curLeverage:p=20}=(0,f.rf)(),{marginType:g="CROSSED"}=(0,f.se)(),{0:y,1:b}=(0,n.useState)(!1),{0:v,1:x}=(0,n.useState)(!1);let P;const T=d.split("_");var C;(P=P=`${null===T||void 0===T?void 0:T[0]} ${"PERPETUAL"===m?u("inversePerpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(a=T[1])||void 0===a?void 0:a.substr(2))||""}`,c)&&(P=P=`${"PERPETUAL"===m?u("perpetual",{defaultValue:"Perpetual"}):(null===T||void 0===T||null===(C=T[1])||void 0===C?void 0:C.substr(2))||""}${null===T||void 0===T?void 0:T[0]}`);return k(o().Fragment,null,k(s.Z,{sx:e,className:r},k(l.Z,{title:"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"}),as:"a",onClick:()=>{b(!0)},"data-testid":"Cross",sx:t},"CROSSED"===g?u("header-Cross",{defaultValue:"Cross"}):u("headerIsolated",{defaultValue:"Isolated"})),k(l.Z,{as:"a",onClick:()=>x(!0),"data-testid":"20x",sx:t},`${p}x`)),y&&k(S,{title:`${P} ${u("MarginModeTitle",{defaultValue:"Margin Mode"})}`,visible:!0,onClose:()=>{b(!1)}}),v&&k(h,{visible:!0,onClose:()=>x(!1)}))},T=o().memo(P);var C=o().createElement;const w={flex:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:"64px",height:"24px",fontSize:"xs",lineHeight:"24px",padding:0,mr:"5px",borderRadius:"2px",textAlign:"center",cursor:"pointer",display:"inline-block",px:"4px",py:0,bg:"line",":hover":{bg:"bg3",borderColor:"bg3"},a:{color:"t.primary"}},I={ml:"8px",mr:"20px",minWidth:"auto"};function M({sx:e={},labelSx:t={},className:r}){const{isMobile:o}=(0,i.Fs)(),s=(0,n.useMemo)((()=>(0,a.Z)((0,a.Z)({},I),e)),[e]),l=(0,n.useMemo)((()=>(0,a.Z)((0,a.Z)({},w),t)),[t]);return C(T,{sx:s,labelSx:l,className:r})}},rjKl:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("W33l"),l=r("XbY+"),c=r("AHTf"),u=r("Wx6g"),d=r("isaE"),m=r("pVAJ"),p=r("U0yl"),f=r("Gbz3"),g=r("/MJE"),y=r("e5RN"),h=r("X46w"),b=r("wjiZ"),v=r("Ys09"),x=r("RqPo"),S=r("Mvln");const k={display:"flex",flexDirection:"column",height:"100%",p:["0px","24px 16px"],bg:"popupBg",fontSize:"14px",lineHeight:"20px",userSelect:"none",".header":{mb:["16px","30px"],fontSize:"24px",lineHeight:"32px",color:"t.primary"},".sub-header":{display:"flex",flexDirection:"row",alignItems:"center",mb:"6px",color:"t.third"},".content":{mb:["16px","30px"],color:"t.third"},".link":{mt:"20px",textAlign:"center"}},P={position:"fixed",bottom:0,left:0,width:"100%",zIndex:"999",flexDirection:"column",p:"24px 16px",bg:"popupBg",userSelect:"none"},T={height:"40px",bg:"transInputBG"};var C=n().createElement;const w=({getI18n:e,handleOpenFuturesAccount:t,helpUrl:r,referralCode:a,isValid:i,handleCodeChange:n,canUseFutureAgentCode:o,onClose:s})=>C(y.Z,{sx:k},C("div",{className:"header"},"function"===typeof s&&C(x.Z,{size:16,mr:"8px",color:"t.primary",onClick:s}),e("openAccout-title",{defaultValue:"Open Futures Account"})),C("div",{className:"sub-header"},C(S.Z,{mr:"4px",size:16}),e("openAccout-reminderLabel",{defaultValue:"Reminder:"})),C("div",{className:"content"},e("openAccout-reminderContent")),C(v.Z,{boxProps:T,disabled:!o,value:a,onChange:n,variant:"filled",placeholder:e("openAccout-refCodeLabel"),error:!i,errorText:e("openAccout-refCodeError")}),C(h.Z,{mt:i?"10px":"26px",sz:"normal",onClick:t},e("openAccout-openBtn",{defaultValue:"Open Now"})),C(b.Z,{className:"link",href:r,target:"_blank",sx:{textDecoration:"none"}},e("openAccout-toTradingGuide",{defaultValue:"Click to see Margin Trading Guide"})));var I=n().createElement;const M=e=>{const{0:t,1:r}=(0,i.useState)(!1);return I(y.Z,{sx:P},t?I(w,Object.assign({},e,{onClose:()=>r(!1)})):I(h.Z,{sz:"normal",onClick:()=>r(!0)},e.getI18n("openAccout-title",{defaultValue:"Open Futures Account"})))},E=n().memo(M);var N=n().createElement;const Z=/^[\w]{3,16}$/,A=()=>{const{i18n:{language:e="en"},getI18n:t}=(0,p.Z)("trd-futures","trade-ui"),{ref:r=""}=(0,m.lr)(),{setMessageInfo:n}=(0,m.YT)(),{0:y,1:h}=(0,i.useState)(!0),{0:b,1:v}=(0,i.useState)(r),x=(0,o.useDispatch)(),S=(0,m.Pc)(),{value:k}=(0,f.f3)(),P=e=>{const t=e.target.value.trim().toLowerCase();v(t),""!==t&&!Z.test(t)&&t.length<=16?h(!1):h(!0)},T={locale:e,callback:(0,s.Ok)(window.location.href)},C=(0,d.C)(c.x.FUTURES_HELP_URL,T);return N(u.Z,null,(({isMobile:e})=>N(e?E:w,{referralCode:b,isValid:y,handleCodeChange:P,getI18n:t,helpUrl:C,handleOpenFuturesAccount:()=>(async e=>{const r=await(0,l.L)({agentCode:e});(null!==r&&void 0!==r&&r.success||null!==r&&void 0!==r&&r.rootUserId)&&(n({message:t("openAccout-successOpen",{defaultValue:"open success"}),variant:"success"}),g.Z.updateUserInfo((0,a.Z)((0,a.Z)({},S),{},{isExistFutureAccount:!0})),x.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},S),{},{isExistFutureAccount:!0})}),await x.preference.getPositionMode())})(b),canUseFutureAgentCode:k})))},O=n().memo(A)},hfnl:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("fi7b"),s=r("O94r"),l=r.n(s),c=r("XhNN"),u=r("OV9X"),d=r("wjiZ"),m=r("e5RN"),p=r("9rpF"),f=r("MvZp"),g=r("3N7n"),y=r("dcD/"),h=r("pVAJ"),b=r("Gbz3"),v=r("Vnoa"),x=r("rdEq");const S={justifyContent:"space-between",borderTop:"1px solid",borderTopColor:"newLine",mt:"8px",".asset-label":{display:"flex",alignItems:"center",color:"t.primary"}},k={cursor:"pointer"},P={width:"348px",maxWidth:"348px",m:0,".asset-block":{mb:"24px",".asset-title":{fontSize:"14px",lineHeight:"20px",mb:"8px"},".asset-desc":{fontSize:"12px",lineHeight:"16px",whiteSpace:"pre-line"}}},T={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".asset-option":{padding:"6px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px",lineHeight:"20px"}};var C=i().createElement;const w=i().memo((()=>{const{getI18n:e}=(0,b.yk)(),{t:t}=(0,b.$G)(),r=(0,h.tZ)();return C(i().Fragment,null,C(c.Z,{className:"asset-block"},C(c.Z,{className:"asset-title"},e("singleAsset",{defaultValue:"Single-Asset Mode"})),C(u.Z,{className:"asset-desc"},e("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),C(c.Z,{className:"asset-block"},C(c.Z,{className:"asset-title"},e("multiAssets",{defaultValue:"Multi-Assets Mode"})),C(u.Z,{className:"asset-desc"},e("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),C(c.Z,null,C(o.c,{t:t,i18nKey:(0,b.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:C(u.Z,{fontSize:"12px",lineHeight:"16px"}),jump:C(d.Z,{href:`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:e("guide",{defaultValue:"guide"})}})))})),I=(0,a.forwardRef)((({},e)=>{const t=(0,n.useSelector)((e=>e.position.positionMap));return(0,a.useImperativeHandle)(e,(()=>({checkHasIsolated:()=>Object.values(t).some((e=>e.isolated))}))),null})),M=({sx:e={}})=>{var t;const{assetMode:r=!1}=(0,b.F7)(),{getI18n:i}=(0,b.yk)(),o=(0,v.useConfirmStore)((e=>e.setVisible)),s=(0,v.useConfirmStore)((e=>e.setAssetMode)),{enqueueNotification:d}=(0,f.Z)(),h=(0,a.useRef)(null),M=[{label:i("singleAsset",{defaultValue:"Single-Asset Mode"}),value:!1},{label:i("multiAssets",{defaultValue:"Multi-Assets Mode"}),value:!0}],E=(0,n.useDispatch)(),N=(0,a.useCallback)((e=>{var t;return(null===h||void 0===h||null===(t=h.current)||void 0===t?void 0:t.checkHasIsolated())?(o(!0),void s(e)):E.preference.changeAssetMode({joinMargin:e}).then((e=>{const{success:t}=e;t&&d({header:i("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:i("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[E.preference]);return C(m.Z,{__css:S,sx:e},C(m.Z,{alignItems:"center",mt:"6px"},C(u.Z,{color:"t.third"},i("assetMode",{defaultValue:"Asset Mode"})),C(x.m,{tip:C(w,null),hideUnderLine:!0,enablePortal:!0,tipSx:P,labelSx:k},C(g.Z,{size:16,ml:"6px"}))),C(c.Z,{mt:"6px"},C(p.ZP,{trigger:"hover",enablePortal:!0,overlay:C(c.Z,{sx:T},M.map((e=>{const{label:t,value:a}=e||{};return C("div",{className:l()({"asset-option":!0,active:a===r}),key:t,onClick:()=>N(a)},t)})))},C("div",{className:"asset-label"},null===(t=M.find((e=>e.value===r)))||void 0===t?void 0:t.label,C(y.Z,{ml:"4px",color:"t.third",size:16})))),C(I,{ref:h}))},E=i().memo(M)},SLNl:(e,t,r)=>{"use strict";r.d(t,{Z:()=>de});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("e5RN"),s=r("OV9X"),l=r("XhNN"),c=r("9rpF"),u=r("wjiZ"),d=r("BRtp"),m=r("66kR"),p=r("iW4m"),f=r("kZs2"),g=r("pVAJ"),y=r("fi7b"),h=r("Rhv4"),b=r("4xt1"),v=r("Gbz3"),x=i().createElement;const S={flexDirection:"column","& .content":{mt:["sm","md"]},"& .grid":{display:"grid",gridTemplateColumns:"repeat(3, 33.33%)",gridTemplateRows:"repeat(3, 33.33%)"},"& .rateList":{mb:"sm",maxHeight:["60%","180px"],overflowY:"auto"},"& .row, & .cation":{pb:"xs"},"& .row:last-of-type":{pb:0},"& .cation":{color:"t.third"},"& .row":{color:"t.primary"},"& .updateTime":{pb:"sm",mb:"sm",borderBottom:"1px solid",borderColor:"t.secondary"},"& .info":{color:"t.third",fontSize:0,lineHeight:"16px","& > a":{color:"t.yellow"}},"& .link":{mt:"xs"}},k=({children:e})=>x(s.Z,{variant:"body2"},e),P=({visible:e,onClose:t})=>{const r=(0,g.tZ)(),{t:i}=(0,v.$G)(),{getI18n:n}=(0,v.yk)(),l=(()=>{const e=(0,v.G8)(),t=(0,v.KQ)();return(0,a.useMemo)((()=>Object.entries(e).filter((([e])=>{var r;return null===(r=t[e])||void 0===r?void 0:r.marginAvailable})).map((([,e])=>e))),[e,t])})();return x(h.Z,{open:e,onCloseIconClick:t,sx:{width:["100%","488px"]}},x(o.Z,{__css:S},x(s.Z,{variant:"title6",color:"t.primary"},n("joinMargin-MultiAssetsExchangeRate",{defaultValue:"Multi-Assets Exchange Rate"})),x("div",{className:"content"},x("div",{className:"grid cation"},x(k,null,n("joinMargin-Pair",{defaultValue:"Pair"})),x(k,null,n("joinMargin-AskRate",{defaultValue:"Ask Rate"})),x(k,null,n("joinMargin-BidRate",{defaultValue:"Bid Rate"}))),x("div",{className:"rateList"},l.map((({symbol:e="",askRate:t=0,bidRate:r=0})=>x("div",{key:e,className:"grid row"},x(k,null,e.slice(0,-3),"/",e.slice(-3)),x(k,null,(0,b.GW)(t,4)),x(k,null,(0,b.GW)(r,4)))))),x("div",{className:"info updateTime"},"\xb7"," ",n("joinMargin-UpdateTime",{defaultValue:"Update Time"}),": ",l[0]?(0,f.vs)(l[0].time||0):""," UTC"),x("div",{className:"info"},n("joinMargin-ExchangeRateTip",{defaultValue:"USD valuation of the Margin assets in the USD\u24c8-M Futures account are calculated according to the real-time exchange rate under Multi-Assets mode, including the available balance for orders and withdrawals."})),x("div",{className:"info link"},x(y.c,{t:i,i18nKey:(0,v.Gv)("joinMargin-MultiAssetsCalcDetails"),components:{jump:x("a",{href:`/${r}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,target:"_blank",rel:"noreferrer"})},defaults:"For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump>.",values:{guideLink:n("joinMargin-guidLink")}})))))},T=i().memo(P);var C=r("5kFy"),w=r("kjyE"),I=r("tLXD"),M=r("Ygfp"),E=r.n(M),N=r("rdEq"),Z=r("GpFh"),A=r("/Fn1"),O=r("H6/m"),R=r("LcTY"),V=r("AHTf"),L=r("hfnl"),F=r("FOuV"),D=i().createElement;const _=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,Z.Z)(e,["children"]);return D(s.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),z=({balance:e,onChange:t,curAsset:r})=>{const a=Object.values(e);return D(l.Z,{sx:{ml:"auto"}},D(c.ZP,{trigger:"hover",overlay:D(l.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},a.map((e=>{const{asset:r}=e||{};return D(l.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},D(s.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},D(o.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,D(m.Z,{color:"#929AA5",size:16}))))},B=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,v.C3)()===V.UW;return D(o.Z,{as:"span",sx:{justifyContent:"space-between"}},D(s.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),D(z,{curAsset:t,balance:r,onChange:a}),i&&D(A.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{R.T.emit(R.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:n,balance:o,setCurAsset:s}=t,l=Object.keys(a).join(),c=Object.keys(o).join();return r===n&&i===s&&l===c})),K=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,base:i,curAsset:n})=>{const s=(0,a.useRef)();return D(o.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},D(_,{as:"a",onClick:()=>{let e=(0,w.CN)(t.BUYING_URL,{locale:r,crypto:n});e=(0,w.CN)(t.BUYING_URL_ELECTRON,{crypto:n}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),D(_,{as:"a",ref:s,onClick:()=>R.T.emit(R.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),D(_,{as:"a",onClick:()=>R.T.emit(R.F.OPEN_TRANSFER_MODAL,n),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),q=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,v.Gb)(t);return D(s.Z,{color:"t.fifth"},(0,b.uf)(r||0,e)," ",t)})),W=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:n,marginPrecision:c,quoteAsset:u,bnbWalletBalance:d,locale:m})=>{const p=(0,a.useMemo)((()=>D(o.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},D(N.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),D(s.Z,{color:"t.fifth"},(0,b.GW)(n||0,c,!0)," ",u))),[r,u,c,n]);return D(i().Fragment,null,!e&&!t&&D(l.Z,{mt:"16px"},p,D(o.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},D(N.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),D(q,{marginPrecision:c,marginAsset:u}))),e&&!t&&D(O.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."})))})),H=({mt:e="50px",noButtons:t})=>{var r,i;const{getI18n:o,i18n:{language:s}}=(0,v.yk)(),c=(0,g._n)(),[u,[d]]=(0,g.z4)(),m=(0,n.useDispatch)(),p=((0,g.gm)(),(0,v.KQ)()),f=(0,v.Kc)("loading"),[,[,y]]=(0,g.z4)(),{0:h,1:b}=(0,a.useState)(y),{isMobile:x}=(0,g.Fs)(),S=Object.values(p).every((({walletBalance:e})=>!e));return(0,a.useEffect)((()=>{b(y),m.transferAssets.updateState({transferAsset:y})}),[y,m]),x?null:c?D(l.Z,{mt:e,fontSize:"12px"},D(B,{getFutI18n:o,curAsset:h,balance:p,setCurAsset:b}),t||D(K,{getFutI18n:o,futUrlConfig:F.x,locale:s,base:d,curAsset:h}),D(W,{isEmptyBalance:S,loading:f,getFutI18n:o,walletBalance:null===(r=p[h])||void 0===r?void 0:r.walletBalance,marginPrecision:4,quoteAsset:h,bnbWalletBalance:null===(i=p.BNB)||void 0===i?void 0:i.walletBalance,locale:s}),!S&&!f&&D(L.Z,{sx:{flexDirection:"column"}})):null},U=i().memo(H);var j=r("5vwO"),$=i().createElement;const G=(0,a.forwardRef)(((e,t)=>{let{children:r}=e,a=(0,Z.Z)(e,["children"]);return $(s.Z,Object.assign({variant:"labelButton.default",sx:{flex:1,mr:"xs",py:"4px",color:"t.fifth",lineHeight:"16px",textDecoration:"none",":last-of-type":{mr:"0"}},ref:t},a),r)})),J=({balance:e,onChange:t,curAsset:r,sx:a})=>{const i=Object.values(e);return $(l.Z,{sx:(0,j.Z)({ml:"auto"},a)},$(c.ZP,{trigger:"hover",overlay:$(l.Z,{variant:"dropdown",sx:{overflowY:"auto",maxHeight:"193px"}},i.map((e=>{const{asset:r}=e||{};return $(l.Z,{key:r,sx:{px:"sm",pt:"12px",pb:"6px",bg:"control",cursor:"pointer",":last-of-type":{pt:"6px",pb:"12px"}},onClick:()=>{t(r)}},$(s.Z,{color:"t.primary",key:r,value:r,sx:{":hover":{color:"primary"}}},r))})))},$(o.Z,{as:"span",sx:{fontWeight:"400",color:"t.grey300",borderBottom:"2px solid",cursor:"pointer",borderBottomColor:"transparent",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,$(m.Z,{color:"#929AA5",size:16}))))},Y=i().memo((({getFutI18n:e,curAsset:t,balance:r,setCurAsset:a})=>{const i=(0,v.C3)()===V.UW;return $(o.Z,{as:"span",sx:{justifyContent:"space-between"}},$(s.Z,{sx:{fontSize:"16px",fontWeight:"600",color:"t.primary"},as:"span"},e("assets",{defaultValue:"Assets"})),$(J,{curAsset:t,balance:r,onChange:a}),i&&$(A.Z,{sx:{color:"t.yellow200",border:"1px solid",borderColor:"t.yellow200",cursor:"pointer",borderRadius:"2px",fontSize:"16px",ml:"16px"},onClick:()=>{R.T.emit(R.F.OPEN_TRANSFER_MODAL,t)}}))}),(function(e,t){const{curAsset:r,balance:a,setCurAsset:i}=e,{curAsset:n,balance:o,setCurAsset:s}=t,l=Object.keys(a).join(),c=Object.keys(o).join();return r===n&&i===s&&l===c})),Q=i().memo((({getFutI18n:e,futUrlConfig:t,locale:r,base:i,curAsset:n})=>{const s=(0,a.useRef)();return $(o.Z,{sx:{justifyContent:"space-between",pt:"sm",mt:"14px"}},$(G,{as:"a",onClick:()=>{let e=(0,w.CN)(t.BUYING_URL,{locale:r,crypto:n});e=(0,w.CN)(t.BUYING_URL_ELECTRON,{crypto:n}),window.open(e)}},e("buy-crypto",{defaultValue:"Buy Crypto"})),$(G,{as:"a",ref:s,onClick:()=>R.T.emit(R.F.OPEN_CONVERT_MODAL),"data-testid":"orderform-convert-button"},e("convert",{defaultValue:"Convert"})),$(G,{as:"a",onClick:()=>R.T.emit(R.F.OPEN_TRANSFER_MODAL,n),"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"})))})),X=i().memo((({marginPrecision:e,marginAsset:t})=>{const r=(0,v.w2)(t);return $(s.Z,{color:"t.fifth"},(0,b.uf)(r||0,e)," ",t)})),ee=i().memo((({isEmptyBalance:e,loading:t,getFutI18n:r,walletBalance:a,marginPrecision:n,curAsset:c})=>$(i().Fragment,null,!e&&!t&&$(l.Z,{mt:"16px"},$(o.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},$(N.m,{tip:r("tradeHistory-positions-walletBalanceTip",{defaultValue:""})},r("tradeHistory-positions-walletBalanceLabel",{defaultValue:"Wallet Balance"})),$(s.Z,{color:"t.fifth"},(0,b.GW)(a||0,n,!0)," ",c)),$(o.Z,{justifyContent:"space-between",sx:{marginTop:"8px",lineHeight:"16px"}},$(N.m,{tip:r("tradeHistory-positions-unrealizedPnlTip",{defaultValue:""})},r("tradeHistory-positions-unrealizedPNLLabel",{defaultValue:"Unrealized PNL"})),$(X,{marginPrecision:n,marginAsset:c}))),e&&!t&&$(O.Z,{showIcon:!0,mt:"12px",flexDirection:"row",variant:"warning"},r("TransferAssetToTrading",{defaultValue:"Please transfer assets into futures account to start trading."}))))),te=({mt:e="50px",noButtons:t})=>{var r;const{getI18n:i,i18n:{language:o}}=(0,v.yk)(),s=(0,g._n)(),[c,[u]]=(0,g.z4)(),d=(0,n.useDispatch)(),m=(0,v.KQ)(),p=(0,v.Kc)("loading"),[,[f]]=(0,g.z4)(),{0:y,1:h}=(0,a.useState)(f),{isMobile:b}=(0,g.Fs)(),x=Object.values(m).every((({walletBalance:e})=>!e));return(0,a.useEffect)((()=>{h(f),d.transferAssets.updateState({transferAsset:f})}),[f,d]),b?null:s?$(l.Z,{mt:e,fontSize:"12px"},$(Y,{getFutI18n:i,curAsset:y,balance:m,setCurAsset:h}),t||$(Q,{getFutI18n:i,futUrlConfig:F.x,locale:o,base:u,curAsset:y}),$(ee,{isEmptyBalance:x,loading:p,getFutI18n:i,walletBalance:null===(r=m[y])||void 0===r?void 0:r.walletBalance,marginPrecision:4,curAsset:y})):null},re=i().memo(te);var ae=i().createElement;const ie=i().memo((({getFutI18n:e,handleShowAssets:t})=>ae(o.Z,{as:"span",sx:{justifyContent:"space-between",alignItems:"center"}},ae(s.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},e("tradeHistory-positions-marginRatioLabel",{defaultValue:"Assets"})),ae(l.Z,{sx:{color:"primary",bg:"dialog.panelBg",fontSize:0,lineHeight:"24px",borderRadius:"40px",px:"8px",cursor:"pointer",ml:"auto",mr:"14px"},onClick:()=>f.TB.emit(f.FP.SHOW_PREFERENCE_PANEL,"am")},e("joinMargin-multi-assets",{defaultValue:"Multi-Assets "})),ae(d.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:t})))),ne=({marginRatioList:e,onChange:t,marginRatioLabel:r})=>ae(l.Z,{sx:{ml:"auto",mr:"14px"}},ae(c.ZP,{trigger:"hover",overlay:e.map((e=>ae(l.Z,{key:e.key,sx:{px:"sm",maxWidth:"150px",pt:"12px",pb:"6px",bg:"control",color:"t.primary",cursor:"pointer",":hover":{color:"primary"},":last-of-type":{pt:"6px",pb:"12px"},div:{maxWidth:"100%"}},onClick:()=>{t(e.key)}},ae(s.Z,{key:e.key,value:e.key,sx:{display:"inline-block",maxWidth:"80px",color:"t.priamry"}},e.marginRatioLabel))))},ae(o.Z,{as:"span",sx:{width:"auto",maxWidth:"138px",textAlign:"right",fontWeight:"400",color:"t.grey300",cursor:"pointer",alignItems:"center",":hover":{svg:{transform:"rotate(180deg)"}}}},r,ae(m.Z,{color:"t.grey300",size:24})))),oe=i().memo((({getFutI18n:e,marginRatioLabel:t,marginRatioList:r,setMarginRatioKey:a,handleShowAssets:i})=>ae(o.Z,{as:"span",sx:{justifyContent:"space-between",alignItems:"center"}},ae(s.Z,{sx:{fontSize:"14px",fontWeight:"600",color:"t.primary",flex:"0 0 auto"},as:"span"},e("tradeHistory-positions-marginRatioLabel",{defaultValue:"Assets"})),(null===r||void 0===r?void 0:r.length)>0&&ae(ne,{marginRatioLabel:t,marginRatioList:r,onChange:a}),ae(d.Z,{sx:{transform:"rotate(180deg)",cursor:"pointer"},color:"t.grey500",size:20,onClick:i}))),(function(e,t){const{marginRatioLabel:r,marginRatioList:a,setMarginRatioItem:i}=e,{marginRatioLabel:n,marginRatioList:o,setMarginRatioItem:s}=t,l=a.map((e=>e.marginRatioLabel)).join(),c=o.map((e=>e.marginRatioLabel)).join();return r===n&&i===s&&l===c})),se=i().memo((({isRtl:e,isJoinMargin:t,getFutI18n:r,riskRatio:a,maintenanceMargin:i,marginBalance:c,marginAsset:d,marginPrecision:m})=>{const f=(0,g.tZ)(),{t:h}=(0,v.$G)(),{visible:x,onOpen:S,onClose:k}=(0,v.yV)(),P=ae(u.Z,{href:`/${f}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,target:"_blank",variant:"secondaryLink",color:"t.yellow"}),I=ae(s.Z,{variant:"addressLink",as:"span",sx:{color:"t.yellow",cursor:"pointer",fontSize:"12px"},onClick:S}),M=t?r("joinMargin-accountMarginRatioTip",{defaultValue:"Account Margin Ratio = Account Maintenance Margin / Account Equity"}):r("tradeHistory-positions-marginRatioTip",{defaultValue:""}),E=t?r("joinMargin-accountMarginRatioLabel",{defaultValue:"Account Margin Ratio"}):r("tradeHistory-positions-marginRatioLabel",{defaultValue:"Margin Ratio"}),Z=t?ae(y.c,{t:h,i18nKey:(0,v.Gv)("joinMargin-accountMaintenanceMarginTipV2"),components:{jump:P,showRate:I},defaults:"The sum of USD value of all cross positions maintenance margin in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:r("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:r("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):r("tradeHistory-positions-maintenanceMarginTip",{defaultValue:"The minimum amount of margin balance required to keep your open positions."}),A=t?r("joinMargin-accountMaintenanceMarginLabel",{defaultValue:"Account Maintenance Margin"}):r("tradeHistory-positions-maintenanceMarginLabel",{defaultValue:"Maintenance Margin"}),O=t?ae(y.c,{t:h,i18nKey:(0,v.Gv)("joinMargin-accountEquityTipV2"),components:{jump:P,showRate:I},defaults:"The sum of USD value of all margin balance in the USD\u24c8-M Futures. For more Multi-Assets calculation details, please refer to the <jump>{{guideLink}}</jump> and <showRate>{{exchangeRate}}</showRate>.",values:{guideLink:r("joinMargin-guidLink",{defaultValue:"Multi-Assets Mode guide"}),exchangeRate:r("joinMargin-ExchangeRate",{defaultValue:"Real-time Exchange Rate"})}}):r("tradeHistory-positions-marginBalanceTip",{defaultValue:""}),R=t?r("joinMargin-accountEquityLabel",{defaultValue:"Account Equity"}):r("tradeHistory-positions-marginBalanceLabel",{defaultValue:"Margin Balance"}),V=(0,n.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),L=(0,n.useSelector)((e=>e.loading.effects.preference.getAssetMode)),F=V||L;return ae(l.Z,{mt:"8px",sx:{borderBottom:"1px solid",borderColor:"t.grey700"}},ae(o.Z,{justifyContent:"space-between",alignItems:"center",lineHeight:"21px"},ae(N.m,{tip:M},E),ae(o.Z,{justifyContent:"flex-end",alignItems:"center"},ae(C.Z,{riskRatio:a}),ae(s.Z,{fontSize:3,color:"buy",ml:"8px"},(0,w.JX)(F?0:a,2)||"0.00","%"))),ae(o.Z,{sx:{marginTop:"8px",lineHeight:"16px"},justifyContent:"space-between"},ae(N.m,{tip:Z},A),ae(o.Z,{flexDirection:e?"row-reverse":""},ae(s.Z,{color:"t.fifth"},(0,b.uf)(F?0:i,m)),"\xa0",ae(s.Z,{color:"t.fifth"},d))),ae(o.Z,{sx:{marginTop:"8px",lineHeight:"16px",paddingBottom:"11px"},justifyContent:"space-between"},ae(o.Z,null,ae(N.m,{tip:O},R),t&&ae(p.Z,{ml:1,size:2,onClick:S,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}}})),ae(o.Z,{flexDirection:e?"row-reverse":""},ae(s.Z,{color:"t.fifth"},(0,b.GW)(F?0:c,m,!0)),"\xa0",ae(s.Z,{color:"t.fifth"},d))),ae(T,{visible:x,onClose:k}))})),le=({handleShowAssets:e})=>{var t;const{getI18n:r}=(0,v.yk)(),n=(0,g._n)(),[o]=(0,g.z4)(),s=(0,v.G3)(),{marginAsset:c}=(0,g.j2)(),u=(0,v.KQ)(),d="rtl"===(0,g.gm)(),{0:m,1:p}=(0,a.useState)(""),{positionMode:f=!1}=(0,v.F7)(),y=(0,v.m)(r,f,s),h=(0,I.Z)(y),b=y.find((e=>e.key===m)),{riskRatio:x=0,marginBalance:S=(null===(t=u[c])||void 0===t?void 0:t.walletBalance)||0,maintenanceMargin:k,marginAsset:P=c,marginRatioLabel:T}=b||{},C=e=>{let t;y.length>0&&(t=y.find((e=>e.symbols.some((e=>e===o)))),e||t||(t=y[0]||{}),t&&p(t.key))};(0,a.useEffect)((()=>{b||C()}),[y.length]),(0,a.useEffect)((()=>{const e=E()(y,h,"key").find((e=>e.symbols.some((e=>e===o))));e&&p(e.key)}),[y.length]),(0,a.useEffect)((()=>{C(!0)}),[o]);return n?ae(i().Fragment,null,ae(l.Z,{fontSize:"12px",display:["none","block"]},ae(oe,{getFutI18n:r,marginRatioLabel:T,marginRatioList:y,setMarginRatioKey:p,handleShowAssets:e}),ae(se,{isRtl:d,isJoinMargin:!1,getFutI18n:r,riskRatio:x,maintenanceMargin:k,marginBalance:S,marginAsset:P,marginPrecision:4})),ae(s?re:U,{mt:"12px",noButtons:!0})):null},ce=({handleShowAssets:e})=>{const t=(0,g._n)(),r=(0,v.G3)(),{getI18n:a}=(0,v.yk)(),n="rtl"===(0,g.gm)(),{riskRatio:o=0,marginBalance:s,maintenanceMargin:c}=(0,v.Nx)(r),u=r?4:2;return t?ae(i().Fragment,null,ae(l.Z,{fontSize:"12px",display:["none","block"]},ae(ie,{getFutI18n:a,handleShowAssets:e}),ae(se,{isRtl:n,isJoinMargin:!0,getFutI18n:a,riskRatio:o,maintenanceMargin:c,marginBalance:s,marginAsset:"USD",marginPrecision:u})),ae(r?re:U,{mt:"12px",noButtons:!0})):null},ue=({handleShowAssets:e})=>{const{assetMode:t}=(0,v.F7)();return ae(t?ce:le,{handleShowAssets:e})},de=i().memo(ue)},SVGq:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("5vwO"),i=r("GpFh"),n=r("OV9X"),o=r("/SIk"),s=r.n(o)().createElement;const l=e=>{let{children:t,sx:r}=e,o=(0,i.Z)(e,["children","sx"]);return s(n.Z,Object.assign({sx:(0,a.Z)({mr:"xs",py:"4px",flex:"1",fontSize:[0],lineHeight:"16px",color:"t.primary",fontWeight:"500",cursor:"pointer",textAlign:"center",borderRadius:"4px",bg:"orderformBtn.bg",textDecoration:"none",":last-of-type":{mr:"0"},":hover":{bg:"t.secondary",borderColor:"t.secondary"}},r)},o),t)}},"5kFy":(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("kjyE"),s=i().createElement;const l=({riskRatio:e})=>{const t=(e=>(0,o.JX)(2.7*e-45,0))(e);return s(n.Z,{sx:{position:"relative"}},s(n.Z,{sx:{position:"relative",width:"24px",height:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05044 7.05025C8.31719 5.7835 10.0672 5 12.0002 5C13.9332 5 15.6832 5.7835 16.9499 7.05025L18.3642 5.63604C16.7355 4.00736 14.4855 3 12.0002 3C9.51491 3 7.26491 4.00736 5.63623 5.63604L7.05044 7.05025Z",fill:"#F0B90B"}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.9497 7.05044C18.2165 8.31719 19 10.0672 19 12.0002C19 13.9332 18.2165 15.6832 16.9497 16.9499L18.364 18.3642C19.9926 16.7355 21 14.4855 21 12.0002C21 9.51491 19.9926 7.26491 18.364 5.63623L16.9497 7.05044Z",fill:"#F6465D"}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.05025 16.9496C5.7835 15.6828 5 13.9328 5 11.9998C5 10.0668 5.7835 8.31681 7.05025 7.05006L5.63604 5.63585C4.00736 7.26453 3 9.51453 3 11.9998C3 14.4851 4.00736 16.7351 5.63604 18.3638L7.05025 16.9496Z",fill:"#2EBD85"}))),s(n.Z,{style:{transform:`rotate(${t}deg)`},sx:{position:"absolute",left:"0",top:"0",transformOrigin:"center",transition:"transform 1s ease",height:"24px",width:"24px"}},s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 13.6569 13.6569 15 12 15C10.6938 15 9.58254 14.1652 9.17071 13H3V11H9.17071C9.58254 9.83481 10.6938 9 12 9C13.6569 9 15 10.3431 15 12ZM13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z",fill:"#5E6673"}))))},c=i().memo(l)},Q9ZO:(e,t,r)=>{"use strict";let a;r.d(t,{C:()=>a}),function(e){e.Normal="NORMAL",e.Horizontal="HORIZONTAL",e.FullScreen="FULL_SCREEN"}(a||(a={}))},SnVb:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r("4xt1"),i=r("EPGa"),n=r("kZs2");const o=({orderType:e,qty:t=0,triggerPrice:r=0,orderPrice:o=0,contractVal:s,activationPrice:l=0,lastPrice:c=0,markPrice:u=0,isDelivery:d,precision:m=0})=>{let p;switch(e){case i.Jm.STOP_LIMIT:case i.Jm.TAKE_PROFIT_LIMIT:case i.Jm.POST_ONLY:case i.Jm.LIMIT:p=o;break;case i.Jm.MARKET:p=c;break;case i.Jm.STOP_MARKET:case i.Jm.TAKE_PROFIT_MARKET:p=r;break;case i.Jm.TRAILING_STOP_MARKET:p=l||u;break;default:p=o}const f=Number(s);return d?f?(0,a.Jp)(t/f,p).toFixed(0,1):0:(0,n.GW)(t/p,m)}},YkKT:(e,t,r)=>{"use strict";r.d(t,{F:()=>k});var a=r("5vwO"),i=r("6eVz"),n=r("4xt1"),o=r("d2db"),s=r("4m5F"),l=r("EPGa"),c=r("pVAJ"),u=r("Vg22"),d=r("AHTf"),m=r("LcTY"),p=r("kZs2"),f=r("De8U");var g=r("wqQ1"),y=r("revF"),h=r("Gbz3"),b=r("FOuV"),v=r("k2tD"),x=r("yxRq"),S=r("NQFm");function k({afterSubmit:e,overrides:t={}}){const r=(0,u.useDispatch)(),{showBattleDialog:k}=(0,o.P)(),{inBattle:P}=(0,y.M)(),{inBattle:T}=(0,h.E5)(),{setMessageInfo:C}=(0,c.YT)(),{getI18n:w}=(0,h.yk)(),I=(0,h.G3)(),M=(0,c.c7)(),[E]=(0,h.eY)(),N=(0,u.useSelector)(I?g.As:g.qb)===d.UW,Z=(i,o)=>{var c,u,d,g,y,k;const{preference:{orderConfirmation:P,positionMode:T,assetMode:Z,enableAdvancedTPSL:A,priceProtection:O},futuresOrderForm:R,userCenter:{loginStatus:{isLoggedIn:V}},products:{currentProduct:{filters:L,equalQtyPrecision:F=2,minQty:D,marginAsset:_,contractVal:z=1,pricePrecision:B},allProducts:K},pageStore:{symbol:[q,[W,H]]},markPrice:U,position:j,leverage:{curLeverage:$},exchangeInfo:{infos:G},balance:J,assetIndex:Y}=o;if(!V)return;const Q=t.orderType||R.orderType,X=t.positionDirection||R.positionDirection,ee=t.timeInForce||R.timeInForce,te="boolean"===typeof t.reduceOnly?t.reduceOnly:R.reduceOnly,re="boolean"===typeof t.isTPSLEnabled?t.isTPSLEnabled:R.isTPSLEnabled,ae=(null===(c=b.vQ[H])||void 0===c?void 0:c.pricePrecision)||b.vQ.delivery.pricePrecision,ie=(null===(u=L.find(S.$H))||void 0===u?void 0:u.tickSize)||"",ne=(0,v.OR)(ie),oe=(0,v.OR)(null===(d=L.find(S.W4))||void 0===d?void 0:d.stepSize),se=(0,v.OR)(null===(g=L.find(S.vr))||void 0===g?void 0:g.stepSize),le=null===(y=L.find(S.Jv))||void 0===y?void 0:y.notional,{levels:ce}=G[q]||{levels:f.zq.map((e=>(0,f.Wv)(e)))},{askPrice:ue,bidPrice:de}=(0,p.OA)({tickSize:ie,symbol:q,levels:ce,isDelivery:I}),me=Number(M()),pe=(0,p._V)({orderType:Q,equalQtyPrecision:F,unit:E,filters:L}),fe=(0,p._V)({orderType:Q,equalQtyPrecision:F,unit:I?s.SW.cont:s.AO.coin,filters:L}),ge=Number(null===(k=U[q])||void 0===k?void 0:k.markPrice),{side:ye,buyOrderAmount:he,sellOrderAmount:be,unitAmount:ve,activatePriceWorkingType:xe}=i,Se=ye===b.hp.BUY,ke=Number(i.limitPrice),Pe=Se?he:be,Te=Number(i.triggerPrice),Ce=Number(i.activatePrice),we=Number(i.priceRate),Ie=(0,p.JN)({orderType:Q,activatePrice:Ce,stopPrice:Te,limitPrice:ke,lastTradePrice:me,activatePriceWorkingType:xe,markPrice:ge}),Me=ve&&!~ve.indexOf("%")?Number(ve):Number((0,p.ee)({unit:E,contractVal:z,price:Ie,orderAmount:Pe,stepSizePrecision:(0,b.Br)(Q)?se:oe,tickSizePrecision:ne,equalQtyPrecision:F})),Ee=e=>(0,x.w_)({askPrice:ue,bidPrice:de,orderPrice:ke,formType:Q,markPrice:ge,pricePrecision:B,isDelivery:I,type:e}),{buyCost:Ne,sellCost:Ze,buyOpenLost:Ae,sellOpenLost:Oe}=(0,p.l3)({positionMode:T,positions:j,symbol:q,leverage:$,buyOrderAmount:he,sellOrderAmount:be,orderType:Q,askPrice:ue,bidPrice:de,price:ke,markPrice:ge,pricePrecision:B,isDelivery:I,contractVal:z}),Re=(0,p.vY)({symbol:q,isDelivery:I,leverage:$,marginAsset:_,contractVal:z,positions:(0,h.xm)(j,K),balance:J.balance,assetIndexes:Y,assetMode:Z}),{BuyText:Ve,SellText:Le}=(0,p.ad)({positionMode:T,positionDirection:X,getFutI18n:w}),{valid:Fe,message:De}=(b.hp.BUY,(0,p.mv)({unit:E,orderAmount:Pe,price:Ie,contractVal:z,unitAmountPrecision:pe,orderAmountPrecision:fe,base:W,margin:_,minQty:D,minNotional:le,getFutI18n:w,isDelivery:I,messageType:"order-form-toast",reduceOnly:te,positionDirection:X}));if(!Fe)return void C({message:De,variant:"error"});const _e=()=>{let t=Q===l.Jm.POST_ONLY?l.Jm.LIMIT:Q;const o=i.triggerPriceWorkingType;Se?(o===b.gu.LAST_PRICE&&Te<me||o===b.gu.MARK_PRICE&&Te<ge)&&(t=t===l.Jm.STOP_LIMIT?l.Jm.TAKE_PROFIT_LIMIT:t,t=t===l.Jm.STOP_MARKET?l.Jm.TAKE_PROFIT_MARKET:t):(o===b.gu.LAST_PRICE&&Te>me||o===b.gu.MARK_PRICE&&Te>ge)&&(t=t===l.Jm.STOP_LIMIT?l.Jm.TAKE_PROFIT_LIMIT:t,t=t===l.Jm.STOP_MARKET?l.Jm.TAKE_PROFIT_MARKET:t);const s=(0,p.M6)({formData:(0,a.Z)((0,a.Z)({},i),{},{buyOrderAmount:Number((0,n.Jp)(i.buyOrderAmount).toFixed(fe,1)),sellOrderAmount:Number((0,n.Jp)(i.sellOrderAmount).toFixed(fe,1))}),orderType:t,positionDirection:X,timeInForce:Q===l.Jm.POST_ONLY?b.rb.POST_ONLY:ee,reduceOnly:te,enableAdvancedTPSL:A,isTPSLEnabled:re,priceProtection:O,symbol:q,positionMode:T});return"subOrderList"in s?r.futuresOrderForm.placeStrategy(s).then((t=>{if(t.success){var r;e&&e();const i=N?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};C((0,a.Z)({message:w("order-submitted",{defaultValue:""}),variant:"success"},i)),(0,p.kd)({symbol:q,id:null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.orderId,side:ye})}})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})):(I?(s.quantity*z/$).toFixed(2):(s.quantity*Number(s.price)/$).toFixed(2),`${s.side}`.toLowerCase(),r.futuresOrderForm.placeOrder((0,a.Z)((0,a.Z)({},s),{},{placeType:"order-form"})).then((t=>{if(t.success){var i;e&&e();const r=N?{anchorOrigin:{vertical:"top",horizontal:"right"}}:{};C((0,a.Z)({message:w("order-submitted",{defaultValue:""}),variant:"success"},r)),(0,p.kd)({symbol:q,id:null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.orderId,side:ye})}const{code:n}=t||{};return-4061===n&&r.preference.getPositionMode(),t})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))};(0,p.i)({orderType:Q,orderAmount:Pe,price:ke,priceRate:we,stopPrice:Te,hideMask:()=>m.T.emit(m.F.HIDE_MOBILE_MASK),orderConfirmation:P,showConfirm:()=>m.T.emit(m.F.SHOW_ORDER_CONFIRM_PANEL,{orderType:Q,placeOrder:_e,orderForm:{triggerPrice:Te,price:ke,buyQty:Me,sellQty:Me,side:ye,callbackRate:we,activationPrice:Ce,positionSide:(0,p.JO)({side:ye,positionDirection:X,positionMode:T}),buyCost:(0,n.GW)(Ne,ae,!0),sellCost:(0,n.GW)(Ze,ae,!0),tickSize:ne,limitStepSize:oe,marketStepSize:se,availableBalance:Re,takeProfitStopPrice:i.takeProfitStopPrice,takeProfitStopPriceWorkingType:i.takeProfitStopPriceWorkingType,stopLossStopPrice:i.stopLossStopPrice,stopLossStopPriceWorkingType:i.stopLossStopPriceWorkingType,strategySide:i.strategySide,oLastPrice:me},bCost:Ne,sCost:Ze,buyOpenLost:Ae,sellOpenLost:Oe,positionDirection:X,title:"",isDelivery:I,Cont:w("Cont"),contractVal:z,getAssumePrice:Ee}),placeOrder:_e})};return e=>{(0,i.F)()&&(P||T?k(T?"um":"cm"):r.futuresOrderForm.handleSubmit({formData:e,submitHandler:Z}))}}},"yU+F":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Bo});var a={};r.r(a),r.d(a,{PNL:()=>ki,PNLFormat:()=>Ri,ROE:()=>Pi,ROEFormat:()=>Vi,formPositionSize:()=>Ni,initialMargin:()=>Si,initialMarginFormat:()=>Oi,isLiqPriceInValid:()=>Zi,isLiqPriceInValidHEDGE:()=>Ai,liquidationPrice:()=>Ci,maxOpenCoin:()=>Ii,maxOpenQuantity:()=>wi,openPriceCoin:()=>Mi,openPriceUSDT:()=>Ei,targetPrice:()=>Ti});var i=r("/SIk"),n=r.n(i),o=r("pVAJ"),s=r("6Afj"),l=r("e5RN"),c=r("XhNN"),u=r("Vg22"),d=r("EPGa"),m=r("4xt1"),p=r("Tr4L");const f=e=>{const{t:t,i18n:r}=(0,p.$)(e);return{i18n:r,getI18n:(0,i.useCallback)(((e,r={},a=!0)=>{let i;"boolean"===typeof a?i=a?"trd-orderForm":"trd":"string"===typeof a&&(i=a);return t(`${i}-${e}`,r)}),[t])}};var g=r("Gbz3"),y=r("JlsY"),h=r("869M"),b=r("GpFh"),v=r("jDOd"),x=r("Hjl5"),S=r("nmYl"),k=r("4m5F");var P=r("LcTY"),T=n().createElement;const C={justifyContent:"space-between",position:"relative",width:"100%",alignContent:"center",fontSize:1,".balance":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"12px",color:"t.third",".value":{ml:"4px",color:"t.primary"}}},w=e=>{let{balance:t,dispatch:r,tradeType:a,side:n=d.g.BUY,mode:o=d.q0.NORMAL,transfer:s=!1,base:c,quote:u,marginAsset:m,getI18n:p,isLoggedIn:f,userAssets:y,isDelivery:h=!1}=e,k=(0,b.Z)(e,["balance","dispatch","tradeType","side","mode","transfer","base","quote","marginAsset","getI18n","isLoggedIn","userAssets","isDelivery"]);const{getI18n:w}=(0,g.yk)(),I=`${c}${u}`,M=h?c:a===d.xy.FUTURES||n===d.g.BUY?u:c,E=(y[c]||{}).free,N=(y[u]||{}).free,Z=(0,i.useCallback)((()=>{P.T.emit(P.F.OPEN_TRANSFER_MODAL,m)}),[m]);return(0,i.useEffect)((()=>{!async function({mode:e,asset:t,symbol:r,tradeType:a,delay:i=0,isLoggedIn:n}){new Promise((o=>{if(!n||e!==d.q0.BORROW)return o("0");setTimeout((()=>{(a===d.xy.CROSS?x.vX:S.T$)(t,r).then(o).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),i)}))}({mode:o,asset:M,isLoggedIn:f,symbol:I,tradeType:a})}),[h,o,M,I,E,N,f,a]),(0,i.useMemo)((()=>T(l.Z,Object.assign({sx:C},k),T("div",{className:"balance"},w("orderForm-avbl",{defaultValue:"Avbl"}),T("span",{className:"value"},f?t:"-"," ",M)),f&&s&&T(v.Z,{"data-testid":"orderform-transfer-button",color:"t.third",cursor:"pointer",fontSize:"16px",mx:"8px",sx:{flexShrink:0,"&:hover":{color:"t.primary"}},onClick:Z}))),[k,f,s,Z,M,t,w])},I=n().memo(w);var M=n().createElement;const E=({transfer:e=!0})=>{const[,[t,r]]=(0,o.z4)(),a=(0,g.G3)(),i=(0,y.c)(),{marginAsset:n}=(0,o.j2)(),s=(0,o.Li)(),l=(0,u.useDispatch)(),{getI18n:c}=f(),{getI18n:p}=(0,h.yk)(),b=(0,o._n)(),v=(0,o.dO)();return M(I,{tradeType:a?d.xy.DELIVERY:d.xy.FUTURES,balance:(0,m.Jp)(v).toFixed(i,1),dispatch:l,transfer:e,base:t,quote:r,getI18n:c,isLoggedIn:b,userAssets:s,isDelivery:a,getFutI18n:p,marginAsset:n})};var N=r("KM4q"),Z=r("kjyE"),A=r("9rpF"),O=r("l40n"),R=n().createElement;const V=(0,i.forwardRef)((({overlay:e},t)=>R(A.ZP,{ref:t,trigger:"hover",display:"inline-flex",flexDirection:"column",justifyContent:"space-between",height:"16px",pl:["0","12px"],color:"t.third",enablePortal:!0,overlay:e,sx:{cursor:"pointer",verticalAlign:"top",":hover":{color:"primary"}}},R(O.Z,{size:"20px"})))),L=n().memo(V);var F=r("OV9X"),D=n().createElement;const _=e=>{let{children:t,handle:r}=e,a=(0,b.Z)(e,["children","handle"]);return D(F.Z,Object.assign({className:"item",as:"span",onClick:r},a),t)},z=({getFutI18n:e,orderType:t})=>{switch(t){case d.Jm.LIMIT:return e("orderType-limit-tip",{defaultValue:"A limit order is an order to buy or sell at a specific price or better. Limit orders are not guaranteed to execute."});case d.Jm.MARKET:return e("orderType-market-tip",{defaultValue:"Market order is immediately matched to the best available market price."});case d.Jm.STOP_LIMIT:return e("STOPtip",{defaultValue:"Stop Limit"},"futures-trade");case d.Jm.STOP_MARKET:return e("STOP_MARKETtip",{defaultValue:"Stop Market"},"futures-trade");case d.Jm.TRAILING_STOP_MARKET:return e("TRAILING_STOP_MARKET_TIP",{},"futures-trade");case d.Jm.POST_ONLY:return e("limitType-postOnly-tip",{defaultValue:"limitType-postOnly-tip"});default:return null}};var B=r("yITN"),K=r("+4u2"),q=r("O94r"),W=r.n(q),H=n().createElement;const U={width:"100%",boxShadow:"none"},j={width:"100%"},$={flex:1,".tab":{borderTop:"2px solid",borderTopColor:"moduleBg",color:"t.third",padding:"8px 0px",backgroundColor:"moduleBg",textAlign:"center",borderBottom:"1px solid",borderBottomColor:"modalBg","&.active":{borderTop:"2px solid",borderTopColor:"primary",borderBottomColor:"transparent",borderRight:"1px solid",borderRightColor:"modalBg",backgroundColor:"popupBg",color:"t.primary","&.close":{borderLeft:"1px solid",borderLeftColor:"modalBg"}}}},G=e=>{const{getI18n:t}=(0,g.yk)(),r=t("Open",{defaultValue:"Open"}),a=t("Close",{defaultValue:"Close"}),[i]=(0,g.hN)(),[n,o]=(0,g.lE)(),s=(e,t,r)=>H("div",{className:W()({active:e,tab:!0,[r]:!0})},t);return i?H(B.Z,Object.assign({variant:"standard",defaultActiveKey:n,controlledKey:n,onChange:o,tabsSx:U,tabSx:$,sx:j},e),H(K.Z,{tab:e=>s(e,r,"open"),tabKey:d.RS.OPEN,"data-testid":"open"}),H(K.Z,{tab:e=>s(e,a,"close"),tabKey:d.RS.CLOSE,"data-testid":"close"})):null};var J=r("z29O"),Y=r("LHeJ"),Q=r("BY6O"),X=r("kZs2"),ee=r("Vnoa"),te=n().createElement;const re={position:"fixed",width:"100vw",height:"100vh",left:0,right:0,top:0,bottom:0,zIndex:999,mb:"sm"},ae={mb:"md"},ie=(0,Y.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),ne=(0,i.forwardRef)(((e,t)=>{const{getI18n:r}=(0,g.yk)(),{0:a,1:o}=(0,i.useState)({}),{defaultActiveKey:s="oc"}=a,{0:u,1:d}=(0,i.useState)(!1),m=ie((e=>e.visible)),p=ie((e=>e.setVisible)),f=ie((e=>e.setAssetMode)),y=(0,i.useCallback)((()=>{d(!1)}),[d]),h=(0,i.useCallback)((e=>{d(!0),o(e)}));(0,i.useImperativeHandle)(t,(()=>({showPreferencePanel:h}))),(0,i.useEffect)((()=>X.TB.on(X.FP.SHOW_PREFERENCE_PANEL,(e=>{h({defaultActiveKey:e})}))),[h]);const b=(0,g.$J)(),v=new Set,x=Object.values(b).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!v.has(t)&&(v.add(t),!0)}return!1})).length,S=(0,i.useMemo)((()=>({pb:0})),[]),k=(0,i.useMemo)((()=>({hidePreferencePanel:y})),[y]);return(0,i.useMemo)((()=>u||m?te(n().Fragment,null,te(Q.ZP,null,te(c.Z,{tx:"preference.dialog",variant:"container",sx:re},te(l.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},te(F.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),te(N.Z,{tx:"preference.header",variant:"close",onClick:y})),te(c.Z,{sx:{px:"sm"}},te(B.Z,{defaultActiveKey:s,variant:"trade-next",tabSx:S,tabsSx:ae,lazy:!0},te(K.Z,{tab:te(F.Z,{variant:"subtitle2"},r("order-confirmation",{defaultValue:"Order Confirmation"})),tabKey:"oc"},te(ee.OrderConfirmationForm,k)),te(K.Z,{tab:te(F.Z,{variant:"subtitle2"},r("position-mode",{defaultValue:"Position Mode"})),tabKey:"pm"},te(ee.PositionSideForm,k)),te(K.Z,{tab:te(F.Z,{variant:"subtitle2"},r("priceProtection",{defaultValue:"Price Protection"})),tabKey:"pp"},te(ee.PriceProtectionForm,k)),te(K.Z,{tab:te(F.Z,{variant:"subtitle2"},r("preferenceNotification",{defaultValue:"Notification"})),tabKey:"pn"},te(ee.NotificationForm,k)),te(K.Z,{tab:te(F.Z,{variant:"subtitle2"},r("assetMode",{defaultValue:"Asset Mode"})),tabKey:"am"},te(ee.AssetModeForm,Object.assign({setConfirmVisible:p,setAssetMode:f,isolatedPositionFlag:x},k))))))),te(ee.AssetModeDialog,{confirmVisible:m,setConfirmVisible:p})):null),[p,x,f,m,s,r,y,k,S,u])}));var oe=r("FOuV"),se=r("xpNn"),le=n().createElement;const ce=e=>{let{children:t}=e,r=(0,b.Z)(e,["children"]);return le(c.Z,Object.assign({variant:"dropdown",__css:{display:"flex",flexDirection:"column"}},r),t)},ue=({locale:e,base:t,quote:r,getFutI18n:a,futUrlConfig:i,isDelivery:o,showPreferencePanel:s})=>le(ce,null,le(_,{handle:()=>{let t=(0,Z.CN)(i.BUYING_URL,{locale:e,crypto:r});t=(0,Z.CN)(i.BUYING_URL_ELECTRON,{crypto:r}),window.open(t)}},a("buy-crypto",{defaultValue:"Buy Crypto"})),o?le(n().Fragment,null,le(_,{handle:()=>P.T.emit(P.F.OPEN_CONVERT_MODAL)},a("convert",{defaultValue:"Convert"})),le(_,{handle:()=>P.T.emit(P.F.OPEN_TRANSFER_MODAL,t)},a("transfer",{defaultValue:"Transfer"})),le(_,{handle:()=>s("oc")},a("preference",{defaultValue:"Preference"})),le(_,{handle:se.O},getI18n("trading-rules",{defaultValue:"Trading Rules"}))):le(n().Fragment,null,le(_,{handle:()=>window.location.href=(0,Z.CN)(i.DEPOSIT_URL,{locale:e,coin:r})},a("deposit",{defaultValue:"Deposit"})),le(_,{handle:()=>P.T.emit(P.F.OPEN_TRANSFER_MODAL,t)},a("transfer",{defaultValue:"Transfer"})),le(_,{handle:()=>s("oc")},a("preference",{defaultValue:"Preference"})),le(_,{handle:se.O},a("trading-rules",{defaultValue:"Trading Rules"})))),de=e=>le(c.Z,{lineHeight:"0"},e.isLoggedIn&&le(L,{overlay:le(ue,e)}),le(N.Z,{ml:"sm",color:"t.third",fontSize:"16px",onClick:()=>e.hideMask()})),me=()=>{const e=(0,g.G3)(),t=(0,o._n)(),{getI18n:r,i18n:{language:a}}=f(),[,[s,c]]=(0,o.z4)(),{getI18n:u}=(0,h.yk)(),d=(0,i.useRef)(null),{isMobile:m}=(0,o.Fs)(),{showPreferencePanel:p}=(0,g.r8)(),[y]=(0,g.hN)(),b=(0,i.useCallback)((()=>P.T.emit(P.F.HIDE_MOBILE_MASK)),[]),v=(0,i.useMemo)((()=>({alignItems:"center",justifyContent:"space-between",borderBottom:e=>`1px solid ${e.colors.newLine}`,width:"100%",py:y?"0px":"10px",pl:y?"0px":"16px",pr:"16px",bg:y?"moduleBg":"unset"})),[y]);return(0,i.useMemo)((()=>m?le(n().Fragment,null,le(l.Z,{sx:v,ref:d},y?le(G,{width:"248px"}):le(J.Z,{sx:{width:"248px"}}),le(de,{base:s,quote:c,locale:a,getI18n:r,getFutI18n:u,hideMask:b,isLoggedIn:t,futUrlConfig:oe.x,isDelivery:e,showPreferencePanel:p})),y?le(J.Z,{sx:{mt:"10px",mx:"16px"}}):le(G,null),le(ne,null)):null),[m,s,c,a,r,u,b,t,e,p,y])},pe=n().memo(me);var fe=r("5vwO"),ge=r("tLXD"),ye=r("NKCw"),he=r("//nZ"),be=r.n(he),ve=r("Uqe+"),xe=r("AHTf");const Se={callBackTip:"The callback rate is one condition for a trailing stop order, satisfied when the trigger price compared with the highest market price / lowest market price (or mark price) is greater than or equal to the callback rate.",activationPriceTip:"The activation price is one of the trigger conditions of the trailing stop order. If you do not fill in it, it will default to the latest price (marked price). When the market's highest / lowest price reaches or exceeds the activation price after the trailing stop order is submitted, the condition is consideredto be satisfied."};var ke=r("rdEq"),Pe=r("YkKT"),Te=r("b2zI"),Ce=r("COFI"),we=n().createElement;function Ie({value:e,unit:t,filters:r}){const{limitStepSize:a,tickSize:i}=(0,X.k7)({filters:r});let n;return t===k.AO.usdt&&e/1<i&&(n=i),(t===k.AO.coin||t===k.SW.cont)&&e/1<a&&(n=a),t===k.SW.coin&&e/1<i&&(n=i),n}function Me(){const{setFocus:e,setValue:t,getValues:r}=(0,ye.Gc)(),{filters:a}=(0,o.j2)(),[n]=(0,g.hN)(),[s]=(0,g.eY)(),[,l]=(0,g.lE)(),c=(0,o.c7)(),u=(0,o.PZ)(),p=(0,i.useCallback)((({payload:e,side:r})=>{var a,i;const{priceLevel:o,valueInput:{type:s="percentage",value:m}}=e,p=Number(o),{bids:f,asks:g}=u(Math.abs(p)-1),y=p>0?null===(a=f[0])||void 0===a?void 0:a.price:null===(i=g[0])||void 0===i?void 0:i.price,h=c(),b=y||h;t(Te.T.LIMIT_PRICE,b),t(Te.T.SIDE,r),l(n?d.RS.OPEN:d.RS.BOTH),t(Te.T.UNIT_AMOUNT,"percentage"===s?`${m}%`:m)}),[c,u,t,n,l]);return(0,i.useEffect)((()=>(0,Ce.GY)((async({name:e,payload:i})=>{switch(e){case Ce.Sn:setTimeout((()=>{p({payload:i,side:d.g.BUY})}),10);break;case Ce.Nn:setTimeout((()=>{p({payload:i,side:d.g.SELL})}),10);break;case Ce.ZA:setTimeout((()=>{const e=r(Te.T.LIMIT_PRICE),{valueInput:{type:t,value:a}}=i;let n;if(e){if("percentage"===t)n=(0,m.Jp)(e,(0,m.PD)(1,a/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");n=(0,m.PD)(e,a)}P.T.emit(P.F.UPDATE_ORDER_PRICE_INPUT,n.toFixed())}else n=c()}),10);break;case Ce.Dc:setTimeout((()=>{const e=r(Te.T.LIMIT_PRICE),{valueInput:{type:t,value:a}}=i;let n;if(e){if("percentage"===t)n=(0,m.Jp)(e,(0,m.h9)(1,a/100));else{if("amount"!==t)throw new Error("Invalid event type. Expected to be percentage or amount");n=(0,m.h9)(e,a)}P.T.emit(P.F.UPDATE_ORDER_PRICE_INPUT,n.toFixed())}else n=c()}),10);break;case Ce.Jt:setTimeout((()=>{const{valueInput:{type:e,value:n}}=i;let o=r(Te.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==o.indexOf("%")){const t=o.split("%")[0],r=(0,m.PD)(t,n);e=r.gt(100)?"0":r.toFixed()}t(Te.T.UNIT_AMOUNT,`${e}%`),P.T.emit(P.F.SET_SLIDER_AMOUNT,e)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{(isNaN(o)||"NaN"===o)&&(o="0");const e=Ie({value:n,unit:s,filters:a});let r=(0,m.PD)(o,e||n).toFixed();(Number(r)<0||isNaN(Number(r)))&&(r="0"),t(Te.T.UNIT_AMOUNT,r)}}}),10);break;case Ce.SA:setTimeout((()=>{const{valueInput:{type:e,value:n}}=i;let o=r(Te.T.UNIT_AMOUNT);if("percentage"===e){let e=0;if(-1!==o.indexOf("%")){const t=o.split("%")[0],r=(0,m.h9)(t,n);e=r.lt(0)?"0":r.toFixed()}P.T.emit(P.F.SET_SLIDER_AMOUNT,e),t(Te.T.UNIT_AMOUNT,`${e}%`)}else{if("amount"!==e)throw new Error("Invalid event type. Expected to be percentage or amount");{let e;(isNaN(o)||"NaN"===o)&&(o="0");const r=Ie({value:n,unit:s,filters:a});e=(0,m.h9)(o,r||n).toFixed(),(Number(e)<0||isNaN(Number(e)))&&(e="0"),t(Te.T.UNIT_AMOUNT,e)}}}),10);break;case Ce.aV:setTimeout((()=>{n&&l(d.RS.OPEN)}),10);break;case Ce.hr:setTimeout((()=>{n&&l(d.RS.CLOSE)}),10)}}))),[p,n,l,a,t,e,r,s,c]),null}function Ee(){return we(Me,null)}var Ne=r("IBbm"),Ze=n().createElement;const Ae=e=>{let{fieldName:t,required:r=!0,error:a}=e,i=(0,b.Z)(e,["fieldName","required","error"]);const{field:{onChange:n},fieldState:{invalid:o}}=(0,ye.bc)({name:t,rules:{required:r}}),s=(0,ye.qo)({name:t});return Ze(Ne.Q,Object.assign({},i,{value:s,onChange:n,error:a||o,target:t}))};var Oe=n().createElement;const Re={color:"t.yellow",cursor:"pointer",maxWidth:"40px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Ve=({onClick:e})=>{const{getI18n:t}=(0,g.yk)();return Oe(ke.m,{tip:t("orderForm-lastPriceTip",{defaultValue:"Last price, place a current price order."}),hideUnderLine:!0},Oe(F.Z,{sx:Re,onClick:e},t("orderForm-lastPrice",{defaultValue:"Last"})))};var Le=n().createElement;const Fe=({fieldName:e,prefix:t,disabled:r,required:a,getLastTracePrice:n})=>{const{setValue:s}=(0,ye.Gc)(),c=(0,o.ih)(),[,u]=(0,o.z4)(),[,d]=u;(0,i.useEffect)((()=>P.T.on(P.F.UPDATE_ORDER_PRICE_INPUT,(t=>{s(e,t)}))),[e,s]);const m=Le(l.Z,{flexDirection:"row"},Le(Ve,{onClick:()=>{s(e,n())}}),Le(F.Z,{ml:"8px",color:"t.primary"},d));return Le(Ae,{fieldName:e,prefix:t,suffix:m,precision:c,maxLength:k.ze,disabled:r,required:a})};var De=r("X46w"),_e=r("zZ5f"),ze=r("vt3k"),Be=n().createElement;const Ke=({getI18n:e,registerTestId:t="orderform_register",loginTestId:r="orderform_login"})=>{const{isLoading:a}=(0,o.f0)();return(0,i.useMemo)((()=>a?Be(c.Z,{fontSize:"1",sx:{bg:"inputBg"}},Be(l.Z,{alignItems:"center",justifyContent:"center",sx:{height:"40px",position:"relative",borderRadius:"4px"}},Be(_e.Z,{inner:!0,fullScreen:!0,show:!0}))):Be(c.Z,{"data-testid":"register-login-buttons"},Be(ze.Yr,null,Be(De.Z,{as:"a",width:1,py:"10px",variant:"primary","data-testid":t},e("register"))),Be(ze.TE,null,Be(De.Z,{as:"a",width:1,mt:"12px",py:"10px",bg:"line",colorStyle:"secondary","data-testid":r},e("login"))))),[a,e])},qe={justifyContent:"space-between",marginTop:"8px",color:"t.third",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",".content":{flex:1,minWidth:0,marginLeft:"2px",color:"t.primary",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",textAlign:"right"}},We={justifyContent:"space-between",fontSize:"12px",marginTop:"8px",".left, .right":{display:"flex",flexWrap:"wrap",width:"48.47%",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px",color:"t.third"},".left":{justifyContent:"flex-start"},".right":{justifyContent:"flex-end"},".content":{marginLeft:"2px",color:"t.primary"},".truncated":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}};var He=n().createElement;const Ue=({label:e,content:t})=>He(l.Z,{sx:qe},He("div",null,e),He("div",{className:"content"},t));var je=n().createElement;const $e=({leftLabel:e,rightLabel:t,leftContent:r,rightContent:a})=>je(l.Z,{sx:We},je("div",{className:"left"},je("div",{className:"truncated"},e),je("div",{className:"content truncated"},r)),je("div",{className:"right"},je("div",{className:"truncated"},t),je("div",{className:"content truncated"},a," ")));var Ge=n().createElement;const Je={height:1,border:0,my:"16px",bg:"newLine"},Ye=()=>Ge(c.Z,{as:"hr",sx:Je});var Qe=n().createElement;const Xe={flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},et=({children:e})=>Qe(l.Z,{sx:Xe},e);var tt=n().createElement;var rt=n().createElement;var at=n().createElement;var it=n().createElement;var nt=n().createElement;var ot=n().createElement;var st=r("a2gA"),lt=n().createElement;const ct={justifyContent:"center",alignItems:"center",width:"40px",height:"40px",marginLeft:"6px",bg:"transInputBG",borderRadius:"4px",cursor:"pointer",fontSize:"14px",color:"t.third","&:hover":{bg:"line",color:"t.primary"}},ut=({value:e,onClick:t})=>lt(l.Z,{sx:ct,onClick:()=>{t(e)}},e,"%");var dt=n().createElement;const mt={flexDirection:"row",mt:"10px",".callback-rate-input":{mt:0,flex:1},".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"28px",px:"4px"}},pt=({fieldName:e,required:t})=>{const{setValue:r}=(0,ye.Gc)(),{getI18n:a}=(0,g.yk)(),i=dt(ke.m,{className:"prefix-tooltip-container",tip:a("callbackRateTip",{defaultValue:Se.callBackTip})},dt(st.u,null,a("callbackRate",{defaultValue:"Callback Rate"}))),n=t=>{r(e,t)};return dt(l.Z,{sx:mt},dt(Ae,{className:"callback-rate-input",fieldName:e,prefix:i,suffix:dt(F.Z,{color:"t.primary"},"%"),precision:1,maxNumberValue:5,maxLength:k.ze,required:t}),dt(ut,{value:"1",onClick:n}),dt(ut,{value:"2",onClick:n}))},ft=({lastPriceType:e})=>{const[t,r,a,i]=(0,ye.qo)({name:[Te.T.LIMIT_PRICE,Te.T.TRIGGER_PRICE,Te.T.ACTIVATE_PRICE,Te.T.ACTIVATE_PRICE_WORKING_TYPE]}),[n]=(0,g.K5)(),s=n===d.Jm.MARKET,l=n===d.Jm.TRAILING_STOP_MARKET,c="trade"===e,u=(0,o.uH)(s&&c||l&&!a&&i===oe.gu.LAST_PRICE),{bidPrice:m,askPrice:p}=(0,o.y$)(s&&!c),f=(0,o.aJ)(l&&!a&&i===oe.gu.MARK_PRICE);let y;switch(n){case d.Jm.LIMIT:case d.Jm.STOP_LIMIT:case d.Jm.TAKE_PROFIT_LIMIT:case d.Jm.POST_ONLY:y=t;break;case d.Jm.MARKET:switch(e){case"trade":y=u;break;case"bid":y=m;break;case"ask":y=p}break;case d.Jm.STOP_MARKET:case d.Jm.TAKE_PROFIT_MARKET:y=r;break;case d.Jm.TRAILING_STOP_MARKET:y=a||(i===oe.gu.MARK_PRICE?f:u)}return Number(y)||0},gt=({side:e})=>{const t="buy"===e?Te.T.BUY_ORDER_AMOUNT:Te.T.SELL_ORDER_AMOUNT,r=(0,ye.qo)({name:t});return Number(r)};var yt=r("GEp0"),ht=r("66kR");const bt={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"4px 16px",fontSize:"12px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}},vt={height:"100%",".label":{display:"flex",alignItems:"center",height:"100%",color:"t.primary",cursor:"pointer","&.disabled":{cursor:"not-allowed"}},".label-text":{maxWidth:"48px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}};var xt=n().createElement;function St({options:e,value:t,handleClick:r}){return xt(c.Z,{sx:bt,name:"orderform-select-menu"},e.map((({label:e,value:a})=>xt("div",{key:String(a),className:W()({active:a===t,option:!0}),onClick:()=>{r(a)}},e))))}function kt(e){var t;let{name:r,options:a,disabled:i,value:n,onChange:o}=e,s=(0,b.Z)(e,["name","options","disabled","value","onChange"]);const l=(null===(t=a.find((e=>e.value===n)))||void 0===t?void 0:t.label)||"";return xt(A.ZP,Object.assign({},s,{sx:vt,trigger:"click",disabled:i,enablePortal:!0,overlay:St({options:a,value:n,handleClick:o})}),(({name:e,label:t,disabled:r})=>{const a=e?`${e}-select-button`:"TriggerSelect";return xt(yt.Z,{className:W()({label:!0,disabled:r}),variant:"small","data-testid":a},xt("div",{className:"label-text"},t),!r&&xt(ht.Z,{color:"#76808F",size:16}))})({name:r,label:l,disabled:i}))}var Pt=n().createElement;const Tt=()=>{const[,e]=(0,o.z4)(),t=(0,o.Pc)(),{isExistFutureAccount:r}=t,{isLoggedIn:a}=(0,o.f0)(),{setValue:n}=(0,ye.Gc)(),s=(0,u.useDispatch)(),{getI18n:l}=(0,g.yk)(),{baseAsset:c,marginAsset:d}=(0,o.j2)(),[m]=(0,g.eY)(),p=(0,g.G3)(),f=(0,i.useCallback)((async e=>{await s.preference.changeUnit(e),n(Te.T.UNIT_AMOUNT,"")}),[s]),y=a&&r,h=(0,i.useMemo)((()=>p?[{label:l("Cont",{defaultValue:"Cont"}),value:k.SW.cont},{label:e[0],value:k.SW.coin}]:[{label:d,value:k.AO.usdt},{label:c,value:k.AO.coin}]),[p,l,e,d,c]);return Pt(kt,{name:"unit",value:m,options:h,onChange:f,disabled:!y})};var Ct=r("NQFm"),wt=n().createElement;const It=({fieldName:e,prefix:t,required:r})=>{var a;const i=(0,g.G3)(),n=(0,o.XY)(),s=(0,o.XY)(i?k.SW.cont:k.AO.coin),{getI18n:l}=(0,g.yk)(),{contractVal:c,marginAsset:u,minQty:d,filters:m}=(0,o.j2)(),p=null===(a=m.find(Ct.Jv))||void 0===a?void 0:a.notional,[,[f,y]]=(0,o.z4)(),[h]=(0,g.lE)(),[b]=(0,g.KK)(),[v]=(0,g.eY)(),x=v===k.SW.cont?`1 ${l("Cont",{defaultValue:"Cont"})} = ${c} ${y}`:"",S=(0,ye.qo)({name:e}),P=ft({lastPriceType:"trade"}),T=gt({side:"buy"}),C=Boolean(S),{message:w,valid:I}=(0,X.mv)({unit:v,orderAmount:T,price:P,contractVal:c,unitAmountPrecision:n,orderAmountPrecision:s,base:f,margin:u,minQty:d,minNotional:p,isDelivery:i,getFutI18n:l,reduceOnly:b,positionDirection:h}),{isSubmitted:M}=(0,ye.cl)(),E=M&&!I&&C;return wt(Ae,{fieldName:e,prefix:t,suffix:wt(Tt,null),precision:n,maxLength:k.ze,required:r,placeholder:x,error:E,errorText:E?w:"",infoText:C?w:""})};var Mt=r("eOsi"),Et=n().createElement;const Nt=e=>{let{fieldName:t}=e,r=(0,b.Z)(e,["fieldName"]);const{setValue:a}=(0,ye.Gc)(),n=(0,ye.qo)({name:t}),o=(0,i.useCallback)((e=>a(t,e)),[a,t]);return Et(kt,Object.assign({},r,{name:t,value:n,onChange:o}))};var Zt=n().createElement;const At=({priceFieldName:e,workingTypeFieldName:t,prefix:r,required:a,disabled:n,onFocus:o})=>{const s=(0,Mt.i)(),{getI18n:l}=(0,g.yk)(),c=(0,i.useMemo)((()=>[{label:l("advancedStrategy-lastPrice",{defaultValue:"Last"}),value:oe.gu.LAST_PRICE},{label:l("advancedStrategy-markPrice",{defaultValue:"Mark"}),value:oe.gu.MARK_PRICE}]),[l]);return Zt(Ae,{fieldName:e,prefix:r,suffix:Zt(Nt,{fieldName:t,options:c,disabled:n}),precision:s,maxLength:k.ze,required:a,disabled:n,onFocus:o})};var Ot=r("nnm9"),Rt=r.n(Ot),Vt=r("FYBm"),Lt=r("+Ai6"),Ft=r("eXOl"),Dt=r("vSWf"),_t=r("/w94"),zt=r("eeZR");const Bt=(0,i.forwardRef)((({},e)=>{const[t]=(0,g.KK)(),r=ft({lastPriceType:"trade"}),{maxBuyOrderAmount:a,maxSellOrderAmount:n}=(0,zt.V)({reduceOnly:t,orderPrice:r});return(0,i.useImperativeHandle)(e,(()=>({buyMaxAmount:a,sellMaxAmount:n}))),null})),Kt={paddingTop:"8px","> div":{px:["","","0px"]},".bn-slider-container":{"> label.bn-slider-radio-tooltip":{bg:"transparent",color:"t.secondary",fontSize:"14px"},".bn-slider-stepper":{bg:"popupBg"},".bn-slider-progress-bar, .bn-slider-progress-stepper":{bg:"t.secondary"},".bn-slider-radio-button":{borderColor:"t.secondary"},".bn-slider-progress-stepper, .bn-slider-stepper:hover, .bn-slider-radio-button:after":{borderColor:"popupBg"}}};var qt=n().createElement;const Wt={steppers:[0,25,50,75,100],range:{min:0,max:100},unit:"%"},Ht=({amountFieldName:e,amountFieldValueType:t,showUnitAmount:r})=>{const{getI18n:a}=(0,g.yk)(),n=(0,i.useRef)({buyMaxAmount:0,sellMaxAmount:0}),{setValue:o}=(0,ye.Gc)(),s=(0,Lt.m)(),l=(0,ye.qo)({name:e}),{0:u,1:d}=(0,i.useState)(""),{0:m,1:p}=(0,i.useState)(""),f="percentage"===t,y=l.includes("%"),{0:h,1:b}=(0,i.useState)(0),v=(0,ge.Z)(h),[x]=(0,g.lE)(),S=(0,ge.Z)(x),k=ft({lastPriceType:"trade"}),[P]=(0,g.K5)(),{stepSizePrecision:T,tickSizePrecision:C,equalQtyPrecision:w}=(0,Dt.q)({orderType:P}),[I]=(0,g.eY)(),{contractVal:M}=(0,Ft.j2)(),E=(0,i.useRef)(Rt());(0,i.useEffect)((()=>{E.current=()=>{const e=(0,_t.e)({unit:I,contractVal:M,price:k,orderAmount:n.current.buyMaxAmount*h/100,stepSizePrecision:T,tickSizePrecision:C,equalQtyPrecision:w}),t=(0,_t.e)({unit:I,contractVal:M,price:k,orderAmount:n.current.sellMaxAmount*h/100,stepSizePrecision:T,tickSizePrecision:C,equalQtyPrecision:w});d(e),p(t)}}),[M,w,k,h,T,C,I]);const N=(0,i.useCallback)((()=>{b(0),d(""),p("")}),[]);return(0,i.useEffect)((()=>X.TB.on(X.FP.SET_SLIDER_AMOUNT,b)),[]),(0,i.useEffect)((function(){x===S&&h===v||E.current()}),[x,S,h,v]),(0,i.useEffect)((function(){f||N()}),[s,f,N]),(0,i.useEffect)((function(){f&&!y&&N()}),[y,f,N]),(0,i.useEffect)((function(){f&&o(e,`${h}%`)}),[e,f,h,o]),(0,i.useEffect)((function(){switch(t){case"buyUnitAmount":o(e,u);break;case"sellUnitAmount":o(e,m)}}),[e,t,u,h,m,o]),qt(c.Z,{sx:Kt},qt(Bt,{ref:n}),qt(Vt.Z,Object.assign({},Wt,{progress:h,onChange:b,px:"0px"})),r&&qt($e,{leftLabel:a("Buy",{defaultValue:"Buy"}),rightLabel:a("Sell",{defaultValue:"Sell"}),leftContent:`${u} ${s}`,rightContent:`${m} ${s}`}))},Ut=({fieldName:e,unitAmountFieldName:t,side:r})=>{const{setValue:a}=(0,ye.Gc)(),[,[n]]=(0,o.z4)(),s=(0,o.XY)(n),{contractVal:l}=(0,o.j2)(),[c]=(0,g.eY)(),[u]=(0,g.KK)(),d=ft({lastPriceType:"trade"}),{maxBuyOrderAmount:p,maxSellOrderAmount:f}=(0,o.V2)({reduceOnly:u,orderPrice:d}),y=(0,ye.qo)({name:t})||0,h="string"===typeof y&&~(null===y||void 0===y?void 0:y.indexOf("%")),b="buy"===r?p:f,v=Number((0,m.yd)(h?parseFloat(y)/100*b:(({unit:e,contractVal:t,price:r,unitAmount:a})=>{const i=e===k.SW.coin,n=e===k.AO.usdt;if(i){const e=Number(t);return r?(0,m.Jp)(a/e,r):0}return n?r?a/r:0:a})({unit:c,contractVal:l,price:d,unitAmount:y}),s,1));return(0,i.useEffect)((()=>{a(e,v)}),[e,v,a]),null};var jt=r("tS/l"),$t=r("H3ec"),Gt=r("HWFi"),Jt=n().createElement;const Yt={color:"t.primary"},Qt=e=>{let{label:t,disabled:r,className:a,tooltipText:i,tooltipLearnMoreLink:n,checked:o,onChange:s}=e,l=(0,b.Z)(e,["label","disabled","className","tooltipText","tooltipLearnMoreLink","checked","onChange"]);const c=e=>{e.preventDefault()},u=Jt(F.Z,{fontSize:12,onClick:c},t);return Jt(yt.Z,{className:a,width:"auto",mt:16},Jt(Gt.Z,Object.assign({},l,{onChange:e=>{s(e.currentTarget.checked)},checked:o,disabled:r})),i?Jt(ke.m,{labelSx:Yt,tip:Jt("span",{onClick:c},i),learnMoreLink:n},u):u)};var Xt=r("Z8nA"),er=n().createElement;const tr=e=>{let{fieldName:t,value:r,label:a,disabled:i}=e,n=(0,b.Z)(e,["fieldName","value","label","disabled"]);const{setValue:o}=(0,ye.Gc)(),s=(0,ye.qo)({name:t})===r;return er(Xt.ZP,Object.assign({},n,{value:r,name:t,label:a,disabled:i,checked:s,onChange:e=>o(t,e)}))};var rr=n().createElement;const ar=({priceFieldName:e,orderTypeFieldName:t,prefix:r,disabled:a,required:n,limitOptionValue:o,marketOptionValue:s})=>{const l=(0,Mt.i)(),{getI18n:c}=(0,g.yk)(),{setValue:u,getValues:d}=(0,ye.Gc)(),m=(0,i.useRef)(d(e)),p=(0,ye.qo)({name:t})===s,f=(0,i.useMemo)((()=>[{label:c("limit",{defaultValue:"Limit"}),value:o},{label:c("market",{defaultValue:"Market"}),value:s}]),[c,o,s]);return(0,i.useEffect)((function(){p?(m.current=d(e),u(e,"")):u(e,m.current)}),[d,p,e,u]),rr(Ae,{fieldName:e,prefix:r,suffix:rr(Nt,{fieldName:t,options:f,disabled:a}),precision:l,maxLength:k.ze,placeholder:p?c("advancedStrategy-marketPrice",{defaultValue:"Market Price"}):"",disabled:p||a,required:n})};var ir=n().createElement;const nr={"> .percent-input":{width:"84px",marginLeft:"6px",".bn-input-prefix":{display:"none"},".bn-input-suffix":{ml:"2px"}}},or=({type:e,entryPrice:t,strategySideFieldName:r,stopPriceFieldName:a,stopPriceWorkingTypeFieldName:n,disabled:o,required:s})=>{const{getI18n:c}=(0,g.yk)(),{setValue:u}=(0,ye.Gc)(),d=(0,Mt.i)(),{0:p,1:f}=(0,i.useState)(""),y=(0,i.useRef)(null),[h,b]=(0,ye.qo)({name:[r,a]}),v="takeProfit"===e;(0,i.useEffect)((()=>{if(!t||!p||"pnlPercent"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1+r*e/100))({strategySide:h,entryPrice:t,pnlPercent:Number(p)}):(({strategySide:e,entryPrice:t,pnlPercent:r})=>t*(1-r*e/100))({strategySide:h,entryPrice:t,pnlPercent:Number(p)});u(a,e<0?"0":(0,m.uf)(e,d).replace(/,/g,""))}),[t,v,p,d,u,a,h]),(0,i.useEffect)((()=>{if(!t||!b||"stopPrice"!==y.current)return;const e=v?(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100/t)({strategySide:h,entryPrice:t,stopPrice:b}):(({strategySide:e,entryPrice:t,stopPrice:r})=>e*(r-t)*100*-1/t)({strategySide:h,entryPrice:t,stopPrice:b});f(e<0?"0":(0,m.uf)(e,1))}),[t,v,b,h]);const x=v?c("advancedStrategy-takeProfitStopPrice",{defaultValue:"TP"}):c("advancedStrategy-stopLossStopPrice",{defaultValue:"SP"}),S=v?c("advancedStrategy-gain",{defaultValue:"Gain"}):c("advancedStrategy-loss",{defaultValue:"Loss"});return ir(l.Z,{sx:nr},ir(At,{prefix:x,priceFieldName:a,workingTypeFieldName:n,disabled:o,required:s,onFocus:()=>y.current="stopPrice"}),ir(Ne.Q,{className:"percent-input",precision:1,suffix:"%",value:p,onChange:f,onFocus:()=>y.current="pnlPercent",placeholder:S,disabled:o,target:v?"gain":"loss"}))};var sr=r("4Dm0"),lr=n().createElement;const cr=({qty:e,contractSize:t,entryPrice:r,stopPrice:a,side:i,precision:n})=>r&&a&&t&&e?(0,m.uf)(t*e*i*(1/r-1/a),n):"-",ur=({qty:e,entryPrice:t,stopPrice:r,side:a,precision:i})=>t&&r&&e?(0,m.uf)(e*a*(r-t),i):"-",dr={width:"100%",mt:"12px",fontSize:"12px",lineHeight:"16px","> .row":{display:"flex",justifyContent:"space-between","> .label":{color:"t.third"},"&.stop-pnl-row":{mt:"6px"}}},mr=({takeProfitStopPrice:e,takeProfitPrice:t,takeProfitOrderType:r,stopLossStopPrice:a,stopLossPrice:i,stopLossOrderType:n,entryPrice:s,side:l})=>{const{getI18n:u}=(0,h.yk)(),{contractVal:m=1,marginAsset:p,pricePrecision:f}=(0,o.j2)(),g=gt({side:"buy"}),y=gt({side:"sell"});let b="-",v="-";return(0,sr.G)()?(b=cr({entryPrice:+s,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:l,qty:1===l?+g:+y,contractSize:m,precision:f}),v=cr({entryPrice:+s,stopPrice:n===d.Jm.STOP_LIMIT?+i:+a,side:l,qty:1===l?+g:+y,contractSize:m,precision:f})):(b=ur({entryPrice:+s,stopPrice:r===d.Jm.TAKE_PROFIT_LIMIT?+t:+e,side:l,qty:1===l?+g:+y,precision:f}),v=ur({entryPrice:+s,stopPrice:n===d.Jm.STOP_LIMIT?+i:+a,side:l,qty:1===l?+g:+y,precision:f})),lr(c.Z,{sx:dr},lr("div",{className:"row"},lr("div",{className:"label"},u("advancedStrategy-exitPNL")),lr("div",{className:"value"},b," ",p)),lr("div",{className:"row stop-pnl-row"},lr("div",{className:"label"},u("advancedStrategy-stopPNL")),lr("div",{className:"value"},v," ",p)))};var pr=n().createElement;const fr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:i,stopLossPriceFieldName:o,stopLossStopPriceFieldName:s,stopLossStopPriceWorkingTypeFieldName:l,stopLossOrderTypeFieldName:c})=>{const{getI18n:u}=(0,g.yk)(),[m]=(0,g.t1)(),{isMobile:p}=(0,jt.F)(),[f]=(0,g.KK)(),y=f,[h,b,v,x,S,k,P]=(0,ye.qo)({name:[e,t,r,i,o,s,c]}),T=ft({lastPriceType:h===oe.O6.LONG?"ask":"bid"});return m&&!p?pr(n().Fragment,null,pr(or,{type:"takeProfit",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:r,stopPriceWorkingTypeFieldName:a,disabled:y,required:!1}),pr(ar,{prefix:u("advancedStrategy-takeProfitPrice",{defaultValue:"TP Price"}),priceFieldName:t,orderTypeFieldName:i,limitOptionValue:d.Jm.TAKE_PROFIT_LIMIT,marketOptionValue:d.Jm.TAKE_PROFIT_MARKET,disabled:y,required:!1}),pr(or,{type:"stopLoss",entryPrice:T,strategySideFieldName:e,stopPriceFieldName:s,stopPriceWorkingTypeFieldName:l,disabled:y,required:!1}),pr(ar,{prefix:u("advancedStrategy-stopLossPrice",{defaultValue:"SL Price"}),priceFieldName:o,orderTypeFieldName:c,limitOptionValue:d.Jm.STOP_LIMIT,marketOptionValue:d.Jm.STOP_MARKET,disabled:y,required:!1}),pr(mr,{takeProfitPrice:b,takeProfitStopPrice:v,takeProfitOrderType:x,stopLossPrice:S,stopLossStopPrice:k,stopLossOrderType:P,entryPrice:T,side:h})):pr(n().Fragment,null,pr(At,{prefix:u("takeProfit",{defaultValue:"Take Profit"}),priceFieldName:r,workingTypeFieldName:a,required:!1,disabled:y}),pr(At,{prefix:u("stopLoss",{defaultValue:"Stop Loss"}),priceFieldName:s,workingTypeFieldName:l,required:!1,disabled:y}))},gr={flexDirection:"row",justifyContent:"space-between",height:"16px",".tpsl-checkbox":{mt:0},".side-radio":{color:"t.primary",".radio-text":{fontSize:"12px",lineHeight:"16px"},"&.short-side-radio":{ml:"16px"}}};var yr=n().createElement;const hr=({strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:n,stopLossPriceFieldName:o,stopLossStopPriceFieldName:s,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u,showSideRadioButtons:d})=>{const m=(0,$t.tZ)(),{reset:p,getValues:f}=(0,ye.Gc)(),{getI18n:y}=(0,g.yk)(),[h]=(0,g.t1)(),{isMobile:b}=(0,jt.F)(),[v]=(0,g.KK)(),x=v,[S,k]=(0,g.uD)(),P=S&&h&&!b,T=(0,i.useCallback)((e=>{k(e),e||p((0,fe.Z)((0,fe.Z)({},f()),be()(Te.U,[r,t,o,s])))}),[]);return yr("div",null,yr(l.Z,{sx:gr},yr(Qt,{className:"tpsl-checkbox",tooltipText:y("limitType-strategyOrder-tip",{defaultValue:""}),tooltipLearnMoreLink:(0,X.CN)(xe.Wh.TP_SL,{locale:m}),label:y("limitType-strategyOrder",{defaultValue:"TP/SL"}),disabled:x,checked:S,onChange:T}),P&&d&&yr(l.Z,{flexDirection:"row"},yr(tr,{className:"side-radio",fieldName:e,value:oe.O6.LONG,label:yr("span",{className:"radio-text"},y("advancedStrategy-long",{defaultValue:"Long"})),disabled:x}),yr(tr,{className:"side-radio short-side-radio",fieldName:e,value:oe.O6.SHORT,label:yr("span",{className:"radio-text"},y("advancedStrategy-short",{defaultValue:"Short"})),disabled:x}))),S&&yr(fr,{strategySideFieldName:e,takeProfitPriceFieldName:t,takeProfitStopPriceFieldName:r,takeProfitStopPriceWorkingTypeFieldName:a,takeProfitOrderTypeFieldName:n,stopLossPriceFieldName:o,stopLossStopPriceFieldName:s,stopLossStopPriceWorkingTypeFieldName:c,stopLossOrderTypeFieldName:u}))};var br=r("k2tD"),vr=n().createElement;const xr=()=>{const e=(0,i.useRef)(document.querySelector('div[name="orderForm"]')),t=(0,o.tZ)(),{getI18n:r}=(0,g.yk)(),a=r("cost",{defaultValue:"Cost"}),n=r("costTip",{defaultValue:"The margin required to execute this order. Reducing a position does not cost margin."});return vr(ke.m,{tip:n,learnMoreLink:(0,X.CN)(xe.Wh.COST,{locale:t}),placement:"bottom",container:e.current},a)};var Sr=n().createElement;const kr=({side:e,price:t,buyOrderAmount:r,sellOrderAmount:a})=>{const n=(0,i.useMemo)((()=>Sr(xr,null)),[]),{marginAsset:s}=(0,o.j2)(),{buyOrderCost:l,sellOrderCost:c}=(0,o.E4)({orderPrice:t,buyOrderAmount:r,sellOrderAmount:a});switch(e){case"buy":return Sr(Ue,{label:n,content:`${l} ${s}`});case"sell":return Sr(Ue,{label:n,content:`${c} ${s}`});case"both":return Sr($e,{leftLabel:n,rightLabel:n,leftContent:`${l} ${s}`,rightContent:`${c} ${s}`});default:return null}},Pr=({side:e})=>{const t=(0,i.useMemo)((()=>Sr(xr,null)),[]),{marginAsset:r}=(0,o.j2)(),a=(0,g.G3)()?oe.vQ.delivery.pricePrecision:oe.vQ.USDT.pricePrecision,n=(0,i.useRef)((0,br.GW)(0,a,!0)),s=(0,i.useRef)((0,br.GW)(0,a,!0));switch(e){case"buy":return Sr(Ue,{label:t,content:`${n.current} ${r}`});case"sell":return Sr(Ue,{label:t,content:`${s.current} ${r}`});case"both":return Sr($e,{leftLabel:t,rightLabel:t,leftContent:`${n.current} ${r}`,rightContent:`${s.current} ${r}`});default:return null}},Tr=({side:e})=>{const t=ft({lastPriceType:"trade"}),r=gt({side:"buy"}),a=gt({side:"sell"}),[i]=(0,g.hN)(),[o]=(0,g.lE)(),s=!i||o===d.RS.OPEN,l=r>0||a>0;return Sr(n().Fragment,null,s&&l?Sr(kr,{side:e,price:t,buyOrderAmount:r,sellOrderAmount:a}):Sr(Pr,{side:e}))};var Cr=n().createElement;const wr=({side:e})=>{const{getI18n:t}=(0,g.yk)(),r=t("Max",{defaultValue:"Max"}),a=(0,o.mA)(),[i]=(0,o.z4)(),[n]=(0,g.K5)(),[s]=(0,g.eY)(),{contractVal:l}=(0,o.j2)(),c=ft({lastPriceType:"trade"}),[u]=(0,g.KK)(),{maxBuyOrderAmount:d,maxSellOrderAmount:m}=(0,o.V2)({reduceOnly:u,orderPrice:c}),{stepSizePrecision:p,tickSizePrecision:f,equalQtyPrecision:y}=(0,Dt.q)({orderType:n}),h=(0,_t.e)({unit:s,contractVal:l,price:c,orderAmount:d,stepSizePrecision:p,tickSizePrecision:f,equalQtyPrecision:y}),b=(0,_t.e)({unit:s,contractVal:l,price:c,orderAmount:m,stepSizePrecision:p,tickSizePrecision:f,equalQtyPrecision:y});switch(e){case"buy":return Cr(Ue,{label:r,content:`${h} ${a}`});case"sell":return Cr(Ue,{label:r,content:`${b} ${a}`});case"both":return Cr($e,{leftLabel:r,rightLabel:r,leftContent:`${h} ${a}`,rightContent:`${b} ${a}`});default:return null}};var Ir=n().createElement;const Mr=({side:e})=>Ir(n().Fragment,null,Ir(Tr,{side:e}),Ir(wr,{side:e}));var Er=n().createElement;const Nr={flexDirection:"row",alignItems:"center",height:"16px",fontSize:"12px",mt:"16px"},Zr={verticalAlign:"50%",marginRight:"8px"},Ar=[oe.rb.GTC,oe.rb.IOC,oe.rb.FOK].map((e=>({label:e,value:e}))),Or=({text:e})=>(0,i.useMemo)((()=>Er(F.Z,{p:0,mb:2},e)),[e]),Rr=e=>{const{getI18n:t}=(0,g.yk)(),[r,a]=(0,g.LY)();return Er(l.Z,Object.assign({__css:Nr},e),Er(ke.m,{sx:Zr,tip:Er(n().Fragment,null,Er(Or,{text:t("timeInForce-title",{defaultValue:"Time in Force"}),key:0}),Er(Or,{text:t("timeInForce-GTC",{defaultValue:"GTC: Good Till Cancel"}),key:1}),Er(Or,{text:t("timeInForce-IOC",{defaultValue:"IOC: Immediate Or Cancel"}),key:2}),Er(Or,{text:t("timeInForce-FOK",{defaultValue:"FOK: Fill Or Kill"}),key:3}))},t("limitType-TIF",{defaultValue:"TIF"})),Er(kt,{value:r,onChange:a,options:Ar,"data-testid":"TIFReduxSelector"}))};var Vr=n().createElement;const Lr=({className:e})=>{const{getI18n:t}=(0,g.yk)(),[r,a]=(0,g.KK)(),[n]=(0,g.hN)(),[,o]=(0,g.uD)();return(0,i.useEffect)((()=>{r&&o(!1)}),[r]),n?null:Vr(Qt,{className:e,checked:r,onChange:a,tooltipText:t("limitType-reduceOnly-tip",{defaultValue:""}),label:t("limitType-reduceOnly",{defaultValue:"Reduce Only"})})};var Fr=r("bmcq"),Dr=n().createElement;const _r=(0,i.forwardRef)(((e,t)=>{let{fieldName:r,value:a,children:i}=e,n=(0,b.Z)(e,["fieldName","value","children"]);const{setValue:o}=(0,ye.Gc)();return Dr(De.Z,Object.assign({sz:"normal",variant:"default",type:"submit",onClick:()=>{o(r,a)},ref:t},n),i)}));var zr=n().createElement;const Br=({fieldName:e,activatePriceFieldName:t,side:r})=>{const[a]=(0,g.K5)(),[n]=(0,g.lE)(),{BuyText:s,SellText:c}=(0,g.x_)(n),m=(0,u.useSelector)(Fr.X8),p=(0,ye.qo)({name:Te.T.TRIGGER_PRICE_WORKING_TYPE}),f=(0,o.uH)(p===d.HZ.LAST_PRICE),y=(0,o.CE)(),h=p===d.HZ.LAST_PRICE?f:y,b=(0,ye.qo)({name:t}),{buyDisabled:v,sellDisabled:x}=(0,g.nL)({orderType:a,activePrice:b,price:h}),S=(0,i.useRef)(null),k=(0,i.useRef)(null);(0,i.useEffect)((()=>(0,Ce.GY)((({name:e})=>{var t;switch(e){case Ce.oU:v||null===(t=S.current)||void 0===t||t.click();break;case Ce.nW:var r;if(!x)null===(r=k.current)||void 0===r||r.click()}}))),[v,x]);const P=zr(_r,{ref:S,fieldName:e,value:oe.hp.BUY,disabled:m||v,colorStyle:"buy",flex:1,width:"100%",mr:"8px",mt:"8px"},s),T=zr(_r,{ref:k,fieldName:e,value:oe.hp.SELL,disabled:m||x,colorStyle:"sell",width:"100%",flex:1,mt:"8px"},c);return"buy"===r?P:"sell"===r?T:"both"===r?zr(l.Z,null,P,T):null};var Kr=r("FZ38"),qr=r("ir67"),Wr=r("YaHi"),Hr=r("/pJK"),Ur=r("xxGv"),jr=r("isaE");const $r={m:"-12px",pb:"12px",bg:"modalBg",fontSize:"12px",borderRadius:"4px",overflow:"hidden",".fee-row":{display:"flex",justifyContent:"space-between",px:"12px","&.taker":{mb:"4px"}},".fee-label":{color:"t.third"},".fee-value":{color:"t.primary"},".vip-level":{color:"t.yellow"},".arrow-icon-container":{ml:"auto",transform:"rotate(-90deg)"}},Gr={".tooltip-label":{cursor:"pointer",fontSize:"12px",borderBottom:"1px solid",borderColor:"t.secondary",color:"t.secondary","&:hover":{borderColor:"t.yellow",color:"t.yellow"}}};var Jr=n().createElement;const Yr=1e6,{FEE_URL:Qr}=oe.x,Xr=(0,fe.Z)((0,fe.Z)({},{display:"flex",alignItems:"center",width:"200px",height:"40px",mb:"12px",px:"10px",textDecoration:"none","&.header-link-color":{color:"t.primary","&:hover":{color:"t.primary"}}}),{},{background:e=>`linear-gradient(to right, ${e.colors.line}80, ${e.colors.modalBg})`}),ea=()=>{const{isLight:e}=(0,Ur.Fg)(),{getI18n:t}=(0,g.yk)(),r=(0,$t.tZ)(),a=(0,g.aq)(),{feeTier:i,makerCommission:n=0,takerCommission:o=0}=a,s=(0,m.Bq)(o,Yr,{digit:4}),c=(0,m.Bq)(n,Yr,{digit:4});return Jr(l.Z,{"data-testid":"freeLevel-content",flexDirection:"column",sx:(0,fe.Z)((0,fe.Z)({},$r),!e&&{boxShadow:"elevation2"})},Jr(F.Z,{as:"a",className:"header-link-color",target:"_blank",rel:"noreferrer",href:(0,jr.C)(Qr,{locale:r}),sx:Xr},Jr(Wr.Z,{size:24,color:"t.secondary"}),t("fee-feeTierLabel",{defaultValue:"Fee Tier"}),"\xa0",Jr("span",{className:"vip-level"},"VIP ",i),Jr("span",{className:"arrow-icon-container"},Jr(Hr.Z,{size:16,color:"t.third"}))),Jr("div",{className:"fee-row taker"},Jr("label",{className:"fee-label"},t("fee-takerLabel",{defaultValue:"Taker"}),":"),Jr("span",{className:"fee-value"},`${o<0?"-":""}${s}`)),Jr("div",{className:"fee-row"},Jr("label",{className:"fee-label"},t("fee-makerLabel",{defaultValue:"Maker"}),":"),Jr("span",{className:"fee-value"}," ",`${n<0?"-":""}${c}`)))};var ta=n().createElement;const ra=()=>{const{isIPad:e}=(0,jt.F)(),{getI18n:t}=(0,g.yk)(),r=(0,g.aq)(),a=(0,qr._n)(),{feeTier:i="-"}=r;return a?ta(Kr.Z,{sx:Gr,enablePortal:!e,placement:"bottom",tip:"-"===i?null:ta(ea,null),bg:"modalBg"},ta("div",{className:"tooltip-label","data-testid":"freeLevel-button"},t("feeLevel",{defaultValue:"Fee level"}))):null};var aa=n().createElement;const ia={[d.Jm.LIMIT]:({price:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,tif:o,costAndMax:s,placeOrderButtons:l,divider:c})=>tt(n().Fragment,null,e,t,r,c,a,tt(et,null,i,o),c,l,s),[d.Jm.MARKET]:({divider:e,amount:t,amountSlider:r,tpsl:a,reduceOnly:i,costAndMax:o,placeOrderButtons:s,showTPSL:l,showReduceOnly:c})=>{const u=l||c;return rt(n().Fragment,null,t,r,u&&e,a,i,u&&e,s,o)},[d.Jm.STOP_LIMIT]:({divider:e,price:t,stopPrice:r,amount:a,amountSlider:i,reduceOnly:o,tif:s,tpsl:l,costAndMax:c,placeOrderButtons:u})=>at(n().Fragment,null,r,t,a,i,e,l,at(et,null,o,s),e,u,c),[d.Jm.STOP_MARKET]:({divider:e,stopPrice:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:o,costAndMax:s,placeOrderButtons:l,showReduceOnly:c,showTPSL:u})=>{const d=c||u;return it(n().Fragment,null,t,r,a,d&&e,o,i,d&&e,l,s)},[d.Jm.TRAILING_STOP_MARKET]:({divider:e,callbackRate:t,activationPrice:r,amount:a,amountSlider:i,reduceOnly:o,costAndMax:s,placeOrderButtons:l,showReduceOnly:c})=>nt(n().Fragment,null,t,r,a,i,c&&e,o,c&&e,l,s),[d.Jm.POST_ONLY]:({divider:e,price:t,amount:r,amountSlider:a,reduceOnly:i,tpsl:o,costAndMax:s,placeOrderButtons:l,showTPSL:c,showReduceOnly:u})=>{const d=c||u;return ot(n().Fragment,null,t,r,a,d&&e,o,i,d&&e,l,s)}},na=e=>{let{side:t,horizontal:r}=e,a=(0,b.Z)(e,["side","horizontal"]);const[s]=(0,g.K5)(),[u]=(0,g.hN)(),[m]=(0,g.lE)(),{symbol:p}=(0,o.j2)(),y=(0,o.c7)(),h=(0,o._n)(),{getI18n:v}=f(),{getI18n:x}=(0,g.yk)(),{isMobile:S}=(0,o.Fs)(),k=(0,g.C3)()===xe.UW,[P,T]=(0,ve.Z)(xe._J,be()(Te.U,[Te.T.TRIGGER_PRICE_WORKING_TYPE,Te.T.TP_STOP_PRICE_WORKING_TYPE,Te.T.TP_ORDER_TYPE,Te.T.SL_STOP_PRICE_WORKING_TYPE,Te.T.SL_ORDER_TYPE])),C=(0,ye.cI)({defaultValues:(0,fe.Z)((0,fe.Z)((0,fe.Z)({},Te.U),P),{},{[Te.T.LIMIT_PRICE]:y()})}),{reset:w,handleSubmit:I,getValues:M,setValue:E}=C,N=(0,i.useCallback)((()=>{const e=M(Te.T.TRIGGER_PRICE_WORKING_TYPE),t=M(Te.T.TP_STOP_PRICE_WORKING_TYPE),r=M(Te.T.TP_ORDER_TYPE),a=M(Te.T.SL_STOP_PRICE_WORKING_TYPE),i=M(Te.T.SL_ORDER_TYPE);return{[Te.T.TRIGGER_PRICE_WORKING_TYPE]:e,[Te.T.TP_STOP_PRICE_WORKING_TYPE]:t,[Te.T.TP_ORDER_TYPE]:r,[Te.T.SL_STOP_PRICE_WORKING_TYPE]:a,[Te.T.SL_ORDER_TYPE]:i}}),[M]),Z=(0,Pe.F)({afterSubmit:()=>w((0,fe.Z)((0,fe.Z)((0,fe.Z)({},Te.U),N()),{},{[Te.T.LIMIT_PRICE]:M(Te.T.LIMIT_PRICE)}))}),A=(0,ge.Z)(s),O=(0,ge.Z)(p);(0,i.useEffect)((function(){A===s&&O===p||w((0,fe.Z)((0,fe.Z)((0,fe.Z)({},Te.U),N()),{},{[Te.T.LIMIT_PRICE]:y()}))}),[w,s,A,y,N,O,p]),(0,i.useEffect)((function(){function e(){const e=N();T(e)}return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[N,T]);const R=ia[s]||null,V=(0,i.useMemo)((()=>aa(Fe,{fieldName:Te.T.LIMIT_PRICE,prefix:x("price",{defaultValue:"Price"}),required:!0,getLastTracePrice:y})),[x]),L=(0,i.useMemo)((()=>aa(At,{prefix:x("stopPrice",{defaultValue:"Stop Price"}),priceFieldName:Te.T.TRIGGER_PRICE,workingTypeFieldName:Te.T.TRIGGER_PRICE_WORKING_TYPE,required:!0})),[x]),F=(0,i.useMemo)((()=>aa(pt,{fieldName:Te.T.PRICE_RATE,required:!0})),[]),D=(0,i.useMemo)((()=>{const e=aa(ke.m,{className:"prefix-tooltip-container",tip:x("activationPriceTip",{defaultValue:Se.activationPriceTip})},aa(st.u,null,x("activationPrice",{defaultValue:"Activation Price"})));return aa(c.Z,{sx:{".bn-input-prefix":{flex:"1"},".prefix-tooltip-container":{width:"100%"},".bn-input-suffix":{marginLeft:"0px !important"},".order-form-input":{width:"73px",px:"4px"}}},aa(At,{prefix:e,priceFieldName:Te.T.ACTIVATE_PRICE,workingTypeFieldName:Te.T.ACTIVATE_PRICE_WORKING_TYPE,required:!1}))}),[x]),_=(0,i.useMemo)((()=>aa(It,{fieldName:Te.T.UNIT_AMOUNT,prefix:x("quantity",{defaultValue:"Size"}),required:!0})),[x]),z=h?aa(Ut,{fieldName:Te.T.BUY_ORDER_AMOUNT,unitAmountFieldName:Te.T.UNIT_AMOUNT,side:"buy"}):null,B=h?aa(Ut,{fieldName:Te.T.SELL_ORDER_AMOUNT,unitAmountFieldName:Te.T.UNIT_AMOUNT,side:"sell"}):null,K=(0,i.useMemo)((()=>aa(Ht,{amountFieldName:Te.T.UNIT_AMOUNT,amountFieldValueType:r?"buy"===t?"buyUnitAmount":"sellUnitAmount":"percentage",showUnitAmount:h&&!r})),[h,t,r]),q=(0,i.useMemo)((()=>h&&!k&&m!==d.RS.CLOSE),[h,r,k,m]),W=(0,i.useMemo)((()=>q?aa(hr,{showSideRadioButtons:!r,strategySideFieldName:Te.T.STRATEGY_SIDE,takeProfitPriceFieldName:Te.T.TP_LIMIT_PRICE,takeProfitStopPriceFieldName:Te.T.TP_STOP_PRICE,takeProfitStopPriceWorkingTypeFieldName:Te.T.TP_STOP_PRICE_WORKING_TYPE,takeProfitOrderTypeFieldName:Te.T.TP_ORDER_TYPE,stopLossPriceFieldName:Te.T.SL_LIMIT_PRICE,stopLossStopPriceFieldName:Te.T.SL_STOP_PRICE,stopLossStopPriceWorkingTypeFieldName:Te.T.SL_STOP_PRICE_WORKING_TYPE,stopLossOrderTypeFieldName:Te.T.SL_ORDER_TYPE}):null),[q]),H=h&&!r&&!u,U=(0,i.useMemo)((()=>H?aa(Lr,null):null),[H]),j=(0,i.useMemo)((()=>h&&!r?aa(Rr,{mt:q?"16px":"0px"}):null),[h,r,q]),$=(0,i.useMemo)((()=>h?aa(n().Fragment,null,aa(Mr,{side:t}),!r&&aa(l.Z,{justifyContent:"flex-end",mt:"12px"},aa(ra,null))):null),[h,t,r]),G=(0,i.useMemo)((()=>h?aa(Br,{fieldName:Te.T.SIDE,activatePriceFieldName:Te.T.ACTIVATE_PRICE,side:t}):aa(Ke,{getI18n:v})),[h,t,v]),J=(0,i.useMemo)((()=>h&&!r?aa(Ye,null):null),[h,r]),Y=(0,i.useMemo)((()=>aa(Ee,null)),[]);return aa(ye.RV,C,aa("form",Object.assign({autoComplete:"off",onSubmit:I(Z)},a),R&&aa(R,{side:t,horizontal:r,divider:J,price:V,stopPrice:L,callbackRate:F,activationPrice:D,amount:_,amountSlider:K,tpsl:W,reduceOnly:U,tif:j,costAndMax:$,placeOrderButtons:G,showReduceOnly:H,showTPSL:q}),z,B),Y)},oa=n().memo(na);var sa=r("NJWl"),la=r("WdOU"),ca=r("wjiZ"),ua=r("LfFT"),da=r("AVT8"),ma=r("Rhv4"),pa=r("AunK"),fa=r("Z/7v"),ga=r("Du7o"),ya=r("x8gL"),ha=r("TeQN"),ba=r("XXmh"),va=r("S24M"),xa=n().createElement;const Sa=(e,t)=>{switch(t.type){case"changeResponsibleTradingPeriod":return(0,fe.Z)((0,fe.Z)({},e),t.payload);case"toggleResponsibleTrade":return(0,fe.Z)((0,fe.Z)({},e),{},{inCoolingDuration:t.payload});case"reset":return(0,fe.Z)({},t.payload);default:return e}},ka=new Date,Pa=ka.setHours(0,0,0,0),Ta={today:{startTime:Pa,endTime:ka.setHours(23,59,59,59)},oneWeek:{startTime:Pa,endTime:Pa+691192e3},oneMonth:{startTime:Pa,endTime:new Date(ka.setMonth(ka.getMonth()+1)).setHours(23,59,59,59)}},Ca=(0,i.forwardRef)(((e,t)=>{const r=(0,u.useDispatch)(),{getI18n:a}=(0,g.yk)(),{0:s,1:d}=(0,i.useState)(!1),{0:m,1:p}=(0,i.useState)(!1),{setMessageInfo:f}=(0,o.YT)(),y=(0,la.p)(),{0:h,1:b}=(0,i.useState)(""),v=(0,o.tZ)(),x=(0,i.useMemo)((()=>y.inCoolingDuration?y:{inCoolingDuration:!1,startTime:0,endTime:0}),[y]),{0:S,1:k}=(0,i.useReducer)(Sa,x),P=(0,i.useCallback)((e=>{k({type:"toggleResponsibleTrade",payload:e.target.checked})}),[]),T=(0,i.useCallback)((()=>{setTimeout((()=>{k({type:"reset",payload:{initialState:x}}),b("")}),0)}),[x]),C=(0,i.useCallback)((({startTime:e,endTime:t})=>{k({type:"changeResponsibleTradingPeriod",payload:{startTime:e,endTime:t}})}),[]),w=(0,i.useCallback)((()=>{d(!1),T()}),[T]),I=(0,i.useCallback)((()=>{p(!1),T()}),[T]),M=(0,i.useCallback)((()=>{d(!1),p(!0)}),[]),E=(0,i.useCallback)((()=>{r.tradeForbidden.setCoolingPeriodConfig(S).then((e=>{e.success?(f({message:a("coolingSettingSuccess",{defaultValue:"Cooling-off Period setting successfully"}),variant:"success"}),(0,va.j)("set_cooling_success")):T()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})),p(!1)}),[T,a,f,r.tradeForbidden,S]);return(0,i.useEffect)((()=>{!S.inCoolingDuration||S.startTime||S.endTime||(C((0,fe.Z)({},Ta.today)),b("today"))}),[C,S.inCoolingDuration,S.startTime,S.endTime]),(0,i.useImperativeHandle)(t,(()=>({showResponsibleConfigPanel:()=>{d(!0)}}))),xa(n().Fragment,null,xa(ma.Z,{tx:"responsibleTrade",variant:"dialog",open:s,onCloseIconClick:w,title:a("coolingPeriod",{defaultValue:"Cooling Period"}),"data-testid":"cooling-off-period-panel"},xa(c.Z,{className:"des"},a("responsibleContent",{defaultValue:"You can voluntarily enter a Cooling-off Period whereby disabling Futures accounts related trading, including Futures, Strategy Trading, Battle and Options. This is an interface level function and not guaranteed to block all trades. You\u2019re not allowed to turn on trading function during Cooling-off Period. You must close all positions and open orders before enabling this setting."}),xa(ca.Z,{variant:"defaultLink",ml:"8px",fontSize:"14px",href:`/${v}/support/faq/ad7fd07f63a64954a6d6e9257d16adcc`,target:"_blank"},a("learnMore",{defaultValue:"Learn More"}),xa(ya.Z,{size:14,ml:"2px",verticalAlign:"middle"}))),xa(l.Z,{className:"label"},xa(F.Z,{mr:"20px"},a("disableFuturesTrading",{defaultValue:"Disable Futures Trading Function"})),xa(ua.Z,{"data-testid":"cooling-off-period-switch",size:16,checked:S.inCoolingDuration,disabled:y.inCoolingDuration,onChange:P})),xa(pa.Z,{value:h,fontSize:"14px",disabled:y.inCoolingDuration||!S.inCoolingDuration,hideSearch:!0,placeholder:a("chooseLockoutPeriod",{defaultValue:"Choose a lockout period"}),onChange:e=>{C((0,fe.Z)({},Ta[e])),b(e)},renderValue:e=>e&&a(e)},xa(fa.W,{value:"today"},a("today",{defaultValue:"Today"})),xa(fa.W,{value:"oneWeek"},a("oneWeek",{defaultValue:"1 Week"})),xa(fa.W,{value:"oneMonth"},a("oneMonth",{defaultValue:"1 Month"}))),xa(l.Z,{className:"time-container"},xa(l.Z,{className:"time"},xa("span",null,a("startDate",{defaultValue:"Start Date"})),xa("span",null,S.startTime?(0,ba.v)(new Date(S.startTime),"yyyy-MM-dd"):"--")),xa("span",{className:"separate"},"-"),xa(l.Z,{className:"time"},xa("span",null,a("endDate",{defaultValue:"End Date"})),xa("span",null,S.endTime?(0,ba.v)(new Date(S.endTime),"yyyy-MM-dd"):"--"))),xa(ga.y,null,xa(l.Z,{className:"confirm"},xa(De.Z,{sz:"normal",variant:"default",onClick:M,"data-testid":"cooling-off-period-confirm-button",disabled:y.inCoolingDuration||!S.inCoolingDuration||!h},a("PreferenceConfirm",{defaultValue:"Confirm"}))))),xa(da.Z,{tx:"responsibleTrade",variant:"secondaryConfirm",visible:m},xa(l.Z,{flexDirection:"column",alignItems:"center"},xa(ha.Z,{width:"96px",height:"96px"}),xa(F.Z,{color:"t.primary",fontSize:"16px"},a("disableWarningDes",{periodOptions:a(h)})),xa(l.Z,{width:"100%",mt:"24px",justifyContent:"space-between"},xa(De.Z,{width:"46%",variant:"default",colorStyle:"secondary",sz:"l",onClick:I},a("cancelBtnText")),xa(De.Z,{width:"46%",sz:"l",onClick:E},a("confirmBtn"))))))}));var wa=n().createElement;const Ia={maxWidth:"240px",boxSizing:"border-box",mt:"sm",color:"filterDropdown.color",py:2,borderRadius:"4px",boxShadow:"elevation2",width:"auto",p:0,position:"relative",bg:"modalBg",top:"-20px",right:"10px","& .opr":{variant:"filters.button",color:"t.primary",fontSize:1,lineHeight:"16px",py:"12px",px:3,":hover":{bg:"bg3"},".page-link":{color:"t.primary",textDecoration:"none"},justifyContent:"space-between"},"& .line":{borderTop:"1px solid",borderColor:"newLine",my:"8px",mx:"16px"},"& .checkbox":{color:"t.primary",fontSize:"12px",lineHeight:"16px",py:"8px",px:3,justifyContent:"flex-start",alignItems:"flex-start",":last-of-type":{paddingBottom:"16px"}}},Ma=()=>{const{getI18n:e}=(0,g.yk)(),t=(0,o.tZ)(),r=(0,o._n)(),a=(0,g.BF)(xe.UW),s=(0,i.useRef)(),l=(0,X.CN)(xe.O8,{locale:t}),{showPreferencePanel:c}=(0,g.r8)(),{responsiblePanelRef:u,showResponsiblePanel:d}=(0,g.W5)(),[m,p]=(0,g.UI)(),[f,y]=(0,g.t1)();return wa(n().Fragment,null,wa(A.ZP,{overlay:wa(sa.Z,{sx:Ia,onClick:e=>e.stopPropagation()},wa("div",{name:"orderform-preference-menu"},r&&wa("div",{className:"opr",onClick:()=>c("oc")},e("preference",{defaultValue:"Preference"})),r&&wa("div",{className:"opr",onClick:d},e("coolingPeriod",{defaultValue:"Cooling Period"})),wa("div",{className:"opr",onClick:()=>(0,se.O)()},e("trading-rules",{defaultValue:"Trading Rules"})),r&&wa("div",{className:"opr"},wa("a",{className:"page-link",href:l,target:"_blank"},e("positionLimitEnarge",{defaultValue:"Position Limit Enarge"}))),wa("div",{className:"line"}),!a&&wa(n().Fragment,null,wa(yt.Z,{className:"checkbox"},wa(Gt.Z,{onChange:e=>{p(e.target.checked)},checked:m,id:"remember",name:"displayMargin"}),wa(F.Z,null,e("orderFromPreference-displayMargin",{defaultValue:"Display Margin Mode & Leverage Adjustment Button"}))),wa(yt.Z,{className:"checkbox"},wa(Gt.Z,{onChange:e=>{y(e.target.checked)},checked:f,id:"remember",name:"advancedTPSL"}),wa(F.Z,null,e("orderFromPreference-advancedTPSL",{defaultValue:"Advanced TP/SL"})))))),trigger:"click",enablePortal:!0,placement:"bottom-start"},wa("div",{ref:s},wa(O.Z,{"data-testid":"orderform-preference-button",fontSize:"20px",sx:{position:"relative",top:"2px",ml:"4px",color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}}))),r&&wa(Ca,{ref:u}))};var Ea=r("fcuc"),Na=n().createElement;const Za={":hover":{color:"t.primary"}},Aa={ml:"8px",flexShrink:0},Oa=({orderType:e})=>{const{getI18n:t,i18n:{language:r}}=(0,g.yk)(),a=e===d.Jm.TRAILING_STOP_MARKET?(0,X.CN)(xe.Wh.TRAILING_STOP_MARKET_ORDER,{locale:r}):(0,X.CN)(xe.Wh.ORDER,{locale:r});return Na(ke.m,{sx:Aa,hideUnderLine:!0,learnMoreLink:a,tip:Na(z,{getFutI18n:t,orderType:e})},Na(Ea.Z,{color:"t.third",size:16,sx:Za}))},Ra=n().memo(Oa),Va=[{value:d.Jm.STOP_LIMIT,testId:d.OO.STOP_LIMIT,i18nKey:d.Jm.STOP_LIMIT},{value:d.Jm.STOP_MARKET,testId:d.OO.STOP_MARKET,i18nKey:d.Jm.STOP_MARKET},{value:d.Jm.TRAILING_STOP_MARKET,testId:d.OO.TRAILING_STOP_MARKET,i18nKey:d.Jm.TRAILING_STOP_MARKET},{value:d.Jm.POST_ONLY,testId:d.OO.POST_ONLY,i18nKey:"limitType-postOnly"},{value:d.Jm.TWAP,getTestId:({loginText:e})=>`ordertype_twap_${e}`,i18nKey:d.Jm.TWAP}],La={width:"100%",boxShadow:"none",overflow:"hidden"},Fa={marginRight:["24px","16px"],".tab":{color:"t.third","&.xs":{fontSize:"xs"},"&:hover":{color:"t.yellow"},"&.active":{color:"t.yellow"}},"&:last-of-type":{marginRight:0,flex:1,minWidth:0,".tab":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},Da={position:"relative",top:"4px",width:"fit-content",py:"4px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",".option":{padding:"6px 16px",fontSize:"14px",color:"t.primary","&:hover":{bg:"line",cursor:"pointer"},"&.active":{color:"t.yellow"}}};var _a=n().createElement;const za={cursor:"pointer"},Ba=(e={})=>{const[t,r]=(0,g.K5)(),[a,n]=(0,g.H$)(),{getI18n:s}=(0,g.yk)(),u=(0,g.G3)(),m=(0,o._n)(),p="ph"===(0,o.Jr)(),f=(0,i.useMemo)((()=>u||xe.Jg?Va.filter((e=>e.value!==d.Jm.TWAP)):Va),[u]),y=(0,i.useMemo)((()=>[d.Jm.LIMIT,d.Jm.MARKET,...f.map((e=>e.value))]),[f]),h=f.find((e=>e.value===a))||f[0];(0,i.useEffect)((function(){y.includes(t)||r(y[0]),y.includes(a)||n(h.value)}),[t,a,h.value]);const b=m?"login":"notLogin",v=(e,t,r)=>_a("div",{className:W()({active:e,tab:!0,xs:p}),"date-testid":r},t),x=(0,i.useMemo)((()=>_a(c.Z,{sx:Da,name:"ordertabs-menu","data-testid":`ordertype_dropdown_${b}`},f.map((({value:e,i18nKey:a,testId:i,getTestId:o})=>_a("div",{key:e,className:W()({active:t===e,xs:p,option:!0}),"data-testid":o?o({loginText:b}):i,onClick:()=>{r(e),n(e)}},s(a)))))),[s,p,t,r,n,b,f]);return _a(l.Z,Object.assign({alignItems:"center"},e),_a(l.Z,{flexDirection:"row"},_a(B.Z,{variant:"standard",defaultActiveKey:t,controlledKey:t,onChange:r,tabsSx:La,tabSx:Fa},_a(K.Z,{tab:()=>v(t===d.Jm.LIMIT,s("limit"),"limit"),tabKey:d.Jm.LIMIT}),_a(K.Z,{tab:()=>v(t===d.Jm.MARKET,s("market"),"market"),tabKey:d.Jm.MARKET}),_a(K.Z,{tab:()=>v(t===h.value,s(h.i18nKey),h.getTestId?h.getTestId({loginText:b}):h.testId),tabKey:h.value})),_a(A.ZP,{trigger:"hover",enablePortal:!0,placement:"bottom-end",overlay:x},_a(ht.Z,{color:"t.third",size:16,verticalAlign:"middle","data-testid":"moreStopMode",sx:za}))),t!==d.Jm.TWAP&&_a(Ra,{orderType:t}))},Ka=n().memo(Ba);var qa=n().createElement;const Wa={position:"sticky",top:0,zIndex:1,bg:"popupBg",fontSize:"14px",".flex-row":{display:"flex",flexDirection:"row",alignItems:"center",width:"100%",boxSizing:"border-box","&.position-tab-row":{alignItems:"stretch"},"&.margin-leverage-or-title-row":{pt:"10px",px:"16px"}},".dropdown-wrapper-near-position-tabs":{display:"flex",alignItems:"center",px:"4px",bg:"moduleBg",borderBottom:"1px solid",borderBottomColor:"modalBg"},".dropdown-wrapper-near-margin-leverage":{ml:"16px"},".title":{mr:"auto",color:"t.primary"},".draggable-area":{pb:"20px",".divider":{pt:"10px",borderBottom:"1px solid",borderColor:"modalBg"}}},Ha={flex:1,m:0},Ua={pb:"20px",px:"16px",justifyContent:"space-between",fontSize:"14px"},ja=()=>{const{getI18n:e}=(0,g.yk)(),[t]=(0,g.hN)(),[r]=(0,g.UI)(),a=!t&&!r,i=a||r;return qa(n().Fragment,null,qa(c.Z,{sx:Wa},t&&qa("div",{className:"flex-row position-tab-row"},qa(G,null),qa("div",{className:"dropdown-wrapper-near-position-tabs"},qa(Ma,null))),qa("div",{className:"flex-row margin-leverage-or-title-row"},r&&qa(J.Z,{sx:Ha}),a&&qa("div",{className:"title"},e("placeOrder",{defaultValue:"Place Order"})),!t&&qa("div",{className:"dropdown-wrapper-near-margin-leverage"},qa(Ma,null))),qa("div",{className:"draggable-area draggableHandle"},i&&qa("div",{className:"divider"}))),qa(Ka,{sx:Ua}))};var $a=r("Io4e"),Ga=n().createElement;const Ja=$a.Z,Ya=()=>{const e=(0,i.useRef)(),[t,[r,a]]=(0,o.z4)(),n=(0,o.j2)();return(0,i.useEffect)((()=>P.T.on(P.F.SHOW_ORDER_CONFIRM_PANEL,(t=>{var r,a;null===e||void 0===e||null===(r=e.current)||void 0===r||null===(a=r.showOrderConfirmPanel)||void 0===a||a.call(r,t)}))),[]),Ga(Ja,{symbol:t,base:r,quote:a,ticker:n,ref:e,marginAsset:n.marginAsset})},Qa=(0,i.memo)(Ya);var Xa=r("iCcb"),ei=n().createElement;const ti=({onClick:e})=>{const{getI18n:t}=f();return ei(l.Z,{justifyContent:"space-between",bg:"moduleBg",display:["flex","none"],p:"sm"},ei(De.Z,{flex:"1",color:"white",colorStyle:"buy",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.BUY),mr:"xs"},t("BUY")),ei(De.Z,{flex:"1",color:"white",colorStyle:"sell",sx:{height:"40px",borderRadius:"2px"},onClick:()=>e(d.g.SELL)},t("SELL")))};var ri=n().createElement;const ai=({children:e})=>{const{0:t,1:r}=(0,i.useState)(!1),a=(0,i.useCallback)((()=>{r(!1)}),[r]),o=(0,i.useCallback)((()=>{r(!0)}),[r]),s=t?"-100%":"0";return(0,i.useEffect)((()=>P.T.on(P.F.HIDE_MOBILE_MASK,a)),[a]),ri(n().Fragment,null,ri(ti,{onClick:o}),ri(Xa.Z,{visible:t,onClick:a}),ri(c.Z,{sx:{bg:"popupBg",zIndex:[30,0],color:"t.primary",fontSize:[1],position:"relative",userSelect:"none",borderTopLeftRadius:["10px","0"],borderTopRightRadius:["10px","0"],transition:["transform .3s ease-in-out","none"],transform:[`translate3d(0, ${s}, 0)`,"none"]}},e))},ii=n().memo(ai);var ni=r("cTVF"),oi=r("/dAn"),si=n().createElement;const{Wallet:li}=oi.Z,ci=({visible:e,onClose:t,curAsset:r})=>{const a=(0,g.G3)(),n=(0,u.useDispatch)(),s=(0,g._$)(),l=(0,i.useCallback)((()=>{n.transferAssets.getUserAssets()}),[n.transferAssets]),{assets:c}=s,d=Object.values((0,o.iB)()),m=(0,i.useMemo)((()=>Object.keys(c).reduce(((e,t)=>{var r,a,i,n;return e[t]={assetName:null===c||void 0===c||null===(r=c[t])||void 0===r?void 0:r.assetName,assetCode:null===c||void 0===c||null===(a=c[t])||void 0===a?void 0:a.asset,assetLogo:null===c||void 0===c||null===(i=c[t])||void 0===i?void 0:i.logoUrl,balance:null===c||void 0===c||null===(n=c[t])||void 0===n?void 0:n.free},e}),{})),[c]),p=(0,i.useMemo)((()=>Object.values(m)),[m]);(0,i.useEffect)((()=>{e&&l()}),[e,l]);const f=a?r||"BTC":"BUSD",y=a?"BTC"===f?"BNB":"BTC":r&&"BUSD"!==r?r:"USDT",h=(0,g.d0)(a),b=(0,i.useCallback)((e=>{const r=d.filter((t=>t.marginAsset===e)),a=r.find((e=>"CURRENT_QUARTER"===e.contractType))||r.find((e=>"PERPETUAL"===e.contractType))||r[0]||{},{symbol:i}=a;i?h({stateSymbol:i}):console.log("target asset no matched exchange symbol"),t()}),[h,d,t]);return si(oi.Z,{assets:p,defaultToAsset:f,defaultFromAsset:y,goTrade:b,wallet:a?li.DELIVERY:li.FUTURE,visible:e,onClose:t})};var ui=r("s0TC");const di=(0,i.memo)((()=>{const{launchTransfer:e}=(0,ui.i)(),t=(0,sr.G)();return(0,i.useEffect)((function(){return P.T.on(P.F.OPEN_TRANSFER_MODAL,(r=>{e({from:"MAIN",to:t?"DELIVERY":"FUTURE",defaultCoin:r||(t?"BTC":"USDT")})}))}),[t,e]),null}));var mi=n().createElement;const pi=(0,i.memo)((()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)("BTC"),{setMessageInfo:s}=(0,o.YT)(),{getI18n:l}=(0,g.yk)(),{isLoggedIn:c}=(0,o.f0)();(0,i.useEffect)((function(){return P.T.on(P.F.OPEN_CONVERT_MODAL,(e=>{t(!0),a(e)}))}),[]);const u=(0,i.useCallback)(((e,{asset:t})=>{e||s({header:l("transfer-asset",{defaultValue:""}),message:`${t} ${l("successTransferAsset",{defaultValue:""})}`,variant:"success"})}),[l,s]);return xe.sk?null:mi(n().Fragment,null,mi(ci,{visible:e,onClose:()=>t(!1),curAsset:r}),c&&mi(ni.Z,{afterTransfer:u,needFuturesJointMargin:!0},mi(di,null)))}));var fi=r("5Cux");const gi=e=>(0,o.ZK)("trd-calculator",e);var yi=r("BkSH"),hi=r("jQmP"),bi=r("H3aL"),vi=r("QlFx"),xi=r("74Of");const Si=({entryPrice:e,quantity:t,leverage:r})=>e*t*(1/r),ki=({positionDirection:e,exitPrice:t,entryPrice:r,quantity:a})=>(e===yi.DD.LONG?t-r:r-t)*a,Pi=({PNL:e,entryPrice:t,quantity:r,leverage:a})=>e/Si({entryPrice:t,quantity:r,leverage:a})*100,Ti=({ROE:e,leverage:t,positionDirection:r,entryPrice:a})=>{let i=e/100/t;return i=r===yi.DD.LONG?i+1:1-i,a*i},Ci=({brackets:e,positions:t,symbol:r,marginType:a,positionMode:i,walletBalance:n,longPosition:o,shortPosition:s,curPosition:l})=>{const c=(null===e||void 0===e?void 0:e[r])||[];let u=0;if(a===yi.Yl.CROSS){const a=t.filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==r));u=(0,xi.zW)(a,e)-(0,xi.ot)(a)}return i===yi.Tw.ONEWAY?(0,xi.W8)(c,n,u,l):(0,xi.wr)(c,n,u,o,s,l)},wi=({walletBalance:e,leverage:t,entryPrice:r,bracketNotionalCap:a})=>Math.floor(Math.min(e*t/r,a/r)),Ii=({walletBalance:e,leverage:t,bracketNotionalCap:r})=>(0,br.GW)(Math.min(e*t,r)),Mi=({positions:e})=>e.reduce(((e,{entryPrice:t,quantity:r})=>e+r*t),0)/e.reduce(((e,{quantity:t})=>e+t),0),Ei=({positions:e})=>e.reduce(((e,{quantity:t})=>e+t),0)/e.reduce(((e,{entryPrice:t,quantity:r})=>e+r/t),0),Ni=({quantity:e,entryPrice:t})=>e*t,Zi=({walletBalance:e,entryPrice:t,quantity:r,leverage:a})=>e<Math.abs(t)*Math.abs(r)/a,Ai=({walletBalance:e,leverage:t,longPosition:r,shortPosition:a})=>e<Math.abs(r.entryPrice)*Math.abs(r.quantity)/t+Math.abs(a.entryPrice)*Math.abs(a.quantity)/t,Oi=e=>(0,vi.uf)(e),Ri=e=>(0,vi.uf)(e),Vi=e=>(0,vi.uf)(e);var Li=r("ca2E");function Fi(){const e=(0,g.G3)(),{getI18n:t}=(0,g.yk)(),r=(0,g.QV)(),n=(0,Li.QV)(),{tickSize:s}=(0,o.j2)()||yi.oF,l=(0,hi.p)(s);return(0,i.useMemo)((()=>e?(({isCoinUnit:e,getFuturesI18n:t})=>({helper:(0,fe.Z)((0,fe.Z)({},bi),{},{openPrice:e?bi.openPriceCoin:bi.openPriceCont}),walletBalancePrecision:4,leveragePositionUnitField:"baseAsset",getUnitChangeQty:({quantity:t,entryPrice:r,contractVal:a})=>e?Math.floor(t*r/a):t,getCoinUnitUnit:()=>t("Cont",{defaultValue:"Cont"}),getQuantityUnit:({product:r})=>e?r.baseAsset:t("Cont",{defaultValue:"Cont"}),getQuantityPrecision:({product:t})=>e?t.equalQtyPrecision:t.quantityPrecision,getNotionalValue:({quantity:t,entryPrice:r,contractVal:a})=>e?t:t*a/r}))({getFuturesI18n:t,isCoinUnit:n.isCoinUnit}):(({isCoinUnit:e,tickSizePrecision:t})=>({helper:(0,fe.Z)((0,fe.Z)({},a),{},{openPrice:e?Mi:Ei}),walletBalancePrecision:2,leveragePositionUnitField:"quoteAsset",getUnitChangeQty:({quantity:r,entryPrice:a})=>e?r:(0,br.mD)(r/a,t),getCoinUnitUnit:({product:e})=>e.baseAsset,getQuantityUnit:({product:t})=>e?t.baseAsset:t.marginAsset,getQuantityPrecision:({product:r})=>e?r.quantityPrecision:t,getNotionalValue:({quantity:t,entryPrice:r})=>e?t*r:t}))({isCoinUnit:r.isCoinUnit,tickSizePrecision:l})),[e,t,n.isCoinUnit,r.isCoinUnit,l])}const Di={form:{container:{p:"16px 12px 16px 12px",flexDirection:"column",justifyContent:"unset",borderTop:"1px solid",borderColor:"calculator.containerBorderColor"},panel:{width:"100%",mr:0},tip:{pt:"15px"}},switch:{item:{bg:"calculator.resultBg",border:"none",color:"calculator.numberColor","&.active":{fontWeight:500,background:"linear-gradient(270deg, #FBDA3C 0%, #EFB80B 100%)",color:"#212833"}}},result:{container:{width:"100%",mt:"12px",bg:"calculator.resultBgMobile",py:"12px"},title:{fontWeight:"normal !important",mb:"12px"},label:{fontSize:"16px",color:"#848E9C"},value:{fontSize:"15px",color:"calculator.numberColor"},tooltipLabel:{fontSize:"16px",color:"#848E9C",borderBottom:"none !important"},description:{position:"relative",fontSize:"12px",color:"#848E9C",lineHeight:"18px",mt:10}},calculateBtn:{height:50,mt:18,fontWeight:"normal !important",background:"linear-gradient(90deg, #FBDA3C 0%, #EFB80B 100%)"},SymbolSelect:{overlayBoxSx:{width:"94vw"}},DropBpx:{sx:{bg:"calculator.dropBoxBg",borderColor:"calculator.dropBoxBg",fontWeight:"normal"}},custom:{TextField:{props:{color:"calculator.inputColor",fontSize:"15px !important",fontWeight:500,pb:"1px"},boxProps:{width:"100%",mt:12,height:44,borderColor:"calculator.inputBorderColorMobile"},prefix:{color:"#848E9C"},suffix:{color:"#848E9C",fontSize:"15px !important"}}}};function _i(){const{isMobile:e}=(0,o.Fs)();return(0,i.useMemo)((()=>e?Di:void 0),[e])}const zi=(0,i.createContext)({currentLeverageBracket:{}});var Bi=n().createElement;const Ki={button:{flex:1,"&:last-child":{ml:"8px"},"&.normal-button":{bg:"inputBg","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"line"}},"&.long-button":{"&:hover:not(:disabled):not(:active)":{bg:["buy","buyHover"]}},"&.short-button":{"&:hover:not(:disabled):not(:active)":{bg:["sell","sellHover"]}}}},qi=()=>{const{getI18n:e}=gi(),t=_i(),{positionDirection:r,setPositionDirection:a,marginType:n,positionMode:o}=(0,i.useContext)(zi),s=(0,i.useCallback)((()=>a(yi.DD.LONG)),[a]),c=(0,i.useCallback)((()=>a(yi.DD.SHORT)),[a]);return(0,i.useMemo)((()=>{if(n===yi.Yl.ISOLATED&&o===yi.Tw.HEDGE)return null;const t=r===yi.DD.LONG,a=r===yi.DD.SHORT;return Bi(l.Z,{sx:Ki},Bi(De.Z,{variant:"default",colorStyle:"buy",className:t?"long-button":"normal-button",onClick:s,"data-testid":"LongButton"},e("Long",{defaultValue:"Long"})),Bi(De.Z,{variant:"default",colorStyle:"sell",className:a?"short-button":"normal-button",onClick:c,"data-testid":"ShortButton"},e("Short",{defaultValue:"Short"})))}),[e,n,t,s,c,r,o])};var Wi=n().createElement;const Hi=({onClick:e})=>{const{isCalculateBtnValid:t}=(0,i.useContext)(zi),{getI18n:r}=gi(),a=_i(),n=(0,i.useMemo)((()=>({"&:disabled":{bg:"line",color:"t.third"}})),[]);return(0,i.useMemo)((()=>Wi(De.Z,Object.assign({variant:"default",width:1,sz:"l",disabled:!t,onClick:e,sx:n},(0,fe.Z)({mt:4},null===a||void 0===a?void 0:a.calculateBtn),{"data-testid":"Calculate"}),r("Calculate",{defaultValue:"Calculate"}))),[n,r,t,a,e])};var Ui=r("mTPN"),ji=r("Wx6g"),$i=n().createElement;const Gi={width:"50%",p:"24px",position:"relative",borderLeft:"0.5px solid",borderLeftColor:"line",".title":{mb:"28px",fontFamily:"Roboto",fontStyle:"normal",fontWeight:500,fontSize:"md",lineHeight:"24px",color:"t.primary"},".field":{mt:"12px",display:"flex",fontSize:"14px",justifyContent:"space-between"},".label":{color:"t.third"},".value":{color:"t.primary"},".description":{fontSize:"12px",lineHeight:"16px",color:"t.third",position:[null,"absolute"],bottom:"16px",mr:"16px"}},Ji=({results:e,sx:t,titleSx:r,itemSx:a}={})=>{const{getI18n:n}=gi(),o=_i();return(0,i.useMemo)((()=>$i(c.Z,{sx:(0,fe.Z)((0,fe.Z)((0,fe.Z)({},Gi),t),null===o||void 0===o?void 0:o.result.container)},$i(F.Z,{className:"title",sx:(0,fe.Z)((0,fe.Z)({},r),null===o||void 0===o?void 0:o.result.title)},n("Result",{defaultValue:"Result"})),$i(c.Z,null,$i(Yi,{items:e,sx:a})))),[n,a,o,e,t,r])};function Yi({items:e,sx:t}){const{0:r,1:a}=(0,i.useState)(!1),o=_i(),{getI18n:s}=(0,g.yk)();return $i(n().Fragment,null,$i(da.Z,{tx:"calculator.dialog",variant:"container",visible:Boolean(r),onMaskClick:()=>a(null),sx:{borderRadius:"7px"}},$i(l.Z,{flexDirection:"column"},$i(F.Z,{sx:{px:"24px",py:"32px",fontSize:"14px",lineHeight:"22px",color:"calculator.numberColor",boxShadow:"0px 2px 8px rgba(11, 14, 17, 0.3)"}},r),$i(De.Z,{sx:{height:"54px",borderTop:"1px solid",borderColor:"calculator.resultBg",fontSize:"17px",fontWeight:"normal",bg:"calculator.dialogBg"},onClick:()=>a(null)},s("CalculatorMobile-PNLTooltipConfirm",{defaultValue:"Ok, got it"})))),e.map((({value:e,label:r,asset:i,description:n,labelTooltip:s,testId:c},u)=>{var d,m,p,f;return $i(l.Z,Object.assign({className:"field",key:u},c?{"data-testid":c}:{},{sx:t}),!s&&$i(F.Z,{className:"label",sx:null===o||void 0===o||null===(d=o.result)||void 0===d?void 0:d.label},r),!!s&&$i(ji.Z,null,(({isMobile:e})=>{var t;return e?$i(l.Z,{className:"label",sx:null===o||void 0===o||null===(t=o.result)||void 0===t?void 0:t.tooltipLabel,onClick:()=>a(s)},$i(F.Z,{mr:"8px"},r),$i(Ui.Z,{size:18})):$i(Kr.Z,{tip:s},$i(F.Z,{className:"label"},r))})),(e||0===e)&&$i(F.Z,{className:"label",sx:null===o||void 0===o||null===(m=o.result)||void 0===m?void 0:m.label},$i(F.Z,{className:"value",as:"span",sx:null===o||void 0===o||null===(p=o.result)||void 0===p?void 0:p.value},e," ",i)),n&&$i(F.Z,{className:"description",sx:null===o||void 0===o||null===(f=o.result)||void 0===f?void 0:f.description},n))})))}var Qi=n().createElement;const{leverageInfo:{defaultVal:Xi}}=oe.Fy,en=({children:e}={})=>{const t=(0,o.z4)()[0],{0:r,1:a}=(0,i.useState)(!1),{0:n,1:s}=(0,i.useState)(t),{0:l,1:c}=(0,i.useState)(yi.DD.LONG),{0:u,1:d}=(0,i.useState)(yi.Yl.CROSS),{0:m,1:p}=(0,i.useState)(yi.Tw.ONEWAY),{0:f,1:y}=(0,i.useState)(!1),h=(0,g.Gf)(),{findLeverageByLevel:b,leverageData:{maxVal:v}}=(0,g.ho)({symbol:n,brackets:h}),{0:x,1:S}=(0,i.useState)(Math.min(v,Xi)),k=b(x),P=r&&!f;return(0,i.useEffect)((()=>{s(t)}),[t]),(0,i.useEffect)((()=>{S(Math.min(v,Xi))}),[v,S,n]),Qi(zi.Provider,{value:{symbol:n,setSymbol:s,leverage:x,setLeverage:S,isLeverageGreaterThan:f,setIsLeverageGreaterThan:y,currentLeverageBracket:k||{},positionDirection:l,setPositionDirection:c,marginType:u,setMarginType:d,positionMode:m,setPositionMode:p,setIsFormValid:a,isCalculateBtnValid:P}},e)};var tn=n().createElement;const rn={pt:"16px",pb:"12px",".slider-tip":{color:"t.third",fontSize:"12px",pt:"16px",".position-cap":{color:"t.primary",mt:"4px"}}};function an(){var e;const{leverage:t,setLeverage:r,currentLeverageBracket:a,isLeverageGreaterThan:s,symbol:u}=(0,i.useContext)(zi),{leveragePositionUnitField:d}=Fi(),{isMobile:m}=(0,o.Fs)(),p=_i(),{getI18n:f}=(0,g.yk)(),y=(0,o.iB)(),h=(0,g.Gf)(),b=(y[u]||yi.oF)[d],{bracketSeq:v,bracketNotionalCap:x}=a,S=v===(null===h||void 0===h||null===(e=h[u])||void 0===e?void 0:e.length),{leverageData:{minVal:k,maxVal:P}}=(0,g.ho)({symbol:u,brackets:h}),T=(0,i.useMemo)((()=>function(e,t){let r=[];if(t<10){r=[];for(let e=1;e<=t;e++)r.push(e)}else{r=[e];for(let e=1;e<=5;e++)r.push(Math.floor(e/5*t))}return r}(k,P)),[P,k]),C=(0,i.useMemo)((()=>({min:k,max:P})),[P,k]),w=(0,i.useCallback)((e=>r(e)),[r]),I=(0,i.useMemo)((()=>tn(n().Fragment,null,!S&&tn("div",{className:"slider-tip"},f("AvailablePositionsTip",{defaultValue:"Max position at current leverage:"}),tn("div",{className:"position-cap"},(0,vi.kh)(x)," ",b)))),[x,f,S,s,b]),M=(0,i.useMemo)((()=>{var e;return tn(n().Fragment,null," ",!S&&tn(l.Z,{tx:"calculator.form",variant:"tip",justifyContent:"space-between",sx:null===p||void 0===p||null===(e=p.form)||void 0===e?void 0:e.tip,className:s?"active":""},tn(c.Z,{sx:{fontSize:"12px",lineHeight:"16px"}},f("AvailablePositionsTip")),tn(c.Z,null,tn(F.Z,{as:"span",sx:{color:"calculator.numberColor",fontWeight:500}},"\xa0",(0,vi.kh)(x),"\xa0"),tn("span",null,b))))}),[x,f,S,p,b,s]);return m?tn(c.Z,{mb:"8px"},tn(Vt.Z,{progress:t,range:C,onChange:w,unit:"x",steppers:T,showScales:!0}),M):tn(c.Z,{sx:rn},tn(Vt.Z,{progress:t,range:C,onChange:w,unit:"x",px:"0px",steppers:T,showScales:!0}),I)}var nn=n().createElement;const on=({children:e,sx:t,overrideSx:r})=>{const a=_i();return nn(l.Z,{tx:"calculator.form",variant:"container",sx:(0,fe.Z)((0,fe.Z)((0,fe.Z)({},t),null===a||void 0===a?void 0:a.form.container),r)},e)},sn=({children:e})=>{const t=_i();return nn(c.Z,{tx:"calculator.form",variant:"panel",sx:null===t||void 0===t?void 0:t.form.panel},e)};var ln=r("Bb2c");function cn(e,t=2){try{if("number"!==typeof e&&!e)return"-";const r=(e="number"===typeof e?e:+e).toFixed(Math.max(0,~~t)),a=-1!==r.indexOf(".")?/\d(?=(\d{3})+\.)/g:/\d(?=(\d{3})+$)/g;return r.replace(a,"$&,")}catch(r){return Sentry.captureException(r),"-"}}function un(e){return!Number.isNaN(e)&&!isNaN(e)&&Math.abs(e)!==1/0}var dn=n().createElement;function mn({config:e}){const{value:t,max:r,precision:a,onChange:s,placeholder:u,asset:d,errorText:m="",negative:p=!1,testId:f,type:g="number",assetLabel:y=null,onAssetLabelClick:h,boxProps:b,mobileBoxProps:v}=e,x="rtl"===(0,o.gm)(),{isMobile:S}=(0,o.Fs)(),k=_i(),P=null===k||void 0===k?void 0:k.custom.TextField,T=(0,i.useCallback)((()=>h()),[h]),C=(0,i.useCallback)((e=>{(p||+e>=0)&&+e<=+r&&s(e)}),[r,p,s]),w=(0,i.useCallback)((e=>function(e,{fn:t,filed:r,places:a,negative:i=!1}){let n=e.target.value;return(i?(o=Number(n),/[^\-?\d|.|,|\u3002]/.test(o)):function(e){return/[^\d|.|,|\u3002]/.test(e)}(Number(n)))?"":(/\u3002|,/.test(n)&&(n=n.replace(/[\u3002|,]/g,".")),/^0\d/.test(n)?n="0":/^\./.test(n)?n=0+n.substring(0,a+1):Number(n)>=0&&-1!==n.indexOf(".")&&n.split(".")[1].length>=a&&(n=n.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(n))?"":void(r?t(r,n):t(n)));var o}(e,{fn:C,filed:null,places:a,negative:p})),[C,p,a]),I=(0,i.useCallback)((e=>function(e){return!/\d*\.?\d+$/.test(e.target.value)&&(e.target.value="")}(e)),[]),M=(0,i.useMemo)((()=>u&&dn(F.Z,{fontSize:14,color:"t.third",sx:null===P||void 0===P?void 0:P.prefix},u)),[P,u]),E=(0,i.useMemo)((()=>d&&dn(l.Z,{justifyContent:"center",alignItems:"center"},y&&dn(c.Z,{sx:{fontSize:"12px",color:"t.yellow",mr:"4px",cursor:"pointer",padding:"3px 4px",borderRadius:"4px","&:hover":{bg:"calculator.inputAssetLabelBg"}},onClick:T},y),dn(F.Z,{color:"t.primary",fontSize:1,sx:null===P||void 0===P?void 0:P.suffix},d))),[d,y,P,T]),N=(0,i.useMemo)((()=>({sx:S?(0,fe.Z)((0,fe.Z)({},null===P||void 0===P?void 0:P.boxProps),v):(0,fe.Z)({width:"100%",mt:"12px",border:"none",bg:"inputBg",height:"40px",input:{px:"8px"}},b)})),[b,S,v,P]),Z=(0,i.useMemo)((()=>(0,fe.Z)((0,fe.Z)({style:x?{textAlign:"right"}:{}},null===P||void 0===P?void 0:P.props),f?{"data-test-id":f}:{})),[x,P,f]);return(0,i.useMemo)((()=>dn(n().Fragment,null,dn(ln.Z,Object.assign({type:g,variant:"inline",value:t,onChange:w,onBlur:I,prefix:M,suffix:E,boxProps:N,placeholder:S?cn(0,a):null},Z)),!!m&&dn(c.Z,{sx:{fontSize:"12px",color:"t.sell"}},m))),[m,N,M,Z,E,S,I,w,a,g,t])}function pn({inputs:e,boxProps:t}){return dn(n().Fragment,null,e.map(((e,r)=>dn(mn,{key:r,config:e,boxProps:t}))))}var fn=r("dcD/"),gn=n().createElement;function yn({activeKey:e,data:t=[],onSelectChange:r=(()=>{}),sx:a,overlayBoxSx:n,itemSx:o}={}){const s=_i(),{0:u,1:d}=(0,i.useState)(!1),m=(0,i.useMemo)((()=>gn(c.Z,{sx:(0,fe.Z)({width:"143px",maxHeight:"250px",bg:"calculator.dropBoxBg",borderRadius:"4px",overflow:"auto",mt:"2px",boxShadow:"0px 0px 8px rgba(11, 14, 17, 0.15)"},n)},t.map((({key:e,value:t,disabled:a})=>{const i=a?{}:{color:"t.yellow",bg:"bg3"};return gn(l.Z,{justifyContent:"center",alignItems:"center",sx:(0,fe.Z)({height:"35px",color:a?"#5E6673":"calculator.dropBoxItemColor",fontSize:"14px",cursor:a?"not-allowed":"pointer",bg:"popupBg","&:hover":(0,fe.Z)({},i)},o),key:e,onClick:()=>{a||r(e)}},t)})))),[t,o,r,n]),p=(0,i.useMemo)((()=>(0,fe.Z)((0,fe.Z)({userSelect:"none",width:"100%",color:"t.primary",py:"4px",bg:"inputBg",fontSize:"sm",fontWeight:500,mr:"xs",borderRadius:"4px",cursor:"pointer","&:last-of-type":{mr:0}},null===s||void 0===s?void 0:s.DropBpx.sx),a)),[s,a]);return(0,i.useMemo)((()=>{var r;return gn(A.ZP,{trigger:"click",overlay:m,sx:p,enablePortal:!0,onVisibleChange:d},gn(l.Z,{justifyContent:"center",alignItems:"center"},gn(c.Z,null,null===(r=Object.values(t).find((t=>t.key===e)))||void 0===r?void 0:r.value),gn(fn.Z,{color:"#848E9C",sx:{transform:u?"rotate(180deg)":null,transition:"transform 100ms"}})))}),[e,t,p,m,u])}var hn=n().createElement;function bn({sx:e}={}){const{marginType:t=yi.Yl.CROSS,setMarginType:r,positionMode:a=yi.Tw.ONEWAY,setPositionMode:n}=(0,i.useContext)(zi),{isMobile:s}=(0,o.Fs)(),{getI18n:c}=(0,g.yk)();(0,i.useEffect)((()=>{t===yi.Yl.ISOLATED&&n(yi.Tw.ONEWAY)}),[t,a,n]);const u=(0,i.useMemo)((()=>[{key:yi.Yl.CROSS,value:c("header-Cross",{defaultValue:"Cross"})},{key:yi.Yl.ISOLATED,value:c("headerIsolated",{defaultValue:"Isolated"})}]),[c]),d=(0,i.useMemo)((()=>[{key:yi.Tw.ONEWAY,value:c("OneWayPosition",{defaultValue:"One-way Mode"})},{key:yi.Tw.HEDGE,value:c("TwoWayPosition",{defaultValue:"Hedge Mode"}),disabled:t===yi.Yl.ISOLATED}]),[c,t]),m=(0,i.useMemo)((()=>({width:s?"45.5vw":"143px"})),[s]),p=(0,i.useMemo)((()=>(0,fe.Z)({mb:"ls"},e)),[e]),f=(0,i.useCallback)((e=>r(e)),[r]),y=(0,i.useCallback)((e=>n(e)),[n]);return hn(l.Z,{sx:p},hn(yn,{data:u,activeKey:t,onSelectChange:f,overlayBoxSx:m}),hn(yn,{data:d,activeKey:a,onSelectChange:y,overlayBoxSx:m}))}var vn=n().createElement;function xn(){const{symbol:e,setSymbol:t}=(0,i.useContext)(zi),r=(0,o.iB)(),a=_i(),n=(0,g.G3)(),{getI18n:s}=(0,g.yk)(),c=(0,i.useMemo)((()=>Object.values(r).map((({symbol:e})=>({key:e,value:n?(0,vi.lE)(e,s):e})))),[s,n,r]);return vn(l.Z,{sx:{mb:"ls"}},vn(yn,{data:c,activeKey:e,onSelectChange:e=>t(e),overlayBoxSx:(0,fe.Z)({width:"295px",maxHeight:"285px"},null===a||void 0===a?void 0:a.SymbolSelect.overlayBoxSx)}))}var Sn=n().createElement;const kn=()=>{const{symbol:e,setIsLeverageGreaterThan:t,currentLeverageBracket:{bracketNotionalCap:r},setIsFormValid:a,positionDirection:n,leverage:s}=(0,i.useContext)(zi),{getUnitChangeQty:l,getQuantityPrecision:c,getQuantityUnit:u,getNotionalValue:d,helper:m}=Fi(),p=(0,o.iB)()[e]||yi.oF,{quoteAsset:f,marginAsset:g,pricePrecision:y,contractVal:h=100}=p,{getI18n:b}=gi(),{isMobile:v}=(0,o.Fs)(),{0:x,1:S}=(0,i.useState)(""),{0:k,1:P}=(0,i.useState)(""),{0:T,1:C}=(0,i.useState)(""),{0:w,1:I}=(0,i.useState)(yi.uf),{0:M,1:E}=(0,i.useState)(yi.uf),{0:N,1:Z}=(0,i.useState)(yi.uf),A=(0,i.useCallback)((e=>l({quantity:e,entryPrice:x,contractVal:h})),[l,x,h]),O=(0,i.useMemo)((()=>[{value:x,max:yi.nU,precision:y,onChange:S,placeholder:b("entryPrice",{defaultValue:"Entry Price"}),asset:f,testId:"EntryPrice"},{value:k,max:yi.nU,precision:y,onChange:P,placeholder:b("exitPrice",{defaultValue:"Exit Price"}),asset:f,testId:"ExitPrice"},{value:T,max:yi.nU,precision:c({product:p}),onChange:C,placeholder:b("quantity",{defaultValue:"Quantity"}),asset:u({product:p}),testId:"Quantity"}]),[x,k,b,u,y,p,T,c,f]),R=(0,i.useMemo)((()=>[{value:w,label:b("initialMargin",{defaultValue:"Initial Margin"}),labelTooltip:b("liqPriceTipText",{defaultValue:"Initial margin may not equal to actual margin required to place an order. Actual margin required = initial margin + open loss, where open loss reflects the additional cost due to the difference between order price and mark price."}),asset:g,testId:"InitialMaginValue"},{key:"PNL",value:M,label:b("PNL",{defaultValue:"PNL"}),asset:g,testId:"PNLValue"},{value:N,label:b("ROE",{defaultValue:"ROE"}),asset:"%",testId:"ROEValue"}]),[w,b,g,M,N]),V=(0,i.useCallback)((()=>{const e=A(T),t=m.initialMargin({entryPrice:x,quantity:e,leverage:s,contractVal:h}),r=m.PNL({positionDirection:n,quantity:e,entryPrice:x,exitPrice:k,contractVal:h}),a=m.ROE({PNL:r,quantity:e,leverage:s,entryPrice:x,contractVal:h});I(m.initialMarginFormat(t)),E(un(r)?m.PNLFormat(r):yi.uf),Z(un(a)?m.ROEFormat(a):yi.uf)}),[A,T,m,x,s,h,n,k]);return(0,i.useEffect)((()=>{a(!!(x&&k&&T))}),[x,k,T,a]),(0,i.useEffect)((()=>{t(d({quantity:T,entryPrice:x,contractVal:h})>r)}),[r,h,x,d,T,t]),(0,i.useEffect)((()=>{v&&(a(!1),S(""),P(""),C(""),I(yi.uf),E(yi.uf),Z(yi.uf))}),[v,a,e]),Sn(on,null,Sn(sn,null,Sn(qi,null),Sn(an,null),Sn(pn,{inputs:O}),v&&Sn(Ji,{results:R}),Sn(Hi,{onClick:V})),!v&&Sn(Ji,{results:R}))};function Pn(e){return Sn(en,null,Sn(kn,e))}var Tn=n().createElement;const Cn=()=>{const{symbol:e,setIsFormValid:t,positionDirection:r,leverage:a}=(0,i.useContext)(zi),{helper:n}=Fi(),s=(0,o.iB)()[e]||yi.oF,{quoteAsset:l,pricePrecision:c}=s,{0:u,1:d}=(0,i.useState)(""),{0:m,1:p}=(0,i.useState)(""),{0:f,1:y}=(0,i.useState)(yi.uf),{getI18n:h}=gi(),{isMobile:b}=(0,o.Fs)(),{getI18n:v}=(0,g.yk)(),x=(0,i.useMemo)((()=>[{value:u,max:yi.nU,precision:c,onChange:d,placeholder:h("entryPrice",{defaultValue:"Entry Price"}),asset:l,testId:"EntryPrice"},{value:m,max:"1999",precision:2,onChange:p,placeholder:h("ROE",{defaultValue:"ROE"}),asset:"%",errorText:f<0&&v("calculator-reachROETip",{defaultValue:"can't reach the ROE"}),negative:!0,testId:"ROEInput"}]),[u,c,h,l,m,f,v]),S=(0,i.useMemo)((()=>[{value:f<0?yi.uf:f,label:h("targetPrice",{defaultValue:"Target Price"}),asset:l,testId:"TargetPriceValue"}]),[f,l,h]),k=(0,i.useCallback)((()=>{const e=n.targetPrice({ROE:m,leverage:a,positionDirection:r,entryPrice:u});var t;y((t=e)>0&&un(t)?cn(e,c):-1/0)}),[n,m,a,r,u,c]);return(0,i.useEffect)((()=>{t(!(!u||!m))}),[u,m,t]),(0,i.useEffect)((()=>{b&&(t(!1),d(""),p(""),y(yi.uf))}),[b,t,e]),Tn(on,null,Tn(sn,null,Tn(qi,null),Tn(an,null),Tn(pn,{inputs:x}),b&&Tn(Ji,{results:S}),Tn(Hi,{onClick:k})),!b&&Tn(Ji,{results:S}))};function wn(e){return Tn(en,null,Tn(Cn,e))}var In=n().createElement;const Mn=(0,i.forwardRef)(((e,t)=>{const{marginType:r,positionMode:a}=(0,i.useContext)(zi);return r===yi.Yl.CROSS&&a===yi.Tw.HEDGE?In(Zn,Object.assign({ref:t},e)):In(En,Object.assign({ref:t},e))})),En=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{symbol:a,setIsLeverageGreaterThan:s,currentLeverageBracket:{bracketNotionalCap:l},isFormValid:c,setIsFormValid:u}=(0,i.useContext)(zi),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=Fi(),{getI18n:g}=gi(),y=(0,o.iB)()[a]||yi.oF,{quoteAsset:h,pricePrecision:b,contractVal:v=100}=y,{0:x,1:S}=(0,i.useState)(""),{0:k,1:P}=(0,i.useState)(""),T=(0,i.useCallback)((({quantity:e})=>p({quantity:e,entryPrice:x,contractVal:v})),[v,x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({entryPrice:+x,quantity:T({quantity:k})})}))),(0,i.useEffect)((()=>{s(f({quantity:k,entryPrice:x,contractVal:v})>l)}),[l,v,x,f,k,s]),(0,i.useEffect)((()=>{const t=!!(x&&e&&k);c!==t&&u(t)}),[x,e,k,u,c]),In(n().Fragment,null,In(pn,{inputs:[{value:x,max:yi.nU,precision:b,onChange:S,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:h},{value:k,max:yi.nU,precision:d({product:y}),onChange:P,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:y})}]}),In(pn,{inputs:t}))})),Nn=({color:e,text:t})=>In(l.Z,{alignItems:"center",sx:{fontSize:"14px",color:e,"&::before":{content:'""',display:"inline-block",width:"4px",height:"12px",mr:"8px",bg:e}}},t),Zn=(0,i.forwardRef)((({walletBalance:e,walletBalanceInput:t}={},r)=>{const{isFormValid:a,setIsFormValid:s,setIsLeverageGreaterThan:l,currentLeverageBracket:{bracketNotionalCap:u}}=(0,i.useContext)(zi),{getQuantityPrecision:d,getQuantityUnit:m,getUnitChangeQty:p,getNotionalValue:f}=Fi(),{getI18n:g}=gi(),[y]=(0,o.z4)(),h=(0,o.iB)()[y]||yi.oF,{quoteAsset:b,pricePrecision:v,contractVal:x=100}=h,{0:S,1:k}=(0,i.useState)(""),{0:P,1:T}=(0,i.useState)(""),{0:C,1:w}=(0,i.useState)(""),{0:I,1:M}=(0,i.useState)(""),E=(0,i.useCallback)((({quantity:e,entryPrice:t})=>p({quantity:e,entryPrice:t,contractVal:x})),[x,p]);return(0,i.useImperativeHandle)(r,(()=>({getFormData:()=>({[yi.DD.LONG]:{entryPrice:S,quantity:E({quantity:C,entryPrice:S,contractVal:x})},[yi.DD.SHORT]:{entryPrice:P,quantity:E({quantity:I,entryPrice:P,contractVal:x})}})}))),(0,i.useEffect)((()=>{const t=!!(S&&P&&C&&I&&e);a!==t&&s(t)}),[e,s,S,P,C,I,a]),(0,i.useEffect)((()=>{l(Math.max(f({quantity:C,entryPrice:S,contractVal:x}),f({quantity:I,entryPrice:P,contractVal:x}))>u)}),[u,x,f,S,C,l,P,I]),In(n().Fragment,null,In(c.Z,{sx:{mb:"24px"}},In(Nn,{color:"buy",text:g("Long",{defaultValue:"Long"})}),In(pn,{inputs:[{value:S,max:yi.nU,precision:v,onChange:k,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:b},{value:C,max:yi.nU,precision:d({product:h}),onChange:w,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:h})}]})),In(c.Z,{sx:{mb:"24px"}},In(Nn,{color:"sell",text:g("Short",{defaultValue:"Short"})}),In(pn,{inputs:[{value:P,max:yi.nU,precision:v,onChange:T,placeholder:g("entryPrice",{defaultValue:"Entry Price"}),asset:b},{value:I,max:yi.nU,precision:d({product:h}),onChange:M,placeholder:g("quantity",{defaultValue:"Quantity"}),asset:m({product:h})}]})),In(pn,{inputs:t,boxProps:{mt:0}}))}));var An=n().createElement;const On=()=>{var e,t,r,a;const{symbol:n,marginType:s,positionMode:l,positionDirection:c,leverage:u}=(0,i.useContext)(zi),{helper:d,walletBalancePrecision:m,getUnitChangeQty:p}=Fi(),{getI18n:f}=gi(),y=(0,o._n)(),h=(0,o.iB)(),b=h[n]||yi.oF,v=(0,g.KQ)(),x=(0,g.$J)()||{},S=(0,g.F)(),k=(0,g.Gf)()||{},{isMobile:P}=(0,o.Fs)(),{getI18n:T}=(0,g.yk)(),C=null===(e=(0,g.CE)()[n])||void 0===e?void 0:e.markPrice,w=l===yi.Tw.ONEWAY,{quoteAsset:I,marginAsset:M,pricePrecision:E,contractVal:N=100}=b,Z=y?s===yi.Yl.CROSS?null===v||void 0===v||null===(t=v[M])||void 0===t?void 0:t.crossWalletBalance:(null===(r=x[n])||void 0===r?void 0:r.isolatedWallet)||(null===v||void 0===v||null===(a=v[M])||void 0===a?void 0:a.crossWalletBalance):"",{0:A,1:O}=(0,i.useState)(0===Number(Z)?"":(0,br.GW)(Z,m)),{0:R,1:V}=(0,i.useState)(yi.uf),{0:L,1:F}=(0,i.useState)(null),D=((0,i.useCallback)((({quantity:e,entryPrice:t})=>p({quantity:e,entryPrice:t,contractVal:N})),[N,p]),(0,i.useCallback)((()=>{V(yi.uf),F(T("calculator-liqPriceIsVerifyTip",{defaultValue:"Insufficient wallet balance (initial margin) to open a position."}))}),[T])),_=(0,i.useRef)(),z=(0,i.useMemo)((()=>[{value:R,label:f("liqPrice",{defaultValue:"Liquidation Price"}),asset:I,testId:"LiquidationPriceValue"},{description:f("liqPriceTip",{defaultValue:"Liquidation Price Tip"})}]),[R,I,f]),B=(0,i.useMemo)((()=>w?{}:{mb:0}),[w]),K=(0,i.useCallback)((()=>{const e=_.current.getFormData(),t=c===yi.DD.LONG?1:-1,r={symbol:n,brackets:k,positions:S,productMap:h,walletBalance:A,marginType:s,positionMode:l};let a;if(F(null),w){const{entryPrice:i,quantity:n}=e;a=d.liquidationPrice((0,fe.Z)((0,fe.Z)({},r),{},{curPosition:{entryPrice:i,positionSize:n*t,contractVal:N}})),d.isLiqPriceInValid({walletBalance:A,entryPrice:i,quantity:n,leverage:u,contractVal:N})?D():V(a<0?yi.uf:cn(a,E))}else{const{entryPrice:t,quantity:i}=e[yi.DD.LONG],{entryPrice:n,quantity:o}=e[yi.DD.SHORT],s={entryPrice:t,positionSize:i,contractVal:N,markPrice:C},l={entryPrice:n,positionSize:o,contractVal:N,markPrice:C};a=d.liquidationPrice((0,fe.Z)((0,fe.Z)({},r),{},{curPosition:{markPrice:C},longPosition:s,shortPosition:l})),d.isLiqPriceInValidHEDGE({walletBalance:A,leverage:u,longPosition:(0,fe.Z)({quantity:s.positionSize},s),shortPosition:(0,fe.Z)({quantity:l.positionSize},l),contractVal:N})?D():V(a<0?yi.uf:cn(a,E))}}),[k,N,d,w,u,s,C,c,l,E,h,D,n,S,A]);return(0,i.useEffect)((()=>{O((0,br.GW)(Z,m))}),[Z,m,s]),An(on,null,An(sn,null,An(bn,{sx:B}),w&&An(qi,null),An(an,null),An(Mn,{ref:_,walletBalance:A,walletBalanceInput:[{value:A,max:yi.nU,precision:m,onChange:O,placeholder:f("walletBalance",{defaultValue:"Wallet Balance"}),asset:M,testId:"WalletBalanceInput",errorText:L}]}),P&&An(Ji,{results:z}),An(Hi,{onClick:K})),!P&&An(Ji,{results:z}))};function Rn(e){return An(en,null,An(On,e))}var Vn=r("QqFe"),Ln=n().createElement;function Fn(e){return Ln(en,null,Ln(Dn,e))}function Dn(){var e,t,r;const{symbol:a,setIsFormValid:n,currentLeverageBracket:{bracketNotionalCap:s},leverage:l}=(0,i.useContext)(zi),{helper:c,walletBalancePrecision:u,getCoinUnitUnit:d}=Fi(),{getI18n:m}=gi(),{getI18n:p}=(0,g.yk)(),{isMobile:f}=(0,o.Fs)(),y=(0,o._n)(),h=(0,o.iB)()[a]||yi.oF,{quoteAsset:b,pricePrecision:v,marginAsset:x}=h,S=(0,g.KQ)(),k=(null===(e=(0,Vn.Pj)().nextTickers)||void 0===e||null===(t=e.find((e=>e.symbol===a)))||void 0===t?void 0:t.lastPrice)||0,P=y?(0,br.GW)(null===S||void 0===S||null===(r=S[x])||void 0===r?void 0:r.crossWalletBalance,u):"",{0:T,1:C}=(0,i.useState)(""),{0:w,1:I}=(0,i.useState)(0===Number(P)?"":P),{0:M,1:E}=(0,i.useState)(yi.uf),{0:N,1:Z}=(0,i.useState)(yi.uf),A=(0,i.useMemo)((()=>[{value:T,max:yi.nU,precision:v,onChange:C,placeholder:m("entryPrice",{defaultValue:"Entry Price"}),asset:b,assetLabel:p("lastPrice",{defaultValue:"Last Price"}),onAssetLabelClick(){var e;C((null===(e=+k)||void 0===e?void 0:e.toFixed(v))||0)}},{value:w,max:yi.nU,precision:u,onChange:I,placeholder:m("walletBalance",{defaultValue:"Wallet Balance"}),asset:x}]),[T,p,m,u,k,v,b,w,x]),O=(0,i.useMemo)((()=>[{value:M,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${d({product:h})})`},{value:N,label:`${m("maxOpen",{defaultValue:"Max Open"})} (${x})`},{description:m("maxopentip",{defaultValue:"Max Open Tip"})}]),[N,m,d,h,M,x]),R=(0,i.useCallback)((()=>{const e=c.maxOpenQuantity({walletBalance:w,leverage:l,entryPrice:T,contractVal:h.contractVal,bracketNotionalCap:s}),t=c.maxOpenCoin({walletBalance:w,leverage:l,bracketNotionalCap:s});Z(un(t)?t:yi.uf),E(un(e)?e:yi.uf)}),[c,w,l,T,h.contractVal,s]);return(0,i.useEffect)((()=>{n(!(!T||!w))}),[T,n,w]),(0,i.useEffect)((()=>{E(yi.uf),Z(yi.uf),C(""),I(P)}),[P,a]),Ln(on,null,Ln(sn,null,!f&&Ln(xn,null),Ln(qi,null),Ln(an,null),Ln(pn,{inputs:A}),f&&Ln(Ji,{results:O}),Ln(Hi,{onClick:R})),!f&&Ln(Ji,{results:O}))}var _n=r("RqPo"),zn=r("AnCx"),Bn=r("9wUS"),Kn=n().createElement;function qn(e){setTimeout((()=>e&&e()),0)}const Wn=()=>({id:Date.now(),entryPrice:"",quantity:""}),Hn={height:"24px",borderRadius:"1px",width:"160px",mt:0,flex:1,"&.bn-input-status-focus input":{border:"1px solid",borderColor:"primary"},input:{textAlign:"left",height:"40px",borderRadius:"4px"}},Un={mt:0,"& input":{textAlign:"left !important",pl:"8px"}},jn=(0,i.forwardRef)(((e,t)=>{const{symbol:r,isFormValid:a,setIsFormValid:s}=(0,i.useContext)(zi),{getQuantityPrecision:u,getQuantityUnit:d}=Fi(),{getI18n:m}=gi(),p=(0,o.iB)()[r]||yi.oF,{quoteAsset:f,pricePrecision:g}=p,{isMobile:y}=(0,o.Fs)(),{0:h,1:b}=(0,i.useState)({}),v=e=>{qn((()=>{delete h[e],b((0,fe.Z)({},h))}))},x=(0,i.useCallback)((()=>{qn((()=>{const e=Wn();h[e.id]=e,b((0,fe.Z)({},h))}))}),[h]),S=(0,i.useCallback)(((e,t,r)=>{qn((()=>{h[e][t]=r,b((0,fe.Z)({},h))}))}),[h]);return(0,i.useEffect)((()=>{x()}),[]),(0,i.useEffect)((()=>{const e=Object.values(h),t=!!e.length&&!e.some((({entryPrice:e,quantity:t})=>!e||!t));t!==a&&s(t)}),[a,h,s]),(0,i.useImperativeHandle)(t,(()=>({getPositions:()=>h,resetPositions(){const e=Wn();b({[e.id]:e})}}))),Kn(n().Fragment,null,Kn(l.Z,{sx:{alignItems:"center",justifyContent:"space-between",fontSize:"12px",color:"t.grey300",mt:y?"24px":"40px",mb:"12px"}},!y&&Kn(c.Z,{width:"80px"},m("open",{defaultValue:"Open"})),Kn(l.Z,{flex:1},Kn(c.Z,{sx:{mr:y?"-16px":"0px",flex:1}},m("entryPrice",{defaultValue:"Entry Price"})," (",f,")"),Kn(c.Z,{sx:{flex:1}},m("quantity",{defaultValue:"Quantity"})," (",d({product:p}),")")),!y&&Kn(c.Z,{width:"40px",textAlign:"right"},m("action",{defaultValue:"Action"}))),Object.values(h).map((({id:e,entryPrice:t,quantity:r},a)=>Kn(l.Z,{alignItems:"center",justifyContent:"space-between",key:e,sx:y?{mb:"12px",bg:"inputBg",px:"8px"}:{height:"40px",bg:"inputBg",px:"8px",mb:"12px",borderRadius:"4px"}},!y&&Kn(c.Z,{fontSize:0,width:"80px",color:"t.grey300"},a+1),Kn(l.Z,{justifyContent:"center",alignItems:"center",flex:1},Kn(mn,{config:{value:t,max:yi.nU,precision:g,onChange:t=>S(e,"entryPrice",t),asset:y?f:null,boxProps:Hn,mobileBoxProps:Un}}),y&&Kn(c.Z,{sx:{minWidth:"8px"}}),Kn(mn,{config:{value:r,max:yi.nU,precision:u({product:p}),onChange:t=>S(e,"quantity",t),asset:y?d({product:p}):null,boxProps:Hn,mobileBoxProps:Un}})),y?Kn(_n.Z,{color:"#848E9C",ml:3,onClick:()=>v(e)}):Kn(zn.Z,{ml:"20px",fontSize:"20px",textAlign:"right",color:"t.third",cursor:"pointer",onClick:()=>v(e)})))),Kn(l.Z,{sx:(0,fe.Z)({margin:"0 auto",mt:"17px",color:"t.yellow",cursor:"pointer",alignItems:"center",justifyContent:"center",fontSize:"14px"},y&&{mb:"6px",ml:0,justifyContent:"left"}),onClick:x},Kn(Bn.Z,{size:14,color:"t.yellow"})," \xa0",m("addPosition",{defaultValue:"Add Position"})))}));var $n=n().createElement;function Gn(){const{symbol:e}=(0,i.useContext)(zi),{helper:t}=Fi(),{isMobile:r}=(0,o.Fs)(),{getI18n:a}=gi(),n=(0,o.iB)()[e]||yi.oF,{quoteAsset:s,pricePrecision:l}=n,{0:c,1:u}=(0,i.useState)(yi.uf),d=(0,i.useRef)(),m=(0,i.useMemo)((()=>[{value:c,label:`${a("avgPrice",{defaultValue:"Avg Price"})} (${s})`}]),[c,a,s]),p=(0,i.useCallback)((()=>{const e=t.openPrice({positions:Object.values(d.current.getPositions()).map((({entryPrice:e,quantity:t})=>({entryPrice:+e,quantity:+t})))});u(un(e)?e.toFixed(l):yi.uf)}),[t,l]);(0,i.useEffect)((()=>{u(yi.uf),d.current.resetPositions()}),[e]);return $n(r?Yn:Jn,{results:m,positionsRef:d,onCalculator:p})}function Jn(e){const{results:t,positionsRef:r,onCalculator:a}=e;return $n(on,{sx:{flexDirection:"column"},overrideSx:{pt:0,pr:0}},$n(c.Z,{sx:{maxHeight:"324px",overflow:"auto"}},$n(c.Z,{sx:{pr:"32px"}},$n(l.Z,{sx:{pt:"24px"}},$n(sn,null,$n(xn,null),$n(qi,null)),$n(Ji,{results:t,sx:{py:"0px"},titleSx:{mt:"0px !important",mb:"28px !important"}})),$n(jn,{ref:r}))),$n(c.Z,{sx:{pr:"32px"}},$n(Hi,{onClick:a})))}function Yn(e){const{results:t,positionsRef:r,onCalculator:a}=e;return $n(on,{sx:{flexDirection:"column"}},$n(l.Z,null,$n(sn,null,$n(qi,null))),$n(jn,{ref:r}),$n(Ji,{results:t}),$n(Hi,{onClick:a}))}function Qn(e){return $n(en,null,$n(Gn,e))}var Xn=n().createElement;const eo="PNL",to="TARGET_PRICE",ro="LIQ",ao="MAX_OPEN",io="OPEN_PRICE",no={color:"t.third",fontSize:"16px","&:hover":{color:"t.primary",cursor:"pointer"}},oo={width:["calc(100vw - 32px)","680px","680px"],bg:"modalBg",".close-icon":{color:"t.third",position:"absolute",top:"sm",right:"sm",cursor:"pointer",":hover":{color:"t.primary"}},".tabs":{mx:5,width:"auto",borderBottom:"1px solid",borderColor:"line"}};function so({title:e,testId:t,active:r}){return Xn(c.Z,{tx:"tabs",variant:"trade-next.tab",sx:{padding:"18px 1px 12px 1px",fontSize:"18px",mr:"24px"},className:r?"active":"","data-testid":t},e)}const lo=()=>{const{0:e,1:t}=(0,i.useState)(!1),{0:r,1:a}=(0,i.useState)(eo),{getI18n:n}=gi();return(0,i.useEffect)((()=>{e||a(eo)}),[e]),(0,i.useMemo)((()=>Xn(l.Z,{alignItems:"center","data-testid":"Caculator"},Xn(da.Z,{visible:e,onMaskClick:()=>t(!1),sx:oo,contentClassName:"content"},Xn(N.Z,{className:"close-icon",onClick:()=>t(!1)}),Xn(B.Z,{defaultActiveKey:eo,variant:"trade-next",tabsClassName:"tabs",onChange:e=>a(e)},Xn(K.Z,{tab:e=>Xn(so,{title:n("PNL",{defaultValue:"PNL"}),testId:"PNL",active:e}),tabKey:eo},r===eo&&e&&Xn(Pn,null)),Xn(K.Z,{tab:e=>Xn(so,{title:n("targetPrice",{defaultValue:"Target Price"}),testId:"TargetPrice",active:e}),tabKey:to},r===to&&Xn(wn,null)),Xn(K.Z,{tab:e=>Xn(so,{title:n("liqPrice",{defaultValue:"Liquidation Price"}),testId:"LiquidationPrice",active:e}),tabKey:ro},r===ro&&e&&Xn(Rn,null)),Xn(K.Z,{tab:e=>Xn(so,{title:n("maxOpen",{defaultValue:"Max Open"}),active:e}),tabKey:ao},r===ao&&e&&Xn(Fn,null)),Xn(K.Z,{tab:e=>Xn(so,{title:n("openPrice",{defaultValue:"Open Price"}),active:e}),tabKey:io},r===io&&e&&Xn(Qn,null)))),Xn(fi.Z,{sx:no,onClick:()=>t(!0)}))),[r,n,e])};var co=n().createElement;const uo={px:"16px",pb:["80px","0px"],".description":{fontSize:"14px",mb:"40px",lineHeight:"20px",color:"t.secondary"}};function mo(){const{getI18n:e}=(0,g.yk)(),{getI18n:t}=f(),r=(0,o._n)(),a=(0,$t.tZ)(),[i]=(0,o.z4)(),n=(0,X.CN)(oe.x.TWAP_LEARN_URL,{locale:a,symbol:i}),s=r?"login":"notLogin";return co(c.Z,{sx:uo},co("div",{className:"description"},e("twapEntry-description",{defaultValue:"Time-Weighted Average Price (TWAP) is the average price calculated over a period of time. TWAP trading algorithm aims to execute a trade over a user-specified period of time so that the average execution price is approximately in line with the time-weighted average price of that period."}),co(ze.dh,{link:`/${a}/support/faq/80655cc54d8a4b2bb8ea097001844fd1`,fontSize:14,ml:"4px","data-testid":`ordertype_twap_${s}_learnMore`})),r?co(De.Z,{as:"a",width:1,py:"10px",variant:"primary",target:"__blank",href:n,"data-testid":"ordertype_twap_login_create"},e("create",{defaultValue:"Create"})):co(Ke,{getI18n:t,registerTestId:"ordertype_twap_notLogin_register",loginTestId:"ordertype_twap_notLogin_login"}))}var po=n().createElement;const fo=()=>{const{isMobile:e}=(0,o.Fs)(),[t]=(0,g.K5)();return po(n().Fragment,null,!e&&po(ja,null),po(ii,null,e&&po(n().Fragment,null,po(pe,null),po(Ka,{my:"16px",px:"16px"})),t===d.Jm.TWAP?po(mo,null):po(n().Fragment,null,po(l.Z,{px:"16px",justifyContent:"space-between",alignItems:"center"},po(E,null),po(lo,null)),po(c.Z,{px:"16px",pb:"16px"},po(oa,{horizontal:!1,side:"both"})))),po(Qa,null),po(n().Fragment,null,po(se.Z,null),po(pi,null)))};var go=n().createElement;const yo={bg:"popupBg",fontSize:"14px",".order-tabs-and-margin-type-container":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",minHeight:"24px",pt:"10px",px:"16px",boxSizing:"border-box","&.hedge-mode":{pt:"0"},".fee-and-preference-container":{display:"flex",alignItems:"center",ml:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},".draggable-area":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},ho={flex:"1",ml:"8px",mr:0},bo={width:"50%",pl:"16px",mr:0},vo=()=>{const[e]=(0,g.hN)(),[t]=(0,g.UI)();return go(c.Z,{sx:yo},e&&go(n().Fragment,null,go("div",{className:"positions-tab-container"},go(G,{flex:1}),go("div",{className:"fee-and-preference-container"},go(ra,null),go(Ma,null))),go("div",{className:"draggable-area draggableHandle"})),go("div",{className:W()({"order-tabs-and-margin-type-container":!0,"hedge-mode":e})},go(Ka,null),t&&go(J.Z,{sx:e?bo:ho}),!e&&go("div",{className:"fee-and-preference-container"},go(ra,null),go(Ma,null))),go("div",{className:"draggable-area draggableHandle"},!e&&go("div",{className:"divider"})))};var xo=n().createElement;const So={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},ko=()=>{const[e]=(0,g.K5)();return xo(c.Z,{sx:So},xo(vo,null),xo(ii,null,e===d.Jm.TWAP?xo(mo,null):xo(n().Fragment,null,xo("div",{className:"flex-row form-subheader"},xo(Lr,{className:"reduce-only-checkbox"}),xo(Rr,{className:"tif-selector"}),xo("div",{className:"balance-container"},xo(E,null)),xo(lo,null)),xo("div",{className:"flex form-container"},xo(oa,{horizontal:!0,side:"buy",className:"buy-form"}),xo(oa,{horizontal:!0,side:"sell",className:"sell-form"})))),xo(Qa,null))};var Po=r("sIpC"),To=n().createElement;const Co={color:"t.yellow200",textDecoration:"none"},wo=()=>{const{getI18n:e}=(0,g.yk)(),[t]=(0,o.z4)(),r=(0,o.tZ)(),a=(0,Z.CN)(oe.x.GRID_TRADING_URL,{locale:r,symbol:t}),n=(0,o._n)(),s=(0,i.useCallback)((e=>{e.preventDefault(),n?window.open(a,"_blank"):(0,Po.G)(r)}),[n,r,a]);return To(c.Z,{as:"a",target:"_blank",onClick:s,href:(0,Z.CN)(oe.x.GRID_TRADING_URL,{locale:r,symbol:t}),sx:Co},e("grid-trading",{defaultValue:"Grid Trading"}))};var Io=r("SVGq"),Mo=n().createElement;const Eo={flex:"none",display:"inline-block",width:"79px",height:"24px",p:0,mr:"5px",bg:"line",borderRadius:"2px",lineHeight:"24px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:"t.primary",fontSize:"12px",textAlign:"center",cursor:"pointer",":hover":{color:"t.yellow200"},"&.disabled":{bg:"bg3",color:"t.disabled",cursor:"not-allowed"}},No=()=>{const{getI18n:e}=(0,g.yk)(),{marginAsset:t}=(0,o.j2)(),r=(0,o._n)();return Mo(Io.Z,{as:"a",sx:Eo,className:r?"":"disabled",onClick:()=>{P.T.emit(P.F.OPEN_TRANSFER_MODAL,t)},"data-testid":"orderform-transfer-button"},e("transfer",{defaultValue:"Transfer"}))};var Zo=n().createElement;const Ao={bg:"popupBg",fontSize:"14px",".order-tabs-container":{display:"flex",flexDirection:"row",alignItems:"center",minHeight:"24px",pt:"10px",pl:"16px",boxSizing:"border-box","&.hedge-mode":{pt:"0"}},".order-tabs-right-container":{display:"flex",flexDirection:"row",alignItems:"center",ml:"auto","> a, > div":{mr:"16px"}},".positions-tab-container":{display:"flex",flexDirection:"row",justifyContent:"space-between",bg:"moduleBg",".fee-and-preference-container":{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:"1",pr:"16px",borderBottom:"1px solid",borderBottomColor:"modalBg",".tooltip-label":{mr:"16px"}}},".space":{pb:"20px"},".divider":{pt:"10px",borderBottom:"1px solid",borderBottomColor:"modalBg"}},Oo=()=>{const[e]=(0,g.hN)(),t=(0,g.G3)();return Zo(c.Z,{sx:Ao},e&&Zo(n().Fragment,null,Zo("div",{className:"positions-tab-container"},Zo(G,{flex:1}),Zo("div",{className:"fee-and-preference-container"},Zo(ra,null),Zo(Ma,null))),Zo("div",{className:"space"})),Zo("div",{className:W()({"order-tabs-container":!0,"hedge-mode":e})},Zo(Ka,null),Zo("div",{className:"order-tabs-right-container"},!t&&Zo(wo,null),Zo(No,null),!e&&Zo(ra,null),!e&&Zo("div",null,Zo(Ma,null)))),Zo("div",{className:"space"},!e&&Zo("div",{className:"divider"})))};var Ro=n().createElement;const Vo={".flex":{display:"flex",alignItems:"center",justifyContent:"space-between"},".form-subheader":{px:"16px"},".form-container":{px:"16px",pb:"16px",".buy-form, .sell-form":{width:"calc(50% - 15px)"}},".flex-row":{display:"flex",flexDirection:"row",alignItems:"center"},".reduce-only-checkbox":{mt:0,mr:"16px"},".tif-selector":{mr:"auto",mt:0},".balance-container":{flex:"1",mr:"4px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden","> div":{justifyContent:"flex-end"}}},Lo=()=>{const[e]=(0,g.K5)();return Ro(c.Z,{sx:Vo},Ro(Oo,null),Ro(ii,null,e===d.Jm.TWAP?Ro(mo,null):Ro(n().Fragment,null,Ro("div",{className:"flex-row form-subheader"},Ro(Lr,{className:"reduce-only-checkbox"}),Ro(Rr,{className:"tif-selector"}),Ro("div",{className:"balance-container"},Ro(E,{transfer:!1})),Ro(lo,null)),Ro("div",{className:"flex form-container"},Ro(oa,{horizontal:!0,side:"buy",className:"buy-form"}),Ro(oa,{horizontal:!0,side:"sell",className:"sell-form"})))),Ro(Qa,null),Ro(n().Fragment,null,Ro(se.Z,null),Ro(pi,null)))};var Fo=r("Q9ZO"),Do=n().createElement;const _o=(0,s.ck)("afterLogin",(()=>Promise.all([r.e(374),r.e(712),r.e(285)]).then(r.bind(r,"rjKl")))),zo=({type:e=Fo.C.Normal})=>{const t=(0,o._n)(),r=(0,o.Pc)(),{isExistFutureAccount:a}=r;if(t&&!a)return Do(_o,null);switch(e){case Fo.C.Normal:return Do(fo,null);case Fo.C.Horizontal:return Do(ko,null);case Fo.C.FullScreen:return Do(Lo,null);default:return null}},Bo=n().memo(zo)},"4m5F":(e,t,r)=>{"use strict";r.d(t,{SI:()=>b,SW:()=>v,AO:()=>x,ze:()=>S});var a=r("5vwO"),i=r("EPGa");const n={type:"input",name:"price",withHelper:!0,isPrice:!0},o={type:"input",name:"quantity",minKey:"minQty",stepKey:"minQty",isBase:!0},s={type:"slider",name:"sliderQuantity"},l={type:"input",name:"total",minKey:"minTotal",stepKey:"minTotal",withHelper:!0,needLogin:!0},c={type:"input",name:"stopPrice",withHelper:!0,isPrice:!0},u={type:"input",name:"triggerPrice",isPrice:!0},d={type:"input",name:"stopLimitPrice",withHelper:!0,isPrice:!0},m={type:"hr",name:"hr"},p={type:"amount",name:"amount",needLogin:!0},f={type:"cost",name:"cost",needLogin:!0},g={type:"placeOrderButton",name:"placeOrderButton"},y={type:"advanced",name:"advanced"},h={type:"maxAmount",name:"maxAmount",needLogin:!0},b=(i.Jm.LIMIT,i.Jm.MARKET,i.Jm.STOPLIMIT,i.Jm.OCO,i.Jm.LIMIT,i.Jm.MARKET,i.Jm.STOP_LIMIT,i.Jm.STOP_MARKET,i.Jm.TRAILING_STOP_MARKET,i.Jm.POST_ONLY,{[i.Jm.LIMIT]:{enableReduceOnly:!0,enableStopPrice:!1,enableTIF:!0,enableTrigger:!1,enableStrategy:!0,enableAdvanced:!0},[i.Jm.MARKET]:{enableReduceOnly:!0,enableStopPrice:!1,enableTIF:!1,enableTrigger:!1,enableStrategy:!0,enableAdvanced:!1},[i.Jm.STOP_LIMIT]:{enableReduceOnly:!0,enableStopPrice:!0,enableTIF:!0,enableTrigger:!0,enableStrategy:!0,enableAdvanced:!0},[i.Jm.STOP_MARKET]:{enableReduceOnly:!0,enableStopPrice:!0,enableTIF:!1,enableTrigger:!0,enableStrategy:!0,enableAdvanced:!0},[i.Jm.TAKE_PROFIT_LIMIT]:{enableReduceOnly:!1,enableStopPrice:!0,enableTIF:!0,enableTrigger:!0,enableStrategy:!1},[i.Jm.TAKE_PROFIT_MARKET]:{enableReduceOnly:!1,enableStopPrice:!0,enableTIF:!1,enableTrigger:!0,enableStrategy:!1},[i.Jm.TRAILING_STOP_MARKET]:{enableReduceOnly:!0,enableStopPrice:!1,enableTIF:!1,enableTrigger:!0,enableStrategy:!1,enableAdvanced:!0},[i.Jm.POST_ONLY]:{enableReduceOnly:!0,enableStopPrice:!1,enableTIF:!1,enableTrigger:!1,enableStrategy:!0,enableAdvanced:!0}}),v=(i.Jm.LIMIT,i.Jm.MARKET,i.Jm.STOP_LIMIT,i.Jm.STOP_MARKET,{cont:"cont",coin:"coin"}),x={usdt:"usdtFuturesUSDT",coin:"usdtFuturesCoin"},S=10,k={key:"takeProfitStopPrice",name:"takeProfitStopPrice",inputBefore:"takeProfit"},P={key:"stopLossStopPrice",name:"stopLossStopPrice",inputBefore:"stopLoss"};(0,a.Z)((0,a.Z)({},k),{},{inputBefore:"advancedStrategy-takeProfitStopPrice"}),(0,a.Z)((0,a.Z)({},P),{},{inputBefore:"advancedStrategy-stopLossStopPrice"})},kjyE:(e,t,r)=>{"use strict";r.d(t,{N3:()=>o,JX:()=>s,XC:()=>c,CN:()=>u,_p:()=>m});var a=r("4xt1"),i=(r("AHTf"),r("EPGa"));const n=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/;function o(e){const t=`${e}`.match(n);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function s(e,t){return isNaN(+e)?"":(0,a.PD)(e).toFixed(t,1)}function l(e,t){return e.reduce(((e,r)=>(e[r]={value:void 0!==t[r]?t[r]:"",invalid:!1},e)),{})}function c(e,t={sliderQty:0}){switch(e){case i.Jm.LIMIT:case i.Jm.POST_ONLY:return l(["price","quantity","sliderQty","takeProfitPrice","takeProfitStopPrice","stopLossPrice","stopLossStopPrice"],t);case i.Jm.MARKET:return l(["quantity","sliderQty","takeProfitPrice","takeProfitStopPrice","stopLossPrice","stopLossStopPrice"],t);case i.Jm.STOP_LIMIT:return l(["triggerPrice","price","quantity","sliderQty","takeProfitPrice","takeProfitStopPrice","stopLossPrice","stopLossStopPrice"],t);case i.Jm.STOP_MARKET:return l(["triggerPrice","quantity","sliderQty","takeProfitPrice","takeProfitStopPrice","stopLossPrice","stopLossStopPrice"],t);case i.Jm.TRAILING_STOP_MARKET:return l(["callbackRate","activationPrice","quantity","sliderQty"],t);default:return l([],t)}}function u(e="",t={}){return Object.keys(t).reduce(((e,r)=>e.replace(new RegExp(`%${r}%`,"g"),t[r])),e)}const d=e=>/[^\d|.|,|\u3002|e-]/.test(e),m=(e,t,r,a)=>{let i=e.target.value;return Number(i)<0&&(i="0"),d(Number(i))?"":(/\u3002|,/.test(i)&&(i=i.replace(/[\u3002|,]/g,".")),/^0\d/.test(i)?i="0":/^\./.test(i)?i=0+i.substring(0,a+1):Number(i)>=0&&-1!==i.indexOf(".")&&i.split(".")[1].length>=a&&(i=i.replace(new RegExp(`^(\\d*\\.\\d{${a}})\\d*`),"$1")),Number.isNaN(Number(i))?"":(r?t(r,i):t(i),i))}},EPGa:(e,t,r)=>{"use strict";let a,i,n;r.d(t,{xy:()=>a,g:()=>i,Jm:()=>n,OO:()=>o,HZ:()=>s,q0:()=>l,PR:()=>c,RS:()=>u}),function(e){e.SPOT="SPOT",e.CROSS="CROSS",e.ISOLATED="ISOLATED",e.FUTURES="FUTURES",e.DELIVERY="DELIVERY"}(a||(a={})),function(e){e.BUY="BUY",e.SELL="SELL"}(i||(i={})),function(e){e.LIMIT="LIMIT",e.MARKET="MARKET",e.OCO="OCO",e.STOPLIMIT="STOPLIMIT",e.STOP_LIMIT="STOP",e.STOP_MARKET="STOP_MARKET",e.TAKE_PROFIT_LIMIT="TAKE_PROFIT",e.TAKE_PROFIT_MARKET="TAKE_PROFIT_MARKET",e.TRAILING_STOP_MARKET="TRAILING_STOP_MARKET",e.POST_ONLY="POST_ONLY",e.LIQUIDATION="LIQUIDATION",e.TWAP="TWAP"}(n||(n={}));const o={STOP_LIMIT:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStop",POST_ONLY:"postOnly"},s={LAST_PRICE:"CONTRACT_PRICE",MARK_PRICE:"MARK_PRICE"},l={NORMAL:"NORMAL",BORROW:"BORROW",REPAY:"REPAY"},c={LONG:"LONG",SHORT:"SHORT",BOTH:"BOTH"};let u;!function(e){e.OPEN="OPEN",e.CLOSE="CLOSE",e.BOTH="BOTH"}(u||(u={}))},Io4e:(e,t,r)=>{"use strict";r.d(t,{Z:()=>K});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("AVT8"),s=r("OV9X"),l=r("XhNN"),c=r("HWFi"),u=r("e5RN"),d=r("X46w"),m=r("wgY5"),p=r.n(m),f=r("4xt1"),g=r("Vg22"),y=r("EPGa"),h=r("4m5F"),b=r("COFI"),v=r("bmcq"),x=r("wby9"),S=r("pVAJ"),k=r("IOB8"),P=r("8Y2u"),T=r("Q2PN"),C=r("xGav"),w=r("wdcV"),I=r("cucV"),M=r("yxRq"),E=r("2ynj");const N=({symbol:e,positionSide:t,orderPrice:r,assumePrice:i,triggerPrice:n,activationPrice:o,orderAmount:s,formType:l,side:c,cost:u,openLost:d,reduceOnly:m=!1})=>{const p=(0,g.useSelector)(k.Y),f=(0,P.$J)(),y=(0,g.useSelector)(T._Y),h=(0,g.useSelector)(C.G),b=(0,S.iB)(),{marginAsset:v="USDT"}=(null===b||void 0===b?void 0:b[e])||{},x=(null===y||void 0===y?void 0:y[v])||{},N=(0,w._g)(e,t),Z=f[N]||{},{entryPrice:A,positionSize:O,isolatedWallet:R,bidNotional:V,askNotional:L}=Z,F=Math.abs(O),D=Number(O),_=1===c&&D<0||-1===c&&D>0,{takerCommission:z}=(0,E.a)();if(_&&F&&(F===s||F<s&&m))return{liquidationPrice:0,currentPosition:Z};const{estIsolatedWallet:B,estCrossWalletBalance:K}=(0,M.VX)({entryPrice:A,positionSize:O,orderPrice:r,assumePrice:i,triggerPrice:n,activationPrice:o,orderAmount:s,formType:l,side:c,isolatedWallet:R,crossWalletBalance:(null===x||void 0===x?void 0:x.crossWalletBalance)||0,cost:u,openLost:d,bidNotional:V,askNotional:L,takerCommission:(z||0)/1e6}),q=(0,a.Z)((0,a.Z)({},Z),{},{entryPrice:(0,M.dK)({entryPrice:A,positionSize:O,orderPrice:r,assumePrice:i,triggerPrice:n,activationPrice:o,orderAmount:s,formType:l,side:c}),positionSize:(0,M.iZ)({positionSize:O,orderAmount:s,side:c}),isolatedWallet:B}),W=Object.values((0,a.Z)((0,a.Z)({},f),{},{[N]:(0,a.Z)({},q)})),H=(0,w.nn)({positions:(0,w.J9)(W),marginAsset:v}),U=(0,I.Zk)(p,[q],(0,a.Z)((0,a.Z)({},y),{[v]:(0,a.Z)((0,a.Z)({},y[v]),{},{crossWalletBalance:K})}),h,e,!0,!1,H),{liquidationPrice:j=0}=(null===U||void 0===U?void 0:U[0])||{};return{liquidationPrice:j,currentPosition:q}};var Z=r("rdEq"),A=r("Gbz3"),O=r("SnVb"),R=r("FOuV");const V=({orderType:e,equalQtyPrecision:t,marketStepSize:r,limitStepSize:a,tickSize:n=2,unit:o})=>(0,i.useCallback)(((i=!0)=>{let s;return s=(0,R.Br)(e)?r:a,o===h.SW.coin&&(s=t),(void 0===i||i)&&o===h.AO.usdt&&(s=n),s}),[e,o,r,a,t,n]);var L=n().createElement;const F={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}};let D=1;const _=[y.Jm.STOP_LIMIT,y.Jm.STOP_MARKET,y.Jm.TAKE_PROFIT_LIMIT,y.Jm.TAKE_PROFIT_MARKET],z=[y.Jm.MARKET,y.Jm.STOP_MARKET,y.Jm.TAKE_PROFIT_MARKET],B=({label:e,value:t,unit:r,labelClassName:a="",valueClassName:i="",className:n=""})=>L("div",{className:`field ${n}`},L("div",{className:`label ${a}`},e),L("div",{className:`value ${i}`},t," ",r||"")),K=(0,i.forwardRef)((({symbol:e,quote:t,ticker:r,base:m,marginAsset:S},k)=>{var P;const{0:T,1:C}=(0,i.useState)(!1),{0:w,1:I}=(0,i.useState)({}),{0:M,1:E}=(0,i.useState)(""),K=(0,g.useSelector)(v.Lu),{getI18n:q}=(0,A.yk)(),W=(0,g.useDispatch)(),{unit:H="cont",orderConfirmation:U,positionMode:j,assetMode:$=!1}=(0,A.F7)(),[G]=(0,A.uD)(),{orderType:J=y.Jm.LIMIT,placeOrder:Y,bCost:Q="",sCost:X="",positionDirection:ee=y.RS.OPEN,isDelivery:te=!1,Cont:re,buyOpenLost:ae="",sellOpenLost:ie="",contractVal:ne="",getAssumePrice:oe=(()=>{}),orderForm:se={}}=w,{triggerPrice:le="",price:ce="",buyQty:ue="",sellQty:de="",side:me=y.g.BUY,callbackRate:pe,activationPrice:fe="",positionSide:ge=y.PR.BOTH,buyCost:ye,sellCost:he,availableBalance:be,tickSize:ve,limitStepSize:xe,marketStepSize:Se,takeProfitStopPrice:ke,stopLossStopPrice:Pe,takeProfitStopPriceWorkingType:Te,stopLossStopPriceWorkingType:Ce,strategySide:we}=se||{},Ie=1===we?y.g.BUY:y.g.SELL,{reduceOnly:Me=!1}=K||{},{BuyText:Ee,SellText:Ne}=(0,A.x_)(ee),Ze=Number(ke)||0,Ae=Number(Pe)||0,Oe=!Me&&ee!==y.RS.CLOSE&&G&&!(!Ze&&!Ae)&&Ie===me,Re=Number(null===(P=(0,A.CE)()[e])||void 0===P?void 0:P.markPrice),Ve=me===y.g.BUY,Le=Ve?"buy":"sell",Fe=Ve?"button.buyHover":"button.sellHover",De=Ve?Ee:Ne,{0:_e,1:ze}=(0,i.useState)(!1),{equalQtyPrecision:Be=2}=r,Ke=ve,qe=Ve?ue:de,We=Ve?ye:he,He=Ve?Q:X,Ue=q(Te===y.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),je=q(Ce===y.HZ.LAST_PRICE?"lastPrice":"tradeHistory-positions-markPriceTitle",{defaultValue:"Last Price"}),$e=Ve?ae:ie,Ge=te?x.C:N,Je=V({orderType:J,equalQtyPrecision:Be,marketStepSize:Se,limitStepSize:xe,tickSize:ve,unit:H})(),Ye=(0,O.Z)({orderType:J,qty:qe,triggerPrice:le,orderPrice:se.price,contractVal:ne,activationPrice:fe,lastPrice:se.oLastPrice,markPrice:Re,isDelivery:te,precision:Je}),Qe=H===h.SW.coin||H===h.AO.usdt?Ye:Number(me===y.g.BUY?ue:de||0),{currentPosition:Xe,liquidationPrice:et}=Ge({symbol:e,positionSide:ge,orderPrice:Number(ce||0),assumePrice:oe(me===y.g.BUY?"bid":"ask")||0,triggerPrice:Number(le||0),activationPrice:Number(fe||0),orderAmount:Qe,formType:J,side:me===y.g.BUY?1:-1,cost:He,openLost:$e,contractVal:ne,reduceOnly:Me}),{liquidationPrice:tt,diff:rt}=(({currentPosition:e={},liquidationPrice:t,markPrice:r,places:a})=>{const{positionSize:n,entryPrice:o}=e||{};return(0,i.useMemo)((()=>{if(t<=0)return{liquidationPrice:"--",diff:"--"};const e=t-r;return{liquidationPrice:(0,f.uf)(t,a),diff:e}}),[a,n,o,t,r])})({currentPosition:Xe,liquidationPrice:et,markPrice:Re,places:Ke});let at;const{shortName:it}=(0,A.oO)();at=te?H===h.SW.coin?m:re:H===h.AO.coin?m:S,(0,i.useImperativeHandle)(k,(()=>({showOrderConfirmPanel:e=>{I(e),C(!0)}})));const{marginType:nt}=(0,A.se)(),ot=j&&ee===y.RS.CLOSE||nt===R.Yl.ISOLATED||J===R.PH.TRAILING_STOP_MARKET||He>be,st=(0,i.useCallback)((async()=>{if(_e){const e=(0,a.Z)((0,a.Z)({},U),{},{[J.toUpperCase()]:!1});W.preference.changeOrderConfirmation(e)}Y(se),C(!1)}),[_e,Y,se,U,J,W]);return(0,i.useEffect)((()=>{const e=setInterval((()=>{E(p()().format("YYYY-MM-DD HH:mm:ss"))}),1e3);return()=>clearInterval(e)}),[]),(0,i.useEffect)((()=>(0,b.GY)((async({name:e})=>{switch(e){case b.BV:T&&C(!1),D++;break;case b.DX:T&&st(),D++}}))),[st,D,T]),(0,i.useMemo)((()=>L(o.Z,{visible:T,tx:"orderForm.confirmPanel",variant:"container",sx:F,onMaskClick:()=>{C(!1)},onPressEnter:()=>{st()},onPressEsc:()=>{C(!1)}},L(s.Z,{variant:"title6",className:"title"},q("order-confirmation",{defaultValue:"Order Confirmation"})),L(B,{labelClassName:"highlight",label:it,value:De,valueClassName:`${Le} highlight`}),_.includes(J)&&L(B,{label:q("stopPriceTitle",{defaultValue:"Stop Price"}),value:(0,f.uf)(le,Ke),unit:t}),z.includes(J)&&L(B,{label:q("priceTitle",{defaultValue:"Price"}),value:q("market",{defaultValue:"Market"})}),!z.includes(J)&&(J===y.Jm.TRAILING_STOP_MARKET?L(n().Fragment,null,L(B,{label:q("callbackRate",{defaultValue:"Callback Rate"}),value:(0,f.uf)(pe,1),unit:"%"}),Number(fe)?L(B,{label:q("activationPrice",{defaultValue:"Activation Price"}),value:(0,f.uf)(fe,Ke),unit:t}):null):L(B,{label:q("priceTitle",{defaultValue:"Price"}),value:(0,f.uf)(ce,Ke),unit:t})),L(B,{label:q("orderQtyTitle",{defaultValue:"Order Qty"}),value:(0,f.Jp)(qe).toFixed(Je,1),unit:at}),ee===y.RS.OPEN&&L(B,{label:q("cost",{defaultValue:"Cost"}),value:We,unit:S}),!ot&&!$&&L(n().Fragment,null,L(l.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},L(B,{label:q("markPrice",{defaultValue:"Mark Price"}),value:(0,f.uf)(Re,Ke),unit:t})),L(l.Z,{mt:"16px",tx:"orderForm.confirmPanel",variant:"line"},L(B,{label:L(Z.m,{tip:L(s.Z,{as:"div"},q("estLiquidationPriceTip",{defaultValue:""})),placement:"bottom"},q("estLiquidationPrice",{defaultValue:"Est. Liquidation Price"})),value:tt,unit:t})),L(B,{label:L(Z.m,{tip:L(s.Z,{as:"div"},q("estLiqMpDifferenceTip",{defaultValue:""})),placement:"bottom"},q("estLiqMpDifference",{defaultValue:"Est. Liquidation Price/Mark Price Difference"})),value:"--"===rt?rt:`${(0,f.uf)(100*(Re?Number(rt)/Re:0),2)}%`,unit:"--"===rt?"":`(${(0,f.uf)(rt,Ke)})`})),Oe&&L("div",{className:"top-line"},Ze?L(B,{label:q("takeProfit",{defaultValue:"Take Profit"}),value:`${Ue} ${Ve?">=":"<="} ${Ze}`,unit:t}):null,Ae?L(B,{label:q("stopLoss",{defaultValue:"Stop Loss"}),value:`${je} ${Ve?"<=":">="} ${Ae}`,unit:t}):null),J===y.Jm.MARKET&&!Oe&&L(s.Z,{variant:"caption",mt:3,color:"t.sell"},q("orderFailHint",{defaultValue:"Your order will fail should the market price deviate from the marked price by more than 2%"})),L("label",{className:"show-again"},L(c.Z,{className:"checkbox",onChange:()=>{ze(!_e)}}),q("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),L(u.Z,{mt:"24px",width:"100%"},L(d.Z,{colorStyle:"secondary",onClick:()=>{ze(!1),C(!1)},sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},q("cancelBtnText",{defaultValue:"Cancel"})),L(d.Z,{colorStyle:Le,onClick:st,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},De)))),[$,T,Le,De,it,q,J,le,Ke,t,pe,fe,ce,qe,Je,at,ee,We,Oe,Ze,Ue,je,Ve,Ae,Re,ot,tt,rt,_e,st,Fe,S])}))},Vnoa:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useConfirmStore:()=>D,AssetModeDialog:()=>z,default:()=>K,OrderConfirmationForm:()=>H,PositionSideForm:()=>U,PriceProtectionForm:()=>j,NotificationForm:()=>J,AssetModeFormComponent:()=>Y,AssetModeForm:()=>Q,OrderAmendment:()=>X});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("xpv6"),s=r("LHeJ"),l=r("Vg22"),c=r("fi7b"),u=r("XhNN"),d=r("AVT8"),m=r("e5RN"),p=r("OV9X"),f=r("LfFT"),g=r("X46w"),y=r("Z8nA"),h=r("wjiZ"),b=r("fglS"),v=r("KM4q"),x=r("yITN"),S=r("+4u2"),k=r("MvZp"),P=r("Bb2c"),T=r("pVAJ"),C=r("xgLV"),w=(r("C1dj"),r("6u/I")),I=r("v5rq"),M=r("WBfh"),E=r("AHTf"),N=r("kZs2"),Z=r("FOuV"),A=r("k4WF"),O=r("Gbz3"),R=n().createElement;const V=(0,E.nM)(),L={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},F=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"priceProtection",defaultI18n:"Price Protection",key:"pp"},{i18n:"preferenceNotification",defaultI18n:"Notification",key:"pn"},V?{i18n:"orderAmendment",defaultI18n:"Order Amendment",key:"oa"}:{i18n:"assetMode",defaultI18n:"Asset Mode",key:"am"}],D=(0,s.Z)((e=>({visible:!1,setVisible:t=>e((()=>({visible:t}))),assetMode:!1,setAssetMode:t=>e((()=>({assetMode:t})))}))),_=(0,i.forwardRef)(((e,t)=>{const{getI18n:r}=(0,O.yk)(),{0:a,1:n}=(0,i.useState)({}),{defaultActiveKey:o="oc"}=a,{0:s,1:c}=(0,i.useState)(!1),{0:f,1:g}=(0,i.useState)(o),y=(0,l.useDispatch)(),h=(0,i.useCallback)((()=>{c(!1)}),[c]),b=D((e=>e.visible)),k=D((e=>e.setVisible)),P=D((e=>e.setAssetMode)),T=(0,O.$J)(),{multiAssetMarginEnable:C=!1}=(0,O.F7)(),w=new Set,I=Object.values(T).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!w.has(t)&&(w.add(t),!0)}return!1})).length,M=(0,i.useCallback)((e=>{y.preference.getFundingFeeNotify(),y.preference.getStopLimitOrderNotify(),c(!0),n(e)}),[y,c,n]);return(0,i.useImperativeHandle)(t,(()=>({showPreferencePanel:M}))),(0,i.useEffect)((()=>N.TB.on(N.FP.SHOW_PREFERENCE_PANEL,(e=>{M({defaultActiveKey:e})}))),[M]),(0,i.useEffect)((()=>{const{defaultActiveKey:e="oc"}=a;g(e)}),[a]),(0,i.useEffect)((()=>{y.preference.getFungFeeRange()}),[y.preference]),(0,i.useMemo)((()=>s||b?R(u.Z,null,R(d.Z,{visible:s,tx:"preference.dialog",variant:"container",onMaskClick:h},R(m.Z,{alignItems:"center",justifyContent:"space-between",tx:"preference.header",variant:"container"},R(p.Z,{tx:"preference.header",variant:"title"},r("preference",{defaultValue:"Preference"})),R(v.Z,{tx:"preference.header",variant:"close",onClick:h})),R(m.Z,{sx:{height:"496px"}},R(x.Z,{size:"large",variant:"vertical",controlledKey:f,onChange:e=>g(e)},F.map((({i18n:e,defaultI18n:t,key:a})=>"am"!==a||!V&&C?R(S.Z,{tab:R(p.Z,{variant:"subtitle2",marginRight:"24px",minWidth:"120px"},r(e,{defaultValue:t})),key:a,tabKey:a}):null))),R(u.Z,{sx:{borderLeft:"0.5px solid",borderColor:"line"},px:"24px",py:"24px",height:"100%",flex:"1"},R(B,{tabKey:f,hidePreferencePanel:h,setConfirmVisible:k,setAssetMode:P,isolatedPositionFlag:I})))),R(z,{confirmVisible:b,setConfirmVisible:k})):null),[C,I,P,k,b,s,h,f,r])})),z=({confirmVisible:e,setConfirmVisible:t})=>{const r=(0,l.useDispatch)(),{getI18n:a}=(0,O.yk)(),{t:n}=(0,O.$G)(),o=D((e=>e.assetMode)),{0:s,1:y}=(0,i.useState)(!1),{setMessageInfo:h}=(0,b.Y)(),v=(0,O.$J)(),x=(0,i.useRef)({});Object.values(v).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:t}=e;return!x.current[t]&&(x.current[t]=e,!0)}return!1}));const S=Object.values(x.current).filter((e=>e.isolated&&"BOTH"===e.positionSide)).length,k=(0,i.useCallback)((e=>r.preference.changeAssetMode({joinMargin:e})),[r.preference]),P=(0,i.useCallback)(((e,t)=>r.marginType.changeMarginType({marginType:t?Z.Yl.CROSSED:Z.Yl.ISOLATED,symbol:e})),[r.marginType]);return R(d.Z,{visible:e,tx:"preference.confirmDialog",variant:"container"},R(p.Z,{tx:"preference.confirmDialog",variant:"desc"},R(c.c,{t:n,i18nKey:(0,O.Gv)("isolatedAssetModeDes"),defaults:"Isolated margin positions are not supported under the Multi-Assets Mode. Please adjust all USD\u24c8-M Futures positions to cross margin mode in order to activate Multi-Assets Mode.",components:{text:R(p.Z,null),jump:R(p.Z,{tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"}})},values:{isolatedMode:a("isolatedMode",{defaultValue:"Isolated Mode"}),crossMode:a("crossMode",{defaultValue:"Cross Mode"})}})),R(u.Z,{mb:"24px",overflowY:"auto",maxHeight:"300px",width:"100%",pr:"12px"},Object.values(x.current).map((e=>{const{isolated:t,symbol:r,id:i}=e,n=t?a("headerIsolated",{defaultValue:"Isolated"}):a("Cross",{defaultValue:"Cross"});return R(m.Z,{mb:"8px",key:i,justifyContent:"space-between"},R(m.Z,{mb:0,tx:"preference.confirmDialog",variant:"desc"},r),R(m.Z,null,R(m.Z,{mb:0,mr:"8px",tx:"preference.confirmDialog",variant:"desc",fontSize:"12px"},n),R(f.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:!t,onChange:()=>{s||(y(!0),P(r,t).then((r=>{null!==r&&void 0!==r&&r.marginType&&(e.isolated=!t,h({header:a("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),message:a("changeMarginModeSuccess",{defaultValue:"change margin mode success"}),variant:"success"})),y(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))},name:i,color:"#2EBD85",size:16})))})),R(m.Z,{fontSize:"12px",color:"#F6465D"},a("switchCrossMode",{defaultValue:"*Please switch all positions to cross mode."}))),R(m.Z,{width:"100%",justifyContent:"space-around"},R(m.Z,{tx:"preference.confirmDialog",variant:"cancelButton"},R(g.Z,{variant:"default",colorStyle:"secondary",height:40,width:"100%",onClick:()=>{t(!1)}},a("cancelBtnText",{defaultValue:"Cancel"}))),R(m.Z,{tx:"preference.confirmDialog",variant:"confirm"},R(g.Z,{height:40,width:"100%",disabled:S,onClick:()=>{s||(y(!0),k(o).then((e=>{const{success:r}=e;r&&h({header:a("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:a("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}),t(!1),y(!1)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}},a("PreferenceConfirm",{defaultValue:"Confirm"})))))},B=e=>{const{tabKey:t}=e;switch(t){case"oc":return R(H,e);case"pm":return R(U,e);case"pp":return R(j,e);case"pn":return R(J,e);case"am":return R(Q,e);case"oa":return R(X,e);default:return null}},K=_,q=()=>{const{getI18n:e}=(0,O.yk)();return e(V?"settingDelivery":"settingPerpetual",{defaultValue:V?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},W=({name:e,label:t,checked:r,onChange:a,children:n})=>(0,i.useMemo)((()=>R(m.Z,{tx:"preference.switch",variant:"container"},R(m.Z,{tx:"preference.switch",variant:"header"},R(p.Z,{tx:"preference.switch",variant:"label"},t),R(f.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:r,onChange:a,name:e,color:"#2EBD85",size:24})),n)),[r,n,t,e,a]),H=({hidePreferencePanel:e})=>{const t=(0,i.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),{orderConfirmation:r}=(0,O.F7)(),{getI18n:n}=(0,O.yk)(),{setMessageInfo:o}=(0,b.Y)(),s=q(),c=(0,l.useDispatch)(),d=(0,i.useCallback)((e=>c.preference.changeOrderConfirmation(e)),[c.preference]),p=(0,i.useCallback)((e=>{d(e).then((e=>{const{success:t}=e;t?o({header:n("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),message:n("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."}),variant:"success"}):d(r)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[d,o,n,r]);return R(u.Z,null,t.current.map((e=>R(W,{key:e,name:e,label:`${n(L[e],{defaultValue:""})}   ${n("Order",{defaultValue:"Order"})}`,checked:r[e]||!1,onChange:t=>{const{target:i}=t;p((0,a.Z)((0,a.Z)({},r),{},{[e]:i.checked}))}}))),R(m.Z,{tx:"preference.content",variant:"header",sx:{lineHeight:["20px","16px"]}},n("order-confirmation-content",{defaultValue:""}),"\xa0",s))},U=()=>{const e=(0,l.useDispatch)(),{positionMode:t=!1}=(0,O.F7)(),{getI18n:r}=(0,O.yk)(),{enqueueNotification:a}=(0,k.Z)(),n=q(),o=(0,i.useCallback)((t=>e.preference.changePositionMode({dualSidePosition:t})),[e.preference]),s=(0,i.useCallback)((e=>{t!==e&&o(e).then((e=>{const{success:t}=e;t&&a({header:r("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),message:r("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."}),variant:"success"})})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[o,a,r,t]);return R(u.Z,null,R(u.Z,{mt:"27px","data-testid":"One-wayMode"},R(y.ZP,{name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:!1===t?"radio.t.active":"t.primary"},checked:!1===t,onCheckedChange:()=>{s(!1)}},R(u.Z,{tx:"preference.switch",variant:"label"},r("OneWayPosition",{defaultValue:"One-way Mode"}))),R(p.Z,{tx:"preference.radio",variant:"desc"},r("OneWayModeDes",{defaultValue:""}))),R(u.Z,{mt:"27px","data-testid":"HedgeMode"},R(y.ZP,{name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:!0===t?"radio.t.active":"t.primary"},checked:!0===t,onCheckedChange:()=>{s(!0)}},R(u.Z,{tx:"preference.switch",variant:"label"},r("TwoWayPosition",{defaultValue:"Hedge Mode"}))),R(p.Z,{tx:"preference.radio",variant:"desc"},r("TwoWayModeDes",{defaultValue:""}))),R(m.Z,{tx:"preference.content",variant:"header"},r("AdjustPositionModeDes",{defaultValue:""}),"\xa0",n))},j=()=>{const e=(0,T.tZ)(),t=(0,l.useDispatch)(),{getI18n:r}=(0,O.yk)(),{t:a}=(0,O.$G)(),{setMessageInfo:n}=(0,b.Y)(),{priceProtection:o}=(0,O.F7)(),s=q(),d=(0,i.useCallback)((e=>{(0,C.P2)({[V?"deliveryPriceDifferSwitch":"perpetualPriceDifferSwitch"]:e}).then((a=>{const{data:i}=a;i&&(n({header:r("AdjustPriceProtection",{defaultValue:"Adjust Price Protection"}),message:r("AdjustPriceProtectionSuccess",{defaultValue:"Price protection adjusted successfully"}),variant:"success"}),t.preference.updateState({priceProtection:e}))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[t.preference,r,n]);return R(u.Z,null,R(W,{name:"priceProtection",label:r("priceProtection",{defaultValue:"Price Protection"}),checked:o,onChange:e=>d(e.target.checked)}),R(m.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},R(c.c,{t:a,i18nKey:(0,O.Gv)("priceProtectionDes"),defaults:"<text>After enabling price protection, if the difference between the Last price and Mark price of the contract exceeds the set threshold when the stop loss / take profit orders reach the trigger price, the stop loss / take profit orders will not be triggered. View threshold in <jump>{{tradingRule}}</jump></text>",components:{text:R(p.Z,null),jump:R(h.Z,{href:`/${e}/futures/trading-rules/${V?"quarterly":"perpetual"}`,tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{tradingRule:r("trading-rules",{defaultValue:"Trading Rules"})}}),R(u.Z,{mt:10},s)))},$={pr:"54px","& .bn-input-tooltip":{minWidth:"238px",height:"32px",lineHeight:"32px",textAlign:"center",bg:"t.grey500",borderRadius:"4px",color:"t.grey0",fontSize:"sm",right:"-45px !important",bottom:"155% !important"},"& .bn-input-tooltip-arrow":{right:"63px !important"},"& .bn-input-tooltip-content":{padding:"7px 8px !important"},"& > div:nth-of-type(2)":{borderColor:"calculator.inputBorderColor"},"& .bn-input-status-error":{borderColor:"#D9304E !important"}},G=()=>{const{cap:e,floor:t}=(0,O.I3)(),{getI18n:r}=(0,O.yk)(),{setMessageInfo:a}=(0,b.Y)(),{0:n,1:o}=(0,i.useState)(null),[s,l]=(0,O.aT)(),[{isEnableFundingFeeNotify:c,fundingFee:d},p]=(0,O.CJ)(),{0:f,1:g}=(0,i.useState)(d);(0,i.useEffect)((()=>{d!==f&&g(d)}),[d]);const y=(0,i.useCallback)((()=>{a({header:r("AdjustNotification",{defaultValue:"Adjust Notification"}),message:r("AdjustNotificationSuccess",{defaultValue:"Notification adjusted successfully."}),variant:"success"})}),[]),h=(0,i.useCallback)((async e=>{const{target:{checked:t}}=e;try{(await l(t)).success&&y()}catch(e){Sentry.captureException(e)}}),[y]),v=(0,i.useCallback)((async e=>{try{o("");(await p({fundingFee:f,isEnable:e})).success&&y()}catch(t){Sentry.captureException(t),console.log(t)}}),[y,f]),x=(0,i.useCallback)((a=>{g(a),o(a<t||a>e?r("fundingFeeTriggerTips",{min:t,max:e,defaultValue:"Trigger is limited to {{min}}%-{{max}}%."}):null)}),[e,t,r]);return R(u.Z,null,R(W,{name:"priceProtection",label:r("TPSLTrigger",{defaultValue:"TP/SL Trigger"}),checked:s,onChange:h},R(u.Z,{tx:"preference.switch",variant:"desc"},r("TPSLTriggerDesc",{defaultValue:"TPSLTriggerDesc"}))),R(W,{name:"priceProtection",label:r("fundingFeeTrigger",{defaultValue:"Funding Fee Trigger"}),checked:c,onChange:e=>v(e.target.checked)},R(m.Z,{tx:"preference.switch",variant:"desc",alignItems:"center",sx:$},R(u.Z,{tx:"preference.switch",variant:"desc",sx:{pr:0}},r("fundingFeeTriggerDesc",{defaultValue:"You will be notified when funding fee reaches"})),R(P.Z,{boxProps:{width:"80px",minWidth:"80px",height:"24px",ml:"minor",mt:0,mb:0},variant:"inline",type:"number",value:f,onChange:e=>(0,A._p)(e,x,"",4),onBlur:e=>{(0,A.Y5)(e),v(!0)},errorText:n,error:n,suffix:"%",disabled:!c}))),R(m.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},r("preferenceNotificationDes",{defaultValue:"preferenceNotificationDes"})))},J=n().memo(G),Y=({setConfirmVisible:e,setAssetMode:t,isolatedPositionFlag:r=!1})=>{const a=(0,l.useDispatch)(),{assetMode:n}=(0,O.F7)(),{getI18n:o}=(0,O.yk)(),{t:s}=(0,O.$G)(),{enqueueNotification:d}=(0,k.Z)(),f=(0,T.tZ)(),{0:g,1:b}=(0,i.useState)(!1),v=(0,i.useCallback)((e=>a.preference.changeAssetMode({joinMargin:e})),[a.preference]),x=(0,i.useCallback)((a=>{if(!g){if(r)return e(!0),void t(a);b(!0),v(a).then((e=>{const{success:r}=e;r?d({header:o("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:o("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):t(a),b(!1)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e),b(!1),t(a)}))}}),[g,r,d,t,e,v,o,n]);return R(u.Z,null,R(u.Z,{mb:"27px"},R(y.ZP,{name:"assetMode",value:"false",sx:{svg:{borderWidth:"1px"},color:!1===n?"radio.t.active":"t.primary"},checked:!1===n,onChange:()=>{x(!1)}},R(u.Z,{tx:"preference.switch",variant:"label"},o("singleAsset",{defaultValue:"Single-Asset Mode"}))),R(p.Z,{tx:"preference.radio",variant:"desc"},o("singleAssetDes",{defaultValue:"Supports USD\u24c8-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."}))),R(u.Z,{mb:"27px"},R(y.ZP,{name:"assetMode",value:"true",sx:{svg:{borderWidth:"1px"},color:!0===n?"radio.t.active":"t.primary"},checked:!0===n,onChange:()=>{x(!0)}},R(u.Z,{tx:"preference.switch",variant:"label"},o("multiAssets",{defaultValue:"Multi-Assets Mode"}))),R(p.Z,{tx:"preference.radio",variant:"desc"},o("multiAssetsDes",{defaultValue:"USD\u24c8-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."}))),R(m.Z,{tx:"preference.content",variant:"header",flexDirection:"column"},R(c.c,{t:s,i18nKey:(0,O.Gv)("assetModeDes"),defaults:"<text>Multi-Assets Mode only applies to USD\u24c8-M Futures. Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USD\u24c8-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:R(p.Z,{mt:"8px"}),jump:R(h.Z,{href:`/${f}/support/faq/29b45c485d664028b9ca1cdf90b24f6f`,tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:o("guide",{defaultValue:"guide"})}})))},Q=n().memo(Y),X=n().memo((({hidePreferencePanel:e})=>{const{getI18n:t}=(0,O.yk)(),[r,a]=(0,o.g)(Z.Zv,Z.Xd),[,,n]=(0,I.$q)(w.O7)(M.QQ),{0:s,1:l}=(0,i.useState)(r.kLine),{0:c,1:d}=(0,i.useState)(r.needConfirm),p=(0,i.useCallback)((e=>{l(e.target.checked),n(e.target.checked)}),[n]),f=(0,i.useCallback)((e=>d(e.target.checked)),[]);return R(u.Z,null,R(W,{name:"kLineAmendment",label:t("KLineAmendment",{defaultValue:"KLine Amendment"}),checked:s,onChange:p},R(u.Z,{tx:"preference.switch",variant:"desc"},t("KLineAmendmentDesc",{defaultValue:"KLine Amendment Desc"}))),R(W,{name:"amendmentConfirmation",label:t("amendmentConfirmation",{defaultValue:"Amendment Confirmation"}),checked:c,onChange:f},R(u.Z,{tx:"preference.switch",variant:"desc"},t("amendmentConfirmationDesc",{defaultValue:"Amendment Confirmation Desc"}))),R(m.Z,{tx:"preference.confirm",variant:"buttonConfirm"},R(g.Z,{height:40,width:"100%",onClick:()=>{a({kLine:s,needConfirm:c}),e()}},t("PreferenceConfirm",{defaultValue:"Confirm"}))))}))},Bsyd:(e,t,r)=>{"use strict";r("/SIk");var a=r("kjyE"),i=r("EPGa");i.Jm.LIMIT,(0,a.XC)(i.Jm.LIMIT),i.Jm.POST_ONLY,(0,a.XC)(i.Jm.POST_ONLY),i.Jm.MARKET,(0,a.XC)(i.Jm.MARKET),i.Jm.STOP_LIMIT,(0,a.XC)(i.Jm.STOP_LIMIT),i.Jm.STOP_MARKET,(0,a.XC)(i.Jm.STOP_MARKET),i.Jm.TRAILING_STOP_MARKET,(0,a.XC)(i.Jm.TRAILING_STOP_MARKET)},Wx6g:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("tS/l");const i=({children:e})=>{const{isMobile:t,isIPad:r}=(0,a.F)();return e&&e({isMobile:t,isIPad:r})}},cEEj:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=r("sZZk"),l=n().createElement;const c=e=>{let{mediaQuery:t,children:r}=e,n=(0,a.Z)(e,["mediaQuery","children"]);const c=(0,s.useMediaQuery)({query:t||"(max-width: -1)"})||void 0===t;return(0,i.useMemo)((()=>c?l(o.Z,Object.assign({sx:{width:"100%",height:"100%",display:"none",[`@media ${t}`]:{display:"block"}}},n),r):null),[c,r,n,t])},u=e=>{let{children:t,mediaQuery:r,renderInSSR:i}=e,n=(0,a.Z)(e,["children","mediaQuery","renderInSSR"]);return l("div",{suppressHydrationWarning:!0},l(c,Object.assign({mediaQuery:r},n),t))},d=(0,i.memo)(u)},keMM:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r("5vwO"),i=r("/SIk"),n=r("Uqe+"),o=r("M1RT"),s=r("Q+Nz"),l=r("S24M"),c=r("pVAJ"),u=r("Gbz3"),d=r("AHTf"),m=r("Vg22"),p=r("M8Qk"),f=r("kZs2"),g=r("kO20"),y=r("ux7Q"),h=r("IewQ");const b=()=>{const[e]=(0,c.z4)(),[t]=(0,c.uT)(),{isLight:r}=(0,c.Fg)(),b=(0,m.useSelector)((e=>e.setting.color)),v=(0,u.C3)(),[x={}]=(0,n.Z)(d.Ze),{userId:S}=(0,c.Pc)();let{layout:k}=(0,c.lr)();return k=(0,f.XY)([d.UW,d.$f],k,d.$f),(0,i.useEffect)((()=>{try{const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=g.Responsive.utils.getBreakpointFromWidth(y.j$,e),i=(x[t]||[]).map((e=>e.i)),n=JSON.parse(localStorage.getItem(h.w)||"null"),{sensors:s}=(0,o.Z)({sensorsConfig:{server_url:d.yB,staticHost:d.Xs,batch_send:!0,heatmap:{useCapture:!0,collect_elements:"all",scroll_notice_map:"default",clickmap:"default",track_attr:["data-testid"],custom_property(e){if(e){var t;const r={tag:"futuresng"},a=null===(t=e.dataset)||void 0===t?void 0:t.testid;return a&&(r.dataTestId=a),r}}},preset_properties:{url:!0},show_log:!1},ableGA:"test"!==d.vt});s.quick("autoTrack",(0,a.Z)((0,a.Z)({},{theme:r?d.rp:d.Py,tag:"futuresng",version:d.lO,chart:i.indexOf("chart")>-1,market:i.indexOf("market")>-1,depth:i.indexOf("verticalDepth")>-1,orderbook:i.indexOf("orderbook")>-1,trades:i.indexOf("trades")>-1,position:i.indexOf("userinfo")>-1,flashOrder:null===n||n,layout:v||k||d.$f,favorite:i.indexOf("favorite")>-1,assets:i.indexOf("assetsCard")>-1,marginRatio:i.indexOf("marginRatio")>-1,placeOrder:i.indexOf("orderForm")>-1,color:b}),d.jX?{channel:d.jX}:{})),(0,l.$0)(s)}catch(e){console.error("senor init error",e)}}),[t,e]),(0,i.useEffect)((()=>{S&&((0,s.Z)(S),(0,p.fs)(S),"undefined"!==typeof window.Sentry&&window.Sentry.setUser({id:S}))}),[S]),null}},COVG:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("KOx5"),s=r("YJCA"),l=i().createElement;const c={minWidth:"150px",backgroundColor:"rgba(255, 0, 0, .2)","& .sort-item":{boxShadow:"none !important"}},u={color:"t.primary",display:"flex",zIndex:1e4,backgroundColor:"popupBg",justifyContent:"space-between",alignItems:"center",padding:"8px 2px",fontSize:"12px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.3)","&:first-child":{marginTop:"16px"}},d=(0,s.W6)((()=>l(o.Z,{color:"t.third",size:20}))),m=(0,s.W8)((({value:e})=>l(n.Z,{sx:u,className:"sort-item"},e,l(d,null)))),p=(0,s.JN)((({children:e})=>l(n.Z,{sx:c},e))),f=({items:e,onSort:t})=>l(p,{transitionDuration:100,useDragHandle:!0,onSortEnd:({oldIndex:r,newIndex:a},i)=>{i.stopPropagation(),i.preventDefault();const n=e.map((e=>e.value)),[o]=n.splice(r,1);n.splice(a,0,o),t(n)}},e.map(((e,t)=>l(m,{key:e.value,value:e.label,index:t}))))},v2M8:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=i().createElement;function s(e){return o(n.Z,Object.assign({__css:{flexDirection:"column",height:"100%",px:"sm"}},e))}},Lbl8:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L,m:()=>R});var a=r("/SIk"),i=r.n(a),n=r("OV9X"),o=r("Rhv4"),s=r("vVzz"),l=r("AHTf"),c=r("lH+D"),u=r("onJf"),d=r("Uqe+"),m=r("Gbz3"),p=r("fi7b"),f=r("e5RN"),g=r("JTQp"),y=r("pVAJ"),h=i().createElement;const b=(e,t,r,a="png")=>`static/images/futures/assets/guide_${t}_${r?"light":"dark"}_${"zh-CN"===e?"cn":"en"}.${a}`,v=(e,t,r,a="png")=>`static/images/futures/assets/guide-${t}-${r?"light":"dark"}-${"zh-CN"===e?"cn":"en"}.${a}`;var x=i().createElement;const S={threshold:.3},k=()=>{const{t:e,i18n:{language:t},getI18n:r}=(0,m.yk)(),{isLight:i}=(0,y.Fg)(),o=(0,a.useRef)(null),{0:s,1:c}=(0,a.useState)("transferMargin"),u=(0,a.useMemo)((()=>((e,t,r)=>[{key:"transferMargin",title:t("TransferMargin",{defaultValue:"Transfer Margin"}),desc:{i18nKey:"TransferMarginDesc",defaultValue:"<transferFundsLink>Transfer Funds</transferFundsLink> to Futures account as margin for your futures trades to begin with. Transfer Funds to Future account as margin for your futures trades to begin with. We support\xa0USD\u24c8-M Futures trading across multiple margin assets",components:{transferFundsLink:h("a",{href:`/${e}/support/faq/360033773532`,target:"_blank",rel:"noreferrer"})},values:{transferFunds:t("TransferFunds",{defaultValue:"Transfer Funds"})}},imgPath:v(e,"transfermargin",r)},{key:"leverageMargin",title:t("LeverageMargin",{defaultValue:"Leverage & Margin"}),desc:{i18nKey:"LeverageMarginDesc",defaultValue:"You can adjust <leverageLink>Leverage</leverageLink> and switch between cross/isolated <marginModeLink>Margin Mode</marginModeLink> for different symbols.",components:{leverageLink:h("a",{href:`/${e}/support/faq/360034946672`,target:"_blank",rel:"noreferrer"}),marginModeLink:h("a",{href:`/${e}/support/faq/360038075852`,target:"_blank",rel:"noreferrer"})}},imgPath:b(e,"leveragemargin",r)},{key:"positionMode",title:t("position-mode"),desc:{i18nKey:"PositionModeDesc",defaultValue:"Set One-way or Hedge <positionModeLink>Position Mode</positionModeLink> in Preference.",components:{positionModeLink:h("a",{href:`/${e}/support/faq/360041513552`,target:"_blank",rel:"noreferrer"})}},imgPath:b(e,"positionmode",r,"gif")},{key:"orderType",title:t("tradeHistory-orderTypeTitle"),desc:{i18nKey:"OrderTypeDesc",defaultValue:"Choose an <orderTypeLink>Order Type</orderTypeLink> that best suits your trading strategy under different situations.",components:{orderTypeLink:h("a",{href:`/${e}/support/faq/360033779452`,target:"_blank",rel:"noreferrer"})}},imgPath:b(e,"ordertype",r)},{key:"closePosition",title:t("ClosePosition",{defaultValue:"Close position"}),desc:{i18nKey:"ClosePositionDesc",defaultValue:"<closeThePositionLink>Close the Position</closeThePositionLink> based on your exit strategy, or by setting <TPAndSLLink>TP/SL</TPAndSLLink>. Also learn more about <liqLink>Liquidation</liqLink> / <counterpartyLiqLink>Counterparty Liquidation</counterpartyLiqLink>.",components:{closeThePositionLink:h("a",{href:`/${e}/support/articles/360041515312-How-to-Open-or-Close-Position-in-Hedge-Mode`,target:"_blank",rel:"noreferrer"}),TPAndSLLink:h("a",{href:`/${e}/support/faq/e1ee1738141c49718550fa9061be4bf3`,target:"_blank",rel:"noreferrer"}),liqLink:h("a",{href:`/${e}/support/faq/360033525271`,target:"_blank",rel:"noreferrer"}),counterpartyLiqLink:h("a",{href:`/${e}/support/faq/360033525471`,target:"_blank",rel:"noreferrer"})}},imgPath:b(e,"closeposition",r)}])(t,r,i)),[t,r,i]),{isMobile:d}=(0,y.Fs)(),k=(0,a.useCallback)(((e,t)=>{c(t)}),[]),P=(0,a.useCallback)(((e,t,r)=>{const{target:a,isIntersecting:i,intersectionRatio:n}=e,o=a.childNodes[0];i&&n>r.threshold&&(c(a.id),o.src=o.dataset.src)}),[]);return(0,a.useEffect)((()=>{if(d)return;const e=document.getElementById(`step_${s}`),t=null===o||void 0===o?void 0:o.current,r=document.getElementById(s);e&&(null===e||void 0===e||e.scrollIntoView({})),t&&r&&t.scrollTo({top:r.offsetTop})}),[d,s]),(0,a.useEffect)((()=>{if(d)return;const e=document.querySelectorAll(".img-box"),t=new window.IntersectionObserver((e=>{e.forEach((e=>{P(e,t,S)}))}),S);return e.forEach((e=>t.observe(e))),()=>{t&&t.disconnect()}}),[d]),x(f.Z,{ref:o,className:"step-panel"},x("div",{className:"step-wrap"},u.map((({key:t,title:r,desc:a},i)=>{const{i18nKey:o,defaultValue:c,components:d,values:m}=a||{};return x("div",{id:`step_${t}`,className:"step-item"+(s===t?" active":""),key:t,onClick:e=>k(e,t)},x(f.Z,{className:"step-title"},x(n.Z,{variant:"title6",mr:10},i+1),x(n.Z,{variant:"subtitle2"},r)),x(n.Z,{variant:"body2",className:"step-desc"},x(p.c,{t:e,i18nKey:`futures-trade-${o}`,defaults:c,components:d,values:m})),x("div",{className:"img-box mobile"},x(g.Z,{src:`${l.Xs}/${u[i].imgPath}`})))}))),x("div",{className:"content-wrap"},u.map((({key:e,imgPath:t})=>x("div",{id:e,className:"img-box",key:e},x(g.Z,{src:"","data-src":`${l.Xs}/${t}`}))))))},P=i().memo(k);var T=r("X46w"),C=r("xwbA"),w=r("6eVz"),I=i().createElement;const M=({isQuiz:e,openStepGuideModal:t,closeStepGuide:r})=>{const{t:i,getI18n:o}=(0,m.yk)(),s=(0,a.useCallback)((e=>{r(),(0,w.F)(!0,{type:e,afterClose:t})}),[]);return I(f.Z,{className:"tutorial"},I(f.Z,{alignItems:"center",onClick:()=>s(l.g3)},I(C.Z,null),I(n.Z,{variant:"subtitle2",ml:"6px"},i("futures-quiz-tutorial"))),e?I(T.Z,{sz:"l",onClick:r},o("StartTrading",{defaultValue:"Start Trading"})):!1===e?I(T.Z,{sz:"l",onClick:()=>s(l.Nz)},o("TakeQuiz",{defaultValue:"Take Quiz"})):null)},E=i().memo(M),N={minWidth:["100%",640,720],maxWidth:["100%",640,720]},Z={height:["100%","500px"],py:18,px:24,bg:"modalBg",borderRadius:"6px","& .main-container":{height:["100%","auto"],display:"flex",flexDirection:"column"},"& .content-wrapper":{display:"flex",flex:1,minHeight:0},"& .overflow-container":{flex:1},"& .step-panel":{mt:40,mb:"plus",height:["calc(100% - 60px)",280],overflowY:"auto",overflowX:"hidden",justifyContent:"space-between","&::-webkit-scrollbar":{width:"3px",height:"5px"},"&::-webkit-scrollbar-thumb":{bg:"icons.close"}},"& .step-wrap":{position:"sticky",top:0,width:["100%",288],height:["100%",280],overflow:"auto","&::-webkit-scrollbar":{display:"none"},"&::-webkit-scrollbar-thumb":{bg:"transparent"}},"& .content-wrap":{position:"relative",display:["none","block"],width:["55%",280],py:"minor",textAlign:"right"},"& .step-item":{py:12,cursor:"pointer"},"& .step-title":{alignItems:"center",color:"t.yellow",opacity:[1,.5]},"& .step-desc":{pl:20,mb:"minor",maxHeight:["unset",0],opacity:[1,0],visibility:["visible","hidden"],color:"t.primary",transition:"max-height 0.2s ease-out, visibility 0.2s ease-out, opacity 0.2s linear","& > a":{color:"t.primary"}},"& .active .step-title":{color:"t.yellow",opacity:1},"& .active .step-desc":{opacity:1,visibility:"visible",maxHeight:["100%",200]},"& .img-box":{position:"relative",mb:120,ml:["20px","0px"],"&.mobile":{display:["block","none","none"]},"&:last-of-type":{mb:0},"& img":{width:276,height:276,"&::after":{position:"absolute",content:"''",top:0,left:0,width:"100%",height:"100%",display:"block",bg:"bg5"}}},"& .tutorial":{justifyContent:"space-between",alignItems:"center",cursor:"pointer",color:"t.third",":hover":{color:"t.primary"}}};var A=i().createElement;let O;const R=({title:e="",showFooter:t=!0,afterClose:r=(()=>{})}={})=>{c.Y.emit(l.yu,{visible:!0,title:e,showFooter:t,afterClose:r})},V=()=>{const{getI18n:e}=(0,m.yk)(),{isLoggedIn:t}=(0,u.f0)(),{isExistFutureAccount:r}=(0,u.Pc)(),[i,p]=(0,d.Z)(l.Gs),{0:f,1:g}=(0,a.useState)(),{0:y,1:h}=(0,a.useState)(!1),{0:b,1:v}=(0,a.useState)({title:"",showFooter:!0}),{title:x,showFooter:S}=b,k=(0,a.useCallback)((()=>{h(!1),"function"===typeof O&&O()}),[]);return(0,a.useEffect)((()=>c.Y.on(l.yu,(({visible:e,afterClose:t,title:r,showFooter:a})=>{h(e),r&&v({title:r,showFooter:a}),O=t}))),[]),(0,a.useEffect)((()=>{t&&r&&!i&&!y&&(h(!0),p(!0))}),[t,r,i,y]),(0,a.useEffect)((()=>{t&&r&&y&&(0,s.o)().then((({data:e})=>{g(e)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[t,r,y]),A(o.Z,{open:y,onCloseIconClick:k,sx:N,contentSx:Z},A("div",{className:"main-container"},A(n.Z,{variant:"headline6",color:"t.primary"},x||e("Welcome",{defaultValue:"Welcome to Binance Futures!"})),!f&&A(n.Z,{variant:"body2",color:"t.third",mt:"minor"},e("QuizTip",{defaultValue:"You need to pass the quiz before trading Futures."})),A("div",{className:"content-wrapper"},A("div",{className:"overflow-container"},A(P,null))),S&&A(E,{isQuiz:f,openStepGuideModal:R,closeStepGuide:k})))},L=i().memo(V)},rdEq:(e,t,r)=>{"use strict";r.d(t,{m:()=>g});var a=r("5vwO"),i=r("GpFh"),n=r("/SIk"),o=r.n(n),s=r("XhNN"),l=r("OV9X"),c=r("FZ38"),u=r("tS/l");const d={display:"flex",alignItems:"center",cursor:"help",color:"t.third",borderBottom:["1px dotted","1px dotted","none"],borderBottomColor:"t.third","&:hover":{color:"t.primary",borderBottomColor:"t.primary"}},m={maxWidth:"296px",margin:"-4px 0",lineHeight:"16px",color:"t.white",whiteSpace:"pre-line"};var p=r("vt3k"),f=o().createElement;const g=o().memo((e=>{let{children:t,tip:r,learnMoreLink:n,placement:g,hideUnderLine:y,sx:h,tipSx:b,labelSx:v}=e,x=(0,i.Z)(e,["children","tip","learnMoreLink","placement","hideUnderLine","sx","tipSx","labelSx"]);const{isIPad:S}=(0,u.F)(),k=f(s.Z,{sx:(0,a.Z)((0,a.Z)({},m),b)},r,n&&f(o().Fragment,null," ",f(p.dh,{link:n})));return f(c.Z,Object.assign({tip:k,delay:500,sx:h,bg:"bg4",placement:g,arrow:!0,enablePortal:!S},x),f(l.Z,{sx:(0,a.Z)((0,a.Z)((0,a.Z)({},d),v),y?{borderBottom:"none"}:{})},t))}))},MMVH:(e,t,r)=>{"use strict";r.d(t,{p:()=>b,Z:()=>x});var a=r("5vwO"),i=r("GpFh"),n=r("pVAJ"),o=r("Yn3l"),s=r("OV9X"),l=r("XhNN"),c=r("VYFT"),u=r("K3re"),d=r("/SIk"),m=r.n(d),p=r("jYz7"),f=m().createElement;const g=({width:e,height:t,extend:r,children:a})=>r?a({width:e,height:t}):f(p.Z,null,a);var y=r("zZ5f");var h=m().createElement;const b=e=>{let{children:t,i18nKey:r="nodata",i18nDefault:a="no data"}=e,o=(0,i.Z)(e,["children","i18nKey","i18nDefault"]);const{getI18n:l}=(0,n.ZK)("trd-common",c);var c;return h(s.Z,Object.assign({variant:"columns.emptyLine"},o),t||l(r,{defaultValue:a}))},v=e=>{let{loading:t=!1,listGridProps:r={},header:s=null,getListGridConfig:m=(e=>e),resetDeps:p=[],emptyNode:f=h(b,null),autoSizerProps:v}=e,x=(0,i.Z)(e,["loading","listGridProps","header","getListGridConfig","resetDeps","emptyNode","autoSizerProps"]);const S=(0,d.useRef)(null),k=r||{},{listGridConfig:P,renderHeaderCell:T,data:C,style:w}=k,I=(0,i.Z)(k,["listGridConfig","renderHeaderCell","data","style"]);(0,o.Z)((()=>{if(!S||!S.current)return;const{listRef:e}=S.current;if(!e||!e.current)return;const{current:t,current:{state:r}}=e,a=Math.floor(r.scrollOffset/32);t.resetAfterIndex(a,!0)}),1e3/60,[...p]);const M=(0,n.tZ)(),E=(0,u.cp)(M),N=s?[{header:!0}].concat(C):C,Z=!t&&!C.length;return h(l.Z,Object.assign({__css:{position:"relative",flex:1}},x),h(y.Z,{fullScreen:!0,inner:!0,show:t}),h(g,v,(({height:e,width:t})=>Z?h(l.Z,{sx:{height:e,width:t,display:"flex",alignItems:"center",justifyContent:"center"}},s,f):h(c.Z,Object.assign({threshold:5,style:(0,a.Z)({direction:E},w)},I,{className:"list-grid",ref:S,data:N,renderHeaderCell:T,listGridConfig:m((0,a.Z)((0,a.Z)({collapseHeight:80},P),{},{height:Math.max(e,0),width:t}))})))))},x=m().memo(v)},Qkkg:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var a=r("AHTf"),i=r("pVAJ"),n=r("wRKo"),o=r("j0Pw"),s=r("/SIk"),l=r.n(s),c=r("Vg22"),u=l().createElement;const d=({children:e})=>{const{isLight:t}=(0,i.Fg)(),r=(0,i.gm)(),{isMobile:s}=(0,i.Fs)(),l=(0,c.useSelector)((e=>e.setting.color))===a.Pe;if(s)return u(o.Z,{theme:l?n.$_:n.JR},e);const d=t?l?n.Wb:n.ZF:l?n.$_:n.JR;return u(o.Z,{dir:r,theme:d},e)},m=l().memo(d)},AhZU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("XdEc"),o=r("Gbz3"),s=i().createElement;function l(){const{getI18n:e}=(0,o.yk)(),t=(0,o.gN)(),r=(0,o.d0)();return s(n.Z,{i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:!1})}},gNzA:(e,t,r)=>{"use strict";r("kXC2"),r("8Kyu");var a=r("/SIk"),i=r.n(a);r("rdEq"),r("+m74"),r("hTQS"),i().createElement;i().createElement;r("Gbz3"),r("AhZU"),r("6cKY"),r("AHTf"),i().createElement},zgli:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var a=r("5vwO"),i=r("AHTf"),n=r("pVAJ"),o=r("kXC2"),s=r("y5Ng"),l=r("XhNN"),c=r("e5RN"),u=r("/SIk"),d=r.n(u),m=r("z29O"),p=r("9rpF"),f=r("EIFs"),g=r("cN65"),y=r("OV9X"),h=r("Gbz3"),b=d().createElement;const v={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px","& .name":{color:"t.secondary"}},x=({list:e=[],operate:t})=>{const{getI18n:r}=(0,h.yk)();return b(l.Z,{__css:v},b(y.Z,{variant:"captionSub",className:"name"},r("ticker-preference-title",{defaultValue:"Ticker Preference"})),b("div",{className:"list"},b(g.Z,{options:e,getValue:t})))},S=(0,u.memo)(x),k={fundingFee:!0,mark:!0,index:!0,change:!0,mode:!0,high:!0,low:!0,volume:!0,transaction:!0};var P=r("xpv6"),T=d().createElement;const C=({type:e})=>{const t=function(){const[e,[t,r]]=(0,n.z4)(),{getI18n:a}=(0,n.ZK)("trd-ticker","");return(0,u.useMemo)((()=>[{value:"high",label:a("high",{defaultValue:"24h High"}),defaultChecked:!1},{value:"low",label:a("low",{defaultValue:"24h Low"}),defaultChecked:!1},{value:"volume",label:`${a("volume")}(${t})`,defaultChecked:!1},{value:"transaction",label:`${a("transaction")}(${r})`,defaultChecked:!1}]),[a,t,r])}(),[r,i]=(0,P.g)("TickerPreference",k),o=(0,u.useMemo)((()=>t.length&&t.map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:r[e.value]})))),[t,r]);return T(l.Z,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",minWidth:"18px"}},T(p.ZP,{trigger:"click",enablePortal:!0,overlay:T(S,{list:o,operate:e=>{i((0,a.Z)((0,a.Z)({},r),e))}})},T(f.Z,{fontSize:"20px",mt:"5px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))};var w=r("8Kyu"),I=r("AhZU"),M=r("6cKY"),E=d().createElement;const N={flex:1,flexWrap:"nowrap",display:"flex",alignItems:"center",position:"relative"},Z=({type:e,layout:t})=>{const{list:r,dataSource:a}=(0,M.L8)({type:e}),n=(0,h.oD)(),s=(0,h.BF)(i.UW),[l]=(0,P.g)("TickerPreference",k),c=(0,u.useMemo)((()=>r.filter((e=>!1!==l[e.key]))),[l,r]),d=(0,u.useMemo)((()=>!!n&&E(I.Z,null)),[n]);return E(o.Ar,{sx:N},E(w.Z,{layout:t,list:s?r:c,dataSource:a,isFullScreen:s},d))};var A=d().createElement;const O={ml:"0px",mr:"16px"},R=({type:e,sx:t={},children:r})=>{const{isScreenDesk:u}=(0,n.Fs)(),d=(0,h.BF)(i.UW),[p]=(0,h.UI)(),f=d||!p;return i.sk?A(l.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",cursor:"default"},t),as:"span",className:"ticker-wrap"}):A(l.Z,{sx:(0,a.Z)({display:"flex",justifyContent:"space-between",pr:d?"12px":"16px",ml:d?"16px":"0px"},t),className:"ticker-wrap",suppressHydrationWarning:!0},A(c.Z,{mr:d?"0px":"12px",flex:1},A(l.Z,{sx:{display:"flex"}},A(o.Ar,{sx:{mr:["xs","0"],flex:"none"}},A(l.Z,{sx:{display:"flex",alignItems:"center",flex:1}},r),A(l.Z,null,f&&A(m.Z,{sx:{ml:d||u?"16px":"24px",mr:d?"16px":0}})),A(s.Z,{className:d?"":"draggableHandle",sx:d?O:void 0}))),A(Z,{layout:"default",type:e})),!d&&A(C,{type:e}))},V=(0,u.memo)(R)},kXC2:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>o});var a=r("e5RN"),i=r("/SIk"),n=r.n(i)().createElement;const o=(0,i.memo)((e=>n(a.Z,Object.assign({__css:{flexDirection:["column","row"],justifyContent:"space-between",alignItems:["flex-start","center"]}},e))))},"+m74":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("frZ3"),l=r("OV9X"),c=r("kZs2"),u=n().createElement;const d=(0,i.forwardRef)(((e,t)=>{let{timer:r}=e,n=(0,a.Z)(e,["timer"]);const d=(0,o.useDispatch)(),{0:m,1:p}=(0,i.useState)(r),{0:f,1:g}=(0,i.useState)(0),y=f?5e3*f:1e3;(0,s.Z)((()=>{const e=m-1e3;p(e),(!e||e<=0)&&(g(f+1),d.markPrice.queryMarkPrice().then((()=>{r&&(p(r),g(0))})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)})))}),y);const h=(0,c.Ej)(m);return u(l.Z,Object.assign({ref:t,__css:{wordBreak:"break-word",whiteSpace:"nowrap",color:"t.primary"}},n),h)}));d.displayName="Counter";const m=(0,i.forwardRef)(((e,t)=>{let{time:r}=e,i=(0,a.Z)(e,["time"]);if(null===r)return null;const n=r-Date.now();return Number.isInteger(n)?u(d,Object.assign({timer:n,ref:t},i)):null}));m.displayName="CountDown";const p=m},tjpQ:(e,t,r)=>{"use strict";r.d(t,{C:()=>u});var a=r("/SIk"),i=r.n(a),n=r("wjiZ"),o=r("869M"),s=r("viQn"),l=i().createElement;const c={display:"inline-block",textDecoration:"none",borderBottom:"1px solid",borderColor:"t.third",color:"t.third","&:hover":{borderColor:"t.yellow",color:"t.yellow"}},u=({symbol:e})=>{const{getI18n:t}=(0,o.yk)(),r=(0,s.I)(e);return l(n.Z,{href:r,target:"_blank",sx:c},t("header-index",{defaultValue:"Index"}))}},hTQS:(e,t,r)=>{"use strict";r.d(t,{oB:()=>l,j7:()=>c,U1:()=>u,D9:()=>d});var a=r("/SIk"),i=r.n(a),n=r("rdEq"),o=r("+m74"),s=i().createElement;const l={".label":{fontSize:"10px",mr:["minor",0],mb:[0,"2px"],color:"t.third",lineHeight:"16px",fontWeight:"normal",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",borderBottom:"1px solid transparent"},".price-text":{fontSize:"12px",color:"t.primary"},".emphasize":{color:"t.emphasize"},".flex":{display:"flex"},".countdown":{ml:"8px"}},c=(0,a.memo)((({label:e,price:t,className:r})=>s("div",{className:r},s("div",{className:"label"},e),s("div",{className:"price-text"}," ",t," ")))),u=(0,a.memo)((({time:e,timeTips:t,label:r,price:a,className:i})=>s("div",{className:i},s("div",{className:"label"}," ",r),s("div",{className:"flex"},s("div",{className:"price-text emphasize"},a),s("div",{className:"price-text countdown"},s(n.m,{tip:t},s("div",{className:"flex"},s(o.Z,{time:e})))))))),d=(0,a.memo)((({label:e,children:t})=>s("div",{className:"flex"},s("div",{className:"label"}," ",e),s("div",{className:"price-text"},t))))},"8Kyu":(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var a=r("5vwO"),i=r("e5RN"),n=r("1lQ6"),o=r("2/hP"),s=r("/SIk"),l=r.n(s),c=r("+ByA"),u=r("hTQS"),d=r("3p6E"),m=l().createElement;const p=(0,a.Z)((0,a.Z)({position:"relative"},u.oB),{},{".left-arrow":(0,a.Z)((0,a.Z)({},c.U5),{},{background:e=>`linear-gradient(to right, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".right-arrow":(0,a.Z)((0,a.Z)({},c.eE),{},{background:e=>`linear-gradient(to left, ${e.colors.moduleBg} 42.24%, transparent 95.69%)`,svg:{"&:hover":{color:"t.third"}}}),".default-market-list-container":c.$j,".tablet-market-list-container":c.Wb,".mobile-market-list-container":c.o0,".multiChart-market-list-container":c.dk}),f=({layout:e,list:t,isFullScreen:r,children:a,dataSource:l})=>{const c=(0,s.useRef)(null),{0:f,1:g}=(0,s.useState)(!1),{0:y,1:h}=(0,s.useState)(!1),b=(0,d.zE)((()=>{const{scrollWidth:e=0,clientWidth:t=0,scrollLeft:r=0}=c.current||{};g(e>t+r),h(Boolean(r))}),[g,h,c],1e3);(0,s.useEffect)((function(){b()}),[b]),(0,s.useEffect)((function(){if("ResizeObserver"in window){const e=new ResizeObserver(b);return c.current&&e.observe(c.current),()=>e.disconnect()}return window.addEventListener("resize",b,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",b)}}),[b,c.current]);const v=(0,s.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft-=100,c.current.scrollLeft<0&&(c.current.scrollLeft=0),b())}),[b]),x=(0,s.useCallback)((()=>{var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.scrollLeft)&&(c.current.scrollLeft+=100,b())}),[b]);return m(i.Z,{sx:p},y&&m("div",{onClick:v,className:"left-arrow "+(r?"fullscreen":"")},m(n.Z,{size:20,color:"icons.close"})),m("div",{className:`${e}-market-list-container`,ref:c,onScroll:b},t&&t.map((({label:e,key:t,timeKey:r,render:a,timeTips:i})=>{const n=a?a(l[t],l):l[t],o=l[r];return o?m(u.U1,{label:e,price:n,key:t,time:o,timeTips:i}):m(u.j7,{label:e,price:n,key:t})})),a),f&&m("div",{className:"right-arrow "+(r?"fullscreen":""),onClick:x},m(o.Z,{size:20,color:"icons.close"})))},g=(0,s.memo)(f)},y5Ng:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("GpFh"),i=r("OV9X"),n=r("/SIk"),o=r.n(n),s=r("ji/5"),l=r("nJ+u"),c=r("h0ui"),u=o().createElement;const d={fontSize:["32px","24px"],display:"flex",alignItems:"center",mx:"30px"},m=e=>{let{priceColor:t,price:r}=e,n=(0,a.Z)(e,["priceColor","price"]);return u(o().Fragment,null,r&&u(i.Z,Object.assign({__css:d,color:t},n),r))},p=e=>{const t=(0,c.p)(),r=(0,s.u)(!0),a=(0,l.Z)({lastPrice:r});return u(o().Fragment,null,r&&u(m,Object.assign({priceColor:a,price:t(r)},e)))},f=(0,n.memo)(p)},XdEc:(e,t,r)=>{"use strict";r.d(t,{A:()=>m,Z:()=>f});var a=r("/SIk"),i=r.n(a),n=r("pVAJ"),o=r("frZ3"),s=r("kZs2"),l=r("AHTf"),c=r("hTQS"),u=r("/1uR"),d=i().createElement;const m=({timer:e,i18n:t})=>{const{0:r,1:i}=(0,a.useState)(e);return(0,o.Z)((()=>{i(r-1e3)}),1e3),e<=0||r<0?t("inDelivering",{defaultValue:"in Delivering"}):(0,s.Ej)(r)},p=({i18n:e,contractInfo:t,changeSymbol:r,isDeliveryColumn:i=!0})=>{const[o]=(0,n.z4)(),p=(0,n.iB)(),f=p[o]||{},{deliveryDate:g,contractType:y="",pair:h}=f,{isMobile:b}=(0,n.Fs)();(0,a.useEffect)((()=>{const{symbol:e,contractStatus:a,deliveryDate:n}=t;if(o===e&&"DELIVERED"===(null===a||void 0===a?void 0:a.toUpperCase())){var l,c;const e=Object.values(p).filter(s.gU),t=(null===(l=e.filter((e=>e.pair===h&&e.deliveryDate>n)))||void 0===l?void 0:l[0])||(null===(c=e.filter((e=>e.deliveryDate>n)))||void 0===c?void 0:c[0]);t&&(r({stateSymbol:t.symbol,isDeliveryColumn:i}),window.location.reload())}}),[r,t,i,h,p,o]);const{loading:v,value:x}=(0,u.s)(g),S=e("TimeLeftForDelivery",{defaultValue:"Time left for delivery"}),k=(0,a.useMemo)((()=>v||!x?"00:00:00":x>24?`${Math.ceil(x/24)} ${e("daysLeft",{defaultValue:"days left"})}`:d(m,{timer:3600*x*1e3,i18n:e})),[x,e,v]);return y.toUpperCase()===l.Yp.PERPETUAL?null:b?d(c.D9,{label:S},k):d(c.j7,{label:S,price:k})},f=(0,a.memo)(p)},"+ByA":(e,t,r)=>{"use strict";r.d(t,{$j:()=>a,Wb:()=>i,o0:()=>n,dk:()=>o,U5:()=>s,eE:()=>l});const a={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"16px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},i={whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden","& >div":{display:"inline-block",paddingRight:"10px"},"&::-webkit-scrollbar":{display:"none",width:"0",height:"0"}},n={display:"grid",width:"100%",height:"100%",gridGap:"8px",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"32px 32px 32px",gridTemplateAreas:'"mark index"\n                    "high low"\n                    "volume transaction"'},o={display:"flex",flexWrap:"wrap","&>div":{mr:"8px"}},s={position:"absolute",left:"-1px",height:"100%",cursor:"pointer",width:"58px",display:"flex",alignItems:"center",justifyContent:"flex-start",zIndex:10},l={position:"absolute",cursor:"pointer",width:"58px",right:"-1px",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",zIndex:10}},"/1uR":(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var a=r("/SIk"),i=r("Hszp"),n=r("pVAJ"),o=r("Gbz3");const s=e=>{const[t]=(0,n.z4)(),r=!(0,o.G3)(),{value:s,loading:l}=(0,i.N)((()=>async function(e){try{const{serverTime:t}=await(0,n.bp)(e);return t}catch(t){return Date.now()}}(r)),[t]);return(0,a.useMemo)((()=>e?{value:(e-s)/1e3/3600,loading:l}:{value:0,loading:!1}),[e,s,l])}},"nJ+u":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r("/SIk"),i=r("z/Z1");const n=({lastPrice:e})=>{const t=(0,i.Fg)(),r=(0,a.useRef)(0),{current:n}=r;r.current=e;return(0,a.useMemo)((()=>n===e?t.colors.t.primary:n<e?t.colors.t.buy:t.colors.t.sell),[e,n,t.colors.t.buy,t.colors.t.sell,t.colors.t.primary])}},"6cKY":(e,t,r)=>{"use strict";r.d(t,{L8:()=>S});var a=r("AHTf"),i=r("pVAJ"),n=(r("+ByA"),r("nJ+u")),o=r("GA2I"),s=r("tjpQ"),l=r("rdEq"),c=r("LCMj"),u=r("kZs2"),d=r("mE5e"),m=r("z/Z1"),p=r("4xt1"),f=r("/SIk"),g=r.n(f),y=r("ca2E"),h=r("Gbz3"),b=g().createElement;const v=({type:e})=>{var t;const r=(0,o.X)(e),{tickProps:s}=(0,c.k)((0,a.l6)(r)),{lastPrice:l=0,tickSize:u=1e-7,highPrice:d,lowPrice:g,volume:y,quoteVolume:b,diffPrice:v,difference:x,bigThan:S}=s,[k,[P,T]]=(0,i.z4)(),C=(0,m.Fg)(),w=(0,i.j2)(),I=(0,n.Z)({lastPrice:l}),M=(0,i.U1)(u),{markPrice:E,lastFundingRate:N,nextFundingTime:Z}=(0,h.CE)()[k]||{},A=null===(t=(0,h.m8)()[k])||void 0===t?void 0:t.indexPrice,{formatTk:O}=(0,i.mC)(),R=(0,f.useMemo)((()=>(0,p.uf)(l,M)),[l,M]),V=isNaN(x)?"0.00":x;return{symbol:k,volume:y,quoteVolume:b,info:w,priceColor:I,currentPrice:R,change:(0,f.useMemo)((()=>[(0,p.uf)(v||0,M),`${V}%`].join(" ")),[v,V,M]),changeColor:(0,f.useMemo)((()=>S?C.colors.t.buy:C.colors.t.sell),[S,C.colors.t.buy,C.colors.t.sell]),baseAsset:P,nextFundingTime:Z,quoteAsset:T,low:(0,f.useMemo)((()=>(0,p.uf)(g,M)),[g,M]),high:(0,f.useMemo)((()=>(0,p.uf)(d,M)),[d,M]),fundingFee:(0,f.useMemo)((()=>(0,o.Y)(N)),[N]),index:(0,f.useMemo)((()=>O(A)),[O,A]),mark:(0,f.useMemo)((()=>O(E)),[O,E])}},x=()=>{var e;const[t]=(0,i.z4)(),{getI18n:r}=(0,h.yk)(),a=null===(e=(0,h.m8)()[t])||void 0===e?void 0:e.indexPrice,{formatTk:n}=(0,i.mC)(),o=(0,f.useMemo)((()=>n(a)),[n,a]);return b(l.m,{tip:r("header-mark-markPriceTip",{indexPrice:o,defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}."}).replaceAll("\\n","\n")},r("header-mark",{defaultValue:"mark"}))},S=({type:e})=>{const{symbol:t,volume:r,quoteVolume:n,info:o,priceColor:c,currentPrice:m,change:g,changeColor:S,baseAsset:k,nextFundingTime:P,quoteAsset:T,low:C,high:w,fundingFee:I,index:M,mark:E}=v({type:e}),N=(0,h.G3)(),Z=(0,h.oD)(),{isCoinUnit:A}=(0,y.QV)(),{getI18n:O,i18n:{language:R}}=(0,h.yk)(),{getI18n:V}=(0,i.ZK)("trd-ticker",""),{quantityPrecision:L,equalQtyPrecision:F,contractVal:D,baseVolume:_}=o,z=(0,f.useMemo)((()=>{const e=A?n||_:r,t=A?F:L;return N?(0,p.uf)(e,t||0):(0,d.kI)(r,{digits:L||2,isUnit:!1})}),[N,L,n,_,r,A,F]),B=(0,f.useMemo)((()=>{const e=Number(D)*Number(r);return N?(0,p.uf)(e):(0,d.kI)(n,{digits:2,isUnit:!1})}),[N,n,D,r]),K=(0,f.useMemo)((()=>[{label:b(x,null),key:"mark"},{label:b(s.C,{symbol:t}),key:"index"},{label:b(l.m,{learnMoreLink:(0,u.CN)(a.Wh.FUNDING,{locale:R}),tip:O("header-mark-fundingTip")},O("header-funding",{defaultValue:"Funding/8h"})),timeKey:"nextFundingTime",timeTips:O("header-mark-countdownTimeTip"),key:"fundingFee"},{label:V("change",{defaultValue:"24h Change"}),key:"change",render:(e,t)=>b("span",{style:{color:t.changeColor}},e)},{label:V("high",{defaultValue:"24h High"}),key:"high"},{label:V("low",{defaultValue:"24h Low"}),key:"low"},{label:`${V("volume")}(${!N||A?k:O("Cont")})`,key:"volume"},{label:`${V("transaction")}(${T})`,key:"transaction"}]),[t,N,A,k,T,O,V,R]);return{list:(0,f.useMemo)((()=>Z?K.filter((e=>"fundingFee"!==e.key)):K),[Z,K]),dataSource:{symbol:t,volume:z,quoteVolume:n,info:o,priceColor:c,currentPrice:m,change:g,changeColor:S,baseAsset:k,nextFundingTime:P,quoteAsset:T,low:C,high:w,fundingFee:I,index:M,mark:E,transaction:B}}}},GA2I:(e,t,r)=>{"use strict";r.d(t,{X:()=>i,Y:()=>n});var a=r("4xt1");const i=e=>{let t=!1;return"futures"===e&&(t=!0),t},n=e=>e||0===e?`${(0,a.uf)(100*e,4)}%`:null},UdzU:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var a=r("5vwO"),i=r("wgY5"),n=r.n(i),o=r("/SIk"),s=r.n(o),l=r("e5RN"),c=r("9rpF"),u=r("NJWl"),d=r("OV9X"),m=r("XhNN"),p=r("X46w"),f=r("QxY3"),g=r("iufi"),y=r("OhB/"),h=r("CGiO"),b=r("pVAJ"),v=r("Gbz3"),x=s().createElement;const S=n()().add(1,"day"),k=n()().subtract(2,"year"),P={alignItems:"center",justifyContent:"center",color:"t.third",cursor:"pointer",fontSize:0,minWidth:"48px",p:"minor",borderRadius:"2px",height:"24px",lineHeight:"24px","&:hover":{color:"t.primary",bg:"bg3"}},T={bg:"line",color:"t.yellow"},C=({withReset:e=!1,type:t,onSearch:r,onReset:i=(()=>{}),children:n=null})=>{const s=(0,h.hf)(),{getI18n:C}=(0,b.ZK)("trd-tableSearch",w);var w;const{getI18n:I}=(0,v.yk)(),{isMobile:M,isIPad:E}=(0,b.Fs)(),{0:N,1:Z}=(0,o.useState)(null),A={"1d":C("day",{defaultValue:"1 Day"}),"1w":C("week",{defaultValue:"1 Week"}),"1m":C("month",{defaultValue:"1 Month"}),"3m":C("quarter",{defaultValue:"3 Months"})},O=Object.keys(A).map((e=>{const a=e===t,i={onClick:a?()=>!1:()=>r((0,y.OQ)(e)),sx:a?T:{},children:A[e]};return x(l.Z,Object.assign({key:e,__css:P},i))})),R=A[t];return x(l.Z,{sx:{alignItems:"center"}},x(c.ZP,{enablePortal:!0,trigger:"click",overlay:x(u.Z,{sx:{bg:"popupBg",p:0,borderRadius:0},"data-testid":"QuickDateFilter"},O),placement:"bottom-start"},!M&&E&&x(l.Z,{__css:(0,a.Z)((0,a.Z)({},P),{},{mr:"minor",color:"t.primary",bg:"bg3"})},x(d.Z,null,R||A["1d"]),x(f.Z,{sx:{transform:"scale(1.8)"},size:12}))),!M&&!E&&x(l.Z,{sx:{alignItems:"center",display:"flex","> div":{mr:"minor"}}},O),x(l.Z,{sx:{alignItems:"center",ml:"sm",".ant-input":{fontSize:0,pb:"minor",color:"t.third",lineHeight:"14px",borderBottom:"1px solid",borderBottomColor:"lines.light"}}},x(m.Z,{fontSize:"12px",color:"t.third",mr:"8px"},I("range-date",{defaultValue:"Date"})),x(g.Z,{locale:null===s||void 0===s?void 0:s.toLowerCase(),variant:"phantom",sz:"tiny",containerSx:{color:"t.primary",minWidth:"auto"},separator:I("range-to",{defaultValue:"to"}),"data-testid":"DateFilter",disabledDate:e=>e>S||e<k,onChange:(e,[t,r])=>{const a=new Date(t).setHours(0,0,0,0),i=new Date(r).setHours(24,0,0,0);Z({startTime:a,endTime:i})}}),x(l.Z,null,n),x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line","data-testid":"Search",onClick:()=>{N&&r((0,a.Z)((0,a.Z)({},N),{},{type:"custom"}))}},C("searchBtn",{defaultValue:"Search"}))),e&&x(p.Z,{variant:"default",colorStyle:"secondary",sz:"s",ml:["sm","8px","sm"],bg:"line",onClick:()=>{Z(null),i()}},C("resetBtn",{defaultValue:"Reset"})))},w=s().memo(C)},zMc9:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var a=r("5vwO"),i=r("BQ33"),n=r.n(i),o=r("/SIk"),s=r.n(o),l=r("O94r"),c=r.n(l),u=r("CGiO"),d=r("fInK"),m=r("XhNN"),p=r("e5RN"),f=r("9rpF"),g=r("OV9X"),y=r("AVT8"),h=r("X46w"),b=r("iufi"),v=r("4sPL"),x=r("dcD/"),S=r("pDZw"),k=r("Gbz3"),P=r("pVAJ"),T=r("LvN6"),C=s().createElement;const w={px:"16px",width:"100vw",height:"100vh",borderRadius:"4px 4px 0 0",".header":{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",mb:"20px",".header-title":{fontSize:"20px",lineHeight:"28px",color:"t.primary"}},".column":{mb:"32px"},".column-title":{color:"t.secondary",fontSize:"14px",lineHeight:"20px",mb:"4px"},".range-picker > div":{"> div > div":{p:"14px 12px",fontSize:"14px",bg:"inputBg",color:"t.primary"},"> p":{color:"t.primary"}},".footer":{position:"absolute",bottom:"50px",height:"40px",display:"flex",justifyContent:"space-between",left:"16px",right:"16px",button:{minWidth:"168px"}}},I={bg:"popupBg",px:"16px",fontSize:"16px",lineHeight:"24px",".header":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"52px",color:"t.primary"},".items":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"48px",color:"t.primary","&.active":{color:"t.yellow"}}},M={mb:"32px",".drop-down":{width:"100%",height:"48px",bg:"inputBg",color:"t.primary",alignItems:"center",justifyContent:"space-between",flexDirection:"row",px:"12px",border:"1px solid",borderColor:"line"}},E=({title:e,data:t,visible:r,activeKey:a,setVisible:i,onChange:n})=>C(d.Z,{childProps:{maxHeight:"50vh"},visible:r,direction:"bottom",outerClick:()=>i(!1),maskBg:"rgba(0,0,0,.3)"},C(m.Z,{sx:I},C(p.Z,{justifyContent:"space-between",alignItems:"center"},C("div",{className:"header"},e),C(v.Z,{size:20,onClick:()=>i(!1)})),Object.keys(t).map((e=>C("div",{key:e,className:c()({items:!0,active:e===a}),onClick:()=>n(e)},t[e]))))),N=({title:e,data:t,defaultKey:r,onChange:a})=>{const{0:i,1:n}=(0,o.useState)(!1),{0:s,1:l}=(0,o.useState)(r),c=(0,o.useCallback)((e=>{l(e),a(e)}),[l,onchange]);return C(m.Z,{sx:M},C(f.ZP,{trigger:"click",overlay:C(E,{visible:i,setVisible:n,title:e,data:t,activeKey:s,onChange:c}),enablePortal:!0,onVisibleChange:n,sx:{width:"100%"}},C(p.Z,{className:"drop-down"},C(g.Z,{variant:"subtitle2"},t[s]),C(x.Z,{color:"t.third",size:16,sx:{transformOrigin:"center center",transform:`rotate(${i?"180deg":"0deg"})`,transition:"transform .3s"}}))))},Z=[n()().subtract(2,"year").format("YYYY-MM-DD"),n()().format("YYYY-MM-DD")],A=({onSearch:e,isTransaction:t,onTransactionFilterChange:r})=>{const{0:i,1:l}=(0,o.useState)(!1),c=(0,o.useCallback)((()=>l((e=>!e))),[l]),d=(0,u.hf)(),{getI18n:f}=(0,P.ZK)(),{getI18n:g}=(0,k.yk)(),x=(0,o.useRef)({startTime:new Date(n()().subtract(1,t?"day":"week").format("YYYY-MM-DD")).setHours(0,0,0,0),endTime:Date.now()}),I=(0,o.useCallback)((()=>{const{startTime:t,endTime:a,filter:i}=x.current;null===r||void 0===r||r(i),e({type:"custom",startTime:t,endTime:a}),l(!1)}),[e,l]),M=(0,o.useMemo)((()=>[e=>{x.current.startTime=new Date(e).setHours(0,0,0,0)},e=>{x.current.endTime=new Date(e).setHours(24,0,0,0)}]),[]);return C(s().Fragment,null,C(S.Z,{size:20,onClick:c,sx:{position:"absolute",right:"0",top:"15px"}}),i&&C(y.Z,{visible:!0,sx:w,onMaskClick:()=>l(!1)},C(p.Z,{className:"header"},C("div",{className:"header-title"},g("Filter")),C(v.Z,{size:20,onClick:()=>l(!1)})),C("div",{className:"column"},C("div",{className:"column-title"},g("range-date")),C(m.Z,{className:"range-picker"},C(b.Z,{isResponsive:!0,format:"YYYY-MM-DD",locale:null===d||void 0===d?void 0:d.toLowerCase(),allowClear:!1,separator:"-",mOnChange:M,mValue:[n()(x.current.startTime).format("YYYY-MM-DD"),n()(x.current.endTime).format("YYYY-MM-DD")],mStartDateRange:Z,mEndDateRange:Z}))),t&&C("div",{className:"column"},C("div",{className:"column-title"},f("trd-openOrder-type")),C(N,{title:f("trd-openOrder-type"),data:T.Wm.reduce(((e,t)=>(0,a.Z)((0,a.Z)({},e),{},{[t]:"ALL"===t?f("trd-tradeTransaction-ALL",{defaultValue:"All"}):f(`trd-tradeTransaction-bt-${t}`,{defaultValue:t})})),{}),defaultKey:x.current.filter||"ALL",onChange:e=>x.current.filter=e})),C(p.Z,{className:"footer"},C(h.Z,{variant:"default",colorStyle:"secondary",onClick:()=>l(!1)},g("cancelBtnText")),C(h.Z,{variant:"primary",onClick:I},f("trd-tableSearch-searchBtn")))))}},CWkv:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("/SIk"),i=r.n(a),n=r("M8Qk");const o={};var s=i().createElement;const l=({type:e,condition:t,children:r})=>{const{ref:l}=function(e,t){const r=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const a=r.current;if(o[e]||!a||"undefined"===typeof performance||"undefined"===typeof MutationObserver)return;const i=new MutationObserver(((r,a)=>{const i=t(r,a);!o[e]&&i&&((0,n.gp)({t:e,duration:performance.now()}),a.disconnect(),o[e]=!0)}));return i.observe(a,{attributes:!0,subtree:!0,childList:!0}),()=>null===i||void 0===i?void 0:i.disconnect()}),[r.current]),{ref:r}}(e,t);return s(i().Fragment,null,i().Children.map(r,(e=>i().cloneElement(e,{ref:l}))))}},X4vm:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("XhNN"),l=r("OV9X"),c=r("FV4P"),u=r("MvZp"),d=r("/2BB"),m=r("/MJE"),p=r("AHTf"),f=r("pVAJ"),g=n().createElement;const y={display:"flex",position:["absolute","relative","relative"],flex:"0 0 auto",minWidth:"100px",borderLeft:"1px solid",borderColor:"newLine",alignItems:"center",bg:"moduleBg",color:"t.secondary",px:"16px",borderTop:"1px solid",borderTopColor:"primary",cursor:"pointer",">svg":{mx:"5px"},".title":{fontSize:"12px",lineHeight:"16px",p:"0 3px"},":hover":{".title":{color:"primary"},">svg path":{fill:"primary"}}};function h(){const{enqueueNotification:e}=(0,u.Z)(),{isMobile:t,isIPad:r}=(0,f.Fs)(),n=(0,o.useDispatch)(),h=(0,f.Pc)(),b=(0,f._n)(),v=(0,f.Fg)().isLight,{getI18n:x}=(0,f.ZK)("","chatroom-mp-ui"),{0:S,1:k}=(0,i.useState)(!1),P=(0,i.useMemo)((()=>!t&&!r),[r,t]),T=(0,i.useCallback)((()=>{P?k((e=>!e)):e({message:x("entrance-app-hint"),variant:"error"})}),[e,x,P]),C=(0,i.useCallback)((async()=>{m.Z.updateUserInfo((0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})),n.userCenter.updateState({userInfo:(0,a.Z)((0,a.Z)({},h),{},{isExistFutureAccount:!0})}),await n.preference.getPositionMode()}),[n.preference,n.userCenter,h]),w=(0,i.useMemo)((()=>g(s.Z,{sx:y,onClick:T,"data-testid":"ChatRoom-futures"},g(c.Z,{size:16,fill:"t.secondary"}),g(l.Z,{className:"title"},x("ChatRoom")))),[x,T]);return g(d.E,{isLoggedIn:b,visible:S,onClose:T,isLightTheme:v,userInfo:h,STATIC_HOST:p.Xs,WS_HOST:p.Vl,onOpenFuturesAccount:C},w)}const b=n().memo(h)},fkPQ:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=r("Fee1"),s=r("OV9X"),l=r("Gbz3"),c=i().createElement;const u={ml:"10px",alignItems:"center",width:"100%","& .tips":{fontSize:"12px",ml:"10px",letterSpacing:"0.32px"},"& .disconnectedTips":{color:"t.secondary"},"& .stableTips":{color:"t.buy"},"& .reconnectingTips":{color:"primary"}},d=i().memo((({status:e,connectingDeco:t})=>{const{getI18n:r}=(0,l.yk)();switch(e){case"disconnected":return c(s.Z,{className:"tips disconnectedTips"},r("disconnected",{defaultValue:"Disconnected"}));case"slow":return c(s.Z,{className:"tips stableTips"},r("unstableConnection",{defaultValue:"Unstable connection"}));case"stable":return c(s.Z,{className:"tips stableTips"},r("stableConnection",{defaultValue:"Stable Connection"}));case"reconnecting":return c(s.Z,{className:"tips reconnectingTips"},r("reconnection",{defaultValue:"Connecting"}),t);default:return c(s.Z,{className:"tips"})}})),m=i().memo((({colorList:e})=>c("svg",{width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c("rect",{y:"9.667",width:"1.67",height:"2.5",fill:e[0]}),c("rect",{x:"4.44446",y:"5.667",width:"1.66667",height:"6.67",fill:e[1]}),c("rect",{x:"8.88892",y:"3",width:"1.66667",height:"10.83",fill:e[2]}),c("rect",{x:"13.3333",width:"1.66667",height:"15",fill:e[3]}))));const p=function(){const{status:e,colorList:t,connectingDeco:r}=(0,l.l8)();return c(n.Z,{sx:u},c(m,{colorList:t}),c(d,{status:e,connectingDeco:r}))};var f=r("X4vm"),g=i().createElement;const y={justifyContent:"space-between",height:"24px",width:"100vw",bg:"moduleBg",position:"fixed",bottom:"0px",zIndex:"100",borderTop:"1px solid",borderColor:"overallBg",marginTop:"-10px",".troll-box-wrapper":{}};const h=function(){return g(n.Z,{sx:y,id:"trade-footer"},g(o.Z,{name:"connectStatus"},g(p,null)),g(o.Z,{name:"chat"},g(f.default,null)))}},LTcb:(e,t,r)=>{"use strict";r.d(t,{GK:()=>C,ZP:()=>M,Rk:()=>S});var a=r("/SIk"),i=r.n(a),n=r("e5RN"),o=r("OV9X"),s=i().createElement;const l=({headers:e})=>s(n.Z,{variant:"girdList.columnBox",sx:{px:["0","sm"],py:"8px",width:"100%"}},e.map((({text:e,area:t},r)=>s(n.Z,{key:r,className:t,sx:{userSelect:"none",height:"24px",flex:1}},s(o.Z,{title:e,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.third"}},e))))),c=i().memo(l);var u=r("sZZk"),d=r("bN60"),m=r("z+x3"),p=i().createElement;const f=Math.floor((m.FA-44-31)/20),g=({trades:e,loading:t,tradeItem:r,itemHeight:i=18})=>{const n=(0,u.useMediaQuery)({query:m.is}),o=(0,a.useMemo)((()=>n?e.reverse().slice(0,f):e.reverse()),[e,n]);return p(d.a,{variant:"girdList.tradeList",dataSource:o,loading:t,itemElement:r,itemHeight:i})},y=i().memo(g),h=({price:e})=>{console.info(e)},b=e=>`${e}`,v=(0,a.createContext)({formatTk:b,formatMi:b,onItemClick:h});var x=r("pVAJ");const S=()=>(0,x.ZK)("trd-trades");var k=r("XXmh"),P=i().createElement;const T=({price:e,buyerIsMaker:t,quantity:r,tradeTime:i,formatPrice:n=!0,formatQty:o=!0,formatDate:s=!0})=>{const{formatMi:l,formatTk:c,onItemClick:u}=(0,a.useContext)(v),m=t?"sell":"buy";return P(d.H,{className:`trade-list-item trade-list-item-${m}`,onClick:()=>{u({price:e,side:m})}},P("div",{className:"price left",style:{flex:1}},n?c(e):e),P("div",{className:"text right",style:{flex:1}},o?l(r):r),P("div",{className:"text right",style:{flex:1}},s?(0,k.v)(new Date(i),"hh:mm:ss"):i))},C=i().memo(T);var w=i().createElement;const I=({headers:e,trades:t,loading:r,tradeItem:a,itemHeight:n,formatMi:o,formatTk:s,onItemClick:l=h})=>w(i().Fragment,null,w(c,{headers:e}),w(v.Provider,{value:{formatMi:o,formatTk:s,onItemClick:l}},w(y,{trades:t,loading:r,tradeItem:a,itemHeight:n}))),M=i().memo(I)},Dvpw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("ENfn"),s=n().createElement;const l=e=>{let{onRemove:t}=e,r=(0,a.Z)(e,["onRemove"]);return s(o.Z,Object.assign({onClick:t,className:"trading-page-close-button",size:20,sx:{cursor:"pointer",flexShrink:0,alignItem:"flex-end",color:"icons.close",zIndex:1,"&:hover":{color:"t.third"}}},r))}},xpNn:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M,O:()=>w});var a=r("/SIk"),i=r.n(a),n=r("AVT8"),o=r("OV9X"),s=r("XhNN"),l=r("X46w"),c=r("QB3Q"),u=r("AHTf"),d=r("lH+D"),m=r("W2gp"),p=r("mE5e"),f=r("pVAJ"),g=r("Gbz3"),y=r("GpFh"),h=r("e5RN"),b=r("rdEq"),v=i().createElement;const x=e=>{let{label:t,tip:r,value:a,hasTip:i=!0}=e,n=(0,y.Z)(e,["label","tip","value","hasTip"]);return v(h.Z,Object.assign({className:"rules"},n),i?v(b.m,{tip:r},t):v(o.Z,{className:"label"},t),a)},S=i().memo(x),k={position:"relative",px:"24px",width:["100%","488px"],height:["100%","unset"],bg:"modalBg",borderRadius:"6px",boxShadow:"elevation3",".title":{py:"20px",color:"t.primary"},".content":{pt:"14px",pb:"30px"},".rules":{alignItems:"center",justifyContent:"space-between",fontSize:1,pb:"ls",color:"t.primary"},".label":{color:"t.third"},".viewMore":{fontSize:1,px:"2px",py:"4px"}};var P=i().createElement;let T;const C="%",w=({afterClose:e}={})=>{d.Y.emit(u.Dg,{visible:!0,afterClose:e})},I=()=>{const e=(0,f.tZ)(),{getI18n:t}=(0,g.yk)(),r=(0,f.gm)(),i=(0,g.G3)(),{shortName:y}=(0,g.oO)(),{baseAsset:h,quoteAsset:b,filters:v=[],liquidationFee:x=0,contractVal:w=0,triggerProtect:I=0,maxMoveOrderLimit:M=0}=(0,f.j2)()||{},E=(0,m.FB)(v,"filterType"),N=((e,t,r,a)=>{const i=[{labelKey:"minimumTradeAmount",defaultLabel:"Minimum Trade Amount",filterType:"LOT_SIZE",field:"minQty",tipKey:"minimumTradeAmountTip",defaultTip:"The minimum Limit Order amount for the contract.",unit:e},{labelKey:"minPriceMovement",defaultLabel:"Min Price Movement",filterType:"PRICE_FILTER",field:"tickSize",tipKey:"minPriceMovementTip",defaultTip:"The minimum change in the unit price of the contract.",unit:t},{labelKey:"orderPriceCapRatio",defaultLabel:"Order Price Cap Ratio",filterType:"PERCENT_PRICE",field:"multiplierUp",tipKey:"orderPriceCapRatioTip",defaultTip:"The upper limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"orderPriceFloorRatio",defaultLabel:"Order Price Floor Ratio",filterType:"PERCENT_PRICE",field:"multiplierDown",tipKey:"orderPriceFloorRatioTip",defaultTip:"The lower limit ratio of the order price to current Mark Price of the contract.",unit:r,shouldFormat:!0},{labelKey:"maximumMarketOrderAmount",defaultLabel:"Maximum Market Order Amount",filterType:"MARKET_LOT_SIZE",field:"maxQty",tipKey:"maximumMarketOrderAmountTip",defaultTip:"The minimum Market Order amount for the contract.",unit:e},{labelKey:"maximumOpenOrderAmount",defaultLabel:"Maximum Open Order Amount",filterType:"MAX_NUM_ORDERS",field:"limit",tipKey:"maximumOpenOrderAmountTip",defaultTip:"The maxium Open Orders for the contract."}];return a||i.push({labelKey:"minNotional",defaultLabel:"Min. Notional Value",filterType:"MIN_NOTIONAL",field:"notional",tipKey:"minNotionalTip",defaultTip:"The minimum notional value for the contract order.",unit:t}),i})(i?t("Cont",{defaultValue:"Cont"}):h,b,C,i),{0:Z,1:A}=(0,a.useState)(!1),O=(0,a.useCallback)((()=>{A(!1),"function"===typeof T&&T()}),[]);return(0,a.useEffect)((()=>d.Y.on(u.Dg,(({visible:e,afterClose:t})=>{A(e),T=t}))),[]),P(n.Z,{visible:Z,sx:k},P(o.Z,{variant:"headline6",className:"title"},t("trading-rules",{defaultValue:"Trading Rules"})),P(c.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:O}),P(s.Z,{className:"content"},P(S,{hasTip:!1,label:t("symbol",{defaultValue:"Symbol"}),value:y}),N.map((({labelKey:e,defaultLabel:a,filterType:i,field:n,tipKey:o,defaultTip:s,unit:l="",shouldFormat:c=!1})=>{var u;let d=null===E||void 0===E||null===(u=E[i])||void 0===u?void 0:u[n];d=l===C?100*("multiplierUp"===n?d-1:1-d):d;const m=c?(0,p.uf)(d,0):d,f="rtl"===r?`${l} ${m}`:`${m} ${l}`;return P(S,{key:e,label:t(e,{defaultValue:a}),tip:t(o,{defaultValue:s}),value:f})})),i&&P(S,{label:t("contractSize",{defaultValue:"Contract Multiplier"}),tip:t("contractSizeTip"),value:`${w} ${b}`}),P(S,{label:t("triggerProtect",{defaultValue:"Price Protection Rate"}),tip:t("triggerProtectTip"),value:100*+I+" %"}),P(S,{label:t("liquidationFee",{defaultValue:"Insurance Clearance Fee"}),tip:t("liquidationFeeTip"),value:`${(100*+x).toFixed(2)} %`}),i&&P(S,{label:t("maxAmendAmount",{defaultValue:"Max Amend Amount"}),tip:t("maxAmendAmountTip"),value:(0,p.uf)(M,0)}),P(l.Z,{as:"a",variant:"text",href:`/${e}/futures/trading-rules/${i?"quarterly":"perpetual"}`,target:"_blank",className:"viewMore"},t("viewMore",{defaultValue:"View More"}))))},M=i().memo(I)},"0MIW":(e,t,r)=>{"use strict";r.d(t,{Z:()=>ee});var a=r("/SIk"),i=r.n(a),n=r("Vg22"),o=r("GuU3"),s=r.n(o),l=r("XhNN"),c=r("2swO"),u=r("rI7q"),d=r("pVAJ"),m=r("U0yl"),p=r("Fee1"),f=r("SKkT"),g=r("AHTf"),y=r("6u/I"),h=r("v5rq"),b=r("WBfh"),v=r("wqQ1"),x=r("Ekp3"),S=r("Ozc/"),k=r("5vwO"),P=r("hyFX"),T=r("qNjr"),C=r("MvZp"),w=r("xpv6"),I=r("4xt1"),M=r("FOuV"),E=r("Gbz3"),N=r("kZs2"),Z=r("S24M");const A=({type:e})=>{(0,Z.j)("webClick",{module:"chart",elementId:e})};var O=r("EPGa"),R=r("NQFm");const V=[O.Jm.LIMIT],L=Object.values(O.Jm);var F=r("lXyA"),D=r.n(F),_=r("tsUn"),z=r("FCBM"),B=r("+WBH"),K=r("EHEI"),q=r("Sav6"),W=r("RuXq"),H=r("Tfqf");const U="tv_web_error",j=[g.ls.TRADING,g.ls.DELIVERING],$={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",480:"8h",720:"12h","1D":"1d","3D":"3d","1W":"1w","1M":"1M"},G="trd_chart_tv_load_timeout";var J=i().createElement;const Y="myTradingView",Q=e=>{[y.sy,y.O7].map((e=>s().createInstance({name:e}))).forEach((t=>t.setItem(Y,e)))},X=({symbol:e,namespace:t,useMiniTicker:r=!1,storage:i})=>{const o=(0,n.useSelector)(v.WO),[,s]=(0,h.TB)()(b.F5),p=(0,a.useRef)(null),[F]=(0,h.kH)(t)(b.J$),{datafeed:X}=(({priceType:e,useMiniTicker:t=!1})=>{const r=(0,a.useRef)(0),i=(0,a.useMemo)((()=>D()((()=>(0,N.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsStart",catch({error:e,track:t}){t({GET_BAR_START_TYPE:e})},log({track:e}){e({GET_BAR_START_TYPE:"SUCCESS"})}})))),[]),n=(0,a.useMemo)((()=>D()((e=>(0,N.Os)({eventId:"trd_chart_tv_load_timeout",stepId:"getBarsEnd",catch({error:t,track:a}){a({GET_BAR_END_TYPE:t,duration_:(0,N.Fr)(e-r.current)})},log({track:t}){t({GET_BAR_END_TYPE:"SUCCESS",duration_:(0,N.Fr)(e-r.current)})}})))),[]),{getI18n:o}=(0,E.yk)(),s=(0,d.Vh)(),l=(0,a.useRef)(s),{isContUnit:c}=(0,H.Q)(),m=(0,a.useMemo)((()=>c?W.D:W.V),[c]);(0,a.useEffect)((()=>{l.current=s}),[s]);const p=(0,a.useMemo)((()=>o("usdtFutures-13",{defaultValue:"Futures"})||""),[o]),f=(0,a.useMemo)((()=>o("inverseFutures-13",{defaultValue:"Delivery"})||""),[o]),g=(0,a.useMemo)((()=>({exchanges:[{name:"Binance",value:"Binance",desc:""}],symbols_types:[{name:p,value:"Futures"},{name:f,value:"Delivery"}]})),[f,p]),y=(0,a.useCallback)((async()=>{try{await(0,N.YY)({checker:()=>Object.keys(l.current).length>0})}catch(t){(0,Z.j)(U,{type:"onFetchSymbolsInfo",message:t.message,business:"futures"})}const e=l.current;return Object.keys(e).reduce(((t,r)=>{const{symbol:a,tickSize:i,isDelivery:n,contractStatus:s}=e[r];if(!j.includes(s))return t;const{symbol:l,contractTypeI18n:c,deliveryDateFormat:d}=(0,_.H)(e[r],o),m=`${l} ${c}${d?` ${d}`:""}`;return t[r]={name:m,fullName:m,ticker:a,tickSize:+i,description:"",exchange:"Binance",supportedResolutions:u.k.DefaultResolutions,type:n?"Delivery":"Futures"},t}),{})}),[o]),h=(0,a.useCallback)((async({symbolInfo:t,resolution:a,rangeStartDate:o,rangeEndDate:s})=>{const c=l.current;r.current=Date.now(),i();const u=t.ticker||"",{pair:d,contractType:p,contractVal:f,isDelivery:g}=c[u],y=Math.max(0,1e3*o),h=1e3*s,b=$[a],v=g?m(f):e=>e,x=(0,q.b0)({symbol:u,pair:d,contractType:p,interval:b,isDelivery:g,priceType:e}),S=await(0,K.M)({onFetchKlineData:x,startTime:y,endTime:h});return n(Date.now()),S.map(v)}),[n,i,e,m]),b=(0,a.useCallback)((({symbolInfo:r,resolution:a,callback:i})=>{const n=l.current,o=r.ticker||"",{pair:s,contractType:c,contractVal:u,isDelivery:d}=n[o],p=$[a],f=d?m(u):e=>e;return(0,B.Ld)({symbol:o,pair:s,contractType:c,interval:p,priceType:e,isDelivery:d,useMiniTicker:t,checkIfInSync:()=>!0,callback:e=>i(f(e))})}),[e,m,t]),v=(0,a.useCallback)((async()=>{const{serverTime:e}=await(0,z.b)(!0);return Math.floor(parseInt(e,10)/1e3)}),[]);return u.k.createDatafeed({config:g,onFetchSymbolsInfo:y,onFetchBars:h,onSubscribeBars:b,onFetchServerTimeApi:v})})({priceType:F,useMiniTicker:r}),ee=(0,d.Xw)(),te=(0,a.useRef)(-1),{positionLines:re}=(({symbol:e,namespace:t})=>{const[r]=(0,h.$q)(t)(b.QQ),a=(0,d.AM)()[e],{tickSize:i,isDelivery:n}=a||{},o=(0,E.db)({symbol:e,tickSize:i});return{positionLines:(0,d.vE)((()=>r?o.map((({id:e,price:t,quantity:r,text:a})=>({id:e,text:a,price:t,quantity:r.toString(),tooltip:""}))):[]),[n,r,o])}})({symbol:e,namespace:t}),{orderLines:ae,showConfirmation:ie,confirmationProps:ne,modifiedModalProps:oe}=(({symbol:e,namespace:t})=>{var r;const{getI18n:i}=(0,E.yk)(),[n]=(0,w.g)(M.Zv,M.Xd),o=(0,E.$h)({symbol:e}),[s]=(0,h.$q)(t)(b.QQ),{kLine:l=!1,needConfirm:c}=n||{},u=(0,d.AM)()[e],{tickSize:m,contractVal:p,isDelivery:f,quoteAsset:g,equalQtyPrecision:y,quantityPrecision:v,filters:x}=u||{},S=(null===(r=x.find(R.W4))||void 0===r?void 0:r.maxQty)||"",{enqueueNotification:Z}=(0,C.Z)(),{0:F,1:D}=(0,a.useState)(!1),{0:_,1:z}=(0,a.useState)(1),{0:B,1:K}=(0,a.useState)(!1),{0:q,1:W}=(0,a.useState)({order:{symbol:"",closePosition:!1,positionSide:"",side:O.g.BUY,type:O.Jm.LIMIT,stopPrice:"",workingType:M.gu.LAST_PRICE,orderId:0,clientOrderId:"",reduceOnly:!1,timeInForce:"",insertTime:"",origType:O.Jm.LIMIT,price:0,origQty:"",executedQty:0,activatePrice:"",priceRate:0,status:"",strategyId:"",strategyType:"",avgPrice:"",modifyParams:{},onConfirm:()=>{}},onClose:()=>null}),H=(0,a.useMemo)((()=>f?V:L),[f]),U=(0,E.H3)({symbol:e,tickSize:m}),j=(0,a.useMemo)((()=>U.filter((({order:e})=>H.includes(e.origType)))),[U,H]),$=(0,a.useMemo)((()=>(0,N.p8)(+m)),[m]),G=(0,a.useMemo)((()=>i("amendmentOrderSubmitted",{defaultValue:"Amendment Order Submitted"})),[i]),J=(0,a.useMemo)((()=>i("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})),[i]),Y=(0,a.useMemo)((()=>i("cont-unit",{defaultValue:"Cont"})),[i]),Q=(0,a.useMemo)((()=>`${J}: ${S} ${Y}`),[Y,S,J]),X=(0,a.useMemo)((()=>i("tv-order-drag-tooltip",{defaultValue:"Drag for price modify"})),[i]),ee=(0,a.useMemo)((()=>i("tv-order-modify-tooltip",{defaultValue:"Click for modify"})),[i]),te=(0,a.useMemo)((()=>i("tv-order-cancel-tooltip",{defaultValue:"Click for cancel"})),[i]),re=(0,a.useMemo)((()=>i("tv-order-price-placeholder",{defaultValue:"Price"})),[i]),ae=(0,a.useMemo)((()=>i("tv-order-amount-placeholder",{defaultValue:"Amount"})),[i]),ie=(0,a.useMemo)((()=>i("tv-order-cacnel",{defaultValue:"Cancel"})),[i]),ne=(0,a.useMemo)((()=>i("tv-order-submit",{defaultValue:"Submit"})),[i]),oe=(0,a.useCallback)((()=>z((e=>e+1))),[]),se=(0,a.useCallback)((()=>{oe(),K(!1)}),[oe]),le=(0,a.useCallback)((async({orderId:e,price:t,quantity:r,symbol:a,side:i})=>{const n=await(0,T.nC)({orderId:e,price:t,quantity:r,symbol:a,side:i,timestamp:Date.now()},void 0);n.success?Z({message:G}):"90814005"===n.code&&Z({message:Q,autoHideDuration:1e4}),se()}),[Z,se,Q,G]),ce=(0,a.useCallback)((async t=>{var r;const a=+((null===t||void 0===t?void 0:t.origQty)||""),i=+((null===t||void 0===t?void 0:t.quantity)||""),n=+((null===t||void 0===t?void 0:t.price)||""),o="quantity"===t.hasChanged||"both"===t.hasChanged?"cont"===t.unit?i:(0,N.QQ)({price:n,coin:i,contractVal:p}):a,s="cont"===t.unit?o:(0,N.me)({price:n,cont:o,contractVal:p}),l={orderId:t.orderId,price:n,quantity:o,symbol:e,side:null===(r=t.order)||void 0===r?void 0:r.side},u="both"===t.hasChanged?"BOTH":"price"===t.hasChanged?"PRICE":"quantity"===t.hasChanged?"QUANTITY":"";c?(W({order:(0,k.Z)((0,k.Z)({},t.order),{},{modifyParams:{limitPrice:l.price,qty:s,amendedField:u},onConfirm:()=>le(l,void 0)}),onClose:se}),K(!0)):le(l,void 0)}),[p,e,c,se,le]),{0:ue,1:de}=(0,a.useState)({price:"",amount:""}),me=(0,P.TA)({initialValues:ue,enableReinitialize:!0,onSubmit:e=>{var t,r,a;const i=e.price!==me.initialValues.price,n=e.amount!==me.initialValues.amount;ce((0,k.Z)((0,k.Z)({},null===(t=e.order)||void 0===t?void 0:t.order),{},{order:null===(r=e.order)||void 0===r?void 0:r.order,price:(+e.price).toFixed($),quantity:+e.amount,unit:null===(a=e.order)||void 0===a?void 0:a.unit,hasChanged:i&&n?"both":i?"price":n?"quantity":""})),D(!1)}}),pe={visible:F,priceField:(0,k.Z)((0,k.Z)({},me.getFieldProps("price")),{},{suffixText:g,placeholder:re}),amountField:(0,k.Z)((0,k.Z)({},me.getFieldProps("amount")),{},{suffixText:o,placeholder:ae}),submitText:ne,cancelText:ie,onSubmit:me.handleSubmit,onCancel:()=>D(!1)};return{orderLines:(0,a.useMemo)((()=>s?j.map((e=>{const{order:t,unit:r,quantity:a,price:i,orderTypeText:n,cancel:o}=e,s=`${n} ${(+i).toFixed($)}`,c="cont"===r?+t.origQty:(0,N.me)({price:+i,cont:+t.origQty,contractVal:p}),u=(0,I.uf)(c,"cont"===r?v:y);return{id:t.orderId.toString(),text:s,price:+i,quantity:a.toString(),isBuy:"BUY"===t.side,tooltip:X,modifyTooltip:ee,cancelTooltip:te,editable:f&&l,onMove:({price:e})=>{A({type:"TV_vertical"}),ce((0,k.Z)((0,k.Z)({},t),{},{order:t,price:e.toFixed($),unit:r,hasChanged:"price"}))},onModify:()=>{A({type:"TV_amountclick"}),de({price:i.toString(),amount:u,order:e}),D(!0)},onCancel:()=>{A({type:"TV_cancel"}),o()}}})):[]),[X,f,s,l,j,ee,te,ce,$,_,o,y,v,re,ae,p,g,ie,ne,de,D]),showConfirmation:B,confirmationProps:q,modifiedModalProps:pe}})({symbol:e,namespace:t}),se=(0,h.Qy)(t)(b.VW),le=(0,h.H9)(t)(b.Hs),ce=(0,h.v5)(t)(b.B3),ue=(0,h.$q)(t)(b.bd),de=(0,h.BD)(t)(b.aK),[me]=(0,h.OL)(t)(b.NB),pe=(0,h.Nu)(t)(b.O3)===c.oX.Line?u.k.Dropdowns.ChartStyles.Line:me,fe=y.nw[se],ge=(0,d.Fg)().isLight?"light":"dark",ye=(0,x.k)(ge),he=(0,a.useMemo)((()=>`${t}-${y.P7}`),[t]),be=(0,d.tZ)(),ve=(0,y.GL)(be),xe=(0,a.useMemo)((()=>u.k.getTradingViewNextStyles(ee)),[ee]),Se=(0,a.useCallback)((()=>{te.current=Date.now()}),[]),ke=(0,a.useCallback)((()=>i.getItem(Y)),[i]),Pe=(0,a.useCallback)((e=>Q(e)),[]),Te=(0,a.useCallback)((e=>le===y.vm.tradingView&&ce(e)),[le,ce]),Ce=(0,a.useCallback)((()=>{s(p.current),(()=>{const e=(0,N.Nb)({id:"chartReady"}),t=(0,N.Nb)({id:"getBarsStart",timeout:3}),r=(0,N.Nb)({id:"getBarsEnd",timeout:6}),a=(0,N.Nb)({id:"chartResponsive",timeout:3});N.Os.init({step:e._(t)._(r)._(a),eventId:G}),(0,N.Os)({eventId:G,stepId:"chartReady",catch({error:e,track:t}){t({CHART_READY_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:e}){e({CHART_READY_TYPE:"SUCCESS",connection:JSON.stringify(navigator.connection)})}})})()}),[s]),we=(0,a.useCallback)((async()=>{const e=await i.getItem(Y);Q(e)}),[i]),Ie=(0,a.useCallback)((e=>S.Z.log(JSON.stringify({type:"tv-error",error:e}),"custom")),[]),Me=(0,a.useCallback)((()=>{return e=te.current,void(0,N.Os)({eventId:G,stepId:"chartResponsive",catch({error:e,track:t}){t({CHART_RESPONSIVE_TYPE:e,connection:JSON.stringify(navigator.connection)})},log({track:t}){t({CHART_RESPONSIVE_TYPE:"SUCCESS",duration_:(0,N.Fr)(Date.now()-e)})}});var e}),[]),{showError:Ee,mainText:Ne,buttonText:Ze,buttonCallback:Ae,onScriptLoadingError:Oe,onTradingViewInitError:Re,onChartReadyError:Ve}=(({storage:e})=>{const{getI18n:t}=(0,m.Z)(),r=(0,a.useMemo)((()=>t("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||""),[t]),i=(0,a.useMemo)((()=>t("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||""),[t]),n=(0,a.useMemo)((()=>t("trd-chart-crash-reload",{defaultValue:"Refresh"})||""),[t]),o=(0,a.useMemo)((()=>t("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||""),[t]),s=(0,a.useCallback)((()=>window.location.reload()),[]),l=(0,a.useCallback)((async()=>{await e.removeItem("myTradingView"),s()}),[s,e]),{0:c,1:u}=(0,a.useState)(!1),{0:d,1:p}=(0,a.useState)(""),{0:f,1:g}=(0,a.useState)(""),y=(0,a.useRef)((()=>Promise.resolve())),h=(0,a.useCallback)((()=>{(0,Z.j)("trd_chart_tv_download_timeout",{user_network:JSON.stringify(navigator.connection)}),(0,Z.j)(U,{type:"onScriptLoadingError",message:"",business:"futures"}),u(!0),p(r),g(n),y.current=s}),[r,n,s]),b=(0,a.useCallback)((e=>{(0,Z.j)(U,{type:"onTradingViewInitError",message:e.message,business:"futures"}),u(!0),p(o),g(n),y.current=l}),[l,n,o]),v=(0,a.useCallback)((e=>{(0,Z.j)(U,{type:"onChartReadyError",message:e.message,business:"futures"}),u(!0),p(i),g(n),y.current=s}),[i,n,s]);return{showError:c,mainText:d,buttonText:f,buttonCallback:y.current,onScriptLoadingError:h,onTradingViewInitError:b,onChartReadyError:v}})({storage:i});return Ee?J(u.k.ChartFallback,{mainText:Ne,btnText:Ze,resetErrorBoundary:Ae}):J(l.Z,{sx:{height:"100%",display:le!==y.vm.tradingView?"none":"block"}},J(u.k.TradingViewNext,{symbol:e,interval:fe,theme:ye,styles:xe,limitOrders:ae,positionOrders:re,showOrders:ue,showIndicators:de,seriesStyle:pe,overwritingThemeOnLoaded:o,operator:p,initialConfig:{tvConfig:{container_id:he,library_path:`${g.Or}/charting_library_next/`,symbol:e,interval:fe,theme:ye,locale:ve,datafeed:X},onScriptLoaded:Se,onLoadConfig:ke,onSave:Pe,onLoading:Te,onChartReadyDone:Ce,onChartReadyError:Ve,onWillUnmount:we,onCreateOrderShapesError:Ie,onScriptLoadingError:Oe,onFirstTimeDataLoadedDone:Me,onTradingViewInitError:Re}}),J(u.k.OrderModificationModal,oe),ie?J(f.Z,ne):null)},ee=e=>{const{getI18n:t}=(0,m.Z)(),r=(0,a.useMemo)((()=>t("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""),[t]),i=(0,a.useMemo)((()=>t("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""),[t]),n=(0,a.useCallback)((()=>e.storage.removeItem("myTradingView")),[e.storage]),o=(0,a.useCallback)(((e,t)=>{S.Z.log(JSON.stringify({type:"trading_view",error:e,componentStack:t}),"custom")}),[]);return J(p.Z,{name:"trading_view",FallbackComponent:({resetErrorBoundary:e})=>J(u.k.ChartFallback,{mainText:r,btnText:i,resetErrorBoundary:e}),onReset:n,onError:o},J(X,e))}},y6Jw:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=r("hHvS"),l=n().createElement;const c=s.BA[400],u=({filled:e})=>{const t=e?c:"transparent";return l(o.Z,{__css:{display:"inline-block",width:"4px",height:"14px",mx:"1px",border:`1px solid ${c}`,bg:t}})},d=e=>{let{adl:t=0,dashed:r=!1}=e,i=(0,a.Z)(e,["adl","dashed"]);return l(o.Z,Object.assign({},i,{sx:{borderBottom:r?`1px dashed ${c}`:"none"}}),Array(t).fill(0).map(((e,t)=>l(u,{key:t,filled:!0}))),Array(4-t).fill(0).map(((e,t)=>l(u,{key:t,filled:!1}))))}},bbFg:(e,t,r)=>{"use strict";r.d(t,{a:()=>F,Z:()=>_});var a=r("/SIk"),i=r.n(a),n=r("4xt1"),o=r("e5RN"),s=r("X46w"),l=r("9rpF"),c=r("MvZp"),u=r("u74s"),d=r("Ys09"),m=r("pVAJ"),p=r("jQmP"),f=r("k4WF"),g=r("Gbz3"),y=r("EPGa"),h=r("shek"),b=r("k/nb"),v=r("Lr13"),x=r("AnCx"),S=r("XhNN"),k=r("OV9X"),P=r("U0yl"),T=r("ca2E"),C=r("H3aL"),w=r("GG68"),I=r("uefD"),M=i().createElement;function E({orders:e=[],symbol:t,handleCancel:r}){const i=(0,m.iB)(),{isDelivery:s}=(0,a.useContext)(b.Z),l=i[t]||{},{marginAsset:c,pricePrecision:u,quantityPrecision:d,equalQtyPrecision:p,contractVal:f}=l,{getI18n:y}=(0,g.yk)(),{getI18n:h}=(0,P.Z)("trd-openOrder",v);var v;const{isCoinUnit:E}=(0,T.QV)(),{getFormatedQuantity:N}=(0,w.s7)(l);return e.length?M(S.Z,{sx:I.y_},e.map((e=>M(o.Z,{key:e.orderId,className:"order"},M(k.Z,{sx:{mr:"43px",color:"position.limitOrdersColor"}},s?E?(0,C.unitChangeCoinQty)({quantity:e.origQty,contractVal:f,price:e.price,precision:p}):(0,n.uf)(e.origQty,d):N({quantity:e.origQty,price:e.price,qtyPrecision:d}),"\xa0",s?E?c:y("Cont",{defaultValue:"Cont"}):"","\xa0",y("toBeClosedAt",{defaultValue:"to be closed at"}),"\xa0",(0,n.uf)(e.price,u)),M(x.Z,{className:"order-icon",size:20,onClick:()=>{r(e.orderId)}}))))):null}var N=r("IpC4"),Z=r("k2tD"),A=r("6i0L"),O=r("NQFm"),R=i().createElement;const V=({sideKey:e,qty:t,isDelivery:r,isCoinUnit:a,isUsdtFuturesUSDTUnit:i,positionSize:o,stepSizePrecision:s,tickSizePrecision:l,equalQtyPrecision:c})=>{const{quantityAmount:u}=(0,A.v_)({sideKey:e}),d=Math.abs(Number(u.replace("-",""))),m=Number(t),p=Math.abs(o),f=Math.min(m,p)/p*d;let g=s;return r&&a?g=c:!r&&i&&(g=l),(0,n.yd)(f,g,1)},L=e=>{var t,r;const{symbol:i,initialMarkPrice:x,selectPrice:S,sideKey:k,positionSize:P,positionSide:C}=e,{getI18n:w}=(0,h.Z)(),{getI18n:M}=(0,g.yk)(),{actionPlaceOrder:A,actionCancelOrder:V,actionOrderConfirmModal:L,isDelivery:_}=(0,a.useContext)(b.Z),z=(0,a.useRef)(null),B=(0,m.iB)()[i]||{},{filters:K=[],baseAsset:q,quoteAsset:W,tickSize:H=.01,limitStepSize:U=.001,quantityPrecision:j,equalQtyPrecision:$}=B,G=K&&(null===(t=K.find(O.W4))||void 0===t?void 0:t.maxQty),J=K&&(null===(r=K.find(O.vr))||void 0===r?void 0:r.maxQty),Y=Math.abs(P).toString(),{enqueueNotification:Q}=(0,c.Z)(),X=(0,p.p)(H),{0:ee,1:te}=(0,a.useState)(Number(x).toFixed(X)),re=0===Number(ee),ae=(0,p.p)(U),{0:ie,1:ne}=(0,a.useState)(Y),{0:oe,1:se}=(0,a.useState)(!1),{orderConfirmation:le}=(0,g.F7)(),{isCoinUnit:ce}=(0,T.QV)(),{isUSDTUnit:ue}=(0,N.Q)(),de=_?0:ae,me=_?M("Cont"):q,pe=(0,Z.nH)(de),{preOrders:fe}=(0,m.E)(),ge=fe.filter((e=>e.reduceOnly&&e.type===y.Jm.LIMIT&&e.symbol===i&&e.positionSide===C&&e.side===(P>0?y.g.SELL:y.g.BUY))),ye=ge.length;(0,a.useEffect)((()=>{S&&te(String(S))}),[S]),(0,a.useEffect)((()=>{oe||ne(Y)}),[oe,Y]);const he={sideKey:k,isDelivery:_,isCoinUnit:ce,isUsdtFuturesUSDTUnit:ue,qty:ie,positionSize:P,stepSizePrecision:ae,tickSizePrecision:X,equalQtyPrecision:$},be=(0,a.useCallback)((({orderType:e})=>{var t;const r=Number(ie);if(null===z||void 0===z||!z.current||!r)return;const a=()=>{const t={symbol:i,type:e,side:P>0?y.g.SELL:y.g.BUY,quantity:r,price:ee,positionSide:C};A(t)},n={orderType:e,limitPrice:ee,qty:Number(null===z||void 0===z||null===(t=z.current)||void 0===t?void 0:t.preferredUnitQty),quantity:r};le[e]?L(k,n,a):a()}),[L,A,k,le,C,P,ee,ie,i]);return R(o.Z,{alignItems:"center",width:"100%",sx:{flexGrow:2}},R(s.Z,{variant:"text",sx:{pl:0,pr:"8px",fontSize:"12px"},onClick:()=>{if(J&&Number(ie)>Number(J))return Q({header:w("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${w("maxMarketQty",{defaultValue:"Maximum Market Order Quantity"})}: ${J} ${me}`,autoHideDuration:1e4}),"";be({orderType:y.Jm.MARKET})}},w("market",{defaultValue:"Market"})),R(l.ZP,{trigger:"hover",enablePortal:!0,placement:"top",sx:{minWidth:"auto"},overlay:R(E,{orders:ge,symbol:i,handleCancel:e=>(e=>{e&&V(e)})(e)})},R(s.Z,{variant:"text",sx:{px:"8px",fontSize:"12px",borderRadius:"0",borderLeft:"1px solid",borderLeftColor:"newLine"},onClick:()=>re?"":G&&Number(ie)>Number(G)?(Q({header:w("maxPromptTitle",{defaultValue:"Quantity Failed"}),message:`${w("maxLimitQty",{defaultValue:"Maximum Limit Order Quantity"})}: ${G} ${me}`,autoHideDuration:1e4}),""):void be({orderType:y.Jm.LIMIT})},`${w("limit",{defaultValue:"Limit"})}${ye>0?`(${ye})`:""}`)),R(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:R("div",null,re?M("invalid-price",{defaultValue:"Invalid Price"}):w("price",{defaultValue:"Price"}))},R(d.Z,{variant:"filled",boxProps:{sx:I.Do},type:"number",value:ee,step:H,error:re,onChange:e=>(0,f._p)(e,(e=>te(e)),null,X),defaultValue:x})),R(l.ZP,{trigger:"click",enablePortal:!0,placement:"bottom-end",sx:{mx:"4px"},overlay:R(v.Z,{sx:{width:"230px"},onChange:e=>{ne((0,n.yd)(e*Math.abs(P),j,1)),se(!0)}})},R(u.Z,{enablePortal:!0,placement:"top",arrow:!0,tip:R(D,Object.assign({},he,{baseAsset:q,quoteAsset:W}))},R(d.Z,{variant:"filled",boxProps:{sx:I.Do},value:ie,onChange:e=>{(0,f._p)(e,(e=>ne(e)),null,de),se(!0)},defaultValue:Y,step:pe}))),R(F,Object.assign({ref:z},he)))},F=(0,a.forwardRef)((({sideKey:e,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,qty:n,positionSize:o,stepSizePrecision:s,tickSizePrecision:l,equalQtyPrecision:c},u)=>{const d=V({sideKey:e,qty:n,isDelivery:t,isCoinUnit:r,isUsdtFuturesUSDTUnit:i,positionSize:o,stepSizePrecision:s,tickSizePrecision:l,equalQtyPrecision:c});return(0,a.useImperativeHandle)(u,(()=>({preferredUnitQty:d}))),null})),D=({qty:e,baseAsset:t,quoteAsset:r,positionSize:a,isUsdtFuturesUSDTUnit:n,isCoinUnit:o,isDelivery:s,sideKey:l,stepSizePrecision:c,tickSizePrecision:u,equalQtyPrecision:d})=>{const{getI18n:m,t:p}=(0,g.yk)(),f=Math.abs(a),y=s?m("Cont",{defaultValue:"Cont"}):t,h=s?t:r,b=e,v=V({sideKey:l,qty:e,isDelivery:s,isCoinUnit:o,isUsdtFuturesUSDTUnit:n,positionSize:a,stepSizePrecision:c,tickSizePrecision:u,equalQtyPrecision:d});return s&&o||!s&&n?R(i().Fragment,null,R("div",null,p("closePosition-qtyTip-positionSize",{defaultValue:"Position Size: {{positionSize}} {{orderUnit}}",positionSize:f,orderUnit:y})),R("div",null,p("closePosition-qtyTip-unitConversion",{defaultValue:"Qty: {{orderQty}} {{orderUnit}} \u2248 {{preferredUnitQty}} {{preferredUnit}}",orderQty:b,orderUnit:y,preferredUnitQty:v,preferredUnit:h}))):R(i().Fragment,null,p("closePosition-qtyTip-unit",{defaultValue:"Qty: {{orderUnit}}",orderUnit:y}))},_=i().memo(L)},"k/nb":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r("/SIk");const i=(0,a.createContext)({actionAdjustMarginModal:e=>{},actionOrderConfirmModal:(e,t,r)=>{},actionTpslModal:e=>{},actionPlaceOrder:e=>{},actionCancelOrder:e=>{},actionTpslConfirmModal:e=>{},changeSymbol:e=>{},isDelivery:!1,headers:[]})},qyBC:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ze});var a=r("zZ5f"),i=r("DCFU"),n=r("e5RN"),o=r("/SIk"),s=r.n(o),l=r("shek"),c=r("+tqa"),u=r("VDPE"),d=s().createElement;const m=()=>{const{getI18n:e}=(0,l.Z)();return d("div",{className:"action-bar"},d(c.Z,null),d(u.vR,{btnText:e("closePosition")||""}))},p=s().memo(m);var f=r("XhNN"),g=r("Rhv4"),y=r("yITN"),h=r("+4u2"),b=r("EPGa"),v=r("pVAJ"),x=r("mE5e"),S=r("4xt1"),k=r("X46w"),P=r("Gbz3"),T=r("jQmP"),C=r("k/nb"),w=r("Bb2c"),I=r("k4WF"),M=s().createElement;const E=e=>{const{getI18n:t}=(0,l.Z)(),{amount:r,onChange:a,onConfirm:i,baseAsset:o="BTC",positionSize:s,precision:c}=e,u=Math.abs(s),d="number"!==typeof Number(r)||r>u,m=M(n.Z,{sx:{mr:"6px",color:"t.yellow200"}},M(f.Z,null,o));return M(f.Z,null,M(w.Z,{variant:"outline",type:"number",defaultValue:"",value:r,error:d,onChange:e=>(0,I._p)(e,a,"",c),onKeyDown:e=>(0,I.f5)(e,i),onBlur:e=>(0,I.Y5)(e),placeholder:String(u),prefix:M(f.Z,{sx:{ml:2,color:"t.grey300"}},t("Amount",{defaultValue:"Amount"})),suffix:m,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var N=s().createElement;const Z=e=>{const{getI18n:t}=(0,l.Z)(),{isMarket:r,price:a,onChange:i,formattedMarkPrice:o,quoteAsset:s="USDT",precision:c}=e,u=r?"":o,d="number"!==typeof Number(a),m=t("price",{defaultValue:"Price"}),p=N(n.Z,{sx:{mr:1,width:r?"95px":"auto"}},r&&N(n.Z,{flex:1},t("Market",{defaultValue:"Market"})),N(f.Z,null,s));return N(f.Z,null,N(w.Z,{variant:"outline",labelFixed:!0,disabled:r,error:d,value:a,onChange:e=>(0,I._p)(e,i,"",c),placeholder:u,prefix:N(f.Z,{sx:{ml:2,color:"t.grey300"}},m),suffix:p,sx:{textAlign:"right"},boxProps:{width:"100%",mt:"8px",borderRadius:"2px"}}))};var A=r("ca2E"),O=r("Lr13"),R=r("lbaD");var V=r("bbFg"),L=s().createElement;const F=({sideKey:e,panelType:t,onClose:r})=>{var a;const i=(0,o.useRef)(null),{getI18n:n}=(0,l.Z)(),{getI18n:s}=(0,P.yk)(),{orderConfirmation:c}=(0,P.F7)(),{actionPlaceOrder:u,actionOrderConfirmModal:d,isDelivery:m}=(0,o.useContext)(C.Z),p=(0,P.t2)(e,"symbol"),g=(0,P.t2)(e,"positionSize"),y=(0,P.t2)(e,"positionSide"),h=(0,P.t2)(e,"initialMarkPrice"),w=(0,P.t2)(e,"entryPrice"),I=(null===(a=(0,v.iB)())||void 0===a?void 0:a[p])||{},{baseAsset:M,quoteAsset:N,contractVal:F,quantityPrecision:D,tickSize:_=.01,limitStepSize:z=.001,equalQtyPrecision:B}=I,K=(0,T.p)(_),{0:q,1:W}=(0,o.useState)(h.toFixed(K)),H=(0,x.uf)(h,K),U=t===b.Jm.MARKET,{0:j,1:$}=(0,o.useState)(Math.abs(g)),G=Math.abs(g),J=j||G,Y=q||h,{marketPNL:Q,limitPNL:X}=function({symbol:e,quantity:t,isBuy:r,entryPrice:a=0,closedPrice:i=0,contractVal:n=100,isDelivery:s}){const l=(0,P.Wr)({symbol:e,isDelivery:s}),{askPrice:c=0,bidPrice:u=0}=l;return(0,o.useMemo)((()=>(0,R.k)({quantity:t,isBuy:r,entryPrice:a,closedPrice:i,contractVal:n,isDelivery:s,askPrice:c,bidPrice:u})),[c,u,i,n,a,r,s,t])}({symbol:p,quantity:J,isBuy:g>0,entryPrice:w,closedPrice:Y,contractVal:F,isDelivery:m}),ee=U?Q:X,{isCoinUnit:te}=(0,A.QV)(),{isUSDTUnit:re}=(0,P.QV)(),ae={sideKey:e,isDelivery:m,isCoinUnit:te,isUsdtFuturesUSDTUnit:re,qty:String(j),positionSize:g,stepSizePrecision:(0,T.p)(z),tickSizePrecision:K,equalQtyPrecision:B},ie=async()=>{var a;r();const n=j;if(!n)return;const o=()=>{const e={symbol:p,type:t,side:g>0?b.g.SELL:b.g.BUY,quantity:n,price:q,positionSide:y};u(e)},s={orderType:t,limitPrice:Y,qty:Number(null===(a=i.current)||void 0===a?void 0:a.preferredUnitQty),quantity:n};c[t]?d(e,s,o):o()};return L(f.Z,{mt:"md"},L(V.a,Object.assign({ref:i},ae)),L(Z,{isMarket:U,price:q,formattedMarkPrice:H,quoteAsset:N,onChange:e=>{const t="object"===typeof e?e.target.value:e;W(t)},precision:K}),L(E,{amount:j,positionSize:g,baseAsset:m?s("Cont",{defaultValue:"Cont"}):M,onChange:e=>{const t="object"===typeof e?Number(e.target.value):e;$(t>G?G:t)},onConfirm:ie,precision:D}),L(O.Z,{sx:{bg:"transparent",px:0},percentSx:{height:"32px",mr:"8px"},onChange:e=>{$(Number((0,S.yd)(e*Math.abs(g),D,1)))}}),L(f.Z,{sx:{mt:"plus",mb:"24px",lineHeight:"34px"}},L(f.Z,{color:"t.third",as:"span"},n("estimatedPNL",{defaultValue:"Estimated PNL"}),":"),L(f.Z,{sx:{float:"right"}},isNaN(Number(ee))?"-":(0,x.uf)(ee,m?4:2),"\xa0",N)),L(k.Z,{disabled:!1,sz:"l",width:1,onClick:ie},n("confirm",{defaultValue:"Confirm"})))},D=s().memo(F);var _=s().createElement;const{LIMIT:z,MARKET:B}=b.Jm,K=({active:e,title:t})=>{const r=_(f.Z,{sx:{width:"100%",height:"2px",bg:"primary",position:"absolute",bottom:"-1px"}});return _(f.Z,{sx:{position:"relative",mr:"16px",pt:"2px",pb:"14px",fontSize:"16px",fontWeight:"medium"},color:e?"t.primary":"t.grey300"},t," ",e?r:null)},q=({open:e,curSideKey:t,onClose:r})=>{const{0:a,1:i}=(0,o.useState)(B),{getI18n:n}=(0,l.Z)(),s=(0,o.useCallback)((e=>{i(e)}),[i]);return _(g.Z,{open:e,onCloseIconClick:r,containerSx:{alignItems:"flex-end"},sx:{width:["100%","464px"],height:"auto",position:["relative","absolute"],top:["auto","50%"],transform:["none","translateY(-50%)"]}},_(y.Z,{lazy:!0,defaultActiveKey:a,onChange:s,tabsSx:{borderBottom:"1px solid",borderBottomColor:"lines.primary",overflow:"visible"}},_(h.Z,{tab:e=>_(K,{active:e,title:n("MarketClose",{defaultValue:"Market Close"})}),tabKey:B},_(D,{panelType:B,sideKey:t,onClose:r})),_(h.Z,{tab:e=>_(K,{active:e,title:n("LimitClose",{defaultValue:"Limit Close"})}),tabKey:z},_(D,{panelType:z,sideKey:t,onClose:r}))))},W=s().memo(q);var H=r("kZs2"),U=r("AHTf"),j=r("OV9X"),$=r("YvoZ"),G=r("rdEq"),J=r("y6Jw"),Y=r("9am+"),Q=r("6i0L"),X=r("Sdhy"),ee=s().createElement;const te=["size","notionalSize","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","tpsl"],re=({children:e})=>ee(j.Z,{variant:"caption",color:"t.third"},e),ae=({color:e,children:t})=>ee(j.Z,{variant:"captionSub",color:e||"t.primary"},t),ie=({children:e,sx:t})=>ee(n.Z,{className:"row-item",sx:t},e),ne=({sideKey:e,actionPlaceOrderModal:t})=>{const{getI18n:r}=(0,l.Z)(),{color:a,symbolText:i,symbolName:n,leverage:s}=(0,Q.iA)({sideKey:e}),c=(0,P.t2)(e,"positionSize"),u=(0,P.t2)(e,"adl"),d=(0,o.useCallback)((()=>{t(e)}),[t,e]);return ee(ie,{sx:{pb:"10px !important"}},ee("div",{className:`symbol-wrap ${a}`},n?ee("div",{className:"symbolText"},ee("div",{className:"symbol"},n.symbol),ee("div",null,`${n.contractTypeI18n} ${n.deliveryDateFormat}`)):ee("div",{className:"symbolText"},i),ee("div",{className:"leverage"},`${s}x`),ee(J.Z,{adl:u})),0===Number(c)?null:ee(j.Z,{className:"close-position",onClick:d},r("closePositionSingle",{defaultValue:"Close Position"})))},oe=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{color:r,formatedQuantityAmount:a,unit:i}=(0,Q.v_)({sideKey:e});return ee(s().Fragment,null,ee(G.m,{tip:t("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."})},t("size",{defaultValue:"Size"})),ee(ae,{color:r},a," ",i))},se=({sideKey:e})=>{const{getI18n:t}=(0,P.yk)(),{formattedNotionalSize:r,unit:a}=(0,Q.jK)({sideKey:e});return ee(s().Fragment,null,ee(re,null,t("notionalSize",{defaultValue:"Notional Size"})),ee(ae,null,r," ",a))},le=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{useLastPrice:r}=(0,P.F7)(),a=r?"lastPrice":"markPrice",{formatedPnl:i,pnlColor:n,ROEVal:o}=(0,Q.qU)({sideKey:e});return ee(s().Fragment,null,ee(G.m,{tip:t(`unrealizedPnlTip-${a}`)},t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),ee(ae,{color:n},`${i}(${o})`))},ce=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{formatedEntryPrice:r}=(0,Q.A4)({sideKey:e});return ee(s().Fragment,null,ee(G.m,{tip:t("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."})},t("entryPrice",{defaultValue:"Entry Price"})),ee(ae,null,r))},ue=({sideKey:e})=>{const{getI18n:t,i18n:{language:r}}=(0,l.Z)(),{formatedMarkPrice:a}=(0,Q.PH)({sideKey:e});return ee(s().Fragment,null,ee(G.m,{tip:t("markPriceTip",{defaultValue:"The latest mark price for this contract. This is the price used for PNL and margin calculations, and may differ from the last price for the purposes of avoiding price manipulation."}),learnMoreLink:(0,H.CN)(U.Wh.UM_MARK_PRICE,{locale:r})},t("markPrice",{defaultValue:"Mark Price"})),ee(ae,null,a))},de=({liquidationPrice:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,Y.l)(),{getI18n:i,i18n:{language:n}}=(0,l.Z)(),{getI18n:o}=(0,P.yk)();return ee(s().Fragment,null,ee(G.m,{tip:i("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,H.CN)(U.Wh.LIQ_PRICE,{locale:n})},i("m-liquidationPrice",{defaultValue:"Liquidation Price"})),ee(ae,{color:"t.emphasize"},r?ee("div",{onClick:a},o("refresh",{defaultValue:"Refresh"})):e>0?t:"-"))},me=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,Q.Mx)({sideKey:e});return ee(de,{liquidationPrice:t,formatedLiqPrice:r})},pe=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,X.e)({sideKey:e});return ee(de,{liquidationPrice:t,formatedLiqPrice:r})},fe=({ratioColor:e,riskRatio:t})=>{const{getI18n:r}=(0,l.Z)();return ee(s().Fragment,null,ee(G.m,{tip:r("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."})},r("marginRatio",{defaultValue:"Margin Ratio"})),ee(ae,{color:e},t,"%"))},ge=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,Q.ek)({sideKey:e});return ee(fe,{ratioColor:t,riskRatio:r})},ye=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,X.U)({sideKey:e});return ee(fe,{ratioColor:t,riskRatio:r})},he=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{actionAdjustMarginModal:r}=(0,o.useContext)(C.Z),a=(0,P.t2)(e,"positionSize"),i=(0,P.t2)(e,"isolated"),{formatedMargin:c}=(0,Q.Yq)({sideKey:e}),u=i?t("Isolated",{defaultValue:"Isolated"}):t("Cross",{defaultValue:"Cross"}),d=(0,o.useCallback)((()=>{r(e)}),[r,e]);return ee(s().Fragment,null,ee(G.m,{tip:t("marginTip",{defaultValue:"The margin allocated to the current position."})},t("margin",{defaultValue:"Margin"})),ee(n.Z,Object.assign({alignItems:"center"},i&&{onClick:d}),ee(j.Z,{variant:"captionSub",color:"t.primary"},`${c} (${u})`),0===Number(a)?null:i?ee($.Z,{size:16,color:"t.third",ml:"4px"}):null))},be=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{isDelivery:r,actionTpslModal:a}=(0,o.useContext)(C.Z),{formatedTPPrice:i,formatedSLPrice:c}=(0,Q.Mn)({sideKey:e}),u=(0,o.useCallback)((()=>{a(e)}),[a,e]);return r?null:ee(s().Fragment,null,ee(G.m,{tip:t("tpSlTip")},t("tpSl",{defaultValue:"TP/SL"})),ee(n.Z,{display:"inline-flex",alignItems:"center",justifyContent:"flex-end",onClick:u},ee(j.Z,{variant:"captionSub",color:"t.primary"},i," / ",c),ee($.Z,{size:16,color:"t.third",ml:"4px"})))},ve=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,P.F7)(),a=(0,o.useCallback)((t=>{switch(t){case"size":return ee(oe,{sideKey:e});case"notionalSize":return ee(se,{sideKey:e});case"pnl":return ee(le,{sideKey:e});case"tpsl":return ee(be,{sideKey:e});case"entryPrice":return ee(ce,{sideKey:e});case"markPrice":return ee(ue,{sideKey:e});case"liquidationPrice":return ee(r?pe:me,{sideKey:e});case"marginRatio":return ee(r?ye:ge,{sideKey:e});case"margin":return ee(he,{sideKey:e});default:return null}}),[r,e]);return ee("div",{className:"row-wrap"},ee(ne,{sideKey:e,actionPlaceOrderModal:t}),te.map((e=>ee(ie,{key:e},a(e)))))},xe=(0,o.memo)(ve);var Se=s().createElement;const ke=["pnl","tpsl","size","notionalSize","marginRatio","margin","entryPrice","markPrice","liquidationPrice"],Pe=({sideKey:e})=>{const{getI18n:t}=(0,l.Z)(),{formatedPnl:r,pnlColor:a,ROEVal:i}=(0,Q.qU)({sideKey:e});return Se(s().Fragment,null,Se(re,null,t("m-unrealizedPnl",{defaultValue:"Unrealized PNL(ROE %)"})),Se(j.Z,{variant:"subtitle1",color:a},`${r}(${i})`))},Te=({sideKey:e,actionPlaceOrderModal:t})=>{const{assetMode:r}=(0,P.F7)(),a=(0,o.useCallback)((t=>{switch(t){case"size":return Se(oe,{sideKey:e});case"notionalSize":return Se(se,{sideKey:e});case"pnl":return Se(Pe,{sideKey:e});case"tpsl":return Se(be,{sideKey:e});case"entryPrice":return Se(ce,{sideKey:e});case"markPrice":return Se(ue,{sideKey:e});case"liquidationPrice":return Se(r?pe:me,{sideKey:e});case"marginRatio":return Se(r?ye:ge,{sideKey:e});case"margin":return Se(he,{sideKey:e});default:return null}}),[r,e]);return Se("div",{className:"row-wrap"},Se(ne,{sideKey:e,actionPlaceOrderModal:t}),Se("div",{className:"row-grid"},ke.map((e=>Se("div",{key:e,className:e},a(e))))))},Ce=(0,o.memo)(Te),we={position:"relative",flexDirection:"column",flex:"1 0",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:10,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-wrap":{fontSize:"12px",color:"t.primary",py:15,borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:15,borderBottom:"none"},"& .row-item":{justifyContent:"space-between",alignItems:"center",py:"minor"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}},Ie={position:"relative",flexDirection:"column",height:"100%",".action-bar":{display:"flex",justifyContent:"space-between",alignItems:"center",height:32,pt:0,label:{width:"auto"}},".empty":{display:"flex",minHeight:120,alignItems:"center",justifyContent:"center",color:"t.secondary",fontSize:0},".row-list":{height:"calc(100% - 32px)",overflow:"auto","&::-webkit-scrollbar":{display:"none"},"&::-webkit-scrollbar-thumb":{bg:"transparent"}},".row-wrap":{fontSize:"12px",color:"t.primary",py:"ls",borderBottom:"1px solid",borderColor:"line","&:last-of-type":{mb:15,borderBottom:"none"},".row-grid":{display:"grid",alignItems:"center",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(4, 1fr)",gridGap:"12px 16px",gridTemplateAreas:'"pnl pnl tpsl"\n        "size notionalSize marginRatio"\n        "margin entryPrice markPrice"\n        "liquidationPrice . ."',"& .pnl":{gridArea:"pnl"},"& .tpsl":{gridArea:"tpsl"},"& .tpsl, & .marginRatio, & .markPrice":{textAlign:"right"},"& .right-title":{justifyContent:"flex-end"}},"& .row-item":{justifyContent:"space-between",alignItems:"center"},"& .symbol-wrap":{display:"flex",alignItems:"center",fontSize:0,"&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor",fontSize:1,fontWeight:"medium"},"& .leverage":{px:"minor",mr:"6px",fontSize:0,color:"t.yellow",bg:"rgba(240, 185, 11, .15)",borderRadius:"2px"}},"& .close-position":{py:"minor",px:"xs",fontSize:0,color:"t.primary",bg:"line",borderRadius:"3px"}}};var Me=s().createElement;const Ee=()=>{const{getI18n:e}=(0,l.Z)();return Me("div",{className:"empty"},e("nodata",{defaultValue:"You have no position."}))},Ne=({isMobile:e,isEmpty:t,hasMore:r,loadMore:s,loading:l,data:c=[]})=>{const{0:u,1:d}=(0,o.useState)(!1),{0:m,1:f}=(0,o.useState)(""),g=(0,o.useMemo)((()=>c.map((e=>({sideKey:e})))),[c]);(0,o.useEffect)((()=>{r&&s()}),[r,s]);const y=(0,o.useCallback)((()=>{d(!1)}),[]),h=(0,o.useCallback)((e=>{d(!0),f(e)}),[d,f]);return Me(n.Z,{sx:e?we:Ie},Me(a.Z,{fullScreen:!0,show:l}),Me(p,null),t?Me(Ee,null):e?g.map((({sideKey:e})=>Me(xe,{key:e,sideKey:e,actionPlaceOrderModal:h}))):Me("div",{className:"row-list"},g.map((({sideKey:e})=>Me(Ce,{key:e,sideKey:e,actionPlaceOrderModal:h})))),r&&Me(i.Z,{showMore:s,check:{offset:200},loading:l}),Me(W,{open:u,curSideKey:m,onClose:y}))},Ze=s().memo(Ne)},gDmf:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ie});var a=r("bN60"),i=r("e5RN"),n=r("/SIk"),o=r.n(n),s=r("h+3y"),l=r("OV9X"),c=r("BrsQ"),u=r("rdEq"),d=r("t0pL"),m=r("Z8nA"),p=r("Vg22"),f=r("O94r"),g=r.n(f),y=r("+dPF"),h=r("shek"),b=o().createElement;const v={flexDirection:"column",padding:"4px",fontSize:"12px",".radio-title":{my:"10px",color:"t.white",opacity:"0.5"},".radio-row":{display:"flex",alignItems:"center"},svg:{color:"t.yellow"},".unchecked svg":{color:"t.white",cursor:"pointer"},".radio-label":{mr:"24px",fontSize:"12px",color:"t.white",cursor:"pointer"}};function x({tipText:e}){const t=(0,p.useDispatch)(),{getI18n:r}=(0,h.Z)(),{useLastPrice:a}=(0,y.F7)(),n=e=>{(0,d.yN)({pnlPriceBasis:e},{}),t.preference.updateState({useLastPrice:"lastPrice"===e})};return b(i.Z,{sx:v},e,b("div",{className:"radio-title"},r("selectPriceBasis",{defaultValue:"Select Price Basis"})),b("div",{className:"radio-row"},["markPrice","lastPrice"].map((e=>{const t=a?"lastPrice"===e:"markPrice"===e;return b(m.ZP,{className:g()({unchecked:!t}),key:e,value:e,checked:t,onChange:n},b("div",{className:"radio-label"},r(e)))}))))}var S=r("VDPE"),k=r("9am+"),P=o().createElement;const T={fontSize:0,whiteSpace:"normal",lineHeight:"14px",maxHeight:"28px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"},C={maxWidth:"330px"},w={cursor:"pointer"},I=({headers:e,style:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,k.l)(),o=(0,n.useCallback)(((e,t,n,o)=>{switch(e){case"pnl":return P(u.m,{tip:P(x,{tipText:t}),tipSx:C,labelSx:w},n);case"closePosition":return P(S.ZP,{tip:t,title:n});case"liquidationPrice":return t?P(u.m,{tip:t,learnMoreLink:o},P(l.Z,{sx:T},n),r&&P(c.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:a})):P(i.Z,{alignItems:"center"},P(l.Z,{sx:T,color:"t.third"},n),r&&P(c.Z,{ml:"3px",cursor:"pointer",size:12,flexShrink:0,onClick:a}));default:return t?P(u.m,{tip:t,learnMoreLink:o},n):P(i.Z,{alignItems:"center"},P(l.Z,{sx:T,color:"t.third"},n))}}),[a,r]);return console.log("headers",e),P("div",{className:"positionRow header",style:t},e.filter((e=>e.defaultChecked||!e.defaultChecked&&e.unCheckedComponents)).map((e=>{const{key:t,className:r,title:a,tip:i,learnMoreLink:n,unCheckedComponents:s,defaultChecked:l}=e,c=!l&&s?s.title:a,u=!l&&s?s.tip:i;return P("div",{key:t,className:r},o(t,u,c,n))})))},M=o().memo(I);var E=r("9rpF"),N=r("l40n"),Z=r("AHTf"),A=r("+tqa"),O=r("5vwO"),R=r("cN65"),V=r("COVG"),L=r("XhNN"),F=r("wjiZ"),D=r("kzg9"),_=r("Gbz3"),z=o().createElement;const B={padding:"16px",bg:"popupBg",boxShadow:"elevation2",borderRadius:"4px",".check-header":{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"14px","& .name":{color:"t.secondary",marginRight:"16px"}},".sort-header":{color:"t.third",display:"flex",justifyContent:"flex-start",alignItems:"center","& .back":{marginLeft:"8px",cursor:"pointer",fontSize:"12px"}}},K=["notionalSize","adl","tpSl","closePosition"],q=({headers:e=[],onSort:t,onCheck:r})=>{const a=e.map((e=>(0,O.Z)((0,O.Z)({},e),{},{value:e.key,label:e.title}))),i=a.filter((e=>e.sortable&&(e.defaultChecked||e.alwaysShowInColumn))).map((e=>(0,O.Z)((0,O.Z)({},e),{},{label:e.sortingTitle||e.title}))),o=a.filter((e=>e.checkable));o.sort(((e,t)=>K.indexOf(e.value)-K.indexOf(t.value)));const{getI18n:s}=(0,_.yk)(),{0:c,1:u}=(0,n.useState)("check"),d=e=>{const a=Object.keys(e)[0],n=e[a];r&&r(o.map((e=>e.value===a?(0,O.Z)((0,O.Z)({},e),{},{defaultChecked:n}):e)).filter((e=>e.defaultChecked)).map((e=>e.value)));let s=i.map((e=>e.value));n?s.push(a):s=s.filter((e=>e!==a)),t&&t(s.concat(a))};return"check"===c?z(L.Z,{__css:B,onClick:e=>e.stopPropagation()},z("div",{className:"check-header"},z(l.Z,{variant:"captionSub",className:"name"},s("positions-preferenceTitle")),z("div",{className:"action"},z(F.Z,{variant:"defaultLink",__css:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),u("sort")}},s("positions-preferenceSort")))),z("div",{className:"list"},z(R.Z,{options:o,getValue:d}))):z(L.Z,{__css:B,onClick:e=>e.stopPropagation()},z("div",{className:"sort-header"},z(D.Z,{size:16,onClick:()=>{u("check")}}),z("div",{className:"back",onClick:()=>{u("check")}},s("positions-preferenceBack"))),z("div",{className:"list"},z(V.Z,{items:i,onSort:e=>{t&&t(e)}})))},W=(0,n.memo)(q);var H=o().createElement;const U=({headers:e,onCheck:t,onSort:r})=>{const a=(0,_.BF)(Z.$f);return H("div",{className:"action-bar"},H(A.Z,null),a&&H(E.ZP,{trigger:"click",sx:{marginLeft:16,marginTop:"4px"},overlay:H(W,{headers:e,onCheck:t,onSort:r}),overlayProps:{marginBottom:"8px"},placement:"top",enablePortal:!0},H(N.Z,{mr:"8px",fontSize:"20px",sx:{color:"icons.close",cursor:"pointer","&:hover path":{fill:"t.third"}}})))},j=o().memo(U);var $=r("Bvu3"),G=r("BcM3"),J=r("6i0L"),Y=r("Sdhy"),Q=r("y6Jw"),X=r("bbFg"),ee=r("k/nb"),te=o().createElement;const re=({sideKey:e})=>{const{assetMode:t}=(0,_.F7)(),{headers:r}=(0,n.useContext)(ee.Z),a=(0,n.useCallback)((r=>{switch(r.key){case"symbol":return te(ie,{key:r.key,sideKey:e});case"size":return te(ne,{key:r.key,sideKey:e});case"notionalSize":return te(oe,{key:r.key,sideKey:e});case"entryPrice":return te(se,{key:r.key,sideKey:e});case"markPrice":return te(le,{key:r.key,sideKey:e});case"liquidationPrice":return te(t?ue:ce,{key:r.key,sideKey:e});case"marginRatio":return te(t?fe:pe,{key:r.key,sideKey:e});case"margin":return te(ye,{key:r.key,sideKey:e});case"pnl":return te(he,{key:r.key,sideKey:e});case"adl":return te(be,{key:r.key,sideKey:e});case"closePosition":return te(ve,{key:r.key,sideKey:e});case"tpSl":return te(xe,{key:r.key,sideKey:e})}}),[t]);return te("div",{className:"positionRow body"},r.filter((e=>e.defaultChecked||e.alwaysShowInColumn)).map(a))},ae=(0,n.memo)(re),ie=({sideKey:e})=>{const{changeSymbol:t}=(0,n.useContext)(ee.Z),r=(0,_.t2)(e,"symbol"),{color:a,symbolText:i,symbolName:o,leverage:s}=(0,J.iA)({sideKey:e});return te("div",{className:"symbol",onClick:()=>t({stateSymbol:r})},te("div",{className:`bar bar-${a}`}),te(G.O,{symbolName:o,fallbackText:i}),te("div",{className:"leverage"},`${s}x`))},ne=({sideKey:e})=>{const{color:t,formatedQuantityAmount:r,unit:a}=(0,J.v_)({sideKey:e});return te("div",{className:`size size-${t}`},`${r} ${a}`)},oe=({sideKey:e})=>{const{formattedNotionalSize:t,unit:r}=(0,J.jK)({sideKey:e});return te("div",{className:"notionalSize"},`${t} ${r}`)},se=({sideKey:e})=>{const{formatedEntryPrice:t}=(0,J.A4)({sideKey:e});return te("div",{className:"entryPrice"},t)},le=({sideKey:e})=>{const{formatedMarkPrice:t}=(0,J.PH)({sideKey:e});return te("div",{className:"markPrice"},t)},ce=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,J.Mx)({sideKey:e});return te(me,{validLiq:t>0,formatedLiqPrice:r})},ue=({sideKey:e})=>{const{liquidationPrice:t,formatedLiqPrice:r}=(0,Y.e)({sideKey:e});return te(me,{validLiq:t>0,formatedLiqPrice:r})},de={color:"t.emphasize","&:hover":{color:"t.emphasize"}},me=(0,n.memo)((({validLiq:e,formatedLiqPrice:t})=>{const{showLiqRefresh:r,handleLiqRefresh:a}=(0,k.l)(),{getI18n:i}=(0,h.Z)(),{getI18n:n}=(0,_.yk)();return te("div",{className:"liquidationPrice"},r?te(u.m,{tip:i("liquidationPriceRefreshTip",{defaultValue:""}),labelSx:de},te("div",{className:"liqRefresh",onClick:a},n("refresh",{defaultValue:"Refresh"}))):e?t:te(u.m,{tip:i("liquidationPriceLowRiskTip",{defaultValue:""}),labelSx:de},"- -"))})),pe=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,J.ek)({sideKey:e});return te(ge,{ratioColor:t,riskRatio:r})},fe=({sideKey:e})=>{const{ratioColor:t,riskRatio:r}=(0,Y.U)({sideKey:e});return te(ge,{ratioColor:t,riskRatio:r})},ge=({ratioColor:e,riskRatio:t})=>te("div",{className:`marginRatio marginRatio-${e}`},t,"%"),ye=({sideKey:e})=>{const{0:t,1:r}=(0,n.useState)(!1),{actionAdjustMarginModal:a}=(0,n.useContext)(ee.Z),i=(0,_.t2)(e,"isolated"),{getI18n:s}=(0,h.Z)(),l=i?s("Isolated",{defaultValue:"Isolated"}):s("Cross",{defaultValue:"Cross"}),{formatedMargin:c}=(0,J.Yq)({sideKey:e}),u=(0,n.useMemo)((()=>te($.Z,{size:16,color:t?"t.primary":"t.third"})),[t]);return te(o().Fragment,null,i?te("div",{className:"margin",style:{minWidth:"auto",cursor:"pointer"},onClick:()=>a(e),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},te("div",{className:"margin-text"},te("div",null,c),te("div",null,`(${l})`)),u):te("div",{className:"margin"},te("div",{className:"margin-text"},te("div",null,c),te("div",null,`(${l})`))))},he=({sideKey:e})=>{const{formatedPnl:t,pnlColor:r,ROEVal:a}=(0,J.qU)({sideKey:e});return te("div",{className:`pnl pnl-${r}`},te("div",null,t),te("div",null,`(${a})`))},be=({sideKey:e})=>{const t=(0,_.t2)(e,"adl");return te("div",{className:"adl"},te(Q.Z,{adl:t}))},ve=({sideKey:e})=>{const t=(0,_.t2)(e,"symbol"),r=(0,_.t2)(e,"positionSize"),a=(0,_.t2)(e,"initialMarkPrice"),i=(0,_.t2)(e,"selectPrice"),n=(0,_.t2)(e,"positionSide");(0,_.t2)(e,"entryPrice");return te("div",{className:"closePosition"},r?te(X.Z,{symbol:t,sideKey:e,initialMarkPrice:a,selectPrice:i,positionSize:r,positionSide:n}):te(o().Fragment,null))},xe=({sideKey:e})=>{const{actionTpslModal:t}=(0,n.useContext)(ee.Z),{formatedTPPrice:r,formatedSLPrice:a}=(0,J.Mn)({sideKey:e}),i=(0,n.useMemo)((()=>te($.Z,{size:16,sx:{cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:()=>t(e)})),[e,t]);return te("div",{className:"tpSl"},te("div",{className:"tpSl-text"},te("div",null,r," /"),te("div",null,a)),i)};var Se=r("uefD"),ke=r("pVAJ");var Pe=o().createElement;const Te=e=>Pe(ae,e),Ce=(e,t)=>t[e].sideKey,we=({loading:e,headers:t,onCheckHeader:r,onSortHeader:o,data:l=[]})=>{const c=(0,n.useMemo)((()=>l.map((e=>({sideKey:e})))),[l]),u=(0,n.useMemo)((()=>{let e=0;return t.filter((e=>e.defaultChecked||!e.defaultChecked&&e.unCheckedComponents)).forEach((({key:t})=>{e+=Se.G4[t]||0})),{minWidth:e}}),[t]),{getI18n:d}=(0,_.yk)(),{apiError:m,onRefresh:f}=(()=>{const[e]=(0,ke.z4)(),t=(0,p.useSelector)((e=>e.loading.effects.position.queryPosition)),r=(0,p.useSelector)((e=>e.position.apiError)),a=(0,p.useDispatch)(),i=(0,n.useCallback)((()=>{t||a.position.queryPosition({symbol:e})}),[t,a.position]);return(0,n.useMemo)((()=>({loading:t,apiError:r,onRefresh:i})),[t,r,i])})(),g=(0,S.yN)({hideOtherSymbol:!1});return Pe("div",{id:"position-pc",style:{height:"100%"}},Pe(i.Z,{sx:Se.w_},Pe(j,{headers:t,onSort:o,onCheck:r}),Pe(M,{headers:t,style:u}),Pe(s.v,{apiError:m,confirmTip:d("positionErrorConfirmTip",{defaultValue:"Cancel all open orders and close all positions here."}),onRefresh:f,onConfirm:g},Pe(a.a,{direction:"xxx",dataSource:c,loading:e,loadWithContent:!0,listSx:u,itemElement:Te,itemKey:Ce,itemHeight:40}))))},Ie=o().memo(we)},VDPE:(e,t,r)=>{"use strict";r.d(t,{vR:()=>A,ZP:()=>R,yN:()=>N});var a=r("/SIk"),i=r.n(a),n=r("XhNN"),o=r("e5RN"),s=r("X46w"),l=r("OV9X"),c=r("FZ38"),u=r("fi7b"),d=r("TeQN"),m=r("EVzf"),p=r("8RC1"),f=r("rdEq"),g=r("pVAJ"),y=r("Gbz3"),h=r("k/nb"),b=r("cYxv"),v=r("tsUn"),x=r("shek"),S=i().createElement;const k={pt:"xs",flexDirection:"column",alignItems:"center",textAlign:"center","& .title":{mt:"md",color:"t.primary"},"& .fail-info":{pt:"xs",mb:"md",width:"100%",maxHeight:304,overflowY:"auto","& .fail-order":{flexDirection:"column",mb:10},"& .symbol-wrap":{justifyContent:"center",alignItems:"center",mb:"2px","&.buy":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"buy"}},"&.sell":{"&::before":{display:"block",content:"''",width:"4px",height:"4px",bg:"sell"}}},"& .symbolText":{display:"flex",alignItems:"center",mx:"minor"},"& .symbol":{mr:"minor"}}},P=({variant:e,className:t,children:r,color:a,whiteSpace:i="pre-wrap"})=>S(l.Z,{variant:e,className:t,color:a,sx:{whiteSpace:i}},r),T=({orders:e,productMap:t,isCoinFutures:r})=>{const{getI18n:a}=(0,x.Z)(),{getI18n:n}=(0,y.yk)();return S(o.Z,{sx:k},S(b.Z,{size:80}),S(l.Z,{variant:"headline6",className:"title"},n("ClosePositionsFailed")),S("div",{className:"fail-info"},Object.values(e).map((({symbol:e,positionSide:s,amount:c,color:u,messages:d},m)=>{let p,f=e;const g=null===t||void 0===t?void 0:t[e],{baseAsset:y=""}=g||{},h=r?n("Cont",{defaultValue:"Cont"})||"Cont":y;return g&&(p=(0,v.H)(g,n)),S(o.Z,{key:m,className:"fail-order"},S(o.Z,{className:`symbol-wrap ${u}`},S("div",{className:"symbolText"},p?S(i().Fragment,null,S(P,{variant:"subtitle1",className:"symbol"},p.symbol),S(P,{variant:"body1"},p.contractTypeI18n," ",p.deliveryDateFormat)):S(P,{variant:"subtitle1"},f)),S(P,{variant:"subtitle1",color:u},"LONG"===s?a("psLong",{defaultValue:"Long"}):a("psShort",{defaultValue:"Short"}))),d.map(((e="")=>S(l.Z,{key:e,variant:"body2",color:"t.primary",mt:"3px"},e.replace(/%unit%/,h)))))}))),S(s.Z,{sz:"large",width:"100%",onClick:()=>p.ZP.close()},n("OK")))},C=i().memo(T);var w=r("COFI"),I=r("wdcV"),M=r("Vg22"),E=i().createElement;const N=({hideOtherSymbol:e=!1})=>{const{isLight:t}=(0,g.Fg)(),r=(0,g.iB)(),[i]=(0,g.z4)(),{isDelivery:l}=(0,a.useContext)(h.Z),{getI18n:c}=(0,x.Z)(),{getI18n:u}=(0,g.ZK)("trd-openOrder"),f=(0,a.useMemo)((()=>e?{symbolList:[i],newOrderRespType:"RESULT"}:{newOrderRespType:"RESULT"}),[e,i]),y=(0,a.useCallback)((()=>{try{(0,m.F)(f).then((e=>{const{success:a,data:{failedOrderRespList:i=[]}}=e||{};if(a&&i.length){const e=(0,I.QN)(i);p.ZP.show({isLight:t,sx:{minWidth:"360px",maxWidth:"360px"},onPressEnter:y,onPressEsc:()=>p.ZP.close(),children:E(C,{orders:e,productMap:r,isCoinFutures:l})})}p.ZP.close()})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}catch(e){p.ZP.close()}}),[f,t,r]),b=(0,a.useCallback)((()=>{p.ZP.close()}),[]);return(0,a.useCallback)((r=>{var a;null===r||void 0===r||null===(a=r.stopPropagation)||void 0===a||a.call(r),p.ZP.show({isLight:t,showCloseIcon:!1,sx:{width:["300px","360px"],height:"auto"},onPressEnter:()=>p.ZP.close(),onPressEsc:()=>p.ZP.close(),children:E(n.Z,null,E(n.Z,{px:1,pt:[0,"16px"],sx:{textAlign:"center"}},E(d.Z,{size:[60,96]}),E("div",null,e?c("closePositionTextPartial",{symbol:i,defaultValue:"Are you sure you want to close all positions of {{symbol}} at market price?"}):c("closePositionText",{defaultValue:"Are you sure you want to close all your positions at market price?"}))),E(o.Z,{mt:"24px"},E(s.Z,{sx:{width:.5,mr:3},sz:"l",flexGrow:1,colorStyle:"secondary",onClick:b},u("dialog-cancel",{defaultValue:"Cancel"})),E(s.Z,{sx:{width:.5},sz:"l",flexGrow:1,onClick:y},u("dialog-confirm",{defaultValue:"Confirm"}))))})}),[u,c,y,e,t,i])},Z=({canPlaceOrder:e,closeTip:t})=>{const{t:r}=(0,y.$G)(),{getI18n:i}=(0,y.yk)(),o=N({hideOtherSymbol:!1}),c=(0,a.useMemo)((()=>({width:"231px",color:"#1E2329",".btn-area":{mt:"4px",display:"flex",justifyContent:"flex-end",alignItems:"center",".text":{fontSize:"14px",fontWeight:500,cursor:"pointer"},".white":{ml:"18px",backgroundImage:"none","&:hover":{backgroundImage:"none"}}}})),[]);return E(n.Z,{sx:c},E("div",{className:"text"},i("service-abnormal",{defaultValue:"The service is currently overloaded or malfunctioning. "})," ","\xa0",e&&E(u.c,{t:r,i18nKey:(0,y.Gv)("abnormal-close-all"),components:{bold:E("span",{style:{fontWeight:"bold"}})},defaults:"<bold>Cancel all open orders</bold> and <bold>close all positions</bold> here."})),e?E("div",{className:"btn-area"},E(l.Z,{className:"text",onClick:t},i("cancelBtnText",{defaultValue:"Cancel"})),E(s.Z,{className:"white",onClick:()=>{o(null),t()}},i("confirmBtn",{defaultValue:"Confirm"}))):E("div",{className:"btn-area"},E(s.Z,{className:"white",onClick:t},i("OK",{defaultValue:"OK"}))))},A=({btnText:e})=>{const t=(0,y.Xb)(),r=N({hideOtherSymbol:t});return(0,a.useEffect)((()=>(0,w.GY)((async({name:e})=>{switch(e){case w.IS:r(null)}}))),[r]),E(s.Z,{onClick:r,variant:"quiet",sz:"s",pl:"0"},e)},O=({tip:e,title:t})=>{const{headers:r}=(0,a.useContext)(h.Z),i=(0,y.C3)(),{0:n,1:o}=(0,a.useState)(document.getElementById("position-pc"));(0,a.useEffect)((()=>{o(null)}),[r]),(0,a.useEffect)((()=>{o(document.getElementById("position-pc"))}),[i,n]);const s=(0,y.Dj)(),u=(null===s||void 0===s?void 0:s.length)||0,d=(0,g.zk)("abnormal"),m=(0,g.zk)("openTip"),p=(0,g.zk)("placeOrder"),b=(0,M.useDispatch)(),v=(0,a.useCallback)((()=>b.serviceStatus.updateStateImmutable({openTip:!1})),[]),{activeTab:x}=(0,g.jV)();return"0"!==x?null:d?E("div",{style:{width:"fit-content",position:"relative"}},E(c.Z,{container:n,open:m,arrow:!0,boundary:document.body,bg:"primary",placement:"top-start",tip:E(Z,{canPlaceOrder:p,closeTip:v})},e?E(A,{btnText:t}):E(l.Z,{sx:{fontSize:0,color:"t.secondary"}},t))):e?E(f.m,{tip:e},u?E(A,{btnText:t}):t):E(l.Z,{sx:{fontSize:0,color:"t.secondary"}},t)},R=i().memo(O)},"+tqa":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r("pVAJ"),i=r("GEp0"),n=r("HWFi"),o=r("OV9X"),s=r("/SIk"),l=r.n(s),c=r("Vg22"),u=r("Gbz3"),d=l().createElement;const m=()=>{const{getI18n:e}=(0,u.yk)(),[t]=(0,a.z4)(),r=(0,c.useDispatch)(),l=(0,u.Xb)(),m=(0,s.useRef)(l),p=(0,s.useCallback)((e=>{const a=e.currentTarget.checked;r.position.hideOtherSymbol({hideOtherSymbol:a,onlySymbol:t})}),[t,r.position]);return(0,s.useEffect)((()=>{m.current=l}),[l]),(0,s.useEffect)((()=>{m.current&&r.position.hideOtherSymbol({hideOtherSymbol:!0,onlySymbol:t})}),[t]),d(i.Z,{sx:{fontSize:[1,0],color:"t.third",cursor:["auto","auto","pointer"],lineHeight:["unset","24px","24px"]}},d(n.Z,{checked:l,onChange:p}),d(o.Z,{sx:{userSelect:"none"}},e("hideOtherSymbol",{defaultValue:"Hide Other Symbol"})))},p=l().memo(m)},Lr13:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("e5RN"),s=n().createElement;const l=({onClick:e,sx:t,children:r})=>s(o.Z,{justifyContent:"center",alignItems:"center",sx:(0,a.Z)({display:"flex",flex:"1",minWidth:"40px",height:"24px",border:"1px solid",borderColor:"position.percentInputBorderColor",borderRadius:"2px",cursor:"pointer",mr:"4px",color:"t.third",bg:"bg3",textAlign:"center",":hover":{color:["t.yellow","t.yellow","t.primary"],bg:["bg3","bg3","line"],borderColor:"currentColor"},":last-of-type":{mr:0}},t),onClick:e},r),c=({percents:e=[.1,.25,.5,.75,1],onChange:t=(e=>{}),sx:r={},percentSx:i={}})=>s(o.Z,{variant:"dropdown",justifyContent:"space-between",sx:(0,a.Z)({width:"100%",bg:"popupBg",borderRadius:"4px",p:"8px"},r)},e.map((e=>s(l,{key:e,sx:i,onClick:()=>t(e)},100*e,"%"))))},shek:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n,G:()=>o});var a=r("pVAJ");const i="trd-Position",n=e=>(0,a.ZK)(i,e),o=e=>`${i}-${e}`},"6i0L":(e,t,r)=>{"use strict";r.d(t,{A4:()=>v,Mx:()=>Z,Yq:()=>O,PH:()=>x,jK:()=>N,qU:()=>R,ek:()=>A,v_:()=>E,iA:()=>b,Mn:()=>S});var a=r("AHTf"),i=r("5vwO"),n=r("Vg22"),o=r("pVAJ"),s=r("tsUn"),l=r("4xt1"),c=r("EPGa"),u=r("Gbz3"),d=r("FOuV"),m=r("IpC4"),p=r("GG68"),f=r("JlsY"),g=r("74Of");const{leverageInfo:y}=d.Fy,h={long:"buy",short:"sell"},b=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"positionSize"),a=Number(r),i=h[a>0?"long":"short"],{leverageList:n={}}=(0,u.rf)()||{},l=n[t]||y.defaultVal,c=(0,o.iB)()[t],{getI18n:d}=(0,u.yk)();let m,p=t;return c&&(m=(0,s.H)(c,d),p=m.fullName),{color:i,symbolText:p,symbolName:m,leverage:l}},v=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"entryPrice"),a=(0,o.iB)()[t]||{},{pricePrecision:i}=a;return{formatedEntryPrice:(0,l.uf)(r,i)}},x=({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"markPrice"),a=(0,o.iB)()[t]||{},{pricePrecision:i}=a;return{formatedMarkPrice:(0,l.uf)(r,i)}},S=({sideKey:e})=>{var t,r;const a=(0,u.t2)(e,"symbol"),i=(0,u.t2)(e,"positionSize"),n=(0,u.t2)(e,"positionSide"),s=(0,o.iB)()[a]||{},{pricePrecision:d}=s,{preOrders:m}=(0,o.E)(),p=Number(i),f={};m.forEach((e=>{const t=!0===e.closePosition,r=a===e.symbol,i=n===e.positionSide,o=p<0&&"BUY"===e.side||p>0&&"SELL"===e.side;t&&r&&i&&o&&(e.type===c.Jm.TAKE_PROFIT_MARKET&&(f.tp=e),e.type===c.Jm.STOP_MARKET&&(f.sl=e))}));const g=null!==f&&void 0!==f&&null!==(t=f.tp)&&void 0!==t&&t.stopPrice?(0,l.uf)(f.tp.stopPrice,d):"--",y=null!==f&&void 0!==f&&null!==(r=f.sl)&&void 0!==r&&r.stopPrice?(0,l.uf)(f.sl.stopPrice,d):"--";return{strategyOrders:f,formatedTPPrice:g,formatedSLPrice:y}};var k=r("Tfqf"),P=r("H3aL"),T=r("DCTW");const{leverageInfo:C}=d.Fy,w={long:"buy",short:"sell"},I=()=>{const e=(0,u.F)(),t=(0,o.iB)()||{};return e.map((e=>{var r;return(0,i.Z)((0,i.Z)({},e),{},{contractVal:null===(r=t[e.symbol])||void 0===r?void 0:r.contractVal})}))},M=(0,a.nM)(),E=e=>M?(({sideKey:e})=>{const{getI18n:t}=(0,u.yk)(),r=(0,u.t2)(e,"symbol"),a=(0,u.t2)(e,"positionSize"),i=(0,u.cO)(e)||{},{lastPrice:n}=(0,u.zZ)({symbol:null===i||void 0===i?void 0:i.symbol}),s=Number(a),c=w[s>0?"long":"short"],d=(0,o.iB)()[r]||{},{quantityPrecision:m,marginAsset:p="",equalQtyPrecision:f,contractVal:g=100}=d,{isCoinUnit:y}=(0,k.Q)(),h=s>0?"":"-",b=y?(0,P.unitChangeCoinQty)({quantity:Math.abs(s),contractVal:g,price:n,precision:f,format:!1}):s.toFixed(m);return{color:c,quantityAmount:b,formatedQuantityAmount:y?`${h}${b}`:(0,l.uf)(s,m),unit:y?p:t("Cont",{defaultValue:"Cont"})}})(e):(({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"positionSize"),a=(0,u.cO)(e)||{},{lastPrice:i}=(0,u.zZ)({symbol:null===a||void 0===a?void 0:a.symbol}),n=Number(r),s=h[n>0?"long":"short"],c=(0,o.iB)()[t]||{},{baseAsset:d="",pricePrecision:f=2,quantityPrecision:g=8,marginAsset:y=""}=c,{isCoinUnit:b}=(0,m.Q)(),v=n>0?"":"-",x=b?n.toFixed(g):(0,p.WA)({quantity:Math.abs(n),price:i,precision:f,format:!1});return{color:s,quantityAmount:x,formatedQuantityAmount:b?(0,l.uf)(n,g):`${v}${x}`,unit:b?d:y}})(e),N=e=>M?(({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"positionSize"),a=(0,o.iB)()[t]||{},{contractVal:i}=a,n=Math.abs(r)*Number(i);return{notionalSize:n,formattedNotionalSize:i?(0,l.uf)(n,2):"-",unit:"USD"}})(e):(({sideKey:e})=>{const t=(0,u.t2)(e,"symbol"),r=(0,u.t2)(e,"positionSize"),a=(0,u.t2)(e,"markPrice"),i=(0,o.iB)()[t]||{},{quoteAsset:n=""}=i,s=Math.abs(r)*a;return{notionalSize:s,formattedNotionalSize:(0,l.uf)(s,2),unit:n}})(e),Z=e=>M?(({sideKey:e})=>{const t=(0,u.KQ)(),r=(0,u.Gf)(),a=I(),n=(0,u.cO)(e)||{},{symbol:s,isolated:c,isolatedWallet:d=0,positionSide:m}=n,p=(0,o.iB)()[s]||{},{marginAsset:f,pricePrecision:g,contractVal:y}=p,h=(0,i.Z)((0,i.Z)({},n),{},{contractVal:y}),b=t[f]||{},{crossWalletBalance:v=0}=b,x=(null===r||void 0===r?void 0:r[s])||[],S=!c&&m&&"BOTH"!==m,k=c?d:v;let P=0;if(!c){const e=a.filter((e=>e.marginAsset===f)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==s));P=(0,T.zW)(e,r)-(0,T.ot)(e)}let C,w,M=0;if(S){const e=a.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===s&&"BOTH"!==r&&r!==m}))[0]||{positionSize:0,entryPrice:0};C="LONG"===m?h:e,w="SHORT"===m?h:e}return M=S&&C.positionSize&&w.positionSize?(0,T.ST)(x,k,P,C,w,h):(0,T.W8)(x,k,P,h),M=M<0?0:M,{liquidationPrice:M,formatedLiqPrice:M>0?(0,l.uf)(M,g):"-"}})(e):(({sideKey:e})=>{const t=(0,u.KQ)(),r=(0,u.Gf)(),a=(0,u.F)(),i=(0,u.cO)(e)||{},{symbol:s,isolated:c,isolatedWallet:d=0,positionSide:m}=i,p=(0,o.iB)()[s]||{},{marginAsset:f,pricePrecision:y}=p,h=t[f]||{},{crossWalletBalance:b=0}=h,v=(null===r||void 0===r?void 0:r[s])||[],x=!c&&m&&"BOTH"!==m,S=c?d:b;let k=0;if(!c){const e=a.filter((e=>e.marginAsset===f)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==s));k=(0,g.zW)(e,r)-(0,g.ot)(e)}let P=0;if(x){const e=a.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===s&&"BOTH"!==r&&r!==m}))[0]||{positionSize:0,entryPrice:0},t="LONG"===m?i:e,r="SHORT"===m?i:e;P=(0,g.wr)(v,S,k,t,r,i)}else P=(0,g.W8)(v,S,k,i);P=P<0?0:P;const T=(0,n.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),C=(0,n.useSelector)((e=>e.loading.effects.preference.getAssetMode));return(T||C)&&(P=0),{liquidationPrice:P,formatedLiqPrice:P>0?(0,l.uf)(P,y):"-"}})(e),A=e=>M?(({sideKey:e})=>{const t=(0,u.KQ)(),r=(0,u.Gf)(),a=I(),n=(0,u.cO)(e)||{},{symbol:s,isolated:l}=n,c=(0,o.iB)()[s]||{},{marginAsset:d,contractVal:m}=c;let p;if(l){const{isolatedWallet:e=0,symbol:t}=n,a=(null===r||void 0===r?void 0:r[t])||[],o=(0,T.SH)(a,(0,i.Z)((0,i.Z)({},n),{},{contractVal:m})),s=(0,T.nn)((0,i.Z)((0,i.Z)({},n),{},{contractVal:m}));p=(0,T.Vo)(o,e,s)}else{const e=t[d]||{},{crossWalletBalance:i=0}=e,n=a.filter((e=>e.marginAsset===d)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),o=(0,T.zW)(n,r),s=(0,T.ot)(n);p=(0,T.Vo)(o,i,s)}return{ratioColor:Number(p)>80?"negative":"",riskRatio:p}})(e):(({sideKey:e})=>{const t=(0,u.KQ)(),r=(0,u.Gf)(),a=(0,u.F)(),i=(0,u.cO)(e)||{},{symbol:s,isolated:l}=i,c=(0,o.iB)()[s]||{},{marginAsset:d}=c;let m;if(l){const{isolatedWallet:e=0,symbol:t}=i,a=(null===r||void 0===r?void 0:r[t])||[],n=(0,g.SH)(a,i),o=(0,g.nn)(i);m=(0,g.Vo)(n,e,o)}else{const e=t[d]||{},{crossWalletBalance:i=0}=e,n=a.filter((e=>e.marginAsset===d)).filter((e=>!(null!==e&&void 0!==e&&e.isolated))),o=(0,g.zW)(n,r),s=(0,g.ot)(n);m=(0,g.Vo)(o,i,s)}const p=(0,n.useSelector)((e=>e.loading.effects.preference.getMultiAssetMarginEnableConfig)),f=(0,n.useSelector)((e=>e.loading.effects.preference.getAssetMode));return(p||f)&&(m="0.00"),{ratioColor:Number(m)>80?"negative":"",riskRatio:m}})(e),O=e=>M?(({sideKey:e})=>{const t=(0,f.c)(),r=(0,u.cO)(e)||{},{symbol:a,isolated:i,isolatedWallet:n=0,positionSize:s,markPrice:c}=r,{leverageList:d={}}=(0,u.rf)()||{},m=d[a]||C.defaultVal,p=(0,o.iB)()[a]||{},{marginAsset:g="",contractVal:y=100}=p,h=(0,T.fS)({positionSize:s,markPrice:c,contractVal:y})*(0,T.yh)(m),b=i?n:h;return{margin:b,formatedMargin:`${(0,l.GW)(b,t,!0)} ${g}`}})(e):(({sideKey:e})=>{const t=(0,f.c)(),r=(0,u.cO)(e)||{},{symbol:a,isolated:i,isolatedWallet:n=0}=r,{leverageList:s={}}=(0,u.rf)()||{},c=s[a]||y.defaultVal,d=(0,o.iB)()[a]||{},{marginAsset:m=""}=d,p=(0,g.fS)(r)*(0,g.yh)(c),h=i?n:p;return{margin:h,formatedMargin:`${(0,l.uf)(h,t)} ${m}`}})(e),R=e=>M?(({sideKey:e})=>{const{useLastPrice:t}=(0,u.F7)(),r=(0,f.c)(),a=(0,u.cO)(e)||{},{symbol:n,positionSize:s,markPrice:c}=a,{leverageList:d={}}=(0,u.rf)()||{},m=d[n]||C.defaultVal,{lastPrice:p}=(0,u.zZ)({symbol:n}),g=(0,o.iB)()[n]||{},{marginAsset:y="",contractVal:h=100}=g,b=(0,T.fS)({positionSize:s,markPrice:c,contractVal:h})*(0,T.yh)(m),v=(0,T.nn)((0,i.Z)((0,i.Z)({},a),{},{contractVal:h,lastPrice:p}),t),x=0===Number(v)?"":Number(v)>0?"buy":"sell",S=0===Number(v)?"":Number(v)>0?"+":"";return{unrealizedPnl:v,formatedPnl:`${S}${(0,l.GW)(v,r,!0)} ${y} `,pnlColor:x,ROEVal:`${S}${(100*(v/b||0)).toFixed(2)}%`}})(e):(({sideKey:e})=>{const{useLastPrice:t}=(0,u.F7)(),r=(0,f.c)(),a=(0,u.cO)(e)||{},{leverageList:n={}}=(0,u.rf)()||{},s=n[null===a||void 0===a?void 0:a.symbol]||y.defaultVal,{lastPrice:c}=(0,u.zZ)({symbol:null===a||void 0===a?void 0:a.symbol}),d=(0,o.iB)()[null===a||void 0===a?void 0:a.symbol]||{},{marginAsset:m=""}=d,p=(0,g.fS)(a)*(0,g.yh)(s),h=(0,g.nn)((0,i.Z)((0,i.Z)({},a),{},{lastPrice:c}),t),b=0===Number(h)?"":Number(h)>0?"buy":"sell",v=Number(h)>0?"+":"";return{unrealizedPnl:h,formatedPnl:`${v}${(0,l.GW)(h,r,!0)} ${m}`,pnlColor:b,ROEVal:`${v}${(100*(h/p||0)).toFixed(2)}%`}})(e)},Sdhy:(e,t,r)=>{"use strict";r.d(t,{e:()=>c,U:()=>u});var a=r("4xt1"),i=r("pVAJ"),n=r("wdcV"),o=r("Gbz3"),s=r("74Of"),l=r("H8fa");const c=({sideKey:e})=>{const t=(0,o.KQ)(),r=(0,o.Gf)(),c=(0,o.F)(),u=(0,o.cO)(e)||{},{symbol:d,positionSide:m}=u,p=(0,i.iB)()[d]||{},{marginAsset:f,pricePrecision:g}=p,y=t[f]||{},{crossWalletBalance:h=0}=y,b=(null===r||void 0===r?void 0:r[d])||[],{assetsRateEquity:v,assetsMM:x}=(0,o.Nx)(),S=(0,o.G8)(),k=S[f]||{},P=((0,n.L6)(c)[f]||[]).filter((e=>(null===e||void 0===e?void 0:e.symbol)!==d)),T=(0,s.zW)(P,r),C=(0,s.ot)(P);let w=0;Object.entries(v).forEach((([e,t])=>{e!==f&&(w+=t)})),Object.entries(x).forEach((([e,t])=>{const r=S[e]||{},{askRate:a=0}=r;w-=e!==f?t*a:T*a}));let I=0;if(m&&"BOTH"!==m){const e=c.filter((e=>{const{symbol:t,positionSide:r}=e||{};return t===d&&"BOTH"!==r&&r!==m}))[0]||{positionSize:0,entryPrice:0},t="LONG"===m?u:e,r="SHORT"===m?u:e;I=(0,l._O)({accEquityAndMMs:w,assetIndex:k,bracket:b,crossWalletBalance:h,smdsUPNL:C,longPosition:t,shortPosition:r,curPosition:u})}else I=(0,l.Dj)({accEquityAndMMs:w,assetIndex:k,bracket:b,crossWalletBalance:h,smdsUPNL:C,curPosition:u});return{liquidationPrice:I,formatedLiqPrice:I>0?(0,a.uf)(I,g):"-"}},u=()=>{const{riskRatio:e}=(0,o.Nx)();return{ratioColor:Number(e)>80?"negative":"",riskRatio:e}}},"9am+":(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var a=r("/SIk"),i=r("Vg22"),n=r("Gbz3"),o=r("AHTf"),s=r("IOB8");const l=()=>{const{0:e,1:t}=(0,a.useState)(!1),r=(0,i.useDispatch)(),l=(0,o.nM)(),{isError:c}=(0,i.useSelector)(s.Y),u=(0,n.Kc)("isError"),d=c||u,m=(0,a.useCallback)((async()=>{if(!e){t(!0);try{await r.balance.getBalance(l),await r.bracket.getBrackets()}catch(a){t(!1)}t(!1)}}),[r.balance,r.bracket,l,e]);return(0,a.useMemo)((()=>({showLiqRefresh:d,handleLiqRefresh:m})),[m,d])}},h00H:(e,t,r)=>{"use strict";r.d(t,{Z:()=>dt});var a=r("5vwO"),i=r("/SIk"),n=r.n(i),o=r("Vg22"),s=r("uZih"),l=r.n(s),c=r("m92i"),u=r("qNjr"),d=r("g9rt"),m=r("e5RN"),p=r("pVAJ"),f=r("6Afj"),g=r("AHTf"),y=r("ckLu"),h=r("EPGa"),b=r("Wx6g"),v=r("FOuV"),x=r("Gbz3"),S=r("0igl"),k=r("lbaD"),P=r("k/nb"),T=r("B+lg"),C=n().createElement;const w=({visible:e,position:t,onClose:r})=>{const{sideKey:n,closeParams:s={},onConfirm:l}=t,{getI18n:c}=(0,x.yk)(),{orderConfirmation:u}=(0,x.F7)(),d=(0,o.useDispatch)(),m=(0,x.t2)(n,"symbol"),f=(0,x.t2)(n,"positionSize"),g=(0,x.t2)(n,"entryPrice"),{orderType:y,limitPrice:b,qty:v,quantity:w}=s,I=(0,p.iB)()[m]||{},{isDelivery:M}=(0,i.useContext)(P.Z),E="BUY"===(f>0?"SELL":"BUY")?"buy":"sell",N=c(f>0?"CloseLong":"CloseShort"),Z=y===h.Jm.MARKET,{contractVal:A}=I,{0:O,1:R}=(0,i.useState)(0);(0,i.useEffect)((()=>{if(e){(M?S.u:S.x)(m).then(((e={})=>{const{marketPNL:t,limitPNL:r}=(0,k.k)((0,a.Z)((0,a.Z)({},e),{},{quantity:w,isBuy:f>0,entryPrice:g,closedPrice:b,contractVal:A,isDelivery:M}));R(Z?t:r)})).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}}),[A,g,M,Z,b,f,w,m,e]);const V=(0,i.useCallback)((()=>{const e=(0,a.Z)((0,a.Z)({},u),{},{[y.toUpperCase()]:!1});d.preference.changeOrderConfirmation(e)}),[d.preference,u,y]);return C(T.Z,{symbol:m,title:N,color:E,isMarket:Z,limitPrice:b,qty:v,isClose:!0,epnl:O,onClose:r,onConfirm:l,closeTip:V})},I=n().memo(w);var M=r("AVT8"),E=r("OV9X"),N=r("X46w"),Z=r("QB3Q"),A=r("MvZp"),O=r("QSPn"),R=r("shek"),V=r("JlsY"),L=r("XhNN"),F=r("AunK"),D=r("Z/7v"),_=r("Ys09"),z=r("k4WF"),B=r("k2tD"),K=n().createElement;const q=({type:e,setType:t,maxAppend:r,maxRemovable:a,amount:n,setAmount:o,onConfirm:s,marginAsset:l})=>{const{getI18n:c}=(0,R.Z)(),{getI18n:u}=(0,x.yk)(),d=(0,V.c)(),m=(0,B.nH)(d),p="ADD"===e?u("maxAddable",{defaultValue:"Max addable"}):u("maxRemovable",{defaultValue:"Max removable"}),f="ADD"===e?r:a,g=`${c("amount",{defaultValue:"Amount"})}(${l})`,y=K(L.Z,{as:"span"},p,K(E.Z,{as:"span",color:"t.primary"},"\xa0",(0,B.GW)(f,d,!0),"\xa0",l)),h=(0,B.GW)(f,d,!1),b=Number(n)>Number(h),v=(0,i.useMemo)((()=>[{value:"ADD",text:u("add",{defaultValue:"Add"})},{value:"REMOVE",text:u("remove",{defaultValue:"Remove"})}]),[u]),S=K(L.Z,{sx:{position:"relative"}},K(L.Z,{bg:"line",width:"1px",height:"24px",sx:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)"}}),K(L.Z,{width:"120px"},K(F.Z,{hideSearch:!0,variant:"clear",size:"lg",value:e,renderValue:e=>{const t=v.find((t=>t.value===e));if(t)return K(E.Z,{as:"span"},t.text)},onChange:e=>t(e)},v.map(((e,t)=>K(D.W,{key:t,value:e.value},e.text)))))),k=K(N.Z,{variant:"quiet",onClick:()=>o(h)},c("Max",{defaultValue:"Max"}));return K(_.Z,{variant:"filled",type:"number",label:g,extraInfo:y,prefix:S,suffix:k,step:m,value:n,error:b,onChange:e=>(0,z._p)(e,o,"",d),onKeyDown:e=>(0,z.f5)(e,s),onBlur:e=>(0,z.Y5)(e)})};var W=r("wjiZ"),H=r("z2BU"),U=r("fi7b"),j=r("QlFx"),$=r("rdEq"),G=n().createElement;const J=({label:e="",labelSuffix:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:n="",className:o=""})=>G("div",{className:`field ${o}`},G("div",{className:`label ${i}`},e,t),G("div",{className:`value ${n}`},r," ",a)),Y=({children:e})=>G(L.Z,{sx:{width:"282px",fontSize:"12px",lineHeight:"16px",fontFamily:"BinancePlex"}},e),Q=({panelType:e,data:t})=>{const r=(0,p.tZ)(),{t:a}=(0,x.$G)(),{getI18n:i}=(0,x.yk)(),{symbol:n,isolatedWallet:o,maxAppend:s,maxRemovable:l,liquidationPrice:c,quoteAsset:u,marginAsset:d="USDT",pricePrecision:m}=t,f=(0,V.c)(),g=G(W.Z,{sx:{color:"t.yellow"},href:`/${r}/support/faq/360038447311`,target:"_blank"});return"ADD"===e?(()=>{const e=`${i("currentlyMarginFor",{defaultValue:"Currently Margin for"})} ${(0,j.lE)(n,i)}`,t=(0,B.GW)(o,f,!0),r=i("maxAddable",{defaultValue:"Max addable"}),l=`${(0,B.GW)(s,f,!0)}`,p=G($.m,{tip:G(Y,null,G(U.c,{t:a,i18nKey:(0,x.Gv)("maxAddableTip"),components:{jump:g},defaults:"Isolated position max addable amount is different from the available for order amount. More details are available on the <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(H.Z,{ml:"4px",size:16})),y=i("liqPriceAfterAdujst",{defaultValue:"Liq. Price after increase"}),h=c?(0,B.GW)(c,m,!0):"-";return G(L.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:p,value:l,unit:d}),G(J,{label:y,value:h,unit:u}))})():(()=>{const e=i("assignedMargin",{defaultValue:"Currently Assigned Margin"}),t=(0,B.GW)(o,f,!0),r=i("maxRemovable",{defaultValue:"Max removable"}),n=(0,B.GW)(l,f,!0),s=G($.m,{tip:G(Y,null,G(U.c,{t:a,i18nKey:(0,x.Gv)("maxRemovableTip"),components:{jump:g},defaults:"Unrealized profit cannot be transferred from the isolated position. More details are available on <jump>Isolated transferrable margin calculations</jump>."})),hideUnderLine:!0,sx:{verticalAlign:"middle"},delay:1e3,placement:"top",arrow:!0},G(H.Z,{ml:"4px",size:16})),p=i("liqPriceAfterReduction",{defaultValue:"Liquidation Price after reduction"}),y=c?(0,B.GW)(c,m,!0):"-";return G(L.Z,{mt:"md"},G(J,{label:e,value:t,unit:d}),G(J,{label:r,labelSuffix:s,value:n,unit:d}),G(J,{label:p,value:y,unit:u}))})()},X=n().memo(Q);var ee=n().createElement;const te={position:"relative",padding:"0px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:"20px",height:"64px",py:"20px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third",flex:"auto"},".value":{color:"t.primary",textAlign:"right",flex:"none"}}},re={ADD:1,REMOVE:2},ae=({visible:e,position:t,onClose:r})=>{var n;const{enqueueNotification:o}=(0,A.Z)(),{sideKey:s}=t,{getI18n:l}=(0,R.Z)(),{getI18n:c}=(0,x.yk)(),u=(0,x.G3)(),{0:d,1:m}=(0,i.useState)("ADD"),{0:f,1:g}=(0,i.useState)(""),y="ADD"===d?Number(f):-Number(f),h=(0,x.t2)(s,"symbol"),b=(0,x.t2)(s,"positionSide"),v=(null===(n=(0,p.iB)())||void 0===n?void 0:n[h])||{},{marginAsset:S="",contractVal:k=100}=v,P=(0,i.useMemo)((()=>u?{symbol:h,marginAsset:S,contractVal:k,positionSide:b}:{symbol:h,marginAsset:S,positionSide:b}),[u,h,S,k,b]);(0,i.useEffect)((()=>{s||g("")}),[s]);const T=(0,x.Qd)((0,a.Z)((0,a.Z)({},P),{},{delta:y})),C=async()=>{if(!f)return;const e={type:re[d],symbol:h,amount:f,positionSide:b};(0,O.c)(e,{}).then((e=>{const{success:t}=e;t&&o({message:c("changeMarginSuccess",{defaultValue:"Position margin adjustment failed"}),variant:"success"})})).catch((()=>{})).finally((()=>r())).catch((function(e){"undefined"!==typeof Sentry&&Sentry.captureException(e)}))};return ee(M.Z,{visible:!!s&&e,sx:te,onMaskClick:()=>r()},ee(E.Z,{variant:"title6",className:"title"},l("adjust-margin",{defaultValue:"Adjust Margin"})),ee(Z.Z,{color:"t.third",sx:{position:"absolute",top:"20px",right:"24px",cursor:"pointer"},onClick:r}),ee(q,{type:d,setType:m,maxAppend:T.maxAppend,maxRemovable:T.maxRemovable,amount:f,setAmount:g,onConfirm:C,marginAsset:S}),ee(X,{panelType:d,data:T}),ee(N.Z,{sz:"l",mt:"24px",width:1,onClick:C},c("confirmBtn",{defaultValue:"Confirm"})))},ie=n().memo(ae);var ne=r("MwrP"),oe=r.n(ne),se=r("NQFm"),le=r("xpNn"),ce=r("6i0L"),ue=n().createElement;const de=({label:e,children:t})=>ue(m.Z,{sx:{justifyContent:"space-between",fontSize:"14px",lineHeight:"16px",height:"24px",alignItems:"center"}},ue(E.Z,{color:"t.third"},e),ue(m.Z,null,t)),me=n().memo(de);var pe=n().createElement;const fe=({sideKey:e})=>{const{getI18n:t}=(0,R.Z)(),{symbolText:r,leverage:a}=(0,ce.iA)({sideKey:e}),i=(0,x.t2)(e,"positionSize"),n=(0,x.t2)(e,"positionSide"),o=i>0?"buy":"sell";let s="";return"LONG"===n?s=t("psLong",{defaultValue:"Long"}):"SHORT"===n&&(s=t("psShort",{defaultValue:"Short"})),pe(me,{label:t("symbol",{defaultValue:"Symbol"})},pe(E.Z,{color:o},r," ",s," ",a,"x"))},ge=n().memo(fe);var ye=n().createElement;const he=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,R.Z)(),{formatedEntryPrice:a}=(0,ce.A4)({sideKey:e});return ye(me,{label:r("entryPrice",{defaultValue:"Entry Price"})},ye(E.Z,{sx:{color:"t.primary"}},a," ",t))},be=n().memo(he);var ve=n().createElement;const xe=({sideKey:e,quoteAsset:t})=>{const{getI18n:r}=(0,R.Z)(),{formatedMarkPrice:a}=(0,ce.PH)({sideKey:e});return ve(me,{label:r("markPrice",{defaultValue:"Mark Price"})},ve(E.Z,{sx:{color:"t.primary"}},a," ",t))},Se=n().memo(xe);var ke=r("9rpF"),Pe=r("O94r"),Te=r.n(Pe),Ce=r("3N7n"),we=r("dcD/"),Ie=r("4xt1"),Me=r("kjyE"),Ee=r("jQmP"),Ne=r("7Q68");var Ze=n().createElement;const{LAST_PRICE:Ae}=v.gu,{TAKE_PROFIT_MARKET:Oe,STOP_MARKET:Re}=h.Jm,Ve=n().memo((({i18nType:e,stopIndex:t})=>{const{getI18n:r}=(0,x.yk)();return Ze(m.Z,{alignItems:"center",color:"t.third",pl:"8px"},e,"QUOTE"!==t&&Ze($.m,{tip:r("roe-stop-tip")},Ze(Ce.Z,{size:16,ml:"4px"})))})),Le={py:"4px",mt:"6px",bg:"modalBg",boxShadow:"elevation2",borderRadius:"4px",cursor:"pointer",".filter-option":{padding:"10px 16px",color:"t.primary","&:hover":{bg:"line"},"&.active":{color:"t.yellow"},fontSize:"14px"}},Fe=n().memo((({quoteAsset:e,stopIndex:t,changeStopIndex:r})=>{var a;const{getI18n:i}=(0,x.yk)(),n=[{label:e,value:"QUOTE"},{label:`%${i("calculate-ROE")}`,value:"ROE"}];return Ze(ke.ZP,{trigger:"hover",overlay:Ze(L.Z,{sx:Le},n.map((({label:e,value:a})=>Ze("div",{className:Te()({"filter-option":!0,active:a===t}),key:a,onClick:()=>{a!==t&&r(a)}},e))))},Ze(m.Z,{alignItems:"center",color:"t.third"},null===(a=n.find((e=>e.value===t)))||void 0===a?void 0:a.label,Ze(we.Z,{ml:"4px",color:"t.third",size:16})))})),De=({sideKey:e,order:t,type:r,cancelOrder:a,price:n,changePrice:o,workingType:s,changeWorkingType:l})=>{var c;const{getI18n:u}=(0,R.Z)(),{getI18n:d}=(0,x.yk)(),f=(0,V.c)(),g=(0,x.t2)(e,"symbol"),y=Number((0,x.t2)(e,"positionSize")),h=(0,x.NJ)(g),b=y>0?1:-1,v=(0,x.t2)(e,"entryPrice"),S=(null===(c=(0,p.iB)())||void 0===c?void 0:c[g])||{},{quoteAsset:k,marginAsset:T="",tickSize:C,pricePrecision:w,contractVal:I=100}=S,M=t?t.workingType:s,N=t?t.stopPrice:n,{isDelivery:Z}=(0,i.useContext)(P.Z),A=(0,Ee.p)(C),O=C,F=(0,Ie.uf)(N,w),D=u(M===Ae?"lastPrice":"markPrice"),z=Ze(U.c,{i18nKey:(0,R.G)("takeProfitNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Take Profit Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ze(E.Z,{as:"span",color:"t.primary"})}}),B=Ze(U.c,{i18nKey:(0,R.G)("stopLossNodeTip"),defaults:"When <text>{{workingType}}</text> reaches <text>{{stopPrice}}</text>, it will trigger Stop Market order to close this position. Estimated PNL will be",values:{workingType:D,stopPrice:F},components:{text:Ze(E.Z,{as:"span",color:"t.primary"})}}),K=u("takeProfit"===r?"takeProfit":"stopLoss"),q="takeProfit"===r?z:B,W=t&&(y>0&&t.type===Oe||y<0&&t.type===Re)?">=":"<=";let H="\u2014\u2014",j="takeProfit"===r?"buy":"sell",$="";if(""!==N){const e=(({stopPrice:e,entryPrice:t,positionSize:r,contractVal:a,isDelivery:i})=>i?r*a*(1/t-1/e):r*(e-t))({stopPrice:Number(N),entryPrice:v,positionSize:y,contractVal:I,isDelivery:Z});Number.isFinite(e)&&(H=(0,Ie.uf)(e,f)),j=e>0?"buy":"sell",$=e>0?"buy":e<0?"sell":""}const{0:G,1:J}=(0,i.useState)("QUOTE"),{0:Y,1:Q}=(0,i.useState)(""),X=(0,i.useCallback)((e=>{J(e),Q(""),o("")}),[]),ee="QUOTE"===G?n:Y,te=(0,i.useCallback)((e=>/[^\d|.|,|\u3002|e]/.test(e.key)&&e.preventDefault()),[]),re=(0,i.useCallback)((e=>{if("QUOTE"===G)(0,Me._p)(e,o,"",A);else{const t=(0,Ie.GW)(Math.abs(e.target.value),2),a="takeProfit"===r?Number(t):-Number(t),i=(({roe:e,entryPrice:t,side:r,leverage:a,isDelivery:i})=>i?t*e/100/(r*a)+t:t*r*a/(r*a-e/100))({roe:a,entryPrice:v,side:b,leverage:h,isDelivery:Z});Q(a?String(a):""),o(i.toFixed(A))}}),[G,o,A,r,v,b,h,Z]),ae=(0,i.useCallback)((()=>!!t&&a(t,r)),[a,t,r]),ie="ROE"===G&&(({type:e,side:t,roe:r,leverage:a,isDelivery:i})=>!i&&"takeProfit"===e&&1===t&&r/100>=a||!i&&"takeProfit"!==e&&-1===t&&r/100<=-a||!!(i&&"takeProfit"===e&&-1===t&&r/100>=a)||!!(i&&"takeProfit"!==e&&1===t&&r/100<=-a))({type:r,side:b,roe:Number(Y),leverage:h,isDelivery:Z}),ne="takeProfit"===r?d("less-than-reo",{defaultValue:"The ROE% must be less than {{leveragedRoe}}%",leveragedRoe:100*h}):d("greater-than-reo",{defaultValue:"The ROE% must be greater than {{leveragedRoe}}%",leveragedRoe:-100*h});return Ze(L.Z,{py:"16px"},oe()(t)?Ze(m.Z,null,Ze(_.Z,{type:"number",step:"QUOTE"===G?O:.01,variant:"filled",textAlign:"right",prefix:Ze(Ve,{i18nType:K,stopIndex:G}),placeholder:Number(0).toFixed(w),suffix:Ze(Fe,{stopIndex:G,changeStopIndex:X,quoteAsset:k}),value:ee,error:ie,onKeyPress:te,onChange:re,size:"md",boxProps:{sx:{flex:"auto",input:{pr:0}}}}),Ze(Ne.Z,{workingType:s,changeWorkingType:l})):Ze(me,{label:K},Ze(m.Z,{justifyContent:"end"},Ze(E.Z,{color:"t.primary"},`${D} ${W} ${F} ${k}`),Ze(E.Z,{sx:{ml:"sm",cursor:"pointer",color:"t.yellow200","&:hover":{color:"t.yellow300"}},onClick:ae},u("cancel")))),ie?Ze(L.Z,{sx:{mt:"xs",color:"sell",minHeight:"40px"}},ne):Ze(L.Z,{sx:{mt:"xs",width:"100%",fontSize:"12px",lineHeight:"20px",color:"t.third"}},q,Ze(E.Z,{as:"span",color:$}," ",H," ",T)))},_e=n().memo(De);var ze=n().createElement;const{MARK_PRICE:Be}=v.gu,{TAKE_PROFIT_MARKET:Ke,STOP_MARKET:qe}=h.Jm,We={position:"relative",padding:"20px 24px 24px 24px",width:["100%","464px"],height:["100%","auto"],maxHeight:["100%","600px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{fontSize:["16px","20px"],pb:"16px",color:"t.primary"},".info-block":{mt:"8px",".tpsl-max-qty-tip":{color:"t.primary",lineHeight:"20px",fontSize:"14px",".learn-more":{cursor:"pointer"}},".line":{height:"1px",bg:"line"}},".tpsl-tip":{color:"t.secondary",mt:"xs",fontSize:"12px"},".footer":{mt:"24px",display:"flex",position:["absolute","static"],bottom:["24px",null],width:["calc(100% - 48px)","100%"]}},He=({visible:e,position:t,onClose:r})=>{var a;const{sideKey:o=""}=t,s=(0,x.G3)(),{actionTpslConfirmModal:l}=(0,i.useContext)(P.Z),m=(0,x.t2)(o,"symbol"),f=(0,x.t2)(o,"positionSize"),g=(0,x.t2)(o,"positionSide"),b=(0,p.iB)()[m]||{},{quoteAsset:v,filters:S}=b,k=null===(a=S.find(se.vr))||void 0===a?void 0:a.maxQty,{strategyOrders:T}=(0,ce.Mn)({sideKey:o}),[C]=(0,x.kN)(),{0:w,1:I}=(0,i.useState)(T.tp),{0:A,1:O}=(0,i.useState)(T.sl),{0:V,1:L}=(0,i.useState)(""),{0:F,1:D}=(0,i.useState)(Be),{0:_,1:z}=(0,i.useState)(""),{0:B,1:K}=(0,i.useState)(Be);(0,i.useEffect)((()=>{e&&(I(T.tp),O(T.sl),L(""),D(Be),z(""),K(Be))}),[e]);const{getI18n:q,i18n:{language:W}}=(0,R.Z)(),{getI18n:H}=(0,x.yk)(),{setMessageInfo:U}=(0,p.YT)(),{delOpenOrders:j}=(0,d.W)(),$=(0,i.useCallback)((async(e,t)=>{const{success:r,data:a,message:i}=await j(e);r&&null!==a&&void 0!==a&&a.orderId&&("takeProfit"===t&&I(void 0),"stopLoss"===t&&O(void 0)),r&&U({message:i||"success",variant:"success"})}),[j,U]),G=(0,i.useCallback)((async(e,t)=>{const r={symbol:m,side:f>0?"SELL":"BUY",positionSide:g,type:t,timeInForce:"GTE_GTC",quantity:0,stopPrice:e.stopPrice,workingType:e.workingType,closePosition:!0,placeType:"position"},a=Date.now(),{success:i,message:n,data:o}=await(0,u.cG)(r,{language:W});if(i)(0,y.jl)(s,null===o||void 0===o?void 0:o.clientOrderId,a),(0,y.MO)(s,null===o||void 0===o?void 0:o.clientOrderId);else{const e=(0,c.Z)();(0,y.jl)(s,e,a),(0,y.fS)(s,e)}i&&U({message:n||"success",variant:"success"})}),[s,m,W,f,g,U]),J=(0,i.useCallback)((()=>{const e=()=>{const e=oe()(w)&&V&&F,t=oe()(A)&&_&&B,a=[];e&&a.push(G({stopPrice:V,workingType:F},Ke)),t&&a.push(G({stopPrice:_,workingType:B},qe)),Promise.all(a).finally(r)};C[h.Jm.STOP_MARKET]&&(V||_)?l({tpStopPrice:V,tpWorkingType:F,slStopPrice:_,slWorkingType:B,placeOrder:e}):e()}),[r,G,A,_,B,w,V,F,C]);return ze(M.Z,{visible:!!o&&e,sx:We,onMaskClick:()=>r()},ze(E.Z,{variant:"headline6",className:"title"},q("tpSl",{defaultValue:"TP/SL for entire position"})),ze(Z.Z,{sx:{position:"absolute",top:"22px",right:"24px",cursor:"pointer",color:"t.third","&:hover":{color:"t.primary"}},onClick:r}),ze("div",{className:"info-block"},Math.abs(f)>Number(k)?ze("div",{className:"tpsl-max-qty-tip"},H("tpslMaxQty-tip",{defaultValue:"Due to the position size exceeds the maximum limit of market order, the Position Take-profit and Stop-loss will not be executed. Please use Limit order or TP/SL limit order."}),ze(E.Z,{variant:"addressLink",color:"t.yellow",mt:"5px",className:"learn-more",onClick:()=>(0,le.O)()},H("tpslMaxQty-learnMore",{defaultValue:"Learn more trading rules"}))):ze(n().Fragment,null,ze(ge,{sideKey:o}),ze(be,{sideKey:o,quoteAsset:v}),ze(Se,{sideKey:o,quoteAsset:v})),ze(_e,{sideKey:o,order:w,cancelOrder:$,type:"takeProfit",price:V,changePrice:L,workingType:F,changeWorkingType:D}),ze("div",{className:"line"}),ze(_e,{sideKey:o,order:A,cancelOrder:$,type:"stopLoss",price:_,changePrice:z,workingType:B,changeWorkingType:K})),ze("div",{className:"tpsl-tip"},"\xb7 ",q("tpSlTip")),ze("div",{className:"footer"},ze(N.Z,{flex:"auto",onClick:J,height:"40px"},q("confirm",{defaultValue:"Confirm"}))))},Ue=n().memo(He);var je=r("HWFi"),$e=r("fInK"),Ge=r("BcM3"),Je=n().createElement;const Ye={position:"relative",padding:"20px 24px 24px 24px",width:["100%","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third"},".value":{color:"t.primary",textAlign:"right"}},".symbol-value":{flexDirection:"row",".extra":{ml:"4px"}},".hint-block":{color:"t.secondary",mt:"16px",py:"16px",fontSize:"12px",lineHeight:"16px",borderTop:"0.5px solid",borderTopColor:"line",".show-again-hint":{display:"flex",mt:"16px",cursor:"pointer"}},".footer":{display:"flex",".cancel":{flex:1,letterSpacing:"0.16px",mr:"8px",py:"10px"},".confirm":{flex:1,width:"164px",letterSpacing:"0.16px",py:"10px"}}},Qe=({label:e,value:t})=>Je("div",{className:"field"},Je("div",{className:"label"},e),Je("div",{className:"value"},t)),Xe=({sideKey:e,tpStopPrice:t,slStopPrice:r,tpWorkingType:a,slWorkingType:o,placeOrder:s,onClose:l,afterConfirm:c,visible:u})=>{const{0:d,1:m}=(0,i.useState)(!1),{isMobile:f}=(0,p.Fs)(),g=(0,x.IV)(),{getI18n:y}=(0,x.yk)(),b=y("tradeHistory-positions-markPriceTitle"),S=y("lastPrice"),k=a===v.gu.LAST_PRICE?S:b,P=o===v.gu.LAST_PRICE?S:b,T=(0,x.t2)(e,"symbol"),C=(0,x.t2)(e,"positionSize"),w=(0,p.iB)()[T]||{},I=C>0,{quoteAsset:Z}=w,A=`${k} ${I?">=":"<="} ${t} ${Z}`,O=`${P} ${I?"<=":">="} ${r} ${Z}`,{symbolText:R,symbolName:V}=(0,ce.iA)({sideKey:e}),F=(0,i.useCallback)((async()=>{d&&g({[h.Jm.STOP_MARKET]:!1}),s(),c(),l()}),[d,s,g,c]),D=Je(n().Fragment,null,Je(E.Z,{variant:"title6",className:"title"},y("confirm-position-tpsl",{defaultValue:"Confirm Position TP/SL"})),Je(Qe,{label:y("symbol",{defaultValue:"Symbol"}),value:Je(Ge.O,{className:"symbol-value",symbolName:V,fallbackText:R})}),t&&Je(Qe,{label:y("takeProfit",{defaultValue:"Take Profit"}),value:A}),r&&Je(Qe,{label:y("stopLoss",{defaultValue:"Stop Loss"}),value:O}),Je("div",{className:"hint-block"},"\xb7 ",y("tpsl-confirm-hint",{defaultValue:"The order will be rejected if the amount of position exceeds the limit of the Max Market Order Qty."}),Je("label",{className:"show-again-hint"},Je(je.Z,{onChange:()=>{m(!d)}}),y("dontAskAgain",{defaultValue:"Don\u2019t ask me again"}))),Je("div",{className:"footer"},Je(N.Z,{colorStyle:"secondary",onClick:()=>{m(!1),l()},className:"cancel"},y("cancelBtnText",{defaultValue:"Cancel"})),Je(N.Z,{colorStyle:"primary",className:"confirm",onClick:F},y("confirmBtn"))));return f?Je($e.Z,{direction:"bottom",visible:u,outerClick:l,maskBg:"dialog.mask"},Je(L.Z,{sx:Ye},D)):Je(M.Z,{visible:u,sx:Ye,onMaskClick:l},D)};var et=r("kZs2"),tt=r("Uqe+"),rt=r("+dPF"),at=r("unna"),it=n().createElement;const nt=({getFutI18n:e})=>{var t;const[r]=(0,p.z4)(),a=null===(t=(0,x.m8)()[r])||void 0===t?void 0:t.indexPrice,{formatTk:i}=(0,p.mC)();return it(n().Fragment,null,e("markPriceTip",{defaultValue:"Latest mark price for this contract. To prevent price manipulation, the mark price is used for unrealized PNL and margin calculations, and may differ from the last price. \n Mark Price is calculated based on the index price. The Price Index is a bucket of prices from the major Spot market exchanges, weighted by their relative volume. The latest index price is {{indexPrice}}.",indexPrice:i(a)}).replaceAll("\\n","\n"))};var ot=n().createElement;const st=(0,f.ck)("mobile",(()=>Promise.all([r.e(374),r.e(712),r.e(162)]).then(r.bind(r,"qyBC")))),lt=(0,f.ck)("pc",(()=>Promise.all([r.e(374),r.e(712),r.e(773)]).then(r.bind(r,"gDmf")))),ct=(0,g.nM)(),ut=()=>{const e=(0,o.useSelector)((e=>e.loading.effects.position.queryPosition)),{getI18n:t,i18n:r}=(0,R.Z)(),s=(0,o.useDispatch)(),{getI18n:f}=(0,x.yk)(),[S,{onCheckHeader:k,onSortHeader:T}]=(({getFutI18n:e})=>{const{useLastPrice:t}=(0,rt.F7)(),{i18n:{language:r}}=(0,p.ZK)(),n=(0,at.ZF)()===g.UW,o=(0,at.Nm)()===g.UW,s=(0,at.C3)()===g.UW||n||o,l=t?"lastPrice":"markPrice",[c,u]=(0,tt.Z)(g.Zt,["closePosition","tpSl"]),[d,m]=(0,tt.Z)(g.o5,["symbol","size","entryPrice","markPrice","liquidationPrice","marginRatio","margin","pnl","closePosition","tpSl"]),f=(0,g.nM)();return[(0,i.useMemo)((()=>{const t=[{key:"symbol",className:"symbol",title:e("symbol",{defaultValue:"Symbol"}),checkable:!1,sortable:!1},{key:"size",className:"size",title:e("size",{defaultValue:"Size"}),tip:f?e("cSizeDes",{defaultValue:"Trading units using coins in COIN-M Futures such as BTC, open position amounts shown are calculated based on the actual cont quantity. Values change with the\xa0last price of the symbol."}):e("uSizeDes",{defaultValue:"Trading units using stable coins in USD\u24c8-M Futures such as USDT, open position amounts shown are calculated based on the actual coin quantity. Values change with the last price of the symbol."}),checkable:!1,sortable:!0},{key:"notionalSize",className:"notionalSize",title:e("notionalSize",{defaultValue:"Notional Size"}),checkable:!0,sortable:!0},{key:"entryPrice",className:"entryPrice",title:e("entryPrice",{defaultValue:"Entry Price"}),tip:e("entryPriceTip",{defaultValue:"Average executed buy/sell price for your current long/short position."}),checkable:!1,sortable:!0},{key:"markPrice",className:"markPrice",title:e("markPrice",{defaultValue:"Mark Price"}),tip:it(nt,{getFutI18n:e}),checkable:!1,sortable:!0},{key:"liquidationPrice",className:"liquidationPrice",title:e("liquidationPrice",{defaultValue:"Liq.Price"}),tip:e("liquidationPriceTip",{defaultValue:"If the mark price of the contract reaches below this price (when long) or above this price(when short), your position will be liquidated."}),learnMoreLink:(0,et.CN)(g.Wh.LIQ_PRICE,{locale:r}),checkable:!1,sortable:!0},{key:"marginRatio",className:"marginRatio",title:e("marginRatio",{defaultValue:"Margin Ratio"}),tip:e("marginRatioTip",{defaultValue:"The lower the Margin Ratio, the lower your liquidation level will be relative to your position size. Your positions will be liquidated once Margin Ratio reaches 100%."}),checkable:!1,sortable:!0},{key:"margin",className:"margin",title:e("margin",{defaultValue:"Margin"}),tip:e("marginTip",{defaultValue:"The margin allocated to the current position."}),checkable:!1,sortable:!0},{key:"pnl",className:"pnl",title:e("unrealizedPnl",{defaultValue:"PNL(ROE %)"}),tip:e(`unrealizedPnlTip-${l}`),checkable:!1,sortable:!0},{key:"adl",className:"adl",title:e("adl",{defaultValue:"ADL"}),tip:e("adlTip",{defaultValue:"This indicator shows your position in the auto-deleverage queue. If all lights are lit, in the event of a liquidation, your position may be reduced."}),checkable:!0,sortable:!0},{key:"closePosition",className:"closePosition",title:e("closePosition",{defaultValue:"Close All Position"}),tip:e("closePositionTip",{defaultValue:"Closing all positions cancels all open orders under {{futuresType}} and close all positions under {{futuresType}} by market order.",futuresType:f?"COIN-M":"USD\u24c8-M"}),alwaysShowInColumn:!0,unCheckedComponents:{title:e("positions-action",{defaultValue:"Action"}),tip:null},sortingTitle:e("positions-preferenceAction",{defaultValue:"Action (Market/Limit)"}),checkable:!0,sortable:!0},{key:"tpSl",className:"tpSl",title:e("tpSlV2",{defaultValue:"TP/SL for position"}),tip:e("tpSlTip"),checkable:!0,sortable:!0}];if(s)return t.filter((e=>!["notionalSize"].includes(e.key))).map((e=>(0,a.Z)((0,a.Z)({},e),{},{checkable:!1,sortable:!1,defaultChecked:!0})));const i=t.map((e=>(0,a.Z)((0,a.Z)({},e),{},{defaultChecked:!e.checkable||(null===c||void 0===c?void 0:c.includes(e.key))||!1})));return i.sort(((e,t)=>d?d.indexOf(e.key)-d.indexOf(t.key):0)),i}),[r,l,e,s,c,d]),{onCheckHeader:u,onSortHeader:m}]})({getFutI18n:f}),{preOrders:C=[]}=(0,p.E)(),{delOpenOrders:w}=(0,d.W)(),{assetMode:M}=(0,x.F7)(),E=(0,x.Dj)(),{setMessageInfo:N}=(0,p.YT)(),[Z]=(0,p.z4)(),{0:A,1:O}=(0,i.useState)(""),{0:V,1:L}=(0,i.useState)(!1),{0:F,1:D}=(0,i.useState)({}),{0:_,1:z}=(0,i.useState)({tpWorkingType:v.gu.MARK_PRICE,tpStopPrice:"",slWorkingType:v.gu.MARK_PRICE,slStopPrice:"",placeOrder:()=>{}}),{curLeverage:B}=(0,x.rf)(),{language:K="en"}=r,q=(0,x.d0)(ct),W=!e&&0===E.length;(0,i.useEffect)((()=>{if(M&&!ct)return s.assetIndex.getAssetIndex(),(0,g.l6)(!0).getAssetIndexAllStream().subscribe((e=>{s.assetIndex.mergeState(e)}))}),[s.assetIndex,M]);const H=(0,i.useCallback)((()=>{O(""),D({})}),[O,D]),U=(0,i.useCallback)((e=>{O("ADJUST_MARGIN"),D({sideKey:e})}),[O,D]),j=(0,i.useCallback)((e=>{O("TP_SL"),D({sideKey:e})}),[O,D]),$=(0,i.useCallback)(((e,t,r)=>{O("ORDER_CONFIRM"),D({sideKey:e,closeParams:t,onConfirm:r})}),[O,D]),G=(0,i.useCallback)((e=>{L(!0),z(e)}),[O,z]),J=(0,x.h5)(),Y=(0,i.useCallback)((e=>{const{price:t,positionSide:r,type:i,quantity:n,symbol:o}=e,s=i===h.Jm.MARKET;if(!s&&!t)return Promise.resolve();const{valid:d,message:m}=J(n,{reduceOnly:!0,price:t,symbol:o,messageType:"position-toast"});if(!d)return void N({message:m,variant:"error"});const p={leverage:B,timeInForce:v.rb.GTC,reduceOnly:!0};let g=(0,a.Z)((0,a.Z)({},e),p);l()(g,"buyQty","sellQty"),s&&(g.newOrderRespType="RESULT",g=l()(g,"price","timeInForce")),"LONG"!==r&&"SHORT"!==r||(g=l()(g,"reduceOnly"));const b=Date.now();return(0,u.cG)((0,a.Z)((0,a.Z)({},g),{},{placeType:"position"}),{language:K}).then((e=>{const{success:t,message:r,data:a}=e||{};if(t&&!r)(0,y.jl)(ct,null===a||void 0===a?void 0:a.clientOrderId,b),(0,y.MO)(ct,null===a||void 0===a?void 0:a.clientOrderId),N({message:f("order-submitted",{defaultValue:""}),variant:"success"});else{const e=(0,c.Z)();(0,y.jl)(ct,e,b),(0,y.fS)(ct,e)}return Promise.resolve(a)})).catch((e=>{"undefined"!==typeof Sentry&&Sentry.captureException(e)}))}),[B,K,N,f,J]),Q=(0,i.useCallback)((e=>{const t=C.filter((t=>(null===t||void 0===t?void 0:t.orderId)===e));return 1===t.length?w(t[0]):Promise.resolve()}),[w,C]),X=(0,i.useMemo)((()=>({actionAdjustMarginModal:U,actionTpslModal:j,actionOrderConfirmModal:$,actionCancelOrder:Q,actionPlaceOrder:Y,actionTpslConfirmModal:G,changeSymbol:q,isDelivery:ct,headers:S})),[U,j,$,Q,Y,G,q,S]);return ot(P.Z.Provider,{value:X},ot(m.Z,{sx:{flexDirection:"column",height:"100%",pb:[0,0,"xs"]}},ot(b.Z,null,(({isMobile:t,isIPad:r})=>ot(n().Fragment,null,r?ot(st,{isMobile:t,isEmpty:W,loading:e,data:E}):ot(lt,{headers:S,onCheckHeader:k,onSortHeader:T,data:E,loading:e}),"ADJUST_MARGIN"===A&&ot(ie,{visible:!0,position:F,onClose:H}),"ORDER_CONFIRM"===A&&ot(I,{visible:!0,position:F,onClose:H}),"TP_SL"===A&&ot(Ue,{visible:!0,position:F,onClose:H}),ot(Xe,Object.assign({visible:V,sideKey:null===F||void 0===F?void 0:F.sideKey},_,{onClose:()=>L(!1),afterConfirm:H})))))))},dt=n().memo(ut)},uefD:(e,t,r)=>{"use strict";r.d(t,{G4:()=>i,w_:()=>o,y_:()=>s,Do:()=>l});var a=r("5vwO");const i={symbol:130,size:90,notionalSize:90,entryPrice:80,markPrice:80,liquidationPrice:80,marginRatio:60,margin:120,pnl:120,adl:35,closePosition:235,tpSl:90},n=e=>({width:`${e}px`,flex:`1 0 ${e}px`}),o={flexDirection:"column",height:"100%",flex:"1 0",overflowX:"auto",overflowY:"hidden",".action-bar":{display:"flex",alignItems:"center",justifyContent:"flex-end",position:"absolute",top:0,right:"42px",zIndex:"999",height:"40px"},".positionRow":{my:0,py:0,display:"flex",alignItems:"center",flex:"none",color:"t.secondary",fontSize:[0],cursor:"auto",width:"100%",height:"40px",boxSizing:"border-box",borderBottom:"1px solid",borderBottomColor:"newLine","&.header":{height:"32px"},"&.body":{".symbol":{display:"flex",alignItems:"center",cursor:"pointer",".bar":{width:4,height:"39px",mr:"4px","&-buy ":{bg:"buy"},"&-sell ":{bg:"sell"}},".leverage":{color:"t.yellow",bg:"tagBg",fontSize:"12px",ml:"4px",borderRadius:"2px",px:"minor"}},".size":{"&-buy ":{color:"t.buy"},"&-sell ":{color:"t.sell"}},".liquidationPrice":{color:"t.emphasize",".liqRefresh":{cursor:"pointer"}},".marginRatio":{"&-negative ":{color:"negative"}},".margin":{display:"flex",alignItems:"center","&-text":{whiteSpace:"nowrap",mr:"4px"}},".pnl":{"&-buy ":{color:"t.buy"},"&-sell ":{color:"t.sell"}},".tpSl":{display:"flex",alignItems:"center","&-text":{mr:"4px"}}},".symbol":(0,a.Z)({},n(i.symbol)),".size":(0,a.Z)({},n(i.size)),".notionalSize":(0,a.Z)({},n(i.notionalSize)),".entryPrice":(0,a.Z)({},n(i.entryPrice)),".markPrice":(0,a.Z)({},n(i.markPrice)),".liquidationPrice":(0,a.Z)({},n(i.liquidationPrice)),".marginRatio":(0,a.Z)({},n(i.marginRatio)),".margin":(0,a.Z)({},n(i.margin)),".pnl":(0,a.Z)({},n(i.pnl)),".adl":(0,a.Z)({},n(i.adl)),".closePosition":(0,a.Z)({},n(i.closePosition)),".tpSl":(0,a.Z)({},n(i.tpSl))}},s={minWidth:"228px",bg:"popupBg",borderRadius:"4px",px:"16px",py:"4px",maxHeight:"138px",overflow:"auto",boxShadow:"0px 0px 10px rgba(0,0,0,0.3)",".order":{color:"t.primary",fontSize:"12px",lineHeight:"16px",height:"32px",borderBottom:"solid 1px",borderColor:"line",justifyContent:"space-between",alignItems:"center","&:last-of-type":{border:"none"},".order-icon":{cursor:"pointer",color:"t.third","&:hover path":{fill:"t.primary"}}},".cancel":{color:"t.yellow200",cursor:"pointer",":hover":{color:"t.yellow300"}}},l={height:"24px",mt:0,input:{p:"4px",fontSize:"12px"}}},"h+3y":(e,t,r)=>{"use strict";r.d(t,{v:()=>m});var a=r("/SIk"),i=r.n(a),n=r("pVAJ"),o=r("Gbz3"),s=r("TeQN"),l=r("e5RN"),c=r("X46w"),u=i().createElement;const d={margin:"28px auto 0",flexDirection:"column",alignItems:"center",".tip":{fontSize:"14px",lineHeight:"20px",color:"t.primary"}},m=({apiError:e=!1,confirmTip:t="",onRefresh:r=(()=>{}),onConfirm:a=(()=>{}),children:i})=>{const m=(0,n.zk)("abnormal"),{getI18n:p}=(0,o.yk)();return m||!e?i:u(l.Z,{sx:d},u(s.Z,{size:48}),u("div",{className:"tip"},p("apiErrorRefreshTip",{defaultValue:"Data lost due to service malfunction, please refresh the page."}),u(c.Z,{variant:"quiet",onClick:r},p("refresh",{defaultValue:"Refresh"}))),u("div",{className:"tip"},t,u(c.Z,{variant:"quiet",onClick:a},p("confirmBtn",{defaultValue:"Confirm"}))))}},gDJg:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});var a=r("/SIk"),i=r.n(a),n=r("TeQN"),o=i().createElement;const s=i().memo((()=>o("div",{style:{width:0,height:0,overflow:"hidden"}},o(n.Z,null))))},"B+lg":(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var a=r("AVT8"),i=r("OV9X"),n=r("HWFi"),o=r("e5RN"),s=r("X46w"),l=r("/SIk"),c=r.n(l),u=r("tsUn"),d=r("4xt1"),m=r("pVAJ"),p=r("jQmP"),f=r("4m5F"),g=r("Gbz3"),y=r("AHTf"),h=r("FOuV"),b=c().createElement;const v={position:"relative",padding:"20px 24px 24px 24px",width:["calc(100vw - 32px)","384px"],bg:"modalBg",boxShadow:"elevation3",borderRadius:"8px",".title":{marginBottom:"28px",color:"t.primary"},".field":{fontFamily:"Binance PLEX",display:"flex",justifyContent:"space-between",mt:"12px",letterSpacing:"0.16px",fontSize:"14px",lineHeight:"20px",fontWeight:"normal",minHeight:"20px",".label":{color:"t.third","&.highlight":{color:"t.primary",fontWeight:"medium"}},".value":{color:"t.primary",textAlign:"right","&.buy":{color:"t.buy"},"&.sell":{color:"t.sell"},"&.highlight":{fontWeight:"medium"}}},".top-line":{pt:"4px",mt:"16px",borderTop:"0.5px solid",borderTopColor:"line"},".show-again":{display:"flex",mt:"22px",cursor:"pointer",color:"t.secondary",fontSize:"12px",lineHeight:"16px"}},x=({labelExtra:e="",label:t="",value:r="",unit:a="",labelClassName:i="",valueClassName:n="",className:o=""})=>b("div",{className:`field ${o}`},b("div",{className:`label ${i}`},t,e),b("div",{className:`value ${n}`},r," ",a||"")),S=(0,y.nM)(),k=({symbol:e,title:t,color:r,amendedField:c,isMarket:y,limitPrice:k,qty:P,isClose:T,epnl:C,onClose:w,onConfirm:I=(()=>{}),closeTip:M})=>{const{getI18n:E}=(0,g.yk)(),N=(0,m.iB)()[e]||{},{shortName:Z}=(0,u.H)(N,E),{baseAsset:A,quoteAsset:O,marginAsset:R,quantityPrecision:V,pricePrecision:L,equalQtyPrecision:F=2,tickSize:D}=N,_=(0,p.p)(Number(D)),{unit:z}=(0,g.F7)(),B=z===f.SW.coin,K=z===f.AO.usdt;let q,W=V;S?B?(q=A,W=F):q=E("Cont"):K?(q=R,W=_):q=A;const{0:H,1:U}=(0,l.useState)(!1),j=(0,l.useCallback)((async()=>{H&&M(),I(),w()}),[H,M,I,w]),$=`(${E("amended",{defaultValue:"Amended"})})`;return b(a.Z,{visible:!0,onMaskClick:()=>w(),sx:v},b(i.Z,{variant:"title6",className:"title"},E("order-confirmation",{defaultValue:"Order Confirmation"})),b(x,{labelClassName:"highlight",label:Z,value:t,valueClassName:r}),b(x,y?{label:E("priceTitle",{defaultValue:"Price"}),value:E("market",{defaultValue:"Market"})}:{label:E("priceTitle",{defaultValue:"Price"}),labelExtra:c===h.y3.PRICE||c===h.y3.BOTH?$:"",value:(0,d.uf)(k,_),unit:O}),b(x,{label:E("orderQtyTitle",{defaultValue:"Order Qty"}),labelExtra:c===h.y3.QUANTITY||c===h.y3.BOTH?$:"",value:(0,d.uf)(P,W),unit:q}),T&&b(x,{label:E("estimatedPNL",{defaultValue:"Estimated PNL"}),className:"top-line",value:(0,d.uf)(C,L),unit:R}),y&&b(i.Z,{variant:"caption",mt:3,color:"t.sell"},E("orderFailHint",{defaultValue:"Your order will fail should the market price deviate from the marked price by more than 2%"})),b("label",{className:"show-again"},b(n.Z,{defaultChecked:H,onChange:()=>{U(!H)}}),E("dontAskAgain",{defaultValue:"Don\u2019t ask me again"})),b(o.Z,{mt:"19px",width:"100%"},b(s.Z,{colorStyle:"secondary",onClick:()=>w(),sx:{width:"164px",letterSpacing:"0.16px",mr:"8px",py:"10px"}},E("cancelBtnText",{defaultValue:"Cancel"})),b(s.Z,{colorStyle:r,onClick:j,sx:{width:"164px",letterSpacing:"0.16px",py:"10px"}},t)))},P=c().memo(k)},BcM3:(e,t,r)=>{"use strict";r.d(t,{O:()=>c});var a=r("GpFh"),i=r("/SIk"),n=r.n(i),o=r("XhNN"),s=n().createElement;const l={display:"flex",flexDirection:"column",".pair":{fontWeight:"semibold"},".extra":{fontWeight:"normal"}},c=e=>{let{symbolName:t,fallbackText:r=""}=e,i=(0,a.Z)(e,["symbolName","fallbackText"]);return t?s(o.Z,Object.assign({__css:l},i),s("div",{className:"pair"},t.symbol),s("div",{className:"extra"},`${t.contractTypeI18n} ${t.deliveryDateFormat}`)):s(o.Z,Object.assign({__css:l},i),r)}},C28W:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r("3N7n"),i=r("/SIk"),n=r.n(i),o=r("EPGa"),s=r("rdEq"),l=r("Gbz3"),c=n().createElement;const u=({type:e,workingType:t,activatePrice:r,priceRate:i})=>{const{getI18n:n,i18n:{language:u}}=(0,l.yk)();if(e!==o.Jm.TRAILING_STOP_MARKET)return null;const d=n("trailing-stop-market-tip",{defaultValue:"Activation Price: {{activatePrice}}, Trigger Type: {{workingType}}, Callback Rate: {{priceRate}}%. ",activatePrice:Number(r)?Number(r):n("advancedStrategy-marketPrice"),workingType:t===o.HZ.LAST_PRICE?n("lastPrice"):n("tradeHistory-positions-markPriceTitle"),priceRate:i});return c(s.m,{hideUnderLine:!0,sx:{flex:"none"},learnMoreLink:`/${u}/support/faq/360042299292`,tip:d},c(a.Z,{size:16}))},d=n().memo(u)},KRmi:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r("/SIk"),i=r.n(a),n=r("jYz7"),o=r("rI7q"),s=r("4xt1"),l=r("pVAJ"),c=r("LGmd"),u=r("6u/I"),d=i().createElement;const m=({price:e,depth:t})=>({xData:t,yData:+e}),p=({symbol:e})=>{const t=(0,l.Xw)(),r=(0,l.Vh)()[e],{tickSize:i,isDelivery:p}=r||{},{scale:f,setScale:g}=(0,l.pq)(),{asks:y,bids:h}=(0,l.Xl)(e,p,m),b=(0,a.useMemo)((()=>o.k.getDepthChartStyles(t,{width:2,height:18})),[t]),v=(0,u.p8)(i),x=(0,a.useMemo)((()=>"BTCUSDT"===e?0:v-1),[e,v]);(0,a.useEffect)((()=>{const{scale:e=0}=c.Z.getItem(u.Ze)||{};g(Number(e))}),[g]);const S=(0,a.useCallback)((e=>(0,s.uf)(e,v)),[v]),k=(0,a.useCallback)((e=>(0,u.oB)(e,x)),[x]),P=(0,a.useCallback)((e=>(0,u.pF)(e)||""),[]);return d(n.Z,null,(({width:t,height:r})=>d(o.k.VerticalDepthChart,{symbol:e,d1Group:y,d2Group:h,canvas:{width:t,height:r},scale:f,setScale:g,styles:b,yTicksFormatter:S,d1XValueFormatter:k,d2XValueFormatter:k,d1YValueFormatter:P,d2YValueFormatter:P})))}},"3p6E":(e,t,r)=>{"use strict";r.d(t,{Xw:()=>l,Vr:()=>y,r5:()=>b,TG:()=>c,aD:()=>S,zE:()=>p});r("LCMj");var a=r("pVAJ");r("l4n0");var i=r("Vg22"),n=r("wRKo"),o=r("AHTf");function s(){return(0,i.useSelector)((e=>e.setting.color))===o.Pe?[n.Wb,n.$_]:[n.ZF,n.JR]}function l(){const{isLight:e}=(0,a.Fg)(),[t,r]=s();return e?t:r}function c(){const[{kline:e},{kline:t}]=s();return[e,t]}var u=r("/SIk");var d=r("Bcqe"),m=r.n(d);const p=(e,...t)=>{const r=(0,u.useRef)(((...e)=>{}));return r.current=e,(0,u.useCallback)(m()((function(...e){return r.current.apply(this,e)}),...t),[])};r("RNvQ");var f=r("MvZp"),g=r("LcTY");const y=()=>{const{enqueueNotification:e}=(0,f.Z)();(0,u.useEffect)((()=>g.T.on(g.F.NOTIFICATION,(t=>e(t)))))};var h=r("VwoH");function b(){const e=(0,a.tZ)();(0,u.useEffect)((()=>{(0,h.Wg)(e)}),[e])}r("6xN1");var v=r("M8Qk");const x="reConnected";function S(){(0,u.useEffect)((()=>((0,o.nM)()?(0,o.RU)():(0,o.BN)()).getSocketEventsStream().subscribe((({event:e,data:t})=>{e===x&&(0,v.gp)({t:"WS_attemptReconnect",attempts:t})}))),[])}r("dUK7")},LCMj:(e,t,r)=>{"use strict";r.d(t,{k:()=>m});var a=r("5vwO"),i=r("GpFh"),n=r("/SIk"),o=r("Qa1J"),s=r("jJ88"),l=r("4xt1"),c=r("pVAJ"),u=r("jQmP"),d=r("AHTf");const m=(e=(0,d.l6)(!1),t,r,m)=>{const[p,f]=(0,c.z4)(),g=t||p,y=r||f,{loading:h,product:b}=(0,c.mC)(m),{tickers:v}=(0,o.s)(e),{low:x,close:S,high:k,open:P,quoteVolume:T,tickSize:C,volume:w}=b,I=(0,n.useMemo)((()=>(0,u.p)(C)),[C]),M=v[g]||{},{lowPrice:E=x,lastPrice:N=S,highPrice:Z=k,openPrice:A=P,tickerVolume:O=w}=M,R=(0,i.Z)(M,["lowPrice","lastPrice","highPrice","openPrice","tickerVolume"]),{trades:V}=(0,s.y)({symbol:g,stream:e,limit:1}),{price:L=N}=V[0]||{},F=+L-+A,D=[F>0?"+":"",(A?F/A*100:0).toFixed(2)].join("");return{loading:h,tickProps:(0,a.Z)((0,a.Z)({lowPrice:E,lastPrice:L,showPrice:(0,l.uf)(L,I),tk:I,highPrice:Z,openPrice:A,quoteVolume:T,volume:O||w},R),{},{diffPrice:F,difference:D,tickSize:C,symbols:y,bigThan:(_=L,z=A,+_>=+z)})};var _,z}},"6xN1":(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var a=r("/SIk");const i=()=>{const e=!0;function t(){return{width:window.innerWidth,height:window.innerHeight}}const{0:r,1:i}=(0,a.useState)(t);return(0,a.useEffect)((()=>{function e(){i(t())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[t,e]),r}},v5rq:(e,t,r)=>{"use strict";r.d(t,{H9:()=>P,Nu:()=>b,$q:()=>k,mj:()=>S,BD:()=>x,WH:()=>C,Qy:()=>h,lR:()=>w,gq:()=>m,zz:()=>g,v5:()=>v,PH:()=>p,Lb:()=>f,kH:()=>y,m2:()=>T,TB:()=>M,OL:()=>I,xG:()=>E});var a=r("LHeJ"),i=r("rI7q"),n=r("2swO"),o=r("6u/I"),s=r("kZs2");var l=r("5vwO");new Set;const c={setItem(e,t,r){const a="object"===typeof t?JSON.stringify(t):t;if("function"!==typeof r)return new Promise(((t,r)=>{try{window.localStorage.setItem(e,a),t()}catch(i){Sentry.captureException(i),r(i)}}));try{window.localStorage.setItem(e,a),r(null)}catch(i){Sentry.captureException(i),r(i)}},getItem(e,t){if("function"!==typeof t)return new Promise((t=>{t((0,s.As)(window.localStorage.getItem(e)))}));t(null,(0,s.As)(window.localStorage.getItem(e)))},removeItem(e,t){if("function"!==typeof t)return new Promise((t=>{window.localStorage.removeItem(e),t()}));window.localStorage.removeItem(e),t(null)},clear(e){if("function"!==typeof e)return new Promise((e=>{window.localStorage.clear(),e()}));window.localStorage.clear(),e(null)},create(){return Object.create(this)}};function u(e){const t=new Map;return function(r,...a){if(t.has(r))return t.get(r);const i=e(r,...a);return t.set(r,i),i}}function d({stateKey:e,storageKey:t=e,defaultValue:r,validator:i,storage:n}){const o="undefined"!==typeof(u=n)?u:c.create();var u;return(0,a.Z)((d=(t,a)=>({[e]:r,[`set${(0,s.kC)(e)}`]:r=>t({[e]:r}),[`toggle${(0,s.kC)(e)}`]:()=>t({[e]:!a()[e]})}),(a,n,c)=>{const u=d((r=>{a(r);const i=n()[e];o.setItem(t,i)}),n,c);let m={};return o.getItem(t,((t,a)=>{let n;n="function"===typeof i?i(a)?a:r:null!==a&&void 0!==a?a:r,m={[e]:n}})),(0,l.Z)((0,l.Z)((0,l.Z)({},u),m),{},{[`clear${(0,s.kC)(e)}`](){o.removeItem(t),a(u)}})}));var d}const m=u((function(){return(({stateKey:e,defaultValue:t})=>(0,a.Z)((r=>({[e]:t,[`set${(0,s.kC)(e)}`]:t=>r({[e]:t})}))))({stateKey:"klineHistory",defaultValue:[]})})),p=u((function(e){return d({stateKey:"miniMultiChartType",storageKey:`${e}-chart-miniMultiChartType`,defaultValue:i.k.Dropdowns.MultiChartDropdownType.Single})})),f=u((function(e){return d({stateKey:"miniMultiChartWindows",storageKey:`${e}-chart-miniMultiChartWindows`,defaultValue:o.V2})})),g=u((function(e){return d({stateKey:"lastSelectedMiniMultiChartWindow",storageKey:`${e}-chart-lastSelectedMiniMultiChartWindow`,defaultValue:0})})),y=u((function(e){return d({stateKey:"priceType",storageKey:`${e}-chart-priceType`,defaultValue:"last"})})),h=u((function(e){return d({stateKey:"interval",storageKey:`${e}-chart-interval`,defaultValue:"1d"})})),b=(u((function(){return(0,a.Z)((e=>({symbol:"",setSymbol:t=>e({symbol:t})})))})),u((function(e){return d({stateKey:"chartType",storageKey:`${e}-chart-type`,defaultValue:n.oX.CandleBar})}))),v=(u((function(e){return d({stateKey:"indicators",storageKey:`${e}-kline-indicators`,defaultValue:o.hc,validator:Array.isArray})})),u((function(){return(0,a.Z)((e=>({loading:!1,setLoading:t=>e({loading:t})})))}))),x=u((function(){return(0,a.Z)((e=>({ifShowIndicatorsMenu:-1,toggleTVIndicatorsMenu:()=>e((e=>({ifShowIndicatorsMenu:-1*e.ifShowIndicatorsMenu})))})))})),S=u((function(){return(0,a.Z)((e=>({ifShowIndicatorsMenu:-1,toggleOriginalIndicatorsMenu:()=>e((e=>({ifShowIndicatorsMenu:-1*e.ifShowIndicatorsMenu})))})))})),k=u((function(e){return d({stateKey:"ifShowOrderShape",storageKey:`${e}-tv-show-order-shape`,defaultValue:!0})})),P=u((function(e){return d({stateKey:"activeTab",storageKey:`${e}-chart-active-tab`,defaultValue:o.vm.basic})})),T=(u((function(){return(0,a.Z)((e=>({reloadTVKey:1,reloadTV:()=>e((e=>({reloadTVKey:-1*e.reloadTVKey})))})))})),u((function(e){return d({stateKey:"selectedIntervals",storageKey:`${e}-selected-intervals`,defaultValue:o.fg})}))),C=u((function(e){return d({stateKey:"isOpen",storageKey:`${e}-interval-config-open`,defaultValue:!1})})),w=u((function(){return(0,a.Z)((e=>({isEditing:!1,setIsEditing:t=>e({isEditing:t})})))})),I=u((function(e){return d({stateKey:"tvChartStyle",storageKey:`${e}-chart-tvChartStyle`,defaultValue:1})})),M=(u((function(e){return d({stateKey:"show",storageKey:`${e}-show-mini-multi-chart-promotion`,defaultValue:!0})})),u((function(){return(0,a.Z)((e=>({reference:void 0,setReference:t=>e({reference:t})})))}))),E=(0,a.Z)((e=>({disableMouse:!1,setDisableMouse:t=>e({disableMouse:t})})));(0,a.Z)((e=>({ready:!1,setReady:()=>e({ready:!0})})))},WBfh:(e,t,r)=>{"use strict";r.d(t,{St:()=>a,eE:()=>i,At:()=>n,QQ:()=>o,J8:()=>s,NB:()=>l,X1:()=>c,Ud:()=>u,J$:()=>d,gW:()=>m,_9:()=>p,DB:()=>f,AI:()=>g,F5:()=>y,VW:()=>h,O3:()=>b,B3:()=>v,pT:()=>x,Hs:()=>S,aK:()=>k,bd:()=>P,q8:()=>T,mJ:()=>C});const a=e=>[e.interval,e.setInterval],i=e=>[e.activeTab,e.setActiveTab],n=e=>[e.chartType,e.setChartType],o=e=>[e.ifShowOrderShape,e.toggleIfShowOrderShape,e.setIfShowOrderShape],s=e=>[e.selectedIntervals,e.setSelectedIntervals],l=e=>[e.tvChartStyle,e.setTvChartStyle],c=e=>[e.isOpen,e.setIsOpen],u=e=>[e.isEditing,e.setIsEditing],d=e=>[e.priceType,e.setPriceType],m=e=>[e.klineHistory,e.setKlineHistory],p=e=>[e.miniMultiChartType,e.setMiniMultiChartType],f=e=>[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow],g=e=>[e.miniMultiChartWindows,e.setMiniMultiChartWindows],y=e=>[e.reference,e.setReference],h=e=>e.interval,b=e=>e.chartType,v=e=>e.setLoading,x=e=>e.loading,S=e=>e.activeTab,k=e=>e.ifShowIndicatorsMenu,P=e=>e.ifShowOrderShape,T=e=>e.toggleTVIndicatorsMenu,C=e=>e.toggleOriginalIndicatorsMenu}}]);