(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[875],{FpKl:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var o=r("/SIk"),s=r.n(o),c=r("c2re"),a=r.n(c),i=r("Vg22"),l=r("9rpF"),n=r("NJWl"),p=r("e5RN"),u=r("OV9X"),y=r("j0Pw"),m=r("32BG"),d=r("krVE"),S=r("jQmP"),g=r("pVAJ"),b=r("wRKo"),h=r("Gbz3"),f=r("6Afj"),v=r("2rU8"),P=r("OjEc"),T=r("eXOl"),x=r("V/Fe"),N=r("AHTf"),O=r("FOuV");const L=()=>{const e=(0,i.useDispatch)(),t=(0,T.AM)(),{chartSymbol:r,currentProductList:s}=(0,x.Kb)();return(0,o.useCallback)((({stateSymbol:o,isDeliveryColumn:c,name:i})=>{const l=((e,t,r=!1)=>{let o="";if(r){const{pair:r,contractType:s}=t[e]||{};o=[r,N.Yp[s]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}else{const{pair:r,contractType:s,symbolDisplay:c}=t[e]||{};o=s===N.Yp.PERPETUAL?c.split("/").join("_"):[r,N.Yp[s]].map((e=>null===e||void 0===e?void 0:e.toLowerCase())).join("_")}return o})(o,t,c),[n,p]=i.split("-"),u=JSON.parse(JSON.stringify(r)),y=a()(s),m=JSON.parse(localStorage.getItem(O.PV)),d=JSON.parse(localStorage.getItem("symbolType")),S=o;u[n][p]=S,m[n][p]=l,y[n][p]=t[S]||t[S.split("_").join("")],d[n][p]=c?O.yX.delivery:O.yX.futures;const g=`${S}_${d[n][p]}`;y[n][p].contractType!==N.Yp.PERPETUAL&&e.chartType.updateState({currentSymbolType:g}),localStorage.setItem("symbolType",JSON.stringify(d)),localStorage.setItem(O.PV,JSON.stringify(m)),e.chartType.updateFuturesSymbols({symbolList:u}),e.chartType.updateCurrentProductList(y)}),[r,s,e.chartType,t])};var J=s().createElement;const I=(0,f.SA)((()=>Promise.all([r.e(374),r.e(712),r.e(726)]).then(r.bind(r,"4PCx"))));function w({curSymbol:e,currentProduct:t={},name:r="",type:c}){const[l]=(0,x.c4)(e),n=(0,i.useDispatch)(),{contractType:y}=t,{chartSymbol:b,currentProductList:f,isQueryProduct:T}=(0,x.Kb)(),[N,L]=r.split("-"),I=a()(f),w=JSON.parse(JSON.stringify(b)),C=JSON.parse(localStorage.getItem(O.PV)),E=JSON.parse(localStorage.getItem("symbolType")),F=(0,g.Kn)()[l]||{},V=t&&t.tickSize,k=(0,x.N1)()[l],{getI18n:D}=(0,h.yk)(),{loading:j,value:W}=(0,x.sF)(t.deliveryDate,l,y,c),Z=!j&&W<1,_=(0,S.p)(V),A=Number((null===k||void 0===k?void 0:k.estimatedSettlePrice)||0).toFixed(_),{genSymbolDisplay:z}=(0,h.nN)(),K=(0,i.useSelector)((e=>e.products.products)),R=(0,i.useSelector)((e=>e.products.productMap)),{symbol:U,contractTypeI18n:X,deliveryDateFormat:$}=z(t),{eventType:Y,contractStatus:G,symbol:M}=(0,h.gN)(),H=(0,o.useCallback)((({products:e,chartType:t,num:r,currentProductList:o,dispatch:s,forceOverridingLocalStorage:c=!0})=>{const{curSymbol:a,currentProduct:i}=(0,d.Ib)(e,O.L6,"delivery");o[t][r]=i,w[t][r]=a,C[t][r]=O.L6,E[t][r]="delivery",s.chartType.updateFuturesSymbols({symbolList:w}),c&&(localStorage.setItem("symbolType",JSON.stringify(E)),localStorage.setItem(O.PV,JSON.stringify(C))),s.chartType.updateCurrentProductList(o)}),[w,E,C]);return(0,o.useEffect)((()=>{T&&(null===K||void 0===K?void 0:K.length)>0&&0===Object.keys(t).length&&H({products:K,chartType:N,num:L,currentProductList:I,dispatch:n})}),[N,t,K]),(0,o.useEffect)((()=>{const e=R[l]||{};"contractInfo"===Y&&M===e.symbol&&"CLOSE"===(null===G||void 0===G?void 0:G.toUpperCase())&&H({products:K,chartType:N,num:L,currentProductList:I,dispatch:n})}),[G,f,R,K,N,b,M,Y]),(0,o.useMemo)((()=>J(s().Fragment,null,J(p.Z,{sx:{alignItems:"center",mr:0,mb:[1,0]}},J(p.Z,{flexDirection:"column",sx:{color:"t.primary",fontSize:2,fontWeight:"medium"}},U,"\xa0",J(v.XI,{sx:{fontSize:"sm"}},`${X}${$}`),J(P.ZP,{config:F,sx:{pt:"4px","& svg":{fontSize:"20px"}}})),J(m.Z,{color:"iconColor"})),Z&&J(u.Z,{sx:{color:"t.yellow200",fontSize:"12px",fontWeight:"medium",width:"100px",whiteSpace:"nowrap"}},D("EstimatedDeliveryPrice",{defaultValue:"Est delivery price"}),"(USD):",A))),[A,Z,t,e])}const C=({symbol:e,currentProduct:t,name:r,type:s})=>{const{isLight:c}=(0,g.Fg)(),a=c?b.Wb:b.$_,i=(0,o.useRef)(),p=L();return J(l.ZP,{ref:i,sx:{"&:hover":{cursor:"pointer"},whiteSpace:"nowrap",minWidth:"auto",mb:["4px"]},trigger:"hover",enablePortal:!0,overlay:J(n.Z,{className:"dropdown-box",sx:{bg:"marketCard",left:["-16px",0],px:0,pt:0,pb:"xs",minWidth:"425px",maxWidth:"100vw",height:318,maxHeight:"100vh"}},J(y.Z,{theme:a},J(I,{name:r,isGridWidget:!1,changeSymbolCb:p})))},J(w,{name:r,curSymbol:e,currentProduct:t,type:s}))}}}]);