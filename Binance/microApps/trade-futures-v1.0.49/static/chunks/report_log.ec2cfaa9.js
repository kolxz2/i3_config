(self["webpackJsonp_trade-futures"]=self["webpackJsonp_trade-futures"]||[]).push([[981],{lakv:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var r=n("U+/X"),o=n("OvMp"),a=n("AGQ9"),s=function(){};var i=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{u(r.next(e))}catch(t){a(t)}}function i(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(i){a=[6,i],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};const c=function(e,t,n,r,o){return i(void 0,void 0,void 0,(function(){return u(this,(function(a){return[2,new Promise((function(a,i){!function(e){var t="XDomainRequest"in window,n=t?new window.XDomainRequest:new XMLHttpRequest;if(n.open(e.type||"GET",e.url,!0),n.success=e.success||s,n.fail=e.fail||s,n.withCredentials=e.withCredentials,t?(n.onload=e.success||s,n.onerror=e.fail||s,n.onprogress=s):n.onreadystatechange=function(){if(4===n.readyState){var t=n.status;t>=200?e.success&&e.success(n.responseText):e.fail&&e.fail("Request failed, status: "+t+", responseText: "+n.responseText)}},"POST"===e.type){if(e.headers&&!t)for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);n.send(e.data)}else n.send()}({url:e,type:r||"GET",data:t,withCredentials:!!n,headers:o,success:function(e){a(e)},fail:function(e){i(new Error(e||"Request failed"))}})}))]}))}))};var l,f=n("3l+q"),p=n("Rumh"),d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{u(r.next(e))}catch(t){a(t)}}function i(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}u((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(i){a=[6,i],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function y(e){return h(this,void 0,void 0,(function(){var t=this;return v(this,(function(n){switch(n.label){case 0:if(o.Z.idbIsSupported())return[3,1];throw new Error(r.$.DB_NOT_SUPPORT);case 1:return l||(l=new o.Z(a.Z.get("dbName"))),[4,(0,p.j)((function(){return h(t,void 0,void 0,(function(){var t,n,s,i,u,p,y,w,g,b;return v(this,(function(m){switch(m.label){case 0:return[4,l.getLogDaysInfo(e.fromDayString,e.toDayString)];case 1:t=m.sent(),n=t.reduce((function(e,t){var n;return d(((n={})[t[o.X]]=t.reportPagesInfo?t.reportPagesInfo.pageSizes.map((function(e,n){return l.logReportNameFormatter(t[o.X],n)})):[],n),e)}),{}),s={},i=(0,f.nO)(e.fromDayString),u=(0,f.nO)(e.toDayString),p=+i,m.label=2;case 2:if(!(p<=+u))return[3,14];if(y=(0,f.Pf)(new Date(p)),!(n[y]&&n[y].length>0))return[3,12];m.label=3;case 3:return m.trys.push([3,10,,11]),[4,Promise.all(n[y].map((function(t){return function(e,t){var n;return h(this,void 0,void 0,(function(){var o,s,i,u,f;return v(this,(function(p){switch(p.label){case 0:return[4,l.getLogsByReportName(e)];case 1:return(o=p.sent()).length>0?(s=l.logReportNameParser(e).pageIndex,i=o.map((function(e){return encodeURIComponent(e.logString)})),u=l.logReportNameParser(e),f="function"===typeof t.xhrOptsFormatter?t.xhrOptsFormatter(i,u.pageIndex+1,u.logDay):{},[4,c(f.reportUrl||t.reportUrl||a.Z.get("reportUrl"),f.data||JSON.stringify({client:"Web",webSource:""+(t.webSource||""),deviceId:t.deviceId,environment:""+(t.environment||""),customInfo:""+(t.customInfo||""),logPageNo:u.pageIndex+1,fileDate:u.logDay,logArray:o.map((function(e){return encodeURIComponent(e.logString)})).toString()}),(n=f.withCredentials,null!==n&&void 0!==n&&n),"POST",f.headers||{"Content-Type":"application/json",Accept:"application/json,text/javascript"}).then((function(e){var t,n;if("function"===typeof f.responseDealer){var o=f.responseDealer(e);if(o.resultMsg===r.$.REPORT_LOG_SUCC)return s;throw new Error(o.desc)}var a=void 0;try{a=JSON.parse(e)}catch(i){throw new Error("Try to parse response failed, responseText: "+e)}if(200===(null===(t=a)||void 0===t?void 0:t.code))return s;throw new Error("Server error, code: "+(null===(n=a)||void 0===n?void 0:n.code))}))]):[3,3];case 2:return[2,p.sent()];case 3:return[2,Promise.resolve(null)]}}))}))}(t,e)})))];case 4:w=m.sent(),s[y]={msg:r.$.REPORT_LOG_SUCC},m.label=5;case 5:return m.trys.push([5,8,,9]),(g=w.filter((function(e){return null!==e}))).length>0&&e.incrementalReport?[4,l.incrementalDelete(y,g)]:[3,7];case 6:m.sent(),m.label=7;case 7:return[3,9];case 8:return m.sent(),[3,9];case 9:return[3,11];case 10:return b=m.sent(),s[y]={msg:r.$.REPORT_LOG_FAIL,desc:b.message||b.stack||JSON.stringify(b)},[3,11];case 11:return[3,13];case 12:s[y]={msg:r.$.NO_LOG},m.label=13;case 13:return p+=f.Q2,[3,2];case 14:return[2,s]}}))}))}))];case 2:return[2,n.sent()]}}))}))}}}]);