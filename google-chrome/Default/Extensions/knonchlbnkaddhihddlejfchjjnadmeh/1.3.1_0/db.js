var _Mathmin=Math.min;(function(t){function r(u){if(d[u])return d[u].exports;var h=d[u]={i:u,l:!1,exports:{}};return t[u].call(h.exports,h,h.exports,r),h.l=!0,h.exports}var d={};return r.m=t,r.c=d,r.i=function(u){return u},r.d=function(u,h,y){r.o(u,h)||Object.defineProperty(u,h,{configurable:!1,enumerable:!0,get:y})},r.n=function(u){var h=u&&u.__esModule?function(){return u['default']}:function(){return u};return r.d(h,'a',h),h},r.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},r.p='',r(r.s=221)})({12:function(t){function d(){throw new Error('setTimeout has not been defined')}function u(){throw new Error('clearTimeout has not been defined')}function h(N){if(E===setTimeout)return setTimeout(N,0);if((E===d||!E)&&setTimeout)return E=setTimeout,setTimeout(N,0);try{return E(N,0)}catch(B){try{return E.call(null,N,0)}catch(M){return E.call(this,N,0)}}}function y(N){if(A===clearTimeout)return clearTimeout(N);if((A===u||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(N);try{return A(N)}catch(B){try{return A.call(null,N)}catch(M){return A.call(this,N)}}}function k(){S&&O&&(S=!1,O.length?D=O.concat(D):K=-1,D.length&&P())}function P(){if(!S){var N=h(k);S=!0;for(var B=D.length;B;){for(O=D,D=[];++K<B;)O&&O[K].run();K=-1,B=D.length}O=null,S=!1,y(N)}}function w(N,B){this.fun=N,this.array=B}function I(){}var C=t.exports={},E,A;(function(){try{E='function'==typeof setTimeout?setTimeout:d}catch(N){E=d}try{A='function'==typeof clearTimeout?clearTimeout:u}catch(N){A=u}})();var D=[],S=!1,O,K=-1;C.nextTick=function(N){var B=Array(arguments.length-1);if(1<arguments.length)for(var M=1;M<arguments.length;M++)B[M-1]=arguments[M];D.push(new w(N,B)),1!==D.length||S||h(P)},w.prototype.run=function(){this.fun.apply(null,this.array)},C.title='browser',C.browser=!0,C.env={},C.argv=[],C.version='',C.versions={},C.on=I,C.addListener=I,C.once=I,C.off=I,C.removeListener=I,C.removeAllListeners=I,C.emit=I,C.binding=function(){throw new Error('process.binding is not supported')},C.cwd=function(){return'/'},C.chdir=function(){throw new Error('process.chdir is not supported')},C.umask=function(){return 0}},221:function(t,r,d){t.exports=d(52)},26:function(t){var d=function(){return this}();try{d=d||Function('return this')()||(1,eval)('this')}catch(u){'object'==typeof window&&(d=window)}t.exports=d},52:function(t,r,d){(function(u,h){(function(y,k){t.exports=k()})(this,function(){'use strict';function y(Yn,Xn){return'object'==typeof Xn?(Ge(Xn).forEach(function(Zn){Yn[Zn]=Xn[Zn]}),Yn):Yn}function k(Yn,Xn){return Xe.call(Yn,Xn)}function P(Yn,Xn){'function'==typeof Xn&&(Xn=Xn(Ye(Yn))),Ge(Xn).forEach(function(Zn){w(Yn,Zn,Xn[Zn])})}function w(Yn,Xn,Zn,Jn){Object.defineProperty(Yn,Xn,y(Zn&&k(Zn,'get')&&'function'==typeof Zn.get?{get:Zn.get,set:Zn.set,configurable:!0}:{value:Zn,configurable:!0,writable:!0},Jn))}function I(Yn){return{from:function(Xn){return Yn.prototype=Object.create(Xn.prototype),w(Yn.prototype,'constructor',Yn),{extend:P.bind(null,Yn.prototype)}}}}function C(Yn,Xn){var Jn,Zn=Ze(Yn,Xn);return Zn||(Jn=Ye(Yn))&&C(Jn,Xn)}function E(Yn,Xn,Zn){return Je.call(Yn,Xn,Zn)}function A(Yn,Xn){return Xn(Yn)}function D(Yn){var Xn=setTimeout(Yn,1e3);clearTimeout(Xn)}function S(Yn){if(!Yn)throw new Error('Assertion Failed')}function O(Yn){Qe.setImmediate?h(Yn):setTimeout(Yn,0)}function K(Yn,Xn){return Yn.reduce(function(Zn,Jn,et){var nt=Xn(Jn,et);return nt&&(Zn[nt[0]]=nt[1]),Zn},{})}function N(Yn,Xn){return function(){try{Yn.apply(this,arguments)}catch(Zn){Xn(Zn)}}}function B(Yn,Xn,Zn){try{Yn.apply(null,Zn)}catch(Jn){Xn&&Xn(Jn)}}function M(Yn,Xn){if(k(Yn,Xn))return Yn[Xn];if(!Xn)return Yn;if('string'!=typeof Xn){for(var nt,Zn=[],Jn=0,et=Xn.length;Jn<et;++Jn)nt=M(Yn,Xn[Jn]),Zn.push(nt);return Zn}var tt=Xn.indexOf('.');if(-1!==tt){var rt=Yn[Xn.substr(0,tt)];return void 0===rt?void 0:M(rt,Xn.substr(tt+1))}}function F(Yn,Xn,Zn){if(Yn&&void 0!==Xn&&!('isFrozen'in Object&&Object.isFrozen(Yn)))if('string'!=typeof Xn&&'length'in Xn){S('string'!=typeof Zn&&'length'in Zn);for(var Jn=0,et=Xn.length;Jn<et;++Jn)F(Yn,Xn[Jn],Zn[Jn])}else{var nt=Xn.indexOf('.');if(-1!==nt){var tt=Xn.substr(0,nt),rt=Xn.substr(nt+1);if(''===rt)void 0===Zn?delete Yn[tt]:Yn[tt]=Zn;else{var at=Yn[tt];at||(at=Yn[tt]={}),F(at,rt,Zn)}}else void 0===Zn?delete Yn[Xn]:Yn[Xn]=Zn}}function R(Yn){var Xn={};for(var Zn in Yn)k(Yn,Zn)&&(Xn[Zn]=Yn[Zn]);return Xn}function U(Yn){if(!Yn||'object'!=typeof Yn)return Yn;var Xn;if($e(Yn)){Xn=[];for(var Zn=0,Jn=Yn.length;Zn<Jn;++Zn)Xn.push(U(Yn[Zn]))}else if(Yn instanceof Date)Xn=new Date,Xn.setTime(Yn.getTime());else for(var et in Xn=Yn.constructor?Object.create(Yn.constructor.prototype):{},Yn)k(Yn,et)&&(Xn[et]=U(Yn[et]));return Xn}function L(Yn,Xn,Zn,Jn){return Zn=Zn||{},Jn=Jn||'',Ge(Yn).forEach(function(et){if(!k(Xn,et))Zn[Jn+et]=void 0;else{var nt=Yn[et],tt=Xn[et];'object'==typeof nt&&'object'==typeof tt&&nt&&tt&&nt.constructor===tt.constructor?L(nt,tt,Zn,Jn+et+'.'):nt!==tt&&(Zn[Jn+et]=Xn[et])}}),Ge(Xn).forEach(function(et){k(Yn,et)||(Zn[Jn+et]=Xn[et])}),Zn}function V(Yn){var Xn,Zn,Jn,et;if(1===arguments.length){if($e(Yn))return Yn.slice();if(this===tn&&'string'==typeof Yn)return[Yn];if(et=nn(Yn)){for(Zn=[];Jn=et.next(),!Jn.done;)Zn.push(Jn.value);return Zn}if(null==Yn)return[Yn];if(Xn=Yn.length,'number'==typeof Xn){for(Zn=Array(Xn);Xn--;)Zn[Xn]=Yn[Xn];return Zn}return[Yn]}for(Xn=arguments.length,Zn=Array(Xn);Xn--;)Zn[Xn]=arguments[Xn];return Zn}function z(Yn){return rn.apply([],Yn)}function W(){}function H(Yn){return Yn}function G(Yn,Xn){return null==Yn||Yn===H?Xn:function(Zn){return Xn(Yn(Zn))}}function $(Yn,Xn){return function(){Yn.apply(this,arguments),Xn.apply(this,arguments)}}function Q(Yn,Xn){return Yn===W?Xn:function(){var Zn=Yn.apply(this,arguments);void 0!==Zn&&(arguments[0]=Zn);var Jn=this.onsuccess,et=this.onerror;this.onsuccess=null,this.onerror=null;var nt=Xn.apply(this,arguments);return Jn&&(this.onsuccess=this.onsuccess?$(Jn,this.onsuccess):Jn),et&&(this.onerror=this.onerror?$(et,this.onerror):et),void 0===nt?Zn:nt}}function Y(Yn,Xn){return Yn===W?Xn:function(){Yn.apply(this,arguments);var Zn=this.onsuccess,Jn=this.onerror;this.onsuccess=this.onerror=null,Xn.apply(this,arguments),Zn&&(this.onsuccess=this.onsuccess?$(Zn,this.onsuccess):Zn),Jn&&(this.onerror=this.onerror?$(Jn,this.onerror):Jn)}}function X(Yn,Xn){return Yn===W?Xn:function(Zn){var Jn=Yn.apply(this,arguments);y(Zn,Jn);var et=this.onsuccess,nt=this.onerror;this.onsuccess=null,this.onerror=null;var tt=Xn.apply(this,arguments);return et&&(this.onsuccess=this.onsuccess?$(et,this.onsuccess):et),nt&&(this.onerror=this.onerror?$(nt,this.onerror):nt),void 0===Jn?void 0===tt?void 0:tt:y(Jn,tt)}}function Z(Yn,Xn){return Yn===W?Xn:function(){return!1!==Xn.apply(this,arguments)&&Yn.apply(this,arguments)}}function J(Yn,Xn){return Yn===W?Xn:function(){var Zn=Yn.apply(this,arguments);if(Zn&&'function'==typeof Zn.then){for(var Jn=this,et=arguments.length,nt=Array(et);et--;)nt[et]=arguments[et];return Zn.then(function(){return Xn.apply(Jn,nt)})}return Xn.apply(this,arguments)}}function ee(Yn,Xn){an=Yn,on=Xn}function ne(){'use strict';if(sn)try{throw ne.arguments,new Error}catch(Yn){return Yn}return new Error}function te(Yn,Xn){var Zn=Yn.stack;return Zn?(Xn=Xn||0,0===Zn.indexOf(Yn.name)&&(Xn+=(Yn.name+Yn.message).split('\n').length),Zn.split('\n').slice(Xn).filter(on).map(function(Jn){return'\n'+Jn}).join('')):''}function re(Yn,Xn){return function(){return console.warn(Yn+' is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. '+te(ne(),1)),Xn.apply(this,arguments)}}function ae(Yn,Xn){this._e=ne(),this.name=Yn,this.message=Xn}function oe(Yn,Xn){return Yn+'. Errors: '+Xn.map(function(Zn){return Zn.toString()}).filter(function(Zn,Jn,et){return et.indexOf(Zn)===Jn}).join('\n')}function se(Yn,Xn,Zn,Jn){this._e=ne(),this.failures=Xn,this.failedKeys=Jn,this.successCount=Zn}function ie(Yn,Xn){this._e=ne(),this.name='BulkError',this.failures=Xn,this.message=oe(Yn,Xn)}function de(Yn){function Xn(rt,at,ot){if('object'==typeof rt)return Zn(rt);at||(at=Z),ot||(ot=W);var st={subscribers:[],fire:ot,subscribe:function(lt){-1===st.subscribers.indexOf(lt)&&(st.subscribers.push(lt),st.fire=at(st.fire,lt))},unsubscribe:function(lt){st.subscribers=st.subscribers.filter(function(dt){return dt!==lt}),st.fire=st.subscribers.reduce(at,ot)}};return Jn[rt]=et[rt]=st,st}function Zn(rt){Ge(rt).forEach(function(at){var ot=rt[at];if($e(ot))Xn(at,rt[at][0],rt[at][1]);else if('asap'===ot)var st=Xn(at,H,function(){for(var dt=arguments.length,ct=Array(dt);dt--;)ct[dt]=arguments[dt];st.subscribers.forEach(function(ut){O(function(){ut.apply(null,ct)})})});else throw new mn.InvalidArgument('Invalid event config')})}var Jn={},et=function(rt,at){if(at){for(var ot=arguments.length,st=Array(ot-1);--ot;)st[ot-1]=arguments[ot];return Jn[rt].subscribe.apply(null,st),Yn}return'string'==typeof rt?Jn[rt]:void 0};et.addEventType=Xn;for(var nt=1,tt=arguments.length;nt<tt;++nt)Xn(arguments[nt]);return et}function ce(Yn){if('object'!=typeof this)throw new TypeError('Promises must be constructed via new');this._listeners=[],this.onuncatched=W,this._lib=!1;var Xn=this._PSD=Sn;if(an&&(this._stackHolder=ne(),this._prev=null,this._numPrev=0,be(this,An)),'function'!=typeof Yn){if(Yn!==bn)throw new TypeError('Not a function');return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&pe(this,this._value))}this._state=null,this._value=null,++Xn.ref,he(this,Yn)}function ue(Yn,Xn,Zn,Jn){this.onFulfilled='function'==typeof Yn?Yn:null,this.onRejected='function'==typeof Xn?Xn:null,this.resolve=Zn,this.reject=Jn,this.psd=Sn}function he(Yn,Xn){try{Xn(function(Zn){if(null===Yn._state){if(Zn===Yn)throw new TypeError('A promise cannot be resolved with itself.');var Jn=Yn._lib&&ve();Zn&&'function'==typeof Zn.then?he(Yn,function(et,nt){Zn instanceof ce?Zn._then(et,nt):Zn.then(et,nt)}):(Yn._state=!0,Yn._value=Zn,fe(Yn)),Jn&&ke()}},pe.bind(null,Yn))}catch(Zn){pe(Yn,Zn)}}function pe(Yn,Xn){if(En.push(Xn),null===Yn._state){var Zn=Yn._lib&&ve();Xn=Dn(Xn),Yn._state=!1,Yn._value=Xn,an&&null!==Xn&&'object'==typeof Xn&&!Xn._promise&&B(function(){var Jn=C(Xn,'stack');Xn._promise=Yn,w(Xn,'stack',{get:function(){return kn?Jn&&(Jn.get?Jn.get.apply(Xn):Jn.value):Yn.stack}})}),we(Yn),fe(Yn),Zn&&ke()}}function fe(Yn){var Xn=Yn._listeners;Yn._listeners=[];for(var Zn=0,Jn=Xn.length;Zn<Jn;++Zn)me(Yn,Xn[Zn]);var et=Yn._PSD;--et.ref||et.finalize(),0==On&&(++On,Pn(function(){0==--On&&xe()},[]))}function me(Yn,Xn){if(null===Yn._state)return void Yn._listeners.push(Xn);var Zn=Yn._state?Xn.onFulfilled:Xn.onRejected;if(null===Zn)return(Yn._state?Xn.resolve:Xn.reject)(Yn._value);var Jn=Xn.psd;++Jn.ref,++On,Pn(ge,[Zn,Yn,Xn])}function ge(Yn,Xn,Zn){var Jn=Sn,et=Zn.psd;try{et!==Jn&&(Sn=et),An=Xn;var tt,nt=Xn._value;Xn._state?tt=Yn(nt):(En.length&&(En=[]),tt=Yn(nt),-1===En.indexOf(nt)&&Ie(Xn)),Zn.resolve(tt)}catch(rt){Zn.reject(rt)}finally{et!==Jn&&(Sn=Jn),An=null,0==--On&&xe(),--et.ref||et.finalize()}}function ye(Yn,Xn,Zn){if(Xn.length===Zn)return Xn;var Jn='';if(!1===Yn._state){var nt,tt,et=Yn._value;null==et?(nt=et,tt=''):(nt=et.name||'Error',tt=et.message||et,Jn=te(et,0)),Xn.push(nt+(tt?': '+tt:'')+Jn)}return an&&(Jn=te(Yn._stackHolder,2),Jn&&-1===Xn.indexOf(Jn)&&Xn.push(Jn),Yn._prev&&ye(Yn._prev,Xn,Zn)),Xn}function be(Yn,Xn){var Zn=Xn?Xn._numPrev+1:0;Zn<_n&&(Yn._prev=Xn,Yn._numPrev=Zn)}function _e(){ve()&&ke()}function ve(){var Yn=wn;return wn=!1,In=!1,Yn}function ke(){var Yn,Xn,Zn;do for(;0<jn.length;)for(Yn=jn,jn=[],Zn=Yn.length,Xn=0;Xn<Zn;++Xn){var Jn=Yn[Xn];Jn[0].apply(null,Jn[1])}while(0<jn.length);wn=!0,In=!0}function xe(){var Yn=Cn;Cn=[],Yn.forEach(function(Jn){Jn._PSD.onunhandled.call(null,Jn._value,Jn)});for(var Xn=Kn.slice(0),Zn=Xn.length;Zn;)Xn[--Zn]()}function Pe(Yn){function Xn(){Yn(),Kn.splice(Kn.indexOf(Xn),1)}Kn.push(Xn),++On,Pn(function(){0==--On&&xe()},[])}function we(Yn){Cn.some(function(Xn){return Xn._value===Yn._value})||Cn.push(Yn)}function Ie(Yn){for(var Xn=Cn.length;Xn;)if(Cn[--Xn]._value===Yn._value)return void Cn.splice(Xn,1)}function Ee(Yn){return new ce(bn,!1,Yn)}function Ae(Yn,Xn){var Zn=Sn;return function(){var Jn=ve(),et=Sn;try{return et!==Zn&&(Sn=Zn),Yn.apply(this,arguments)}catch(nt){Xn&&Xn(nt)}finally{et!==Zn&&(Sn=et),Jn&&ke()}}}function De(Yn,Xn,Zn,Jn){var et=Sn,nt=Object.create(et);nt.parent=et,nt.ref=0,nt.global=!1,++et.ref,nt.finalize=function(){--this.parent.ref||this.parent.finalize()};var tt=Te(nt,Yn,Xn,Zn,Jn);return 0===nt.ref&&nt.finalize(),tt}function Te(Yn,Xn,Zn,Jn,et){var nt=Sn;try{return Yn!==nt&&(Sn=Yn),Xn(Zn,Jn,et)}finally{Yn!==nt&&(Sn=nt)}}function Se(Yn,Xn){var Zn;try{Zn=Xn.onuncatched(Yn)}catch(nt){}if(!1!==Zn)try{var Jn,et={promise:Xn,reason:Yn};if(Qe.document&&document.createEvent?(Jn=document.createEvent('Event'),Jn.initEvent(Bn,!0,!0),y(Jn,et)):Qe.CustomEvent&&(Jn=new CustomEvent(Bn,{detail:et}),y(Jn,et)),Jn&&Qe.dispatchEvent&&(dispatchEvent(Jn),!Qe.PromiseRejectionEvent&&Qe.onunhandledrejection))try{Qe.onunhandledrejection(Jn)}catch(nt){}Jn.defaultPrevented||ce.on.error.fire(Yn,Xn)}catch(nt){}}function je(Yn,Xn){var Zn=ce.reject(Yn);return Xn?Zn.uncaught(Xn):Zn}function Oe(Yn,Xn){function Jn(or){this._cfg={version:or,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function et(or,sr,ir){var lr=Xt._createTransaction(Yt,Vt,Ut);lr.create(sr),lr._completion.catch(ir);var dr=lr._reject.bind(lr);De(function(){Sn.trans=lr,0===or?(Ge(Ut).forEach(function(cr){rt(sr,cr,Ut[cr].primKey,Ut[cr].indexes)}),ce.follow(function(){return Xt.on.populate.fire(lr)}).catch(dr)):nt(or,lr,sr).catch(dr)})}function nt(or,sr,ir){function lr(){return dr.length?ce.resolve(dr.shift()(sr.idbtrans)).then(lr):ce.resolve()}var dr=[],cr=Lt.filter(function(pr){return pr._cfg.version===or})[0];if(!cr)throw new mn.Upgrade('Dexie specification of currently installed DB version is missing');Ut=Xt._dbSchema=cr._cfg.dbschema;var ur=!1,hr=Lt.filter(function(pr){return pr._cfg.version>or});return hr.forEach(function(pr){dr.push(function(){var fr=Ut,mr=pr._cfg.dbschema;Ot(fr,ir),Ot(mr,ir),Ut=Xt._dbSchema=mr;var gr=tt(fr,mr);if(gr.add.forEach(function(yr){rt(ir,yr[0],yr[1].primKey,yr[1].indexes)}),gr.change.forEach(function(yr){if(yr.recreate)throw new mn.Upgrade('Not yet support for changing primary key');else{var br=ir.objectStore(yr.name);yr.add.forEach(function(_r){st(br,_r)}),yr.change.forEach(function(_r){br.deleteIndex(_r.name),st(br,_r)}),yr.del.forEach(function(_r){br.deleteIndex(_r)})}}),pr._cfg.contentUpgrade)return ur=!0,ce.follow(function(){pr._cfg.contentUpgrade(sr)})}),dr.push(function(fr){if(!ur||!zn){var mr=pr._cfg.dbschema;ot(mr,fr)}})}),lr().then(function(){at(Ut,ir)})}function tt(or,sr){var ir={del:[],add:[],change:[]};for(var lr in or)sr[lr]||ir.del.push(lr);for(lr in sr){var dr=or[lr],cr=sr[lr];if(!dr)ir.add.push([lr,cr]);else{var ur={name:lr,def:cr,recreate:!1,del:[],add:[],change:[]};if(dr.primKey.src!==cr.primKey.src)ur.recreate=!0,ir.change.push(ur);else{var hr=dr.idxByName,pr=cr.idxByName;for(var fr in hr)pr[fr]||ur.del.push(fr);for(fr in pr){var mr=hr[fr],gr=pr[fr];mr?mr.src!==gr.src&&ur.change.push(gr):ur.add.push(gr)}(0<ur.del.length||0<ur.add.length||0<ur.change.length)&&ir.change.push(ur)}}}return ir}function rt(or,sr,ir,lr){var dr=or.db.createObjectStore(sr,ir.keyPath?{keyPath:ir.keyPath,autoIncrement:ir.auto}:{autoIncrement:ir.auto});return lr.forEach(function(cr){st(dr,cr)}),dr}function at(or,sr){Ge(or).forEach(function(ir){sr.db.objectStoreNames.contains(ir)||rt(sr,ir,or[ir].primKey,or[ir].indexes)})}function ot(or,sr){for(var lr,ir=0;ir<sr.db.objectStoreNames.length;++ir)lr=sr.db.objectStoreNames[ir],null==or[lr]&&sr.db.deleteObjectStore(lr)}function st(or,sr){or.createIndex(sr.name,sr.keyPath,{unique:sr.unique,multiEntry:sr.multi})}function lt(or){return Xt.on.error.fire(or)}function dt(or,sr,ir){if(!$t&&!Sn.letThrough){if(!Gt){if(!Ft)return je(new mn.DatabaseClosed,lt);Xt.open().catch(W)}return Jt.then(function(){return dt(or,sr,ir)})}var lr=Xt._createTransaction(or,sr,Ut);return lr._promise(or,function(dr,cr){De(function(){Sn.trans=lr,ir(dr,cr,lr)})}).then(function(dr){return lr._completion.then(function(){return dr})})}function ct(or,sr,ir){this.name=or,this.schema=sr,this.hook=zt[or]?zt[or].hook:de(null,{creating:[Q,W],reading:[G,H],updating:[X,W],deleting:[Y,W]}),this._collClass=ir||gt}function ut(or,sr,ir){ct.call(this,or,sr,ir||bt)}function ht(or,sr,ir){return(ir?qe:Fe)(function(lr){or.push(lr),sr&&sr()})}function pt(or,sr,ir,lr,dr){return new ce(function(cr,ur){var hr=ir.length,pr=hr-1;if(0===hr)return cr();if(!lr)for(var mr,fr=0;fr<hr;++fr)mr=or.delete(ir[fr]),mr.onerror=Ae(Fe(ur)),fr===pr&&(mr.onsuccess=Ae(function(){return cr()}));else{var gr,yr=qe(ur),br=Me(null);B(function(){for(var _r=0;_r<hr;++_r){gr={onsuccess:null,onerror:null};var vr=ir[_r];dr.call(gr,vr[0],vr[1],sr);var kr=or.delete(vr[0]);kr._hookCtx=gr,kr.onerror=yr,kr.onsuccess=_r===pr?Me(cr):br}},function(_r){throw gr.onerror&&gr.onerror(_r),_r})}}).uncaught(lt)}function ft(or,sr,ir,lr){var dr=this;this.db=Xt,this.mode=or,this.storeNames=sr,this.idbtrans=null,this.on=de(this,'complete','error','abort'),this.parent=lr||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=ir,this._resolve=null,this._reject=null,this._completion=new ce(function(cr,ur){dr._resolve=cr,dr._reject=ur}).uncaught(lt),this._completion.then(function(){dr.on.complete.fire()},function(cr){return dr.on.error.fire(cr),dr.parent?dr.parent._reject(cr):dr.active&&dr.idbtrans&&dr.idbtrans.abort(),dr.active=!1,je(cr)})}function mt(or,sr,ir){this._ctx={table:or,index:':id'===sr?null:sr,collClass:or._collClass,or:ir}}function gt(or,sr){var ir=null,lr=null;if(sr)try{ir=sr()}catch(ur){lr=ur}var dr=or._ctx,cr=dr.table;this._ctx={table:cr,index:dr.index,isPrimKey:!dr.index||cr.schema.primKey.keyPath&&dr.index===cr.schema.primKey.name,range:ir,keysOnly:!1,dir:'next',unique:'',algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:lr,or:dr.or,valueMapper:cr.hook.reading.fire}}function yt(or,sr){return!(or.filter||or.algorithm||or.or)&&(sr?or.justLimit:!or.replayFilter)}function bt(){gt.apply(this,arguments)}function _t(or,sr){return or._cfg.version-sr._cfg.version}function vt(or,sr,ir,lr){sr.forEach(function(dr){var cr=Xt._tableFactory(ir,lr[dr]);or.forEach(function(ur){dr in ur||(ur[dr]=cr)})})}function kt(or){or.forEach(function(sr){for(var ir in sr)sr[ir]instanceof ct&&delete sr[ir]})}function xt(or,sr,ir,lr,dr,cr){var ur=cr?function(pr,fr,mr){return ir(cr(pr),fr,mr)}:ir,hr=Ae(ur,dr);or.onerror||(or.onerror=Fe(dr)),or.onsuccess=sr?N(function(){var fr=or.result;if(fr){var mr=function(){fr.continue()};sr(fr,function(gr){mr=gr},lr,dr)&&hr(fr.value,fr,function(gr){mr=gr}),mr()}else lr()},dr):N(function(){var fr=or.result;if(fr){var mr=function(){fr.continue()};hr(fr.value,fr,function(gr){mr=gr}),mr()}else lr()},dr)}function Pt(or){var sr=[];return or.split(',').forEach(function(ir){ir=ir.trim();var lr=ir.replace(/([&*]|\+\+)/g,''),dr=/^\[/.test(lr)?lr.match(/^\[(.*)\]$/)[1].split('+'):lr;sr.push(new Ve(lr,dr||null,/\&/.test(ir),/\*/.test(ir),/\+\+/.test(ir),$e(dr),/\./.test(ir)))}),sr}function wt(or,sr){return qt.cmp(or,sr)}function It(or,sr){return 0>wt(or,sr)?or:sr}function Ct(or,sr){return 0<wt(or,sr)?or:sr}function Et(or,sr){return qt.cmp(or,sr)}function At(or,sr){return qt.cmp(sr,or)}function Dt(or,sr){return or<sr?-1:or===sr?0:1}function Tt(or,sr){return or>sr?-1:or===sr?0:1}function St(or,sr){return or?sr?function(){return or.apply(this,arguments)&&sr.apply(this,arguments)}:or:sr}function jt(){if(Xt.verno=Wt.version/10,Xt._dbSchema=Ut={},Vt=E(Wt.objectStoreNames,0),0!==Vt.length){var or=Wt.transaction(We(Vt),'readonly');Vt.forEach(function(sr){for(var pr,ir=or.objectStore(sr),lr=ir.keyPath,dr=lr&&'string'==typeof lr&&-1!==lr.indexOf('.'),cr=new Ve(lr,lr||'',!1,!1,!!ir.autoIncrement,lr&&'string'!=typeof lr,dr),ur=[],hr=0;hr<ir.indexNames.length;++hr){pr=ir.index(ir.indexNames[hr]),lr=pr.keyPath,dr=lr&&'string'==typeof lr&&-1!==lr.indexOf('.');var fr=new Ve(pr.name,lr,!!pr.unique,!!pr.multiEntry,!1,lr&&'string'!=typeof lr,dr);ur.push(fr)}Ut[sr]=new ze(sr,cr,ur,{})}),vt([zt,ft.prototype],Ge(Ut),Yt,Ut)}}function Ot(or,sr){for(var ir=sr.db.objectStoreNames,lr=0;lr<ir.length;++lr){var dr=ir[lr],cr=sr.objectStore(dr);ar='getAll'in cr;for(var ur=0;ur<cr.indexNames.length;++ur){var hr=cr.indexNames[ur],pr=cr.index(hr).keyPath,fr='string'==typeof pr?pr:'['+E(pr).join('+')+']';if(or[dr]){var mr=or[dr].idxByName[fr];mr&&(mr.name=hr)}}}}function Kt(or){Xt.on('blocked').fire(or),Ln.filter(function(sr){return sr.name===Xt.name&&sr!==Xt&&!sr._vcFired}).map(function(sr){return sr.on('versionchange').fire(or)})}var Zt,er,ar,Nt=Oe.dependencies,Bt=y({addons:Oe.addons,autoOpen:!0,indexedDB:Nt.indexedDB,IDBKeyRange:Nt.IDBKeyRange},Xn),Mt=Bt.addons,Ft=Bt.autoOpen,qt=Bt.indexedDB,Rt=Bt.IDBKeyRange,Ut=this._dbSchema={},Lt=[],Vt=[],zt={},Wt=null,Ht=null,Gt=!1,$t=!1,Qt='readonly',Yt='readwrite',Xt=this,Jt=new ce(function(or){Zt=or}),nr=new ce(function(or,sr){er=sr}),tr=!0,rr=!!He(qt);this.version=function(or){if(Wt||Gt)throw new mn.Schema('Cannot add version when database is open');this.verno=Math.max(this.verno,or);var sr=Lt.filter(function(ir){return ir._cfg.version===or})[0];return sr?sr:(sr=new Jn(or),Lt.push(sr),Lt.sort(_t),sr)},y(Jn.prototype,{stores:function(or){this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,or):or;var sr={};Lt.forEach(function(lr){y(sr,lr._cfg.storesSource)});var ir=this._cfg.dbschema={};return this._parseStoresSpec(sr,ir),Ut=Xt._dbSchema=ir,kt([zt,Xt,ft.prototype]),vt([zt,Xt,ft.prototype,this._cfg.tables],Ge(ir),Yt,ir),Vt=Ge(ir),this},upgrade:function(or){var sr=this;return Gn(function(){or(Xt._createTransaction(Yt,Ge(sr._cfg.dbschema),sr._cfg.dbschema))}),this._cfg.contentUpgrade=or,this},_parseStoresSpec:function(or,sr){Ge(or).forEach(function(ir){if(null!==or[ir]){var lr={},dr=Pt(or[ir]),cr=dr.shift();if(cr.multi)throw new mn.Schema('Primary key cannot be multi-valued');cr.keyPath&&F(lr,cr.keyPath,cr.auto?0:cr.keyPath),dr.forEach(function(ur){if(ur.auto)throw new mn.Schema('Only primary key can be marked as autoIncrement (++)');if(!ur.keyPath)throw new mn.Schema('Index must have a name and cannot be an empty string');F(lr,ur.keyPath,ur.compound?ur.keyPath.map(function(){return''}):'')}),sr[ir]=new ze(ir,cr,dr,lr)}})}}),this._allTables=zt,this._tableFactory=function(sr,ir){return sr===Qt?new ct(ir.name,ir,gt):new ut(ir.name,ir)},this._createTransaction=function(or,sr,ir,lr){return new ft(or,sr,ir,lr)},this._whenReady=function(or){return new ce($n||$t||Sn.letThrough?or:function(sr,ir){if(!Gt){if(!Ft)return void ir(new mn.DatabaseClosed);Xt.open().catch(W)}Jt.then(function(){or(sr,ir)})}).uncaught(lt)},this.verno=0,this.open=function(){if(Gt||Wt)return Jt.then(function(){return Ht?je(Ht,lt):Xt});an&&(nr._stackHolder=ne()),Gt=!0,Ht=null,$t=!1;var or=Zt,sr=null;return ce.race([nr,new ce(function(ir,lr){if(D(function(){return ir()}),0<Lt.length&&(tr=!1),!qt)throw new mn.MissingAPI('indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.');var dr=tr?qt.open(Yn):qt.open(Yn,Math.round(10*Xt.verno));if(!dr)throw new mn.MissingAPI('IndexedDB API not available');dr.onerror=Ae(Fe(lr)),dr.onblocked=Ae(Kt),dr.onupgradeneeded=Ae(function(cr){if(sr=dr.transaction,tr&&!Xt._allowEmptyDB){dr.onerror=Re,sr.abort(),dr.result.close();var ur=qt.deleteDatabase(Yn);ur.onsuccess=ur.onerror=Ae(function(){lr(new mn.NoSuchDatabase('Database '+Yn+' doesnt exist'))})}else{sr.onerror=Ae(Fe(lr));var hr=4611686018427388000<cr.oldVersion?0:cr.oldVersion;et(hr/10,sr,lr,dr)}},lr),dr.onsuccess=Ae(function(){if(sr=null,Wt=dr.result,Ln.push(Xt),tr)jt();else if(0<Wt.objectStoreNames.length)try{Ot(Ut,Wt.transaction(We(Wt.objectStoreNames),Qt))}catch(cr){}Wt.onversionchange=Ae(function(cr){Xt._vcFired=!0,Xt.on('versionchange').fire(cr)}),rr||Ue(function(cr){if(-1===cr.indexOf(Yn))return cr.push(Yn)}),ir()},lr)})]).then(function(){return Oe.vip(Xt.on.ready.fire)}).then(function(){return Gt=!1,Xt}).catch(function(ir){try{sr&&sr.abort()}catch(lr){}return Gt=!1,Xt.close(),Ht=ir,je(Ht,lt)}).finally(function(){$t=!0,or()})},this.close=function(){var or=Ln.indexOf(Xt);if(0<=or&&Ln.splice(or,1),Wt){try{Wt.close()}catch(sr){}Wt=null}Ft=!1,Ht=new mn.DatabaseClosed,Gt&&er(Ht),Jt=new ce(function(sr){Zt=sr}),nr=new ce(function(sr,ir){er=ir})},this.delete=function(){var or=0<arguments.length;return new ce(function(sr,ir){function lr(){Xt.close();var dr=qt.deleteDatabase(Yn);dr.onsuccess=Ae(function(){rr||Ue(function(cr){var ur=cr.indexOf(Yn);if(0<=ur)return cr.splice(ur,1)}),sr()}),dr.onerror=Ae(Fe(ir)),dr.onblocked=Kt}if(or)throw new mn.InvalidArgument('Arguments not allowed in db.delete()');Gt?Jt.then(lr):lr()}).uncaught(lt)},this.backendDB=function(){return Wt},this.isOpen=function(){return null!==Wt},this.hasFailed=function(){return null!==Ht},this.dynamicallyOpened=function(){return tr},this.name=Yn,w(this,'tables',{get:function(){return Ge(zt).map(function(or){return zt[or]})}}),this.on=de(this,'error','populate','blocked','versionchange',{ready:[J,W]}),this.on.error.subscribe=re('Dexie.on.error',this.on.error.subscribe),this.on.error.unsubscribe=re('Dexie.on.error.unsubscribe',this.on.error.unsubscribe),this.on.ready.subscribe=A(this.on.ready.subscribe,function(or){return function(sr,ir){Oe.vip(function(){$t?(!Ht&&ce.resolve().then(sr),ir&&or(sr)):(or(sr),!ir&&or(function lr(){Xt.on.ready.unsubscribe(sr),Xt.on.ready.unsubscribe(lr)}))})}}),Gn(function(){Xt.on('populate').fire(Xt._createTransaction(Yt,Vt,Ut)),Xt.on('error').fire(new Error)}),this.transaction=function(or,sr,ir){function lr(mr){var gr=Sn;mr(ce.resolve().then(function(){return De(function(){Sn.transless=Sn.transless||gr;var yr=Xt._createTransaction(or,fr,Ut,hr);Sn.trans=yr,hr?yr.idbtrans=hr.idbtrans:yr.create();var br=fr.map(function(vr){return zt[vr]});br.push(yr);var _r;return ce.follow(function(){if(_r=ir.apply(yr,br),_r)if('function'==typeof _r.next&&'function'==typeof _r.throw)_r=Le(_r);else if('function'==typeof _r.then&&!k(_r,'_PSD'))throw new mn.IncompatiblePromise('Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: '+ir.toString())}).uncaught(lt).then(function(){return hr&&yr._resolve(),yr._completion}).then(function(){return _r}).catch(function(vr){return yr._reject(vr),je(vr)})})}))}var dr=arguments.length;if(2>dr)throw new mn.InvalidArgument('Too few arguments');for(var cr=Array(dr-1);--dr;)cr[dr-1]=arguments[dr];ir=cr.pop();var ur=z(cr),hr=Sn.trans;hr&&hr.db===Xt&&-1===or.indexOf('!')||(hr=null);var pr=-1!==or.indexOf('?');or=or.replace('!','').replace('?','');try{var fr=ur.map(function(mr){var gr=mr instanceof ct?mr.name:mr;if('string'!=typeof gr)throw new TypeError('Invalid table argument to Dexie.transaction(). Only Table or String are allowed');return gr});if('r'==or||or==Qt)or=Qt;else if('rw'==or||or==Yt)or=Yt;else throw new mn.InvalidArgument('Invalid transaction mode: '+or);if(hr){if(hr.mode===Qt&&or===Yt)if(pr)hr=null;else throw new mn.SubTransaction('Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY');hr&&fr.forEach(function(mr){if(hr&&-1===hr.storeNames.indexOf(mr))if(pr)hr=null;else throw new mn.SubTransaction('Table '+mr+' not included in parent transaction.')})}}catch(mr){return hr?hr._promise(null,function(gr,yr){yr(mr)}):je(mr,lt)}return hr?hr._promise(or,lr,'lock'):Xt._whenReady(lr)},this.table=function(or){if($n&&tr)return new ut(or);if(!k(zt,or))throw new mn.InvalidTable('Table '+or+' does not exist');return zt[or]},P(ct.prototype,{_trans:function(sr,ir,lr){var dr=Sn.trans;return dr&&dr.db===Xt?dr._promise(sr,ir,lr):dt(sr,[this.name],ir)},_idbstore:function(sr,ir,lr){function dr(hr,pr,fr){ir(hr,pr,fr.idbtrans.objectStore(ur),fr)}if($n)return new ce(ir);var cr=Sn.trans,ur=this.name;return cr&&cr.db===Xt?cr._promise(sr,dr,lr):dt(sr,[this.name],dr)},get:function(or,sr){var ir=this;return this._idbstore(Qt,function(lr,dr,cr){$n&&lr(ir.schema.instanceTemplate);var ur=cr.get(or);ur.onerror=Fe(dr),ur.onsuccess=Ae(function(){lr(ir.hook.reading.fire(ur.result))},dr)}).then(sr)},where:function(or){return new mt(this,or)},count:function(or){return this.toCollection().count(or)},offset:function(or){return this.toCollection().offset(or)},limit:function(or){return this.toCollection().limit(or)},reverse:function(){return this.toCollection().reverse()},filter:function(or){return this.toCollection().and(or)},each:function(or){return this.toCollection().each(or)},toArray:function(or){return this.toCollection().toArray(or)},orderBy:function(or){return new this._collClass(new mt(this,or))},toCollection:function(){return new this._collClass(new mt(this))},mapToClass:function(or,sr){this.schema.mappedClass=or;var ir=Object.create(or.prototype);sr&&Ne(ir,sr),this.schema.instanceTemplate=ir;var lr=function(dr){if(!dr)return dr;var cr=Object.create(or.prototype);for(var ur in dr)if(k(dr,ur))try{cr[ur]=dr[ur]}catch(hr){}return cr};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=lr,this.hook('reading',lr),or},defineClass:function(or){return this.mapToClass(Oe.defineClass(or),or)}}),I(ut).from(ct).extend({bulkDelete:function(or){return this.hook.deleting.fire===W?this._idbstore(Yt,function(sr,ir,lr,dr){sr(pt(lr,dr,or,!1,W))}):this.where(':id').anyOf(or).delete().then(function(){})},bulkPut:function(or,sr){var ir=this;return this._idbstore(Yt,function(lr,dr,cr){if(!cr.keyPath&&!ir.schema.primKey.auto&&!sr)throw new mn.InvalidArgument('bulkPut() with non-inbound keys requires keys array in second argument');if(cr.keyPath&&sr)throw new mn.InvalidArgument('bulkPut(): keys argument invalid on tables with inbound keys');if(sr&&sr.length!==or.length)throw new mn.InvalidArgument('Arguments objects and keys must have the same length');if(0===or.length)return lr();var hr,fr,ur=function(xr){0===pr.length?lr(xr):dr(new ie(ir.name+'.bulkPut(): '+pr.length+' of '+mr+' operations failed',pr))},pr=[],mr=or.length,gr=ir;if(ir.hook.creating.fire===W&&ir.hook.updating.fire===W){fr=ht(pr);for(var yr=0,br=or.length;yr<br;++yr)hr=sr?cr.put(or[yr],sr[yr]):cr.put(or[yr]),hr.onerror=fr;hr.onerror=ht(pr,ur),hr.onsuccess=Be(ur)}else{var _r=sr||cr.keyPath&&or.map(function(xr){return M(xr,cr.keyPath)}),vr=_r&&K(_r,function(xr,Pr){return null!=xr&&[xr,or[Pr]]}),kr=_r?gr.where(':id').anyOf(_r.filter(function(xr){return null!=xr})).modify(function(){this.value=vr[this.primKey],vr[this.primKey]=null}).catch(se,function(xr){pr=xr.failures}).then(function(){for(var Ir,xr=[],Pr=sr&&[],wr=_r.length-1;0<=wr;--wr)Ir=_r[wr],(null==Ir||vr[Ir])&&(xr.push(or[wr]),sr&&Pr.push(Ir),null!=Ir&&(vr[Ir]=null));return xr.reverse(),sr&&Pr.reverse(),gr.bulkAdd(xr,Pr)}).then(function(xr){var Pr=_r[_r.length-1];return null==Pr?xr:Pr}):gr.bulkAdd(or);kr.then(ur).catch(ie,function(xr){pr=pr.concat(xr.failures),ur()}).catch(dr)}},'locked')},bulkAdd:function(or,sr){var ir=this,lr=this.hook.creating.fire;return this._idbstore(Yt,function(dr,cr,ur,hr){function pr(Pr){0===mr.length?dr(Pr):cr(new ie(ir.name+'.bulkAdd(): '+mr.length+' of '+br+' operations failed',mr))}if(!ur.keyPath&&!ir.schema.primKey.auto&&!sr)throw new mn.InvalidArgument('bulkAdd() with non-inbound keys requires keys array in second argument');if(ur.keyPath&&sr)throw new mn.InvalidArgument('bulkAdd(): keys argument invalid on tables with inbound keys');if(sr&&sr.length!==or.length)throw new mn.InvalidArgument('Arguments objects and keys must have the same length');if(0===or.length)return dr();var fr,gr,yr,mr=[],br=or.length;if(lr!==W){var vr,_r=ur.keyPath;gr=ht(mr,null,!0),yr=Me(null),B(function(){for(var Pr=0,wr=or.length;Pr<wr;++Pr){vr={onerror:null,onsuccess:null};var Ir=sr&&sr[Pr],Cr=or[Pr],Er=sr?Ir:_r?M(Cr,_r):void 0,Ar=lr.call(vr,Er,Cr,hr);null==Er&&null!=Ar&&(_r?(Cr=U(Cr),F(Cr,_r,Ar)):Ir=Ar),fr=null==Ir?ur.add(Cr):ur.add(Cr,Ir),fr._hookCtx=vr,Pr<wr-1&&(fr.onerror=gr,vr.onsuccess&&(fr.onsuccess=yr))}},function(Pr){throw vr.onerror&&vr.onerror(Pr),Pr}),fr.onerror=ht(mr,pr,!0),fr.onsuccess=Me(pr)}else{gr=ht(mr);for(var kr=0,xr=or.length;kr<xr;++kr)fr=sr?ur.add(or[kr],sr[kr]):ur.add(or[kr]),fr.onerror=gr;fr.onerror=ht(mr,pr),fr.onsuccess=Be(pr)}})},add:function(or,sr){var ir=this.hook.creating.fire;return this._idbstore(Yt,function(lr,dr,cr,ur){var hr={onsuccess:null,onerror:null};if(ir!==W){var pr=null==sr?cr.keyPath?M(or,cr.keyPath):void 0:sr,fr=ir.call(hr,pr,or,ur);null==pr&&null!=fr&&(cr.keyPath?F(or,cr.keyPath,fr):sr=fr)}try{var mr=null==sr?cr.add(or):cr.add(or,sr);mr._hookCtx=hr,mr.onerror=qe(dr),mr.onsuccess=Me(function(gr){var yr=cr.keyPath;yr&&F(or,yr,gr),lr(gr)})}catch(gr){throw hr.onerror&&hr.onerror(gr),gr}})},put:function(or,sr){var ir=this,lr=this.hook.creating.fire,dr=this.hook.updating.fire;return lr!==W||dr!==W?this._trans(Yt,function(cr,ur,hr){var pr=void 0===sr?ir.schema.primKey.keyPath&&M(or,ir.schema.primKey.keyPath):sr;null==pr?ir.add(or).then(cr,ur):(hr._lock(),or=U(or),ir.where(':id').equals(pr).modify(function(){this.value=or}).then(function(fr){return 0===fr?ir.add(or,sr):pr}).finally(function(){hr._unlock()}).then(cr,ur))}):this._idbstore(Yt,function(cr,ur,hr){var pr=void 0===sr?hr.put(or):hr.put(or,sr);pr.onerror=Fe(ur),pr.onsuccess=function(fr){var mr=hr.keyPath;mr&&F(or,mr,fr.target.result),cr(pr.result)}})},'delete':function(or){return this.hook.deleting.subscribers.length?this.where(':id').equals(or).delete():this._idbstore(Yt,function(sr,ir,lr){var dr=lr.delete(or);dr.onerror=Fe(ir),dr.onsuccess=function(){sr(dr.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Yt,function(or,sr,ir){var lr=ir.clear();lr.onerror=Fe(sr),lr.onsuccess=function(){or(lr.result)}})},update:function(or,sr){if('object'!=typeof sr||$e(sr))throw new mn.InvalidArgument('Modifications must be an object.');if('object'==typeof or&&!$e(or)){Ge(sr).forEach(function(lr){F(or,lr,sr[lr])});var ir=M(or,this.schema.primKey.keyPath);return void 0===ir?je(new mn.InvalidArgument('Given object does not contain its primary key'),lt):this.where(':id').equals(ir).modify(sr)}return this.where(':id').equals(or).modify(sr)}}),P(ft.prototype,{_lock:function(){return S(!Sn.global),++this._reculock,1!==this._reculock||Sn.global||(Sn.lockOwnerFor=this),this},_unlock:function(){if(S(!Sn.global),0==--this._reculock)for(Sn.global||(Sn.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var or=this._blockedFuncs.shift();try{Te(or[1],or[0])}catch(sr){}}return this},_locked:function(){return this._reculock&&Sn.lockOwnerFor!==this},create:function(or){var sr=this;if(S(!this.idbtrans),!or&&!Wt)switch(Ht&&Ht.name){case'DatabaseClosedError':throw new mn.DatabaseClosed(Ht);case'MissingAPIError':throw new mn.MissingAPI(Ht.message,Ht);default:throw new mn.OpenFailed(Ht);}if(!this.active)throw new mn.TransactionInactive;return S(null===this._completion._state),or=this.idbtrans=or||Wt.transaction(We(this.storeNames),this.mode),or.onerror=Ae(function(ir){Re(ir),sr._reject(or.error)}),or.onabort=Ae(function(ir){Re(ir),sr.active&&sr._reject(new mn.Abort),sr.active=!1,sr.on('abort').fire(ir)}),or.oncomplete=Ae(function(){sr.active=!1,sr._resolve()}),this},_promise:function(or,sr,ir){var lr=this,dr=lr._locked()?new ce(function(cr,ur){lr._blockedFuncs.push([function(){lr._promise(or,sr,ir).then(cr,ur)},Sn])}):De(function(){var cr=lr.active?new ce(function(ur,hr){if(or===Yt&&lr.mode!==Yt)throw new mn.ReadOnly('Transaction is readonly');!lr.idbtrans&&or&&lr.create(),ir&&lr._lock(),sr(ur,hr,lr)}):je(new mn.TransactionInactive);return lr.active&&ir&&cr.finally(function(){lr._unlock()}),cr});return dr._lib=!0,dr.uncaught(lt)},abort:function(){this.active&&this._reject(new mn.Abort),this.active=!1},tables:{get:re('Transaction.tables',function(){return K(this.storeNames,function(or){return[or,zt[or]]})},'Use db.tables()')},complete:re('Transaction.complete()',function(or){return this.on('complete',or)}),error:re('Transaction.error()',function(or){return this.on('error',or)}),table:re('Transaction.table()',function(or){if(-1===this.storeNames.indexOf(or))throw new mn.InvalidTable('Table '+or+' not in transaction');return zt[or]})}),P(mt.prototype,function(){function or(ur,hr,pr){var fr=ur instanceof mt?new ur._ctx.collClass(ur):ur;return fr._ctx.error=pr?new pr(hr):new TypeError(hr),fr}function sr(ur){return new ur._ctx.collClass(ur,function(){return Rt.only('')}).limit(0)}function ir(ur){return'next'===ur?function(hr){return hr.toUpperCase()}:function(hr){return hr.toLowerCase()}}function lr(ur){return'next'===ur?function(hr){return hr.toLowerCase()}:function(hr){return hr.toUpperCase()}}function dr(ur,hr,pr,fr,mr,gr){for(var vr,yr=_Mathmin(ur.length,fr.length),br=-1,_r=0;_r<yr;++_r){if(vr=hr[_r],vr!==fr[_r])return 0>mr(ur[_r],pr[_r])?ur.substr(0,_r)+pr[_r]+pr.substr(_r+1):0>mr(ur[_r],fr[_r])?ur.substr(0,_r)+fr[_r]+pr.substr(_r+1):0<=br?ur.substr(0,br)+hr[br]+pr.substr(br+1):null;0>mr(ur[_r],vr)&&(br=_r)}return yr<fr.length&&'next'===gr?ur+pr.substr(ur.length):yr<ur.length&&'prev'===gr?ur.substr(0,pr.length):0>br?null:ur.substr(0,br)+fr[br]+pr.substr(br+1)}function cr(ur,hr,pr,fr){function mr(Cr){gr=ir(Cr),yr=lr(Cr),br='next'===Cr?Dt:Tt;var Er=pr.map(function(Ar){return{lower:yr(Ar),upper:gr(Ar)}}).sort(function(Ar,Dr){return br(Ar.lower,Dr.lower)});_r=Er.map(function(Ar){return Ar.upper}),vr=Er.map(function(Ar){return Ar.lower}),kr=Cr,xr='next'===Cr?'':fr}var gr,yr,br,_r,vr,kr,xr,Pr=pr.length;if(!pr.every(function(Cr){return'string'==typeof Cr}))return or(ur,Un);mr('next');var wr=new ur._ctx.collClass(ur,function(){return Rt.bound(_r[0],vr[Pr-1]+fr)});wr._ondirectionchange=function(Cr){mr(Cr)};var Ir=0;return wr._addAlgorithm(function(Cr,Er,Ar){var Dr=Cr.key;if('string'!=typeof Dr)return!1;var Tr=yr(Dr);if(hr(Tr,vr,Ir))return!0;for(var Or,Sr=null,jr=Ir;jr<Pr;++jr)Or=dr(Dr,Tr,_r[jr],vr[jr],br,kr),null===Or&&null==Sr?Ir=jr+1:(null==Sr||0<br(Sr,Or))&&(Sr=Or);return null===Sr?Er(Ar):Er(function(){Cr.continue(Sr+xr)}),!1}),wr}return{between:function(ur,hr,pr,fr){pr=!1!==pr,fr=!0===fr;try{return 0<wt(ur,hr)||0===wt(ur,hr)&&(pr||fr)&&!(pr&&fr)?sr(this):new this._ctx.collClass(this,function(){return Rt.bound(ur,hr,!pr,!fr)})}catch(mr){return or(this,Rn)}},equals:function(ur){return new this._ctx.collClass(this,function(){return Rt.only(ur)})},above:function(ur){return new this._ctx.collClass(this,function(){return Rt.lowerBound(ur,!0)})},aboveOrEqual:function(ur){return new this._ctx.collClass(this,function(){return Rt.lowerBound(ur)})},below:function(ur){return new this._ctx.collClass(this,function(){return Rt.upperBound(ur,!0)})},belowOrEqual:function(ur){return new this._ctx.collClass(this,function(){return Rt.upperBound(ur)})},startsWith:function(ur){return'string'==typeof ur?this.between(ur,ur+Fn,!0,!0):or(this,Un)},startsWithIgnoreCase:function(ur){return''===ur?this.startsWith(ur):cr(this,function(hr,pr){return 0===hr.indexOf(pr[0])},[ur],Fn)},equalsIgnoreCase:function(ur){return cr(this,function(hr,pr){return hr===pr[0]},[ur],'')},anyOfIgnoreCase:function(){var ur=V.apply(tn,arguments);return 0===ur.length?sr(this):cr(this,function(hr,pr){return-1!==pr.indexOf(hr)},ur,'')},startsWithAnyOfIgnoreCase:function(){var ur=V.apply(tn,arguments);return 0===ur.length?sr(this):cr(this,function(hr,pr){return pr.some(function(fr){return 0===hr.indexOf(fr)})},ur,Fn)},anyOf:function(){var ur=V.apply(tn,arguments),hr=Et;try{ur.sort(hr)}catch(mr){return or(this,Rn)}if(0===ur.length)return sr(this);var pr=new this._ctx.collClass(this,function(){return Rt.bound(ur[0],ur[ur.length-1])});pr._ondirectionchange=function(mr){hr='next'===mr?Et:At,ur.sort(hr)};var fr=0;return pr._addAlgorithm(function(mr,gr,yr){for(var br=mr.key;0<hr(br,ur[fr]);)if(++fr,fr===ur.length)return gr(yr),!1;return 0===hr(br,ur[fr])||(gr(function(){mr.continue(ur[fr])}),!1)}),pr},notEqual:function(ur){return this.inAnyRange([[-Infinity,ur],[ur,qn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var ur=V.apply(tn,arguments);if(0===ur.length)return new this._ctx.collClass(this);try{ur.sort(Et)}catch(pr){return or(this,Rn)}var hr=ur.reduce(function(pr,fr){return pr?pr.concat([[pr[pr.length-1][1],fr]]):[[-Infinity,fr]]},null);return hr.push([ur[ur.length-1],qn]),this.inAnyRange(hr,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(ur,hr){function pr(Cr,Er){for(var Tr,Ar=0,Dr=Cr.length;Ar<Dr;++Ar)if(Tr=Cr[Ar],0>wt(Er[0],Tr[1])&&0<wt(Er[1],Tr[0])){Tr[0]=It(Tr[0],Er[0]),Tr[1]=Ct(Tr[1],Er[1]);break}return Ar===Dr&&Cr.push(Er),Cr}function fr(Cr,Er){return _r(Cr[0],Er[0])}function mr(Cr){return!xr(Cr)&&!Pr(Cr)}var gr=this._ctx;if(0===ur.length)return sr(this);if(!ur.every(function(Cr){return void 0!==Cr[0]&&void 0!==Cr[1]&&0>=Et(Cr[0],Cr[1])}))return or(this,'First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower',mn.InvalidArgument);var vr,yr=!hr||!1!==hr.includeLowers,br=hr&&!0===hr.includeUppers,_r=Et;try{vr=ur.reduce(pr,[]),vr.sort(fr)}catch(Cr){return or(this,Rn)}var kr=0,xr=br?function(Cr){return 0<Et(Cr,vr[kr][1])}:function(Cr){return 0<=Et(Cr,vr[kr][1])},Pr=yr?function(Cr){return 0<At(Cr,vr[kr][0])}:function(Cr){return 0<=At(Cr,vr[kr][0])},wr=xr,Ir=new gr.collClass(this,function(){return Rt.bound(vr[0][0],vr[vr.length-1][1],!yr,!br)});return Ir._ondirectionchange=function(Cr){'next'===Cr?(wr=xr,_r=Et):(wr=Pr,_r=At),vr.sort(fr)},Ir._addAlgorithm(function(Cr,Er,Ar){for(var Dr=Cr.key;wr(Dr);)if(++kr,kr===vr.length)return Er(Ar),!1;return!!mr(Dr)||(0===wt(Dr,vr[kr][1])||0===wt(Dr,vr[kr][0])?!1:(Er(function(){_r===Et?Cr.continue(vr[kr][0]):Cr.continue(vr[kr][1])}),!1))}),Ir},startsWithAnyOf:function(){var ur=V.apply(tn,arguments);return ur.every(function(hr){return'string'==typeof hr})?0===ur.length?sr(this):this.inAnyRange(ur.map(function(hr){return[hr,hr+Fn]})):or(this,'startsWithAnyOf() only works with strings')}}}),P(gt.prototype,function(){function or(hr,pr){hr.filter=St(hr.filter,pr)}function sr(hr,pr,fr){var mr=hr.replayFilter;hr.replayFilter=mr?function(){return St(mr(),pr())}:pr,hr.justLimit=fr&&!mr}function ir(hr,pr){hr.isMatch=St(hr.isMatch,pr)}function lr(hr,pr){if(hr.isPrimKey)return pr;var fr=hr.table.schema.idxByName[hr.index];if(!fr)throw new mn.Schema('KeyPath '+hr.index+' on object store '+pr.name+' is not indexed');return pr.index(fr.name)}function dr(hr,pr){var fr=lr(hr,pr);return hr.keysOnly&&'openKeyCursor'in fr?fr.openKeyCursor(hr.range||null,hr.dir+hr.unique):fr.openCursor(hr.range||null,hr.dir+hr.unique)}function cr(hr,pr,fr,mr,gr){var yr=hr.replayFilter?St(hr.filter,hr.replayFilter()):hr.filter;hr.or?function(){function br(){2==++kr&&fr()}function _r(xr,Pr,wr){if(!yr||yr(Pr,wr,br,mr)){var Ir=Pr.primaryKey.toString();k(vr,Ir)||(vr[Ir]=!0,pr(xr,Pr,wr))}}var vr={},kr=0;hr.or._iterate(_r,br,mr,gr),xt(dr(hr,gr),hr.algorithm,_r,br,mr,!hr.keysOnly&&hr.valueMapper)}():xt(dr(hr,gr),St(hr.algorithm,yr),pr,fr,mr,!hr.keysOnly&&hr.valueMapper)}function ur(hr){return hr.table.schema.instanceTemplate}return{_read:function(hr,pr){var fr=this._ctx;return fr.error?fr.table._trans(null,function(gr,yr){yr(fr.error)}):fr.table._idbstore(Qt,hr).then(pr)},_write:function(hr){var pr=this._ctx;return pr.error?pr.table._trans(null,function(mr,gr){gr(pr.error)}):pr.table._idbstore(Yt,hr,'locked')},_addAlgorithm:function(hr){var pr=this._ctx;pr.algorithm=St(pr.algorithm,hr)},_iterate:function(hr,pr,fr,mr){return cr(this._ctx,hr,pr,fr,mr)},clone:function(hr){var pr=Object.create(this.constructor.prototype),fr=Object.create(this._ctx);return hr&&y(fr,hr),pr._ctx=fr,pr},raw:function(){return this._ctx.valueMapper=null,this},each:function(hr){var pr=this._ctx;if($n){var fr=ur(pr),mr=pr.table.schema.primKey.keyPath,gr=M(fr,pr.index?pr.table.schema.idxByName[pr.index].keyPath:mr),yr=M(fr,mr);hr(fr,{key:gr,primaryKey:yr})}return this._read(function(br,_r,vr){cr(pr,hr,br,_r,vr)})},count:function(hr){if($n)return ce.resolve(0).then(hr);var pr=this._ctx;if(yt(pr,!0))return this._read(function(mr,gr,yr){var br=lr(pr,yr),_r=pr.range?br.count(pr.range):br.count();_r.onerror=Fe(gr),_r.onsuccess=function(vr){mr(_Mathmin(vr.target.result,pr.limit))}},hr);var fr=0;return this._read(function(mr,gr,yr){cr(pr,function(){return++fr,!1},function(){mr(fr)},gr,yr)},hr)},sortBy:function(hr,pr){function fr(vr,kr){return kr?fr(vr[gr[kr]],kr-1):vr[yr]}function mr(vr,kr){var xr=fr(vr,br),Pr=fr(kr,br);return xr<Pr?-_r:xr>Pr?_r:0}var gr=hr.split('.').reverse(),yr=gr[0],br=gr.length-1,_r='next'===this._ctx.dir?1:-1;return this.toArray(function(vr){return vr.sort(mr)}).then(pr)},toArray:function(hr){var pr=this._ctx;return this._read(function(fr,mr,gr){if($n&&fr([ur(pr)]),ar&&'next'===pr.dir&&yt(pr,!0)&&0<pr.limit){var yr=pr.table.hook.reading.fire,br=lr(pr,gr),_r=pr.limit<Infinity?br.getAll(pr.range,pr.limit):br.getAll(pr.range);_r.onerror=Fe(mr),_r.onsuccess=yr===H?Be(fr):Ae(Be(function(kr){try{fr(kr.map(yr))}catch(xr){mr(xr)}}))}else{var vr=[];cr(pr,function(kr){vr.push(kr)},function(){fr(vr)},mr,gr)}},hr)},offset:function(hr){var pr=this._ctx;return 0>=hr?this:(pr.offset+=hr,yt(pr)?sr(pr,function(){var fr=hr;return function(mr,gr){return 0===fr||(1===fr?(--fr,!1):(gr(function(){mr.advance(fr),fr=0}),!1))}}):sr(pr,function(){var fr=hr;return function(){return 0>--fr}}),this)},limit:function(hr){return this._ctx.limit=_Mathmin(this._ctx.limit,hr),sr(this._ctx,function(){var pr=hr;return function(fr,mr,gr){return 0>=--pr&&mr(gr),0<=pr}},!0),this},until:function(hr,pr){var fr=this._ctx;return $n&&hr(ur(fr)),or(this._ctx,function(mr,gr,yr){return!hr(mr.value)||(gr(yr),pr)}),this},first:function(hr){return this.limit(1).toArray(function(pr){return pr[0]}).then(hr)},last:function(hr){return this.reverse().first(hr)},filter:function(hr){return $n&&hr(ur(this._ctx)),or(this._ctx,function(pr){return hr(pr.value)}),ir(this._ctx,hr),this},and:function(hr){return this.filter(hr)},or:function(hr){return new mt(this._ctx.table,hr,this)},reverse:function(){return this._ctx.dir='prev'===this._ctx.dir?'next':'prev',this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(hr){var pr=this._ctx;return pr.keysOnly=!pr.isMatch,this.each(function(fr,mr){hr(mr.key,mr)})},eachUniqueKey:function(hr){return this._ctx.unique='unique',this.eachKey(hr)},eachPrimaryKey:function(hr){var pr=this._ctx;return pr.keysOnly=!pr.isMatch,this.each(function(fr,mr){hr(mr.primaryKey,mr)})},keys:function(hr){var pr=this._ctx;pr.keysOnly=!pr.isMatch;var fr=[];return this.each(function(mr,gr){fr.push(gr.key)}).then(function(){return fr}).then(hr)},primaryKeys:function(hr){var pr=this._ctx;if(ar&&'next'===pr.dir&&yt(pr,!0)&&0<pr.limit)return this._read(function(mr,gr,yr){var br=lr(pr,yr),_r=pr.limit<Infinity?br.getAllKeys(pr.range,pr.limit):br.getAllKeys(pr.range);_r.onerror=Fe(gr),_r.onsuccess=Be(mr)}).then(hr);pr.keysOnly=!pr.isMatch;var fr=[];return this.each(function(mr,gr){fr.push(gr.primaryKey)}).then(function(){return fr}).then(hr)},uniqueKeys:function(hr){return this._ctx.unique='unique',this.keys(hr)},firstKey:function(hr){return this.limit(1).keys(function(pr){return pr[0]}).then(hr)},lastKey:function(hr){return this.reverse().firstKey(hr)},distinct:function(){var hr=this._ctx,pr=hr.index&&hr.table.schema.idxByName[hr.index];if(!pr||!pr.multi)return this;var fr={};return or(this._ctx,function(mr){var gr=mr.primaryKey.toString(),yr=k(fr,gr);return fr[gr]=!0,!yr}),this}}}),I(bt).from(gt).extend({modify:function(or){var sr=this,ir=this._ctx,lr=ir.table.hook,dr=lr.updating.fire,cr=lr.deleting.fire;return $n&&'function'==typeof or&&or.call({value:ir.table.schema.instanceTemplate},ir.table.schema.instanceTemplate),this._write(function(ur,hr,pr,fr){function gr(Ar){return Ar&&(Ir.push(Ar),Cr.push(Er)),hr(new se('Error modifying one or more objects',Ir,Pr,Cr))}function yr(){wr&&Pr+Ir.length===xr&&(0<Ir.length?gr():ur(Pr))}var br;if('function'==typeof or)br=dr===W&&cr===W?or:function(Ar){var Dr=U(Ar);if(!1===or.call(this,Ar,this))return!1;if(!k(this,'value'))cr.call(this,this.primKey,Ar,fr);else{var Tr=L(Dr,this.value),Sr=dr.call(this,Tr,this.primKey,Dr,fr);Sr&&(Ar=this.value,Ge(Sr).forEach(function(jr){F(Ar,jr,Sr[jr])}))}};else if(dr===W){var _r=Ge(or),vr=_r.length;br=function(Ar){for(var Dr=!1,Tr=0;Tr<vr;++Tr){var Sr=_r[Tr],jr=or[Sr];M(Ar,Sr)!==jr&&(F(Ar,Sr,jr),Dr=!0)}return Dr}}else{var kr=or;or=R(kr),br=function(Ar){var Dr=!1,Tr=dr.call(this,or,this.primKey,U(Ar),fr);return Tr&&y(or,Tr),Ge(or).forEach(function(Sr){var jr=or[Sr];M(Ar,Sr)!==jr&&(F(Ar,Sr,jr),Dr=!0)}),Tr&&(or=R(kr)),Dr}}var xr=0,Pr=0,wr=!1,Ir=[],Cr=[],Er=null;sr.clone().raw()._iterate(function(Ar,Dr){function Tr(Or){return Ir.push(Or),Cr.push(Sr.primKey),yr(),!0}Er=Dr.primaryKey;var Sr={primKey:Dr.primaryKey,value:Ar,onsuccess:null,onerror:null};if(!1!==br.call(Sr,Ar,Sr)){var jr=!k(Sr,'value');++xr,B(function(){var Or=jr?Dr.delete():Dr.update(Sr.value);Or._hookCtx=Sr,Or.onerror=qe(Tr),Or.onsuccess=Me(function(){++Pr,yr()})},Tr)}else Sr.onsuccess&&Sr.onsuccess(Sr.value)},function(){wr=!0,yr()},gr,pr)})},'delete':function(){var or=this,sr=this._ctx,ir=sr.range,lr=sr.table.hook.deleting.fire,dr=lr!==W;if(!dr&&yt(sr)&&(sr.isPrimKey&&!Wn||!ir))return this._write(function(ur,hr,pr){var fr=Fe(hr),mr=ir?pr.count(ir):pr.count();mr.onerror=fr,mr.onsuccess=function(){var gr=mr.result;B(function(){var yr=ir?pr.delete(ir):pr.clear();yr.onerror=fr,yr.onsuccess=function(){return ur(gr)}},function(yr){return hr(yr)})}});var cr=dr?2e3:1e4;return this._write(function(ur,hr,pr,fr){var mr=0,gr=or.clone({keysOnly:!sr.isMatch&&!dr}).distinct().limit(cr).raw(),yr=[],br=function(){return gr.each(dr?function(_r,vr){yr.push([vr.primaryKey,vr.value])}:function(_r,vr){yr.push(vr.primaryKey)}).then(function(){return dr?yr.sort(function(_r,vr){return Et(_r[0],vr[0])}):yr.sort(Et),pt(pr,fr,yr,dr,lr)}).then(function(){var _r=yr.length;return mr+=_r,yr=[],_r<cr?mr:br()})};ur(br())})}}),y(this,{Collection:gt,Table:ct,Transaction:ft,Version:Jn,WhereClause:mt,WriteableCollection:bt,WriteableTable:ut}),function(){Xt.on('versionchange',function(or){0<or.newVersion?console.warn('Another connection wants to upgrade database \''+Xt.name+'\'. Closing db now to resume the upgrade.'):console.warn('Another connection wants to delete database \''+Xt.name+'\'. Closing db now to resume the delete request.'),Xt.close()}),Xt.on('blocked',function(or){!or.newVersion||or.newVersion<or.oldVersion?console.warn('Dexie.delete(\''+Xt.name+'\') was blocked'):console.warn('Upgrade \''+Xt.name+'\' blocked by other connection holding version '+or.oldVersion/10)})}(),Mt.forEach(function(or){or(Xt)})}function Ke(Yn){if('function'==typeof Yn)return new Yn;if($e(Yn))return[Ke(Yn[0])];if(Yn&&'object'==typeof Yn){var Xn={};return Ne(Xn,Yn),Xn}return Yn}function Ne(Yn,Xn){return Ge(Xn).forEach(function(Zn){var Jn=Ke(Xn[Zn]);Yn[Zn]=Jn}),Yn}function Be(Yn){return function(Xn){Yn(Xn.target.result)}}function Me(Yn){return Ae(function(Xn){var Zn=Xn.target,Jn=Zn.result,et=Zn._hookCtx,nt=et&&et.onsuccess;nt&&nt(Jn),Yn&&Yn(Jn)},Yn)}function Fe(Yn){return function(Xn){return Re(Xn),Yn(Xn.target.error),!1}}function qe(Yn){return Ae(function(Xn){var Zn=Xn.target,Jn=Zn.error,et=Zn._hookCtx,nt=et&&et.onerror;return nt&&nt(Jn),Re(Xn),Yn(Jn),!1})}function Re(Yn){Yn.stopPropagation&&Yn.stopPropagation(),Yn.preventDefault&&Yn.preventDefault()}function Ue(Yn){var Xn,Zn=Oe.dependencies.localStorage;if(!Zn)return Yn([]);try{Xn=JSON.parse(Zn.getItem('Dexie.DatabaseNames')||'[]')}catch(Jn){Xn=[]}Yn(Xn)&&Zn.setItem('Dexie.DatabaseNames',JSON.stringify(Xn))}function Le(Yn){function Xn(tt){return function(rt){var at=tt(rt),ot=at.value;return at.done?ot:ot&&'function'==typeof ot.then?ot.then(et,nt):$e(ot)?ce.all(ot).then(et,nt):et(ot)}}var Zn=function(tt){return Yn.next(tt)},et=Xn(Zn),nt=Xn(function(tt){return Yn.throw(tt)});return Xn(Zn)()}function Ve(Yn,Xn,Zn,Jn,et,nt,tt){this.name=Yn,this.keyPath=Xn,this.unique=Zn,this.multi=Jn,this.auto=et,this.compound=nt,this.dotted=tt;var rt='string'==typeof Xn?Xn:Xn&&'['+[].join.call(Xn,'+')+']';this.src=(Zn?'&':'')+(Jn?'*':'')+(et?'++':'')+rt}function ze(Yn,Xn,Zn,Jn){this.name=Yn,this.primKey=Xn||new Ve,this.indexes=Zn||[new Ve],this.instanceTemplate=Jn,this.mappedClass=null,this.idxByName=K(Zn,function(et){return[et.name,et]})}function We(Yn){return 1===Yn.length?Yn[0]:Yn}function He(Yn){var Xn=Yn&&(Yn.getDatabaseNames||Yn.webkitGetDatabaseNames);return Xn&&Xn.bind(Yn)}var Ge=Object.keys,$e=Array.isArray,Qe='undefined'==typeof self?'undefined'==typeof window?u:window:self,Ye=Object.getPrototypeOf,Xe={}.hasOwnProperty,Ze=Object.getOwnPropertyDescriptor,Je=[].slice,en='undefined'!=typeof Symbol&&Symbol.iterator,nn=en?function(Yn){var Xn;return null!=Yn&&(Xn=Yn[en])&&Xn.apply(Yn)}:function(){return null},tn={},rn=[].concat,an='undefined'!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),on=function(){return!0},sn=!new Error('').stack,dn=['Unknown','Constraint','Data','TransactionInactive','ReadOnly','Version','NotFound','InvalidState','InvalidAccess','Abort','Timeout','QuotaExceeded','Syntax','DataClone'],cn=['Modify','Bulk','OpenFailed','VersionChange','Schema','Upgrade','InvalidTable','MissingAPI','NoSuchDatabase','InvalidArgument','SubTransaction','Unsupported','Internal','DatabaseClosed','IncompatiblePromise'].concat(dn),un={VersionChanged:'Database version changed by other database connection',DatabaseClosed:'Database has been closed',Abort:'Transaction aborted',TransactionInactive:'Transaction has already completed or failed'};I(ae).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+': '+this.message+te(this._e,2))}},toString:function(){return this.name+': '+this.message}}),I(se).from(ae),I(ie).from(ae);var hn=cn.reduce(function(Yn,Xn){return Yn[Xn]=Xn+'Error',Yn},{}),mn=cn.reduce(function(Yn,Xn){function Zn(et,nt){this._e=ne(),this.name=Jn,et?'string'==typeof et?(this.message=et,this.inner=nt||null):'object'==typeof et&&(this.message=et.name+' '+et.message,this.inner=et):(this.message=un[Xn]||Jn,this.inner=null)}var Jn=Xn+'Error';return I(Zn).from(ae),Yn[Xn]=Zn,Yn},{});mn.Syntax=SyntaxError,mn.Type=TypeError,mn.Range=RangeError;var gn=dn.reduce(function(Yn,Xn){return Yn[Xn+'Error']=mn[Xn],Yn},{}),yn=cn.reduce(function(Yn,Xn){return-1===['Syntax','Type','Range'].indexOf(Xn)&&(Yn[Xn+'Error']=mn[Xn]),Yn},{});yn.ModifyError=se,yn.DexieError=ae,yn.BulkError=ie;var bn={},_n=100,kn=!1,xn=Qe.setImmediate?h.bind(null,_e):Qe.MutationObserver?function(){var Yn=document.createElement('div');new MutationObserver(function(){_e(),Yn=null}).observe(Yn,{attributes:!0}),Yn.setAttribute('i','1')}:function(){setTimeout(_e,0)},Pn=function(Yn,Xn){jn.push([Yn,Xn]),In&&(xn(),In=!1)},wn=!0,In=!0,Cn=[],En=[],An=null,Dn=H,Sn={global:!0,ref:0,unhandleds:[],onunhandled:Se,finalize:function(){this.unhandleds.forEach(function(Yn){try{Se(Yn[0],Yn[1])}catch(Xn){}})}},jn=[],On=0,Kn=[];P(ce.prototype,{then:function(Yn,Xn){var Zn=this,Jn=new ce(function(et,nt){me(Zn,new ue(Yn,Xn,et,nt))});return an&&(!this._prev||null===this._state)&&be(Jn,this),Jn},_then:function(Yn,Xn){me(this,new ue(null,null,Yn,Xn))},catch:function(Yn){if(1===arguments.length)return this.then(null,Yn);var Xn=arguments[0],Zn=arguments[1];return'function'==typeof Xn?this.then(null,function(Jn){return Jn instanceof Xn?Zn(Jn):Ee(Jn)}):this.then(null,function(Jn){return Jn&&Jn.name===Xn?Zn(Jn):Ee(Jn)})},finally:function(Yn){return this.then(function(Xn){return Yn(),Xn},function(Xn){return Yn(),Ee(Xn)})},uncaught:function(Yn){var Xn=this;return this.onuncatched=Z(this.onuncatched,Yn),!1===this._state&&-1===Cn.indexOf(this)&&Cn.some(function(Zn,Jn,et){return Zn._value===Xn._value&&(et[Jn]=Xn)}),this},stack:{get:function(){if(this._stack)return this._stack;try{kn=!0;var Yn=ye(this,[],20),Xn=Yn.join('\nFrom previous: ');return null!==this._state&&(this._stack=Xn),Xn}finally{kn=!1}}}}),P(ce,{all:function(){var Yn=V.apply(null,arguments);return new ce(function(Xn,Zn){0===Yn.length&&Xn([]);var Jn=Yn.length;Yn.forEach(function(et,nt){return ce.resolve(et).then(function(tt){Yn[nt]=tt,--Jn||Xn(Yn)},Zn)})})},resolve:function(Yn){return Yn instanceof ce?Yn:Yn&&'function'==typeof Yn.then?new ce(function(Xn,Zn){Yn.then(Xn,Zn)}):new ce(bn,!0,Yn)},reject:Ee,race:function(){var Yn=V.apply(null,arguments);return new ce(function(Xn,Zn){Yn.map(function(Jn){return ce.resolve(Jn).then(Xn,Zn)})})},PSD:{get:function(){return Sn},set:function(Yn){return Sn=Yn}},newPSD:De,usePSD:Te,scheduler:{get:function(){return Pn},set:function(Yn){Pn=Yn}},rejectionMapper:{get:function(){return Dn},set:function(Yn){Dn=Yn}},follow:function(Yn){return new ce(function(Xn,Zn){return De(function(Jn,et){var nt=Sn;nt.unhandleds=[],nt.onunhandled=et,nt.finalize=$(function(){var tt=this;Pe(function(){0===tt.unhandleds.length?Jn():et(tt.unhandleds[0])})},nt.finalize),Yn()},Xn,Zn)})},on:de(null,{error:[Z,function(Yn){console.warn('Unhandled rejection: '+(Yn.stack||Yn))}]})});var Nn=ce.on.error;Nn.subscribe=re('Promise.on(\'error\')',Nn.subscribe),Nn.unsubscribe=re('Promise.on(\'error\').unsubscribe',Nn.unsubscribe);var Bn='unhandledrejection';D(function(){Pn=function(Yn,Xn){setTimeout(function(){Yn.apply(null,Xn)},0)}});var Mn='1.5.1',Fn='\uFFFF',qn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(Yn){return Fn}}(),Rn='Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.',Un='String expected.',Ln=[],Vn='undefined'!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),zn=Vn,Wn=Vn,Hn=function(Yn){return!/(dexie\.js|dexie\.min\.js)/.test(Yn)};ee(an,Hn);var Gn=function(){},$n=!1,Qn=Qe.idbModules&&Qe.idbModules.shimIndexedDB?Qe.idbModules:{};return P(Oe,yn),P(Oe,{delete:function(Yn){var Xn=new Oe(Yn),Zn=Xn.delete();return Zn.onblocked=function(Jn){return Xn.on('blocked',Jn),this},Zn},exists:function(Yn){return new Oe(Yn).open().then(function(Xn){return Xn.close(),!0}).catch(Oe.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(Yn){return new ce(function(Xn,Zn){var Jn=He(indexedDB);if(Jn){var et=Jn();et.onsuccess=function(nt){Xn(E(nt.target.result,0))},et.onerror=Fe(Zn)}else Ue(function(nt){return Xn(nt),!1})}).then(Yn)},defineClass:function(Yn){return function(Zn){Zn?y(this,Zn):$n&&Ne(this,Yn)}},applyStructure:Ne,ignoreTransaction:function(Yn){return Sn.trans?Te(Sn.transless,Yn):Yn()},vip:function(Yn){return De(function(){return Sn.letThrough=!0,Yn()})},async:function(Yn){return function(){try{var Xn=Le(Yn.apply(this,arguments));return Xn&&'function'==typeof Xn.then?Xn:ce.resolve(Xn)}catch(Zn){return je(Zn)}}},spawn:function(Yn,Xn,Zn){try{var Jn=Le(Yn.apply(Zn,Xn||[]));return Jn&&'function'==typeof Jn.then?Jn:ce.resolve(Jn)}catch(et){return je(et)}},currentTransaction:{get:function(){return Sn.trans||null}},Promise:ce,debug:{get:function(){return an},set:function(Yn){ee(Yn,'dexie'===Yn?function(){return!0}:Hn)}},derive:I,extend:y,props:P,override:A,Events:de,events:{get:re(function(){return de})},getByKeyPath:M,setByKeyPath:F,delByKeyPath:function(Yn,Xn){'string'==typeof Xn?F(Yn,Xn,void 0):'length'in Xn&&[].map.call(Xn,function(Zn){F(Yn,Zn,void 0)})},shallowClone:R,deepClone:U,getObjectDiff:L,asap:O,maxKey:qn,addons:[],connections:Ln,MultiModifyError:mn.Modify,errnames:hn,IndexSpec:Ve,TableSchema:ze,dependencies:{indexedDB:Qn.shimIndexedDB||Qe.indexedDB||Qe.mozIndexedDB||Qe.webkitIndexedDB||Qe.msIndexedDB,IDBKeyRange:Qn.IDBKeyRange||Qe.IDBKeyRange||Qe.webkitIDBKeyRange},semVer:Mn,version:Mn.split('.').map(function(Yn){return parseInt(Yn)}).reduce(function(Yn,Xn,Zn){return Yn+Xn/Math.pow(10,2*Zn)}),fakeAutoComplete:Gn,default:Oe}),B(function(){Oe.dependencies.localStorage=null==('undefined'!=typeof chrome&&null!==chrome?chrome.storage:void 0)?Qe.localStorage:null}),ce.rejectionMapper=function(Yn,Xn){if(!Yn||Yn instanceof ae||Yn instanceof TypeError||Yn instanceof SyntaxError||!Yn.name||!gn[Yn.name])return Yn;var Zn=new gn[Yn.name](Xn||Yn.message,Yn);return'stack'in Yn&&w(Zn,'stack',{get:function(){return this.inner.stack}}),Zn},D(function(){Oe.fakeAutoComplete=Gn=D,Oe.fake=$n=!0}),Oe})}).call(r,d(26),d(84).setImmediate)},83:function(t,r,d){(function(u,h){(function(y,k){'use strict';function P(U){'function'!=typeof U&&(U=new Function(''+U));for(var L=Array(arguments.length-1),V=0;V<L.length;V++)L[V]=arguments[V+1];var z={callback:U,args:L};return B[N]=z,q(N),N++}function w(U){delete B[U]}function I(U){var L=U.callback,V=U.args;switch(V.length){case 0:L();break;case 1:L(V[0]);break;case 2:L(V[0],V[1]);break;case 3:L(V[0],V[1],V[2]);break;default:L.apply(k,V);}}function C(U){if(M)setTimeout(C,0,U);else{var L=B[U];if(L){M=!0;try{I(L)}finally{w(U),M=!1}}}}function E(){q=function(U){h.nextTick(function(){C(U)})}}function A(){if(y.postMessage&&!y.importScripts){var U=!0,L=y.onmessage;return y.onmessage=function(){U=!1},y.postMessage('','*'),y.onmessage=L,U}}function D(){var U='setImmediate$'+Math.random()+'$',L=function(V){V.source===y&&'string'==typeof V.data&&0===V.data.indexOf(U)&&C(+V.data.slice(U.length))};y.addEventListener?y.addEventListener('message',L,!1):y.attachEvent('onmessage',L),q=function(V){y.postMessage(U+V,'*')}}function S(){var U=new MessageChannel;U.port1.onmessage=function(L){var V=L.data;C(V)},q=function(L){U.port2.postMessage(L)}}function O(){var U=F.documentElement;q=function(L){var V=F.createElement('script');V.onreadystatechange=function(){C(L),V.onreadystatechange=null,U.removeChild(V),V=null},U.appendChild(V)}}function K(){q=function(U){setTimeout(C,0,U)}}if(!y.setImmediate){var q,N=1,B={},M=!1,F=y.document,R=Object.getPrototypeOf&&Object.getPrototypeOf(y);R=R&&R.setTimeout?R:y,'[object process]'==={}.toString.call(y.process)?E():A()?D():y.MessageChannel?S():F&&'onreadystatechange'in F.createElement('script')?O():K(),R.setImmediate=P,R.clearImmediate=w}})('undefined'==typeof self?'undefined'==typeof u?this:u:self)}).call(r,d(26),d(12))},84:function(t,r,d){function u(y,k){this._id=y,this._clearFn=k}var h=Function.prototype.apply;r.setTimeout=function(){return new u(h.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new u(h.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(y){y&&y.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(y,k){clearTimeout(y._idleTimeoutId),y._idleTimeout=k},r.unenroll=function(y){clearTimeout(y._idleTimeoutId),y._idleTimeout=-1},r._unrefActive=r.active=function(y){clearTimeout(y._idleTimeoutId);var k=y._idleTimeout;0<=k&&(y._idleTimeoutId=setTimeout(function(){y._onTimeout&&y._onTimeout()},k))},d(83),r.setImmediate=setImmediate,r.clearImmediate=clearImmediate}});